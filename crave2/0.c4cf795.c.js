(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{399:function(e,t,n){"use strict";var i=n(242),r=n(243),a=n(250),o=n(244),s=n(266),c=n(254),l=n(292),u=n(320),m=n(451),p=n(247),d=n.n(p),h=n(298),f=n(285),v=n(445),g=n(439),b=n(440),y=n(441),w=n(442),O=(n(512),new o.a("epg3-item")),E=["movie","program","episode"],N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={airing:!1},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.updateAiring()},t.prototype.componentWillReceiveProps=function(){this.setState({airing:!1},this.updateAiring)},t.prototype.componentWillUnmount=function(){this.timer&&window.clearTimeout(this.timer)},t.prototype.updateAiring=function(){var e=this;this.timer&&window.clearTimeout(this.timer);var t=this.props.currentProgram;if(t&&t.item&&!t.blackout){var n=t.startDate,i=Date.now();Object(f.j)(t)?this.setState({airing:!0}):i<n.getTime()&&(this.timer=window.setTimeout((function(){e.setState({airing:!0})}),n.getTime()-i))}},t.prototype.render=function(){var e=this.props,t=e.item,n=e.currentProgram,a=e.imageOptions,o=e.imageType,s=e.className,c=e.itemMargin,l=e.channelColor,u=e.channelLogo,m=this.state.airing;if(!n||!n.item||n.blackout||!m)return this.renderNoSchedule();var p=n.startDate,v=n.endDate,N=n.item,T=N.type,j=N.title,k=N.showTitle,D=N.seasonNumber,C=N.episodeNumber,I=N.duration,S=!E.includes(T),L=Object(f.i)(n.item);return r.createElement("div",{className:d()(O.b(),s),style:{margin:"".concat(c/2,"px ").concat(c,"px 0 0")}},r.createElement(h.a,Object(i.a)({},this.props,{className:O.e("item",{isBlackout:S}),item:S?{}:n.item,imageType:o,imageOptions:a,titlePosition:"none",itemMargin:0,isLastItem:!1}),!S&&r.createElement("div",{className:O.e("cover")}),!S&&r.createElement(w.a,null),r.createElement(b.a,{logo:u,title:t.channelShortCode,color:l}),!S&&r.createElement(g.a,{startDate:p,endDate:v,duration:I,color:l})),r.createElement(y.a,{title:j,season:D,episode:C,isBlackout:S,isEpisode:L,showTitle:k,airing:!S,startDate:p,endDate:v,showOnNowTitle:!1}))},t.prototype.renderNoSchedule=function(){var e=this.props,t=e.item,n=e.imageOptions,a=e.imageType,o=e.className,s=e.itemMargin,c=e.channelColor,l=e.channelLogo;return r.createElement("div",{className:d()(O.b(),o),style:{margin:"".concat(s/2,"px ").concat(s,"px 0 0")}},r.createElement(h.a,Object(i.a)({},this.props,{className:O.e("item",{isBlackout:!0}),item:{},imageType:a,imageOptions:n,titlePosition:"none",itemMargin:0,isLastItem:!1}),r.createElement(b.a,{logo:l,title:t.channelShortCode,color:c})),r.createElement(y.a,{title:"",isBlackout:!0,airing:!1,isEpisode:!1,showOnNowTitle:!1}))},t}(r.PureComponent),T=Object(v.a)(2,f.a)(N),j=n(443),k=n(246),D=n(251),C=n(478),I=(n(514),new o.a("live-schedule-metadata")),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.startDate,i=t.endDate,a=t.episode;return r.createElement(C.a,{startDate:n,endDate:i,render:function(t){var n=t.scheduleTimeMetadata;return r.createElement("div",{className:I.b()},e.renderTime(n),e.renderTitle(),a&&e.renderEpisodeSubtitle(),!a&&e.renderMovieSubtitle())}})},t.prototype.renderTime=function(e){return!this.props.isBlackout&&r.createElement("div",{className:I.e("time")},e)},t.prototype.renderTitle=function(){var e=this.props.name;return r.createElement("div",{className:d()(I.e("title"))},e)},t.prototype.renderMovieSubtitle=function(){return r.createElement("div",{className:I.e("subtitle")})},t.prototype.renderEpisodeSubtitle=function(){var e=this.props,t=e.season,n=e.episode,i=e.isBlackout,a=e.title;return!i&&(t?r.createElement(D.a,{tagName:"div",className:I.e("subtitle"),values:{season:t,episode:n,title:a}},"@{live_item_schedule_season_title|S{season} E{episode} - {title}"):!(t||!n)&&r.createElement(D.a,{tagName:"div",className:I.e("subtitle"),values:{episode:n,title:a}},"@{live_item_schedule_episode_title|E{episode} - {title}"))},t.defaultProps={title:"",isBlackout:!1},t}(r.Component),L=(n(515),new o.a("live-epg3-item")),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.imageOptions,a=e.imageType,o=e.className,s=e.itemMargin,c=e.isLastItem,l=t.title,u=t.customFields&&t.customFields.itemSchedule,m=u.name,p=u.seasonNo,f=u.episodeNumber,v=u.startDate,g=u.endDate,b=u.isBlackedOut;return r.createElement("div",{className:d()(L.b(),o),style:{margin:"".concat(s/2,"px ").concat(c?0:s,"px 0 0")}},r.createElement(h.a,Object(i.a)({},this.props,{className:L.e("item",{isBlackedOut:b}),item:b?{}:t,imageType:a,imageOptions:n,titlePosition:"none",itemMargin:0})),r.createElement(S,{name:m,title:l,season:p,episode:f,isBlackout:b,startDate:v,endDate:g,item:t}))},t}(r.PureComponent),x=new o.a("epg3"),P=function(e){function Epg3(t){var n=e.call(this,t)||this;return n.convertEpg3List=function(e){var t=e.list,r=e.customFields,a=e.config,o=[];if(r&&r.isCtvCustom)o=t.items.filter((function(e){return"program"===e.type}));else if((o=t.items.filter((function(e){return"channel"===e.type}))).length>0&&o[o.length-1].id!==f.f){var c=Object(l.d)(s.EPG,a),u=r&&r.moreLinkUrl||c,m=Object(f.e)(f.f,u);o.push(m)}n.setState({list:Object(i.a)(Object(i.a)({},t),{items:o,size:o.length})})},n.state={list:t.list},n}return Object(i.c)(Epg3,e),Epg3.prototype.componentWillMount=function(){this.convertEpg3List(this.props)},Epg3.prototype.componentWillReceiveProps=function(e){e.list!==this.props.list&&this.convertEpg3List(e)},Epg3.prototype.render=function(){return r.createElement("div",{className:x.b()},r.createElement(u.a,Object(i.a)({},this.props)),r.createElement(m.a,Object(i.a)({},this.props,{list:this.state.list,imageType:"tile",imageWidth:k.a.tileImageWidth,rowType:"epg3",rowHeight:k.a.linearStandardHeight,component:this.renderComponent,isLiveEntry:!0}),this.props.children))},Epg3.prototype.renderComponent=function(e){var t=Object(f.g)(e.item);if(e.item.customFields&&e.item.customFields.itemSchedule)return r.createElement(M,Object(i.a)({},e));if(e.item.id===f.f)return r.createElement(j.a,Object(i.a)({},e,{channelColor:t,className:"epg3-item"}));var n=Object(f.l)(e.item);return r.createElement(T,Object(i.a)({},e,{channelColor:t,channelLogo:n}))},Epg3}(r.Component);var _=Object(a.connect)((function(e){return{config:e.app.config}}))(P);_.template=c.Epg3;t.a=_},439:function(e,t,n){"use strict";var i=n(242),r=n(243),a=n(244),o=n(285),s=(n(508),new a.a("progress-bar")),c=function(e){function t(t){var n=e.call(this,t)||this;return n.animate=function(e){var t=Date.now(),i=e||n.props,r=i.startDate,a=i.duration,o=(t-r.getTime())/(1e3*a)*100;n.setState({progress:o}),n.timer=window.setTimeout(n.animate,1e3)},n.state={progress:0,backgroundColor:Object(o.c)(t.color).backgroundColor},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.animate(this.props)},t.prototype.componentWillReceiveProps=function(e){this.timer&&window.clearTimeout(this.timer),this.animate(e)},t.prototype.componentWillUnmount=function(){this.timer&&window.clearTimeout(this.timer)},t.prototype.render=function(){var e=this.state,t=e.progress,n=e.backgroundColor;return r.createElement("div",{className:s.b()},r.createElement("div",{className:s.e("bar"),style:{backgroundColor:n,width:"".concat(t,"%")}}))},t}(r.Component);t.a=c},440:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(243),r=n(244),a=n(257),o=n(285),s=(n(509),new r.a("channel-logo"));function c(e){var t=e.logo,n=e.title,r=e.color,c=t&&t!==a.b,l=!c&&!!n,u=l?Object(o.c)(r):void 0;return c||l?c?i.createElement("img",{className:s.b("image"),src:t,alt:n}):i.createElement("div",{className:s.b("short-code"),style:u},n):null}},441:function(e,t,n){"use strict";var i=n(242),r=n(243),a=n(247),o=n.n(a),s=n(244),c=n(268),l=n(251),u=(n(510),new s.a("schedule-metadata")),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return r.createElement("div",{className:u.b()},this.renderTime(),this.renderTitle(),this.renderSubtitle())},t.prototype.renderTime=function(){var e=this.props,t=e.isBlackout,n=e.startDate,i=e.endDate,a=e.showOnNowTitle,o=u.e("time");return!t&&(a?r.createElement(l.a,{tagName:"div",className:o},"@{channel_asset_on_now|ON NOW}"):r.createElement("div",{className:o},Object(c.f)(n)," - ",Object(c.f)(i)))},t.prototype.renderTitle=function(){var e=this.props,t=e.title,n=e.showTitle,i=e.isEpisode?n:t;return e.isBlackout?r.createElement(l.a,{tagName:"div",className:o()(u.e("time","blackout"),"truncate")},"@{channel_not_airing|NOT AIRING}"):r.createElement("div",{className:o()(u.e("title"),"truncate")},i)},t.prototype.renderSubtitle=function(){var e=this.props,t=e.season,n=e.episode,i=e.isBlackout;return!(!e.isEpisode||i)&&r.createElement(l.a,{tagName:"div",className:o()(u.e("subtitle"),"truncate"),values:{season:t,episode:n}},"@{channel_season_title|Season {season} - Episode {episode}}")},t.defaultProps={title:"",airing:!1,isBlackout:!1,isEpisode:!1},t}(r.Component);t.a=m},442:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(243),r=n(247),a=n.n(r);n(511);function o(e){var t=e.className;return i.createElement("div",{className:a()("linear-play-icon",t)})}},443:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(243),r=n(247),a=n.n(r),o=n(244),s=n(257),c=n(285),l=n(251),u=(n(513),new o.a("view-full-schedule"));function m(e){var t=e.focused,n=e.itemMargin,r=e.className,o=e.item,m=e.imageType,p=e.imageOptions,d=e.channelColor,h=e.index,f=e.assetMouseEnter,v=e.onClick,g=Object(s.i)(o.images,m,p)[0],b=g.displayWidth?g.displayWidth:g.width,y=g.displayHeight?g.displayHeight:g.height,w=Object(c.c)(d).backgroundColor;return g.resolved||(y=b/Object(s.e)(g.type)),i.createElement("div",{className:a()(r,u.e("container",{focused:t})),style:{marginTop:"".concat(n/2,"px"),width:"".concat(b,"px"),height:"".concat(y,"px"),backgroundColor:w},onMouseEnter:function(){f&&f(h)},onClick:v},i.createElement(l.a,{tagName:"span"},"@{item_schedule_viewFullSchedule|View Full Schedule}"))}},445:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(242),r=n(243),a=n(250),o=n(386),s={};function c(e){return e.data.reduce((function(e,t){return e[t.channelId]=t,e}),{})}var l=n(268),u=new Map;function m(e){var t=e.channelId,n=e.task,r=e.onTaskComplete,a=e.getNextInterval;return Object(i.b)(this,void 0,void 0,(function(){var e,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,n()];case 1:return e=i.sent(),r(e),o=function(){return m({channelId:t,task:n,onTaskComplete:r,getNextInterval:a})},s=window.setTimeout(o,a()),f(t,s),[2]}}))}))}function p(e,t){var n=t(e),i=n.list,r=n.assetLimit,a=n.timeLimit,u=function(e){if(0===e.length)return new Date;var t=e[e.length-1].endDate;return new Date(t.getTime()+6e4)}(i),m=function(e,t,n){if(e.length){var i=Object(l.a)(new Date,n).getTime()-t.getTime();return i>0?Object(l.c)(i):0}return n}(i,u,a);return i.length>=r||!m?Promise.resolve({schedules:[]}):function(e,t,n){var i=function(e,t){return"".concat(e.toDateString(),"-").concat(e.getUTCHours(),"-").concat(e.getUTCMinutes(),"-").concat(t)}(t,n);return s[i]||(s[i]={channelIds:new Set,promise:new Promise((function(e,r){setTimeout((function(){Object(o.l)(Array.from(s[i].channelIds),t,t.getUTCHours(),n,{intersect:!0}).then(c).then(e,r),delete s[i]}),200)}))}),s[i].channelIds.add(e),s[i].promise.then((function(t){return t[e]}))}(e,u,m)}var d=function(e,t){return function(n){var i=t(n),r=i.list,a=i.assetLimit,o=i.timeLimit,s=function(){return p(n,t)},c=function(e){return function(){var t=e().list[0];if(!t)return 18e5;var n=Date.now();return t.endDate.getTime()-n+1}}((function(){return t(n)})),l=function(t){return e(t.schedules.map(g))};if(u.has(n)){var d=u.get(n);if(!(d.assetLimit<a||d.timeLimit<o))return;v(n),h(n,a,o)}else h(n,a,o);r.length?function(e){var t=e.channelId,n=e.task,i=e.onTaskComplete,r=e.getNextInterval,a=window.setTimeout((function(){return m({channelId:t,task:n,onTaskComplete:i,getNextInterval:r})}),r());f(t,a)}({channelId:n,task:s,onTaskComplete:l,getNextInterval:c}):m({channelId:n,task:s,onTaskComplete:l,getNextInterval:c})}};function h(e,t,n){u.set(e,{timerId:-1,assetLimit:t,timeLimit:n})}function f(e,t){u.set(e,Object(i.a)(Object(i.a)({},u.get(e)),{timerId:t}))}function v(e){var t=u.get(e);void 0!==t&&(clearTimeout(t.timerId),u.delete(e))}function g(e){return Object(i.a)(Object(i.a)({},e),{startDate:new Date(e.startDate),endDate:new Date(e.endDate)})}n(279);var b=n(309);n(257),n(262),n(244);var y=n(249),w=function(e,t){var n,i,r,a=T(e,t);if(Object(y.q)(null===(n=null==a?void 0:a.rocketChannel)||void 0===n?void 0:n.watchPath)){var o=null===(i=a.schedule)||void 0===i?void 0:i[0],s=null===(r=null==o?void 0:o.customFields)||void 0===r?void 0:r.itemSchedule;if(!s)return[];var c=s.startDate,l=s.endDate;return[{id:o.id,channelId:e,startDate:c,endDate:l,item:a.rocketChannel}]}var u=N(e,t);return(null==u?void 0:u.list)||[]},O=function(e,t){return function(e){return e&&e.length&&e[0]}(w(e,t))},E=function(e,t){var n=N(e,t);return!n||n.loading},N=function(e,t){return t.schedule[e]},T=function(e,t){return Object(b.b)(t).find((function(t){return t.streamId===e}))},j=n(495);function k(e,t,n){return function(i,r){var a=!r().schedule.hasOwnProperty(e),o=function(e){return N(e,r())},s=d((function(t){i(D(e,t)),N(e,r()).loading&&i(function(e,t){return{type:j.b,payload:{newState:t,channelId:e}}}(e,!1))}),o);a&&i(function(e,t,n){return{type:j.a,payload:{channelId:e,assetLimit:t,timeLimit:n}}}(e,t,n));var c=o(e);if(t>c.assetLimit||n>c.timeLimit){var l=Math.max(t,c.assetLimit),u=Math.max(n,c.timeLimit);i(C(e,l,u))}i(D(e)),s(e)}}function D(e,t){return void 0===t&&(t=[]),{type:j.d,payload:{channelId:e,nextChunk:t}}}function C(e,t,n){return{type:j.c,payload:{channelId:e,assetLimit:t,timeLimit:n}}}var I=function(e){return e.item.id};function S(e,t){return void 0===e&&(e=2),void 0===t&&(t=8),function(n){var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.pullSchedule()},t.prototype.componentWillUnmount=function(){this.props.releaseSchedule()},t.prototype.render=function(){return r.createElement(n,Object(i.a)({},this.props))},t}(r.PureComponent);return Object(a.connect)((function(e,t){var n=I(t),i=w(n,e);return{config:e.app.config,schedules:i,scheduleLoading:E(n,e),currentProgram:O(n,e),noScheduledItem:!i.length}}),(function(n,i){return{pullSchedule:function(){return n(k(I(i),e,t))},releaseSchedule:function(){return n((e=I(i),function(t){v(e),t(C(e,0,0))}));var e}}}))(o)}}},508:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){},511:function(e,t,n){},512:function(e,t,n){},513:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){}}]);