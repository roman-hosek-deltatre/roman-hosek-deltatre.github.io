(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1045:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(267),i=n(298),r=n(244),c=n(247),l=n.n(c),u=n(610),d=(n(974),new r.a("d1-episode-desc")),p=function(e){function t(t){return e.call(this,t)||this}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.className,a=e.displayThumbnail,o=t.shortDescription,i=a?3:2;return s.createElement("div",{className:l()(d.b(),n)},s.createElement(u.a,{element:"p",className:d.e("text",{displayThumbnail:a}),text:o,displayedLineCount:i}))},t}(s.Component),m=n(246),h=(n(975),new r.a("d2-item")),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focused=!1,t.handleMouseEnter=function(){var e=t.props,n=e.onMouseEnter,a=e.index;n&&n(a)},t.handleMouseClick=function(){var e=t.props,n=e.onClick,a=e.index;n&&n(a)},t}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props.displayThumbnail;return s.createElement("div",{className:h.b(),onMouseEnter:this.handleMouseEnter},this.renderThumbnail(),s.createElement("div",{className:h.e("right")},s.createElement("div",{className:h.e("titleLine")},this.renderTitle(),this.renderDuration()),!e&&this.renderProgress(!1),this.renderDescription()))},t.prototype.componentWillReceiveProps=function(e){e.focused!==this.focused&&(this.focused=e.focused)},t.prototype.renderThumbnail=function(e){void 0===e&&(e=!1);var t=this.props,n=t.episode,a=t.displayThumbnail,o=t.focused;return a?s.createElement("div",{className:h.e("thumbnail"),onClick:this.handleMouseClick},s.createElement(i.a,{item:n,imageType:"tile",imageOptions:{width:m.a.tileImageWidth},itemMargin:0,focused:o}),this.renderPlayIcon(o,!0),this.renderProgress(!0)):this.renderPlayIcon(o)},t.prototype.renderPlayIcon=function(e,t){return void 0===t&&(t=!1),s.createElement("div",{className:h.e("playIcon",{focused:e,isThumbnail:t}),onClick:!t&&this.handleMouseClick})},t.prototype.renderTitle=function(e){var t=this.props.episode,n=t.episodeName,a=t.episodeNumber,o=t.title;return s.createElement("div",{className:h.e("title")},"".concat(a,". ").concat(n||o))},t.prototype.renderDuration=function(){var e=this.props.episode.duration,t=Math.floor(e/3600),n=Math.ceil(e%3600/60),a=t>0?t+"h ":n+"min";return s.createElement("div",{className:h.e("duration")},a)},t.prototype.renderDescription=function(){var e=this.props,t=e.episode,n=e.displayThumbnail;return s.createElement(p,{className:h.e("description"),item:t,displayThumbnail:n})},t.prototype.renderProgress=function(e){var t=this.props,n=t.isSignedIn,a=t.episode,i=n&&Object(o.r)(a.id);if(i&&i.value&&i.state===o.e.Watched){var r=i.value.isFullyWatched?a.duration:i.value.position,c=Math.round(r/a.duration*100);return s.createElement("div",{className:h.e("progress-group",{thumbnail:e})},s.createElement("div",{className:h.e("progress-bar"),style:{width:c+"%"}}))}},t}(s.Component);t.a=f},1066:function(e,t,n){"use strict";n.r(t);var a=n(242),s=n(243),o=n(289),i=n(266),r=n(254),c=n(267),l=n(261),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.c)(t,e),t.prototype.isPlaybackLanguageFlagEnabled=function(){return Object(l.q)(this.props.configGeneral)},t.prototype.render=function(){return this.props.render({isPlaybackLanguageFlagEnabled:this.isPlaybackLanguageFlagEnabled()})},t}(s.Component),d=n(250),p=n(255),m=n(245),h=n(247),f=n.n(h),v=n(244),b=n(257);function g(){var e={},t=new Promise((function(t,n){e.resolve=function(e){return t(e)},e.reject=function(e){return n(e)}}));return e.then=t.then.bind(t),e}var x=n(414),E=n(256),y=n(319),w=n(386),I=n(321),S=n(299),N=(n(961),n(251)),C=new v.a("secondary-action-btn"),D=function(e){function t(t){var n=e.call(this,t)||this;return n.renderIcon=function(e){return s.createElement("i",{className:f()(C.e("icon"),"icon",e)})},n.renderHoverIcon=function(e){if(e)return s.createElement("i",{className:f()(C.e("icon"),"icon icon-hover",e)})},n.handleMouseEnter=function(){var e=n.props,t=e.onMouseEnter,a=e.index;t&&t(a)},n.handleMouseLeave=function(){var e=n.props,t=e.onMouseLeave,a=e.index;t&&t(a)},n.handleMouseClick=function(){n.props.onClick&&n.props.onClick()},n}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.iconClass,a=e.iconClassHovered,o=e.ariaLabel,i=f()("action-button",t);return s.createElement(N.a,{tagName:"button",className:i,onClick:this.handleMouseClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,formattedAriaLabel:o},this.renderHoverIcon(a),this.renderIcon(n))},t}(s.Component),O=function(e){var t=e.className,n=e.bookmarked,a=e.index,o=e.onClick,i=e.onMouseEnter,r=e.onMouseLeave,c=e.ariaLabel;return s.createElement(D,{className:f()("bookmark-btn",t),iconClass:n?"icon-bookmarked":"icon-plus-icon",iconClassHovered:n?"icon-close-button":"icon-plus-icon",index:a,onClick:o,onMouseEnter:i,onMouseLeave:r,ariaLabel:c})},R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMouseEnter=function(){var e=t.props,n=e.onMouseEnter,a=e.index;n&&n(a)},t.handleMouseLeave=function(){var e=t.props,n=e.onMouseLeave,a=e.index;n&&n(a)},t.handleClick=function(){var e=t.props.onClick;e&&e()},t}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.text,o=e.iconClass,i=e.showInfo,r=e.ariaHidden,c=e.ariaLabel,l=e.values;return s.createElement(N.a,Object(a.a)({tagName:"button",onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:t,formattedAriaLabel:c,values:l},r&&{"aria-hidden":!0}||{}),s.createElement("div",{className:"button-content"},!!o&&s.createElement("div",{className:o,"aria-live":"polite"}),s.createElement(N.a,{tagName:"div",values:l||i},n)))},t}(s.Component),k=n(253),j=n(248),T=n(296),M=n(368);function L(e){var t=e.item,n=e.itemDetailCache;if(t)return t.showId&&n[t.showId]?n[t.showId].item||void 0:t}function F(e){var t=e.item,n=e.itemDetailCache,s=e.saveTrailersPageCache,o=function(e,t){if(!Object(S.b)(e)&&!Object(S.a)(e))return e.trailers;var n=Object(M.a)(e,t);if(n){var a=n.season,s=n.show;if(a&&a.trailers&&a.trailers.length)return a.trailers;if(s&&s.trailers&&s.trailers.length)return s.trailers}}(t,n)||[];o.forEach((function(e){return e.path=e.watchPath}));var i="".concat(t.id,"-").concat(T.g),r={key:i,id:i,path:"/list/".concat(i),title:T.g,size:o.length,items:o,paging:{page:1,total:o.length},itemTypes:["trailer"]};return null==s||s(r),Object.assign({},e,{customFields:Object(a.a)(Object(a.a)({},e.customFields),{assetTitlePosition:"below"}),list:r,loadNextListPage:function(e){return{}},loadListPage:function(e,t){return{}}})}function P(e){switch(e){case"SeasonDetail":case"EpisodeDetail":return!0;default:return!1}}var W=n(454),_=n(623),H=n(249),A=(n(964),new v.a("subscription-description")),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.c)(t,e),t.prototype.validateSeasons=function(e){return/^0*$/.test(e)?"":e},t.prototype.getFormattedSubscriptions=function(){var e=this;return this.props.subscriptionInfo.reduce((function(t,n){var s=n.sub,o=n.isSubscribed,i=e.validateSeasons(n.seasons),r=t.find((function(e){var t=e.isSubscribed,n=e.sub,a=e.seasons;return n===s&&t===o&&a===i}));return r?r.lang="".concat(r.lang,",").concat(n.lang):t.push(Object(a.a)(Object(a.a)({},n),{seasons:i})),t}),[])},t.prototype.render=function(){var e=this.props,t=e.subscriptionInfo,n=e.assetType;if(!(null==t?void 0:t.length))return!1;var a=this.getFormattedSubscriptions(),o=Object(H.y)(n);return s.createElement("div",{className:A.b()},s.createElement(N.a,{tagName:"div",className:A.e("label")},"@{subscription_description_title|Included with a subscription to:}"),s.createElement("ul",{className:A.e("list")},a.map((function(e,t){var n=e.seasons,a=e.sub,i=e.lang,r=e.isSubscribed,c=o&&n&&"@{subscription_description_season|Season} ".concat(n," "),l=r?"checkmark":"lock";return s.createElement("li",{key:t,className:A.e("item")},s.createElement("span",{className:A.e("title")},a,"Â "),s.createElement("span",{className:A.e("lang")},c&&s.createElement(N.a,null,c),"(",i,")",s.createElement("i",{className:A.e("icon",l)})))}))))},t}(s.PureComponent),B=n(246),K=n(477),q=n(332),G=n(517),Y=n(518),z=n(385),V=(n(965),new v.a("dh1-hero")),J=function(e){function t(t){var n=e.call(this,t)||this;return n.initWatchState={resume:!1,next:void 0,hasEntitlement:!1,nextPlaybackItem:void 0,suggestionType:c.c.NONE},n.getResumeFromWatchedState=function(e,t,s){return Object(a.b)(n,void 0,void 0,(function(){var n,o,i,r;return Object(a.d)(this,(function(a){switch(a.label){case 0:if(n=this.props,o=n.isSignedIn,i=n.getItemWatchedState,!((Object(H.v)(e.type)||Object(H.w)(e.type))&&t&&o))return s(),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i(e)];case 2:return r=a.sent(),s(r),[3,4];case 3:return a.sent(),s(),[3,4];case 4:return[2]}}))}))},n.getWatchedStateFromNextHandler=function(e,t){try{var a=n.props,s=a.device,o=a.subscriptionCode,i=a.isSignedIn,r=e.id,l=e.customId,u=e.type;if(Object(H.v)(u)||Object(H.w)(u)){var d=Object(c.r)(l),p=Object(H.c)(e);return t({resume:!(!d.value||!d.value.position),next:e,hasEntitlement:p,watched:d,suggestionType:c.c.NONE}),void n.props.handleIsLoading(!1)}var m=function(a){var s,o,i,r;if(a.error)t(n.initWatchState);else{var l=e,u=e,d=c.c.NONE,p=Object(H.c)(e),m=Object(c.r)(e.customId);((null===(s=null==m?void 0:m.value)||void 0===s?void 0:s.isFullyWatched)||Object(S.c)(e)&&m.state===c.e.Unwatched)&&(u=(l=null===(o=null==a?void 0:a.data)||void 0===o?void 0:o.next)||e,d=a.data&&a.data.suggestionType,p=Object(H.c)(u),m=Object(c.r)(u.customId));var h=l.episodeNumber,f=l.seasonNumber||(null===(i=null==l?void 0:l.season)||void 0===i?void 0:i.seasonNumber);n.props.getInitEpisodeAndSeason({episodeNumber:h,seasonNumber:f}),t({resume:!!(null===(r=null==m?void 0:m.value)||void 0===r?void 0:r.position),next:u,hasEntitlement:p,watched:m,suggestionType:d,nextPlaybackItem:l})}};i?Object(y.k)(r,{device:s,expand:"parent",sub:o}).then((function(e){return n.props.handleIsLoading(!1),m(e)})):(n.props.handleIsLoading(!1),Object(w.a)(r,{device:s,expand:"parent"}).then((function(e){return m(e)})))}catch(h){t(n.initWatchState)}},n.restoreSavedState=function(e){var t=e;(null==t?void 0:t.anchorItem)&&n.setState({anchorItem:t.anchorItem,ratingOpened:t.ratingOpened,focused:t.focused,focusState:t.focusState,curIndex:t.curIndex,isCollapsed:t.isCollapsed,titleLines:t.titleLines})},n.setFocus=function(e,t,a,s){var o={focused:e};return n.headContainer&&(e?(s?n.setState(o):n.setState(Object.assign(o,{isCollapsed:!1})),"down"===a&&(n.context.focusNav.blockScrollOnce=!0)):n.setState(o)),!e&&n.state.useItemDetailAria&&n.setShouldUseItemDetailAria(!1),!0},n.moveLeft=function(){if("actions"===n.state.focusState){var e=n.state.curIndex,t=Object(j.g)(e-1,0,n.actionBtns.length-1,!1);n.setState({curIndex:t})}return!0},n.moveRight=function(){if("actions"===n.state.focusState){var e=n.state.curIndex,t=Object(j.g)(e+1,0,n.actionBtns.length-1,!1);n.setState({curIndex:t})}return!0},n.moveUp=function(){var e=n.state,t=e.focusState,a=e.isCollapsed;switch(t){case"actions":a&&n.context.focusNav.canPageScroll()&&n.setState({isCollapsed:!1})}return!1},n.moveDown=function(){var e=n.state,t=e.focusState,a=e.isCollapsed;switch(t){case"actions":!a&&n.context.focusNav.canPageScroll()&&(n.setState({isCollapsed:!0}),n.context.focusNav.blockScrollOnce=!0,setTimeout((function(){n.context.focusNav.pageResize()}),400))}return!1},n.exec=function(e){switch(e){case k.a.CLICK:var t=n.state,a=t.focusState,s=t.curIndex;return"actions"===a&&n.actionBtns[s].click(),!0;case k.a.ESC:}return!1},n.onClickBtn=function(){var e,t=n.state.watchState,a=t.next,s=t.resume,o=t.watched;n.context.detailHelper&&(!(null===(e=null==o?void 0:o.value)||void 0===e?void 0:e.isFullyWatched)&&s?n.context.detailHelper.onClickWatch(a,n.play,!0):n.context.detailHelper.onClickWatch(a,n.play,!1))},n.play=function(e){var t=n.context,a=t.router,s=t.focusNav,o=n.state.watchState.next;e&&o.watchPath&&(s.isEpisodeClicked=!1,a.push(o.watchPath))},n.onWatchTrailer=function(){var e=n.context,t=e.detailHelper,a=e.router,s=n.state.anchorItem.trailers;s.length>0&&t.onClickWatch(s[0],(function(e){e&&a.push(s[0].watchPath)}),!1)},n.onToggleBookmark=function(e){n.props.activeProfile?n.props.toggleBookmark(n.state.anchorItem):(n.context.focusNav.nextAction="bookmark",n.props.promptSignIn())},n.shouldHideSubscribeCTA=function(){var e=n.state.anchorItem;if(!e)return!0;var t=e.subscriptionInfo;return Object(H.r)(e.seasons)&&!(t&&t.length)},n.haveTrailers=function(){var e=n.state.anchorItem.trailers;return!(!e||!e.length)},n.mouseEnterAction=function(){n.context.focusNav.handleRowMouseEnter(n.baseIndex),n.setState({isCollapsed:!1,focusState:"actions"})},n.btnMouseEnter=function(e){n.setState({curIndex:e})},n.btnMouseLeave=function(e){n.actionBtns[e]&&n.actionBtns[e].classList.remove(j.a)},n.bookmarkBtnClick=function(){var e=n.context.detailHelper.getBookmarkState(n.state.anchorItem);n.onToggleBookmark(e)},n.onRefTitle=function(e){n.refTitle=e},n.state={anchorItem:L(t),ratingOpened:!1,focused:!1,focusState:"actions",curIndex:0,isCollapsed:P(t.pageKey),titleLines:1,isWaitingPrimaryCtaReady:!0,watchState:n.initWatchState,useItemDetailAria:!1,nextEntitleMementFlag:!1},n.baseIndex=10*(n.props.index+1),n.focusableRow={focusable:!0,index:n.baseIndex,refRowType:"detail",height:P(t.pageKey)?B.a.dh1CollapsedHeight:B.a.dh1Height,template:t.template,restoreSavedState:n.restoreSavedState,setFocus:n.setFocus,moveLeft:n.moveLeft,moveRight:n.moveRight,moveUp:n.moveUp,moveDown:n.moveDown,exec:n.exec},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){var e=this.context.focusNav;this.headContainer&&(this.focusableRow.height=this.state.isCollapsed?B.a.dh1CollapsedHeight:B.a.dh1Height,this.focusableRow.ref=this.headContainer),e.registerRow(this.focusableRow),this.state.isCollapsed||e.moveToRow(this.focusableRow.index),e.hideGlobalHeader(),this.onItemDetailChanged(this.state.anchorItem),this.ellipsisTitle(),e.hasDH1=!0},t.prototype.componentWillUpdate=function(e,t){var n,a;this.state.curIndex!==t.curIndex&&this.setShouldUseItemDetailAria(!1),(null===(n=this.state.anchorItem)||void 0===n?void 0:n.id)!==(null===(a=t.anchorItem)||void 0===a?void 0:a.id)&&this.onItemDetailChanged(t.anchorItem)},t.prototype.componentDidUpdate=function(){this.headContainer&&(this.focusableRow.height=this.state.isCollapsed?B.a.dh1CollapsedHeight:B.a.dh1Height),this.focusableRow.savedState=Object.assign({},this.state),this.context.focusNav.checkFocus(this.focusableRow),this.context.detailHelper.isInChainingPlay=!1,this.context.focusNav.isCollapsed=this.state.isCollapsed},t.prototype.componentWillReceiveProps=function(e){if(e.item!==this.props.item){var t=L(e);this.setState({anchorItem:t})}e.shouldUpdateWatchState!==this.props.shouldUpdateWatchState&&this.setResumeFromWatchedState(e.shouldUpdateWatchState)},t.prototype.componentWillUnmount=function(){var e=this.context.focusNav;e.unregisterRow(this.focusableRow),e.isCollapsed=!1,e.hasDH1=!1},t.prototype.onItemDetailChanged=function(e){var t=this;e&&(this.setState({isWaitingPrimaryCtaReady:!0}),this.waitUpdatePageAria=g(),this.waitUpdateWatchState=g(),this.waitUpdateNextItem=g(),this.updateItemDetailAria(e),this.waitUpdatePageAria.then((function(){return t.setShouldUseItemDetailAria(!0)})),this.setResumeFromWatchedState(this.props.shouldUpdateWatchState),this.setResumeFromNextHandler(),Promise.all([this.waitUpdateWatchState,this.waitUpdateNextItem,this.waitUpdatePageAria]).then((function(e){t.headContainer&&t.setState({isWaitingPrimaryCtaReady:!1},(function(){t.context.focusNav.handleBrowserFocus()}))})))},t.prototype.setResumeFromWatchedState=function(e){return Object(a.b)(this,void 0,void 0,(function(){var t,n=this;return Object(a.d)(this,(function(a){return t=this.state.anchorItem,this.getResumeFromWatchedState(t,e,(function(e){e?n.setState({watchState:e},(function(){return n.waitUpdateWatchState.resolve()})):n.waitUpdateWatchState.resolve()})),[2]}))}))},t.prototype.setResumeFromNextHandler=function(){var e=this,t=this.state.anchorItem;this.getWatchedStateFromNextHandler(t,(function(t){e.headContainer&&e.setState({watchState:t},(function(){return e.waitUpdateNextItem.resolve()}))}))},t.prototype.render=function(){var e=this,t=this.state,n=t.anchorItem,a=t.focusState,o=t.focused,i=t.isCollapsed,r=t.curIndex,c=t.titleLines,l=this.props,u=l.item,d=l.className,p=l.align;if(!u||!n)return!1;var m=f()(V.b(),d),h="actions"===a&&o,v=2===c;return s.createElement("section",{className:m},s.createElement("div",{className:V.e("top")},this.renderImage(),s.createElement("div",{className:V.e("head-container",{isCollapsed:i,twoLines:v}),ref:function(t){return e.headContainer=t}},s.createElement("div",{className:V.e("info",{left:"left"===p,center:"center"===p})},this.renderTitle(),this.renderMetadata(),this.renderSubscriptions(),this.renderProgressBar(),this.renderDescription(),this.renderPlaybackLanguages(),s.createElement("div",{className:V.e("actions",{focused:h,isCollapsed:i}),ref:function(t){t&&(e.actionBtns=t.querySelectorAll("button"))},onMouseEnter:this.mouseEnterAction},this.renderPrimaryActions(h,r),this.renderSecondaryActions(h,r))))))},t.prototype.renderProgressBar=function(){var e=this.state,t=e.isCollapsed,n=e.watchState,a=Object(z.a)(n,this.props.item),o=a.position,i=a.duration;if(0===o)return!1;var r=Math.round(o/i*100);return r>0&&s.createElement("div",{className:V.e("progress-bar-container",{isCollapsed:t})},s.createElement(K.a,{progress:r,usePercentage:!0}))},t.prototype.renderImage=function(){var e=this.state,t=e.anchorItem,n=e.isCollapsed;if(!t)return!1;var a=t.images;if(!a)return!1;var o={desktopWide:Object(b.i)(a,"wallpaper",{width:B.a.viewportWidth})[0].src};if(!o)return!1;var i=[{src:o.desktopWide}];if(!i)return!1;var r="";this.props.hasOwnProperty("defaultBackgroundColor")&&(r=this.props.defaultBackgroundColor);var c=r?{backgroundColor:"".concat(r)}:{},l=f()(V.e("img-container",{isCollapsed:n}));return s.createElement("div",{className:l,style:c},s.createElement(I.a,{src:i[0].src,sources:i,description:t.title,className:V.e("img")}),s.createElement("div",{className:V.e("img-cover")}),s.createElement("div",{className:V.e("img-container-cover",{isCollapsed:n})}))},t.prototype.renderTitle=function(){var e=this.state.anchorItem;return!!e&&(e.images&&e.images.brand?this.renderBrandTitle():this.renderTextTitle())},t.prototype.ellipsisTitle=function(){var e=this.props.item;this.refTitle&&Object(q.a)(this.refTitle,e.title,2,0)},t.prototype.setShouldUseItemDetailAria=function(e){this.setState({useItemDetailAria:e})},t.prototype.updateItemDetailAria=function(e){var t=this,n=e&&Object(Y.a)(e);n&&this.setState({itemDetailAria:n},(function(){return t.waitUpdatePageAria.resolve()}))},t.prototype.renderTextTitle=function(){var e=this.state.isCollapsed;return s.createElement("div",{ref:this.onRefTitle,className:V.e("title",{isCollapsed:e})},this.state.anchorItem.title)},t.prototype.renderBrandTitle=function(){var e=this.state.anchorItem,t=e.images,n=e.title,a=Object(b.i)(t,"brand",{width:640,format:"png"})[0].src;return s.createElement("img",{src:a,className:V.e("brand"),alt:n})},t.prototype.renderMetadata=function(){var e=this.state.isCollapsed;return s.createElement("div",{className:V.e("metadata",{isCollapsed:e})},this.renderReleaseYears(),this.renderAvailableSeasonCount(),this.renderClassifications())},t.prototype.renderClassifications=function(){var e,t=this,n=this.props,a=n.item,s=n.intl;return(null===(e=a.classifications)||void 0===e?void 0:e.length)>0?a.classifications.map((function(e){var n=e.code,a=n.startsWith("QUEBEC-"),o=n.startsWith("CMPRS-"),i="";return a?i=s.formatMessage({id:"itemDetail_labels_classification_code_quebec"}):o&&(i=s.formatMessage({id:"itemDetail_labels_classification_code_cmprs"})),t.renderClassification(i+e.name,n)})):void 0!==a.classification?this.renderClassification(a.classification.name):void 0},t.prototype.renderClassification=function(e,t){return this.renderMetadataBlock("itemDetail_labels_classification","itemDetail_labels_classification_aria",{classification:e},t)},t.prototype.renderReleaseYears=function(){var e=this.state.anchorItem;if(!e)return null;var t=e.releaseYears,n=Object(S.c)(e);return t?s.createElement("div",{className:f()(V.e("release-year"),{"is-show":n})},t):void 0},t.prototype.renderSubscriptions=function(){var e=this.state,t=e.anchorItem,n=e.isCollapsed;if(!t)return null;var a=t.subscriptionInfo,o=t.type;return a?s.createElement("div",{className:V.e("subscription-description",{isCollapsed:n})},s.createElement(U,{subscriptionInfo:a,assetType:o})):null},t.prototype.renderAvailableSeasonCount=function(){if(!this.state.anchorItem)return null;var e=this.state.anchorItem,t=e.type,n=e.availableSeasonCount,a="show"===t&&n;return a?s.createElement("div",{className:V.e("available-season")},s.createElement(N.a,{"aria-hidden":!0,values:{season:a}},"@{itemDetail_labels_season}")):void 0},t.prototype.renderPlaybackLanguages=function(){var e=this.state,t=e.anchorItem,n=e.isCollapsed,a=t.availablePlaybackLanguages,o=t.originalSpokenLanguage;return s.createElement("div",{className:V.e("playback-language",{isCollapsed:n})},s.createElement(_.a,{playbackLanguages:{available:a,original:o}}))},t.prototype.renderMetadataBlock=function(e,t,n,a){return s.createElement("div",{className:V.e("meta-block"),key:a},s.createElement(N.a,{"aria-hidden":!0,values:n},"@{".concat(e,"}")))},t.prototype.renderPrimaryActions=function(e,t){var n=this,o=this.state,i=o.isWaitingPrimaryCtaReady,r=o.watchState,c=o.anchorItem,l=o.useItemDetailAria,u=o.itemDetailAria,d=r.resume,p=r.hasEntitlement,m=r.watched,h=Object(S.c)(c),v=f()(V.e("watch-btn"),e&&0===t?j.a:""),b=function(e){var t=e.text,o=Object(G.a)(t,n.props.item,r),c=o[0],d=o[1];return l&&u&&(c="".concat(u[0],", ").concat(c),d=Object(a.a)(Object(a.a)({},d),u[1])),s.createElement(R,{className:v,text:t,index:0,onMouseEnter:n.btnMouseEnter,onMouseLeave:n.btnMouseLeave,onClick:n.onClickBtn,ariaHidden:i,ariaLabel:c,values:d})};return s.createElement("div",{className:V.e("primary-actions")},h?function(){var e=n.state.watchState,t=(e||{}).nextPlaybackItem;if(!p){if(n.shouldHideSubscribeCTA())return;o="";return o=t&&t.playLabel?t.playLabel:"@{dh1_subscribe_to_watch|Subscribe to Watch}",b({text:o})}if(t){var a=Object(z.a)(e,n.props.item).position>0;if(Object(H.z)(t.mediaType)){var s=a?"@{dh1_resume|Resume}":"@{dh1_watch|Watch}",o=Object(H.m)(t,c.title,s);return b({text:o})}return b(a?{text:o="@{dh1_resume_episode|Resume S{seasonNumber} E{episodeNumber}}"}:{text:o="@{dh1_show_watch|Watch S{seasonNumber} E{episodeNumber}}"})}}():function(){var e,t=n.state.watchState.next;if(p){var a=!(null===(e=null==m?void 0:m.value)||void 0===e?void 0:e.isFullyWatched)&&d;return b({text:a?"@{dh1_resume|Resume}":"@{dh1_watch|Watch}"})}return b({text:t&&t.playLabel||"@{dh1_subscribe_to_watch|Subscribe to Watch}"})}())},t.prototype.renderSecondaryActions=function(e,t){var n=1,a=2;return this.shouldHideSubscribeCTA()&&(--n,--a),this.haveTrailers()||--a,s.createElement("div",{className:V.e("secondary-actions")},this.renderTrailerButton(e,t,n),this.renderBookmarkButton(e,t,a))},t.prototype.renderTrailerButton=function(e,t,n){var a;if(!this.haveTrailers())return!1;return s.createElement(R,{className:f()(V.e("watch-btn"),(a={},a[j.a]=e&&t===n,a)),text:"@{itemDetail_action_trailer|Trailer}",index:n,onMouseEnter:this.btnMouseEnter,onMouseLeave:this.btnMouseLeave,onClick:this.onWatchTrailer,ariaLabel:"@{itemDetail_action_trailer}"})},t.prototype.renderBookmarkButton=function(e,t,n){var a,o=this.props,i=o.activeProfile,r=o.clientSide;if(!(i&&r))return!1;var c=this.context.detailHelper.getBookmarkState(this.state.anchorItem),l=c?"@{remove_from_my_list_aria}":"@{add_to_my_list_aria}";return s.createElement(O,{className:f()(V.e("sec-btn",{isCollapsed:this.state.isCollapsed}),(a={},a[j.a]=e&&t===n,a)),bookmarked:c,index:n,onMouseEnter:this.btnMouseEnter,onMouseLeave:this.btnMouseLeave,onClick:this.bookmarkBtnClick,ariaLabel:l})},t.prototype.renderDescription=function(){var e=this.state,t=e.focused,n=e.focusState,a=e.anchorItem,o=e.isCollapsed,i=this.props,r=i.item,c=i.intl,l="".concat(c.formatMessage({id:"idp_desc_text_aria"}),": ").concat(a.description);return s.createElement(W.a,{focusable:!0,className:f()(V.e("description",{isCollapsed:o}),t&&"desc"===n?j.a:""),description:a.description||a.shortDescription,title:a.title,index:1-this.baseIndex,playbackLanguages:{available:r.availablePlaybackLanguages,original:r.originalSpokenLanguage},ariaLabel:l})},t.contextTypes={router:m.object.isRequired,focusNav:m.object.isRequired,detailHelper:m.object.isRequired},t}(s.Component);var Q=Object(d.connect)((function(e){var t,n,a=e.app,s=e.account,o=e.profile,i=e.session,r=e.cache,c=!!(null==o?void 0:o.info),l=null===(t=null==s?void 0:s.info)||void 0===t?void 0:t.subscriptionCode;return{account:s,device:null===(n=null==a?void 0:a.contentFilters)||void 0===n?void 0:n.device,isSignedIn:c,profile:o,authPrompts:i.authPrompts,classification:a.config.classification,contentFilters:a.contentFilters,allItemDetailCache:r.itemDetail,subscriptionCode:l}}),(function(e){return{getItemWatchedState:function(t){return Object(x.c)(t)(e)},promptSignIn:function(){return e(Object(E.E)())},toggleBookmark:function(t){return e(Object(x.f)(t))},rateItem:function(t,n){return e(Object(x.d)(t,n))}}}))(Object(p.d)(J));Q.template="Dh1Standard";var Z=Q,$=function(e){function Dh2Centered(t){return e.call(this,t)||this}return Object(a.c)(Dh2Centered,e),Dh2Centered.prototype.render=function(){return s.createElement(Z,Object(a.a)({},this.props,{align:"center"}))},Dh2Centered}(s.Component),D1EpisodeGrid=n(966),D2EpisodeList=n(971),X=n(316),ee=n(446),te=n(519),ne=n(444),ae=n(608),se=n(618),oe=n(610),ie=n(609),re=(n(977),new v.a("episode-info")),ce=function(e){function t(t){var n=e.call(this,t)||this;return n.focusableRow=new k.c(n.props.index),n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.focusableRow.height=B.a.episodeInfoHeight,this.focusableRow.ref=this.ref,this.context.focusNav.registerRow(this.focusableRow)},t.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow)},t.prototype.render=function(){var e=this,t=this.props.item;if(t){var n=t.shortDescription,a=this.props,o=a.mediaType,i=a.seasonNumber;return s.createElement("div",{className:re.b(),ref:function(t){return e.ref=t}},s.createElement(ie.a,{className:re.e("title"),episode:t,seasonNumber:i,mediaType:o,showDuration:!0}),s.createElement(oe.a,{className:re.e("desc"),text:n,displayedLineCount:3}))}},t.contextTypes={focusNav:m.object.isRequired},t}(s.Component),le=(n(978),new v.a("d3")),ue=new v.a("d3-episode"),de=function(e){function D3EpisodeRow(t){var n=e.call(this,t)||this;n.onAfterEllipsis=function(e){n.setState({canFocusonDesc:e})},n.onSeasonChanged=function(e){var t=n.state,a=t.itemDetailData,s=t.curSeasonIndex;if(!(e<0||s===e)){var o=a.show.seasons.items[e];if(o){var i=o.id,r=n.props.itemDetailCache[i];if(r)return a.season=r.item,void n.setState({curSeasonIndex:e,curEpisodeIndex:0,itemDetailData:a});n.setState({curSeasonIndex:e,curEpisodeIndex:0}),n.props.getSeasonDetail(i)}}},n.onEpisodeChanged=function(e){n.setState({curEpisodeIndex:e})},n.isSeasonSelectorVisible=function(){var e,t,a,s=n.state.itemDetailData;if(s||s.show){var o=null===(e=null==s?void 0:s.show)||void 0===e?void 0:e.seasons,i=null===(t=null==s?void 0:s.show)||void 0===t?void 0:t.containsSeasons,r=null===(a=null==s?void 0:s.show)||void 0===a?void 0:a.mediaType,c=Object(H.r)(o),l=Object(H.z)(r),u=1===o.items.length&&!i;return!(c||l&&u)}},n.onEpisodeClick=function(e){if(n.context.detailHelper){var t=n.state.curEpisodeIndex;void 0!==e&&(n.setState({curEpisodeIndex:e}),t=e);var a=n.state.itemDetailData.season.episodes.items[t],s=(a&&Object(c.r)(a.customId)).value,o=a.customFields,i=s&&!s.isFullyWatched&&o&&o.position&&o.position>0;n.context.detailHelper.onClickWatch(a,(function(e){if(e){var t=n.context,s=t.focusNav,o=t.router;s.isEpisodeClicked=!0,o.push(a.watchPath)}}),i)}};var a=t.item,s=t.itemDetailCache,o=(t.customFields||{}).seasonOrder,i=Object(M.a)(a,s,o),r=i.show.seasons,l=i.season?r.items.findIndex((function(e){return e.id===i.season.id})):0,u=i.episode?i.season.episodes.items.findIndex((function(e){return e.id===i.episode.id})):0;return n.state={focused:!1,canFocusonDesc:!1,curSeasonIndex:l,curEpisodeIndex:u,focusState:"season",itemDetailData:i},n.baseIndex=10*(t.index+1),n}return Object(a.c)(D3EpisodeRow,e),D3EpisodeRow.prototype.componentDidMount=function(){var e=this.props,t=e.pageKey,n=e.shouldUpdateWatchState;if(Object(ne.a)(t))switch(t){case"SeasonDetail":this.context.focusNav.moveToRow(this.baseIndex+1);break;case"EpisodeDetail":this.context.focusNav.moveToRow(this.baseIndex+3)}this.setUpdatedEpisodes(n)},D3EpisodeRow.prototype.componentWillReceiveProps=function(e){var t,n,a,s;e.shouldUpdateWatchState!==this.props.shouldUpdateWatchState&&this.setUpdatedEpisodes(e.shouldUpdateWatchState);var o=null===(t=e.initEpisodeAndSeason)||void 0===t?void 0:t.seasonNumber,i=null===(n=this.props.initEpisodeAndSeason)||void 0===n?void 0:n.seasonNumber,r=null===(a=e.initEpisodeAndSeason)||void 0===a?void 0:a.episodeNumber,c=null===(s=this.props.initEpisodeAndSeason)||void 0===s?void 0:s.episodeNumber;if(this.context.focusNav.isEpisodeClicked||o===i&&r===c||(this.onSeasonChanged(e.initEpisodeAndSeason.seasonNumber-1),this.onEpisodeChanged(e.initEpisodeAndSeason.episodeNumber-1)),e.item.id===this.props.item.id){if(JSON.stringify(e.itemDetailCache)!==JSON.stringify(this.props.itemDetailCache||!0)){var l=this.state,u=l.itemDetailData,d=(g=l.curSeasonIndex,e.itemDetailCache[u.show.seasons.items[g].id]);if(!d)return;u.season=d.item,this.setState({itemDetailData:u})}}else{var p=e.initEpisodeAndSeason,m=e.item,h=e.itemDetailCache,f=(e.customFields||{}).seasonOrder,v=Object(M.a)(m,h,f),b=v.show.seasons,g=p&&p.seasonNumber-1||(v.season?b.items.findIndex((function(e){return e.id===v.season.id})):0),x=p&&p.episodeNumber-1||(v.episode?v.season.episodes.items.findIndex((function(e){return e.id===v.episode.id})):0);this.setState({itemDetailData:v,curEpisodeIndex:x,curSeasonIndex:g,focusState:"season"})}},D3EpisodeRow.prototype.setUpdatedEpisodes=function(e){return Object(a.b)(this,void 0,void 0,(function(){var t,n,s,o,i,r,c;return Object(a.d)(this,(function(a){switch(a.label){case 0:return t=this.state.itemDetailData,n=this.props,s=n.getBookmarksByMediaId,o=n.profile,[4,s(t.show.customId)];case 1:return i=a.sent(),r=null==o?void 0:o.info,e&&t&&r&&i?(c=i.payload,this.setState({updatedEpisodes:c}),[2]):[2]}}))}))},D3EpisodeRow.prototype.render=function(){var e,t=this.state,n=t.itemDetailData,a=t.curSeasonIndex,o=t.curEpisodeIndex,i=(this.props.customFields||{}).seasonDescription;if(!n)return null;var r=n.show.seasons,c=n.season;if(!c)return null;var l=c.mediaType,u=c.seasonNumber,d=null===(e=null==c?void 0:c.episodes)||void 0===e?void 0:e.items,p=d&&d[o],m=this.isSeasonSelectorVisible();return!!d.length&&s.createElement("section",{className:f()(le.b(),"clearfix")},m&&s.createElement(ae.a,{index:this.baseIndex+1,seasons:r.items,focusChanged:this.onSeasonChanged,selectedIndex:a}),i&&s.createElement(W.a,{index:this.baseIndex+2,focusable:!0,className:le.e("description"),description:c.description,title:c.title,afterEllipsis:this.onAfterEllipsis}),this.renderEpisodes(d,u,l),p&&this.renderEpisodeInfo(p,u,l))},D3EpisodeRow.prototype.getEpisodeWatchedInfo=function(e){var t=this.state.updatedEpisodes;if(void 0!==t)return t[e]},D3EpisodeRow.prototype.renderEpisodes=function(e,t,n){var a=this;if(e&&e.length){Object(H.a)(this.props.profile,e);var o=e.map((function(e,o){var i=o===a.state.curEpisodeIndex,r=a.props,c=r.activeProfile,l=r.clientSide,u=a.getEpisodeWatchedInfo(e.customId);return s.createElement("div",{className:le.e("episode"),key:"episode-".concat(e.id)},s.createElement(se.a,{episode:e,seasonNumber:t,mediaType:n,updatedEpisode:u,index:o,focused:i,isSignedIn:c&&l,onMouseEnter:a.onEpisodeChanged,onClick:a.onEpisodeClick,showLanguages:a.props.playbackLanguageFlagEnabled}))}));return s.createElement("div",{className:le.e("episodes")},s.createElement(te.a,{items:o,index:this.baseIndex+3,itemWidth:B.a.episodeGridItemWidth+B.a.itemEpisodeMargin,itemSpace:B.a.itemEpisodeMargin,focusChanged:this.onEpisodeChanged,selectedIndex:this.state.curEpisodeIndex,invokeItem:this.onEpisodeClick,refRowType:"detail",rowHeight:B.a.d3EpisodeListHeight,scrollableListHeight:B.a.d3EpisodeListHeight-B.a.d3EpisodeListPaddingTop,template:this.props.template}))}},D3EpisodeRow.prototype.renderEpisodeInfo=function(e,t,n){return s.createElement("div",{className:ue.b()},s.createElement(ce,{item:e,index:this.baseIndex+5,seasonNumber:t,mediaType:n}))},D3EpisodeRow.contextTypes={router:m.object.isRequired,focusNav:m.object.isRequired,detailHelper:m.object.isRequired},D3EpisodeRow}(s.Component);var pe=Object(d.connect)(void 0,(function(e){return{getBookmarksByMediaId:function(t){return e(Object(ee.f)({mediaId:t}))},getSeasonDetail:function(t){return e(Object(X.f)(t))}}}))(de);pe.template=r.D3EpisodeRow;var me=pe,he=n(263),fe=function(e){function t(t){var n=e.call(this,t)||this;return n.state={listProps:F(t)},n}return Object(a.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.item!==this.props.item&&this.setState({listProps:F(e)})},t.prototype.render=function(){var e=this.state.listProps;return!!e&&s.createElement(he.a,Object(a.a)({},e,{imageType:"tile",imageWidth:B.a.trailersItemWidth,rowType:"d4",refRowType:"detail",rowHeight:B.a.d4Height,additionalMetadata:!0}))},t}(s.Component);var D4Trailers=Object(d.connect)(void 0,(function(e){return{saveTrailersPageCache:function(t){return e(Object(X.a)(t))}}}))(fe);D4Trailers.template=r.D4Trailers;var ve=D4Trailers;function D5RecommendationsTile(e){return s.createElement(he.a,Object(a.a)({},e,{imageType:"tile",imageWidth:B.a.tileImageWidth,rowType:"d5",refRowType:"detail",rowHeight:B.a.d5Height}))}function D6RecommendationsPoster(e){return s.createElement(he.a,Object(a.a)({},e,{imageType:"poster",imageWidth:B.a.posterImageWidth,rowType:"d6",refRowType:"detail",rowHeight:B.a.d6Height,hideItemBadge:!1}))}function D7RecommendationsSquare(e){return s.createElement(he.a,Object(a.a)({},e,{imageType:"square",imageWidth:B.a.posterImageWidth,rowType:"d7",refRowType:"detail",rowHeight:B.a.d7Height}))}D5RecommendationsTile.template=r.D5RecommendationsTile,D6RecommendationsPoster.template=r.D6RecommendationsPoster,D7RecommendationsSquare.template=r.D7RecommendationsSquare;n(611);var be=new v.a("d8-cast-crew"),ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMouseEnter=function(){var e=t.props,n=e.onMouseEnter,a=e.index;n&&n(a)},t.handleClick=function(){var e=t.props,n=e.onClick,a=e.index;n&&n(a)},t}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.focused,a=t.character,o=t.name,i=o.charAt(0),r=o.indexOf(" "),c=r>0?o.charAt(r+1):"";return s.createElement("div",{className:be.e("crew-member"),onMouseEnter:this.handleMouseEnter,onClick:this.handleClick},s.createElement("div",{className:be.e("circle",{focused:n})},"".concat(i).concat(c)),s.createElement("div",{className:be.e("actor")},o),s.createElement("div",{className:be.e("character",{focused:n,show:!!a})},a||"_"))},t}(s.Component),xe=new v.a("d8-cast-crew"),Ee=function(e){function D8CastCrew(t){var n=e.call(this,t)||this;return n.actors=[],n.onFocusChanged=function(e){n.setState({selectedIndex:e})},n.invokeItem=function(e){n.context.router.push(n.actors[e].path)},n.state={selectedIndex:0},n}return Object(a.c)(D8CastCrew,e),D8CastCrew.prototype.render=function(){var e,t=this,n=this.props.item,o=!1;if(n?e=n.credits||[]:(o=!0,e=this.props.people),this.actors=e.filter((function(e){return"actor"===e.role||o})).slice(0,30),0===this.actors.length)return s.createElement("div",{className:xe.e("empty")});var i=this.actors.map((function(e,n){var a=n===t.state.selectedIndex;return s.createElement(ge,{key:"d8-cast-crew-".concat(n),item:e,focused:a,index:n,onMouseEnter:t.onFocusChanged,onClick:t.invokeItem})}));return s.createElement("div",{className:xe.b()},this.props.title&&s.createElement("div",{className:xe.e("title")},this.props.title),s.createElement(te.a,Object(a.a)({},this.props,{items:i,index:10*(this.props.index+1),rowIndex:this.props.index,selectedIndex:this.state.selectedIndex,itemWidth:B.a.castCrewImageWidth+B.a.itemMargin,itemSpace:B.a.itemMargin,focusChanged:this.onFocusChanged,invokeItem:this.invokeItem,refRowType:"detail",entryProps:this.props,rowHeight:this.props.title?B.a.d8Height+B.a.d8TitleHeight:B.a.d8Height,scrollableListHeight:B.a.d8Height,template:this.props.template})))},D8CastCrew.contextTypes={router:m.object.isRequired},D8CastCrew}(s.Component),ye=n(516),we=(n(979),new v.a("d9")),Ie=new v.a("d9-cast-row"),Se=function(e){function D9CastCrewText(t){var n=e.call(this,t)||this;return n.roleGroup=[],n.roleRefGroup=[],n.hasLoad=!1,n.requiredRoles=[{dataKey:"director",labelKey:"@{itemDetail_cast_directors_label|{peopleCount, plural, one {Director} other {Directors}}}"},{dataKey:"actor",labelKey:"@{itemDetail_cast_actors_label|Cast}"},{dataKey:"producer",labelKey:"@{itemDetail_cast_producers_label|{peopleCount, plural, one {Producer} other {Producers}}}"},{dataKey:"writer",labelKey:"@{itemDetail_cast_writers_label|{peopleCount, plural, one {Writer} other {Writers}}}"}],n.setFocus=function(e){return n.setState({isFocused:e}),!0},n.handleMouseEnter=function(){n.context.focusNav.handleRowMouseEnter(n.focusableRow.index)},n.handleMouseLeave=function(){n.setFocus(!1)},n.renderCreditRow=function(e){var t=(n.props.item.credits||[]).filter((function(t){return t.role===e.dataKey})).slice(0,20);return!!t.length&&s.createElement("tr",{key:e.dataKey,className:Ie.b()},s.createElement(ye.a,{elementType:"td",className:f()(Ie.e("role")),values:{peopleCount:t.length}},e.labelKey),s.createElement("td",{className:Ie.e("names")},s.createElement("div",{className:Ie.e("namesDiv"),ref:function(t){return n.onRefRow(t,e)}},t.map((function(e,a){return n.renderLink(e,a,a===t.length-1)})))))},n.onRefRow=function(e,t){},n.onRefCredit=function(e,t,n){},n.state={isFocused:!1},n.focusableRow={focusable:!0,index:10*(t.index+1),dynamicHeight:!0,height:1,template:t.template,entryProps:t,restoreSavedState:n.setState,setFocus:n.setFocus,moveLeft:j.e,moveRight:j.e,moveUp:j.c,moveDown:j.c,exec:j.c},n}return Object(a.c)(D9CastCrewText,e),D9CastCrewText.prototype.componentDidMount=function(){this.focusableRow.ref=this.ref,this.context.focusNav.registerRow(this.focusableRow)},D9CastCrewText.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow)},D9CastCrewText.prototype.render=function(){var e=this;return 0===(this.props.item.credits||[]).length?(this.focusableRow.focusable=!1,s.createElement("div",{className:we.e("empty")})):s.createElement("div",{className:we.b({focused:this.state.isFocused}),ref:function(t){return e.ref=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.title&&s.createElement("div",{className:we.e("title")},this.props.title),s.createElement("div",{className:we.b()},s.createElement("table",{className:we.e("list")},s.createElement("tbody",null,this.requiredRoles.map(this.renderCreditRow)))))},D9CastCrewText.prototype.renderLink=function(e,t,n){var a=this,o=e.key||"credit-".concat(t);return s.createElement("span",{key:o,className:Ie.e("name"),ref:function(n){return a.onRefCredit(n,e,t)}},e.name+(n?"":","))},D9CastCrewText.contextTypes={focusNav:m.object.isRequired},D9CastCrewText}(s.Component),Ne=n(494),Ce=n(284),De=n(268),Oe=n(298),Re=n(320),ke=(n(980),[{dataKey:"releaseYear",labelKey:"@{itemDetail_meta_released_label|Released}"},{dataKey:"genres",labelKey:"@{itemDetail_meta_genres_label|Genres}"},{dataKey:"duration",labelKey:"@{itemDetail_meta_duration_label|Duration}"},{dataKey:"hasClosedCaptions",labelKey:"@{itemDetail_meta_cc_label|Closed Captions}"}]),je=[{dataKey:"genres",labelKey:"@{itemDetail_meta_genres_label|Genres}"},{dataKey:"availableSeasonCount",labelKey:"@{itemDetail_meta_season_label|Seasons}"}],Te=new v.a("d10"),Me=new v.a("d10-table"),Le=new v.a("d10-rating"),Fe=function(e){function D10Info(t){var n=e.call(this,t)||this;return n.setFocus=function(e){return n.setState({isFocused:e}),!0},n.handleMouseEnter=function(){n.context.focusNav.handleRowMouseEnter(n.focusableRow.index)},n.handleMouseLeave=function(){n.setFocus(!1)},n.state={isFocused:!1},n.focusableRow={focusable:!0,index:10*(t.index+1),dynamicHeight:!0,height:1,template:t.template,entryProps:t,restoreSavedState:n.setState,setFocus:n.setFocus,moveLeft:j.e,moveRight:j.e,moveUp:j.c,moveDown:j.c,exec:j.c},n}return Object(a.c)(D10Info,e),D10Info.prototype.componentDidMount=function(){this.focusableRow.ref=this.ref,this.context.focusNav.registerRow(this.focusableRow)},D10Info.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow)},D10Info.prototype.mapClassificationImage=function(e,t){if(!t)return!1;var n={};for(var a in e)a===t&&(n={iconSrc:e[a].images.icon,text:e[a].advisoryText});return n},D10Info.prototype.render=function(){var e=this,t=Object(ne.b)(this.props);if(!t)return!1;var n="show"===t.type?je:ke,o=void 0!==t.classification?t.classification.code:"undefined",i=this.mapClassificationImage(this.props.classification,o),r=t.customMetadata||[];return s.createElement("div",{className:Te.b({focused:this.state.isFocused}),ref:function(t){return e.ref=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},s.createElement(Re.a,Object(a.a)({},this.props)),s.createElement("div",null,s.createElement("div",{className:Te.e("info")},this.renderImage(t),s.createElement("div",{className:Te.e("table-content")},s.createElement("table",{className:f()(Me.b())},s.createElement("tbody",null,n.filter((function(e){return t.hasOwnProperty(e.dataKey)&&t[e.dataKey]})).map((function(n,a){return e.renderRow(n.dataKey,t,n.labelKey,a)})),r.map((function(t,n){return e.renderCustomMetaData(t.name,t.value,n)})))),this.renderClassification(i,t.advisoryText),this.renderCopyright(t.copyright)))))},D10Info.prototype.renderClassification=function(e,t){if(!e.iconSrc)return!1;var n={icon:e.iconSrc},a=Object(b.h)(n,"icon",{width:B.a.d10InfoIconWidth,format:"png"});return s.createElement("div",{className:f()(Le.b())},s.createElement(Ce.a,{src:a.src,className:f()(Le.e("image"))}),s.createElement("span",{className:f()(Le.e("text"))},t||e.text))},D10Info.prototype.renderCopyright=function(e){return!!e&&s.createElement("div",{className:Te.e("copyright")},e)},D10Info.prototype.renderRow=function(e,t,n,a){var o=t[e];if(!o)return!1;var i=this.renderRowValue(e,o,t);return!!i&&s.createElement("tr",{className:Me.e("tr"),key:"row-".concat(a)},s.createElement(N.a,{tagName:"th",className:Me.e("header")},n),i)},D10Info.prototype.renderRowValue=function(e,t,n){switch(e){case"duration":return this.renderDuration(t);case"hasClosedCaptions":return this.renderClosedCaptioning(t);case"genres":return this.renderGenres(t,n);default:return s.createElement("td",{className:Me.e("cell")},t)}},D10Info.prototype.renderDuration=function(e){if(e<1)return!1;var t=Object(De.g)(e),n=t.hour,a=t.minute;return s.createElement("td",{className:Me.e("cell")},n>0&&s.createElement(N.a,{values:{hour:n}},"@{itemDetail_meta_duration_hour|{hour, number} {hour, plural, one {hour} other {hours}}} "),a>0&&s.createElement(N.a,{values:{minute:a}},"@{itemDetail_meta_duration_minute|{minute, number} {minute, plural, one {minute} other {minutes}}}"))},D10Info.prototype.renderClosedCaptioning=function(e){return!!e&&s.createElement(N.a,{tagName:"td",className:Me.e("cell")},"@{itemDetail_meta_cc_available|Available}")},D10Info.prototype.renderCustomMetaData=function(e,t,n){return s.createElement("tr",{key:"meta-".concat(n)},s.createElement("th",{className:Me.e("header")},e),s.createElement("td",{className:Me.e("cell")},t))},D10Info.prototype.removeDuplication=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))},D10Info.prototype.renderGenres=function(e,t){if(!e)return!1;e=this.removeDuplication(e).slice(0,6);for(var n=t.genrePaths||[],a=[],o="",i=n.length===e.length&&!0,r=0;r<e.length;r++){var c=e[r],l=0===r?"":", ";if(i){var u=s.createElement(Ne.a,{key:0===r?c:void 0,to:n[r],className:Me.e("genre")},c);0===r?a.push(u):a.push(s.createElement("span",{key:c},s.createElement("span",null,l),u))}else o+=l+c}return s.createElement("td",{className:Me.e("cell")},a.length>0?a:o)},D10Info.prototype.renderImage=function(e){if(e.images){var t=this.props.itemImageTypes?this.props.itemImageTypes[e.type]:void 0;return t||(t="episode"===e.type||"show"===e.type?"tile":"poster"),s.createElement("div",{className:Te.e("image")},s.createElement(Oe.a,{item:e,imageType:t,imageOptions:{width:B.a.posterImageWidth},itemMargin:0,focused:!1,hideItemBadge:!0}))}},D10Info.contextTypes={router:m.object.isRequired,focusNav:m.object.isRequired},D10Info}(s.Component);var Pe=Object(d.connect)((function(e){return{classification:e.app.config.classification,itemImageTypes:e.app.config.general&&e.app.config.general.itemImageTypes}}))(Fe);Pe.template=r.D10Info;var We=Pe,_e=n(292),He=n(451),Ae=n(285),Ue=n(441),Be=n(439),Ke=n(440),qe=n(442),Ge=(n(981),new v.a("ch2-item")),Ye=function(e){function t(t){var n=e.call(this,t)||this;return n.state={airing:!1},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.item.schedule,n=t.startDate,a=Date.now();Object(Ae.j)(t)?this.setState({airing:!0}):a<n.getTime()&&(this.timer=window.setTimeout((function(){e.setState({airing:!0})}),n.getTime()-a))},t.prototype.componentWillUnmount=function(){this.timer&&window.clearTimeout(this.timer)},t.prototype.componentDidUpdate=function(e,t){var n=this.props,a=n.onNowItemPathChange,s=n.item,o=n.channel;a&&!t.airing&&this.state.airing&&a(s.id,o.path)},t.prototype.render=function(){var e=this.props,t=e.isShowLogo,n=e.item,o=e.channel,i=e.channelColor,r=e.itemMargin,c=e.imageOptions,l=n.title,u=n.showTitle,d=n.seasonNumber,p=n.episodeNumber,m=n.schedule,h=n.duration,f=m.startDate,v=m.endDate,b=m.blackout,g=this.state.airing,x=Object(Ae.i)(n),E=Object(Ae.l)(o),y=g&&!b;return s.createElement("div",{className:Ge.b(),style:{margin:"".concat(r/2,"px ").concat(r,"px 0 0")}},s.createElement(Oe.a,Object(a.a)({},this.props,{className:Ge.e("item"),item:n,imageType:"tile",imageOptions:c,titlePosition:"none",itemMargin:0,isLastItem:!1}),(y||t)&&s.createElement("div",{className:Ge.e("cover")}),y&&s.createElement(qe.a,null),t&&s.createElement(Ke.a,{logo:E,title:o.channelShortCode,color:i}),y&&s.createElement(Be.a,{startDate:f,endDate:v,duration:h,color:i})),s.createElement(Ue.a,{title:l,showTitle:u,season:d,episode:p,isBlackout:b,isEpisode:x,airing:g,startDate:f,endDate:v,showOnNowTitle:g}))},t}(s.Component),ze=n(445),Ve=(n(982),new v.a("no-schedule"));function Je(e){var t=e.focused;return s.createElement("div",{className:Ve.b({focused:t})},s.createElement(N.a,{tagName:"div"},"@{item_schedule_noSchedule|No schedule currently available}"))}var Qe=n(443);var Ze=Object(ze.a)(Ae.b+1,Ae.a)((function(e){var t=e.config,n=e.item,o=e.loading,r=e.customFields,c=e.rowType,l=e.isChdEntry,u=e.schedules;if(o)return!1;if((u=u.filter((function(e){return!e.blackout&&e.endDate.getTime()>Date.now()}))).length>0){var d=u[0],p=d.startDate,m=d.endDate,h=Object(De.q)(new Date,p,m);u=u.slice(0,h?Ae.b+1:Ae.b)}var f=Object(_e.d)(i.EPG,t),v=r&&r.moreLinkUrl||f,b=Object(Ae.d)(n,u,Ae.k,Ae.f,v),g=Object(Ae.g)(n);return s.createElement(He.a,Object(a.a)({},e,{list:b,imageWidth:B.a.tileImageWidth,rowHeight:B.a.linearStandardHeight,imageType:"tile",rowType:c,component:function(t){return function(e,t,n){var o=t.item,i=t.index,r=t.className;return o.id===Ae.k?s.createElement(Je,Object(a.a)({},t)):o.id===Ae.f?s.createElement(Qe.a,Object(a.a)({},t,{channelColor:n,className:"ch2-item"})):s.createElement(Ye,Object(a.a)({},t,{channel:e.item,imageOptions:{width:B.a.tileImageWidth},isShowLogo:e.showChannelLogo&&!i,channelColor:n,className:r}))}(e,t,g)},isChdEntry:l,isLiveEntry:!0}))})),$e=new v.a("ch2");function Xe(e){var t=e.customFields;return s.createElement("div",{className:$e.b()},s.createElement(Re.a,Object(a.a)({},e)),s.createElement(Ze,Object(a.a)({},e,{showChannelLogo:t.showChannelLogo,rowType:"ch2"})))}Xe.template=r.CH2;var et=function(e){function t(t){return e.call(this,t)||this}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.context.focusNav.focusOnFirstRow()},t.prototype.componentDidUpdate=function(){this.context.focusNav.checkFocus()},t.prototype.render=function(){return s.createElement("div",null)},t.contextTypes={focusNav:m.object.isRequired},t}(s.Component),tt=et;et.template="CHD1";var nt=n(303),at=new v.a("chd2");var st=Object(d.connect)((function(e){return{activePageId:Object(nt.i)(e)}}))((function(e){var t=e.item,n=e.activePageId,o=e.customFields;return s.createElement("div",{className:at.b()},s.createElement(Re.a,Object(a.a)({},e)),n&&s.createElement(Ze,Object(a.a)({},e,{item:Object(a.a)(Object(a.a)({},t),{id:n}),showChannelLogo:o.showChannelLogo,rowType:"chd2",isChdEntry:!0})))}));st.template=r.CHD2;var ot=st,Epg3=n(399),it=[Z,$,D1EpisodeGrid.a,D2EpisodeList.a,me,ve,D5RecommendationsTile,D6RecommendationsPoster,D7RecommendationsSquare,Ee,Se,We,Xe,tt,ot,Epg3.a],rt="",ct=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitEpisodeAndSeason=function(e){var t=e.seasonNumber,s=e.episodeNumber;return n.setState((function(e){return Object(a.a)(Object(a.a)({},e),{initEpisodeAndSeason:{seasonNumber:t,episodeNumber:s}})}))},n.state={initEpisodeAndSeason:null,shouldUpdateWatchState:!1},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.checkForPendingUpdate(this.props.lastWatchedItemId)},t.prototype.componentWillReceiveProps=function(e){e!==this.props&&this.checkForPendingUpdate(e.lastWatchedItemId)},t.prototype.checkForPendingUpdate=function(e){Object(c.k)(e,c.b.SAVING_RESUME_POSITON)||this.setState({shouldUpdateWatchState:!0})},t.prototype.render=function(){var e=this;if(this.props.hasOwnProperty("themes")){var t=this.props.themes;if(t&&t.length>0){var n=t.find((function(e){return"Background"===e.type}));if(n){var a=n.colors.find((function(e){return"Primary"===e.name}));a&&(rt=a.value)}}}return s.createElement(u,{configGeneral:this.props.configGeneral,render:function(t){var n=t.isPlaybackLanguageFlagEnabled;return s.createElement("div",{className:"item-detail"},e.renderEntries(e.props,n))}})},t.prototype.renderEntries=function(e,t){var n=this,a=e.entries,s=e.renderEntry,o=e.item,i=e.cache,c=e.pageKey,l=e.profile;return(a||[]).map((function(e,a){var u;return"ItemDetailEntry"===e.type&&(u={itemDetailCache:i,item:o,pageKey:c,defaultBackgroundColor:rt,playbackLanguageFlagEnabled:t,profile:l,key:o.id,getInitEpisodeAndSeason:function(){}}),e.template!==r.Dh1Standard&&e.template!==r.D3EpisodeRow||(u.shouldUpdateWatchState=n.state.shouldUpdateWatchState),e.template===r.D3EpisodeRow&&(u.initEpisodeAndSeason=n.state.initEpisodeAndSeason),e.template===r.Dh1Standard&&(u.getInitEpisodeAndSeason=n.getInitEpisodeAndSeason),s(e,a,u)}))},t}(s.Component);t.default=Object(o.b)(ct,{template:i.ItemDetailTemplates,entryRenderers:it,mapStateToProps:function(e){var t,n=e.profile,a=e.cache,s=e.app,o=a.itemDetail,r=Object.entries(a.page),c=r&&r[r.length-1],l=c&&c[1];return{cache:o,profile:n,isComingFromPlayer:(null==l?void 0:l.key)===i.Watch,lastWatchedItemId:void 0,configGeneral:null===(t=null==s?void 0:s.config)||void 0===t?void 0:t.general}}})},321:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(284),i=n(257),r=(n(333),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.sources,r=e.description,c=e.width,l=e.height,u=e.className,d=e.ariaHidden,p=e.onLoad,m=e.onError,h=e.imageClassName,f={};return!d&&r||(f["aria-hidden"]=!0),s.createElement("picture",Object(a.a)({className:u},f),n&&n.map((function(e,t){var n=e.src,a=e.srcSet,o=e.mimeType,r=e.mediaQuery,l=e.sizes;var u=n||Object(i.c)(a),d=Object(i.d)(a,l,c);return s.createElement("source",{key:"source-".concat(t),srcSet:u,type:o,media:r,sizes:d})})),s.createElement(o.a,{src:t,description:r,width:c,height:l,className:h||u,onLoad:p,onError:m}))},t}(s.Component));t.a=r},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(243),s=n(244),o=(n(352),new s.a("ed-html"));function i(e){var t=e.innerHTML.replace(/<ul>/g,"<div><ul>").replace(/<\/ul>/g,"</ul></div>").replace(/<ol>/g,"<div><ol>").replace(/<\/ol>/g,"</ol></div>");return e.textWrap&&(t=t.replace(/\n/g,"<br>")),a.createElement("div",{className:o.b(),dangerouslySetInnerHTML:{__html:t}})}},352:function(e,t,n){},371:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(245),i=n(244),r=n(248),c=n(249),l=n(322),u=n(246),d=(n(396),new i.a("scrollable-text")),p=function(e){function t(t){var n=e.call(this,t)||this;return n.setFocus=function(e){return!0},n.moveUp=function(){var e=n.state.transY;return 0===e||(e+=u.a.scrollablePageSize,e=Math.min(e,0),n.setState({transY:e})),!0},n.moveDown=function(){var e=n.state.transY,t=n.state.containerHeight,a=-n.refContent.clientHeight+t;return n.refContent.clientHeight<t||e===a||(e-=u.a.scrollablePageSize,e=Math.max(e,a),n.setState({transY:e})),!0},n.onReference=function(e){n.ref=e},n.onRefTitle=function(e){n.refTitle=e},n.onRefContent=function(e){n.refContent=e},n.state={transY:0,containerHeight:0},n.focusableRow={focusable:!0,index:-1,height:0,ref:void 0,restoreSavedState:function(){},setFocus:n.setFocus,moveLeft:r.e,moveRight:r.e,moveUp:n.moveUp,moveDown:n.moveDown,exec:r.c},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.context.focusNav.setFocus(this.focusableRow),this.props.title?this.setState({containerHeight:this.ref.clientHeight-2*u.a.scrollableTextModalPadding-this.refTitle.clientHeight}):this.setState({containerHeight:this.ref.clientHeight-2*u.a.scrollableTextModalPadding})},t.prototype.componentWillUnmount=function(){this.context.focusNav.resetFocus()},t.prototype.render=function(){var e=this.props,t=e.children,n=e.text,a=e.customFields,o=e.title,i=this.state,p=i.transY,m=i.containerHeight,h=Object(r.f)(p+"px",200,0,!0,a&&a.textColor?{color:a.textColor.color,opacity:a.textColor.opacity/100}:void 0),f=this.refContent?this.refContent.clientHeight:0,v=Object(r.f)(p/(-f+m)*(m-u.a.scrollableTextModalScrollBarHeight)+"px",200,0,!0),b=f>=m;return s.createElement("div",{className:d.b(),ref:this.onReference},o&&s.createElement("div",{className:d.e("title"),ref:this.onRefTitle},o),s.createElement("div",{className:d.e("container"),style:{height:m+"px"}},s.createElement("div",{className:d.e("content",Object(c.C)(a&&a.textHorizontalAlignment)),style:h,ref:this.onRefContent},void 0!==n&&s.createElement(l.a,{innerHTML:n}),void 0!==t&&t),b&&s.createElement("div",{className:d.e("scrollbar")},s.createElement("div",{className:d.e("cursor"),style:v}))))},t.contextTypes={focusNav:o.object.isRequired},t}(s.Component);t.a=p},396:function(e,t,n){},444:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));n(368);function a(e){var t=e.item,n=e.itemDetailCache;if(t)return t.showId&&n[t.showId]?n[t.showId].item||void 0:t}function s(e){switch(e){case"SeasonDetail":case"EpisodeDetail":return!0;default:return!1}}},454:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(245),i=n(244),r=n(247),c=n.n(r),l=n(255),u=n(332),d=n(253),p=n(248),m=n(362),h=n(246),f=n(322),v=n(371),b=n(623),g=function(e){var t=e.title,n=e.description,a=e.playbackLanguages;return s.createElement(v.a,{title:t},s.createElement(f.a,{innerHTML:n}),s.createElement(b.a,{playbackLanguages:a}))},x=n(312),E=(n(963),new i.a("d1-season-desc")),y=function(e){function t(t){var n=e.call(this,t)||this;return n.setFocus=function(e){return!(!n.focusableRow||!n.focusableRow.focusable)&&(n.setState({isFocused:e}),!0)},n.exec=function(e){var t=n.state.isFocused,a=n.props,o=a.description,i=a.playbackLanguages,r=a.title;switch(e){case d.a.CLICK:return n.context.focusNav.analytics.triggerCtaClickEvent({type:x.c.More,elementType:x.a.Button,position:x.b.Left,elementInnerText:n.refCta.innerText}),t&&n.context.focusNav.showDialog(s.createElement(g,{description:o,playbackLanguages:i,title:r})),!0}return!1},n.ellipsisText=function(){n.refDescription&&(n.hasEllipsis&&n.refDescription.scrollHeight<=n.refDescription.clientHeight||(!n.hasEllipsis&&n.refDescription.scrollHeight<=n.refDescription.clientHeight&&n.displayNormalText(),n.displayEllipsisText()))},n.displayNormalText=function(){var e=n.props,t=e.description,a=e.focusable,s=e.afterEllipsis;n.setState({description:t,isEllipsis:!1}),n.focusableRow.focusable=a,n.hasEllipsis=!0,s&&s(!1)},n.displayEllipsisText=function(){var e=n.props,t=e.focusable,a=e.afterEllipsis,s=n.state.description,o=Object(u.a)(n.refDescription,s,3,h.a.detailDescPaddingTop);n.setState({description:o,isEllipsis:!0}),n.hasEllipsis=!0,n.focusableRow.focusable=t,a&&a(!0)},n.onRefContent=function(e){n.refContent=e},n.onRefDescription=function(e){n.refDescription=e},n.onRefCta=function(e){n.refCta=e},n.onMouseEnter=function(){n.focusableRow&&n.focusableRow.focusable&&n.context.focusNav.handleRowMouseEnter(n.focusableRow.index)},n.onMouseLeave=function(){n.setFocus(!1)},n.onClick=function(){n.focusableRow&&n.focusableRow.focusable&&n.exec(d.a.CLICK)},n.state={isEllipsis:!1,description:t.description,isFocused:!1},t.focusable&&(n.focusableRow={focusable:!1,index:t.index,dynamicHeight:!0,height:1,restoreSavedState:n.setState,setFocus:n.setFocus,moveLeft:p.e,moveRight:p.e,moveUp:p.c,moveDown:p.c,exec:n.exec}),n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.props.focusable?(this.context.focusNav.registerRow(this.focusableRow),this.focusableRow.ref=this.refContent):this.refContent&&this.props.setDescHeight&&this.props.setDescHeight(this.refContent.offsetHeight),this.ellipsisText()},t.prototype.componentWillUnmount=function(){this.props.focusable&&this.context.focusNav.unregisterRow(this.focusableRow)},t.prototype.componentDidUpdate=function(){this.ellipsisText(),this.refContent&&this.props.setDescHeight&&this.props.setDescHeight(this.refContent.offsetHeight)},t.prototype.render=function(){var e,t,n=this,a=this.props,o=a.className,i=a.onMouseEnter,r=a.onMouseLeave,u=a.onClick,d=a.ariaLabel,h=this.state,f=h.description,v=h.isEllipsis,b=h.isFocused;return s.createElement("div",{className:c()(o,E.b({isEllipsis:v}),(e={},e[p.a]=b,e))},s.createElement("div",{className:E.e("text-wrapper"),ref:this.onRefContent,onMouseEnter:i||this.onMouseEnter,onMouseLeave:r||this.onMouseLeave,onClick:u||this.onClick},s.createElement("div",{className:E.e("text",(t={},t[p.a]=b,t)),ref:this.onRefDescription,tabIndex:0,role:Object(m.d)(),"aria-label":d},f)),s.createElement(l.a,{id:"more_btn"},(function(e){var t;return s.createElement("button",{ref:n.onRefCta,className:c()(E.e("button"),(t={},t[p.a]=b,t))},e)})))},t.defaultProps={focusable:!0},t.contextTypes={focusNav:o.object.isRequired},t}(s.Component);t.a=y},516:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(255),i=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return e.replace(/@\{([^@]+)\}/g,n.getFormattedMessage)},n.getFormattedMessage=function(e,t){var a=n.props,s=a.intl,o=a.defaults,i=t.split("|"),r=i[0],c=i[1];return!c&&o&&(c=o[r]),s.formatMessage({id:r,defaultMessage:c},n.state.values)},n.formatChildren=function(e){return"string"==typeof e?n.formatMessage(e):"object"==typeof e&&Array.isArray(e)?e.map(n.formatChild):e},n.formatChild=function(e){return"string"==typeof e?n.formatMessage(e):n.props.nested&&"object"==typeof e?s.cloneElement(e,{children:n.formatChildren(e.props.children)}):e},n.state={values:n.formatValues(t.values,t.intl)},n}return Object(a.c)(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=t.values,a=t.intl;e.values===n&&a.locale===e.intl.locale||this.setState({values:this.formatValues(e.values,e.intl)})},t.prototype.formatValues=function(e,t){if(e){var n={};for(var a in e){var s=e[a];!s||"object"!=typeof s||s instanceof Date?n[a]=s:n[a]=this.getFormattedValue(e[a],t)}return n}},t.prototype.getFormattedValue=function(e,t){var n=e.type,a=e.value,s=e.formatOptions;switch(n){case"date":return t.formatDate(a,s);case"time":return t.formatTime(a,s);case"relative":return t.formatRelative(a,s);case"number":return t.formatNumber(a,s);case"plural":return t.formatPlural(a,s);default:return a}},t.prototype.render=function(){var e=this.props,t=(e.intl,e.values,e.defaults,e.formattedProps),n=e.elementType,o=e.tagName,i=e.componentProps,r=e.children,c=(e.nested,Object(a.e)(e,["intl","values","defaults","formattedProps","elementType","tagName","componentProps","children","nested"]));if(r&&(c.children=this.formatChildren(r)),t)for(var l in t)void 0!==t[l]&&(c[l]=this.formatMessage(t[l]));if("string"==typeof n)return s.createElement(n,c);if(!n&&o)return s.createElement(o,c);var u=n,d=c.children;return delete c.children,s.createElement(u,Object(a.a)({},c,i),d)},t.defaultProps={tagName:"span"},t}(s.PureComponent);t.a=Object(o.d)(i)},517:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(242),s=n(363),o=n(385),i=n(286),r=function(e,t,n){var r=Object(o.a)(n,t),c=r.position,l=r.duration,u=Math.max(0,l-c||0),d=Object(s.c)(u),p=d[0],m=d[1],h=(null==n?void 0:n.next)||t,f=null==n?void 0:n.resume,v=(null==h?void 0:h.seasonNumber)||0,b=(null==h?void 0:h.episodeNumber)||0;return[Object(i.b)([e,f&&p]),Object(a.a)({seasonNumber:v,episodeNumber:b},f&&Object(a.a)({},m))]}},518:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(242),s=n(363),o=n(296),i=n(249),r=function(e){if(e){var t=e.title,n=e.type,r=e.releaseYears,c=e.seasons,l=e.description,u=e.shortDescription,d=e.duration,p=Object(i.x)(n),m=Object(i.v)(n),h=(null==c?void 0:c.size)||0,f=function(e){return(null==e?void 0:e.classifications)&&0!==e.classifications.length?e.classifications.map((function(e){var t=e.code.startsWith("QUEBEC-"),n=e.code.startsWith("CMPRS-"),a="";return t?a="@{french_language}":n&&(a="@{english_language}"),[a,e.name].filter(Boolean).join(" ")})):[]}(e).join(", "),v=l||u||"",b="@{playback_languages} ".concat(function(e){return(null==e?void 0:e.availablePlaybackLanguages)&&0!==e.availablePlaybackLanguages.length?e.availablePlaybackLanguages.map((function(t){var n;if(!t||"string"!=typeof t)return"";var a=t.toLowerCase(),s=null===(n=e.originalSpokenLanguage)||void 0===n?void 0:n.toLowerCase(),i=o.c[a]&&"@{".concat(o.c[a],"}")||"";return a===s?"".concat(i," @{original_playback_language}"):i})):[]}(e).join(", ")),g=Object(s.b)(d),x=g[0],E=g[1];return[[t,r,p?"@{itemDetail_labels_season}":"",f,m&&x||"",v?"@{idp_desc_text_aria}":"",v,b].filter(Boolean).join(", "),Object(a.a)(Object(a.a)({title:t,releaseYears:r,season:h,rating:f},E),{description:v,languages:b})]}}},519:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(245),i=n(244),r=n(253),c=n(273),l=n(248),u=n(360),d=n(349),p=(n(967),new i.a("scrollable-list")),m=function(e){function t(t){var n=e.call(this,t)||this;return n.restoreSavedState=function(e){var t=e,a=n.props.restoreSavedState;t&&(a&&a(t.d3SavedState),n.setState({listTrans:t.listTrans,selectedIndex:t.selectedIndex,maxIndex:t.maxIndex,isFocused:t.isFocused}),n.changeFocus(t.selectedIndex))},n.getLeftToViewport=function(){var e=n.props.itemWidth,t=n.state,a=t.listTrans;return e*t.selectedIndex+a},n.setFocus=function(e,t){return n.setState({isFocused:e}),e&&n.changeFocus(Object(l.g)(n.state.selectedIndex,0,n.state.maxIndex)),!0},n.calcTargetStep=function(){var e=1;if(n.moveOneScreenHorizontally){var t=n.props.itemWidth,a=Math.floor(n.scrollArea.clientWidth/t);n.moveOneScreenHorizontally=!1,e=a}return e},n.moveLeft=function(){var e=n.calcTargetStep();return n.changeFocus(Object(l.g)(n.state.selectedIndex-e,0,n.state.maxIndex)),!0},n.moveRight=function(){var e=n.calcTargetStep();return n.changeFocus(Object(l.g)(n.state.selectedIndex+e,0,n.state.maxIndex)),!0},n.moveDown=function(){return!1},n.exec=function(e,t){switch(e){case r.a.CLICK:return n.invokeItem(),!0;case r.a.CUSTOM:n.moveOneScreenHorizontally="moveOneScreenHorizontally"===t}return!1},n.invokeItem=function(){var e=n.props.invokeItem;e&&e(n.state.selectedIndex)},n.changeFocus=function(e){n.setState({selectedIndex:e}),n.calcPosition(e),n.props.focusChanged&&n.props.focusChanged(e)},n.onReference=function(e){n.scrollArea=e},n.next=function(){n.shift(!0)},n.previous=function(){n.shift(!1)},n.calcPosition=function(e){if(n.scrollArea){var t=n.state.listTrans,a=n.props,s=a.itemWidth,o=a.itemSpace,i=n.scrollArea.clientWidth,r=i-n.scrollArea.scrollWidth,c=Math.max(0,e*s),l=c+s-o;c<Math.abs(t)&&n.shift(!1,c,l),(l-i>Math.abs(t)||t<r)&&n.shift(!0,c,l)}},n.shift=function(e,t,a,s){var o=n.props,i=o.itemWidth,r=o.itemSpace,c=n.scrollArea.clientWidth,l=Math.floor((c+r)/i),u=c-n.scrollArea.scrollWidth,d=l*i,p=n.state.listTrans;if(s&&(p=s),e?(p-=d,p=Math.max(p,u)):(p+=d,p=Math.min(p,0)),0!==p&&t<Math.abs(p))n.shift(!1,t,a,p);else if(p!==u&&a-c>Math.abs(p))n.shift(!0,t,a,p);else{var m=n.checkArrowDisplay(p);n.setState({showPrevArrow:m.showPrevArrow,showNextArrow:m.showNextArrow,listTrans:p})}},n.checkArrowDisplay=function(e){return void 0===e&&(e=n.state.listTrans),Object(u.b)(e,n.scrollArea.clientWidth,n.scrollArea.scrollWidth)},n.handleMouseEnter=function(){if(!n.context.focusNav.disableMouseFocus){n.context.focusNav.handleRowMouseEnter(n.focusableRow.index);var e=n.checkArrowDisplay();n.setState({showPrevArrow:e.showPrevArrow,showNextArrow:e.showNextArrow})}},n.handleMouseLeave=function(){n.setState({isFocused:!1,showPrevArrow:!1,showNextArrow:!1})},n.state={d3SavedState:t.d3SavedState,listTrans:0,selectedIndex:t.selectedIndex,maxIndex:t.items.length-1,showPrevArrow:!1,showNextArrow:!1},n.focusableRow={focusable:!0,index:t.index,height:t.rowHeight,template:t.template,refRowType:t.refRowType,entryProps:t.entryProps,restoreSavedState:n.restoreSavedState,setFocus:n.setFocus,moveLeft:n.moveLeft,moveRight:n.moveRight,moveUp:l.c,moveDown:n.moveDown,exec:n.exec,getLeftToViewport:n.getLeftToViewport},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.context.focusNav.registerRow(this.focusableRow),this.calcPosition(this.state.selectedIndex),this.focusableRow.ref=this.ref&&this.ref.parentElement},t.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow),this.context.focusNav.removeEventHandler(c.b.RESIZED,"row"+this.props.rowIndex)},t.prototype.componentWillReceiveProps=function(e){e.items&&this.setState({maxIndex:e.items.length-1}),this.props.selectedIndex!==e.selectedIndex&&this.changeFocus(e.selectedIndex),e.d3SavedState!==this.props.d3SavedState&&this.setState({d3SavedState:e.d3SavedState}),this.focusableRow.entryProps=e.entryProps},t.prototype.componentDidUpdate=function(){this.focusableRow.savedState=Object.assign({},this.state)},t.prototype.render=function(){var e=this,t=this.props,n=t.items,a=t.scrollableListHeight,o=this.state,i=o.showPrevArrow,r=o.showNextArrow,c=o.listTrans,u=o.isFocused;if(0===n.length)return!1;var m=Object(l.f)(c+"px");return s.createElement("div",{className:p.b({focused:u}),ref:function(t){return e.ref=t},style:{height:"".concat(a,"px")},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},s.createElement("div",{ref:this.onReference,className:p.e("list"),style:m},n),s.createElement(d.a,{direction:"left",className:p.e("arrow","prev"),onClick:this.previous,show:i}),s.createElement(d.a,{direction:"right",className:p.e("arrow","next"),onClick:this.next,show:r}))},t.defaultProps={selectedIndex:0,forceOffset:!1},t.contextTypes={focusNav:o.object.isRequired},t}(s.Component);t.a=m},608:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(247),i=n.n(o),r=n(244),c=n(248),l=n(246),u=n(519),d=n(251),p=(n(968),new r.a("season-selector")),m=function(e){function t(t){var n=e.call(this,t)||this;return n.onFocusChanged=function(e){n.setState({selectedIndex:e}),n.props.focusChanged&&n.props.focusChanged(e)},n.onClick=function(e){var t=parseInt(e.currentTarget.dataset.index);n.onFocusChanged(t)},n.state={selectedIndex:t.selectedIndex||0},n}return Object(a.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.selectedIndex!==this.state.selectedIndex&&this.setState({selectedIndex:e.selectedIndex})},t.prototype.render=function(){var e=this,t=this.props.seasons;if(!t||!t.length)return!1;var n=t.map((function(n,a){var o=a===e.state.selectedIndex;return s.createElement(d.a,{tagName:"button",className:i()(p.e("season"),o?c.a:""),key:"Season ".concat(n.seasonNumber),values:{seasonNumber:n.seasonNumber,totalEpisodes:t.length},formattedAriaLabel:"@{season_of_total_aria}"},s.createElement("div",{className:p.e("season-item")},s.createElement("div",{className:i()(p.e("season-content"),o?c.a:""),"data-index":a,onClick:e.onClick},s.createElement(d.a,{className:p.e("collection-count"),values:{season:n.seasonNumber}},"@{itemDetail_seasonList_season_label|Season {season}}")),s.createElement("div",{className:i()(p.e("bar"),o?c.a:"")})))}));return s.createElement("div",{className:p.b()},s.createElement(u.a,{items:n,index:this.props.index,selectedIndex:this.state.selectedIndex,itemWidth:l.a.seasonSelectorItemWidth+l.a.seasonSelectorItemMargin,itemSpace:l.a.seasonSelectorItemMargin,focusChanged:this.onFocusChanged,refRowType:"detail",rowHeight:l.a.seasonSelectorHeight,scrollableListHeight:l.a.seasonSelectorHeight}))},t}(s.Component);t.a=m},609:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(268),i=n(251),r=n(249),c="@{itemDetail_episodeDescription_episodeTitle|S{seasonNumber} E{episodeNumber} - {episodeName}}",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.c)(t,e),t.prototype.getSpecialContentLabel=function(){var e=this.props.episode,t=e.episodeNumber,n=e.containsSeasons,a=e.title,s=c;return n?t<=0&&(s="@{itemDetail_episodeDescription_episodeTitle_noEpisode|S{seasonNumber} - {episodeName}}"):s=t>0?"@{itemDetail_episodeDescription_episodeTitle_noSeason|E{episodeNumber} - {episodeName}}":a,s},t.prototype.render=function(){var e=this.props,t=e.seasonNumber,n=e.mediaType,a=e.episode,l=e.showDuration,u=e.className;if(a){var d=a.episodeNumber,p=a.title,m=Object(r.z)(n)?this.getSpecialContentLabel():c,h=l?Object(o.l)(a.duration):"";return s.createElement("div",{className:u},s.createElement(i.a,{values:{seasonNumber:t,episodeNumber:d,episodeName:p}},m),h&&s.createElement("span",null,"Â -Â ",h))}},t}(s.PureComponent);t.a=l},610:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(332),i=function(e){function t(t){var n=e.call(this,t)||this;return n.ellipsisText=function(){var e=n.props,t=e.text,a=e.displayedLineCount,s=e.padding;Object(o.a)(n.ref,t,a,s)},n.onRef=function(e){n.ref=e},n}return Object(a.c)(t,e),t.prototype.componentDidMount=function(){this.ellipsisText()},t.prototype.componentDidUpdate=function(){this.ellipsisText()},t.prototype.render=function(){var e=this.props,t=e.element,n=e.text,o=(e.displayedLineCount,e.padding,Object(a.e)(e,["element","text","displayedLineCount","padding"]));return s.createElement(t,Object(a.a)(Object(a.a)({},o),{ref:this.onRef}),n||"")},t.defaultProps={element:"div",text:"",displayedLineCount:2,padding:0},t}(s.Component);t.a=i},611:function(e,t,n){},618:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(250),i=n(255),r=n(284),c=n(244),l=n(267),u=n(257),d=n(246),p=n(609),m=n(251),h=n(296),f=(n(517),n(362)),v=n(363),b=(n(518),n(969),new c.a("episode-grid-item")),g={"en-CA":"english_language_short","fr-CA":"french_language_short"},x=function(e){function t(t){var n=e.call(this,t)||this;return n.focused=!1,n.handleMouseEnter=function(){var e=n.props,t=e.onMouseEnter,a=e.index;t&&t(a)},n.handleMouseClick=function(){var e=n.props,t=e.onClick,a=e.index;t&&t(a)},n}return Object(a.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.focused!==this.focused&&(this.focused=e.focused)},t.prototype.render=function(){var e=this,t=this.props,n=t.focused,a=t.intl,o=t.isSignedIn,i=t.showLanguages,c=t.seasonNumber,l=t.mediaType,x=t.episodeWatchState,E=this.props.episode,y={width:d.a.episodeGridItemWidth},w=Object(u.i)(E.images,["tile","wallpaper"],y).map((function(e){return Object(u.a)(e,!0)})),I=d.a.episodeGridItemWidth,S=d.a.episodeGridImageHeight,N=o&&x,C=null==N?void 0:N.position,D=E.availablePlaybackLanguages,O=D.map((function(e){return a.formatMessage({id:h.c[e.toLocaleLowerCase()]})})).join(", ");(null==N?void 0:N.isFullyWatched)&&E.customFields&&(C=E.duration);var R=function(e){var t=e.episode,n=e.position,a=e.seasonNumber,s=e.isFullyWatched,o=e.language,i=Object(f.b)({seasonNumber:a,title:t.title,episodeNumber:t.episodeNumber||1},!0),r=Math.floor(t.duration-n),c=Object(v.c)(r||0),l=c[0],u=c[1];return[Object(f.a)([i,n&&l,s&&"@{fully_watched_label_aria}",o]),u]}({episode:E,position:C,seasonNumber:c||1,language:O,isFullyWatched:(null==N?void 0:N.isFullyWatched)&&!!E.customFields}),k=R[0],j=R[1];return s.createElement("div",{className:b.b(),ref:function(t){return e.refEpisodes=t}},s.createElement("div",{className:b.e("container",{focused:n})},s.createElement(m.a,{tagName:"button",className:b.e("container",{focused:n}),style:{width:"".concat(I,"px"),height:"".concat(S,"px")},onMouseEnter:this.handleMouseEnter,onClick:this.handleMouseClick,values:j,formattedAriaLabel:k},s.createElement(r.a,{srcSet:w,width:I,height:S,description:E.title}),s.createElement("div",{className:b.e("overlay")},C>0&&this.renderProgressBar(C,E.duration,y.width)))),s.createElement("div",{className:b.e("metadata"),style:{width:"".concat(I,"px")}},s.createElement(p.a,{className:b.e("title"),episode:E,seasonNumber:c,mediaType:l}),i&&void 0!==D&&D.length>0&&s.createElement("div",{className:b.e("playback-languages")},D.map((function(e){return a.formatMessage({id:g[e]})})).join(", "))))},t.prototype.renderProgressBar=function(e,t,n){var a=Math.round(n*e/t);return s.createElement("div",{className:b.e("progress-bar")},s.createElement("div",{className:b.e("progress"),style:{width:a+"px"}}))},t}(s.Component);t.a=Object(o.connect)((function(e,t){var n=t.episode;return{episodeWatchState:Object(l.r)(n.customId).value}}),void 0)(Object(i.d)(x))},623:function(e,t,n){"use strict";var a=n(243),s=n(255),o=n(250),i=n(296),r=n(261),c=n(244),l=(n(962),new c.a("description-row")),u=function(e){var t=e.title,n=e.children;return a.createElement("dl",{className:l.e("metadata")},a.createElement("dt",{className:l.e("title")},t),a.createElement("dd",{className:l.e("info")},n))};t.a=Object(o.connect)((function(e){return{playbackLanguageFlagEnabled:Object(r.q)(e.app.config.general)}}))(Object(s.d)((function(e){var t,n=e.intl,s=e.playbackLanguages;if(!e.playbackLanguageFlagEnabled||!(null===(t=null==s?void 0:s.available)||void 0===t?void 0:t.length))return!1;var o=n.formatMessage({id:"playback_languages"});return a.createElement(u,{title:o},s.available.map((function(e){var t=e.toLowerCase(),a=s.original&&s.original.toLowerCase(),o=n.formatMessage({id:i.c[t]});return t===a?"".concat(o," (").concat(n.formatMessage({id:"original_playback_language"}),")"):o})).join(", "))})))},961:function(e,t,n){},962:function(e,t,n){},963:function(e,t,n){},964:function(e,t,n){},965:function(e,t,n){},966:function(e,t,n){"use strict";(function(e){var a=n(242),s=n(243),o=n(245),i=n(250),r=n(608),c=n(618),l=n(454),u=n(368),d=n(444),p=n(273),m=n(249),h=n(244),f=n(316),v=n(254),b=n(246),g=(n(970),new h.a("d1")),D1EpisodeGrid=function(t){function D1EpisodeGrid(e){var n=t.call(this,e)||this;n.baseIndex=30,n.updateInnerTop=function(){var e=n.state,t=e.isFocused,a=e.curEpisodeIndex,s=e.maxEpisodeIndex,o=Math.ceil((s+1)/3)*b.a.episodeGridItemHeight;n.focusableRow.maxHeight=o,n.episodesRef.style.height=o+"px",t?(n.focusableRow.height=b.a.episodeGridItemHeight,n.focusableRow.innerTop=Math.floor(a/3)*b.a.episodeGridItemHeight,n.context.focusNav.scrollY()):(n.focusableRow.height=o,n.focusableRow.innerTop=0)},n.restoreSavedState=function(e){var t=e;t&&n.setState({isFocused:t.isFocused,curSeasonIndex:t.curSeasonIndex,curEpisodeIndex:t.curEpisodeIndex,maxEpisodeIndex:t.maxEpisodeIndex,itemDetailData:t.itemDetailData},n.trackedItemFocused)},n.setFocus=function(e){return n.state.isFocused!==e&&(n.setState({isFocused:e}),e?n.trackedItemFocused():n.trackedItemFocused(!0)),!0},n.trackedItemFocused=function(e){var t=n.state,a=t.curEpisodeIndex,s=t.itemDetailData.season.episodes.items[a];n.context.focusNav.analytics.triggerItemEvents(e?"MOUSELEAVE":"MOUSEENTER",s,n.props,a,["tile","wallpaper"])},n.moveLeft=function(){var e=n.state.curEpisodeIndex;return e%3>0&&(e--,n.setState({curEpisodeIndex:e},n.trackedItemFocused)),!0},n.moveRight=function(){var e=n.state.curEpisodeIndex;return e%3<2&&e<n.state.maxEpisodeIndex&&(e++,n.setState({curEpisodeIndex:e},n.trackedItemFocused)),!0},n.moveUp=function(){var e=n.state.curEpisodeIndex;return(e-=3)<0&&(e=n.state.curEpisodeIndex),e!==n.state.curEpisodeIndex&&(n.setState({curEpisodeIndex:e},n.trackedItemFocused),n.context.focusNav.scrollY("up"),!0)},n.moveDown=function(){var e=n.state.curEpisodeIndex,t=n.state.maxEpisodeIndex,a=Math.ceil((t+1)/3)-1;return Math.floor(e/3)<a&&((e+=3)>n.state.maxEpisodeIndex&&(e=n.state.maxEpisodeIndex),e!==n.state.curEpisodeIndex)&&(n.setState({curEpisodeIndex:e},n.trackedItemFocused),n.context.focusNav.scrollY("down"),!0)},n.exec=function(e){switch(e){case"click":return n.invokeItem(),!0}return!1},n.invokeItem=function(e){if(n.context.detailHelper){var t=n.state.curEpisodeIndex;void 0!==e&&(n.setState({curEpisodeIndex:e,isFocused:!0}),t=e);var a=n.state.itemDetailData.season.episodes.items[t];n.context.focusNav.analytics.triggerItemEvents("CLICK",a,n.props,t,["tile","wallpaper"]),n.context.detailHelper.onClickWatch(a,(function(e){e?(n.context.focusNav.analytics.triggerItemWatched(!0,a),n.context.router.push(a.watchPath)):n.context.focusNav.analytics.triggerItemWatched(!1,a,n.context.intl.formatMessage({id:"dh1_subscriber"}))}))}},n.onSeasonChanged=function(e){var t=n.state,a=t.itemDetailData,s=t.curSeasonIndex;if(e>=0&&s!==e){var o=a.show.seasons.items[e];if(!o)return;var i=o.id,r=n.props.itemDetailCache[i];r?(a.season=r.item,n.setState({curSeasonIndex:e,curEpisodeIndex:0,itemDetailData:a,maxEpisodeIndex:a.season.episodes&&a.season.episodes.items.length-1})):(n.setState({curSeasonIndex:e,curEpisodeIndex:0}),n.props.getSeasonDetail(i))}},n.onRef=function(e){n.ref=e},n.onEpisodesRef=function(e){n.episodesRef=e},n.handleMouseEnter=function(){n.context.focusNav.handleRowMouseEnter(n.focusableRow.index)},n.mouseEnterItem=function(e){n.setState({curEpisodeIndex:e},n.trackedItemFocused)};var a=e.item,s=e.itemDetailCache,o=(e.customFields||{}).seasonOrder,i=Object(u.a)(a,s,o),r=i.show.seasons,c=i.season.episodes,l=i.season&&r?r.items.findIndex((function(e){return e.id===i.season.id})):0,d=i.episode&&c?c.items.findIndex((function(e){return e.id===i.episode.id})):0;return n.state={isFocused:!1,curEpisodeIndex:d,curSeasonIndex:l,maxEpisodeIndex:c?c.items.length-1:0,itemDetailData:i},n.baseIndex=10*(e.index+1),n.focusableRow={internalNavi:!0,focusable:!0,index:n.baseIndex+1,height:0,maxHeight:0,innerTop:0,template:e.template,refRowType:"detail",entryProps:e,restoreSavedState:n.restoreSavedState,setFocus:n.setFocus,moveLeft:n.moveLeft,moveRight:n.moveRight,moveUp:n.moveUp,moveDown:n.moveDown,exec:n.exec},n}return Object(a.c)(D1EpisodeGrid,t),D1EpisodeGrid.prototype.componentDidMount=function(){var t=this;this.focusableRow.ref=this.ref,this.updateInnerTop(),this.context.focusNav.registerRow(this.focusableRow),Object(d.a)(this.props.pageKey)&&e((function(){switch(t.props.pageKey){case"SeasonDetail":t.context.focusNav.moveToRow(t.baseIndex-1);break;case"EpisodeDetail":t.context.focusNav.moveToRow(t.baseIndex+1)}})),this.context.focusNav.addEventHandler(p.b.BACK_TO_TOP,"row"+this.props.index,(function(){t.setState({curEpisodeIndex:0})}))},D1EpisodeGrid.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow),this.context.focusNav.removeEventHandler(p.b.BACK_TO_TOP,"row"+this.props.index)},D1EpisodeGrid.prototype.componentDidUpdate=function(){this.focusableRow.savedState=Object.assign({},this.state),this.updateInnerTop()},D1EpisodeGrid.prototype.componentWillReceiveProps=function(e){if(e.item.id!==this.props.item.id){var t=e.item,n=e.itemDetailCache,a=(e.customFields||{}).seasonOrder,s=Object(u.a)(t,n,a),o=s.show.seasons,i=s.season.episodes,r=i?i.items.length-1:0,c=s.season&&o?o.items.findIndex((function(e){return e.id===s.season.id})):0,l=s.episode&&i?i.items.findIndex((function(e){return e.id===s.episode.id})):0;this.setState({maxEpisodeIndex:r,itemDetailData:s,curSeasonIndex:c,curEpisodeIndex:l})}else if(e.itemDetailCache!==this.props.itemDetailCache){var d=this.state,p=d.itemDetailData,m=(c=d.curSeasonIndex,e.itemDetailCache[p.show.seasons.items[c].id]);if(!m)return;p.season=m.item,this.setState({itemDetailData:p,maxEpisodeIndex:p.season.episodes&&p.season.episodes.items.length-1})}this.focusableRow.entryProps=e},D1EpisodeGrid.prototype.render=function(){var e=this.props.customFields,t=this.state,n=t.itemDetailData,a=t.curSeasonIndex,o=(e||{}).seasonDescription;if(n){var i=n.show.seasons,c=n.season,u=c.episodes&&c.episodes.items;return s.createElement("section",{className:g.b(),ref:this.onRef},s.createElement(r.a,{index:this.baseIndex-1,seasons:i.items,focusChanged:this.onSeasonChanged,selectedIndex:a}),o&&s.createElement(l.a,{index:this.baseIndex,focusable:!0,description:c.description,title:c.title}),this.renderEpisodes(u))}},D1EpisodeGrid.prototype.renderEpisodes=function(e){var t=this;if(e&&e.length){var n=this.props,a=n.activeProfile,o=n.clientSide,i=n.profile,r=this.state,l=r.itemDetailData,u=r.curEpisodeIndex,d=r.isFocused,p=l.season.id;return Object(m.a)(i,e),s.createElement("div",{className:g.e("episodes"),ref:this.onEpisodesRef,onMouseEnter:this.handleMouseEnter},e.map((function(e,n){return s.createElement(c.a,{key:"episode-".concat(e.id,"-").concat(p),episode:e,index:n,focused:u===n&&d,isSignedIn:a&&o,onMouseEnter:t.mouseEnterItem,onClick:t.invokeItem})})))}},D1EpisodeGrid.contextTypes={router:o.object.isRequired,intl:o.object.isRequired,focusNav:o.object.isRequired,detailHelper:o.object.isRequired},D1EpisodeGrid}(s.Component);var x=Object(i.connect)(void 0,(function(e){return{getSeasonDetail:function(t){return e(Object(f.f)(t))}}}))(D1EpisodeGrid);x.template=v.D1EpisodeGrid,t.a=x}).call(this,n(294).setImmediate)},967:function(e,t,n){},968:function(e,t,n){},969:function(e,t,n){},970:function(e,t,n){},971:function(e,t,n){"use strict";(function(e){var a=n(242),s=n(243),o=n(245),i=n(250),r=n(255),c=n(972),l=n(1045),u=n(454),d=n(368),p=n(444),m=n(247),h=n.n(m),f=n(244),v=n(273),b=n(248),g=n(371),x=n(316),E=n(254),y=n(246),w=(n(976),new f.a("d2")),D2EpisodeList=function(t){function D2EpisodeList(e){var n=t.call(this,e)||this;n.updateInnerTop=function(){var e=(n.props.customFields||{}).seasonDescription,t=n.state,a=t.focused,s=t.focusState,o=t.canFocusOnDesc,i=t.curEpisodeIndex,r=t.itemDetailData,c=e?o?y.a.d2SeasonDescMaxHeight:n.listDescHeight:0,l=r&&r.season&&r.season.episodes&&r.season.episodes.items.length||0,u=y.a.d2SeasonDropBtnHeight+c+y.a.d2ListMarginTop+l*n.listItemHeight;if(n.focusableRow.maxHeight=u,n.ref.style.height=u+"px",a){switch(s){case"season":n.focusableRow.height=y.a.d2SeasonDropBtnHeight,n.focusableRow.innerTop=0;break;case"desc":n.focusableRow.height=c,n.focusableRow.innerTop=y.a.d2SeasonDropBtnHeight;break;case"episode":n.focusableRow.height=n.listItemHeight,n.focusableRow.innerTop=y.a.d2SeasonDropBtnHeight+c+y.a.d2ListMarginTop+i*n.listItemHeight}n.context.focusNav.scrollY()}else n.focusableRow.height=u,n.focusableRow.innerTop=0},n.setDescHeight=function(e){n.listDescHeight=e},n.restoreSavedState=function(e){var t=e;t&&n.setState({focused:t.focused,focusState:t.focusState,canFocusOnDesc:t.canFocusOnDesc,curSeasonIndex:t.curSeasonIndex,curEpisodeIndex:t.curEpisodeIndex,itemDetailData:t.itemDetailData},n.trackedItemFocused)},n.trackedItemFocused=function(e){var t=n.state,a=t.curEpisodeIndex,s=t.itemDetailData.season.episodes.items[a];n.context.focusNav.analytics.triggerItemEvents(e?"MOUSELEAVE":"MOUSEENTER",s,n.props,a,"tile")},n.setFocus=function(e){var t=n.state,a=t.focused,s=t.focusState;return a!==e&&(n.setState({focused:e}),e&&"episode"===s?n.trackedItemFocused():n.trackedItemFocused(!0)),!0},n.moveUp=function(){var e=n.state,t=e.focusState,a=e.canFocusOnDesc,s=e.curEpisodeIndex;switch(t){case"season":return!1;case"desc":return n.setState({focusState:"season"}),n.context.focusNav.scrollY("up"),!0;case"episode":var o=s-1;return o<0?(n.trackedItemFocused(!0),a?n.setState({focusState:"desc"}):n.setState({focusState:"season"})):n.setState({curEpisodeIndex:o},n.trackedItemFocused),n.context.focusNav.scrollY("up"),!0}return!1},n.moveDown=function(){var e=n.state,t=e.focusState,a=e.canFocusOnDesc,s=e.curEpisodeIndex,o=e.itemDetailData.season.episodes.items;switch(t){case"season":return a?n.setState({focusState:"desc"}):n.setState({focusState:"episode"},n.trackedItemFocused),n.context.focusNav.scrollY("down"),!0;case"desc":return n.setState({focusState:"episode"},n.trackedItemFocused),n.context.focusNav.scrollY("down"),!0;case"episode":var i=s+1;return i>o.length-1?(n.trackedItemFocused(!0),!1):(n.setState({curEpisodeIndex:i},n.trackedItemFocused),n.context.focusNav.scrollY("down"),!0)}return!1},n.exec=function(e,t,a){switch(e){case"click":var o=n.state,i=o.focusState,r=o.curSeasonIndex,l=o.curEpisodeIndex,u=o.canFocusOnDesc,d=o.itemDetailData;switch(t&&(n.setState({focusState:t}),i=t),void 0!==a&&(n.setState({curEpisodeIndex:a}),l=a),i){case"season":return n.context.focusNav.showDialog(s.createElement(c.a,{show:d.show,curIndex:r,onItemClicked:n.onSelectedSeason})),!0;case"episode":var p=d.season.episodes.items[l];return n.context.detailHelper&&(n.context.focusNav.analytics.triggerItemEvents("CLICK",p,n.props,l,"tile"),n.context.detailHelper.onClickWatch(p,(function(e){e?(n.context.focusNav.analytics.triggerItemWatched(!0,p),n.context.router.push(p.watchPath)):n.context.focusNav.analytics.triggerItemWatched(!1,p,n.context.intl.formatMessage({id:"dh1_subscriber"}))}))),!0;case"desc":return u&&n.context.focusNav.showDialog(s.createElement(g.a,{text:d.season.description,title:d.season.title,textWrap:!0})),!0}return!0}return!1},n.onSelectedSeason=function(e){n.context.focusNav.hideDialog();var t=n.state,a=t.itemDetailData,s=t.curSeasonIndex;if(e>=0&&s!==e){var o=a.show.seasons.items[e];if(!o)return;var i=o.id,r=n.props.itemDetailCache[i];r?(a.season=r.item,n.setState({curSeasonIndex:e,curEpisodeIndex:0,itemDetailData:a})):(n.setState({curSeasonIndex:e,curEpisodeIndex:0}),n.props.getSeasonDetail(i))}},n.onAfterEllipsis=function(e){n.setState({canFocusOnDesc:e})},n.mouseEnterD2=function(){n.context.focusNav.handleRowMouseEnter(n.focusableRow.index),n.setState({focused:!0})},n.mouseEnterSeason=function(){n.setState({focusState:"season"})},n.mouseEnterDesc=function(){n.setState({focusState:"desc"})},n.mouseEnterEpisode=function(e){n.setState({focusState:"episode",curEpisodeIndex:e},n.trackedItemFocused)},n.mouseClickSeason=function(){n.exec("click","season")},n.mouseClickDesc=function(){n.exec("click","desc")},n.mouseClickEpisode=function(e){n.exec("click","episode",e)};var a=e.item,o=e.itemDetailCache,i=(e.customFields||{}).seasonOrder,r=Object(d.a)(a,o,i),l=r.show.seasons,u=r.season?l.items.findIndex((function(e){return e.id===r.season.id})):0,p=r.episode?r.season.episodes.items.findIndex((function(e){return e.id===r.episode.id})):0;n.state={focused:!1,canFocusOnDesc:!1,curSeasonIndex:u,curEpisodeIndex:p,focusState:"season",itemDetailData:r},n.focusableRow={focusable:!0,index:10*(e.index+1),height:0,maxHeight:0,innerTop:0,template:e.template,refRowType:"detail",entryProps:e,restoreSavedState:n.restoreSavedState,setFocus:n.setFocus,moveLeft:b.e,moveRight:b.e,moveUp:n.moveUp,moveDown:n.moveDown,exec:n.exec};var m=(e.customFields||{}).episodeThumbnail;return n.listItemHeight=m?y.a.d2ListThumbnailHeight:y.a.d2ListItemHeight,n}return Object(a.c)(D2EpisodeList,t),D2EpisodeList.prototype.componentDidMount=function(){var t=this,n=this.props.pageKey;this.context.focusNav.registerRow(this.focusableRow),this.focusableRow.ref=this.ref,this.updateInnerTop(),Object(p.a)(n)&&(e((function(){t.context.focusNav.moveToRow(t.focusableRow.index)})),"EpisodeDetail"===n&&this.setState({focusState:"episode"})),this.context.focusNav.addEventHandler(v.b.BACK_TO_TOP,"row"+this.props.index,(function(){t.setState({curEpisodeIndex:0,focusState:"season"})}))},D2EpisodeList.prototype.componentWillUnmount=function(){this.context.focusNav.unregisterRow(this.focusableRow),this.context.focusNav.removeEventHandler(v.b.BACK_TO_TOP,"row"+this.props.index)},D2EpisodeList.prototype.componentDidUpdate=function(){this.focusableRow.savedState=Object.assign({},this.state),this.updateInnerTop()},D2EpisodeList.prototype.componentWillReceiveProps=function(e){if(e.item.id!==this.props.item.id){var t=e.item,n=e.itemDetailCache,a=(e.customFields||{}).seasonOrder,s=Object(d.a)(t,n,a),o=s.show.seasons,i=s.season?o.items.findIndex((function(e){return e.id===s.season.id})):0,r=s.episode?s.season.episodes.items.findIndex((function(e){return e.id===s.episode.id})):0;this.setState({itemDetailData:s,curEpisodeIndex:r,curSeasonIndex:i,focusState:"season"})}else if(e.itemDetailCache!==this.props.itemDetailCache){var c=this.state,l=c.itemDetailData,u=(i=c.curSeasonIndex,e.itemDetailCache[l.show.seasons.items[i].id]);if(!u)return;l.season=u.item,this.setState({itemDetailData:l})}if(e.customFields!==this.props.customFields){var p=(e.customFields||{}).episodeThumbnail;this.listItemHeight=p?y.a.d2ListThumbnailHeight:y.a.d2ListItemHeight}this.focusableRow.entryProps=e},D2EpisodeList.prototype.render=function(){var e=this,t=this.props.customFields,n=this.state,a=n.itemDetailData,o=n.focusState,i=n.focused,c=n.canFocusOnDesc,l=(t||{}).seasonDescription;if(a){var d=a.show.seasons,p=a.season,m=p.episodes&&p.episodes.items,f=[];return d.items.map((function(e){f.push({key:e.id,label:e.title})})),s.createElement("section",{className:h()(w.b(),"clearfix"),ref:function(t){return e.ref=t},onMouseEnter:this.mouseEnterD2},s.createElement("div",{className:w.e("season-group")},s.createElement("div",{className:w.e("season",{focused:"season"===o&&i}),onMouseEnter:this.mouseEnterSeason,onClick:this.mouseClickSeason},s.createElement(r.a,{id:"itemDetail_seasonList_season_label",values:{season:p.seasonNumber}},(function(e){return s.createElement("span",null,e)})),s.createElement("i",{className:h()(w.e("drop-icon"),"icon icon-drop-button")}))),l&&s.createElement(u.a,{className:h()(w.e("description"),i&&c&&"desc"===o?b.a:""),focusable:!1,description:p.description,title:p.title,afterEllipsis:this.onAfterEllipsis,setDescHeight:this.setDescHeight,onMouseEnter:this.mouseEnterDesc,onClick:this.mouseClickDesc}),this.renderEpisodes(m))}},D2EpisodeList.prototype.renderEpisodes=function(e){var t=this;if(e&&e.length){var n=this.props,a=n.activeProfile,o=n.clientSide,i=n.customFields,r=this.state,c=r.focused,u=r.curSeasonIndex,d=r.curEpisodeIndex,p=r.focusState,m=r.itemDetailData.season,h=(i||{}).episodeThumbnail,f=c&&"episode"===p,v=m.seasonNumber;return s.createElement("div",{className:w.e("episodes")},s.createElement("div",{className:w.e("seasonNo")},u),e.map((function(e,n){return s.createElement(l.a,{key:"episode-".concat(e.id),episode:e,seasonNumber:v,focused:f&&n===d,displayThumbnail:h,isSignedIn:a&&o,index:n,onMouseEnter:t.mouseEnterEpisode,onClick:t.mouseClickEpisode})})))}},D2EpisodeList.contextTypes={router:o.object.isRequired,intl:o.object.isRequired,focusNav:o.object.isRequired,detailHelper:o.object.isRequired},D2EpisodeList}(s.PureComponent);var I=Object(i.connect)(void 0,(function(e){return{getSeasonDetail:function(t){return e(Object(x.f)(t))}}}))(D2EpisodeList);I.template=E.D2EpisodeList,t.a=I}).call(this,n(294).setImmediate)},972:function(e,t,n){"use strict";var a=n(242),s=n(243),o=n(245),i=n(250),r=n(244),c=n(248),l=n(360),u=n(249),d=n(298),p=n(349),m=n(246),h=(n(973),new r.a("season-selector-modal")),f=function(e){function t(t){var n=e.call(this,t)||this;return n.getSeasonItemCount=function(){return n.props.show.seasons&&n.props.show.seasons.items?n.props.show.seasons.items.length:0},n.moveLeft=function(){var e=n.getSeasonItemCount();if(e>0){var t=Object(c.g)(n.state.curIndex-1,0,e-1,!1);t!==n.state.curIndex&&(n.curIndex=t,n.calcPosition())}return!0},n.moveRight=function(){var e=n.getSeasonItemCount();if(e>0){var t=Object(c.g)(n.state.curIndex+1,0,e-1,!1);t!==n.state.curIndex&&(n.curIndex=t,n.calcPosition())}return!0},n.exec=function(e){switch(e){case"click":var t=n.props.onItemClicked,a=n.state.curIndex;return t&&t(a),!0}return!1},n.onItemsRef=function(e){n.itemsRef=e},n.calcPosition=function(){if(n.itemsRef){var e=n.curIndex,t=n.state.listTrans,a=n.imageWidth+m.a.assetListItemMargin,s=Math.floor(m.a.contentWidth/a),o=s*a,i=Math.max((n.itemsRef.clientWidth-m.a.contentWidth)/2,e*a),r=i+a;n.props.show.seasons.items.length<=s?n.setState({alignMiddle:!0,curIndex:e}):(n.setState({curIndex:e}),i<Math.abs(t)&&n.shift(!1,i,r),r-o>Math.abs(t)&&n.shift(!0,i,r))}},n.shift=function(e,t,a,s){var o=n.imageWidth+m.a.assetListItemMargin,i=Math.floor(m.a.contentWidth/o),r=n.itemsRef.clientWidth-n.itemsRef.scrollWidth,c=i*o,l=n.state.listTrans;if(s&&(l=s),e?(l-=c,l=Math.max(l,r)):(l+=c,l=Math.min(l,0)),0!==l&&t<Math.abs(l))n.shift(!1,t,a,l);else if(l!==r&&a-c>Math.abs(l))n.shift(!0,t,a,l);else{var u=n.checkArrowDisplay(l);n.setState({showPrevArrow:u.showPrevArrow,showNextArrow:u.showNextArrow,listTrans:l})}},n.checkArrowDisplay=function(e){return void 0===e&&(e=n.state.listTrans),Object(l.b)(e,n.itemsRef.clientWidth,n.itemsRef.scrollWidth)},n.next=function(){n.shift(!0)},n.previous=function(){n.shift(!1)},n.handleMouseEnter=function(){var e=n.checkArrowDisplay();n.setState({showPrevArrow:e.showPrevArrow,showNextArrow:e.showNextArrow})},n.handleMouseLeave=function(){n.setState({showPrevArrow:!1,showNextArrow:!1})},n.handleMouseEnterAsset=function(e){n.setState({curIndex:e})},n.state={curIndex:t.curIndex||0,listTrans:0,alignMiddle:!1,showPrevArrow:!1,showNextArrow:!1},n.focusableRow={focusable:!0,index:-1,height:0,ref:void 0,restoreSavedState:function(){},setFocus:c.b,moveLeft:n.moveLeft,moveRight:n.moveRight,moveUp:c.e,moveDown:c.e,exec:n.exec},n.curIndex=t.curIndex||0,n.imageType=t.itemImageTypes.season,n.imageWidth=Object(u.h)(n.imageType),n}return Object(a.c)(t,e),t.prototype.componentWillReceiveProps=function(e){void 0!==e.curIndex&&e.curIndex!==this.state.curIndex&&(this.curIndex=e.curIndex,this.calcPosition())},t.prototype.componentDidMount=function(){this.context.focusNav.setFocus(this.focusableRow),this.calcPosition()},t.prototype.componentDidUpdate=function(){this.focusableRow.savedState=Object.assign({},this.state)},t.prototype.render=function(){var e=this,t=this.props,n=t.show,a=t.onItemClicked,o=this.state,i=o.curIndex,r=o.showPrevArrow,l=o.showNextArrow,u=o.listTrans,m=o.alignMiddle,f=n.seasons.items,v=m?{}:Object(c.f)(u+"px");return s.createElement("div",{className:h.b()},s.createElement("div",{className:h.e("titleDiv")},s.createElement("div",{className:h.e("title")},n.title)),s.createElement("div",{className:h.e("list"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},s.createElement("div",{className:h.e("items",{alignMiddle:m}),style:v,ref:this.onItemsRef},f&&f.map((function(t,n){return s.createElement(d.a,{key:"".concat(t.id,"-").concat(n),className:h.e("item"),item:t,imageType:e.imageType,imageOptions:{width:e.imageWidth},itemMargin:10,titlePosition:"below",focused:i===n,onClick:a,assetMouseEnter:e.handleMouseEnterAsset,index:n,isLastItem:n===f.length-1})}))),s.createElement(p.a,{direction:"left",onClick:this.previous,show:r}),s.createElement(p.a,{direction:"right",onClick:this.next,show:l})))},t.contextTypes={focusNav:o.object.isRequired},t}(s.Component);t.a=Object(i.connect)((function(e){return{itemImageTypes:e.app.config.general.itemImageTypes}}),void 0)(f)},973:function(e,t,n){},974:function(e,t,n){},975:function(e,t,n){},976:function(e,t,n){},977:function(e,t,n){},978:function(e,t,n){},979:function(e,t,n){},980:function(e,t,n){},981:function(e,t,n){},982:function(e,t,n){}}]);