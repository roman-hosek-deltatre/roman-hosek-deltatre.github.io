// https://nexplayer.nexplayersdk.com/NexHTML5/1.2.6_20220705/nexplayer.js

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nexplayer=e():t.nexplayer=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=139)}([function(t,e,i){var n=i(104)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){var n=i(109);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(5),r=i(27),s=i(19),a=i(15),o=i(21),l=function(t,e,i){var u,c,d,h,p=t&l.F,g=t&l.G,f=t&l.S,_=t&l.P,v=t&l.B,m=g?n:f?n[e]||(n[e]={}):(n[e]||{}).prototype,E=g?r:r[e]||(r[e]={}),A=E.prototype||(E.prototype={});for(u in g&&(i=e),i)d=((c=!p&&m&&void 0!==m[u])?m:i)[u],h=v&&c?o(d,n):_&&"function"==typeof d?o(Function.call,d):d,m&&a(m,u,d,t&l.U),E[u]!=d&&s(E,u,h),_&&A[u]!=d&&(A[u]=d)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){var n=i(44)("wks"),r=i(38),s=i(5).Symbol,a="function"==typeof s;(t.exports=function(t){return n[t]||(n[t]=a&&s[t]||(a?s:r)("Symbol."+t))}).store=n},function(t,e){function i(t,e,i,n,r,s,a){try{var o=t[s](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,r)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function o(t){i(a,r,s,o,l,"next",t)}function l(t){i(a,r,s,o,l,"throw",t)}o(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";var n=i(47),r={};r[i(3)("toStringTag")]="z",r+""!="[object z]"&&i(15)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,i){var n=i(10);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(102);function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}t.exports=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(6)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,i){"use strict";var n=i(2),r=i(81)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(60)("includes")},function(t,e,i){var n=i(8),r=i(79),s=i(43),a=Object.defineProperty;e.f=i(11)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";var n=i(2),r=i(107);n(n.P+n.F*i(108)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(5),r=i(19),s=i(20),a=i(38)("src"),o=i(105),l=(""+o).split("toString");i(27).inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,i,o){var u="function"==typeof i;u&&(s(i,"name")||r(i,"name",e)),t[e]!==i&&(u&&(s(i,a)||r(i,a,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:o?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||o.call(this)}))},function(t,e,i){var n=i(45),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(34);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";var n=i(60),r=i(90),s=i(41),a=i(33);t.exports=i(66)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(13),r=i(37);t.exports=i(11)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(40);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){"use strict";var n,r,s,a,o=i(39),l=i(5),u=i(21),c=i(47),d=i(2),h=i(10),p=i(40),g=i(61),f=i(62),_=i(86),v=i(87).set,m=i(111)(),E=i(88),A=i(112),T=i(113),y=i(114),b=l.TypeError,S=l.process,I=S&&S.versions,D=I&&I.v8||"",k=l.Promise,P="process"==c(S),L=function(){},C=r=E.f,R=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[i(3)("species")]=function(t){t(L,L)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==D.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var i=t._c;m((function(){for(var n=t._v,r=1==t._s,s=0,a=function(e){var i,s,a,o=r?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{o?(r||(2==t._h&&M(t),t._h=1),!0===o?i=n:(c&&c.enter(),i=o(n),c&&(c.exit(),a=!0)),i===e.promise?u(b("Promise-chain cycle")):(s=N(i))?s.call(i,l,u):l(i)):u(n)}catch(t){c&&!a&&c.exit(),u(t)}};i.length>s;)a(i[s++]);t._c=[],t._n=!1,e&&!t._h&&w(t)}))}},w=function(t){v.call(l,(function(){var e,i,n,r=t._v,s=x(t);if(s&&(e=A((function(){P?S.emit("unhandledRejection",r,t):(i=l.onunhandledrejection)?i({promise:t,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)})),t._h=P||x(t)?2:1),t._a=void 0,s&&e.e)throw e.v}))},x=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){v.call(l,(function(){var e;P?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})}))},U=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},B=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw b("Promise can't be resolved itself");(e=N(t))?m((function(){var n={_w:i,_d:!1};try{e.call(t,u(B,n,1),u(U,n,1))}catch(t){U.call(n,t)}})):(i._v=t,i._s=1,O(i,!1))}catch(t){U.call({_w:i,_d:!1},t)}}};R||(k=function(t){g(this,k,"Promise","_h"),p(t),n.call(this);try{t(u(B,this,1),u(U,this,1))}catch(t){U.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(64)(k.prototype,{then:function(t,e){var i=C(_(this,k));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?S.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&O(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new n;this.promise=t,this.resolve=u(B,t,1),this.reject=u(U,t,1)},E.f=C=function(t){return t===k||t===a?new s(t):r(t)}),d(d.G+d.W+d.F*!R,{Promise:k}),i(42)(k,"Promise"),i(89)("Promise"),a=i(27).Promise,d(d.S+d.F*!R,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(o||!R),"Promise",{resolve:function(t){return y(o&&this===a?k:this,t)}}),d(d.S+d.F*!(R&&i(65)((function(t){k.all(t).catch(L)}))),"Promise",{all:function(t){var e=this,i=C(e),n=i.resolve,r=i.reject,s=A((function(){var i=[],s=0,a=1;f(t,!1,(function(t){var o=s++,l=!1;i.push(void 0),a++,e.resolve(t).then((function(t){l||(l=!0,i[o]=t,--a||n(i))}),r)})),--a||n(i)}));return s.e&&r(s.v),i.promise},race:function(t){var e=this,i=C(e),n=i.reject,r=A((function(){f(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}})},function(t,e,i){"use strict";var n=i(93)(!0);i(66)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})}))},function(t,e,i){for(var n=i(18),r=i(32),s=i(15),a=i(5),o=i(19),l=i(41),u=i(3),c=u("iterator"),d=u("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=r(p),f=0;f<g.length;f++){var _,v=g[f],m=p[v],E=a[v],A=E&&E.prototype;if(A&&(A[c]||o(A,c,h),A[d]||o(A,d,v),l[v]=h,m))for(_ in n)A[_]||s(A,_,n[_],!0)}},function(t,e,i){"use strict";i(121);var n=i(8),r=i(69),s=i(11),a=/./.toString,o=function(t){i(15)(RegExp.prototype,"toString",t,!0)};i(6)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?o((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?r.call(t):void 0)})):"toString"!=a.name&&o((function(){return a.call(this)}))},function(t,e){var i=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";var n=i(2),r=i(40),s=i(17),a=i(6),o=[].sort,l=[1,2,3];n(n.P+n.F*(a((function(){l.sort(void 0)}))||!a((function(){l.sort(null)}))||!i(70)(o)),"Array",{sort:function(t){return void 0===t?o.call(s(this)):o.call(s(this),r(t))}})},function(t,e,i){"use strict";var n=i(2),r=i(94)(2);n(n.P+n.F*!i(70)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(8),r=i(17),s=i(16),a=i(45),o=i(74),l=i(75),u=Math.max,c=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;i(76)("replace",2,(function(t,e,i,g){return[function(n,r){var s=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,s,r):i.call(String(s),n,r)},function(t,e){var r=g(i,t,this,e);if(r.done)return r.value;var d=n(t),h=String(this),p="function"==typeof e;p||(e=String(e));var _=d.global;if(_){var v=d.unicode;d.lastIndex=0}for(var m=[];;){var E=l(d,h);if(null===E)break;if(m.push(E),!_)break;""===String(E[0])&&(d.lastIndex=o(h,s(d.lastIndex),v))}for(var A,T="",y=0,b=0;b<m.length;b++){E=m[b];for(var S=String(E[0]),I=u(c(a(E.index),h.length),0),D=[],k=1;k<E.length;k++)D.push(void 0===(A=E[k])?A:String(A));var P=E.groups;if(p){var L=[S].concat(D,I,h);void 0!==P&&L.push(P);var C=String(e.apply(void 0,L))}else C=f(S,h,I,D,P,e);I>=y&&(T+=h.slice(y,I)+C,y=I+S.length)}return T+h.slice(y)}];function f(t,e,n,s,a,o){var l=n+t.length,u=s.length,c=p;return void 0!==a&&(a=r(a),c=h),i.call(o,c,(function(i,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":o=a[r.slice(1,-1)];break;default:var c=+r;if(0===c)return i;if(c>u){var h=d(c/10);return 0===h?i:h<=u?void 0===s[h-1]?r.charAt(1):s[h-1]+r.charAt(1):i}o=s[c-1]}return void 0===o?"":o}))}}))},function(t,e,i){"use strict";var n=i(82),r=i(8),s=i(86),a=i(74),o=i(16),l=i(75),u=i(77),c=i(6),d=Math.min,h=[].push,p="length",g=!c((function(){RegExp(4294967295,"y")}));i(76)("split",2,(function(t,e,i,c){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(r,t,e);for(var s,a,o,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,c+"g");(s=u.call(f,r))&&!((a=f.lastIndex)>d&&(l.push(r.slice(d,s.index)),s[p]>1&&s.index<r[p]&&h.apply(l,s.slice(1)),o=s[0][p],d=a,l[p]>=g));)f.lastIndex===s.index&&f.lastIndex++;return d===r[p]?!o&&f.test("")||l.push(""):l.push(r.slice(d)),l[p]>g?l.slice(0,g):l}:"0".split(void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var r=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,r,n):f.call(String(r),i,n)},function(t,e){var n=c(f,t,this,e,f!==i);if(n.done)return n.value;var u=r(t),h=String(this),p=s(u,RegExp),_=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),m=new p(g?u:"^(?:"+u.source+")",v),E=void 0===e?4294967295:e>>>0;if(0===E)return[];if(0===h.length)return null===l(m,h)?[h]:[];for(var A=0,T=0,y=[];T<h.length;){m.lastIndex=g?T:0;var b,S=l(m,g?h:h.slice(T));if(null===S||(b=d(o(m.lastIndex+(g?0:T)),h.length))===A)T=a(h,T,_);else{if(y.push(h.slice(A,T)),y.length===E)return y;for(var I=1;I<=S.length-1;I++)if(y.push(S[I]),y.length===E)return y;T=A=b}}return y.push(h.slice(A)),y}]}))},function(t,e,i){var n=i(80),r=i(58);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e,i){var n=i(55),r=i(34);t.exports=function(t){return n(r(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(115),r=i(91);t.exports=i(119)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(5),r=i(20),s=i(22),a=i(92),o=i(43),l=i(6),u=i(72).f,c=i(68).f,d=i(13).f,h=i(128).trim,p=n.Number,g=p,f=p.prototype,_="Number"==s(i(48)(f)),v="trim"in String.prototype,m=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,s=(e=v?e.trim():h(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var a,l=e.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>r)return NaN;return parseInt(l,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof p&&(_?l((function(){f.valueOf.call(i)})):"Number"!=s(i))?a(new g(m(e)),i,p):m(e)};for(var E,A=i(11)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;A.length>T;T++)r(g,E=A[T])&&!r(p,E)&&d(p,E,c(g,E));p.prototype=f,f.constructor=p,i(15)(n,"Number",p)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports={}},function(t,e,i){var n=i(13).f,r=i(20),s=i(3)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},function(t,e,i){var n=i(10);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(27),r=i(5),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(39)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(22),r=i(3)("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:s?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var n=i(8),r=i(116),s=i(58),a=i(57)("IE_PROTO"),o=function(){},l=function(){var t,e=i(54)("iframe"),n=s.length;for(e.style.display="none",i(63).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[s[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(o.prototype=n(t),i=new o,o.prototype=null,i[a]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e,i){"use strict";var n=i(2),r=i(63),s=i(22),a=i(56),o=i(16),l=[].slice;n(n.P+n.F*i(6)((function(){r&&l.call(r)})),"Array",{slice:function(t,e){var i=o(this.length),n=s(this);if(e=void 0===e?i:e,"Array"==n)return l.call(this,t,e);for(var r=a(t,i),u=a(e,i),c=o(u-r),d=new Array(c),h=0;h<c;h++)d[h]="String"==n?this.charAt(r+h):this[r+h];return d}})},function(t,e,i){var n=i(17),r=i(32);i(134)("keys",(function(){return function(t){return r(n(t))}}))},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(2);n(n.S+n.F,"Object",{assign:i(106)})},function(t,e,i){var n=i(10),r=i(5).document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,i){var n=i(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(45),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):s(t,e)}},function(t,e,i){var n=i(44)("keys"),r=i(38);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(3)("unscopables"),r=Array.prototype;null==r[n]&&i(19)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(21),r=i(83),s=i(84),a=i(8),o=i(16),l=i(85),u={},c={};(e=t.exports=function(t,e,i,d,h){var p,g,f,_,v=h?function(){return t}:l(t),m=n(i,d,e?2:1),E=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(s(v)){for(p=o(t.length);p>E;E++)if((_=e?m(a(g=t[E])[0],g[1]):m(t[E]))===u||_===c)return _}else for(f=v.call(t);!(g=f.next()).done;)if((_=r(f,m,g.value,e))===u||_===c)return _}).BREAK=u,e.RETURN=c},function(t,e,i){var n=i(5).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(15);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){var n=i(3)("iterator"),r=!1;try{var s=[7][n]();s.return=function(){r=!0},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var s=[7],a=s[n]();a.next=function(){return{done:i=!0}},s[n]=function(){return a},t(s)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(39),r=i(2),s=i(15),a=i(19),o=i(41),l=i(117),u=i(42),c=i(118),d=i(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,g,f,_,v){l(i,e,g);var m,E,A,T=function(t){if(!h&&t in I)return I[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},y=e+" Iterator",b="values"==f,S=!1,I=t.prototype,D=I[d]||I["@@iterator"]||f&&I[f],k=D||T(f),P=f?b?T("entries"):k:void 0,L="Array"==e&&I.entries||D;if(L&&(A=c(L.call(new t)))!==Object.prototype&&A.next&&(u(A,y,!0),n||"function"==typeof A[d]||a(A,d,p)),b&&D&&"values"!==D.name&&(S=!0,k=function(){return D.call(this)}),n&&!v||!h&&!S&&I[d]||a(I,d,k),o[e]=k,o[y]=p,f)if(m={values:b?k:T("values"),keys:_?k:T("keys"),entries:P},v)for(E in m)E in I||s(I,E,m[E]);else r(r.P+r.F*(h||S),e,m);return m}},function(t,e,i){var n=i(38)("meta"),r=i(10),s=i(20),a=i(13).f,o=0,l=Object.isExtensible||function(){return!0},u=!i(6)((function(){return l(Object.preventExtensions({}))})),c=function(t){a(t,n,{value:{i:"O"+ ++o,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,n)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!s(t,n)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return u&&d.NEED&&l(t)&&!s(t,n)&&c(t),t}}},function(t,e,i){var n=i(46),r=i(37),s=i(33),a=i(43),o=i(20),l=i(79),u=Object.getOwnPropertyDescriptor;e.f=i(11)?u:function(t,e){if(t=s(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(o(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){"use strict";var n=i(8);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){"use strict";var n=i(6);t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,i){"use strict";var n=i(5),r=i(20),s=i(11),a=i(2),o=i(15),l=i(67).KEY,u=i(6),c=i(44),d=i(42),h=i(38),p=i(3),g=i(97),f=i(124),_=i(125),v=i(95),m=i(8),E=i(10),A=i(17),T=i(33),y=i(43),b=i(37),S=i(48),I=i(126),D=i(68),k=i(59),P=i(13),L=i(32),C=D.f,R=P.f,N=I.f,O=n.Symbol,w=n.JSON,x=w&&w.stringify,M=p("_hidden"),U=p("toPrimitive"),B={}.propertyIsEnumerable,V=c("symbol-registry"),F=c("symbols"),G=c("op-symbols"),H=Object.prototype,Y="function"==typeof O&&!!k.f,W=n.QObject,j=!W||!W.prototype||!W.prototype.findChild,Q=s&&u((function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=C(H,e);n&&delete H[e],R(t,e,i),n&&t!==H&&R(H,e,n)}:R,K=function(t){var e=F[t]=S(O.prototype);return e._k=t,e},q=Y&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},z=function(t,e,i){return t===H&&z(G,e,i),m(t),e=y(e,!0),m(i),r(F,e)?(i.enumerable?(r(t,M)&&t[M][e]&&(t[M][e]=!1),i=S(i,{enumerable:b(0,!1)})):(r(t,M)||R(t,M,b(1,{})),t[M][e]=!0),Q(t,e,i)):R(t,e,i)},X=function(t,e){m(t);for(var i,n=_(e=T(e)),r=0,s=n.length;s>r;)z(t,i=n[r++],e[i]);return t},$=function(t){var e=B.call(this,t=y(t,!0));return!(this===H&&r(F,t)&&!r(G,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,M)&&this[M][t])||e)},J=function(t,e){if(t=T(t),e=y(e,!0),t!==H||!r(F,e)||r(G,e)){var i=C(t,e);return!i||!r(F,e)||r(t,M)&&t[M][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=N(T(t)),n=[],s=0;i.length>s;)r(F,e=i[s++])||e==M||e==l||n.push(e);return n},tt=function(t){for(var e,i=t===H,n=N(i?G:T(t)),s=[],a=0;n.length>a;)!r(F,e=n[a++])||i&&!r(H,e)||s.push(F[e]);return s};Y||(o((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(i){this===H&&e.call(G,i),r(this,M)&&r(this[M],t)&&(this[M][t]=!1),Q(this,t,b(1,i))};return s&&j&&Q(H,t,{configurable:!0,set:e}),K(t)}).prototype,"toString",(function(){return this._k})),D.f=J,P.f=z,i(72).f=I.f=Z,i(46).f=$,k.f=tt,s&&!i(39)&&o(H,"propertyIsEnumerable",$,!0),g.f=function(t){return K(p(t))}),a(a.G+a.W+a.F*!Y,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)p(et[it++]);for(var nt=L(p.store),rt=0;nt.length>rt;)f(nt[rt++]);a(a.S+a.F*!Y,"Symbol",{for:function(t){return r(V,t+="")?V[t]:V[t]=O(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){j=!0},useSimple:function(){j=!1}}),a(a.S+a.F*!Y,"Object",{create:function(t,e){return void 0===e?S(t):X(S(t),e)},defineProperty:z,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var st=u((function(){k.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return k.f(A(t))}}),w&&a(a.S+a.F*(!Y||u((function(){var t=O();return"[null]"!=x([t])||"{}"!=x({a:t})||"{}"!=x(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(E(e)||void 0!==t)&&!q(t))return v(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!q(e))return e}),n[1]=e,x.apply(w,n)}}),O.prototype[U]||i(19)(O.prototype,U,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(t,e,i){var n=i(80),r=i(58).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){"use strict";var n=i(21),r=i(2),s=i(17),a=i(83),o=i(84),l=i(16),u=i(127),c=i(85);r(r.S+r.F*!i(65)((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,r,d,h=s(t),p="function"==typeof this?this:Array,g=arguments.length,f=g>1?arguments[1]:void 0,_=void 0!==f,v=0,m=c(h);if(_&&(f=n(f,g>2?arguments[2]:void 0,2)),null==m||p==Array&&o(m))for(i=new p(e=l(h.length));e>v;v++)u(i,v,_?f(h[v],v):h[v]);else for(d=m.call(h),i=new p;!(r=d.next()).done;v++)u(i,v,_?a(d,f,[r.value,v],!0):r.value);return i.length=v,i}})},function(t,e,i){"use strict";var n=i(93)(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},function(t,e,i){"use strict";var n=i(47),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var s=i.call(t,e);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,i){"use strict";i(130);var n=i(15),r=i(19),s=i(6),a=i(34),o=i(3),l=i(77),u=o("species"),c=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var h=o(t),p=!s((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),g=p?!s((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[u]=function(){return i}),i[h](""),!e})):void 0;if(!p||!g||"replace"===t&&!c||"split"===t&&!d){var f=/./[h],_=i(a,h,""[t],(function(t,e,i,n,r){return e.exec===l?p&&!r?{done:!0,value:f.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),v=_[0],m=_[1];n(String.prototype,t,v),r(RegExp.prototype,h,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,i){"use strict";var n,r,s=i(69),a=RegExp.prototype.exec,o=String.prototype.replace,l=a,u=(n=/a/,r=/b*/g,a.call(n,"a"),a.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(t){var e,i,n,r,l=this;return c&&(i=new RegExp("^"+l.source+"$(?!\\s)",s.call(l))),u&&(e=l.lastIndex),n=a.call(l,t),u&&n&&(l.lastIndex=l.global?n.index+n[0].length:e),c&&n&&n.length>1&&o.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=l},function(t,e,i){"use strict";var n=i(8),r=i(16),s=i(74),a=i(75);i(76)("match",1,(function(t,e,i,o){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=o(i,t,this);if(e.done)return e.value;var l=n(t),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var d,h=[],p=0;null!==(d=a(l,u));){var g=String(d[0]);h[p]=g,""===g&&(l.lastIndex=s(u,r(l.lastIndex),c)),p++}return 0===p?null:h}]}))},function(t,e,i){t.exports=!i(11)&&!i(6)((function(){return 7!=Object.defineProperty(i(54)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(20),r=i(33),s=i(81)(!1),a=i(57)("IE_PROTO");t.exports=function(t,e){var i,o=r(t),l=0,u=[];for(i in o)i!=a&&n(o,i)&&u.push(i);for(;e.length>l;)n(o,i=e[l++])&&(~s(u,i)||u.push(i));return u}},function(t,e,i){var n=i(33),r=i(16),s=i(56);t.exports=function(t){return function(e,i,a){var o,l=n(e),u=r(l.length),c=s(a,u);if(t&&i!=i){for(;u>c;)if((o=l[c++])!=o)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var n=i(10),r=i(22),s=i(3)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(8);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var s=t.return;throw void 0!==s&&n(s.call(t)),e}}},function(t,e,i){var n=i(41),r=i(3)("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[r]===t)}},function(t,e,i){var n=i(47),r=i(3)("iterator"),s=i(41);t.exports=i(27).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||s[n(t)]}},function(t,e,i){var n=i(8),r=i(40),s=i(3)("species");t.exports=function(t,e){var i,a=n(t).constructor;return void 0===a||null==(i=n(a)[s])?e:r(i)}},function(t,e,i){var n,r,s,a=i(21),o=i(110),l=i(63),u=i(54),c=i(5),d=c.process,h=c.setImmediate,p=c.clearImmediate,g=c.MessageChannel,f=c.Dispatch,_=0,v={},m=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},E=function(t){m.call(t.data)};h&&p||(h=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++_]=function(){o("function"==typeof t?t:Function(t),e)},n(_),_},p=function(t){delete v[t]},"process"==i(22)(d)?n=function(t){d.nextTick(a(m,t,1))}:f&&f.now?n=function(t){f.now(a(m,t,1))}:g?(s=(r=new g).port2,r.port1.onmessage=E,n=a(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",E,!1)):n="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,i){"use strict";var n=i(40);function r(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)}t.exports.f=function(t){return new r(t)}},function(t,e,i){"use strict";var n=i(5),r=i(13),s=i(11),a=i(3)("species");t.exports=function(t){var e=n[t];s&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(10);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){var n=i(10),r=i(120).set;t.exports=function(t,e,i){var s,a=e.constructor;return a!==i&&"function"==typeof a&&(s=a.prototype)!==i.prototype&&n(s)&&r&&r(t,s),t}},function(t,e,i){var n=i(45),r=i(34);t.exports=function(t){return function(e,i){var s,a,o=String(r(e)),l=n(i),u=o.length;return l<0||l>=u?t?"":void 0:(s=o.charCodeAt(l))<55296||s>56319||l+1===u||(a=o.charCodeAt(l+1))<56320||a>57343?t?o.charAt(l):s:t?o.slice(l,l+2):a-56320+(s-55296<<10)+65536}}},function(t,e,i){var n=i(21),r=i(55),s=i(17),a=i(16),o=i(122);t.exports=function(t,e){var i=1==t,l=2==t,u=3==t,c=4==t,d=6==t,h=5==t||d,p=e||o;return function(e,o,g){for(var f,_,v=s(e),m=r(v),E=n(o,g,3),A=a(m.length),T=0,y=i?p(e,A):l?p(e,0):void 0;A>T;T++)if((h||T in m)&&(_=E(f=m[T],T,v),t))if(i)y[T]=_;else if(_)switch(t){case 3:return!0;case 5:return f;case 6:return T;case 2:y.push(f)}else if(c)return!1;return d?-1:u||c?c:y}}},function(t,e,i){var n=i(22);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(13).f,r=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in r||i(11)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},function(t,e,i){e.f=i(3)},function(t,e,i){var n=i(2),r=i(5).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(2);n(n.P,"Array",{fill:i(135)}),i(60)("fill")},function(t,e,i){"use strict";var n=i(2),r=i(94)(1);n(n.P+n.F*!i(70)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var r=(a=n,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),s=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[i].concat(s).concat([r]).join("\n")}var a,o,l;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);n&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},function(t,e,i){var n=i(52).default,r=i(103);t.exports=function(t){var e=r(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(52).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(52).default;function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(t,e,i){t[e]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,i){return t[e]=i}}function h(t,e,i,n){var r=e&&e.prototype instanceof f?e:f,s=Object.create(r.prototype),o=new P(n||[]);return a(s,"_invoke",{value:S(t,i,o)}),s}function p(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var g={};function f(){}function _(){}function v(){}var m={};d(m,l,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(L([])));A&&A!==i&&s.call(A,l)&&(m=A);var T=v.prototype=f.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var i;a(this,"_invoke",{value:function(r,a){function o(){return new e((function(i,o){!function i(r,a,o,l){var u=p(t[r],t,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==n(d)&&s.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,o,l)}),(function(t){i("throw",t,o,l)})):e.resolve(d).then((function(t){c.value=t,o(c)}),(function(t){return i("throw",t,o,l)}))}l(u.arg)}(r,a,i,o)}))}return i=i?i.then(o,o):o()}})}function S(t,e,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return C()}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var o=I(a,i);if(o){if(o===g)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=p(t,e,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function I(t,e){var i=e.method,n=t.iterator[i];if(void 0===n)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=p(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var s=r.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,g):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function L(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(s.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return _.prototype=v,a(T,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:_,configurable:!0}),_.displayName=d(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,d(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},y(b.prototype),d(b.prototype,u,(function(){return this})),e.AsyncIterator=b,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var a=new b(h(t,i,n,r),s);return e.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(T),d(T,c,"Generator"),d(T,l,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return a.type="throw",a.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var o=s.call(r,"catchLoc"),l=s.call(r,"finallyLoc");if(o&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:L(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),g}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){t.exports=i(44)("native-function-to-string",Function.toString)},function(t,e,i){"use strict";var n=i(11),r=i(32),s=i(59),a=i(46),o=i(17),l=i(55),u=Object.assign;t.exports=!u||i(6)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||Object.keys(u({},e)).join("")!=n}))?function(t,e){for(var i=o(t),u=arguments.length,c=1,d=s.f,h=a.f;u>c;)for(var p,g=l(arguments[c++]),f=d?r(g).concat(d(g)):r(g),_=f.length,v=0;_>v;)p=f[v++],n&&!h.call(g,p)||(i[p]=g[p]);return i}:u},function(t,e,i){var n=i(82),r=i(34);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){var n=i(3)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(5),r=i(87).set,s=n.MutationObserver||n.WebKitMutationObserver,a=n.process,o=n.Promise,l="process"==i(22)(a);t.exports=function(){var t,e,i,u=function(){var n,r;for(l&&(n=a.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){a.nextTick(u)};else if(!s||n.navigator&&n.navigator.standalone)if(o&&o.resolve){var c=o.resolve(void 0);i=function(){c.then(u)}}else i=function(){r.call(n,u)};else{var d=!0,h=document.createTextNode("");new s(u).observe(h,{characterData:!0}),i=function(){h.data=d=!d}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(5).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){var n=i(8),r=i(10),s=i(88);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=s.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(13).f,r=i(48),s=i(64),a=i(21),o=i(61),l=i(62),u=i(66),c=i(90),d=i(89),h=i(11),p=i(67).fastKey,g=i(91),f=h?"_s":"size",_=function(t,e){var i,n=p(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,u){var c=t((function(t,n){o(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[f]=0,null!=n&&l(n,i,t[u],t)}));return s(c.prototype,{clear:function(){for(var t=g(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=g(this,e),n=_(i,t);if(n){var r=n.n,s=n.p;delete i._i[n.i],n.r=!0,s&&(s.n=r),r&&(r.p=s),i._f==n&&(i._f=r),i._l==n&&(i._l=s),i[f]--}return!!n},forEach:function(t){g(this,e);for(var i,n=a(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!_(g(this,e),t)}}),h&&n(c.prototype,"size",{get:function(){return g(this,e)[f]}}),c},def:function(t,e,i){var n,r,s=_(t,e);return s?s.v=i:(t._l=s={i:r=p(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=s),n&&(n.n=s),t[f]++,"F"!==r&&(t._i[r]=s)),t},getEntry:_,setStrong:function(t,e,i){u(t,e,(function(t,i){this._t=g(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))}),i?"entries":"values",!i,!0),d(e)}}},function(t,e,i){var n=i(13),r=i(8),s=i(32);t.exports=i(11)?Object.defineProperties:function(t,e){r(t);for(var i,a=s(e),o=a.length,l=0;o>l;)n.f(t,i=a[l++],e[i]);return t}},function(t,e,i){"use strict";var n=i(48),r=i(37),s=i(42),a={};i(19)(a,i(3)("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(a,{next:r(1,i)}),s(t,e+" Iterator")}},function(t,e,i){var n=i(20),r=i(17),s=i(57)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){"use strict";var n=i(5),r=i(2),s=i(15),a=i(64),o=i(67),l=i(62),u=i(61),c=i(10),d=i(6),h=i(65),p=i(42),g=i(92);t.exports=function(t,e,i,f,_,v){var m=n[t],E=m,A=_?"set":"add",T=E&&E.prototype,y={},b=function(t){var e=T[t];s(T,t,"delete"==t||"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof E&&(v||T.forEach&&!d((function(){(new E).entries().next()})))){var S=new E,I=S[A](v?{}:-0,1)!=S,D=d((function(){S.has(1)})),k=h((function(t){new E(t)})),P=!v&&d((function(){for(var t=new E,e=5;e--;)t[A](e,e);return!t.has(-0)}));k||((E=e((function(e,i){u(e,E,t);var n=g(new m,e,E);return null!=i&&l(i,_,n[A],n),n}))).prototype=T,T.constructor=E),(D||P)&&(b("delete"),b("has"),_&&b("get")),(P||I)&&b(A),v&&T.clear&&delete T.clear}else E=f.getConstructor(e,t,_,A),a(E.prototype,i),o.NEED=!0;return p(E,t),y[t]=E,r(r.G+r.W+r.F*(E!=m),y),v||f.setStrong(E,t,_),E}},function(t,e,i){var n=i(10),r=i(8),s=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(21)(Function.call,i(68).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return s(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:s}},function(t,e,i){i(11)&&"g"!=/./g.flags&&i(13).f(RegExp.prototype,"flags",{configurable:!0,get:i(69)})},function(t,e,i){var n=i(123);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(10),r=i(95),s=i(3)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(5),r=i(27),s=i(39),a=i(97),o=i(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:a.f(t)})}},function(t,e,i){var n=i(32),r=i(59),s=i(46);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var a,o=i(t),l=s.f,u=0;o.length>u;)l.call(t,a=o[u++])&&e.push(a);return e}},function(t,e,i){var n=i(33),r=i(72).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==s.call(t)?function(t){try{return r(t)}catch(t){return a.slice()}}(t):r(n(t))}},function(t,e,i){"use strict";var n=i(13),r=i(37);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(2),r=i(34),s=i(6),a=i(129),o="["+a+"]",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),c=function(t,e,i){var r={},o=s((function(){return!!a[t]()||"​"!="​"[t]()})),l=r[t]=o?e(d):a[t];i&&(r[i]=l),n(n.P+n.F*o,"String",r)},d=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=c},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){"use strict";var n=i(77);i(2)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,i){var n=i(132),r=i(133);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);t.exports=r.locals||{}},function(t,e,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function o(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},n=[],r=0;r<t.length;r++){var s=t[r],l=e.base?s[0]+e.base:s[0],u=i[l]||0,c="".concat(l," ").concat(u);i[l]=u+1;var d=o(c),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(h)):a.push({identifier:c,updater:_(h,e),references:1}),n.push(c)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=s(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function h(t,e,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var s=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function p(t,e,i){var n=i.css,r=i.media,s=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var g=null,f=0;function _(t,e){var i,n,r;if(e.singleton){var s=f++;i=g||(g=u(e)),n=h.bind(null,i,s,!1),r=h.bind(null,i,s,!0)}else i=u(e),n=p.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var i=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var r=o(i[n]);a[r].references--}for(var s=l(t,e),u=0;u<i.length;u++){var c=o(i[u]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=s}}}},function(t,e,i){"use strict";i.r(e);var n=i(101),r=i.n(n)()(!1);r.push([t.i,".nexplayer_ad_container {\n    width: 100%;\n    height: 100%;\n    display: inherit;\n    position: absolute;\n    top: 0px;\n}\n\n.rmp-container {\n    display: inherit;\n    height: inherit !important;\n}",""]),e.default=r},function(t,e,i){var n=i(2),r=i(27),s=i(6);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],a={};a[t]=e(i),n(n.S+n.F*s((function(){i(1)})),"Object",a)}},function(t,e,i){"use strict";var n=i(17),r=i(56),s=i(16);t.exports=function(t){for(var e=n(this),i=s(e.length),a=arguments.length,o=r(a>1?arguments[1]:void 0,i),l=a>2?arguments[2]:void 0,u=void 0===l?i:r(l,i);u>o;)e[o++]=t;return e}},function(t,e,i){var n=i(2);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(2);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t){t.exports=JSON.parse('{"name":"nexplayer_html5","version":"1.2.6","description":"This repository contains the project for the HTML5 player, refactorizing the old codebase and using a new architecture and TypeScript.","main":"./dist/nexplayer.js","scripts":{"start":"webpack-dev-server --content-base build/ --host 0.0.0.0 --config=webpack.config.js --env.development=true","buildDev:js":"webpack --mode=\'development\' --config=webpack.config.js --env.development=true --progress --colors","type-check":"tsc --noEmit","type-check:watch":"npm run type-check -- --watch","build:types":"tsc --emitDeclarationOnly","build:js":"webpack --mode=\'production\' --optimize-minimize --config=webpack.config.js --env.production=true --progress --colors","build":"npm run build:js","lint":"eslint ./","lint-rule-timings":"cross-env-shell TIMING=1 npm lint"},"repository":{"type":"git","url":"git+https://gitlab.com/nexplayer/player/NexHTML5.git"},"keywords":[],"author":"Carlos Llames Arribas","license":"ISC","bugs":{"url":"https://gitlab.com/nexplayer/player/NexHTML5/issues"},"homepage":"https://gitlab.com/nexplayer/player/NexHTML5/#readme","devDependencies":{"@babel/core":"^7.12.3","@babel/helper-module-imports":"^7.12.5","@babel/plugin-proposal-class-properties":"^7.12.1","@babel/plugin-transform-runtime":"^7.12.1","@babel/polyfill":"^7.12.1","@babel/preset-env":"^7.12.1","@babel/preset-typescript":"^7.12.1","@types/node":"^14.14.6","@types/vmap":"^2.2.0","@types/whatwg-fetch":"0.0.33","@typescript-eslint/eslint-plugin":"^4.4.0","@typescript-eslint/parser":"^4.4.0","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","cross-env":"^7.0.2","css-loader":"^4.3.0","eslint":"^7.10.0","file-loader":"^6.1.0","fork-ts-checker-webpack-plugin":"^5.2.0","html-webpack-plugin":"^4.3.0","postcss":"^8.1.1","postcss-loader":"^4.0.2","postcss-preset-env":"^6.7.0","style-loader":"^1.2.1","terser-webpack-plugin":"^4.2.2","typescript":"^4.1.3","webpack":"^4.44.2","webpack-bundle-analyzer":"^3.9.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.0","webpack-html-plugin":"^0.1.1","webpack-log":"^3.0.1"},"dependencies":{"@types/crypto-js":"^3.0.1","crypto-js":"^3.0.0","uglifyjs-webpack-plugin":"^2.2.0","whatwg-fetch":"^3.6.1"}}')},function(t,e,i){"use strict";i.r(e),i.d(e,"NexPlayer",(function(){return Hn})),i.d(e,"Setup",(function(){return jn})),i.d(e,"UnMount",(function(){return Qn})),i.d(e,"PlayerEvents",(function(){return Kn})),i.d(e,"AdsEvents",(function(){return qn})),i.d(e,"AdInstance",(function(){return zn})),i.d(e,"isUnmounted",(function(){return Xn}));var n,r,s,a,o,l,u,c,d,h,p=i(4),g=i.n(p),f=i(9),_=i.n(f),v=i(0),m=i.n(v),E=(i(53),i(14),i(12),i(1)),A=i.n(E),T=(i(7),i(23),i(35),i(24),i(18),i(25),i(26),i(49),i(28),i(29),i(96),i(71),i(73),function(){function t(t,e,i){this._id=void 0,this._startTime=void 0,this._endTime=void 0,this._payload=void 0,this._positionAlign=void 0,this._textAlign=void 0,this._displayAlign=void 0,this._lineInterpretation=void 0,this._line=void 0,this._lineAlign=void 0,this._lineHeight=void 0,this._writingMode=void 0,this._direction=void 0,this._fontStyle=void 0,this._fontWeight=void 0,this._fontSize=void 0,this._size=void 0,this._position=void 0,this._cueRegion=void 0,this._opacity=void 0,this._textDecoration=void 0,this._id="",this._startTime=t,this._endTime=e,this._payload=i,this._positionAlign=n.AUTO,this._textAlign=r.CENTER,this._displayAlign=s.AFTER,this._lineInterpretation=a.LINE_NUMBER,this._line=null,this._lineAlign=o.START,this._lineHeight="",this._writingMode=l.HORIZONTAL_TOP_TO_BOTTOM,this._direction=u.HORIZONTAL_LEFT_TO_RIGHT,this._fontStyle=c.NORMAL,this._fontWeight=d.NORMAL,this._fontSize="",this._size=0,this._position=null,this._cueRegion=new S,this._opacity=1,this._textDecoration=[]}var e=t.prototype;return e.setPositionAlign=function(t){this._positionAlign=t},e.setTextAlign=function(t){this._textAlign=t},e.setWritingMode=function(t){this._writingMode=t},e.setId=function(t){this._id=t},e.setSize=function(t){this._size=t},e.setPosition=function(t){this._position=t},e.setCueRegion=function(t){this._cueRegion=t},e.setLineAlign=function(t){this._lineAlign=t},e.setLineInterpretation=function(t){this._lineInterpretation=t},e.setLine=function(t){this._line=t},e.getPayload=function(){return this._payload},e.getStartTime=function(){return this._startTime},e.getEndTime=function(){return this._endTime},e.getDirection=function(){return this._direction},e.getOpacity=function(){return this._opacity},e.getDisplayAlign=function(){return this._displayAlign},e.getLineAlign=function(){return this._lineAlign},e.getFontWeight=function(){return this._fontWeight},e.getFontStyle=function(){return this._fontStyle},e.getFontSize=function(){return this._fontSize},e.getLine=function(){return this._line},e.getLineInterpretation=function(){return this._lineInterpretation},e.getWritingMode=function(){return this._writingMode},e.getCueRegion=function(){return this._cueRegion},e.getLineHeight=function(){return this._lineHeight},e.getPosition=function(){return this._position},e.getTextAlign=function(){return this._textAlign},e.getPositionAlign=function(){return this._positionAlign},e.getTextDecoration=function(){return this._textDecoration},e.getSize=function(){return this._size},t}());!function(t){t.LEFT="line-left",t.RIGHT="line-right",t.CENTER="center",t.AUTO="auto"}(n||(n={})),function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.START="start",t.END="end"}(r||(r={})),function(t){t.BEFORE="before",t.CENTER="center",t.AFTER="after"}(s||(s={})),function(t){t.LINE_NUMBER="lineNumber",t.PERCENTAGE="percentage"}(a||(a={})),function(t){t.CENTER="center",t.START="start",t.END="end"}(o||(o={})),function(t){t.HORIZONTAL_TOP_TO_BOTTOM="horizontal-tb",t.VERTICAL_LEFT_TO_RIGHT="vertical-lr",t.VERTICAL_RIGHT_TO_LEFT="vertical-rl"}(l||(l={})),function(t){t.HORIZONTAL_LEFT_TO_RIGHT="ltr",t.HORIZONTAL_RIGHT_TO_LEFT="rtl"}(u||(u={})),function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(c||(c={})),function(t){t[t.NORMAL=400]="NORMAL",t[t.BOLD=700]="BOLD"}(d||(d={})),function(t){t.UNDERLINE="underline",t.LINE_THROUGH="lineThrough",t.OVERLINE="overline"}(h||(h={}));var y,b,S=function(){function t(){this._id=void 0,this._viewportAnchorX=void 0,this._viewportAnchorY=void 0,this._regionAnchorX=void 0,this._regionAnchorY=void 0,this._width=void 0,this._height=void 0,this._heightUnits=void 0,this._widthUnits=void 0,this._viewportAnchorUnits=void 0,this._scroll=void 0,this._id="",this._viewportAnchorX=0,this._viewportAnchorY=0,this._regionAnchorX=0,this._regionAnchorY=0,this._width=0,this._height=0,this._heightUnits=y.PERCENTAGE,this._widthUnits=y.PERCENTAGE,this._viewportAnchorUnits=y.PERCENTAGE,this._scroll=b.NONE}var e=t.prototype;return e.setId=function(t){this._id=t},e.setViewportAnchorX=function(t){this._viewportAnchorX=t},e.setViewportAnchorY=function(t){this._height=t},e.setRegionAnchorX=function(t){this._regionAnchorX=t},e.setRegionAnchorY=function(t){this._regionAnchorY=t},e.setWidth=function(t){this._width=t},e.setHeight=function(t){this._height=t},e.setWidthUnits=function(t){this._widthUnits=t},e.setHeightUnits=function(t){this._heightUnits=t},e.setScrollMode=function(t){this._scroll=t},e.getId=function(){return this._id},e.getHeight=function(){return this._height},e.getWidth=function(){return this._width},e.getHeightUnits=function(){return this._heightUnits},e.getWidthUnits=function(){return this._widthUnits},e.getViewportAnchorUnits=function(){return this._viewportAnchorUnits},e.getViewportAnchorX=function(){return this._viewportAnchorX},e.getViewportAnchorY=function(){return this._viewportAnchorY},t}();function I(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return D(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(t){t[t.PX=0]="PX",t[t.PERCENTAGE=1]="PERCENTAGE",t[t.LINES=2]="LINES"}(y||(y={})),function(t){t.NONE="",t.UP="up"}(b||(b={}));var k=function(){function t(t){this._totalCues=void 0,this._dividedCues=void 0,this._totalSegments=void 0,this._currentCues=void 0,this._displayedCues=void 0,this._isTextVisible=void 0,this._timerCC=void 0,this._lastTimeCC=void 0,this._videoContainer=void 0,this._captionsContainer=void 0,this._totalCues=[],this._dividedCues=[],this._totalSegments=0,this._currentCues=[],this._displayedCues=[],this._isTextVisible=!1,this._timerCC=void 0,this._lastTimeCC=0,void 0!==t?(this._videoContainer=t,this._captionsContainer=document.createElement("div"),this._captionsContainer.classList.add("captions-container"),this._captionsContainer.style.position="absolute",this._captionsContainer.style.width="100%",this._captionsContainer.style.height="100%",this._captionsContainer.style.zIndex="99",this._videoContainer.appendChild(this._captionsContainer)):(this._videoContainer=null,this._captionsContainer=null,console.error("Invalid or non existent player's container.NaN"))}var e=t.prototype;return e._displayCue=function(t){if(null!==this._captionsContainer){var e=document.createElement("span");if(e.textContent=" "+t.getPayload(),null!==this._captionsContainer.firstChild)if(1===this._captionsContainer.childNodes[0].nodeType){var i=this._captionsContainer.childNodes[0];if("nestedCues-container"!==i.id){var n=document.createElement("p");for(n.id="nestedCues-container",this._setStyle(t,n),n.textContent="";null!==this._captionsContainer.lastChild;){var r=this._captionsContainer.lastChild.cloneNode(!0);this._captionsContainer.removeChild(this._captionsContainer.lastChild);var s=document.createElement("span");s.textContent=" "+r.textContent,null!==n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s)}n.appendChild(e),this._captionsContainer.appendChild(n)}else i.appendChild(e)}else this._setStyle(t,e),this._captionsContainer.appendChild(e);else this._setStyle(t,e),this._captionsContainer.appendChild(e)}else console.error("The container for the captions is null. NaN")},e._setStyle=function(t,e){if(null!=e){var i=e.style;if(i.position="absolute",i.textShadow="3px 2px black",i.color="white",i.whiteSpace="pre-line",e.textContent=t.getPayload(),i.direction=t.getDirection(),i.opacity=t.getOpacity().toString(),t.getDisplayAlign()==s.BEFORE?i.justifyContent="flex-start":t.getDisplayAlign()==s.CENTER?i.justifyContent="center":i.justifyContent="flex-end",i.fontWeight=t.getFontWeight().toString(),i.fontStyle=t.getFontStyle(),void 0!==t.getFontSize()&&null!==t.getFontSize()&&""!==t.getFontSize());else if(null!==this._captionsContainer){var r=this._captionsContainer.getBoundingClientRect().width,u="";r===window.screen.width?(u="2vw",i.fontSize=u):(u=(r/window.screen.width+1).toString(),i.fontSize=u+"vw")}if(t.getLine())t.getLineInterpretation()==a.PERCENTAGE&&(t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?t.getLineAlign()==o.START?i.top=t.getLine()+"%":t.getLineAlign()==o.END&&(i.bottom=t.getLine()+"%"):t.getWritingMode()==l.VERTICAL_LEFT_TO_RIGHT?t.getLineAlign()==o.START?i.left=t.getLine()+"%":t.getLineAlign()==o.END&&(i.right=t.getLine()+"%"):t.getLineAlign()==o.START?i.right=t.getLine()+"%":t.getLineAlign()==o.END&&(i.left=t.getLine()+"%"));else if(t.getCueRegion()&&t.getCueRegion().getId()){var c=y.PERCENTAGE,d=t.getCueRegion().getHeightUnits()==c?"%":"px",h=t.getCueRegion().getWidthUnits()==c?"%":"px",p=t.getCueRegion().getViewportAnchorUnits()==c?"%":"px";i.height=t.getCueRegion().getHeight()+d,i.width=t.getCueRegion().getWidth()+h,i.top=t.getCueRegion().getViewportAnchorX()+p,i.left=t.getCueRegion().getViewportAnchorY()+p}if(i.lineHeight=t.getLineHeight(),t.getPosition())if(t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM){var g=t.getPosition();null!==g&&(i.left=g.toString()+"%")}else{var f=t.getPosition();null!==f&&(i.top=f.toString()+"%")}else t.getTextAlign()?"left"==t.getTextAlign()?t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?i.left="0%":i.top="100%":"right"==t.getTextAlign()?t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?i.right="0%":i.top="0%":t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?(i.left="50%",i.transform="translateX(-50%)"):(i.top="50%",i.transform="translateY(-50%)"):t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?(i.left="50%",i.transform="translateX(-50%)"):(i.top="50%",i.transform="translateY(-50%)");t.getPositionAlign()==n.LEFT?i.cssFloat="left":t.getPositionAlign()==n.RIGHT&&(i.cssFloat="right"),i.textAlign=t.getTextAlign(),i.textDecoration=t.getTextDecoration().join(" "),i.writingMode=t.getWritingMode(),t.getSize()&&(t.getWritingMode()==l.HORIZONTAL_TOP_TO_BOTTOM?i.width=t.getSize()+"%":i.height=t.getSize()+"%")}else console.error("Invalid span element, NaN")},e._binarySearch=function(t,e,i,n){if(e>i)return-1;var r=Math.floor((e+i)/2),s=t[r];return n>=s[0].getStartTime()&&n<=s[s.length-1].getEndTime()?r:(n<s[0].getStartTime()?i=r-1:e=r+1,this._binarySearch(t,e,i,n))},e.init=function(t){if(this._totalCues=t,this._totalCues.length>200){this._totalSegments=this._totalCues.length/200;for(var e=0;e<this._totalSegments;e++)this._dividedCues.push(this._totalCues.slice(200*e,200+200*e))}},e.destroy=function(){null!==this._captionsContainer&&null!==this._videoContainer&&(this._videoContainer.removeChild(this._captionsContainer),this._captionsContainer=null),void 0!==this._timerCC&&clearTimeout(this._timerCC),this.reset()},e.reset=function(){for(var t,e=I(this._currentCues);!(t=e()).done;){var i,n,r,s;t.value;if(null!==(null==(i=this._captionsContainer)?void 0:i.firstChild)&&void 0!==(null==(n=this._captionsContainer)?void 0:n.firstChild))null==(r=this._captionsContainer)||null==(s=r.firstChild)||s.remove()}this._totalCues=[],this._dividedCues=[],this._totalSegments=0,this._currentCues=[],this._displayedCues=[]},e.setTextVisibility=function(t){this._isTextVisible=t},e.updateCue=function(t){var e=this,i=[];if(this._totalCues.length>200){var n=this._binarySearch(this._dividedCues,0,this._dividedCues.length-1,t);-1!=n&&(i=this._dividedCues[n])}else i=this._totalCues;for(var r,s=function(n){return i.includes(n)&&n.getStartTime()<=t&&n.getEndTime()>=t&&e._isTextVisible},a=I(this._currentCues);!(r=a()).done;){var o,l,u,c,d=r.value;if(!s(d))if(null!==(null==(o=this._captionsContainer)?void 0:o.firstChild)&&void 0!==(null==(l=this._captionsContainer)?void 0:l.firstChild))null==(u=this._captionsContainer)||null==(c=u.firstChild)||c.remove()}for(var h,p=I(this._displayedCues);!(h=p()).done;){var g=h.value;if(!s(g)){var f=this._displayedCues.indexOf(g);f>-1&&this._displayedCues.splice(f,1)}}this._currentCues=i.filter((function(t){return s(t)})).sort((function(t,e){return t.getStartTime()!=e.getStartTime()?t.getStartTime()-e.getStartTime():t.getEndTime()-e.getEndTime()}));for(var _,v=I(this._currentCues);!(_=v()).done;){var m=_.value;this._displayedCues.includes(m)||(this._displayedCues.push(m),this._displayCue(m))}},e.displayCuesCC=function(t){var e=this;if(t.size>0)for(;null!==(null==(i=this._captionsContainer)?void 0:i.firstChild);){var i,n,s;null==(n=this._captionsContainer)||n.removeChild(null==(s=this._captionsContainer)?void 0:s.firstChild)}var o=this;t.forEach((function(t){var e=new T(NaN,NaN,t.text);e.setTextAlign(r.CENTER),e.setLineInterpretation(a.PERCENTAGE),e.setLine(75),o._displayCue(e)})),void 0!==this._timerCC&&clearTimeout(this._timerCC),this._timerCC=setTimeout((function(){var t,i,n,r;null!==(null==(t=e._captionsContainer)?void 0:t.firstChild)&&void 0!==(null==(i=e._captionsContainer)?void 0:i.firstChild)&&(null==(n=e._captionsContainer)||null==(r=n.firstChild)||r.remove());e._timerCC=void 0}),5e3)},t}(),P=(i(36),i(30),i(31),function(){function t(t){this._data=void 0,this._position=void 0,this._data=t,this._position=0}var e=t.prototype;return e._readRegexReturnCapture=function(t,e){if(this.atEnd())return null;var i=this.readRegex(t);return i?i[e]:null},e._indexOf=function(t){t.lastIndex=this._position;var e=t.exec(this._data);return null==e?null:{position:e.index,length:e[0].length,results:e}},e.atEnd=function(){return this._position==this._data.length},e.readLine=function(){return this._readRegexReturnCapture(/(.*?)(\n|$)/gm,1)},e.readWord=function(){return this._readRegexReturnCapture(/[^ \t\n]*/gm,0)},e.skipWhitespace=function(){this.readRegex(/[ \t]+/gm)},e.readRegex=function(t){var e=this._indexOf(t);return this.atEnd()||null==e||e.position!=this._position?null:(this._position+=e.length,e.results)},t}());function L(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var R,N,O=function(){function t(){}var e=t.prototype;return e._parseTime=function(t){var e=t.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==e)return null;var i=Number(e[1])||0,n=Number(e[2]),r=Number(e[3]),s=Number(e[4]);return n>59||r>59?null:s/1e3+r+60*n+3600*i},e._getRegionById=function(t,e){var i=t.filter((function(t){return t.getId()==e}));return i.length?(i.length>1&&console.log("VTTRegion ids should be unique!"),i[0]):(console.log("Could not find a region with id: ",e," The region will be ignored."),null)},e._setTextAlign=function(t,e){switch(e){case"middle":t.setTextAlign(r.CENTER);break;case"left":t.setTextAlign(r.LEFT);break;case"right":t.setTextAlign(r.RIGHT);break;case"start":t.setTextAlign(r.START);break;case"end":t.setTextAlign(r.END)}},e._setVerticalWritingMode=function(t,e){"lr"==e?t.setWritingMode(l.VERTICAL_LEFT_TO_RIGHT):t.setWritingMode(l.VERTICAL_RIGHT_TO_LEFT)},e._setPositionAlign=function(t,e){"line-left"==e||"start"==e?t.setPositionAlign(n.LEFT):"line-right"==e||"end"==e?t.setPositionAlign(n.RIGHT):t.setPositionAlign(n.CENTER)},e._parsedLineValueAndInterpretation=function(t,e){var i=null;if(i=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(e)){if(t.setLineInterpretation(a.PERCENTAGE),t.setLine(Number(i[1])),i[2])switch(i[2]){case"center":t.setLineAlign(o.CENTER);break;case"start":t.setLineAlign(o.START);break;case"end":t.setLineAlign(o.END)}}else{if(!(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e)))return!1;if(t.setLineInterpretation(a.LINE_NUMBER),t.setLine(Number(i[1])),i[2])switch(i[2]){case"center":t.setLineAlign(o.CENTER);break;case"start":t.setLineAlign(o.START);break;case"end":t.setLineAlign(o.END)}}return!0},e._parseCueSetting=function(t,e,i){var n=null;if(n=/^align:(start|middle|center|end|left|right)$/.exec(e))this._setTextAlign(t,n[1]);else if(n=/^vertical:(lr|rl)$/.exec(e))this._setVerticalWritingMode(t,n[1]);else if(n=/^size:([\d.]+)%$/.exec(e))t.setSize(Number(n[1]));else if(n=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))t.setPosition(Number(n[1])),n[2]&&this._setPositionAlign(t,n[2]);else{if(!(n=/^region:(.*)$/.exec(e)))return this._parsedLineValueAndInterpretation(t,e);var r=this._getRegionById(i,n[1]);r&&t.setCueRegion(r)}return!0},e._parseCue=function(t,e,i){if(1==t.length&&!t[0])return null;if(/^NOTE($|[ \t])/.test(t[0]))return null;if("STYLE"==t[0])return null;var n=null;t[0].includes("--\x3e")||(n=t[0],t.splice(0,1));var r=new P(t[0]),s=this._parseTime(r),a=r.readRegex(/[ \t]+-->[ \t]+/g),o=this._parseTime(r);if(null==s||null==a||null==o)return console.log("The cue is invalid"),null;s+=e,o+=e;var l=t.slice(1).join("\n").trim(),u=new T(s,o,l);r.skipWhitespace();for(var c=r.readWord();c;)this._parseCueSetting(u,c,i)||console.log("Invalid VTT setting: ",c," The setting will be ignored."),r.skipWhitespace(),c=r.readWord();return null!=n&&u.setId(n),u},e._parseRegionSetting=function(t,e){var i=null;if(i=/^id=(.*)$/.exec(e))t.setId(i[1]);else if(i=/^width=(\d{1,2}|100)%$/.exec(e))t.setWidth(Number(i[1]));else if(i=/^lines=(\d+)$/.exec(e))t.setHeight(Number(i[1])),t.setHeightUnits(y.LINES);else if(i=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(e))t.setRegionAnchorX(Number(i[1])),t.setRegionAnchorY(Number(i[2]));else if(i=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(e))t.setViewportAnchorX(Number(i[1])),t.setViewportAnchorY(Number(i[2]));else{if(!(i=/^scroll=up$/.exec(e)))return!1;t.setScrollMode(b.UP)}return!0},e._parseRegion=function(t){var e=new P(t),i=new S;e.readWord(),e.skipWhitespace();for(var n=e.readWord();n;)this._parseRegionSetting(i,n)||console.log("Invalid VTT region setting: ",n," The setting will be ignored."),e.skipWhitespace(),n=e.readWord();return i},e.parse=function(t){var e=(t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);/^WEBVTT($|[ \t\n])/m.test(e[0])||console.log("Invalid text header"),e[0].includes("X-TIMESTAMP-MAP");for(var i,n=[],r=L(e[0].split("\n"));!(i=r()).done;){var s=i.value;if(/^Region:/.test(s)){var a=this._parseRegion(s);n.push(a)}}for(var o,l=[],u=L(e.slice(1));!(o=u()).done;){var c=o.value.split("\n"),d=this._parseCue(c,0,n);d&&l.push(d)}return l},t}(),w=function(){function t(t,e){this._type=void 0,this._data=void 0,this._detail=void 0,this._type=t,this._data=e,this._detail=e}return _()(t,[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"detail",get:function(){return this._detail}}]),t}();!function(t){t[t.PLAYER_EVENT=0]="PLAYER_EVENT",t[t.AD_EVENT=1]="AD_EVENT",t[t.NONE=2]="NONE"}(R||(R={})),function(t){t.STATE_CHANGED="statechanged",t.PLAYER_CREATING="playercreating",t.PLAYER_CREATED="playercreated",t.PLAYER_DESTROYED="playerdestroyed",t.PLAY="play",t.PLAYING="playing",t.PAUSE="pause",t.PAUSED="paused",t.SEEKING="seeking",t.SEEKED="seeked",t.STALLED="stalled",t.HOVERING="hovering",t.DURATION_CHANGE="durationchange",t.TIME_UPDATE="timeupdate",t.LOAD_START="loadstart",t.LOADED_DATA="loadeddata",t.CAN_PLAY="canplay",t.BUFFERING="buffering",t.BUFFER_TYPE="buffertype",t.VIDEO_FIRST_QUARTILE="videofirstquartile",t.VIDEO_MID_POINT="videomidpoint",t.VIDEO_THIRD_QUARTILE="videothirdquartile",t.SIXTY_SECONDS_IN="60secondsin",t.ENDED="ended",t.WEBMAF_SUBTITLES_DATA_LOADED="webmafsubtitlesdataloaded",t.NEW_SUBTITLES_DATA_LOADED="newsubtitlesdataloaded",t.CC_NEW_DATA="ccnewdata",t.THUMBNAIL_DATA="thumbnaildata",t.THUMBNAIL_LOADED="thumbnailloaded",t.THUMBNAIL_REPLY="thumbnailreply",t.ENVIRONMENT_DETECTED="environmentdetected",t.MANIFEST_REQUEST="manifestrequest",t.VIDEO_PROGRESS_TIME="videoProgressTime",t.ERROR="error",t.NEXPLAYER_ERROR="nexplayererror",t.AD_LIBRARY_CREATING="adlibrarycreating",t.AD_LIBRARY_CREATED="adlibrarycreated",t.AD_LIBRARY_DESTROYED="adlibrarydestroyed",t.AD_START="adstart",t.AD_PODS_INFO="adpodsinfo",t.AD_BLOCK_STARTED="adblockstarted",t.AD_BLOCK_END="adblockend",t.AD_STARTED="adstarted",t.AD_TAG_START_LOADING="adtagstartloading",t.AD_LOADED="adloaded",t.AD_COMPLETED="adcomplete",t.AD_DESTROYED="addestroyed",t.AD_PAUSED="adpaused",t.AD_RESUMED="adresumed",t.AD_SKIPPED="adskipped",t.AD_FIRST_QUARTILE="adfirstquartile",t.AD_MID_POINT="admidpoint",t.AD_THIRD_QUARTILE="adthirdquartile",t.AD_IMPRESSION="adimpression",t.AD_ERROR="aderror",t.AD_POD_COMPLETED="adpodcompleted"}(N||(N={}));var x=[N.STATE_CHANGED,N.PLAYER_CREATING,N.PLAYER_CREATED,N.PLAYER_DESTROYED,N.PLAY,N.PLAYING,N.PAUSE,N.PAUSED,N.SEEKING,N.SEEKED,N.STALLED,N.HOVERING,N.DURATION_CHANGE,N.TIME_UPDATE,N.LOAD_START,N.LOADED_DATA,N.CAN_PLAY,N.BUFFERING,N.BUFFER_TYPE,N.VIDEO_FIRST_QUARTILE,N.VIDEO_MID_POINT,N.VIDEO_THIRD_QUARTILE,N.ENDED,N.WEBMAF_SUBTITLES_DATA_LOADED,N.NEW_SUBTITLES_DATA_LOADED,N.CC_NEW_DATA,N.THUMBNAIL_DATA,N.THUMBNAIL_LOADED,N.THUMBNAIL_REPLY,N.ENVIRONMENT_DETECTED,N.MANIFEST_REQUEST,N.VIDEO_PROGRESS_TIME,N.ERROR,N.NEXPLAYER_ERROR],M=[N.AD_LIBRARY_CREATING,N.AD_LIBRARY_CREATED,N.AD_LIBRARY_DESTROYED,N.AD_START,N.AD_PODS_INFO,N.AD_BLOCK_STARTED,N.AD_BLOCK_END,N.AD_STARTED,N.AD_TAG_START_LOADING,N.AD_LOADED,N.AD_COMPLETED,N.AD_DESTROYED,N.AD_PAUSED,N.AD_RESUMED,N.AD_SKIPPED,N.AD_FIRST_QUARTILE,N.AD_MID_POINT,N.AD_THIRD_QUARTILE,N.AD_IMPRESSION,N.AD_ERROR,N.AD_POD_COMPLETED];function U(t){return x.includes(t)?R.PLAYER_EVENT:M.includes(t)?R.AD_EVENT:R.NONE}var B=function(){function t(){this._observers=void 0,this._observers=new Map}var e=t.prototype;return e._removeAllObservers=function(){null!==this._observers&&this._observers.size>0&&this._observers.clear()},t.getInstance=function(){return null===t.INSTANCE&&(t.INSTANCE=new t),t.INSTANCE},e.addObserver=function(t,e){if(null!==this._observers&&this._observers.has(e)){var i=this._observers.get(e);void 0!==i&&(i.push(t),this._observers.set(e,i))}else if(null!==this._observers){this._observers.set(e,new Array);var n=this._observers.get(e);void 0!==n&&(n.push(t),this._observers.set(e,n))}},e.once=function(t,e){t.once=!0,this.addObserver(t,e)},e.removeObservers=function(t){null!==this._observers&&this._observers.has(t.type)&&this._observers.delete(t.type)},e.removeObserver=function(t,e){for(var i=0;i<e.length;i++)if(null!==this._observers&&this._observers.has(e[i])){var n=this._observers.get(e[i]);if(void 0!==n)for(var r=0;r<n.length;)n[r]===t?(n.splice(r,1),n.length>0&&this._observers.set(e[i],n)):++r}},e.destroy=function(){this._removeAllObservers(),this._observers=null,t.INSTANCE=null},e.dispatch=function(t){if(null!==this._observers&&this._observers.has(t.type)){var e=this._observers.get(t.type);void 0!==e&&(e.forEach((function(i){if(i.on(t),void 0!==e&&i.once){var n=e.indexOf(i);-1!==n&&e.splice(n,1)}})),null!==this._observers&&this._observers.set(t.type,e))}},t}();B.INSTANCE=null;var V,F,G,H,Y,W,j,Q,K,q,z=function(){function t(t){this._once=void 0,this._once=!1;for(var e=0;e<t.length;e++)B.getInstance().addObserver(this,t[e])}var e=t.prototype;return e.on=function(t){},e.trigger=function(t){B.getInstance().dispatch(t)},_()(t,[{key:"once",get:function(){return this._once},set:function(t){this._once=t}}]),t}(),X={id:-1},$=function(t){function e(e,i){var n;return(n=t.call(this,[])||this)._captionsDisplayer=void 0,n._externalSubtitles=void 0,n._vttParser=void 0,n._subtitles=void 0,n._isEmbeddedSubtitle=void 0,n._currentSubtitle=void 0,n._videoContainer=void 0,n._videoEngine=void 0,n._cues=void 0,n._lastSubtitleIndex=void 0,n._ccCues=void 0,n._captionsDisplayer=null,n._externalSubtitles=e,n._vttParser=null,n._subtitles=[],n._isEmbeddedSubtitle=[],n._currentSubtitle=X,n._videoContainer=i,n._videoEngine=null,n._cues=[],n._ccCues=[],n._lastSubtitleIndex=-1,n}A()(e,t);var i=e.prototype;return i._updateCaptions=function(t){null!==this._captionsDisplayer&&this._captionsDisplayer.updateCue(t)},i.init=function(){var t=g()(m.a.mark((function t(){var e,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve();case 2:void 0!==this._externalSubtitles?(this._captionsDisplayer=new k(this._videoContainer),this._externalSubtitles.src.includes(".vtt")?(e=this,(i=new XMLHttpRequest).open("GET",this._externalSubtitles.src,!0),i.onload=function(){if(null===i.response||200!==i.status)void 0!==e._externalSubtitles&&console.error("External subtitles "+e._externalSubtitles.src+" request failed"),void 0!==i.statusText?console.error("Status: "+i.statusText):console.error("Request's response is null");else{void 0!==e._externalSubtitles&&console.log("Request for external subtitles "+e._externalSubtitles.src+" finished successfully"),e._vttParser=new O,e._cues.push(e._vttParser.parse(i.responseText));var t={};t.id=e._subtitles.length,void 0!==e._externalSubtitles?t.language=e._externalSubtitles.language:t.language="und",e._subtitles.push(t),e._isEmbeddedSubtitle.push(!1),e.trigger(new w(N.NEW_SUBTITLES_DATA_LOADED,{}))}},i.send()):console.log("External subtitle with URL: "+this._externalSubtitles.src+" is not supported")):console.log("No external subtitles provided");case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.destroy=function(){this._cues=[],null!==this._captionsDisplayer&&(this._captionsDisplayer.destroy(),this._captionsDisplayer=null),null!==this._vttParser&&(this._vttParser=null),null!==this._videoEngine&&(this._videoEngine=null)},i.setVideoEngine=function(t){this._videoEngine=t},i.registerPlugin=function(t){this._captionsDisplayer=t},i.storeSubtitles=function(t){void 0!==t.id&&void 0!==t.language&&(t.id=this._subtitles.length,this._subtitles.push(t),this._isEmbeddedSubtitle.push(!0),this._isEmbeddedSubtitle.length>0&&null===this._captionsDisplayer&&(this._captionsDisplayer=new k(this._videoContainer)),this.trigger(new w(N.NEW_SUBTITLES_DATA_LOADED,{})))},i.feedCuesCC=function(t){var e=this,i=new Map,n=[];t.captions.forEach((function(t){-1===e._ccCues.indexOf(t.text)&&i.set(t.text,{text:t.text,position:t.position,rgba:t.rgba}),n.push(t.text)})),null!==this._captionsDisplayer&&void 0!==this._currentSubtitle.language&&0===this._currentSubtitle.language.localeCompare("CC")&&this._captionsDisplayer.displayCuesCC(i),this._ccCues=n},i.getSubtitles=function(){return this._subtitles},i.getCurrentSubtitle=function(){return this._currentSubtitle},i.setCurrentSubtitle=function(t){if(this._lastSubtitleIndex!==t){var e=this,i=function(t){void 0!==t.data.currentTime&&e._updateCaptions(t.data.currentTime)},n=function t(){var n;null!==e._captionsDisplayer&&null!==e._videoEngine&&(null==(n=e._captionsDisplayer)||n.reset(),e._videoEngine.removeEventListener(N.TIME_UPDATE,i),e._videoEngine.removeEventListener(N.ENDED,t))};-1===t?(this._lastSubtitleIndex=t,null!==this._captionsDisplayer&&(this._captionsDisplayer.reset(),this._captionsDisplayer.setTextVisibility(!1)),this._currentSubtitle=X,null!==this._videoEngine&&(this._videoEngine.removeEventListener(N.TIME_UPDATE,i),this._videoEngine.removeEventListener(N.ENDED,n))):null!==this._videoEngine&&t>=-1&&t<this._subtitles.length&&t<this._isEmbeddedSubtitle.length&&(this._lastSubtitleIndex=t,this._isEmbeddedSubtitle[t]?(this._lastSubtitleIndex=t,null!==this._captionsDisplayer&&(this._captionsDisplayer.reset(),this._captionsDisplayer.setTextVisibility(!1)),this._videoEngine.removeEventListener(N.ENDED,n),this._videoEngine.setCurrentSubtitle(t)):(this._videoEngine.setCurrentSubtitle(-1),this._videoEngine.removeEventListener(N.TIME_UPDATE,i),this._videoEngine.addEventListener(N.TIME_UPDATE,i),this._videoEngine.removeEventListener(N.ENDED,n),this._videoEngine.addEventListener(N.ENDED,n),null!==this._captionsDisplayer&&(this._captionsDisplayer.reset(),this._captionsDisplayer.setTextVisibility(!0),t<this._cues.length&&this._captionsDisplayer.init(this._cues[t]))),this._currentSubtitle=this._subtitles[t])}},i.trigger=function(e){t.prototype.trigger.call(this,e)},e}(z);i(78),i(98);function J(t){return new Promise((function(e,i){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){if(null!=n)if(200===n.status){var t=n.getAllResponseHeaders(),r=t.indexOf("application");-1===r&&-1===(r=t.indexOf("video"))&&(r=t.indexOf("audio"));for(var s=r;"\n"!==t.charAt(s);)s++;var a=t.slice(r,s);e(a)}else console.log("Response has a wrong status while trying to fetchthe manifest for retrieving the content type",n.status),i(n.status);else i()},n.send()}))}function Z(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)}))}function tt(t){if(void 0!==(l=t)&&"number"==typeof l&&Number.isFinite(l)&&t>=0){var e,i,n,r=0,s=0,a=0,o=Math.floor(t%1e3);return n=0===o?"000":o<10?"00"+o.toString():o<100?"0"+o.toString():o.toString(),(r=Math.floor(1*t/1e3))>59&&(r-=60*(s=Math.floor(1*r/60))),e=0===r?"00":r<10?"0"+r.toString():r.toString(),s>59&&(s-=60*(a=Math.floor(1*s/60))),i=0===s?"00":s<10?"0"+s.toString():s.toString(),(0===a?"00":a<10?"0"+a.toString():a>23?"00":a.toString())+":"+i+":"+e+"."+n}return"00:00:00.000";var l}!function(t){t.NONE="None",t.CHROME="Chrome",t.EDGE="Edge",t.FIREFOX="Firefox",t.OPERA="Opera",t.SAFARI="Safari",t.UNKNOWN="Unknwown"}(V||(V={})),function(t){t.BACKGROUND="Background",t.CONNECTION="Connection",t.INITIAL="Initial",t.SEEK="Seek"}(F||(F={})),function(t){t.AD="Ad",t.MAIN="Main content",t.NONE="None"}(G||(G={})),function(t){t.NONE="None",t.CONSOLE="Console",t.SMART_TV="Smart TV",t.WEB="Web",t.UNKNOWN="Unknown"}(H||(H={})),function(t){t.NONE="None",t.ANDROID="Android",t.IOS="iOS",t.LINUX="Linux",t.MAC="Mac",t.PLAYSTATION_4="PS4",t.PLAYSTATION_5="PS5",t.TIZEN="Tizen",t.XBOX="XBOX",t.WEBOS="WebOS",t.WINDOWS="Windows",t.UNKNOWN="Unknown"}(Y||(Y={})),function(t){t.NONE="none",t.READY="ready",t.BUFFERING="buffering",t.PLAYING="playing",t.PAUSED="paused",t.SEEKING="seeking",t.ENDED="ended"}(W||(W={})),function(t){t.NONE="None",t.DASH="Dash",t.HLS="HLS",t.PROGRESSIVE_DOWNLOAD="Progressive download",t.SMOOTH_STREAMING="Smooth streaming"}(j||(j={})),function(t){t.NONE="None",t.LIVE=" Live",t.VOD="VOD"}(Q||(Q={})),function(t){t.FAIRPLAY="com.apple.fps.1_0",t.PLAYREADY="com.microsoft.playready",t.WIDEVINE="com.widevine.alpha"}(K||(K={})),function(t){t.NONE="None",t.CHUNKED="Chunked",t.DYNAMIC="Dynamic",t.STATIC="Static"}(q||(q={}));var et=[N.ENVIRONMENT_DETECTED],it=function(t){function e(e){var i;return(i=t.call(this,et)||this)._userAgent=void 0,i._environment=void 0,i.logger=void 0,i.logger=e,i._userAgent="",void 0!==navigator.userAgent&&null!==navigator.userAgent&&""!==navigator.userAgent&&(i._userAgent=navigator.userAgent),i._environment={device:H.NONE,browser:V.NONE,platform:Y.NONE},i.checkPlatform(),i.checkBrowser(),i.trigger(new w(N.ENVIRONMENT_DETECTED,{environment:i._environment})),i}A()(e,t);var i=e.prototype;return i.checkBrowser=function(){this._environment.browser=V.NONE,this._environment.device===H.WEB&&""!==this._userAgent&&(null!=this._userAgent.match("OPR")||null!=this._userAgent.match("Opera")?this._environment.browser=V.OPERA:null!=this._userAgent.match("Edg")?this._environment.browser=V.EDGE:null!=this._userAgent.match("Safari")&&null!=this._userAgent.match("Version")?this._environment.browser=V.SAFARI:null!=this._userAgent.match("Firefox")?this._environment.browser=V.FIREFOX:null!=this._userAgent.match("Chrome")?this._environment.browser=V.CHROME:this._environment.browser=V.UNKNOWN)},i.checkPlatform=function(){this._environment.platform=Y.NONE,""!==this._userAgent&&(this._userAgent.includes("PlayStation 4")?(this._environment.platform=Y.PLAYSTATION_4,this._environment.device=H.CONSOLE):this._userAgent.includes("PlayStation 5")?(this._environment.platform=Y.PLAYSTATION_5,this._environment.device=H.CONSOLE):this._userAgent.includes("Xbox")?(this._environment.platform=Y.XBOX,this._environment.device=H.CONSOLE):this._userAgent.includes("Tizen")?(this._environment.platform=Y.TIZEN,this._environment.device=H.SMART_TV):this._userAgent.includes("Web0S")?(this._environment.platform=Y.WEBOS,this._environment.device=H.SMART_TV):this._userAgent.includes("Macintosh")||this._userAgent.includes("Mac_PowerPC")?(this._environment.platform=Y.MAC,this._environment.device=H.WEB):this._userAgent.includes("Android")||this._userAgent.includes("Linux")&&void 0!==window.orientation?(this._environment.platform=Y.ANDROID,this._environment.device=H.WEB):this._userAgent.includes("iPhone")||this._userAgent.includes("iPad")||this._userAgent.includes("MacIntel")&&navigator.maxTouchPoints>0?(this._environment.platform=Y.IOS,this._environment.device=H.WEB):this._userAgent.includes("Linux")||this._userAgent.includes("X11")?(this._environment.platform=Y.LINUX,this._environment.device=H.WEB):this._userAgent.includes("Windows")?(this._environment.platform=Y.WINDOWS,this._environment.device=H.WEB):(this._environment.platform=Y.UNKNOWN,this._environment.device=H.UNKNOWN))},i.checkSupport=function(){var t={protocols:[],drms:[]};switch(this._environment.platform){case Y.ANDROID:[V.CHROME,V.FIREFOX,V.OPERA].includes(this._environment.browser)?t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.WIDEVINE]}:[V.EDGE].includes(this._environment.browser)&&(t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.PLAYREADY,K.WIDEVINE]});break;case Y.IOS:[V.CHROME,V.FIREFOX,V.OPERA,V.SAFARI].includes(this._environment.browser)&&(t={protocols:[j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.FAIRPLAY]});break;case Y.LINUX:[V.CHROME,V.FIREFOX,V.OPERA].includes(this._environment.browser)&&(t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.WIDEVINE]});break;case Y.MAC:[V.CHROME,V.FIREFOX,V.OPERA].includes(this._environment.browser)?t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.WIDEVINE]}:[V.SAFARI].includes(this._environment.browser)&&(t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.FAIRPLAY]});break;case Y.PLAYSTATION_4:case Y.PLAYSTATION_5:t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD,j.SMOOTH_STREAMING],drms:[K.PLAYREADY]};break;case Y.TIZEN:t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.PLAYREADY,K.WIDEVINE]};break;case Y.XBOX:t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD,j.SMOOTH_STREAMING],drms:[K.PLAYREADY]};break;case Y.WEBOS:t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.PLAYREADY,K.WIDEVINE]};break;case Y.WINDOWS:[V.CHROME,V.FIREFOX,V.OPERA].includes(this._environment.browser)?t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.WIDEVINE]}:[V.EDGE].includes(this._environment.browser)&&(t={protocols:[j.DASH,j.HLS,j.PROGRESSIVE_DOWNLOAD],drms:[K.PLAYREADY,K.WIDEVINE]})}return t},i.on=function(t){var e,i,n;switch(t.type){case N.ENVIRONMENT_DETECTED:this.logger.log("[Platform controller] Environment detected: "+(null==(e=t.data.environment)?void 0:e.browser)+"/"+(null==(i=t.data.environment)?void 0:i.device)+"/"+(null==(n=t.data.environment)?void 0:n.platform))}},_()(e,[{key:"environment",get:function(){return this._environment}},{key:"userAgent",get:function(){return this._userAgent}}]),e}(z),nt=(i(131),i(50),{nullFn:function(){return null},addClass:function(t,e){t&&"string"==typeof e&&(t.className?-1===t.className.indexOf(e)&&(t.className=(t.className+" "+e).replace(/\s\s+/g," ")):t.className=e)},removeClass:function(t,e){t&&"string"==typeof e&&t.className.indexOf(e)>-1&&(t.className=t.className.replace(e,"").replace(/\s\s+/g," "))},createStdEvent:function(t,e){var i;if(e)if("function"==typeof window.Event)try{i=new Event(t),e.dispatchEvent(i)}catch(t){nt.trace(t)}else try{(i=document.createEvent("Event")).initEvent(t,!0,!0),e.dispatchEvent(i)}catch(t){nt.trace(t)}}}),rt=function(t,e){var i=function(t,e){var i="";if(t&&"function"==typeof window.getComputedStyle){var n=window.getComputedStyle(t,null);n&&(i=(i=n.getPropertyValue(e)).toString().toLowerCase())}return i}(t,e)||0;return(i=i.toString()).indexOf("px")>-1&&(i=i.replace("px","")),parseFloat(i)};nt.setStyle=function(t,e){if(t&&nt.isObject(e))for(var i=Object.keys(e),n=0,r=i.length;n<r;n++){var s=i[n];t.style[s]=e[s]}},nt.getWidth=function(t){return t?nt.isNumber(t.offsetWidth)&&0!==t.offsetWidth?t.offsetWidth:rt(t,"width"):0},nt.getHeight=function(t){return t?nt.isNumber(t.offsetHeight)&&0!==t.offsetHeight?t.offsetHeight:rt(t,"height"):0},nt.show=function(t){t&&(t.style.display="block")},nt.hide=function(t){t&&(t.style.display="none")},nt.removeElement=function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){nt.trace(t)}},nt.ajax=function(t,e,i,n){return new Promise((function(r,s){if(window.XMLHttpRequest){var a=new XMLHttpRequest;a.open("GET",t,!0),a.timeout=e,n&&(a.withCredentials=!0),a.onloadend=function(){nt.isNumber(a.status)&&a.status>=200&&a.status<300&&"string"==typeof a.responseText&&""!==a.responseText?i?r(a.responseText):r():s()},a.ontimeout=function(){nt.log("XMLHttpRequest timeout"),s()},a.send(null)}else s()}))};var st=!1,at=!1,ot=!1;void 0!==window.console&&("function"==typeof window.console.log&&(st=!0),"function"==typeof window.console.dir&&(at=!0),"function"==typeof window.console.trace&&(ot=!0)),nt.log=function(t){st&&("string"==typeof t?window.console.log("%crmp-vast%c"+t,"color: white; background-color: #00ACC1; padding:1px 3px; border-radius: 3px; margin-right: 7px",""):at&&"object"==typeof t?window.console.dir(t):window.console.log(t))},nt.trace=function(t){DEBUG&&(ot?window.console.trace(t):st&&nt.log(t))},nt.hasDOMParser=function(){return void 0!==window.DOMParser},nt.vastReadableTime=function(t){if(nt.isNumber(t)&&t>=0){var e=0,i=0,n=0,r=Math.floor(t%1e3);return r=0===r?"000":r<10?"00"+r:r<100?"0"+r:r.toString(),(e=Math.floor(1*t/1e3))>59&&(e-=60*(i=Math.floor(1*e/60))),e=0===e?"00":e<10?"0"+e:e.toString(),i>59&&(i-=60*(n=Math.floor(1*i/60))),i=0===i?"00":i<10?"0"+i:i.toString(),(n=0===n?"00":n<10?"0"+n:n>23?"00":n.toString())+":"+i+":"+e+"."+r}return"00:00:00.000"},nt.generateCacheBusting=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},nt.getNodeValue=function(t,e){for(var i=t.childNodes,n="",r=0,s=i.length;r<s;r++)i[r]&&i[r].textContent&&(n+=i[r].textContent.trim());if(n){if(/^<!\[CDATA\[.*\]\]>$/i.test(n)&&(n=n.replace("<![CDATA[","").replace("]]>","")),!e)return n;if(/^(https?:)?\/\//i.test(n))return n}return null},nt.RFC3986EncodeURIComponent=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)}))},nt.isValidDuration=function(t){return!!/^\d+:\d+:\d+(\.\d+)?$/i.test(t)},nt.convertDurationToSeconds=function(t){var e=t.split("."),i=(e=e[0]).split(":");return 60*parseInt(i[0])*60+60*parseInt(i[1])+parseInt(i[2])};var lt=/^\d+:\d+:\d+(\.\d+)?$/i,ut=/^\d+%$/i;nt.isValidOffset=function(t){return!(!lt.test(t)&&!ut.test(t))},nt.convertOffsetToSeconds=function(t,e){var i=0;if(lt.test(t)){var n=t.split("."),r=(n=n[0]).split(":");i=60*parseInt(r[0])*60+60*parseInt(r[1])+parseInt(r[2])}else if(ut.test(t)&&e>0){var s=t.split("%");s=parseInt(s[0]),i=Math.round(e*s/100/1e3)}return i},nt.logVideoEvents=function(t,e){},nt.isNumber=function(t){return!(void 0===t||"number"!=typeof t||!Number.isFinite(t))},nt.isObject=function(t){return null!=t&&"object"==typeof t},nt.openWindow=function(t){try{window.open(t,"_blank")}catch(t){nt.trace(t)}},nt.imagePattern=/^image\/(gif|jpeg|jpg|png)$/i;var ct,dt=nt,ht={},pt=document.createElement("video"),gt=!!(void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof window.DocumentTouch),ft=window.navigator&&window.navigator.userAgent?window.navigator.userAgent:null,_t=function(t){if(null!==ft){var e=ft.match(t);if(Array.isArray(e)&&void 0!==e[1])return parseInt(e[1],10)}return-1};ht.devicePixelRatio=(ct=1,dt.isNumber(window.devicePixelRatio)&&window.devicePixelRatio>1&&(ct=window.devicePixelRatio),ct);var vt,mt=/os\s+(\d+)_/i,Et=(vt=[!1,-1],gt?(/(ipad|iphone|ipod)/i.test(ft)&&(vt=[!0,_t(mt)]),vt):vt),At=/(macintosh|mac\s+os)/i,Tt=/mac\s+os\s+x\s+(\d+)_(\d+)/i,yt=function(){var t=!1,e=-1;return!Et[0]&&At.test(ft)&&(t=!0,e=_t(Tt)),[t,e]},bt=yt(),St=/safari\/[.0-9]*/i,It=/version\/(\d+)\./i,Dt=/(chrome|chromium|android|crios|fxios)/i,kt=function(){var t=!1,e=-1;return St.test(ft)&&!Dt.test(ft)&&(t=!0,e=_t(It)),[t,e]}();ht.isIpadOS=!!(!Et[0]&&kt[0]&&kt[1]>12&&bt[0]&&bt[1]>14&&ht.devicePixelRatio>1);var Pt,Lt=/android/i,Ct=/android\s*(\d+)\./i,Rt=/firefox\//i,Nt=/seamonkey\//i,Ot=void 0!==pt.canPlayType,wt=function(){if(Ot&&""!==pt.canPlayType('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))return!0;return!1}();ht.isSafari=kt,ht.isIos=Et,ht.isAndroid=function(){var t=[!1,-1];return Et[0]||!gt||Lt.test(ft)&&(t=[!0,_t(Ct)]),t}(),ht.isMacOS=yt(),ht.isFirefox=!(!Rt.test(ft)||Nt.test(ft)),ht.isMobile=!1,(ht.isIos[0]||ht.isAndroid[0]||ht.isIpadOS)&&(ht.isMobile=!0),ht.okMp4=wt,ht.okHls=function(){if(Ot&&wt){var t=pt.canPlayType("application/vnd.apple.mpegurl"),e=pt.canPlayType("application/x-mpegurl");if(""!==t||""!==e)return!0}return!1}(),ht.okDash=function(){if(Ot&&""!==pt.canPlayType("application/dash+xml"))return!0;return!1}(),ht.canPlayType=function(t,e){if(Ot)if(t&&e){if(""!==pt.canPlayType(t+'; codecs="'+e+'"'))return!0}else if(t&&!e){if(""!==pt.canPlayType(t))return!0}return!1},ht.hasNativeFullscreenSupport=!(!(Pt=document.documentElement)||void 0===Pt.requestFullscreen&&void 0===Pt.webkitRequestFullscreen&&void 0===Pt.mozRequestFullScreen&&void 0===Pt.msRequestFullscreen&&void 0===pt.webkitEnterFullscreen);var xt=ht,Mt={events:["impression","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","fullscreen","exitFullscreen","skip","progress","clickthrough","close","collapse","acceptInvitation"]},Ut=function(t,e,i){var n=/\[CACHEBUSTING\]/gi,r=t;n.test(r)&&(r=r.replace(n,dt.generateCacheBusting()));var s=/\[ERRORCODE\]/gi;s.test(r)&&dt.isNumber(e)&&e>0&&e<1e3&&(r=r.replace(s,e));var a=/\[ASSETURI\]/gi;return a.test(r)&&"string"==typeof i&&""!==i&&(r=r.replace(a,dt.RFC3986EncodeURIComponent(i))),r},Bt=function(t){var e=new Image;e.addEventListener("load",(function(){DEBUG&&dt.log("VAST tracker successfully loaded "+t),e=null})),e.addEventListener("error",(function(){DEBUG&&dt.log("VAST tracker failed loading "+t),e=null})),e.src=t};Mt.tracking=function(t,e){var i=Ut.call(this,t,null,e);Bt(i),DEBUG&&dt.log("VAST tracking requesting ping at URL "+i)},Mt.error=function(t){var e=this.inlineOrWrapperErrorTags;if(303===t&&this.vastErrorTags.length>0&&(e=[].concat(e,this.vastErrorTags)),e.length>0)for(var i=0,n=e.length;i<n;i++){var r=Ut.call(this,e[i].url,t,null);Bt(r),DEBUG&&dt.log("VAST tracking requesting error at URL "+r)}};var Vt=Mt,Ft={destroy:function(){DEBUG&&dt.log("start destroying icons");var t=this.adContainer.querySelectorAll(".rmp-ad-container-icons");if(t.length>0)for(var e=0,i=t.length;e<i;e++)dt.removeElement(t[e])}},Gt=function(t){for(var e=[],i=0,n=this.icons.length;i<n;i++)this.icons[i].program!==t&&e.push(this.icons[i]);this.icons=e};Ft.parse=function(t){DEBUG&&dt.log("start parsing for icons");for(var e=t[0].getElementsByTagName("Icon"),i=0,n=e.length;i<n;i++){var r=e[i],s=r.getAttribute("program");if(null!==s&&""!==s){var a=r.getAttribute("width");if(!(null===a||""===a||parseInt(a)<=0)){var o=r.getAttribute("height");if(!(null===o||""===o||parseInt(o)<=0)){var l=r.getAttribute("xPosition");if(null!==l&&""!==l){var u=r.getAttribute("yPosition");if(null!==u&&""!==u){var c=r.getElementsByTagName("StaticResource");if(0!==c.length){var d=c[0].getAttribute("creativeType");if(null!==d&&""!==d&&dt.imagePattern.test(d)){var h=dt.getNodeValue(c[0],!0);if(null!==h){Gt.call(this,s);var p={program:s,width:a,height:o,xPosition:l,yPosition:u,staticResourceUrl:h},g=r.getElementsByTagName("IconViewTracking"),f=dt.getNodeValue(g[0],!0);null!==f&&(p.iconViewTrackingUrl=f);var _=r.getElementsByTagName("IconClicks");if(_.length>0){var v=_[0].getElementsByTagName("IconClickThrough"),m=dt.getNodeValue(v[0],!0);if(null!==m){p.iconClickThroughUrl=m;var E=_[0].getElementsByTagName("IconClickTracking");if(E.length>0){p.iconClickTrackingUrl=[];for(var A=0,T=E.length;A<T;A++){var y=dt.getNodeValue(E[A],!0);null!==y&&p.iconClickTrackingUrl.push(y)}}}}this.icons.push(p)}}}}}}}}}DEBUG&&(dt.log("validated parsed icons follows"),dt.log(this.icons))};var Ht=function(t,e){var i=this;if(DEBUG&&dt.log("click on icon with index "+t),e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),dt.openWindow(this.icons[t].iconClickThroughUrl),void 0!==this.icons[t].iconClickTrackingUrl){var n=this.icons[t].iconClickTrackingUrl;n.length>0&&n.forEach((function(t){Vt.tracking.call(i,t,null)}))}},Yt=function(t){DEBUG&&dt.log("IconViewTracking for icon at index "+t),Vt.tracking.call(this,this.icons[t].iconViewTrackingUrl,null)},Wt=function(){DEBUG&&dt.log("playing states has been reached - append icons"),this.vastPlayer.removeEventListener("playing",this.onPlayingAppendIcons);for(var t=0,e=this.icons.length;t<e;t++){var i=document.createElement("img");i.className="rmp-ad-container-icons",dt.setStyle(i,{width:parseInt(this.icons[t].width)+"px",height:parseInt(this.icons[t].height)+"px"});var n=this.icons[t].xPosition;"left"===n?i.style.left="0px":"right"===n?i.style.right="0px":parseInt(n)>=0?i.style.left=n+"px":i.style.left="0px";var r=this.icons[t].yPosition;"top"===r?i.style.top="0px":"bottom"===n?i.style.bottom="0px":parseInt(r)>=0?i.style.top=r+"px":i.style.top="0px",void 0!==this.icons[t].iconViewTrackingUrl&&i.addEventListener("load",Yt.bind(this,t)),void 0!==this.icons[t].iconClickThroughUrl&&(i.addEventListener("touchend",Ht.bind(this,t)),i.addEventListener("click",Ht.bind(this,t))),i.src=this.icons[t].staticResourceUrl,this.adContainer.appendChild(i)}};Ft.append=function(){this.onPlayingAppendIcons=Wt.bind(this),this.vastPlayer.addEventListener("playing",this.onPlayingAppendIcons)};var jt=Ft,Qt={},Kt=function(t){var e=this;t.forEach((function(t){Vt.tracking.call(e,t.url,e.getAdMediaUrl())}))},qt=function(t){if(t&&t.type){DEBUG&&dt.log("ping tracking for "+t.type+" VAST event");var e=this.trackingTags.filter((function(e){return t.type===e.event}));e.length>0&&Kt.call(this,e)}},zt=function(){var t=this;this.vastPlayerCurrentTime=Ai.getCurrentTime.call(this),this.vastPlayerCurrentTime>0&&(this.vastPlayerDuration>0&&this.vastPlayerDuration>this.vastPlayerCurrentTime&&(this.vastPlayerCurrentTime>=.25*this.vastPlayerDuration&&!this.firstQuartileEventFired?(this.firstQuartileEventFired=!0,Pi.createApiEvent.call(this,"adfirstquartile"),Pi.dispatchPingEvent.call(this,"firstQuartile")):this.vastPlayerCurrentTime>=.5*this.vastPlayerDuration&&!this.midpointEventFired?(this.midpointEventFired=!0,Pi.createApiEvent.call(this,"admidpoint"),Pi.dispatchPingEvent.call(this,"midpoint")):this.vastPlayerCurrentTime>=.75*this.vastPlayerDuration&&!this.thirdQuartileEventFired&&(this.thirdQuartileEventFired=!0,Pi.createApiEvent.call(this,"adthirdquartile"),Pi.dispatchPingEvent.call(this,"thirdQuartile"))),this.isSkippableAd&&(null===this.progressEventOffsetsSeconds&&(this.progressEventOffsetsSeconds=[],this.progressEventOffsets.forEach((function(e){t.progressEventOffsetsSeconds.push({offsetSeconds:dt.convertOffsetToSeconds(e,t.vastPlayerDuration),offsetRaw:e})})),this.progressEventOffsetsSeconds.sort((function(t,e){return t.offsetSeconds-e.offsetSeconds}))),Array.isArray(this.progressEventOffsetsSeconds)&&this.progressEventOffsetsSeconds.length>0&&this.vastPlayerCurrentTime>=1e3*this.progressEventOffsetsSeconds[0].offsetSeconds&&(Pi.dispatchPingEvent.call(this,"progress-"+this.progressEventOffsetsSeconds[0].offsetRaw),this.progressEventOffsetsSeconds.shift())))},Xt=function(){if(!this.vastPlayerPaused){this.vastPlayerPaused=!0,Pi.createApiEvent.call(this,"adpaused");for(var t=0,e=this.trackingTags.length;t<e;t++)if("pause"===this.trackingTags[t].event)return;Pi.dispatchPingEvent.call(this,"pause")}},$t=function(){this.vastPlayerPaused&&(this.vastPlayerPaused=!1,Pi.createApiEvent.call(this,"adresumed"),Pi.dispatchPingEvent.call(this,"resume"))},Jt=function(){this.vastPlayer.removeEventListener("playing",this.onPlaying),Pi.createApiEvent.call(this,"adimpression"),Pi.createApiEvent.call(this,"adstarted"),Pi.dispatchPingEvent.call(this,["impression","creativeView","start"])},Zt=function(){this.vastPlayer.removeEventListener("ended",this.onEnded),Pi.createApiEvent.call(this,"adcomplete"),Pi.dispatchPingEvent.call(this,"complete"),Ai.resumeContent.call(this)};Qt.wire=function(){DEBUG&&dt.log("wire tracking events"),this.vastPlayer&&this.adIsLinear&&!this.isVPAID&&(this.onPause=Xt.bind(this),this.vastPlayer.addEventListener("pause",this.onPause),this.onPlay=$t.bind(this),this.vastPlayer.addEventListener("play",this.onPlay),this.onPlaying=Jt.bind(this),this.vastPlayer.addEventListener("playing",this.onPlaying),this.onEnded=Zt.bind(this),this.vastPlayer.addEventListener("ended",this.onEnded),this.onTimeupdate=zt.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdate)),this.onEventPingTracking=qt.bind(this),DEBUG&&(dt.log("detected VAST events follow"),dt.log(this.trackingTags));for(var t=0,e=this.trackingTags.length;t<e;t++)this.adIsLinear||this.isVPAID?this.container.addEventListener(this.trackingTags[t].event,this.onEventPingTracking):this.nonLinearContainer.addEventListener(this.trackingTags[t].event,this.onEventPingTracking)},Qt.filterPush=function(t){var e=t[0].getElementsByTagName("Tracking");this.adPodWrapperTrackings.length>0&&(this.trackingTags=this.adPodWrapperTrackings);for(var i=0,n=e.length;i<n;i++){var r=e[i].getAttribute("event"),s=dt.getNodeValue(e[i],!0);if(null!==r&&""!==r&&Vt.events.indexOf(r)>-1&&null!==s){if(this.isSkippableAd)if("progress"===r){var a=e[i].getAttribute("offset");if(null===a||""===a||!dt.isValidOffset(a))continue;this.progressEventOffsets.push(a),r=r+"-"+a}else"skip"===r&&(this.hasSkipEvent=!0);this.trackingTags.push({event:r,url:s})}}};var te=Qt,ee={getAdWidth:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdWidth?this.vpaidCreative.getAdWidth():-1},getAdHeight:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdHeight?this.vpaidCreative.getAdHeight():-1},getAdDuration:function(){if(this.vpaidCreative){if("function"==typeof this.vpaidCreative.getAdDuration)return this.vpaidCreative.getAdDuration();if(this.vpaid1AdDuration>-1)return this.vpaid1AdDuration}return-1},getAdRemainingTime:function(){return this.vpaidRemainingTime>=0?this.vpaidRemainingTime:-1},getCreativeUrl:function(){return this.vpaidCreativeUrl?this.vpaidCreativeUrl:""},getVpaidCreative:function(){return this.vpaidCreative},getAdVolume:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdVolume?this.vpaidCreative.getAdVolume():null},getAdPaused:function(){return this.vpaidPaused},getAdExpanded:function(){return!(!this.vpaidCreative||"function"!=typeof this.vpaidCreative.getAdExpanded)&&this.vpaidCreative.getAdExpanded()},getAdSkippableState:function(){return!(!this.vpaidCreative||"function"!=typeof this.vpaidCreative.getAdSkippableState)&&this.vpaidCreative.getAdSkippableState()},getAdIcons:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdIcons?this.vpaidCreative.getAdIcons():null},getAdCompanions:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdCompanions?this.vpaidCreative.getAdCompanions():""}},ie=function(){var t=this;DEBUG&&dt.log("VPAID AdLoaded event"),this.vpaidAdLoaded=!0,this.vpaidCreative&&(this.initAdTimeout&&clearTimeout(this.initAdTimeout),this.vpaidCallbacks.AdLoaded&&this.vpaidCreative.unsubscribe(this.vpaidCallbacks.AdLoaded,"AdLoaded"),this.startAdTimeout=setTimeout((function(){t.vpaidAdStarted||Ai.resumeContent.call(t),t.vpaidAdStarted=!1}),this.params.creativeLoadTimeout),this.adOnStage=!0,this.vpaidCreative.startAd(),Pi.createApiEvent.call(this,"adloaded"))},ne=function(){DEBUG&&dt.log("VPAID AdStarted event"),this.vpaidAdStarted=!0,this.vpaidCreative&&(this.startAdTimeout&&clearTimeout(this.startAdTimeout),this.vpaidCallbacks.AdStarted&&this.vpaidCreative.unsubscribe(this.vpaidCallbacks.AdStarted,"AdStarted"),1===this.vpaidVersion&&(this.vpaid1AdDuration=ee.getAdRemainingTime.call(this)),!ee.getAdIcons.call(this)&&!this.useContentPlayerForAds&&this.icons.length>0&&jt.append.call(this),"function"==typeof this.vpaidCreative.getAdLinear&&(this.adIsLinear=this.vpaidCreative.getAdLinear()),Pi.dispatchPingEvent.call(this,"creativeView"))},re=function(){DEBUG&&dt.log("VPAID AdStopped event"),this.adStoppedTimeout&&clearTimeout(this.adStoppedTimeout),Ai.resumeContent.call(this)},se=function(){DEBUG&&dt.log("VPAID AdSkipped event"),this.adSkippedTimeout&&clearTimeout(this.adSkippedTimeout),Pi.createApiEvent.call(this,"adskipped"),Pi.dispatchPingEvent.call(this,"skip")},ae=function(){DEBUG&&dt.log("VPAID AdSkippableStateChange event"),Pi.createApiEvent.call(this,"adskippablestatechanged")},oe=function(){if(DEBUG&&dt.log("VPAID AdDurationChange event "+ee.getAdDuration.call(this)),this.vpaidCreative){if("function"==typeof this.vpaidCreative.getAdRemainingTime){var t=this.vpaidCreative.getAdRemainingTime();t>=0&&(this.vpaidRemainingTime=t)}Pi.createApiEvent.call(this,"addurationchange")}},le=function(){DEBUG&&dt.log("VPAID AdVolumeChange event");var t=ee.getAdVolume.call(this);null!==t&&(this.vpaidCurrentVolume>0&&0===t?Pi.dispatchPingEvent.call(this,"mute"):0===this.vpaidCurrentVolume&&t>0&&Pi.dispatchPingEvent.call(this,"unmute"),this.vpaidCurrentVolume=t,Pi.createApiEvent.call(this,"advolumechanged"))},ue=function(){DEBUG&&dt.log("VPAID AdImpression event"),Pi.createApiEvent.call(this,"adimpression"),Pi.dispatchPingEvent.call(this,"impression")},ce=function(){DEBUG&&dt.log("VPAID AdVideoStart event"),this.vpaidPaused=!1;var t=ee.getAdVolume.call(this);null===t&&(t=1),this.vpaidCurrentVolume=t,Pi.createApiEvent.call(this,"adstarted"),Pi.dispatchPingEvent.call(this,"start")},de=function(){DEBUG&&dt.log("VPAID AdVideoFirstQuartile event"),Pi.createApiEvent.call(this,"adfirstquartile"),Pi.dispatchPingEvent.call(this,"firstQuartile")},he=function(){DEBUG&&dt.log("VPAID AdVideoMidpoint event"),Pi.createApiEvent.call(this,"admidpoint"),Pi.dispatchPingEvent.call(this,"midpoint")},pe=function(){DEBUG&&dt.log("VPAID AdVideoThirdQuartile event"),Pi.createApiEvent.call(this,"adthirdquartile"),Pi.dispatchPingEvent.call(this,"thirdQuartile")},ge=function(){DEBUG&&dt.log("VPAID AdVideoComplete event"),Pi.createApiEvent.call(this,"adcomplete"),Pi.dispatchPingEvent.call(this,"complete")},fe=function(t,e,i){var n;(DEBUG&&dt.log("VPAID AdClickThru event"),Pi.createApiEvent.call(this,"adclick"),Pi.dispatchPingEvent.call(this,"clickthrough"),"boolean"==typeof i)&&(i&&(t?n=t:this.clickThroughUrl&&(n=this.clickThroughUrl),n&&(this.clickThroughUrl=n,dt.openWindow(this.clickThroughUrl))))},_e=function(){DEBUG&&dt.log("VPAID AdPaused event"),this.vpaidPaused=!0,Pi.createApiEvent.call(this,"adpaused"),Pi.dispatchPingEvent.call(this,"pause")},ve=function(){DEBUG&&dt.log("VPAID AdPlaying event"),this.vpaidPaused=!1,Pi.createApiEvent.call(this,"adresumed"),Pi.dispatchPingEvent.call(this,"resume")},me=function(t){DEBUG&&dt.log("VPAID AdLog event "+t)},Ee=function(t){DEBUG&&dt.log("VPAID AdError event "+t),Vt.error.call(this,901),Di.process.call(this,901)},Ae=function(){DEBUG&&dt.log("VPAID AdInteraction event"),Pi.createApiEvent.call(this,"adinteraction")},Te=function(){DEBUG&&dt.log("VPAID AdUserAcceptInvitation event"),Pi.createApiEvent.call(this,"aduseracceptinvitation"),Pi.dispatchPingEvent.call(this,"acceptInvitation")},ye=function(){DEBUG&&dt.log("VPAID AdUserMinimize event"),Pi.createApiEvent.call(this,"adcollapse"),Pi.dispatchPingEvent.call(this,"collapse")},be=function(){DEBUG&&dt.log("VPAID AdUserClose event"),Pi.createApiEvent.call(this,"adclose"),Pi.dispatchPingEvent.call(this,"close")},Se=function(){DEBUG&&dt.log("VPAID AdSizeChange event"),Pi.createApiEvent.call(this,"adsizechange")},Ie=function(){DEBUG&&dt.log("VPAID AdLinearChange event"),this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdLinear&&(this.adIsLinear=this.vpaidCreative.getAdLinear(),Pi.createApiEvent.call(this,"adlinearchange"))},De=function(){DEBUG&&dt.log("VPAID AdExpandedChange event"),Pi.createApiEvent.call(this,"adexpandedchange")},ke=function(){if(DEBUG&&dt.log("VPAID AdRemainingTimeChange event"),!this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdRemainingTime){var t=this.vpaidCreative.getAdRemainingTime();t>=0&&(this.vpaidRemainingTime=t)}Pi.createApiEvent.call(this,"adremainingtimechange")};ee.resizeAd=function(t,e,i){if(this.vpaidCreative&&dt.isNumber(t)&&dt.isNumber(e)&&"string"==typeof i&&!(t<=0||e<=0)){var n="normal";"fullscreen"===i&&(n=i),DEBUG&&dt.log("VPAID resizeAd with width "+t+" - height "+e+" - viewMode "+i),this.vpaidCreative.resizeAd(t,e,n)}},ee.stopAd=function(){var t=this;this.vpaidCreative&&(DEBUG&&dt.log("stopAd"),this.adStoppedTimeout=setTimeout((function(){re.call(t)}),this.params.creativeLoadTimeout),this.vpaidCreative.stopAd())},ee.pauseAd=function(){DEBUG&&dt.log("pauseAd"),this.vpaidCreative&&!this.vpaidPaused&&this.vpaidCreative.pauseAd()},ee.resumeAd=function(){DEBUG&&dt.log("resumeAd"),this.vpaidCreative&&this.vpaidPaused&&this.vpaidCreative.resumeAd()},ee.expandAd=function(){this.vpaidCreative&&this.vpaidCreative.expandAd()},ee.collapseAd=function(){this.vpaidCreative&&this.vpaidCreative.collapseAd()},ee.skipAd=function(){var t=this;this.vpaidCreative&&(this.adSkippedTimeout=setTimeout((function(){re.call(t)}),this.params.creativeLoadTimeout),this.vpaidCreative.skipAd())},ee.setAdVolume=function(t){this.vpaidCreative&&dt.isNumber(t)&&t>=0&&t<=1&&"function"==typeof this.vpaidCreative.setAdVolume&&this.vpaidCreative.setAdVolume(t)};var Pe=function(){if(this.vpaidCreative){this.vpaidCallbacks={AdLoaded:ie.bind(this),AdStarted:ne.bind(this),AdStopped:re.bind(this),AdSkipped:se.bind(this),AdSkippableStateChange:ae.bind(this),AdDurationChange:oe.bind(this),AdVolumeChange:le.bind(this),AdImpression:ue.bind(this),AdVideoStart:ce.bind(this),AdVideoFirstQuartile:de.bind(this),AdVideoMidpoint:he.bind(this),AdVideoThirdQuartile:pe.bind(this),AdVideoComplete:ge.bind(this),AdClickThru:fe.bind(this),AdPaused:_e.bind(this),AdPlaying:ve.bind(this),AdLog:me.bind(this),AdError:Ee.bind(this),AdInteraction:Ae.bind(this),AdUserAcceptInvitation:Te.bind(this),AdUserMinimize:ye.bind(this),AdUserClose:be.bind(this),AdSizeChange:Se.bind(this),AdLinearChange:Ie.bind(this),AdExpandedChange:De.bind(this),AdRemainingTimeChange:ke.bind(this)};for(var t=Object.keys(this.vpaidCallbacks),e=0,i=t.length;e<i;e++){var n=t[e];this.vpaidCreative.subscribe(this.vpaidCallbacks[n],n)}}},Le=function(){if(this.vpaidCreative)for(var t=Object.keys(this.vpaidCallbacks),e=0,i=t.length;e<i;e++){var n=t[e];this.vpaidCreative.unsubscribe(this.vpaidCallbacks[n],n)}},Ce=function(){var t,e=this;if(this.vpaidAvailableInterval&&clearInterval(this.vpaidAvailableInterval),this.vpaidLoadTimeout&&clearTimeout(this.vpaidLoadTimeout),this.vpaidCreative=this.vpaidIframe.contentWindow.getVPAIDAd(),this.vpaidCreative&&"function"==typeof this.vpaidCreative.handshakeVersion){var i;try{i=this.vpaidCreative.handshakeVersion("2.0")}catch(t){return dt.trace(t),DEBUG&&dt.log("could not validate VPAID ad unit handshakeVersion"),Vt.error.call(this,901),void Di.process.call(this,901)}if(this.vpaidVersion=parseInt(i),this.vpaidVersion<1)return DEBUG&&dt.log("unsupported VPAID version - exit"),Vt.error.call(this,901),void Di.process.call(this,901);if("function"!=typeof(t=this.vpaidCreative).initAd||"function"!=typeof t.startAd||"function"!=typeof t.stopAd||"function"!=typeof t.skipAd||"function"!=typeof t.resizeAd||"function"!=typeof t.pauseAd||"function"!=typeof t.resumeAd||"function"!=typeof t.expandAd||"function"!=typeof t.collapseAd||"function"!=typeof t.subscribe||"function"!=typeof t.unsubscribe)return DEBUG&&dt.log("VPAID creative does not conform to VPAID spec - exit"),Vt.error.call(this,901),void Di.process.call(this,901);Pe.call(this),te.wire.call(this);var n={};n.AdParameters=this.adParametersData,DEBUG&&(dt.log("VPAID AdParameters follow"),dt.log(this.adParametersData)),dt.show(this.adContainer),dt.show(this.vastPlayer);var r={};this.vpaidSlot=document.createElement("div"),this.vpaidSlot.className="rmp-vpaid-container",this.adContainer.appendChild(this.vpaidSlot),r.slot=this.vpaidSlot,r.videoSlot=this.vastPlayer,r.videoSlotCanAutoPlay=!0,this.initAdTimeout=setTimeout((function(){e.vpaidAdLoaded||(DEBUG&&dt.log("initAdTimeout"),Ai.resumeContent.call(e)),e.vpaidAdLoaded=!1}),10*this.params.creativeLoadTimeout),DEBUG&&dt.log("calling initAd on VPAID creative now"),this.vpaidCreative.initAd(this.initialWidth,this.initialHeight,this.initialViewMode,this.desiredBitrate,n,r)}},Re=function(){var t=this;DEBUG&&dt.log("VPAID JS loaded"),this.vpaidScript.removeEventListener("load",this.onJSVPAIDLoaded);var e=this.vpaidIframe.contentWindow;"function"==typeof e.getVPAIDAd?Ce.call(this):this.vpaidAvailableInterval=setInterval((function(){"function"==typeof e.getVPAIDAd&&Ce.call(t)}),100)},Ne=function(){DEBUG&&dt.log("VPAID JS error loading"),this.vpaidScript.removeEventListener("error",this.onJSVPAIDError),Vt.error.call(this,901),Di.process.call(this,901)};ee.loadCreative=function(t,e){if(this.initialWidth=e.width,this.initialHeight=e.height,this.initialViewMode=e.viewMode,this.desiredBitrate=e.desiredBitrate,this.vpaidCreativeUrl=t,!this.vastPlayer)if(this.useContentPlayerForAds)this.vastPlayer=this.contentPlayer;else{var i=this.adContainer.querySelector(".rmp-ad-vast-video-player");if(null===i)return void Di.process.call(this,1004);this.vastPlayer=i}this.vpaidIframe=document.createElement("iframe"),this.vpaidIframe.id="vpaid-frame",dt.setStyle(this.vpaidIframe,{visibility:"hidden",width:"0px",height:"0px",border:"none"});var n="about:self";(xt.isFirefox||this.useContentPlayerForAds)&&(n=""),this.vpaidIframe.onload=function(){var t=this;if(DEBUG&&dt.log("iframe.onload"),this.vpaidIframe.onload=this.vpaidIframe.onerror=dt.nullFn,!this.vpaidIframe.contentWindow||!this.vpaidIframe.contentWindow.document||!this.vpaidIframe.contentWindow.document.body)return Vt.error.call(this,901),void Di.process.call(this,901);var e=this.vpaidIframe.contentWindow.document,i=e.body;this.vpaidScript=e.createElement("script"),this.vpaidLoadTimeout=setTimeout((function(){DEBUG&&dt.log("could not load VPAID JS Creative or getVPAIDAd in iframeWindow - resume content"),t.vpaidScript.removeEventListener("load",t.onJSVPAIDLoaded),t.vpaidScript.removeEventListener("error",t.onJSVPAIDError),Ai.resumeContent.call(t)}),this.params.creativeLoadTimeout),this.onJSVPAIDLoaded=Re.bind(this),this.onJSVPAIDError=Ne.bind(this),this.vpaidScript.addEventListener("load",this.onJSVPAIDLoaded),this.vpaidScript.addEventListener("error",this.onJSVPAIDError),i.appendChild(this.vpaidScript),this.vpaidScript.src=this.vpaidCreativeUrl}.bind(this),this.vpaidIframe.onerror=function(){DEBUG&&dt.log("iframe.onerror"),this.vpaidIframe.onload=this.vpaidIframe.onerror=dt.nullFn,Vt.error.call(this,901),Di.process.call(this,901)}.bind(this),this.vpaidIframe.src=n,this.adContainer.appendChild(this.vpaidIframe)},ee.destroy=function(){DEBUG&&dt.log("destroy VPAID dependencies"),this.vpaidAvailableInterval&&clearInterval(this.vpaidAvailableInterval),this.vpaidLoadTimeout&&clearTimeout(this.vpaidLoadTimeout),this.initAdTimeout&&clearTimeout(this.initAdTimeout),this.startAdTimeout&&clearTimeout(this.startAdTimeout),Le.call(this),this.vpaidScript&&(this.vpaidScript.removeEventListener("load",this.onJSVPAIDLoaded),this.vpaidScript.removeEventListener("error",this.onJSVPAIDError)),this.vpaidSlot&&dt.removeElement(this.vpaidSlot),this.vpaidIframe&&dt.removeElement(this.vpaidIframe)};var Oe=ee,we={instanceVariables:function(){this.adContainer=null,this.rmpVastInitialized=!1,this.useContentPlayerForAds=!1,this.contentPlayerCompleted=!1,this.currentContentSrc="",this.currentContentCurrentTime=-1,this.needsSeekAdjust=!1,this.seekAdjustAttached=!1,this.onDestroyLoadAds=null,this.firstVastPlayerPlayRequest=!0,this.firstContentPlayerPlayRequest=!0,this.params={},this.adPod=[],this.standaloneAdsInPod=[],this.onAdDestroyLoadNextAdInPod=dt.nullFn,this.runningAdPod=!1,this.adPodItemWrapper=!1,this.adPodCurrentIndex=0,this.adPodApiInfo=[],this.adPodWrapperTrackings=[]},loadAdsVariables:function(){this.onLoadedmetadataPlay=null,this.onPlaybackError=null,this.onPause=null,this.onPlay=null,this.onPlaying=null,this.onEnded=null,this.onVolumeChange=null,this.onTimeupdate=null,this.onEventPingTracking=null,this.onClickThrough=null,this.onPlayingAppendIcons=null,this.onTimeupdateCheckSkip=null,this.onClickSkip=null,this.onNonLinearLoadSuccess=null,this.onNonLinearLoadError=null,this.onNonLinearClickThrough=null,this.onContextMenu=null,this.adTagUrl="",this.vastPlayer=null,this.vpaidSlot=null,this.trackingTags=[],this.vastErrorTags=[],this.inlineOrWrapperErrorTags=[],this.adMediaUrl="",this.adMediaHeight=null,this.adMediaWidth=null,this.vastPlayerMuted=!1,this.vastPlayerDuration=-1,this.vastPlayerCurrentTime=-1,this.firstQuartileEventFired=!1,this.midpointEventFired=!1,this.thirdQuartileEventFired=!1,this.vastPlayerPaused=!1,this.vastErrorCode=-1,this.adErrorType="",this.vastErrorMessage="",this.adSystem="",this.adIsLinear=!1,this.adContentType="",this.adTitle="",this.adDescription="",this.adOnStage=!1,this.clickThroughUrl="",this.isWrapper=!1,this.vastAdTagURI=null,this.redirectsFollowed=0,this.icons=[],this.clickUIOnMobile=null,this.customPlaybackCurrentTime=0,this.antiSeekLogicInterval=null,this.creativeLoadTimeoutCallback=null,this.isSkippableAd=!1,this.hasSkipEvent=!1,this.skipoffset="",this.progressEventOffsets=[],this.progressEventOffsetsSeconds=null,this.skipButton=null,this.skipWaiting=null,this.skipMessage=null,this.skipIcon=null,this.skippableAdCanBeSkipped=!1,this.nonLinearContainer=null,this.nonLinearATag=null,this.nonLinearImg=null,this.onClickCloseNonLinear=null,this.nonLinearCreativeHeight=0,this.nonLinearCreativeWidth=0,this.nonLinearContentType="",this.nonLinearMinSuggestedDuration=0,this.validCompanionAds=[],this.companionAdsRequiredAttribute="",this.companionAdsList=[],this.isVPAID=!1,this.vpaidCreative=null,this.vpaidScript=null,this.vpaidIframe=null,this.vpaidLoadTimeout=null,this.initAdTimeout=null,this.startAdTimeout=null,this.vpaidAvailableInterval=null,this.adStoppedTimeout=null,this.adSkippedTimeout=null,this.adParametersData="",this.vpaidCurrentVolume=1,this.vpaidPaused=!0,this.vpaidCreativeUrl="",this.vpaidRemainingTime=-1,this.vpaidVersion=-1,this.vpaid1AdDuration=-1,this.initialWidth=640,this.initialHeight=360,this.initialViewMode="normal",this.desiredBitrate=500,this.vpaidAdLoaded=!1,this.vpaidAdStarted=!1,this.vpaidCallbacks={},this.onJSVPAIDLoaded=dt.nullFn,this.onJSVPAIDError=dt.nullFn}},xe=we,Me={},Ue=function(){Vt.error.call(this,502),Di.process.call(this,502)},Be=function(){DEBUG&&dt.log("success loading non-linear creative at "+this.adMediaUrl),this.adOnStage=!0,Pi.createApiEvent.call(this,"adloaded"),Pi.createApiEvent.call(this,"adimpression"),Pi.createApiEvent.call(this,"adstarted"),Pi.dispatchPingEvent.call(this,["impression","creativeView","start"])},Ve=function(t){try{t&&t.stopPropagation(),this.params.pauseOnClick&&this.pause(),Pi.createApiEvent.call(this,"adclick"),Pi.dispatchPingEvent.call(this,"clickthrough")}catch(t){dt.trace(t)}},Fe=function(t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),dt.setStyle(this.nonLinearContainer,{display:"none"}),Pi.createApiEvent.call(this,"adclosed"),Pi.dispatchPingEvent.call(this,"close")},Ge=function(){var t=this;this.nonLinearClose=document.createElement("div"),this.nonLinearClose.className="rmp-ad-non-linear-close",Pi.accessibleButton(this.nonLinearClose,"close ad button"),this.nonLinearMinSuggestedDuration>0?(dt.setStyle(this.nonLinearClose,{display:"none"}),setTimeout((function(){dt.setStyle(t.nonLinearClose,{display:"block"})}),1e3*this.nonLinearMinSuggestedDuration)):dt.setStyle(this.nonLinearClose,{display:"block"}),this.onClickCloseNonLinear=Fe.bind(this),this.nonLinearClose.addEventListener("touchend",this.onClickCloseNonLinear),this.nonLinearClose.addEventListener("click",this.onClickCloseNonLinear),this.nonLinearContainer.appendChild(this.nonLinearClose)};Me.update=function(){DEBUG&&dt.log("appending non-linear creative to .rmp-ad-container element"),this.nonLinearContainer=document.createElement("div"),this.nonLinearContainer.className="rmp-ad-non-linear-container",dt.setStyle(this.nonLinearContainer,{width:this.nonLinearCreativeWidth.toString()+"px",height:this.nonLinearCreativeHeight.toString()+"px"}),this.nonLinearATag=document.createElement("a"),this.nonLinearATag.className="rmp-ad-non-linear-anchor",this.clickThroughUrl&&(this.nonLinearATag.href=this.clickThroughUrl,this.nonLinearATag.target="_blank",this.onNonLinearClickThrough=Ve.bind(this),xt.isMobile?this.nonLinearATag.addEventListener("touchend",this.onNonLinearClickThrough):this.nonLinearATag.addEventListener("click",this.onNonLinearClickThrough)),this.nonLinearImg=document.createElement("img"),this.nonLinearImg.className="rmp-ad-non-linear-img",this.onNonLinearLoadError=Ue.bind(this),this.nonLinearImg.addEventListener("error",this.onNonLinearLoadError),this.onNonLinearLoadSuccess=Be.bind(this),this.nonLinearImg.addEventListener("load",this.onNonLinearLoadSuccess),this.nonLinearImg.src=this.adMediaUrl,this.nonLinearATag.appendChild(this.nonLinearImg),this.nonLinearContainer.appendChild(this.nonLinearATag),this.adContainer.appendChild(this.nonLinearContainer),Ge.call(this),dt.show(this.adContainer),this.firstContentPlayerPlayRequest&&(this.firstContentPlayerPlayRequest=!1)},Me.parse=function(t){DEBUG&&dt.log("start parsing NonLinearAds"),this.adIsLinear=!1;var e=t[0].getElementsByTagName("NonLinear");if(0!==e.length){for(var i,n="",r=!1,s=0,a=e.length;s<a;s++){r=!1;var o=(i=e[s]).getAttribute("width");if(null!==o&&""!==o){var l=i.getAttribute("height");if(null!==l&&""!==l){if(o=parseInt(o),l=parseInt(l),!(o<=0||l<=0)){var u=i.getAttribute("minSuggestedDuration");null!==u&&""!==u&&dt.isValidDuration(u)&&(this.nonLinearMinSuggestedDuration=dt.convertDurationToSeconds(u));var c=i.getElementsByTagName("StaticResource");if(0!==c.length){for(var d=void 0,h=0,p=c.length;h<p;h++){var g=c[h];if(null!==(d=g.getAttribute("creativeType"))&&""!==d&&dt.imagePattern.test(d)){if(!(o>dt.getWidth(this.container))){n=dt.getNodeValue(g,!0);break}r=!0}}if(""!==n){this.adMediaUrl=n,this.nonLinearCreativeWidth=o,this.nonLinearCreativeHeight=l,this.nonLinearContentType=d;break}}}}else Vt.error.call(this,101),Di.process.call(this,101)}else Vt.error.call(this,101),Di.process.call(this,101)}if(!this.adMediaUrl||!i){var f=503;return r&&(f=501),Vt.error.call(this,f),void Di.process.call(this,f)}var _=i.getElementsByTagName("NonLinearClickThrough");if(_.length>0){this.clickThroughUrl=dt.getNodeValue(_[0],!0);var v=e[0].getElementsByTagName("NonLinearClickTracking");if(v.length>0)for(var m=0,E=v.length;m<E;m++){var A=dt.getNodeValue(v[m],!0);null!==A&&this.trackingTags.push({event:"clickthrough",url:A})}}Ai.append.call(this)}};var He=Me,Ye={},We=function(){dt.setStyle(this.skipWaiting,{display:"none"}),dt.setStyle(this.skipMessage,{display:"block"}),dt.setStyle(this.skipIcon,{display:"block"})},je=function(t){Math.round(t)>0&&(this.skipWaiting.textContent=this.params.skipWaitingMessage+" "+Math.round(t)+"s")},Qe=function(){if("none"===this.skipButton.style.display&&dt.setStyle(this.skipButton,{display:"block"}),this.vastPlayerCurrentTime=this.vastPlayer.currentTime,dt.isNumber(this.vastPlayerCurrentTime)&&this.vastPlayerCurrentTime>0){var t=dt.convertOffsetToSeconds(this.skipoffset,this.vastPlayerDuration);this.vastPlayerCurrentTime>=t?(this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdateCheckSkip),We.call(this),this.skippableAdCanBeSkipped=!0,Pi.createApiEvent.call(this,"adskippablestatechanged")):t-this.vastPlayerCurrentTime>0&&je.call(this,t-this.vastPlayerCurrentTime)}},Ke=function(t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),this.skippableAdCanBeSkipped&&(Pi.createApiEvent.call(this,"adskipped"),this.hasSkipEvent&&Pi.dispatchPingEvent.call(this,"skip"),Ai.resumeContent.call(this))};Ye.append=function(){this.skipButton=document.createElement("div"),this.skipButton.className="rmp-ad-container-skip",dt.setStyle(this.skipButton,{display:"none"}),Pi.accessibleButton(this.skipButton,"skip ad button"),this.skipWaiting=document.createElement("div"),this.skipWaiting.className="rmp-ad-container-skip-waiting",je.call(this,this.skipoffset),dt.setStyle(this.skipWaiting,{display:"block"}),this.skipMessage=document.createElement("div"),this.skipMessage.className="rmp-ad-container-skip-message",this.skipMessage.textContent=this.params.skipMessage,dt.setStyle(this.skipMessage,{display:"none"}),this.skipIcon=document.createElement("div"),this.skipIcon.className="rmp-ad-container-skip-icon",dt.setStyle(this.skipIcon,{display:"none"}),this.onClickSkip=Ke.bind(this),this.skipButton.addEventListener("click",this.onClickSkip),this.skipButton.addEventListener("touchend",this.onClickSkip),this.skipButton.appendChild(this.skipWaiting),this.skipButton.appendChild(this.skipMessage),this.skipButton.appendChild(this.skipIcon),this.adContainer.appendChild(this.skipButton),this.onTimeupdateCheckSkip=Qe.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdateCheckSkip)};var qe=Ye,ze={},Xe=null;
/**
 * @license Copyright (c) 2015-2019 Radiant Media Player 
 * rmp-connection 0.2.0 | https://github.com/radiantmediaplayer/rmp-connection
 */ze.getBandwidthEstimate=function(){if("undefined"==typeof window)return-1;if(void 0!==navigator.onLine&&!navigator.onLine)return-1;if(void 0===navigator.connection)return-1;if((Xe="string"==typeof navigator.connection.type&&""!==navigator.connection.type?navigator.connection.type:null)&&"none"===Xe)return-1;if("number"==typeof navigator.connection.downlink&&navigator.connection.downlink>0)return navigator.connection.downlink;var t=function(){var t=[.025,.035,.35,1.4];if(Xe)switch(Xe){case"bluetooth":case"cellular":t[3]=.7;break;case"ethernet":case"wifi":case"wimax":t[3]=2.1}return t}();if("string"==typeof navigator.connection.effectiveType&&""!==navigator.connection.effectiveType)switch(navigator.connection.effectiveType){case"slow-2g":return t[0];case"2g":return t[1];case"3g":return t[2];case"4g":return t[3]}if(Xe)switch(Xe){case"ethernet":case"wifi":case"wimax":return 1.4;case"bluetooth":return.35}return-1};var $e=ze,Je={div:void 0,key:"",src:"",drm:{},adURL:"",vast:"",autoplay:!1,captionDisplayer:void 0,callbacksForPlayer:void 0,debug:!1,externalSubtitles:void 0,mutedAtStart:!1,resumePosition:0,ssaiMediaTailor:void 0,thumbnails:void 0,trailer:!1,useNewRelicTracker:!1,adsParamsToEncode:[]},Ze={},ti=/vpaid/i,ei=/\/javascript/i,ii=["video/webm","video/mp4","video/ogg","video/3gpp"],ni=function(){DEBUG&&dt.log("loadedmetadata for VAST player reached"),this.vastPlayer.removeEventListener(N.LOADED_DATA,this.onLoadedmetadataPlay),clearTimeout(this.creativeLoadTimeoutCallback),Pi.createApiEvent.call(this,"adloaded"),DEBUG&&dt.log("pause content player"),this.adOnStage=!0,DEBUG&&dt.log("play VAST player"),Ai.play.call(this,this.firstVastPlayerPlayRequest),this.firstVastPlayerPlayRequest&&(this.firstVastPlayerPlayRequest=!1)},ri=function(t){};Ze.update=function(){var t=g()(m.a.mark((function t(e,i){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:DEBUG&&dt.log("update vast player for linear creative of type "+i+" located at "+e),this.onLoadedmetadataPlay=ni.bind(this),this.vastPlayer.addEventListener(N.LOADED_DATA,this.onLoadedmetadataPlay),this.onPlaybackError=ri.bind(this),null!==this.vastPlayer&&(dt.log("init vast player with URL"+e),n=Je,r=Object.assign({},n,{src:e}),this.vastPlayer.init(r,this.adContentType),Pi.createApiEvent.call(this,"adloaded")),this.isSkippableAd&&qe.append.call(this);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),Ze.parse=function(t){(this.adIsLinear=!0,DEBUG)&&(0===t[0].getElementsByTagName("Duration").length&&DEBUG&&dt.log("missing Duration tag child of Linear tag - this is not a VAST 3 spec compliant adTag - continuing anyway (same as IMA)"));var e=t[0].getElementsByTagName("MediaFiles");if(0===e.length)return Vt.error.call(this,101),void Di.process.call(this,101);var i=t[0].getElementsByTagName("Icons");i.length>0&&jt.parse.call(this,i);var n=t[0].getElementsByTagName("AdParameters");this.adParametersData="",n.length>0&&(this.adParametersData=dt.getNodeValue(n[0],!1));var r=e[0].getElementsByTagName("MediaFile");if(0===r.length)return Vt.error.call(this,101),void Di.process.call(this,101);for(var s=[],a=[],o=0,l=r.length;o<l;o++){s[o]={};var u=r[o],c=dt.getNodeValue(u,!0);if(null!==c){var d=u.getAttribute("type");if(null!==d&&""!==d){s[o].url=c,s[o].type=d;var h=u.getAttribute("codec");null!==h&&""!==h&&(s[o].codec=h);var p=s[o].apiFramework=u.getAttribute("apiFramework");if(this.params.enableVpaid&&p&&ti.test(p)&&ei.test(d)){DEBUG&&dt.log("VPAID creative detected"),s=[s[o]],a=[],this.isVPAID=!0;break}var g=u.getAttribute("width");null!==g&&""!==g||(DEBUG&&dt.log("missing required width attribute on MediaFile tag - this is not a VAST 3 spec compliant adTag - continuing anyway (same as IMA)"),g=0);var f=u.getAttribute("height");null!==f&&""!==f||(DEBUG&&dt.log("missing required height attribute on MediaFile tag - this is not a VAST 3 spec compliant adTag - continuing anyway (same as IMA)"),f=0);var _=u.getAttribute("bitrate");(null===_||""===_||_<10)&&(_=0),s[o].width=parseInt(g),s[o].height=parseInt(f),s[o].bitrate=parseInt(_)}else a.push(o)}else a.push(o)}if(a.length>0)for(var v=a.length-1;v>=0;v--)s.splice(a[v],1);for(var m=[],E=0,A=s.length;E<A;E++){var T=s[E],y=T.type,b=T.url;if(this.isVPAID&&b)return Oe.loadCreative.call(this,b,this.params.vpaidSettings),void(this.adContentType=y);m.push(T)}for(var S,I=[],D=function(t,e){return e.codec&&e.type===ii[t]?xt.canPlayType(e.type,e.codec):e.type===ii[t]&&("video/webm"===e.type?(console.log("Filtering out .webm media"),!1):xt.canPlayType(e.type))},k=0,P=ii.length;k<P;k++){var L=m.filter(D.bind(null,k));I=I.concat(L)}if(0===I.length)for(var C=function(t,e,i){return i.codec===t&&i.type===e},R=0,N=m.length;R<N;R++){var O=m[R];if(O.codec&&O.type&&xt.canPlayType(O.type,O.codec)){var w=m.filter(C.bind(null,O.codec,O.type));I=I.concat(w)}}if(0===I.length)for(var x=function(t,e){return e.type===t},M=0,U=m.length;M<U;M++){var B=m[M];if(B.type&&xt.canPlayType(B.type)){var V=m.filter(x.bind(null,B.type));I=I.concat(V)}}if(0===I.length)return Vt.error.call(this,403),void Di.process.call(this,403);I.sort((function(t,e){return t.width-e.width})),DEBUG&&(dt.log("available linear creative follows"),dt.log(I));var F=[];if(I.length>1){var G=$e.getBandwidthEstimate();G>-1&&(I.sort((function(t,e){return t.bitrate-e.bitrate})),G=Math.round(1e3*G),S=(F=[].filter((function(t){return G>=t.bitrate})))[F.length-1])}S||(I.sort((function(t,e){return t.bitrate-e.bitrate})),S=I[I.length-1]),DEBUG&&(dt.log("selected linear creative follows"),dt.log(S)),this.adMediaUrl=S.url,this.adMediaHeight=S.height,this.adMediaWidth=S.width,this.adContentType=S.type,Ai.append.call(this,S.url,S.type)};var si=Ze,ai=i(51),oi=i.n(ai),li=(i(99),function(t,e){void 0!==window.external&&window.external.user(t)});function ui(t){}var ci,di=[N.STATE_CHANGED,N.PLAYER_CREATING,N.PLAYER_CREATED,N.PLAYER_DESTROYED,N.PLAY,N.PLAYING,N.PAUSE,N.PAUSED,N.SEEKING,N.SEEKED,N.STALLED,N.DURATION_CHANGE,N.TIME_UPDATE,N.LOAD_START,N.LOADED_DATA,N.CAN_PLAY,N.BUFFERING,N.BUFFER_TYPE,N.ENDED,N.MANIFEST_REQUEST,N.VIDEO_FIRST_QUARTILE,N.VIDEO_MID_POINT,N.VIDEO_THIRD_QUARTILE,N.SIXTY_SECONDS_IN,N.ERROR],hi=function(t){function e(e,i){var n;return(n=t.call(this,di)||this)._thumbnailVideo=null,n._videoElement=null,n._firstQuartile=void 0,n._firstQuartileEventFired=void 0,n._midPoint=void 0,n._midPointEventFired=void 0,n._thirdQuartile=void 0,n._thirdQuartileEventFired=void 0,n._60secondsInFired=void 0,n._loaded=void 0,n._resumePosition=void 0,n._state=void 0,n._totalTime=void 0,n._trailer=void 0,n._callbacks=void 0,n._callbacks=new Map,void 0!==i&&n.addEventListener(i.eventType,i.func),n._firstQuartile=0,n._firstQuartileEventFired=!1,n._midPoint=0,n._midPointEventFired=!1,n._thirdQuartile=0,n._thirdQuartileEventFired=!1,n._60secondsInFired=!1,n._state=W.NONE,n._loaded=!1,n._resumePosition=0,n._totalTime=0,n._trailer=!1,n}A()(e,t);var i=e.prototype;return i._executeCallbacks=function(t){if(t.type,N.TIME_UPDATE,this._callbacks.has(t.type)){var e=this._callbacks.get(t.type);void 0!==e&&e.forEach((function(e){e(t)}))}},i._bufferingHandler=function(){var t;if(this.trigger(new w(N.BUFFERING,{})),document.hidden)t=this.isLive()&&this.isSeeking()?F.SEEK:F.BACKGROUND;else switch(console.log(this._state),this._state){case W.BUFFERING:case W.PAUSED:case W.PLAYING:case W.SEEKING:t=this.isSeeking()?F.SEEK:F.CONNECTION;break;case W.NONE:default:t=F.INITIAL}this.trigger(new w(N.BUFFER_TYPE,{bufferType:t})),this._state=W.BUFFERING},i._endedHandler=function(){this.trigger(new w(N.ENDED,{})),this._state=W.ENDED},i._errorHandler=function(){this.trigger(new w(N.ERROR,{}))},i._loadStartHandler=function(){this.trigger(new w(N.LOAD_START,{}))},i._loadedDataHandler=function(){this._loaded=!0,this.trigger(new w(N.LOADED_DATA,{})),null!==this._videoElement&&(this._totalTime=this._videoElement.duration,this._firstQuartile=.25*this._totalTime,this._midPoint=.5*this._totalTime,this._thirdQuartile=.75*this._totalTime,this._resumePosition>this._firstQuartile&&(this._firstQuartileEventFired=!0),this._resumePosition>this._midPoint&&(this._midPointEventFired=!0),this._resumePosition>this._thirdQuartile&&(this._thirdQuartileEventFired=!0))},i._pauseHandler=function(){this.trigger(new w(N.PAUSED,{})),this._state=W.PAUSED},i._playHandler=function(){this.trigger(new w(N.PLAY,{}))},i._playingHandler=function(){this.trigger(new w(N.PLAYING,{})),this._state=W.PLAYING},i._seekedHandler=function(){var t;this.trigger(new w(N.SEEKED,{currentTime:null==(t=this._videoElement)?void 0:t.currentTime}))},i._seekingHandler=function(){var t;this.trigger(new w(N.SEEKING,{currentTime:null==(t=this._videoElement)?void 0:t.currentTime})),this._state=W.SEEKING},i._timeUpdateHandler=function(){if(void 0!==this._videoElement&&null!==this._videoElement&&this._loaded){var t=this._videoElement.currentTime;this.trigger(new w(N.TIME_UPDATE,{currentTime:t})),!this._60secondsInFired&&t>=60&&(this._60secondsInFired=!0,this.trigger(new w(N.SIXTY_SECONDS_IN,{currentTime:t}))),this._thirdQuartileEventFired&&!this._trailer?t<this._thirdQuartile&&(this._thirdQuartileEventFired=!1):t>=this._thirdQuartile&&!this._thirdQuartileEventFired&&(this._trailer&&(this._firstQuartileEventFired=!0,this._midPointEventFired=!0),this._thirdQuartileEventFired=!0,this.trigger(new w(N.VIDEO_THIRD_QUARTILE,{quartileTime:this._thirdQuartile}))),this._midPointEventFired&&!this._trailer?t<this._midPoint&&(this._midPointEventFired=!1):t>=this._midPoint&&t<this._thirdQuartile&&!this._midPointEventFired&&(this._trailer&&this._videoElement.duration>60||!this._trailer)&&(this._midPointEventFired=!0,this.trigger(new w(N.VIDEO_MID_POINT,{quartileTime:this._midPoint}))),this._firstQuartileEventFired&&!this._trailer?t<this._firstQuartile&&(this._firstQuartileEventFired=!1):t>=this._firstQuartile&&t<this._midPoint&&!this._firstQuartileEventFired&&(this._trailer&&this._videoElement.duration>60||!this._trailer)&&(this._firstQuartileEventFired=!0,this.trigger(new w(N.VIDEO_FIRST_QUARTILE,{quartileTime:this._firstQuartile})))}},i.init=function(t){this._videoElement=document.createElement("video"),this._resumePosition=t.resumePosition,this._videoElement.addEventListener("ended",this._endedHandler.bind(this)),this._videoElement.addEventListener("error",this._errorHandler.bind(this)),this._videoElement.addEventListener("loadeddata",this._loadedDataHandler.bind(this)),this._videoElement.addEventListener("loadstart",this._loadStartHandler.bind(this)),this._videoElement.addEventListener("pause",this._pauseHandler.bind(this)),this._videoElement.addEventListener("play",this._playHandler.bind(this)),this._videoElement.addEventListener("playing",this._playingHandler.bind(this)),this._videoElement.addEventListener("seeked",this._seekedHandler.bind(this)),this._videoElement.addEventListener("seeking",this._seekingHandler.bind(this)),this._videoElement.addEventListener("timeupdate",this._timeUpdateHandler.bind(this)),this._videoElement.addEventListener("waiting",this._bufferingHandler.bind(this)),this._videoElement.autoplay=t.autoplay,this._videoElement.controls=!0,this._videoElement.style.width="100%",this._videoElement.style.height="auto",this._videoElement.src=t.src,this._videoElement.currentTime=this._resumePosition,this._trailer=t.trailer;var e=t.src.split(".").pop();void 0!==e&&["m3u8","mpd","pmpd","ism"].includes(e)&&this.trigger(new w(N.MANIFEST_REQUEST,{}));var i=document.getElementById("player");null!=i?(i.appendChild(this._videoElement),this.trigger(new w(N.PLAYER_CREATED,{videoElement:this._videoElement}))):console.error("Invalid or inexistent player div")},i.destroy=function(){void 0!==this._videoElement&&null!==this._videoElement&&(this._videoElement.pause(),this._videoElement.removeAttribute("src"),this._videoElement.load())},i.play=function(){void 0!==this._videoElement&&null!==this._videoElement&&this._videoElement.paused&&this._videoElement.play()},i.pause=function(){void 0===this._videoElement||null===this._videoElement||this._videoElement.paused||this._videoElement.pause()},i.seek=function(t){void 0!==this._videoElement&&null!==this._videoElement&&t<=this._videoElement.duration&&t>=0&&(this._videoElement.currentTime=t)},i.isLive=function(){return!1},i.isSeeking=function(){return this._state===W.SEEKING},i.getAudioTracks=function(){return[]},i.getCurrentAudioTrack=function(){return{}},i.getCurrentSubtitle=function(){return{}},i.getCurrentTime=function(){return this._videoElement?this._videoElement.currentTime:0},i.getCurrentVideoTrack=function(){return{}},i.getDroppedFrames=function(){return this._videoElement?this._videoElement.getVideoPlaybackQuality().droppedVideoFrames:NaN},i.getDuration=function(){return 0},i.getMute=function(){return!this._videoElement||this._videoElement.muted},i.getPlaybackRate=function(){return void 0!==this._videoElement&&null!==this._videoElement?this._videoElement.playbackRate:NaN},i.getSubtitles=function(){return[]},i.getThumbnailVideo=function(){return this._thumbnailVideo=document.createElement("video"),this._thumbnailVideo},i.getVideoTracks=function(){return[]},i.getVolume=function(){return 0},i.setCurrentAudioTrack=function(t){},i.setCurrentVideoTrack=function(t){},i.setCurrentSubtitle=function(t){},i.setMute=function(t){},i.setPlaybackSpeed=function(t){},i.setVolume=function(t){},i.addEventListener=function(t,e){var i,n;this._callbacks.has(t)?void 0!==this._callbacks.get(t)?null==(i=this._callbacks.get(t))||i.push(e):console.log("Error: the map doesn't contain any entry for that event type"):(this._callbacks.set(t,new Array),void 0!==this._callbacks.get(t)?null==(n=this._callbacks.get(t))||n.push(e):console.log("Error: the map doesn't contain any entry for that event type"))},i.removeEventListener=function(t,e){if(this._callbacks.has(t))if(void 0!==e){var i=this._callbacks.get(t);if(void 0!==i){for(var n=0,r=i.length;n<r;)i[n].toString()==e.toString()&&(i.splice(n,1),console.log("[nexSimplePlayer] callback from listener found ",i[n]),console.log("[nexSimplePlayer] 1 callbacks are now ",i)),++n;i.length>0?(this._callbacks.set(t,i),console.log("[nexSimplePlayer] 2 callbacks are now ",i)):(this._callbacks.delete(t),console.log("[nexSimplePlayer] there are no more callbacks now ",this._callbacks))}}else this._callbacks.delete(t),console.log("[nexSimplePlayer] removed listeners for: ",t)},i.trigger=function(e){t.prototype.trigger.call(this,e)},i.on=function(t){switch(t.type){case N.STATE_CHANGED:case N.PLAYER_CREATING:case N.PLAYER_CREATED:case N.PLAYER_DESTROYED:case N.PLAY:case N.PLAYING:case N.PAUSE:case N.PAUSED:case N.SEEKING:case N.SEEKED:case N.STALLED:case N.DURATION_CHANGE:case N.TIME_UPDATE:case N.LOAD_START:case N.LOADED_DATA:case N.CAN_PLAY:case N.BUFFERING:case N.BUFFER_TYPE:case N.ENDED:case N.MANIFEST_REQUEST:this._executeCallbacks(t);break;case N.VIDEO_FIRST_QUARTILE:console.log("[nexSimplePlayer] VIDEO_FIRST_QUARTILE: ",t),this._executeCallbacks(t);break;case N.VIDEO_MID_POINT:console.log("[nexSimplePlayer] VIDEO_MID_POINT: ",t),this._executeCallbacks(t);break;case N.VIDEO_THIRD_QUARTILE:console.log("[nexSimplePlayer] VIDEO_THIRD_QUARTILE: ",t),this._executeCallbacks(t);break;case N.SIXTY_SECONDS_IN:console.log("[nexSimplePlayer] SIXTY_SECONDS_IN: ",t),this._executeCallbacks(t);break;case N.ERROR:this._executeCallbacks(t)}},e}(z);!function(t){t["5%"]="5%",t["15%"]="15%",t["25%"]="25%",t["50%"]="50%",t["75%"]="75%",t["85%"]="85%",t["95%"]="95%"}(ci||(ci={}));var pi=function(){function t(t,e,i,n,r){void 0===r&&(r=!1),this._player=void 0,this._streamType=void 0,this._streamingProtocol=void 0,this._contentType=void 0,this._platform=void 0,this._config=void 0,this._callbacks=void 0,this._initEvent=void 0,this._logger=void 0,this._isSSAI=void 0,this._player=null,this._streamType=Q.NONE,this._streamingProtocol=j.NONE,this._contentType="",this._platform=Y.NONE,this._config=t,this._callbacks=void 0,this._initEvent=e,this._logger=n,this._isSSAI=r,this._platform=i,this._setStreamingProtocol()}var e=t.prototype;return e._checkSupport=function(){},e._selectPlayer=function(){},e._setStreamType=function(){},e._setStreamingProtocol=function(){if(this._streamingProtocol===j.NONE&&void 0!==this._config.src){var t=this._config.src;1==t.includes(".ism")?t.indexOf(".ism")>0&&(1==t.includes("format=m3u8")||t.includes("m3u8"))?this._streamingProtocol=j.HLS:t.indexOf(".ism")>0&&(t.includes("format=mpd")||t.includes("mpd"))?this._streamingProtocol=j.DASH:this._streamingProtocol=j.SMOOTH_STREAMING:1==t.includes(".m3u8")||t.indexOf(".flv")>0?this._streamingProtocol=j.HLS:t.indexOf(".mpd")>0||t.indexOf(".pmpd")>0?this._streamingProtocol=j.DASH:(t.indexOf(".mp4")>0||t.indexOf(".aac")>0||t.indexOf(".mp3")>0)&&(this._streamingProtocol=j.PROGRESSIVE_DOWNLOAD)}},e.createPlayer=function(){var t=g()(m.a.mark((function t(e){var i,n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._player=null,void 0!==e&&(this._config=e),i=this,""===this._config.src||""===this._contentType){t.next=6;break}return t.next=6,J(this._config.src).then((function(t){i._contentType=t})).catch((function(t){console.log("Error while retrieving the content type",t)}));case 6:t.t0=this._platform,t.next=t.t0===Y.PLAYSTATION_4?9:t.t0===Y.LINUX||t.t0===Y.MAC||t.t0===Y.WINDOWS?13:15;break;case 9:return this._player=new _i(this._callbacks,this._initEvent,this._isSSAI),n=this,""===this._config.adURL&&""===this._config.vast||this._isSSAI||(r=function(t){n._callbacks=t.data.playerCallbacksData,void 0!==t.data.resumePosition&&(n._config.resumePosition=t.data.resumePosition),n.removeEventListener(N.AD_START)},this.addEventListener(N.AD_START,r),s=function(){var t=g()(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.removeEventListener(N.AD_BLOCK_END),t.next=3,n.createPlayer(n._config);case 3:n.init();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.addEventListener(N.AD_BLOCK_END,s)),t.abrupt("break",16);case 13:return this._player=new hi(this._callbacks,this._initEvent),t.abrupt("break",16);case 15:return t.abrupt("break",16);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.init=function(){null!==this._player&&(this._player.trigger(new w(N.PLAYER_CREATING,{})),this._player.init(this._config,this._contentType))},e.destroy=function(){var t=g()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this._player){t.next=4;break}return t.next=3,this._player.destroy();case 3:this._player=null;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.play=function(){null!==this._player&&this._player.play()},e.pause=function(){null!==this._player&&this._player.pause()},e.seek=function(t){null!==this._player&&this._player.seek(t)},e.isLive=function(){return null!==this._player&&this._player.isLive()},e.isSeeking=function(){return null!==this._player&&this._player.isSeeking()},e.getAudioTracks=function(){return null!==this._player?this._player.getAudioTracks():[]},e.getCurrentAudioTrack=function(){return null!==this._player?this._player.getCurrentAudioTrack():{}},e.getCurrentTime=function(){return null!==this._player?this._player.getCurrentTime():NaN},e.getCurrentSubtitle=function(){return null!==this._player?this._player.getCurrentSubtitle():{}},e.getCurrentVideoTrack=function(){return null!==this._player?this._player.getCurrentVideoTrack():{}},e.getDroppedFrames=function(){return null!==this._player?this._player.getDroppedFrames():NaN},e.getDuration=function(){return null!==this._player?this._player.getDuration():NaN},e.getMute=function(){return null!==this._player&&this._player.getMute()},e.getPlaybackRate=function(){return null!==this._player?this._player.getPlaybackRate():NaN},e.getProtocol=function(){return this._streamingProtocol},e.getThumbnailVideo=function(){return null!==this._player?this._player.getThumbnailVideo():null},e.getSubtitles=function(){return null!==this._player?this._player.getSubtitles():[]},e.getVolume=function(){return null!==this._player?this._player.getVolume():-1},e.setCurrentAudioTrack=function(t){null!==this._player&&t>=0&&t<this.getAudioTracks().length&&this._player.setCurrentAudioTrack(t)},e.setCurrentSubtitle=function(t){null!==this._player&&t>=-1&&t<this.getSubtitles().length&&this._player.setCurrentSubtitle(t)},e.setMute=function(t){null!==this._player&&this._player.setMute(t)},e.setVolume=function(t){null!==this._player&&this._player.setVolume(t)},e.addEventListener=function(t,e){null!==this._player&&this._player.addEventListener(t,e)},e.removeEventListener=function(t,e){null!==this._player&&this._player.removeEventListener(t,e)},t}();window.accessfunction=function(t){};var gi=[N.STATE_CHANGED,N.TIME_UPDATE,N.PLAYER_CREATING,N.PLAYER_CREATED,N.PLAYER_DESTROYED,N.PLAY,N.PLAYING,N.PAUSE,N.PAUSED,N.SEEKING,N.SEEKED,N.STALLED,N.DURATION_CHANGE,N.LOAD_START,N.LOADED_DATA,N.CAN_PLAY,N.BUFFERING,N.BUFFER_TYPE,N.ENDED,N.WEBMAF_SUBTITLES_DATA_LOADED,N.NEW_SUBTITLES_DATA_LOADED,N.CC_NEW_DATA,N.SIXTY_SECONDS_IN,N.VIDEO_FIRST_QUARTILE,N.VIDEO_MID_POINT,N.VIDEO_THIRD_QUARTILE,N.MANIFEST_REQUEST,N.VIDEO_PROGRESS_TIME,N.ERROR,N.NEXPLAYER_ERROR,N.AD_START,N.AD_BLOCK_END],fi={id:-1},_i=function(t){function e(e,i,n){var r;(r=t.call(this,gi)||this)._videoMetrics=void 0,r._volume=void 0,r._isMuted=void 0,r._totalTime=void 0,r._currentTime=void 0,r._firstQuartile=void 0,r._firstQuartileEventFired=void 0,r._midPoint=void 0,r._midPointEventFired=void 0,r._thirdQuartile=void 0,r._thirdQuartileEventFired=void 0,r._60secondsInFired=void 0,r._trailer=void 0,r._lastTime=void 0,r._error=void 0,r._errorMsg=void 0,r._state=void 0,r._bitrate=void 0,r._currentState=void 0,r._lastState=void 0,r._audioTracks=void 0,r._currentAudioTrack=void 0,r._subtitles=void 0,r._currentSubtitle=void 0,r._playbackSpeed=void 0,r._resumePosition=void 0,r._metricsInterval=void 0,r._createdCCtrack=void 0,r._lastBufferedRange=void 0,r._timerIsStalled=void 0,r._isSSAI=void 0,r._videoProgressTime=void 0,r._callbacks=void 0;var s,a,o,l,u=oi()(r);return r._videoMetrics={},r._lastBufferedRange=-1,r._timerIsStalled=void 0,r._metricsInterval=setInterval((function(){r._currentState!==W.ENDED&&void 0!==window.WM_videoPlayer&&void 0!==window.WM_videoPlayer.bufferedRange&&(r._lastBufferedRange=window.WM_videoPlayer.bufferedRange,0===window.WM_videoPlayer.bufferedRange&&void 0===r._timerIsStalled&&(r._timerIsStalled=setTimeout((function(){0===u._lastBufferedRange&&u.trigger(new w(N.STALLED,{})),void 0!==u._timerIsStalled&&clearTimeout(u._timerIsStalled),u._timerIsStalled=void 0}),1e4))),u._currentState===W.PLAYING&&li('{"command":"getPlaybackTime"}'),void 0!==videometrics&&null!==videometrics&&videometrics.poll(),u._updateVideoMetrics()}),333),r._volume=1,r._isMuted=!1,r._totalTime=0,r._currentTime=0,r._firstQuartile=0,r._firstQuartileEventFired=!1,r._midPoint=0,r._midPointEventFired=!1,r._thirdQuartile=0,r._thirdQuartileEventFired=!1,r._60secondsInFired=!1,r._trailer=!1,r._lastTime=0,r._error=0,r._errorMsg="",r._state="",r._bitrate=0,r._currentState=W.NONE,r._lastState=W.NONE,r._audioTracks=[],r._currentAudioTrack={},r._subtitles=[],r._currentSubtitle=fi,r._playbackSpeed=0,r._resumePosition=0,r._createdCCtrack=!1,r._isSSAI=n,r._videoProgressTime=new Array(7).fill({firedEvent:!1}),s=r._errorCallback,a=r._stateChangeCallback,o=r._bitrateChangeCallback,l=r._onOpenCallback,void 0!==videometrics&&null!==videometrics&&(videometrics.onError=function(t,e){s(t,e)},videometrics.onStateChange=function(t){a(t)},videometrics.onBitrateChange=function(t){o(t)},videometrics.onOpen=function(){l()}),window.accessfunction=function(t){var e=JSON.parse(t);switch(e.command){case"getPlaybackTime":u._updateCurrentTime(e);break;case"getAudioTracks":u._updateAudioTracks(e);break;case"getPlaySpeed":break;case"getSubtitleTracks":u._updateTextTracks(e);break;case"networkStatusChange":break;case"contentAvailable":li('{"command":"getSubtitleTracks"}'),li('{"command":"setClosedCaptions", "enable":true}'),li('{"command":" setForwardCloseCaptionTimedMetadata", "enable":true}'),li('{"command":" setTimedMetadata", "enable":true}'),u.trigger(new w(N.PLAYER_CREATED,{resumePosition:u._resumePosition})),void 0!==e.totalLength&&null!==e.totalLength&&(u._totalTime=e.totalLength,u._firstQuartile=.25*u._totalTime,u._midPoint=.5*u._totalTime,u._thirdQuartile=.75*u._totalTime,u._videoProgressTime[0]=Object.assign({},u._videoProgressTime[0],{time:.05*u._totalTime,id:ci["5%"]}),u._videoProgressTime[1]=Object.assign({},u._videoProgressTime[1],{time:.15*u._totalTime,id:ci["15%"]}),u._videoProgressTime[2]=Object.assign({},u._videoProgressTime[2],{time:.25*u._totalTime,id:ci["25%"]}),u._videoProgressTime[3]=Object.assign({},u._videoProgressTime[3],{time:.5*u._totalTime,id:ci["50%"]}),u._videoProgressTime[4]=Object.assign({},u._videoProgressTime[4],{time:.75*u._totalTime,id:ci["75%"]}),u._videoProgressTime[5]=Object.assign({},u._videoProgressTime[5],{time:.85*u._totalTime,id:ci["85%"]}),u._videoProgressTime[6]=Object.assign({},u._videoProgressTime[6],{time:.95*u._totalTime,id:ci["95%"]}),u._trailer&&u.addEventListener(N.SEEKED,(function(){u._currentTime>u._midPoint&&(u._firstQuartileEventFired=!0,u._midPointEventFired=!0),u._currentTime>u._firstQuartile&&(u._firstQuartileEventFired=!0)})),u.trigger(new w(N.DURATION_CHANGE,{duration:u._totalTime}))),u.getAudioTracks(),u.getSubtitles(),u.trigger(new w(N.LOADED_DATA,{}));break;case"playerStatusChange":switch(e.playerState){case"opening":u.trigger(new w(N.LOAD_START,{}));break;case"buffering":u.trigger(new w(N.BUFFERING,{})),u._changeCurrentState(W.BUFFERING);break;case"ready":u.trigger(new w(N.CAN_PLAY,{})),u._changeCurrentState(W.READY),u.trigger(new w(N.PLAY,{})),u._resumePosition>0&&u._resumePosition<=u._totalTime&&u.seek(u._resumePosition);break;case"notReady":u.trigger(new w(N.PLAYER_DESTROYED,{})),u._changeCurrentState(W.NONE);break;case"endOfStream":void 0!==u._timerIsStalled&&clearTimeout(u._timerIsStalled),u._timerIsStalled=void 0,u._currentTime=u._totalTime,u.trigger(new w(N.ENDED,{})),u._changeCurrentState(W.ENDED);break;case"DisplayingVideo":u.trigger(new w(N.PLAYING,{})),u._changeCurrentState(W.PLAYING);break;case"playing":break;case"paused":u.trigger(new w(N.PAUSED,{})),u._changeCurrentState(W.PAUSED)}break;case"playerError":console.error("WebMAF error encountered: ",e);break;case"playerMessage":void 0!==e.msg_info&&0===e.msg_info.localeCompare("setPlayTime successful")&&(u._lastState!==W.PLAYING&&u._lastState!==W.PAUSED||u._changeCurrentState(u._lastState),u.trigger(new w(N.SEEKED,{})));break;case"playerTimedEvent":if(u._createdCCtrack)0===e.datatype.localeCompare("cea-708")&&u.trigger(new w(N.CC_NEW_DATA,{ccData:{time:u._currentTime,captions:e.details.captions}}));else if(u._createdCCtrack=!0,0===e.datatype.localeCompare("cea-708")){var i={};i.id=u._subtitles.length,i.language="CC",u._subtitles.push(i),u.trigger(new w(N.WEBMAF_SUBTITLES_DATA_LOADED,{textTrack:i})),u.trigger(new w(N.CC_NEW_DATA,{ccData:{time:u._currentTime,captions:e.details.captions}}))}}},function(t){if(void 0!==WM_videoPlayer&&null!==WM_videoPlayer){WM_videoPlayer.TTY=ui;var e=0;t>=0&&t<=3&&(e=t),WM_videoPlayer.TTYLevel=e}}(3),void 0!==e?(r._callbacks=e,r.removeEventListener(N.PLAYER_CREATING)):(r._callbacks=new Map,void 0!==i&&r.addEventListener(i.eventType,i.func)),console.log("NexWebMAF Player created!"),r}A()(e,t);var i=e.prototype;return i._load=function(t,e,i,n){var r="";"string"==typeof n?r='"type":"'+n+'"':"number"==typeof n&&(r='"sourceType":'+n);var s='{"command":"load","contentUri":"'+t+'","licenseUri":"","customData":"",'+r+"}";void 0!==e&&(s=void 0!==i?'{"command":"load","contentUri":"'+t+'","licenseUri":"'+e+'","customData":"'+i+'",'+r+"}":'{"command":"load","contentUri":"'+t+'","licenseUri":"'+e+'",'+r+"}");var a=t.split(".").pop();void 0!==a&&["m3u8","mpd","pmpd","ism"].includes(a)&&this.trigger(new w(N.MANIFEST_REQUEST,{})),li(s)},i._changeCurrentState=function(t){if(this._currentState!==t){var e=this._currentState;if(t===W.SEEKING)this._lastState=e;else if(t===W.BUFFERING){var i;if(document.hidden)i=this.isLive()&&this.isSeeking()?F.SEEK:F.BACKGROUND;else switch(e){case W.BUFFERING:case W.PAUSED:case W.PLAYING:case W.SEEKING:i=this.isSeeking()?F.SEEK:F.CONNECTION;break;case W.NONE:default:i=F.INITIAL}this.trigger(new w(N.BUFFER_TYPE,{bufferType:i}))}this._currentState=t,this.trigger(new w(N.STATE_CHANGED,{stateData:{newState:t,oldState:e}}))}},i._updateCurrentTime=function(t){if(null!=t&&(this._lastTime=this._currentTime,this._currentTime=t.elapsedTime,this._lastTime!==this._currentTime&&this._currentTime>0)){this.trigger(new w(N.TIME_UPDATE,{currentTime:this._currentTime})),this._resumePosition>this._firstQuartile&&(this._firstQuartileEventFired=!0),this._resumePosition>this._midPoint&&(this._midPointEventFired=!0),this._resumePosition>this._thirdQuartile&&(this._thirdQuartileEventFired=!0);for(var e=0;e<this._videoProgressTime.length;e++)this._resumePosition>this._videoProgressTime[e].time&&(this._videoProgressTime[e].firedEvent=!0),this._videoProgressTime[e].firedEvent&&!this._trailer?this._currentTime<this._videoProgressTime[e].time&&(this._videoProgressTime[e].firedEvent=!1):this._currentTime>=this._videoProgressTime[e].time&&!this._videoProgressTime[e].firedEvent&&(this._trailer&&(this._videoProgressTime[e].firedEvent=!0),this._videoProgressTime[e].firedEvent=!0,this.trigger(new w(N.VIDEO_PROGRESS_TIME,{progressTime:this._videoProgressTime[e].id})));!this._60secondsInFired&&this._currentTime>=60&&(this._60secondsInFired=!0,this.trigger(new w(N.SIXTY_SECONDS_IN,{currentTime:this._currentTime}))),this._thirdQuartileEventFired&&!this._trailer?this._currentTime<this._thirdQuartile&&(this._thirdQuartileEventFired=!1):this._currentTime>=this._thirdQuartile&&!this._thirdQuartileEventFired&&(this._trailer&&(this._firstQuartileEventFired=!0,this._midPointEventFired=!0),this._thirdQuartileEventFired=!0,this.trigger(new w(N.VIDEO_THIRD_QUARTILE,{quartileTime:this._thirdQuartile}))),this._midPointEventFired&&!this._trailer?this._currentTime<this._midPoint&&(this._midPointEventFired=!1):this._currentTime>=this._midPoint&&this._currentTime<this._thirdQuartile&&!this._midPointEventFired&&(this._trailer&&this._totalTime>60||!this._trailer)&&(this._midPointEventFired=!0,this.trigger(new w(N.VIDEO_MID_POINT,{quartileTime:this._midPoint}))),this._firstQuartileEventFired&&!this._trailer?this._currentTime<this._firstQuartile&&(this._firstQuartileEventFired=!1):this._currentTime>=this._firstQuartile&&this._currentTime<this._midPoint&&!this._firstQuartileEventFired&&(this._trailer&&this._totalTime>60||!this._trailer)&&(this._firstQuartileEventFired=!0,this.trigger(new w(N.VIDEO_FIRST_QUARTILE,{quartileTime:this._firstQuartile})))}},i._updateAudioTracks=function(t){if(0===this._audioTracks.length&&t.allAudioInfo)if(t.allAudioInfo.length>1)for(var e=0;e<t.allAudioInfo.length;e++){var i={},n=t.allAudioInfo[e];i.id=e,i.language=n.LANGUAGE,i.name=n.Representation_id_first?n.Representation_id_first:n.GROUP_ID,this._audioTracks.push(i),void 0!==i.language&&i.language.includes(t.currentAudioTrack)&&(this._currentAudioTrack=this._audioTracks[e])}else{var r={},s=t.allAudioInfo[0];r.id=0,r.language=t.audioTracks,r.name=s.Representation_id_first?s.Representation_id_first:s.GROUP_ID,this._audioTracks.push(r),this._currentAudioTrack=this._audioTracks[0]}},i._updateTextTracks=function(t){if(0===this._subtitles.length&&0!==t.subtitleTracks.localeCompare("")){var e=t.subtitleTracks.split(",");if(e.length>0)for(var i=0;i<e.length;i++){var n={};n.id=i,n.language=e[i],this._subtitles.push(n),this.trigger(new w(N.WEBMAF_SUBTITLES_DATA_LOADED,{textTrack:n})),void 0!==n.language&&0===n.language.localeCompare(t.currentSubtitleTrack)&&(this._currentSubtitle=this._subtitles[i])}else{var r={id:0};r.language=e[0],this._subtitles.push(r),this._currentSubtitle=this._subtitles[0],this.trigger(new w(N.WEBMAF_SUBTITLES_DATA_LOADED,{textTrack:r}))}}},i._mapContentType=function(t){var e=-1;return t.includes("application/mp4")||t.includes("video/mp4")||t.includes("audio/mp4")?e=1:t.includes("application/vnd.ms-sstr+xml")?e=2:t.includes("application/dash+xml")?e=4:t.includes("application/dash_ts+xml")?e=6:t.includes("application/vnd.apple.mpgeurl")?e=8:t.includes("video/mp2t")&&(e=9),e},i._updateVideoMetrics=function(){var t,e=(t=null,void 0!==videometrics&&null!==videometrics&&((t={}).url=videometrics.url,t.bandwith=videometrics.bandwith,t.naturalWidth=videometrics.naturalWidth,t.naturalHeight=videometrics.naturalHeight,t.duration=videometrics.duration,t.elapsed=videometrics.elapsed,t.currentState=videometrics.currentState,t.currentBitrate=videometrics.currentBitrate,t.sampleRate=videometrics.sampleRate,t.encodedFramerate=videometrics.encodedFramerate,t.renderedFramerate=videometrics.renderedFramerate,t.frameworkVersion=videometrics.frameworkVersion),t);null!==e&&this._setVideoMetrics(e)},i._setVideoMetrics=function(t){null!==t&&(this._videoMetrics.url=t.url,this._videoMetrics.bandwidth=t.bandwidth,this._videoMetrics.naturalWidth=t.naturalWidth,this._videoMetrics.naturalHeight=t.naturalHeight,this._videoMetrics.duration=t.duration,this._videoMetrics.elapsed=t.elapsed,this._videoMetrics.currentState=t.currentState,this._videoMetrics.currentBitrate=t.currentBitrate,this._videoMetrics.sampleRate=t.sampleRate,this._videoMetrics.encodedFramerate=t.encodedFramerate,this._videoMetrics.renderedFramerate=t.renderedFramerate,this._videoMetrics.frameworkVersion=t.frameworkVersion)},i._errorCallback=function(t,e){this._error=t,this._errorMsg=e,console.log("An error has occured: "+this._errorMsg)},i._stateChangeCallback=function(t){this._state=t,console.log("Player new state: "+this._state)},i._bitrateChangeCallback=function(t){this._bitrate=t,console.log("New bitrate: "+this._bitrate)},i._onOpenCallback=function(){console.log("Video opened!")},i._executeCallbacks=function(t){if(this._callbacks.has(t.type)){var e=this._callbacks.get(t.type);void 0!==e&&e.forEach((function(e){e(t)}))}},i._destroyContentPlayer=function(){var t=[].concat(gi);t.pop(),B.getInstance().removeObserver(this,t),clearInterval(this._metricsInterval),void 0!==this._timerIsStalled&&clearTimeout(this._timerIsStalled),li('{"command":"stop"}')},i._destroyOnSeeking=function(){var t=this,e=0;return new Promise((function(i,n){var r=setInterval((function(){++e>=180&&(clearInterval(r),n()),t._currentState!==W.PLAYING&&t._currentState!==W.PAUSED&&t._currentState!==W.ENDED||(clearInterval(r),i()),e%15==0&&console.log("Waiting for a valid state in order to destroy the player...")}),333)}))},i._hasSeeked=function(t,e){return e===W.SEEKING&&(t===W.BUFFERING||t===W.PLAYING||t===W.PAUSED)},i.init=function(t,e){this._resumePosition=t.resumePosition,this._trailer=t.trailer;var i=this._mapContentType(e);-1===i?this._load(t.src,t.drm.license,t.drm.customData,e):this._load(t.src,t.drm.license,t.drm.customData,i)},i.destroy=function(){var t=g()(m.a.mark((function t(){var e,i,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(B.getInstance().removeObserver(this,gi),e=0,i=Array.from(this._callbacks.keys());e<i.length;e++)n=i[e],this.removeEventListener(n);if(clearInterval(this._metricsInterval),void 0!==this._timerIsStalled&&clearTimeout(this._timerIsStalled),![W.BUFFERING,W.SEEKING].includes(this._currentState)){t.next=9;break}return t.next=7,this._destroyOnSeeking().then((function(){li('{"command":"stop"}')}));case 7:t.next=10;break;case 9:li('{"command":"stop"}');case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.play=function(){this._currentState===W.PAUSED&&(this.trigger(new w(N.PLAY,{})),li('{"command":"play"}'))},i.pause=function(){this._currentState===W.PLAYING&&(this.trigger(new w(N.PAUSE,{})),li('{"command":"pause"}'))},i.seek=function(t){this._currentState!==W.SEEKING&&t<=this._totalTime&&t>=0&&(li('{"command":"setPlayTime","playTime":'+t+"}"),this._changeCurrentState(W.SEEKING),this.trigger(new w(N.SEEKING,{currentTime:t})))},i.isLive=function(){return!1},i.isSeeking=function(){return this._currentState===W.SEEKING},i.getAudioTracks=function(){return this._audioTracks.length>0?this._audioTracks:(li('{"command":"getAudioTracks"}'),[])},i.getCurrentAudioTrack=function(){return this._currentAudioTrack},i.getCurrentSubtitle=function(){return this._currentSubtitle},i.getCurrentTime=function(){return this._currentTime},i.getCurrentVideoTrack=function(){return{}},i.getDroppedFrames=function(){return NaN},i.getDuration=function(){return this._totalTime},i.getMute=function(){return this._isMuted},i.getPlaybackRate=function(){return li('{"command":"getPlaySpeed"}'),1},i.getThumbnailVideo=function(){return null},i.getSubtitles=function(){return this._subtitles.length>0?this._subtitles:[]},i.getVideoTracks=function(){return[]},i.getVolume=function(){return this._volume},i.setCurrentAudioTrack=function(t){void 0!==this._audioTracks[t].language&&(this._currentAudioTrack=this._audioTracks[t],li('{"command":"setAudioTrack", "audioTrack":"'+this._audioTracks[t].language+'"}'))},i.setCurrentSubtitle=function(t){-1===t?(this._currentSubtitle=fi,li('{"command":"setSubtitleTrack", "subtitleTrack":""}')):void 0!==this._subtitles[t].language&&(this._currentSubtitle=this._subtitles[t],this._currentSubtitle.language.includes("CC")?li('{"command":"setSubtitleTrack", "subtitleTrack":""}'):li('{"command":"setSubtitleTrack", "subtitleTrack":"'+this._subtitles[t].language+'"}'))},i.setCurrentVideoTrack=function(t){},i.setMute=function(t){"boolean"==typeof t&&(t?(this._isMuted=!0,li('{"command": "setVolume", "volume":0.0}')):(this._isMuted=!1,li('{"command": "setVolume", "volume":'+this._volume+"}")))},i.setPlaybackSpeed=function(t){},i.setVolume=function(t){t>=0&&t<=1&&(li('{"command": "setVolume", "volume":'+t+"}"),this._volume=t)},i.addEventListener=function(t,e){var i,n;this._callbacks.has(t)?void 0!==this._callbacks.get(t)?null==(i=this._callbacks.get(t))||i.push(e):console.log("Error: the map doesn't contain any entry for that event type"):(this._callbacks.set(t,new Array),void 0!==this._callbacks.get(t)?null==(n=this._callbacks.get(t))||n.push(e):console.log("Error: the map doesn't contain any entry for that event type"))},i.removeEventListener=function(t,e){if(this._callbacks.has(t))if(void 0!==e){var i=this._callbacks.get(t);if(void 0!==i){for(var n=0,r=i.length;n<r;)i[n].toString()==e.toString()&&i.splice(n,1),++n;i.length>0?this._callbacks.set(t,i):this._callbacks.delete(t)}}else this._callbacks.delete(t)},i.trigger=function(e){t.prototype.trigger.call(this,e)},i.on=function(t){switch(t.type){case N.STATE_CHANGED:case N.PLAYER_CREATING:case N.PLAYER_CREATED:case N.PLAYER_DESTROYED:case N.PLAY:case N.PLAYING:case N.PAUSE:case N.PAUSED:case N.SEEKING:case N.SEEKED:case N.STALLED:case N.DURATION_CHANGE:case N.TIME_UPDATE:case N.LOAD_START:case N.LOADED_DATA:case N.CAN_PLAY:case N.BUFFERING:case N.BUFFER_TYPE:case N.WEBMAF_SUBTITLES_DATA_LOADED:case N.NEW_SUBTITLES_DATA_LOADED:case N.CC_NEW_DATA:case N.VIDEO_FIRST_QUARTILE:case N.VIDEO_MID_POINT:case N.VIDEO_THIRD_QUARTILE:case N.SIXTY_SECONDS_IN:case N.MANIFEST_REQUEST:case N.ENDED:case N.VIDEO_PROGRESS_TIME:case N.ERROR:case N.NEXPLAYER_ERROR:this._executeCallbacks(t);break;case N.AD_START:t.data.resumePosition=this._currentTime,this._callbacks.size>0&&(t.data.playerCallbacksData=new Map(this._callbacks),t.data.playerCallbacksData.delete(N.AD_START),t.data.playerCallbacksData.delete(N.AD_BLOCK_END)),this._isSSAI||(t.data.resumePosition=this._currentTime,this._callbacks.size>0&&(t.data.playerCallbacksData=new Map(this._callbacks),t.data.playerCallbacksData.delete(N.AD_START),t.data.playerCallbacksData.delete(N.AD_BLOCK_END)),this._executeCallbacks(t),this._destroyContentPlayer(),B.getInstance().removeObserver(this,[N.AD_START]),this.removeEventListener(N.AD_START));break;case N.AD_BLOCK_END:this._isSSAI||(this._executeCallbacks(t),B.getInstance().removeObserver(this,[N.AD_BLOCK_END]),this.removeEventListener(N.AD_BLOCK_END))}},e}(z),vi={},mi=function(){if(DEBUG&&dt.log("reset - unwireVastPlayerEvents"),this.nonLinearContainer){this.nonLinearImg.removeEventListener("load",this.onNonLinearLoadSuccess),this.nonLinearImg.removeEventListener("error",this.onNonLinearLoadError),this.nonLinearATag.removeEventListener("click",this.onNonLinearClickThrough),this.nonLinearATag.removeEventListener("touchend",this.onNonLinearClickThrough),this.nonLinearClose.removeEventListener("click",this.onClickCloseNonLinear),this.nonLinearClose.removeEventListener("touchend",this.onClickCloseNonLinear);for(var t=0,e=this.trackingTags.length;t<e;t++)this.nonLinearContainer.removeEventListener(this.trackingTags[t].event,this.onEventPingTracking)}if(this.vastPlayer){this.vastPlayer.removeEventListener("pause",this.onPause),this.vastPlayer.removeEventListener("play",this.onPlay),this.vastPlayer.removeEventListener("playing",this.onPlaying),this.vastPlayer.removeEventListener("ended",this.onEnded),this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdate);for(var i=0,n=this.trackingTags.length;i<n;i++)this.container.removeEventListener(this.trackingTags[i].event,this.onEventPingTracking);this.skipButton&&null!==this.onClickSkip&&(this.skipButton.removeEventListener("click",this.onClickSkip),this.skipButton.removeEventListener("touchend",this.onClickSkip))}},Ei=function(){DEBUG&&dt.log("start destroying vast player"),this.icons.length>0&&jt.destroy.call(this),this.isVPAID&&Oe.destroy.call(this),mi.call(this),this.isSkippableAd&&dt.removeElement(this.skipButton),dt.hide(this.adContainer),clearTimeout(this.creativeLoadTimeoutCallback);try{this.vastPlayer&&(this.vastPlayer.destroy(),DEBUG&&dt.log("flushing vastPlayer buffer after ad")),this.nonLinearContainer&&dt.removeElement(this.nonLinearContainer)}catch(t){dt.trace(t)}xe.loadAdsVariables.call(this),Pi.createApiEvent.call(this,"addestroyed")};vi.init=function(){DEBUG&&dt.log("init called"),this.rmpVastInitialized=!0},vi.append=function(t,e){if(null===this.vastPlayer&&(this.vastPlayer=new _i),this.adIsLinear)t&&e&&si.update.call(this,t,e);else{if(this.params.outstream)return DEBUG&&dt.log("non-linear creative detected for outstream ad mode - discarding creative"),void Di.process.call(this,201);He.update.call(this)}te.wire.call(this)},vi.setVolume=function(t){this.vastPlayer&&this.vastPlayer.setVolume(t)},vi.getVolume=function(){if(this.vastPlayer)return this.vastPlayer.getVolume()},vi.setMute=function(t){this.vastPlayer&&this.vastPlayer.setMute(t)},vi.getMute=function(){if(this.vastPlayer)return this.vastPlayer.getMute()},vi.play=function(){this.vastPlayer&&this.vastPlayer.play()},vi.pause=function(){this.vastPlayer&&this.vastPlayer.pause()},vi.getDuration=function(){return this.vastPlayer?this.vastPlayer.getDuration():-1},vi.getCurrentTime=function(){return this.vastPlayer?this.vastPlayer.getCurrentTime():-1},vi.resumeContent=function(){DEBUG&&dt.log("resumeContent"),Ei.call(this),this.rmpVastInitialized=!1};var Ai=vi,Ti={},yi=[100,101,102,300,301,302,303,900,1e3,1001],bi=[200,201,202,203,400,401,402,403,405,500,501,502,503,600,601,602,603,604,901,1002,1003,1004],Si=[{code:100,description:"XML parsing error."},{code:101,description:"VAST schema validation error."},{code:102,description:"VAST version of response not supported."},{code:200,description:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display."},{code:201,description:"Video player expecting different linearity."},{code:202,description:"Video player expecting different duration."},{code:203,description:"Video player expecting different size."},{code:300,description:"General Wrapper error."},{code:301,description:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)"},{code:302,description:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response."},{code:303,description:"No Ads VAST response after one or more Wrappers."},{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},{code:402,description:"Timeout of MediaFile URI."},{code:403,description:"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},{code:405,description:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn't display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},{code:500,description:"General NonLinearAds error."},{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},{code:503,description:"Couldn't find NonLinear resource with supported type."},{code:600,description:"General CompanionAds error."},{code:601,description:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},{code:602,description:"Unable to display Required Companion."},{code:603,description:"Unable to fetch CompanionAds/Companion resource."},{code:604,description:"Couldn't find Companion resource with supported type."},{code:900,description:"Undefined Error."},{code:901,description:"General VPAID error."},{code:1e3,description:"Error processing AJAX call to retrieve adTag"},{code:1001,description:"Invalid input for loadAds method"},{code:1002,description:"Required DOMParser API is not available"},{code:1003,description:"Could not get source for content player"},{code:1004,description:"Could not find vast player"}],Ii=function(t){var e=Si.filter((function(e){return e.code===t}));e.length>0?(this.vastErrorCode=e[0].code,this.vastErrorMessage=e[0].description):(this.vastErrorCode=-1,this.vastErrorMessage="Error getting VAST error"),this.vastErrorCode>-1&&(yi.indexOf(this.vastErrorCode)>-1?this.adErrorType="adLoadError":bi.indexOf(this.vastErrorCode)>-1&&(this.adErrorType="adPlayError")),DEBUG&&(dt.log("VAST error code is "+this.vastErrorCode),dt.log("VAST error message is "+this.vastErrorMessage),dt.log("Ad error type is "+this.adErrorType))};Ti.process=function(t){Ii.call(this,t),Pi.createApiEvent.call(this,"aderror"),Ai.resumeContent.call(this)};var Di=Ti,ki={filterParams:function(t){if(this.params={ajaxTimeout:5e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,maxNumItemsInAdPod:10,pauseOnClick:!0,skipMessage:"Skip ad",skipWaitingMessage:"Skip ad in",textForClickUIOnMobile:"Learn more",enableVpaid:!0,outstream:!1,vpaidSettings:{width:640,height:360,viewMode:"normal",desiredBitrate:500}},dt.isObject(t)){for(var e=Object.keys(t),i=0,n=e.length;i<n;i++){var r=e[i];typeof t[r]==typeof this.params[r]&&(dt.isNumber(t[r])&&t[r]>0||"number"!=typeof t[r])&&("vpaidSettings"===r?(dt.isNumber(t.vpaidSettings.width)&&t.vpaidSettings.width>0&&(this.params.vpaidSettings.width=t.vpaidSettings.width),dt.isNumber(t.vpaidSettings.height)&&t.vpaidSettings.height>0&&(this.params.vpaidSettings.height=t.vpaidSettings.height),"string"==typeof t.vpaidSettings.viewMode&&"fullscreen"===t.vpaidSettings.viewMode&&(this.params.vpaidSettings.viewMode=t.vpaidSettings.viewMode),dt.isNumber(t.vpaidSettings.desiredBitrate)&&t.vpaidSettings.desiredBitrate>0&&(this.params.vpaidSettings.desiredBitrate=t.vpaidSettings.desiredBitrate)):this.params[r]=t[r])}this.params.maxNumRedirects>30&&(this.params.maxNumRedirects=30)}},createApiEvent:function(t){"string"==typeof t&&""!==t&&dt.createStdEvent(t,this.container)},dispatchPingEvent:function(t){var e;t&&(this.adIsLinear&&this.container?e=this.container:!this.adIsLinear&&this.nonLinearContainer&&(e=this.nonLinearContainer),e&&(Array.isArray(t)?t.forEach((function(t){dt.createStdEvent(t,e)})):dt.createStdEvent(t,e)))},accessibleButton:function(t,e){t.tabIndex=0,t.setAttribute("role","button"),t.addEventListener("keyup",(function(e){var i=e.which;13!==i&&32!==i||(e.stopPropagation(),e.preventDefault(),dt.createStdEvent("click",t))})),e&&t.setAttribute("aria-label",e)}},Pi=ki,Li={parse:function(t){this.validCompanionAds=[],this.companionAdsRequiredAttribute="",this.companionAdsRequiredAttribute=t[0].getAttribute("required"),null===this.companionAdsRequiredAttribute&&(this.companionAdsRequiredAttribute="");var e=t[0].getElementsByTagName("Companion"),i=!1;if(e.length>0)for(var n=0,r=e.length;n<r;n++){var s=e[n],a=s.getElementsByTagName("StaticResource"),o=s.getElementsByTagName("IFrameResource"),l=s.getElementsByTagName("HTMLResource");if(0!==a.length){var u=a[0].getAttribute("creativeType");if(null!==u&&""!==u&&dt.imagePattern.test(u)){var c=s.getAttribute("width");if(null!==c&&""!==c){var d=s.getAttribute("height");if(null!==d&&""!==d){if(c=parseInt(c),d=parseInt(d),!(c<=0||d<=0)){var h=dt.getNodeValue(a[0],!0);if(null!==h){var p={width:c,height:d,imageUrl:h},g=s.getElementsByTagName("CompanionClickThrough");if(g.length>0){var f=dt.getNodeValue(g[0],!0);null!==f&&(p.companionClickThroughUrl=f)}var _=s.getElementsByTagName("CompanionClickTracking");if(_.length>0){var v=dt.getNodeValue(_[0],!0);null!==v&&(p.companionClickTrackingUrl=v)}var m=s.getElementsByTagName("AltText");if(m.length>0){var E=dt.getNodeValue(m[0],!1);null!==E&&(p.altText=E)}var A=s.getAttribute("adSlotID");if(null!==A&&(p.adSlotID=A),s.getElementsByTagName("TrackingEvents").length>0){p.trackingEventsUri=[];var T=s.getElementsByTagName("Tracking");if(T.length>0)for(var y=0,b=T.length;y<b;y++){var S=T[y].getAttribute("event");if(null!==S&&"creativeView"===S){var I=dt.getNodeValue(T[y],!0);p.trackingEventsUri.push(I)}}}this.validCompanionAds.push(p)}}}else Vt.error.call(this,101),Di.process.call(this,101)}else Vt.error.call(this,101),Di.process.call(this,101)}}else(o.length>0||l.length>0)&&(i=!0)}DEBUG&&(dt.log("parse companion ads follow"),dt.log(this.validCompanionAds)),0===this.validCompanionAds.length&&i&&Vt.error.call(this,604)}},Ci=Li,Ri={attach:function(t){t.prototype.play=function(){this.adOnStage&&this.adIsLinear&&(this.isVPAID?Oe.resumeAd.call(this):Ai.play.call(this))},t.prototype.pause=function(){this.adOnStage&&this.adIsLinear&&(this.isVPAID?Oe.pauseAd.call(this):Ai.pause.call(this))},t.prototype.getAdPaused=function(){return!(!this.adOnStage||!this.adIsLinear)&&(this.isVPAID?Oe.getAdPaused.call(this):this.vastPlayerPaused)},t.prototype.setVolume=function(t){if(dt.isNumber(t)){var e=0;e=t<0?0:t>1?1:t,this.adOnStage&&this.adIsLinear&&Ai.setVolume.call(this,e)}},t.prototype.getVolume=function(){if(this.adOnStage&&this.adIsLinear)return Ai.getVolume.call(this)},t.prototype.setMute=function(t){"boolean"==typeof t&&this.adOnStage&&this.adIsLinear&&Ai.setMute.call(this,t)},t.prototype.getMute=function(){if(this.adOnStage&&this.adIsLinear)return Ai.getMute.call(this)},t.prototype.stopAds=function(){this.adOnStage&&(this.isVPAID?Oe.stopAd.call(this):Ai.resumeContent.call(this))},t.prototype.skipAd=function(){this.adOnStage&&this.getAdSkippableState()&&(this.isVPAID?Oe.skipAd.call(this):Ai.resumeContent.call(this))},t.prototype.getAdTagUrl=function(){return this.adTagUrl},t.prototype.getAdMediaUrl=function(){return this.adOnStage?this.isVPAID?Oe.getCreativeUrl.call(this):this.adMediaUrl:null},t.prototype.getAdLinear=function(){return this.adIsLinear},t.prototype.getAdSystem=function(){return this.adSystem},t.prototype.getAdContentType=function(){return this.adOnStage?this.adIsLinear||this.isVPAID?this.adContentType:this.nonLinearContentType:""},t.prototype.getAdTitle=function(){return this.adTitle},t.prototype.getAdDescription=function(){return this.adDescription},t.prototype.getAdDuration=function(){if(this.adOnStage&&this.adIsLinear){if(this.isVPAID){var t=Oe.getAdDuration.call(this);return t>0&&(t*=1e3),t}return Ai.getDuration.call(this)}return-1},t.prototype.getAdCurrentTime=function(){if(this.adOnStage&&this.adIsLinear){if(this.isVPAID){var t=Oe.getAdRemainingTime.call(this),e=Oe.getAdDuration.call(this);return-1===t||-1===e||t>e?-1:1e3*(e-t)}return Ai.getCurrentTime.call(this)}return-1},t.prototype.getAdRemainingTime=function(){if(this.adOnStage&&this.adIsLinear){if(this.isVPAID)return Oe.getAdRemainingTime.call(this);var t=Ai.getCurrentTime.call(this),e=Ai.getDuration.call(this);return-1===t||-1===e||t>e?-1:e-t}return-1},t.prototype.getAdOnStage=function(){return this.adOnStage},t.prototype.getAdMediaWidth=function(){return this.adOnStage?this.isVPAID?Oe.getAdWidth.call(this):this.adIsLinear?this.adMediaWidth:this.nonLinearCreativeWidth:-1},t.prototype.getAdMediaHeight=function(){return this.adOnStage?this.isVPAID?Oe.getAdHeight.call(this):this.adIsLinear?this.adMediaHeight:this.nonLinearCreativeHeight:-1},t.prototype.getClickThroughUrl=function(){return this.clickThroughUrl},t.prototype.getIsSkippableAd=function(){return this.isSkippableAd},t.prototype.getContentPlayerCompleted=function(){return this.contentPlayerCompleted},t.prototype.setContentPlayerCompleted=function(t){"boolean"==typeof t&&(this.contentPlayerCompleted=t)},t.prototype.getAdErrorMessage=function(){return this.vastErrorMessage},t.prototype.getAdVastErrorCode=function(){return this.vastErrorCode},t.prototype.getAdErrorType=function(){return this.adErrorType},t.prototype.getEnvironment=function(){return xt},t.prototype.getFramework=function(){return dt},t.prototype.getVastPlayer=function(){return this.vastPlayer},t.prototype.getVpaidCreative=function(){return this.adOnStage&&this.isVPAID?Oe.getVpaidCreative.call(this):null},t.prototype.getAdSkippableState=function(){if(this.adOnStage){if(this.isVPAID)return Oe.getAdSkippableState.call(this);if(this.getIsSkippableAd())return this.skippableAdCanBeSkipped}return!1};var e=function(t,e,i){DEBUG&&dt.log("click on companion img"),i&&(i.stopPropagation(),"touchend"===i.type&&i.preventDefault()),e&&Vt.tracking.call(this,e,null),dt.openWindow(t)};t.prototype.getCompanionAdsList=function(t,e){var i=300;t&&(i=t);var n=250;if(e&&(n=e),this.adOnStage){var r=this.validCompanionAds.filter((function(t){return i>=t.width&&n>=t.height}));if(r.length>0){for(var s=[],a=0,o=r.length;a<o;a++)s.push(r[a]);return this.companionAdsList=s,s}}return null},t.prototype.getCompanionAd=function(t){var i=this;if(void 0===this.companionAdsList[t])return null;var n=document.createElement("img");this.companionAdsList[t].altText&&(n.alt=this.companionAdsList[t].altText),dt.setStyle(n,{width:"100%",height:"100%",cursor:"pointer"});var r=this.companionAdsList[t].trackingEventsUri;r.length>0&&(n.addEventListener("load",(function(){for(var t=0,e=r.length;t<e;t++)Vt.tracking.call(i,r[t],null)})),n.addEventListener("error",(function(){Vt.error.call(i,603)})));var s=null;return this.companionAdsList[t].companionClickTrackingUrl&&(s=this.companionAdsList[t].companionClickTrackingUrl),n.addEventListener("touchend",e.bind(this,this.companionAdsList[t].companionClickThroughUrl,s)),n.addEventListener("click",e.bind(this,this.companionAdsList[t].companionClickThroughUrl,s)),n.src=this.companionAdsList[t].imageUrl,n},t.prototype.getCompanionAdsRequiredAttribute=function(){return this.adOnStage?this.companionAdsRequiredAttribute:""},t.prototype.initialize=function(){this.rmpVastInitialized?DEBUG&&dt.log("rmp-vast already initialized"):(DEBUG&&dt.log("on user interaction - player needs to be initialized"),Ai.init.call(this))},t.prototype.getInitialized=function(){return this.rmpVastInitialized},t.prototype.getAdPodInfo=function(){if(this.adPodApiInfo.length>0){var t={};return t.adPodCurrentIndex=this.adPodCurrentIndex,t.adPodLength=this.adPodApiInfo.length,t}return null},t.prototype.resizeAd=function(t,e,i){this.adOnStage&&this.isVPAID&&Oe.resizeAd.call(this,t,e,i)},t.prototype.expandAd=function(){this.adOnStage&&this.isVPAID&&Oe.expandAd.call(this)},t.prototype.collapseAd=function(){this.adOnStage&&this.isVPAID&&Oe.collapseAd.call(this)},t.prototype.getAdExpanded=function(){return this.adOnStage&&this.isVPAID&&Oe.getAdExpanded.call(this),!1},t.prototype.getVPAIDCompanionAds=function(){return this.adOnStage&&this.isVPAID&&Oe.getAdCompanions.call(this),""}}},Ni=function(t,e){if(window.DEBUG=!0,"string"==typeof t&&""!==t)if(this.id=t,this.container=document.getElementById(this.id),null!==this.container){if(DEBUG&&(dt.log("creating new RmpVast instance"),dt.logVideoEvents(this.contentPlayer,"content")),xe.instanceVariables.call(this),xe.loadAdsVariables.call(this),Pi.filterParams.call(this,e),DEBUG){dt.log("filtered params follow"),dt.log(this.params),dt.log("detected environment follows");for(var i=Object.keys(xt),n={},r=0,s=i.length;r<s;r++){var a=xt[i[r]];void 0!==a&&"function"!=typeof a&&null!==a&&(n[i[r]]=a)}dt.log(n)}}else DEBUG&&dt.log("invalid DOM layout - exit");else DEBUG&&dt.log("invalid id to create new instance - exit")};Ri.attach(Ni);var Oi=function(){DEBUG&&dt.log("adfollowingredirect"),Pi.createApiEvent.call(this,"adfollowingredirect");var t=dt.getNodeValue(this.vastAdTagURI[0],!0);DEBUG&&dt.log("redirect URL is "+t),null!==t?this.params.maxNumRedirects>this.redirectsFollowed?(this.redirectsFollowed++,this.runningAdPod&&(this.adPodItemWrapper=!0),this.loadAds(t)):(Vt.error.call(this,302),Di.process.call(this,302)):(Vt.error.call(this,300),Di.process.call(this,300))},wi=function(t){DEBUG&&(dt.log("_parseCreatives"),dt.log(t));for(var e=0,i=t.length;e<i;e++){var n=t[e].getElementsByTagName("CompanionAds");if(n.length>0){Ci.parse.call(this,n);break}}for(var r=0,s=t.length;r<s;r++){var a=t[r],o=a.getElementsByTagName("NonLinearAds"),l=a.getElementsByTagName("Linear");if(0===o.length&&0===l.length)return Vt.error.call(this,101),void Di.process.call(this,101);if(o.length>0){var u=o[0].getElementsByTagName("TrackingEvents");return u.length>0&&te.filterPush.call(this,u),this.isWrapper?void Oi.call(this):void He.parse.call(this,o)}if(l.length>0){var c=l[0].getAttribute("skipoffset");if(!this.isWrapper&&""!==this.params.skipMessage&&null!==c&&""!==c&&dt.isValidOffset(c)&&(DEBUG&&dt.log("skippable ad detected with offset "+c),this.isSkippableAd=!0,this.skipoffset=c,xt.isIos[0]&&xt.isIos[1]<10))return Vt.error.call(this,200),void Di.process.call(this,200);var d=l[0].getElementsByTagName("TrackingEvents");d.length>0&&te.filterPush.call(this,d);var h=l[0].getElementsByTagName("VideoClicks");if(h.length>0){var p=h[0].getElementsByTagName("ClickThrough"),g=h[0].getElementsByTagName("ClickTracking");if(p.length>0&&(this.clickThroughUrl=dt.getNodeValue(p[0],!0)),g.length>0)for(var f=0,_=g.length;f<_;f++){var v=dt.getNodeValue(g[f],!0);null!==v&&this.trackingTags.push({event:"clickthrough",url:v})}}if(this.isWrapper){var m=l[0].getElementsByTagName("Icons");return m.length>0&&jt.parse.call(this,m),void Oi.call(this)}return void si.parse.call(this,l)}}this.isWrapper&&Oi.call(this)},xi=function t(e){var i;if(DEBUG&&dt.log("_filterAdPod"),this.adPod.length>0&&!this.adPodItemWrapper)DEBUG&&dt.log("loading next ad in pod"),i=e[0],this.adPodCurrentIndex++,this.adPod.shift();else if(this.adPod.length>0&&this.adPodItemWrapper){DEBUG&&dt.log("running ad pod Ad is a wrapper"),this.adPodItemWrapper=!1;for(var n=0,r=e.length;n<r;n++){var s=e[n].getAttribute("sequence");if(""===s||null===s){i=e[n];break}}}else{for(var a=[],o=0,l=e.length;o<l;o++){var u=e[o].getAttribute("sequence");""===u||null===u?a.push(e[o]):this.adPod.push(e[o])}if(0===this.adPod.length&&a.length>0)i=a[0];else if(this.adPod.length>0){DEBUG&&dt.log("ad pod detected"),this.runningAdPod=!0,this.adPodApiInfo=[].concat(this.adPod),this.adPodWrapperTrackings=[].concat(this.trackingTags),this.adPod.length>this.params.maxNumItemsInAdPod&&(this.adPod.length=this.params.maxNumItemsInAdPod),this.standaloneAdsInPod=a,this.adPod.sort((function(t,e){return parseInt(t.getAttribute("sequence"))-parseInt(e.getAttribute("sequence"))})),i=this.adPod[0],this.adPod.shift();this.onAdDestroyLoadNextAdInPod=function(){DEBUG&&(dt.log("addestroyed - checking for ads left in pod"),this.adPod.length>0?dt.log(this.adPod):dt.log("no ad left in pod")),this.adPodItemWrapper=!1,this.adPod.length>0?t.call(this,this.adPod):(this.container.removeEventListener("addestroyed",this.onAdDestroyLoadNextAdInPod),this.adPod=[],this.standaloneAdsInPod=[],this.runningAdPod=!1,this.adPodCurrentIndex=0,this.adPodApiInfo=[],this.adPodWrapperTrackings=[],Pi.createApiEvent.call(this,"adpodcompleted"))}.bind(this),this.container.addEventListener("addestroyed",this.onAdDestroyLoadNextAdInPod)}}if(!i)return Vt.error.call(this,200),void Di.process.call(this,200);var c,d=i.getElementsByTagName("InLine"),h=i.getElementsByTagName("Wrapper");if(0===d.length&&0===h.length)return Vt.error.call(this,101),void Di.process.call(this,101);h.length>0?(this.isWrapper=!0,c=h,this.vastAdTagURI=c[0].getElementsByTagName("VASTAdTagURI")):c=d;var p=c[0].getElementsByTagName("AdSystem"),g=c[0].getElementsByTagName("Impression"),f=c[0].getElementsByTagName("Error");if(f.length>0){var _=dt.getNodeValue(f[0],!0);null!==_&&this.inlineOrWrapperErrorTags.push({event:"error",url:_})}var v,m=c[0].getElementsByTagName("AdTitle"),E=c[0].getElementsByTagName("Description"),A=c[0].getElementsByTagName("Creatives");if(this.isWrapper){if(0===this.vastAdTagURI.length)return Vt.error.call(this,101),void Di.process.call(this,101)}else if(0===A.length)return Vt.error.call(this,101),void Di.process.call(this,101);if(A.length>0&&(v=A[0].getElementsByTagName("Creative"),!this.isWrapper&&0===v.length))return Vt.error.call(this,101),void Di.process.call(this,101);if(m.length>0&&(this.adSystem=dt.getNodeValue(p[0],!1)),g.length>0)for(var T=0,y=g.length;T<y;T++){var b=dt.getNodeValue(g[T],!0);null!==b&&this.trackingTags.push({event:"impression",url:b})}this.isWrapper||(m.length>0&&(this.adTitle=dt.getNodeValue(m[0],!1)),E.length>0&&(this.adDescription=dt.getNodeValue(E[0],!1))),!this.isWrapper||v?wi.call(this,v):Oi.call(this)},Mi=function(t){if(t.getElementsByTagName("vmap:VMAP").length>0)Di.process.call(this,200);else{var e=t.getElementsByTagName("VAST");if(0===e.length)return Vt.error.call(this,100),void Di.process.call(this,100);var i=e[0],n=i.getElementsByTagName("Error");if(n.length>0)for(var r=0,s=n.length;r<s;r++)if(n[r].parentNode===i){var a=dt.getNodeValue(n[r],!0);null!==a&&this.vastErrorTags.push({event:"error",url:a})}var o=i.getAttribute("version");if(!/^(2|3|4)\./i.test(o))return Vt.error.call(this,102),void Di.process.call(this,102);var l=i.getElementsByTagName("Ad");if(0===l.length)return Vt.error.call(this,303),void Di.process.call(this,303);xi.call(this,l)}},Ui=function(t){var e=this;"string"==typeof t&&""!==t?dt.hasDOMParser()?(Pi.createApiEvent.call(this,"adtagstartloading"),this.isWrapper=!1,this.vastAdTagURI=null,this.adTagUrl=t,DEBUG&&dt.log("try to load VAST tag at "+this.adTagUrl),dt.ajax(this.adTagUrl,this.params.ajaxTimeout,!0,this.params.ajaxWithCredentials).then((function(t){var i;DEBUG&&dt.log("VAST loaded from "+e.adTagUrl),Pi.createApiEvent.call(e,"adtagloaded");try{i=(new DOMParser).parseFromString(t,"text/xml"),DEBUG&&(dt.log("parsed XML document follows"),dt.log(i))}catch(t){return dt.trace(t),Vt.error.call(e,100),void Di.process.call(e,100)}Mi.call(e,i)})).catch((function(t){dt.trace(t),Vt.error.call(e,1e3),Di.process.call(e,1e3)}))):Di.process.call(this,1002):Di.process.call(this,1001)},Bi=function(t){this.container.removeEventListener("addestroyed",this.onDestroyLoadAds),this.loadAds(t)};Ni.prototype.loadAds=function(t){if(DEBUG&&dt.log("loadAds starts"),this.rmpVastInitialized||this.initialize(),this.getAdOnStage())return this.onDestroyLoadAds=Bi.bind(this,t),this.container.addEventListener("addestroyed",this.onDestroyLoadAds),void this.stopAds();Ui.call(this,t)};var Vi=Ni,Fi=(i(100),function(t){for(var e in this.id=t.getAttribute("id"),this.allowMultipleAds=t.getAttribute("allowMultipleAds"),this.followRedirects=t.getAttribute("followRedirects"),this.vastAdData=null,this.adTagURI=null,this.customData=null,t.childNodes){var i=t.childNodes[e];switch(i.localName){case"AdTagURI":this.adTagURI={templateType:i.getAttribute("templateType"),uri:(i.textContent||i.text||"").trim()};break;case"VASTAdData":for(this.vastAdData=i.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":this.customData=i}}});function Gi(t,e){var i=[];for(var n in t.childNodes){var r=t.childNodes[n];r.nodeName!==e&&e!=="vmap:"+r.nodeName&&r.nodeName!=="vmap:"+e||i.push(r)}return i}function Hi(t){var e={attributes:{},children:{},value:{}};e.value=function(t){if(!t||!t.childNodes)return{};var e=t.childNodes,i=[];for(var n in e){var r=e[n];"#cdata-section"===r.nodeName&&i.push(r)}if(i&&i.length>0)try{return JSON.parse(i[0].data)}catch(t){}var s="";for(var a in e){var o=e[a];switch(o.nodeName){case"#text":s+=o.textContent.trim();break;case"#cdata-section":s+=o.data}}return s}(t);var i=t.attributes;if(i)for(var n in i){var r=i[n];r.nodeName&&void 0!==r.nodeValue&&null!==r.nodeValue&&(e.attributes[r.nodeName]=r.nodeValue)}var s=t.childNodes;if(s)for(var a in s){var o=s[a];o.nodeName&&"#"!==o.nodeName.substring(0,1)&&(e.children[o.nodeName]=Hi(o))}return e}var Yi,Wi=function(){function t(t){for(var e in this.timeOffset=t.getAttribute("timeOffset"),this.breakType=t.getAttribute("breakType"),this.breakId=t.getAttribute("breakId"),this.repeatAfter=t.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],t.childNodes){var i=t.childNodes[e];switch(i.localName){case"AdSource":this.adSource=new Fi(i);break;case"TrackingEvents":for(var n in i.childNodes){var r=i.childNodes[n];"Tracking"===r.localName&&this.trackingEvents.push({event:r.getAttribute("event"),uri:(r.textContent||r.text||"").trim()})}break;case"Extensions":this.extensions=Gi(i,"Extension").map((function(t){return Hi(t)}))}}}var e=t.prototype;return e.track=function(t,e){for(var i in this.trackingEvents){var n=this.trackingEvents[i];if(n.event===t){var r=n.uri;"error"===n.event&&(r=r.replace("[ERRORCODE]",e)),this.tracker(r)}}},e.tracker=function(t){"undefined"!=typeof window&&null!==window&&((new Image).src=t)},t}(),ji=function(t){if(!t||!t.documentElement||"VMAP"!==t.documentElement.localName)throw new Error("Not a VMAP document");for(var e in this.version=t.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],t.documentElement.childNodes){var i=t.documentElement.childNodes[e];switch(i.localName){case"AdBreak":this.adBreaks.push(new Wi(i));break;case"Extensions":this.extensions=Gi(i,"Extension").map((function(t){return Hi(t)}))}}},Qi=function(){function t(t){if(this._vmap=void 0,this._adBreaks=void 0,this._vmap=new ji(t),this._adBreaks=new Array,this._vmap.version.includes("1.0"),0===this._vmap.adBreaks.length);else{for(var e=0;e<this._vmap.adBreaks.length;e++){var i,n,r,s,a,o,l={};if(l.executed=!1,"start"===this._vmap.adBreaks[e].timeOffset?l.timeOffset=0:"end"===this._vmap.adBreaks[e].timeOffset?l.timeOffset=Number.MAX_VALUE:l.timeOffset=this._timeToSeconds(this._vmap.adBreaks[e].timeOffset),null!==this._vmap.adBreaks[e].adSource&&void 0!==this._vmap.adBreaks[e].adSource)if(l.vastAdData=null==(i=this._vmap.adBreaks[e].adSource)?void 0:i.vastAdData,l.allowMultipleAds=null==(n=this._vmap.adBreaks[e].adSource)?void 0:n.allowMultipleAds,null!==(null==(r=this._vmap.adBreaks[e].adSource)?void 0:r.adTagURI)&&void 0!==(null==(s=this._vmap.adBreaks[e].adSource)?void 0:s.adTagURI))l.uri=null==(a=this._vmap.adBreaks[e].adSource)||null==(o=a.adTagURI)?void 0:o.uri;this._adBreaks.push(l)}this._adBreaks.sort((function(t,e){return t.timeOffset-e.timeOffset}))}}var e=t.prototype;return e._timeToSeconds=function(t){var e=t.split(":");return 3600*parseFloat(e[0])+60*parseFloat(e[1])+parseFloat(e[2])},e.hasPreroll=function(){for(var t=!1,e=0;!t&&e<this._vmap.adBreaks.length;)this._vmap.adBreaks[e].timeOffset.includes("start")&&(t=!0),e++;return t},e.getAdPodsInfo=function(){return this._vmap.adBreaks},e.getAdBreaks=function(){return this._adBreaks},e.getAdBreaksFor=function(t){if(this._adBreaks.length>0){for(var e=!1,i=0,n=new Array;!e&&i<this._adBreaks.length;)this._adBreaks[i].timeOffset===t?n.push(this._adBreaks[i]):e=!0,i++;return n}return[]},e.getPrerolls=function(){return this.getAdBreaksFor(0)},t}(),Ki=[N.AD_LIBRARY_CREATING,N.AD_LIBRARY_CREATED,N.AD_LIBRARY_DESTROYED,N.AD_START,N.AD_PODS_INFO,N.AD_BLOCK_STARTED,N.AD_BLOCK_END,N.AD_STARTED,N.AD_TAG_START_LOADING,N.AD_LOADED,N.AD_COMPLETED,N.AD_DESTROYED,N.AD_PAUSED,N.AD_RESUMED,N.AD_SKIPPED,N.AD_FIRST_QUARTILE,N.AD_MID_POINT,N.AD_THIRD_QUARTILE,N.AD_IMPRESSION,N.AD_ERROR,N.AD_POD_COMPLETED,N.STATE_CHANGED,N.PLAYER_CREATED,N.TIME_UPDATE],qi=function(t){function e(e,i,n,r){var s;return(s=t.call(this,Ki)||this)._libraryLoaded=void 0,s._isPlayerInitialized=void 0,s._rmp=void 0,s._playerDiv=void 0,s._adsDiv=void 0,s._canPlayAds=void 0,s._vmapParser=void 0,s._adURL=void 0,s._adType=void 0,s._currentURL=void 0,s._prerolls=void 0,s._adBreakIndex=void 0,s._lastTimeOffset=void 0,s._adPodInfo=void 0,s._isAdPlaying=void 0,s._adsParamsToEncode=void 0,s.ADS_PARAMS_MAX_LENGTH=100,s._callbacks=void 0,s._libraryLoaded=!1,s._isPlayerInitialized=!1,s._rmp=null,s._playerDiv=e,s._callbacks=new Map,s._canPlayAds=!1,s._vmapParser=null,s._adURL=i,s._adType=zi.NONE,s._currentURL="",s._prerolls=new Array,s._adBreakIndex=0,s._lastTimeOffset=-1,s._adPodInfo=null,s._isAdPlaying=!1,s._adsParamsToEncode=r,void 0!==n&&s.addEventListener(n.eventType,n.func),s._adsDiv=document.createElement("div"),s._adsDiv.id="nexplayer_ad_container",s._adsDiv.className="nexplayer_ad_container",s._adsDiv.style.display="none",s._playerDiv.appendChild(s._adsDiv),s}A()(e,t);var i=e.prototype;return i._loadRMPLibrary=function(){this._rmp=new Vi("nexplayer_ad_container",{pauseOnClick:!0,enableVpaid:!0,vpaidSettings:{width:"100%",height:"100%",viewMode:"normal",desiredBitrate:500},maxNumRedirects:30,ajaxTimeout:8e3}),this._rmp.initialize(),this._libraryLoaded=!0},i._wireAdEvents=function(){var t=this;this._adsDiv.addEventListener("adstarted",(function(e){t._adPodInfo=null,null!==t._rmp&&(t._adPodInfo=t._rmp.getAdPodInfo()),t.trigger(new w(N.AD_BLOCK_STARTED,{adPodsNumber:null!==t._adPodInfo?t._adPodInfo.adPodLength:1})),t.trigger(new w(N.AD_STARTED,{currentAdPod:null!==t._adPodInfo?t._adPodInfo.adPodCurrentIndex:0}))})),this._adsDiv.addEventListener("adcomplete",(function(){t.trigger(new w(N.AD_COMPLETED,{}))})),this._adsDiv.addEventListener("adpaused",(function(){t.trigger(new w(N.AD_PAUSED,{}))})),this._adsDiv.addEventListener("adresumed",(function(){t.trigger(new w(N.AD_RESUMED,{}))})),this._adsDiv.addEventListener("adskipped",(function(){t.trigger(new w(N.AD_SKIPPED,{}))})),this._adsDiv.addEventListener("adtagstartloading",(function(){t.trigger(new w(N.AD_TAG_START_LOADING,{}))})),this._adsDiv.addEventListener("adloaded",(function(){t.trigger(new w(N.AD_LOADED,{}))})),this._adsDiv.addEventListener("addestroyed",(function(){null===t._adPodInfo&&t._checkAdBlockEnded(),t.trigger(new w(N.AD_DESTROYED,{}))})),this._adsDiv.addEventListener("aderror",(function(){t._adPodInfo=null,t.trigger(new w(N.AD_ERROR,{adErrorData:{errorMsg:t._rmp.getAdErrorMessage(),errorCode:t._rmp.getAdVastErrorCode(),errorType:t._rmp.getAdErrorType()}}))})),this._adsDiv.addEventListener("adfirstquartile",(function(){t.trigger(new w(N.AD_FIRST_QUARTILE,{}))})),this._adsDiv.addEventListener("admidpoint",(function(){t.trigger(new w(N.AD_MID_POINT,{}))})),this._adsDiv.addEventListener("adthirdquartile",(function(){t.trigger(new w(N.AD_THIRD_QUARTILE,{}))})),this._adsDiv.addEventListener("adpodcompleted",(function(){t.trigger(new w(N.AD_POD_COMPLETED,{})),t._checkAdBlockEnded()}))},i._unwireAdEvents=function(){},i._checkAdBlockEnded=function(){this._adType===zi.VMAP?null!==this._vmapParser&&(this._adBreakIndex<this._vmapParser.getAdBreaks().length?this._lastTimeOffset!==this._vmapParser.getAdBreaks()[this._adBreakIndex].timeOffset?this.trigger(new w(N.AD_BLOCK_END,{})):(this._currentURL=this._vmapParser.getAdBreaks()[this._adBreakIndex].uri,this._lastTimeOffset=this._vmapParser.getAdBreaks()[this._adBreakIndex].timeOffset,this._adBreakIndex++,this._playAds()):this.trigger(new w(N.AD_BLOCK_END,{}))):this._adType===zi.VAST&&this.trigger(new w(N.AD_BLOCK_END,{}))},i._modifyAdParam=function(t,e,i,n){if(void 0===i&&(i=void 0),void 0===n&&(n=!1),"string"==typeof e){var r=t.indexOf(e+"=");if(-1!==r){for(var s=r+e.length;s<t.length&&"&"!==t[s];)s++;if(i){var a=t.split(t.slice(r+e.length+"=".length,s));t=s===t.length?t+=i:a[0]+i+a[1]}else if(n){var o=t.slice(0,r+e.length+"=".length),l=t.slice(s,t.length),u=t.slice(r+e.length+"=".length,s);t=s===t.length?o+encodeURIComponent(u):o+encodeURIComponent(u)+l}}}else console.warn("The parameter provided is not a string.",typeof e);return t},i._playAds=function(){if(this._isAdPlaying=!0,this._canPlayAds=!1,this._currentURL=this._modifyAdParam(this._currentURL,"correlator",Date.now().toString()),this._adsParamsToEncode.length<this.ADS_PARAMS_MAX_LENGTH){for(var t=0;t<this._adsParamsToEncode.length;t++)console.log("AD PARAM TO ENCODE: ",this._adsParamsToEncode[t]),this._currentURL=this._modifyAdParam(this._currentURL,this._adsParamsToEncode[t],void 0,!0);console.log("CURRENT AD URL AFTER PARAMS ENCODING: ",this._currentURL)}else console.warn("Maximum amount of ads parameters to encode is reached.");this._adsDiv.style.display="inherit",this._rmp.loadAds(this._currentURL)},i._checkSkippedAdsByResumedPosition=function(t){if(void 0!==t&&t>0&&this._adType===zi.VMAP&&null!==this._vmapParser)for(var e=!1,i=0;!e&&i<this._vmapParser.getAdBreaks().length;)t<this._vmapParser.getAdBreaks()[i].timeOffset?e=!0:this._vmapParser.getAdBreaks()[i].executed||(this._vmapParser.getAdBreaks()[i].executed=!0,this._adBreakIndex++),i++},i._scheduleAds=function(t){if(this._adType===zi.VMAP&&null!==this._vmapParser)for(var e=!1,i=this._adBreakIndex;!e&&i<this._vmapParser.getAdBreaks().length;)t>=this._vmapParser.getAdBreaks()[i].timeOffset?(e=!0,this._currentURL=this._vmapParser.getAdBreaks()[i].uri,this._lastTimeOffset=i>0?this._vmapParser.getAdBreaks()[i-1].timeOffset:0,this._adBreakIndex++,this.trigger(new w(N.AD_START,{}))):e=!0,i++},i._executeCallbacks=function(t){if(this._callbacks.has(t.type)){var e=this._callbacks.get(t.type);void 0!==e&&e.forEach((function(e){e(t)}))}},i.init=function(t,e){this._adType=e,this.trigger(new w(N.AD_LIBRARY_CREATING,{})),this._libraryLoaded||(this._loadRMPLibrary(),this._wireAdEvents(),this.trigger(new w(N.AD_LIBRARY_CREATED,{}))),this._adType===zi.VMAP&&null!==t&&(this._vmapParser=new Qi(t),this.trigger(new w(N.AD_PODS_INFO,{adPodsInfo:this._vmapParser.getAdPodsInfo()})))},i.destroy=function(){this._rmp=null,this._callbacks=new Map,this._vmapParser=null,this._adURL="",this._adType=zi.NONE,this._currentURL="",this._prerolls=new Array,this._adPodInfo=null},i.hasPreroll=function(){return null!==this._vmapParser&&this._vmapParser.hasPreroll()},i.isAdPlaying=function(){return this._isAdPlaying},i.play=function(){null!==this._rmp&&this._rmp.play()},i.pause=function(){null!==this._rmp&&this._rmp.pause()},i.skip=function(){null!==this._rmp&&this._rmp.getAdSkippableState()&&this._rmp.skipAd()},i.getAdTitle=function(){return null!==this._rmp?this._rmp.getAdTitle():""},i.getAdDuration=function(){return null!==this._rmp?this._rmp.getAdDuration():-1},i.getAdRemainingTime=function(){return null!==this._rmp?this._rmp.getAdRemainingTime():-1},i.getMute=function(){return null!==this._rmp&&this._rmp.getMute()},i.getVolume=function(){return null!==this._rmp?this._rmp.getVolume():-1},i.setMute=function(t){null!==this._rmp&&this._rmp.setMute(t)},i.getAdBreaks=function(){return null!==this._vmapParser?this._vmapParser.getAdBreaks():new Array},i.setVolume=function(t){null!==this._rmp&&this._rmp.setVolume(t)},i.setVideoEngine=function(t){},i.addEventListener=function(t,e){var i,n;this._callbacks.has(t)?void 0!==this._callbacks.get(t)?null==(i=this._callbacks.get(t))||i.push(e):console.log("Error: the map doesn't contain any entry for that event type"):(this._callbacks.set(t,new Array),void 0!==this._callbacks.get(t)?null==(n=this._callbacks.get(t))||n.push(e):console.log("Error: the map doesn't contain any entry for that event type"))},i.removeEventListener=function(t,e){if(this._callbacks.has(t))if(void 0!==e){var i=this._callbacks.get(t);if(void 0!==i){for(var n=0,r=i.length;n<r;)i[n]===e?i.splice(n,1):++n;i.length>0?this._callbacks.set(t,i):this._callbacks.delete(t)}}else this._callbacks.delete(t)},i.checkInitialAds=function(){this._adType===zi.VAST?(this._currentURL=this._adURL,this.trigger(new w(N.AD_START,{}))):this._adType===zi.VMAP&&null!==this._vmapParser&&(this._prerolls=this._vmapParser.getPrerolls(),this._prerolls.length>0&&(this._currentURL=this._prerolls[0].uri,this._lastTimeOffset=0,this._adBreakIndex++),this.trigger(new w(N.AD_START,{})))},i.trigger=function(e){t.prototype.trigger.call(this,e)},i.on=function(t){switch(t.type){case N.AD_LIBRARY_CREATING:case N.AD_LIBRARY_CREATED:case N.AD_LIBRARY_DESTROYED:this._executeCallbacks(t);break;case N.AD_START:this._canPlayAds=!0,this._isPlayerInitialized||this._playAds(),this._executeCallbacks(t);break;case N.AD_PODS_INFO:case N.AD_BLOCK_STARTED:this._executeCallbacks(t);break;case N.AD_BLOCK_END:this._isAdPlaying=!1,this._executeCallbacks(t);break;case N.AD_STARTED:case N.AD_TAG_START_LOADING:case N.AD_LOADED:case N.AD_COMPLETED:case N.AD_DESTROYED:case N.AD_PAUSED:case N.AD_RESUMED:case N.AD_SKIPPED:case N.AD_FIRST_QUARTILE:case N.AD_MID_POINT:case N.AD_THIRD_QUARTILE:case N.AD_IMPRESSION:case N.AD_ERROR:case N.AD_POD_COMPLETED:this._executeCallbacks(t);break;case N.STATE_CHANGED:void 0!==t.data.stateData&&t.data.stateData.newState===W.NONE&&this._canPlayAds&&this._playAds();break;case N.PLAYER_CREATED:this._isPlayerInitialized||this._checkSkippedAdsByResumedPosition(t.data.resumePosition),this._isPlayerInitialized=!0;break;case N.TIME_UPDATE:this._isAdPlaying||void 0!==t.data.currentTime&&this._scheduleAds(t.data.currentTime)}},e}(z);!function(t){t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.RESUME="resume",t.REWIND="rewind",t.SKIP="skip",t.PROGRESS="progress",t.PLAYER_EXPAND="playerExpand",t.PLAYER_COLLAPSE="playerCollapse",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MIDPOINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.TIME_SPENT_VIEWING="timeSpentViewing",t.OTHER_AD_INTERACTION="otherAdInteraction",t.IMPRESSION="impression",t.FULLSCREEN="fullscreen",t.EXIT_FULLSCREEN="exitFullscreen",t.CLICK_THROUGH="clickThrough",t.CLOSE_LINEAR="closeLinear",t.COLLAPSE="collapse",t.CREATIVE_VIEW="creativeView",t.ACCEPT_INVITATION="acceptInvitation",t.AD_EXPAND="adExpand",t.AD_COLLAPSE="adCollapse",t.MINIMIZE="minimize",t.CLOSE="close",t.OVERLAY_VIEW_DURATION="overlayViewDuration"}(Yi||(Yi={}));var zi,Xi=[N.AD_LIBRARY_CREATING,N.AD_LIBRARY_CREATED,N.AD_LIBRARY_DESTROYED,N.AD_START,N.AD_PODS_INFO,N.AD_BLOCK_STARTED,N.AD_BLOCK_END,N.AD_STARTED,N.AD_TAG_START_LOADING,N.AD_LOADED,N.AD_COMPLETED,N.AD_DESTROYED,N.AD_PAUSED,N.AD_RESUMED,N.AD_SKIPPED,N.AD_FIRST_QUARTILE,N.AD_MID_POINT,N.AD_THIRD_QUARTILE,N.AD_IMPRESSION,N.AD_ERROR,N.AD_POD_COMPLETED,N.PLAYER_CREATED,N.TIME_UPDATE,N.PLAYING,N.PAUSED],$i=function(t){function e(e,i,n){var r;(r=t.call(this,Xi)||this)._adsTrackingInfo=void 0,r._adBreaks=void 0,r._trackingEvents=void 0,r._firstQuartile=void 0,r._midpoint=void 0,r._thirdQuartile=void 0,r._adBreakIndex=void 0,r._numAdBreaks=void 0,r._contentCurrentTime=void 0,r._currentAdPod=void 0,r._currentAdRemainingTime=void 0,r._isPlayerInitialized=void 0,r._isAdBlockStarted=void 0,r._isAdOnStage=void 0,r._isAdPlaying=void 0,r._sendAdImpression=void 0,r._areQuartilesSent=void 0,r._videoEngine=void 0,r._logger=void 0,r._callbacks=void 0,r._adsTrackingInfo=e,r._adBreaks=new Array,r._trackingEvents=new Array,r._numAdBreaks=r._adsTrackingInfo.avails.length,r._firstQuartile=null,r._midpoint=null,r._thirdQuartile=null,r._contentCurrentTime=0,r._adBreakIndex=0,r._currentAdPod=0,r._currentAdRemainingTime=-1,r._isPlayerInitialized=!1,r._isAdBlockStarted=!1,r._isAdOnStage=!1,r._isAdPlaying=!1,r._sendAdImpression=!1,r._areQuartilesSent=new Array(3).fill(!1),r._videoEngine=null,r._logger=n,r._logger.log("There are "+r._numAdBreaks+" ad breaks.");for(var s=0;s<r._numAdBreaks;s++){var a={executed:!1};a.timeOffset=r._adsTrackingInfo.avails[s].startTimeInSeconds,a.allowMultipleAds="true",a.uri="",a.vastAdData=null,a.breakId=r._adsTrackingInfo.avails[s].availId,a.extensions=[],a.trackingEvents=r._adsTrackingInfo.avails[s].adBreakTrackingEvents,r._adBreaks.push(a),r._trackingEvents.push(new Array);for(var o=function(t){var e=oi()(r);r._trackingEvents[s].push(r._adsTrackingInfo.avails[s].ads[t].trackingEvents.reduce((function(t,i){return t.has(i.eventType)&&e._logger.warn("Repeated tracking event for this ad pod. Event type repeated is ",i.eventType),t.set(i.eventType,i),t}),new Map))},l=0;l<r._adsTrackingInfo.avails[s].ads.length;l++)o(l)}r._logger.log("The ads tracking events from MediaTailor are ",r._trackingEvents);return r._adsTrackingInfo.avails.sort((function(t,e){return t.startTimeInSeconds<e.startTimeInSeconds?-1:t.startTimeInSeconds>e.startTimeInSeconds?1:0})),r._logger.log("Array of avails sortered: ",r._adsTrackingInfo.avails),r._callbacks=new Map,void 0!==i&&r.addEventListener(i.eventType,i.func),r}A()(e,t);var i=e.prototype;return i._executeCallbacks=function(t){if(this._callbacks.has(t.type)){var e=this._callbacks.get(t.type);void 0!==e&&e.forEach((function(e){e(t)}))}},i._replaceMacros=function(t,e,i){var n=/\[CACHEBUSTING\]/gi,r=t;n.test(r)&&(r=r.replace(n,function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}()));var s=/\[ERRORCODE\]/gi;void 0!==e&&s.test(r)&&e>0&&e<1e3&&(r=r.replace(s,e.toString()));var a=/\[CONTENTPLAYHEAD\]/gi;if(a.test(r)&&this._contentCurrentTime>-1){var o=tt(this._contentCurrentTime);r=r.replace(a,Z(o))}var l=/\[ASSETURI\]/gi;return l.test(r)&&"string"==typeof i&&""!==i&&(r=r.replace(l,Z(i))),r},i._makeTrackingRequest=function(t,e){this._logger.log("Making the request for the tracking URL ",t);var i=this._replaceMacros(t,void 0,e),n=this,r=new Image;r.addEventListener("load",(function(){n._logger.log("Ads tracker successfully loaded "+i),r=null})),r.addEventListener("error",(function(t){n._logger.warn("Ads tracker failed loading "+i),r=null})),r.src=i},i._makeErrorRequest=function(t,e){var i=this._replaceMacros(t,e);this._makeTrackingRequest(i)},i._checkSkippedAdsByResumedPosition=function(t){if(this._logger.log("Checking whether there are skipped ads by the selected resume position ",t),void 0!==t&&t>0&&this._numAdBreaks>0)for(var e=!1,i=0;!e&&i<this._numAdBreaks;)t<this._adsTrackingInfo.avails[i].startTimeInSeconds?e=!0:this._adBreaks[i].executed||(this._adBreaks[i].executed=!0,this._adBreakIndex++,this._logger.log("Skipped ad at ",this._adBreaks[i].timeOffset)),i++},i._manageAdBreaks=function(t){this._adBreakIndex<this._adBreaks.length&&t>=this._adBreaks[this._adBreakIndex].timeOffset&&!this._adBreaks[this._adBreakIndex].executed&&(this._isAdBlockStarted?this._isAdOnStage?this._isAdPodCompleted(t):this._isAdPodStarted(t):(this._currentAdPod=0,this.trigger(new w(N.AD_BLOCK_STARTED,{adPodsNumber:this._adsTrackingInfo.avails[this._adBreakIndex].ads.length})),this._isAdBlockStarted=!0))},i._isAdPodStarted=function(t){var e=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds;this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&e<=t&&(this._isAdOnStage=!0,this._sendAdImpression=!0,this.trigger(new w(N.AD_START,{})),this.trigger(new w(N.AD_STARTED,{currentAdPod:this._currentAdPod})))},i._isAdPodCompleted=function(t){var e=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds+this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds;this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&e<=t&&(this._logger.log("The current ad pod "+this._currentAdPod+" is finished."),this._areQuartilesSent.fill(!1),this._currentAdPod++,this._isAdOnStage=!1,this.trigger(new w(N.AD_DESTROYED,{})),this.trigger(new w(N.AD_COMPLETED,{})))},i._findTrackingEvent=function(t){var e=this._trackingEvents[this._adBreakIndex][this._currentAdPod].get(t);return this._logger.log("Found tracking event for "+t+"."),this._logger.log("Data for the tracking event is ",e),void 0!==e?e:null},i._makeBeaconsRequests=function(t){var e=this._findTrackingEvent(t);if(null!==e)for(var i=0;i<e.beaconUrls.length;)this._makeTrackingRequest(e.beaconUrls[i]),i++;else this._logger.warn("There is no tracking event object for the event type ",t)},i.init=function(t,e){e===zi.SSAI&&(this.trigger(new w(N.AD_LIBRARY_CREATING,{})),this.trigger(new w(N.AD_PODS_INFO,{adPodsInfo:this._adBreaks})),this._firstQuartile=this._findTrackingEvent(Yi.FIRST_QUARTILE),this._midpoint=this._findTrackingEvent(Yi.MIDPOINT),this._thirdQuartile=this._findTrackingEvent(Yi.THIRD_QUARTILE))},i.destroy=function(){this._adBreaks=new Array,this._trackingEvents=new Array,this._numAdBreaks=0,this._firstQuartile=null,this._midpoint=null,this._thirdQuartile=null,this._contentCurrentTime=0,this._adBreakIndex=0,this._currentAdPod=0,this._currentAdRemainingTime=-1,this._isPlayerInitialized=!1,this._isAdBlockStarted=!1,this._isAdOnStage=!1,this._isAdPlaying=!1,this._sendAdImpression=!1,this._areQuartilesSent=new Array(3).fill(!1),this._videoEngine=null},i.hasPreroll=function(){return 0===this._adBreaks[0].timeOffset},i.isAdPlaying=function(){return this._isAdOnStage},i.play=function(){null!==this._videoEngine&&this._isAdOnStage&&this._videoEngine.play()},i.pause=function(){null!==this._videoEngine&&this._isAdOnStage&&this._videoEngine.pause()},i.skip=function(){this._logger.warn("Method not implemented.")},i.getAdTitle=function(){return this._adsTrackingInfo&&this._isAdOnStage&&this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length?this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].adTitle:""},i.getAdDuration=function(){return this._adsTrackingInfo&&this._isAdOnStage&&this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length?this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds:-1},i.getAdRemainingTime=function(){return this._isAdOnStage?this._currentAdRemainingTime:-1},i.getMute=function(){return!(null===this._videoEngine||!this._isAdOnStage)&&this._videoEngine.getMute()},i.getVolume=function(){return null!==this._videoEngine?this._videoEngine.getVolume():-1},i.getAdBreaks=function(){return this._adBreaks},i.setMute=function(t){null!==this._videoEngine&&this._isAdOnStage&&(t&&this.getVolume()>0?this._makeBeaconsRequests(Yi.MUTE):t||0===this.getVolume()||this._makeBeaconsRequests(Yi.UNMUTE),this._videoEngine.setMute(t))},i.setVolume=function(t){null!==this._videoEngine&&this._isAdOnStage&&(0===t?this._makeBeaconsRequests(Yi.MUTE):t>0&&this._makeBeaconsRequests(Yi.UNMUTE),this._videoEngine.setVolume(t))},i.setVideoEngine=function(t){this._videoEngine=t},i.addEventListener=function(t,e){var i,n;this._callbacks.has(t)?void 0!==this._callbacks.get(t)?null==(i=this._callbacks.get(t))||i.push(e):this._logger.error("The map doesn't contain any entry for that event type"):(this._callbacks.set(t,new Array),void 0!==this._callbacks.get(t)?null==(n=this._callbacks.get(t))||n.push(e):this._logger.error("The map doesn't contain any entry for that event type"))},i.removeEventListener=function(t,e){if(this._callbacks.has(t))if(void 0!==e){var i=this._callbacks.get(t);if(void 0!==i){for(var n=0,r=i.length;n<r;)i[n]===e?i.splice(n,1):++n;i.length>0?this._callbacks.set(t,i):this._callbacks.delete(t)}}else this._callbacks.delete(t)},i.checkInitialAds=function(){this._logger.warn("Method not implemented.")},i.trigger=function(e){t.prototype.trigger.call(this,e)},i.on=function(t){switch(t.type){case N.AD_LIBRARY_CREATING:case N.AD_LIBRARY_CREATED:case N.AD_LIBRARY_DESTROYED:case N.AD_START:case N.AD_PODS_INFO:case N.AD_BLOCK_STARTED:case N.AD_BLOCK_END:this._executeCallbacks(t);break;case N.AD_STARTED:this._executeCallbacks(t),this._currentAdRemainingTime=this.getAdDuration();break;case N.AD_TAG_START_LOADING:case N.AD_LOADED:this._executeCallbacks(t);break;case N.AD_COMPLETED:this._currentAdPod===this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&(this._isAdBlockStarted=!1,this._adBreaks[this._adBreakIndex].executed=!0,this._adBreakIndex++,this.trigger(new w(N.AD_BLOCK_END,{}))),this._executeCallbacks(t);break;case N.AD_DESTROYED:case N.AD_PAUSED:case N.AD_RESUMED:case N.AD_SKIPPED:case N.AD_FIRST_QUARTILE:case N.AD_MID_POINT:case N.AD_THIRD_QUARTILE:case N.AD_IMPRESSION:case N.AD_ERROR:case N.AD_POD_COMPLETED:this._executeCallbacks(t);break;case N.PLAYER_CREATED:this._isPlayerInitialized||this._checkSkippedAdsByResumedPosition(t.data.resumePosition),this._isPlayerInitialized=!0;break;case N.TIME_UPDATE:if(void 0!==t.data.currentTime){if(this._isAdOnStage){if(this._adsTrackingInfo&&this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length){var e=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds+this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds-t.data.currentTime;this._currentAdRemainingTime=e<0?0:e}this._sendAdImpression&&(this._isAdPlaying=!0,this._sendAdImpression=!1,this._makeBeaconsRequests(Yi.IMPRESSION),this._makeBeaconsRequests(Yi.START),this.trigger(new w(N.AD_IMPRESSION,{}))),null!==this._firstQuartile&&!this._areQuartilesSent[0]&&void 0!==this._firstQuartile.startTimeInSeconds&&t.data.currentTime>=this._firstQuartile.startTimeInSeconds&&(this._areQuartilesSent[0]=!0,this._makeBeaconsRequests(Yi.FIRST_QUARTILE),this.trigger(new w(N.AD_FIRST_QUARTILE,{quartileTime:this._firstQuartile.startTimeInSeconds}))),null!==this._midpoint&&!this._areQuartilesSent[1]&&void 0!==this._midpoint.startTimeInSeconds&&t.data.currentTime>=this._midpoint.startTimeInSeconds&&(this._areQuartilesSent[1]=!0,this._makeBeaconsRequests(Yi.MIDPOINT),this.trigger(new w(N.AD_MID_POINT,{quartileTime:this._midpoint.startTimeInSeconds}))),null!==this._thirdQuartile&&!this._areQuartilesSent[2]&&void 0!==this._thirdQuartile.startTimeInSeconds&&t.data.currentTime>=this._thirdQuartile.startTimeInSeconds&&(this._areQuartilesSent[2]=!0,this._makeBeaconsRequests(Yi.THIRD_QUARTILE),this.trigger(new w(N.AD_THIRD_QUARTILE,{quartileTime:this._thirdQuartile.startTimeInSeconds})))}else this._contentCurrentTime=t.data.currentTime;this._manageAdBreaks(t.data.currentTime)}break;case N.PLAYING:this._isAdOnStage&&!this._isAdPlaying&&(this._isAdPlaying=!0,this._makeBeaconsRequests(Yi.RESUME),this.trigger(new w(N.AD_RESUMED,{})));break;case N.PAUSED:this._isAdOnStage&&this._isAdPlaying&&(this._isAdPlaying=!1,this._makeBeaconsRequests(Yi.PAUSE),this.trigger(new w(N.AD_PAUSED,{})))}},e}(z);!function(t){t.NONE="none",t.VAST="vast",t.VMAP="vmap",t.PLAYLIST="playlist",t.SSAI="ssai"}(zi||(zi={}));var Ji,Zi=function(){function t(t,e,i,n,r,s,a){this._ads=void 0,this._playerDiv=void 0,this._adURL=void 0,this._isSSAI=void 0,this._adType=void 0,this._adResponse=void 0,this._initEvent=void 0,this._adsTrackingInfo=void 0,this._videoEngine=void 0,this._logger=void 0,this._adsParamsToEncode=void 0,this._ads=null,this._playerDiv=t,this._adURL=e,this._isSSAI=i,this._adType=zi.NONE,this._adResponse=null,this._initEvent=n,this._adsTrackingInfo=r,this._videoEngine=null,this._logger=s,this._adsParamsToEncode=a}var e=t.prototype;return e._checkAdType=function(t){var e=this;return new Promise((function(i,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){null!=r?200===r.status?(e._adResponse=r.responseXML,r.responseText.toLowerCase().includes("xmlns:vmap")?e._adType=zi.VMAP:r.responseText.includes("<Playlist>")?e._adType=zi.PLAYLIST:r.responseText.includes("VAST")&&(e._adType=zi.VAST),i()):(e._logger.log("Response has a wrong status while trying to fetchthe manifest for retrieving the content type",r.status),n(r.status)):n()},r.send()}))},e.init=function(){var t=g()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this._playerDiv){t.next=4;break}this._logger.error("The player div does not exist. Please, provide a correct div element."),t.next=13;break;case 4:if(!this._isSSAI){t.next=9;break}this._logger.log("Ads tracking URL: ",this._adURL),void 0!==this._adsTrackingInfo&&(this._ads=new $i(this._adsTrackingInfo,this._initEvent,this._logger),this._adType=zi.SSAI),t.next=12;break;case 9:return null===this._ads&&(this._ads=new qi(this._playerDiv,this._adURL,this._initEvent,this._adsParamsToEncode)),t.next=12,this._checkAdType(this._adURL);case 12:null!==this._ads&&this._ads.init(this._adResponse,this._adType);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.destroy=function(){this._logger.log("Destroying ads manager."),this._adURL="",this._adType=zi.NONE,this._adResponse=null,this._initEvent=void 0,null!==this._ads&&(this._ads.destroy(),this._ads=null)},e.registerPlugin=function(t){this._ads=t},e.getAdType=function(){return this._adType},e.hasPreroll=function(){return this._adType===zi.VMAP&&null!==this._ads&&this._ads.hasPreroll()},e.isAdPlaying=function(){return null!==this._ads&&this._ads.isAdPlaying()},e.play=function(){null!==this._ads&&this._ads.play()},e.pause=function(){null!==this._ads&&this._ads.pause()},e.skip=function(){null!==this._ads&&this._ads.skip()},e.getAdTitle=function(){return null!==this._ads?this._ads.getAdTitle():""},e.getAdDuration=function(){return null!==this._ads?this._ads.getAdDuration():-1},e.getAdRemainingTime=function(){return null!==this._ads?this._ads.getAdRemainingTime():-1},e.getMute=function(){return null!==this._ads&&this._ads.getMute()},e.getVolume=function(){return null!==this._ads?this._ads.getVolume():-1},e.getSSAIAdsInfo=function(){return this._adsTrackingInfo},e.getAdBreaks=function(){return null!==this._ads?this._ads.getAdBreaks():new Array},e.setMute=function(t){null!==this._ads&&this._ads.setMute(t)},e.setVolume=function(t){null!==this._ads&&this._ads.setVolume(t)},e.setVideoEngine=function(t){this._videoEngine=t,null!==this._ads&&this._ads.setVideoEngine(this._videoEngine)},e.checkInitialAds=function(){null===this._ads||this._adType!==zi.VAST&&!this.hasPreroll()||this._ads.checkInitialAds()},e.addEventListener=function(t,e){null!==this._ads&&this._ads.addEventListener(t,e)},e.removeEventListener=function(t,e){null!==this._ads&&this._ads.removeEventListener(t,e)},t}(),tn=function(){function t(){this._startMs=void 0,this._currentMs=void 0,this._getTimestamp=function(){var t=new Date;return this._currentMs=36e6*t.getHours(),this._currentMs+=6e4*t.getMinutes(),this._currentMs+=1e3*t.getSeconds(),this._currentMs+=t.getMilliseconds(),this._t=this._currentMs-this._startMs,this.miliseconds=this._t%1e3,this.seconds=Math.floor(this._t/1e3%60),this.minutes=Math.floor(this._t/1e3/60%60),this.hours=Math.floor(this._t/36e5%24),this.hours+":"+this.minutes+":"+this.seconds+":"+this.miliseconds},this._currentMs=-1;var t=new Date;this._startMs=36e6*t.getHours(),this._startMs+=6e4*t.getMinutes(),this._startMs+=1e3*t.getSeconds(),this._startMs+=t.getMilliseconds()}var e=t.prototype;return e.error=function(t,e){null==e||null==e?console.log("%c Nexplayer ERROR ("+this._getTimestamp()+") "+t,"background-color:black;color:#ff2d2d"):(console.log("%c Nexplayer ERROR ("+this._getTimestamp()+") "+t,"background-color:black;color:#ff2d2d"),console.log(e))},e.warn=function(t,e){null==e||null==e?console.log("%c Nexplayer WARN ("+this._getTimestamp()+") "+t,"background-color:black;color:#f99111"):(console.log("%c Nexplayer WARN ("+this._getTimestamp()+") "+t,"background-color:black;color:#f99111"),console.log(e))},e.info=function(t,e){null==e||null==e?console.log("%c Nexplayer INFO ("+this._getTimestamp()+") "+t,"background-color:black;color:#569fff"):(console.log("%c Nexplayer INFO ("+this._getTimestamp()+") "+t,"background-color:black;color:#569fff"),console.log(e))},e.debug=function(t,e){null==e||null==e?console.log("%c Nexplayer DEBUG ("+this._getTimestamp()+") "+t,"background-color:black;color:#ffff19"):(console.log("%c Nexplayer DEBUG ("+this._getTimestamp()+") "+t,"background-color:black;color:#ffff19"),console.log(e))},e.log=function(t,e){null==e||null==e?console.log("%c Nexplayer LOG ("+this._getTimestamp()+") "+t,"background-color:black;color:#83ff4f"):(console.log("%c Nexplayer LOG ("+this._getTimestamp()+") "+t,"background-color:black;black;color:#83ff4f"),console.log(e))},t}(),en=function(){function t(t,e){this._type=void 0,this._data=void 0,this._type=t,this._data=e}return _()(t,[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}}]),t}();!function(t){t.KEY_SYSTEM_NOT_SUPPORTED="keySytemNotSupported",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.STREAMING_PROTOCOL_NOT_SUPPORTED="streamingProtocolNotSupported",t.SUBTITLE_NOT_SUPPORTED="subtitleNotSupported",t.THUMBNAIL_CANVAS_ERROR="thumbnailCanvasError",t.THUMBNAIL_NOT_FOUND="thumbnailNotFound",t.THUMBNAIL_VTT_ERROR="thumbnailVttError",t.INVALID_LICENSE="invalidLicense"}(Ji||(Ji={}));var nn=function(){function t(t,e,i,n,r){this._thumbnail=void 0,this._height=void 0,this._width=void 0,this._startTime=void 0,this._finalTime=void 0,this._thumbnail=t,this._height=e,this._width=i,this._startTime=n,this._finalTime=r}return _()(t,[{key:"thumbnail",get:function(){return this._thumbnail},set:function(t){this._thumbnail=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"finalTime",get:function(){return this._finalTime},set:function(t){this._finalTime=t}}]),t}(),rn=[N.HOVERING,N.SEEKED,N.SEEKING],sn=function(t){function e(e,i,n){var r;return(r=t.call(this,rn)||this)._currentTime=void 0,r._stepTime=void 0,r._thumbnails=void 0,r._thumbnailImage=void 0,r._urlVideo=void 0,r._video=void 0,r.logger=void 0,r.videoEngine=void 0,r._currentTime=0,r._stepTime=0,r._thumbnails=[],r._thumbnailImage=null,r._urlVideo=i,r._video=null,r.logger=e,r.videoEngine=n,r.init(),r}A()(e,t);var i=e.prototype;return i.init=function(){this._video=this.videoEngine.getThumbnailVideo(),null!=this._video&&(this._video.muted=!0,this._video.autoplay=!0,this._video.setAttribute("playsinline",""),this._video.crossOrigin&&(this._video.crossOrigin="anonymous"),this._urlVideo?(this._video.src=this._urlVideo,this._video.play()):this._video=null)},i.getThumbnailAt=function(t){return null},i.getThumbnails=function(){return this._thumbnails},i.destroy=function(){this._currentTime=0,this._thumbnails=[],this._thumbnailImage=null,this._urlVideo=null,this._video=null},i.loadThumbnails=function(){if(null!==this._video){var t=document.createElement("canvas"),e=t.getContext("2d");if(null!==e&&null!==this._video){e.drawImage(this._video,0,0,300,150);var i=new nn(t,300,150,this._currentTime,this._currentTime+5);this.trigger(new w(N.THUMBNAIL_REPLY,{frame:i}))}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when creating image canvas.",code:424})}))}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when creating secondary video.",code:424})}))},i.on=function(t){switch(t.type){case N.HOVERING:case N.SEEKED:break;case N.SEEKING:if(null!==this._video&&t.data.currentTime){var e=this;this._currentTime=t.data.currentTime,this._video.currentTime=t.data.currentTime,this._video.addEventListener("seeked",(function(){e.loadThumbnails()}))}}},e}(z),an=(i(136),i(137),[N.HOVERING,N.SEEKED,N.SEEKING,N.THUMBNAIL_LOADED,N.THUMBNAIL_REPLY]);function on(t,e){return t._startTime<e._startTime?-1:t._startTime>e._startTime?1:0}var ln=function(t){function e(e,i,n){var r;return(r=t.call(this,an)||this)._chunkLimit=void 0,r._chunkTotal=void 0,r._chunksLoaded=void 0,r._chunksToLoad=void 0,r._chunksToRemove=void 0,r._currentChunk=void 0,r._currentMaxTime=void 0,r._currentMinTime=void 0,r._imagesLoaded=void 0,r._loading=void 0,r._maxTime=void 0,r._minTime=void 0,r._thumbCanvas=void 0,r._thumbnails=void 0,r._thumbnailImage=void 0,r._thumbnailTimes=void 0,r.logger=void 0,r._chunkLimit=1,r._chunkTotal=1,r._chunksLoaded=[],r._chunksToLoad=[],r._chunksToRemove=[],r._currentChunk=0,r._currentMaxTime=Number.NEGATIVE_INFINITY,r._currentMinTime=Number.POSITIVE_INFINITY,r._imagesLoaded=0,r._loading=!1,r._maxTime=Number.NEGATIVE_INFINITY,r._minTime=Number.POSITIVE_INFINITY,r._thumbCanvas=n,r._thumbnails=[],r._thumbnailImage=null,r._thumbnailTimes=i,r.logger=e,r.init(),r}A()(e,t);var i=e.prototype;return i.init=function(){this._minTime=this._thumbnailTimes[0][0],this._maxTime=this._thumbnailTimes[this._thumbnailTimes.length-1][1],this._calculateChunking(),this._chunkTimesArray(),this.loadThumbnails(0,!0)},i.destroy=function(){this._chunksLoaded=[],this._chunksToLoad=[],this._chunksToRemove=[],this._currentChunk=0,this._imagesLoaded=0,this._loading=!1,this._currentMaxTime=Number.NEGATIVE_INFINITY,this._currentMinTime=Number.POSITIVE_INFINITY,this._thumbnails=[],this._thumbnailImage=null,this._thumbnailTimes=null},i.getThumbnailAt=function(t){var e=this,i=null;if(this._thumbnails.sort(on),t<this._minTime||t>this._maxTime)return null;i=this._searchThumbnail(t,0,this._thumbnails.length-1);var n=this;return new Promise((function(r){null!==i?(n.trigger(new w(N.THUMBNAIL_REPLY,{frame:i})),n.loadThumbnails(t),r(i)):null===i&&t>=e._minTime&&t<=e._maxTime&&(n._chunkTotal>1&&n.loadThumbnails(t),n._thumbCanvas.addEventListener(N.THUMBNAIL_LOADED,(function(e){null!==(i=e.detail)&&i.startTime<=t&&i.finalTime>=t&&(n._thumbCanvas.removeEventListener(N.THUMBNAIL_LOADED,this),n.trigger(new w(N.THUMBNAIL_LOADED,{frame:i})),r(i))})))}))},i.getThumbnails=function(){return this._thumbnails.sort(on),this._thumbnails},i.loadThumbnails=function(t,e){void 0===e&&(e=!1);var i=this._currentChunk;if((t<this._currentMinTime||t>this._currentMaxTime)&&(this._currentChunk=this._searchChunk(t,0,this._thumbnailTimes.length-1)),(i!==this._currentChunk||e)&&this._currentChunk>=0&&!this._loading){if(this._fetchChunks(),!e&&this._chunksLoaded.length>0){var n=this._thumbnailTimes[this._currentChunk].length-1;this._currentMinTime=this._thumbnailTimes[this._currentChunk][0][0],this._currentMaxTime=this._thumbnailTimes[this._currentChunk][n][1]}this._chunksToLoad.length>0&&(this.logger.log("#########################"),this.logger.log("# LOAD CHUNK ("+this._chunksToLoad[0]+")"),this._imagesLoaded=0,this._thumbnailImage=[],this._loading=!0,this._loadChunk(0,0,t,e))}else i!==this._currentChunk&&this._currentChunk>=0&&(this._chunksToLoad.includes(this._currentChunk)||this._chunksToLoad.push(this._currentChunk))},i.on=function(t){switch(t.type){case N.HOVERING:break;case N.SEEKED:case N.SEEKING:t.type,N.SEEKING,void 0!==t.data.currentTime&&this.getThumbnailAt(t.data.currentTime)}},i._calculateChunking=function(){this._chunkLimit=Math.round(Math.log10(this._thumbnailTimes.length+10)),this._chunkTotal=Math.ceil(this._thumbnailTimes.length/20)},i._chunkTimesArray=function(){for(var t=this._thumbnailTimes.length/this._chunkTotal,e=[];this._thumbnailTimes.length>0;)e.push(this._thumbnailTimes.splice(0,t));this._thumbnailTimes=e,this._currentChunk>this._thumbnailTimes.length?this._currentChunk=this._thumbnailTimes.length-1:this._currentChunk<0&&(this._currentChunk=0);var i=this._thumbnailTimes[this._currentChunk].length-1;this._currentMinTime=this._thumbnailTimes[this._currentChunk][0][0],this._currentMaxTime=this._thumbnailTimes[this._currentChunk][i][1]},i._fetchChunks=function(){var t=this,e=this._chunkLimit-1,i=this._chunkLimit-1,n=this._currentChunk,r=this._thumbnailTimes.length-this._currentChunk-1;(e=i=Math.trunc(this._chunkLimit/2))+i==this._chunkLimit&&(n>e?e-=1:r>i&&(i-=1));var s=e-n,a=i-r;s>0&&(i=i+s<=r?i+s:r,e=n),a>0&&(e=e+a<=n?e+a:n,i=r);for(var o=e;o>0;)this._chunksToLoad.includes(this._currentChunk-o)||(this._chunksToLoad.length==this._chunkLimit&&this._chunksToLoad.shift(),this._chunksToLoad.push(this._currentChunk-o)),o-=1;this._chunksToLoad.includes(this._currentChunk)||(this._chunksToLoad.length==this._chunkLimit&&this._chunksToLoad.shift(),this._chunksToLoad.push(this._currentChunk));for(o=1;i>=o;)this._chunksToLoad.includes(this._currentChunk+o)||(this._chunksToLoad.length==this._chunkLimit&&this._chunksToLoad.shift(),this._chunksToLoad.push(this._currentChunk+o)),o+=1;this._chunksLoaded=this._chunksLoaded.filter((function(t,e,i){return i.indexOf(t)==e})),this._removeChunks(),this._chunksToLoad=this._chunksToLoad.filter((function(e){return!t._chunksLoaded.includes(e)})),this._chunksLoaded.sort((function(t,e){return t-e})),this._chunksToLoad.sort((function(t,e){return t-e}))},i._loadChunk=function(t,e,i,n){var r=this;null===this._thumbnailImage&&(this._thumbnailImage=[]),this._thumbnailImage.push(document.createElement("img")),this._thumbnailImage[e].addEventListener("load",(function(){var s=null,a=document.createElement("canvas"),o=a.getContext("2d");try{if(null!==o){s=r._thumbnailTimes[r._chunksToLoad[t]][e],o.drawImage(r._thumbnailImage[e],0,0,300,150);var l=new nn(a,150,300,s[0],s[1]);r._thumbCanvas.dispatchEvent(new CustomEvent(N.THUMBNAIL_LOADED,{detail:l})),r._thumbnails.push(l),r._thumbnailImage[e]=null,e<r._thumbnailTimes[r._chunksToLoad[t]].length&&(r._imagesLoaded+=1,r._imagesLoaded===r._thumbnailTimes[r._chunksToLoad[t]].length&&(r._thumbnailImage=[],r._imagesLoaded=0,r._chunksLoaded.length<r._chunkTotal-1?r._chunksLoaded.includes(r._chunksToLoad[t])||(r._chunksLoaded.push(r._chunksToLoad[t]),void 0===r._chunksToLoad[t+1]||r._chunksLoaded.includes(r._chunksToLoad[t+1])?r._loading=!1:(r.logger.log("#########################"),r.logger.log("# LOAD CHUNK ("+r._chunksToLoad[t+1]+")"),r._loadChunk(t+1,0,i,n))):r._chunksLoaded.includes(t)||(r._chunksLoaded.push(r._chunksToLoad[t]),r._chunksLoaded.sort((function(t,e){return t-e})),r._thumbnails.sort(on),r.logger.log("#########################"),r.logger.log("# STOP CHUNKING"),r.logger.log("# CHUNKS TOTAL: "+r._chunkTotal),r.logger.log("# CHUNKS LOADED: "+r._chunksLoaded.length),r.logger.log("# ["+r._chunksLoaded+"]"),r.logger.log("#########################"),r._chunksToLoad=[])))}else r.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when creating image canvas.",code:424})}))}catch(t){}})),this._thumbnailImage[e].addEventListener("error",(function(){r.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:'Error when loading "'+r._thumbnailImage[e].src+'". Please, check the provided URL or try again.',code:404})})),r._thumbnailImage[e]=null,e<r._thumbnailTimes[r._chunksToLoad[t]].length&&(r._imagesLoaded+=1,r._imagesLoaded===r._thumbnailTimes[r._chunksToLoad[t]].length&&(r._thumbnailImage=[],r._imagesLoaded=0,r._chunksLoaded.length<r._chunkTotal-1?r._chunksLoaded.includes(r._chunksToLoad[t])||(r._chunksLoaded.push(r._chunksToLoad[t]),void 0===r._chunksToLoad[t+1]||r._chunksLoaded.includes(r._chunksToLoad[t+1])?r._loading=!1:(r.logger.log("#########################"),r.logger.log("# LOAD CHUNK ("+r._chunksToLoad[t+1]+")"),r._loadChunk(t+1,0,i,n))):r._chunksLoaded.includes(t)||(r._chunksLoaded.push(r._chunksToLoad[t]),r._chunksLoaded.sort((function(t,e){return t-e})),r._thumbnails.sort(on),r.logger.log("#########################"),r.logger.log("# STOP CHUNKING"),r.logger.log("# CHUNKS TOTAL: "+r._chunkTotal),r.logger.log("# CHUNKS LOADED: "+r._chunksLoaded.length),r.logger.log("# ["+r._chunksLoaded+"]"),r.logger.log("#########################"),r._chunksToLoad=[])))}),{once:!0}),t<this._chunkTotal&&(this._thumbnailImage[e].src=this._thumbnailTimes[this._chunksToLoad[t]][e][2],e<this._thumbnailTimes[this._chunksToLoad[t]].length-1&&this._loadChunk(t,e+1,i,n))},i._removeChunks=function(){var t=this;this._chunksToRemove=this._chunksLoaded.filter((function(e){return!t._chunksToLoad.includes(e)}));for(var e=0;e<this._chunksToRemove.length;e++){for(var i=this._thumbnailTimes[this._chunksToRemove[e]],n=i[0][0],r=i[i.length-1][1],s=this._thumbnails.length-1;s>=0;s--)this._thumbnails[s].startTime>=n&&this._thumbnails[s].finalTime<=r&&this._thumbnails.splice(s,1);var a=this._chunksLoaded.indexOf(this._chunksToRemove[e]);a>-1&&this._chunksLoaded.splice(a,1)}},i._searchChunk=function(t,e,i){this._thumbnailTimes.length;if(e>i||t>this._maxTime)return-1;var n=Math.floor((e+i)/2),r=this._thumbnailTimes[n];return t>=r[0][0]&&t<=r[r.length-1][1]?n:(t<r[0][0]?i=n-1:e=n+1,this._searchChunk(t,e,i))},i._searchThumbnail=function(t,e,i){if(e>i||t>this._thumbnails[this._thumbnails.length-1].finalTime)return null;var n=Math.floor((e+i)/2);return void 0!==this._thumbnails[n]&&t>=this._thumbnails[n].startTime&&t<=this._thumbnails[n].finalTime?this._thumbnails[n]:(t<this._thumbnails[n].finalTime?i=n-1:e=n+1,this._searchThumbnail(t,e,i))},e}(z),un=[N.HOVERING,N.SEEKED,N.SEEKING],cn=function(t){function e(e,i,n){var r;return(r=t.call(this,un)||this)._thumbnails=void 0,r._thumbnailData=void 0,r._thumbnailImage=void 0,r._urlImage=void 0,r.logger=void 0,r._thumbnails=[],r._thumbnailData=i,r._thumbnailImage=null,r._urlImage=n,r.logger=e,r.init(),r}A()(e,t);var i=e.prototype;return i.init=function(){this._fetchImg()},i.destroy=function(){this._thumbnailData=null,this._thumbnailImage=null,this._thumbnails=[],this._urlImage=null},i.getThumbnailAt=function(t){var e=this._searchThumbnail(t);return null===e?null:new Promise((function(t){null!==e&&t(e)}))},i.getThumbnails=function(){return this._thumbnails},i.loadThumbnails=function(){for(var t=0;t<this._thumbnailData.length;t++){var e=this._thumbnailData[t],i=document.createElement("canvas"),n=i.getContext("2d");if(null!==this._thumbnailImage&&null!==n){var r=e[2],s=e[3],a=e[4],o=e[5];n.drawImage(this._thumbnailImage,r,s,a,o,0,0,300,150),this._thumbnails.push(new nn(i,150,300,e[0],e[1]))}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when creating image canvas.",code:424})}))}},i.on=function(t){switch(t.type){case N.HOVERING:break;case N.SEEKED:case N.SEEKING:if(t.type,N.SEEKING,void 0!==t.data.currentTime&&this._thumbnails.length>0){var e,i=this;null==(e=this.getThumbnailAt(t.data.currentTime))||e.then((function(t){null!==t&&(console.log(t),i.trigger(new w(N.THUMBNAIL_REPLY,{frame:t})))}))}}},i._fetchImg=function(){if("string"==typeof this._urlImage){var t=this;this._thumbnailImage=new Image,this._thumbnailImage.onload=function(){t.loadThumbnails()},this._thumbnailImage.onerror=function(){t.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when loading image. Please, check the provided URL or try again.",code:424})}))},this._thumbnailImage.src=this._urlImage}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Error when loading image. Provided source is not a string.",code:422})}))},i._searchThumbnail=function(t){for(var e=0;e<this._thumbnails.length;e++){var i=this._thumbnails[e];if(i.startTime<=t&&i.finalTime>=t)return i}return this._thumbnails.length>0?this._thumbnails[0].startTime>t?this._thumbnails[0]:this._thumbnails[this._thumbnails.length-1]:null},e}(z),dn=[N.ENDED,N.ERROR,N.PLAY,N.SEEKED,N.SEEKING,N.THUMBNAIL_DATA,N.THUMBNAIL_LOADED,N.THUMBNAIL_REPLY],hn=function(t){function e(e,i,n,r){var s;return(s=t.call(this,dn)||this)._displayThumb=void 0,s._regexPos=void 0,s._thumbCanvas=void 0,s._thumbData=void 0,s._thumbManager=void 0,s._thumbType=void 0,s._urlImg=void 0,s._urlSrc=void 0,s._urlVtt=void 0,s._videoEnd=void 0,s._videoStart=void 0,s.logger=void 0,s.videoEngine=void 0,s._displayThumb=!0,s._regexPos=0,s._thumbCanvas=e.canvas,s._thumbData=[],s._thumbManager=null,s._thumbType=null,s._urlImg=e.urlImg,s._urlSrc=n,s._urlVtt=e.urlVtt,s._videoEnd=!1,s._videoStart=!1,s.logger=i,s.videoEngine=r,s._detectThubmnailType(),s}A()(e,t);var i=e.prototype;return i.destroy=function(){var t;null==(t=this._thumbManager)||t.destroy(),this._displayThumb=!1,this._regexPos=0,this._thumbCanvas=void 0,this._thumbData=[],this._thumbManager=null,this._thumbType=null,this._urlImg=void 0,this._urlSrc=void 0,this._urlVtt=void 0,this._videoEnd=!1,this._videoStart=!1},i.getThumbnailAt=function(t){return null!==this._thumbManager?this._thumbManager.getThumbnailAt(t):null},i.getThumbnails=function(){return null!==this._thumbManager?this._thumbManager.getThumbnails():null},i.on=function(t){switch(t.type){case N.ENDED:if(void 0!==this._thumbCanvas){var e=this._thumbCanvas.getContext("2d");if(null!==e){var i=this._thumbCanvas.width,n=this._thumbCanvas.height;e.clearRect(0,0,i,n)}}this._displayThumb=!1,this._videoEnd=!0,this._videoStart=!1;break;case N.PLAY:this._videoEnd&&(this._displayThumb=!1,this._videoEnd=!1,this._videoStart=!0);break;case N.SEEKED:this._videoEnd&&!this._videoStart?(this._displayThumb=!0,this._videoEnd=!1):!this._videoEnd&&this._videoStart?this._videoStart=!1:this._displayThumb=!0;break;case N.THUMBNAIL_LOADED:t.type,N.THUMBNAIL_LOADED;case N.THUMBNAIL_REPLY:if(t.type,N.THUMBNAIL_REPLY,void 0!==this._thumbCanvas&&void 0!==t.data.frame){var r=this._thumbCanvas.getContext("2d");if(null!==r&&this._displayThumb){i=t.data.frame.width,n=t.data.frame.height;r.clearRect(0,0,i,n),r.drawImage(t.data.frame.thumbnail,0,0)}}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"[Thumbnail controller]: Unable to load thumbnail.",code:424})}));break;case N.THUMBNAIL_DATA:this._loadThumbnailManager();break;case N.ERROR:var s,a;if(void 0!==t.data.errorData)if("object"==typeof(null==(s=t.data.errorData)?void 0:s.data.message))this.logger.error(JSON.stringify(t.data.errorData.data.message));else this.logger.error(null==(a=t.data.errorData)?void 0:a.data.message)}},i._detectThubmnailType=function(){void 0!==this._thumbCanvas?void 0!==this._urlImg?void 0!==this._urlVtt?(this._thumbType=q.STATIC,this._fetchVtt()):this._thumbType=q.NONE:void 0!==this._urlVtt?(this._thumbType=q.CHUNKED,this._fetchVtt()):(this._thumbType=q.DYNAMIC,this._loadThumbnailManager()):(this._thumbType=q.NONE,this._loadThumbnailManager())},i._fetchTime=function(t){var e=this._parseTime(t),i=this._parseTime(t);return this._regexPos=0,[e,i]},i._fetchVtt=function(){if("string"==typeof this._urlVtt){var t=this,e=new XMLHttpRequest,i=this._urlVtt.lastIndexOf("/");i=-1==i?this._urlVtt.length:i+1,e.open("GET",this._urlVtt,!0),e.onload=function(){if(4==e.readyState&&200===e.status&&""!==e.responseText)this.responseText.lastIndexOf(".vtt")>0?(t._urlVtt=this.responseText.substring(0,i),t._fetchVtt()):t._parseVtt(e.responseText.replace(/^\s*\n/gm,""));else if(4==e.readyState&&e.status>=400){var n=e.response;try{n=JSON.parse(n)}catch(t){n=this.statusText}t.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_VTT_ERROR,{fatal:!1,message:n,code:this.status})}))}},e.onerror=function(){t.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_VTT_ERROR,{fatal:!1,message:"Could not load thumbnail VTT",code:this.status})}))},e.send()}else this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Unsupported file type",code:422})}))},i._loadThumbnailManager=function(){switch(this._thumbType){case q.CHUNKED:this._thumbData.length>0&&void 0!==this._thumbCanvas?this._thumbManager=new ln(this.logger,this._thumbData,this._thumbCanvas):"string"==typeof this._urlVtt&&this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"No valid data found in provided VTT.",code:424})}));break;case q.DYNAMIC:"string"==typeof this._urlSrc?this._thumbManager=new sn(this.logger,this._urlSrc,this.videoEngine):this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"Unsupported video source file type.",code:422})}));break;case q.STATIC:this._thumbData.length>0&&void 0!==this._urlImg?this._thumbManager=new cn(this.logger,this._thumbData,this._urlImg):"string"==typeof this._urlVtt&&this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"No valid data found in provided VTT.",code:424})}));break;case q.NONE:default:this.trigger(new w(N.ERROR,{errorData:new en(Ji.THUMBNAIL_CANVAS_ERROR,{fatal:!1,message:"No thumbnails loaded. Incomplete configuration provided.",code:424})}))}},i._parseTime=function(t){var e=this._readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g,t);if(null==e)return null;var i=Number(e[1])||0,n=Number(e[2]),r=Number(e[3]),s=Number(e[4]);return n>59||r>59?null:s/1e3+r+60*n+3600*i},i._parseVtt=function(t){if("string"==typeof t&&"string"==typeof this._urlVtt){for(var e,i=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=i.test(this._urlVtt),r=1,s=this._urlVtt.lastIndexOf("/"),a=t.split("\n"),o=this._urlVtt.substring(0,s+1);r<a.length-1;){if(null!==(e=this._fetchTime(a[r]))){var l=[];if(l.push(e[0]),l.push(e[1]),a[r+1].match(/.(jpg|jpeg|png)$/gm)&&this._thumbType==q.CHUNKED)n?i.test(a[r+1])?l.push(a[r+1]):l.push(o+a[r+1]):l.push(a[r+1]),this._thumbData.push(l),r+=1;else if(a[r+1].includes("xywh=")&&this._thumbType==q.STATIC){var u=a[r+1].split("xywh=")[1].split(",");l.push(parseFloat(u[0].trim())),l.push(parseFloat(u[1].trim())),l.push(parseFloat(u[2].trim())),l.push(parseFloat(u[3].trim())),this._thumbData.push(l),r+=1}}r+=1}this.trigger(new w(N.THUMBNAIL_DATA,{}))}},i._readRegex=function(t,e){var i;t.lastIndex=this._regexPos;var n=t.exec(e);return null===n?null:(i={position:n.index,length:n[0].length,results:n},this._regexPos+=i.length,i.results)},e}(z),pn=function(){function t(t,e){this._manifestURL=void 0,this._adsTrackingURL=void 0,this._ssaiMediaTailor=void 0,this._logger=void 0,this._manifestURL="",this._adsTrackingURL="",this._ssaiMediaTailor=t,this._logger=e}var e=t.prototype;return e._getSessionInfo=function(t,e,i){var n=this,r=this;return new Promise((function(s,a){var o=JSON.stringify({adsParams:i}),l=new XMLHttpRequest;l.open("POST",t+e),n._logger.log("Making XMLHttpRequest POST request for ",t+e),l.setRequestHeader("Content-Type","application/json"),l.onloadend=function(e){var i=JSON.parse(e.target.responseText);if(r._logger.log("Received XMLHttpRequest response",i),void 0!==i.manifestUrl){r._manifestURL=t+i.manifestUrl,r._logger.log("The manifest URL returned by MediaTailor is ",r._manifestURL);var n=new XMLHttpRequest;n.open("GET",r._manifestURL),n.onloadend=function(){r._logger.log("Fetched manifest retrieved by MediaTailor."),s()},n.onerror=function(t){r._logger.error("Error while fetching the manifest retrieved by MediaTailor. Data: ",t),a()},n.send()}else r._logger.error("The manifest retrieved by MediaTailor is undefined.");void 0!==i.trackingUrl?(r._adsTrackingURL=t+i.trackingUrl,r._logger.log("Fetched ads tracking URL from MediaTailor: ",r._adsTrackingURL)):r._logger.error("The ads tracking URL retrieved by MediaTailor is undefined.")},l.onerror=function(t){r._logger.error("Error while doing the request to MediaTailor. Data: ",t),a()},l.send(o)}))},e.init=function(){var t=g()(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,this._getSessionInfo(this._ssaiMediaTailor.baseURL,this._ssaiMediaTailor.playbackURL,this._ssaiMediaTailor.adsParams).then((function(){})).catch((function(){e._logger.log("Couldn't initialize session with AWS Media Tailor")}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getAdsTrackingInfo=function(){var t=g()(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this._adsTrackingURL){t.next=3;break}return e=this,t.abrupt("return",new Promise((function(t,i){e._logger.log("Making the request for the ads tracking URL.");var n=new XMLHttpRequest;n.open("GET",e._adsTrackingURL),n.onloadend=function(n){var r=JSON.parse(n.target.responseText);e._logger.log("Received XMLHttpRequest response",r),r.avails.length>0||r.nonLinearAvails.length>0||null!==r.nextToken?t(r):i("Missing ads information in the response")},n.onerror=function(t){e._logger.error("Error while doing the request to the ads tracking URL. Data: ",t),i()},n.send()})));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),_()(t,[{key:"manifestURL",get:function(){return this._manifestURL}},{key:"adsTrackingURL",get:function(){return this._adsTrackingURL}}]),t}(),gn="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==gn&&gn,fn="URLSearchParams"in gn,_n="Symbol"in gn&&"iterator"in Symbol,vn="FileReader"in gn&&"Blob"in gn&&function(){try{return new Blob,!0}catch(t){return!1}}(),mn="FormData"in gn,En="ArrayBuffer"in gn;if(En)var An=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Tn=ArrayBuffer.isView||function(t){return t&&An.indexOf(Object.prototype.toString.call(t))>-1};function yn(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function bn(t){return"string"!=typeof t&&(t=String(t)),t}function Sn(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _n&&(e[Symbol.iterator]=function(){return e}),e}function In(t){this.map={},t instanceof In?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function Dn(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function kn(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function Pn(t){var e=new FileReader,i=kn(e);return e.readAsArrayBuffer(t),i}function Ln(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Cn(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:vn&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:mn&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:fn&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():En&&vn&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=Ln(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):En&&(ArrayBuffer.prototype.isPrototypeOf(t)||Tn(t))?this._bodyArrayBuffer=Ln(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):fn&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},vn&&(this.blob=function(){var t=Dn(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Dn(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Pn)}),this.text=function(){var t,e,i,n=Dn(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=kn(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},mn&&(this.formData=function(){return this.text().then(On)}),this.json=function(){return this.text().then(JSON.parse)},this}In.prototype.append=function(t,e){t=yn(t),e=bn(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},In.prototype.delete=function(t){delete this.map[yn(t)]},In.prototype.get=function(t){return t=yn(t),this.has(t)?this.map[t]:null},In.prototype.has=function(t){return this.map.hasOwnProperty(yn(t))},In.prototype.set=function(t,e){this.map[yn(t)]=bn(e)},In.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},In.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),Sn(t)},In.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),Sn(t)},In.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),Sn(t)},_n&&(In.prototype[Symbol.iterator]=In.prototype.entries);var Rn=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Nn(t,e){if(!(this instanceof Nn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,r=(e=e||{}).body;if(t instanceof Nn){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new In(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new In(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),Rn.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function On(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}})),e}function wn(t,e){if(!(this instanceof wn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new In(e.headers),this.url=e.url||"",this._initBody(t)}Nn.prototype.clone=function(){return new Nn(this,{body:this._bodyInit})},Cn.call(Nn.prototype),Cn.call(wn.prototype),wn.prototype.clone=function(){return new wn(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new In(this.headers),url:this.url})},wn.error=function(){var t=new wn(null,{status:0,statusText:""});return t.type="error",t};var xn=[301,302,303,307,308];wn.redirect=function(t,e){if(-1===xn.indexOf(e))throw new RangeError("Invalid status code");return new wn(null,{status:e,headers:{location:t}})};var Mn=gn.DOMException;try{new Mn}catch(t){(Mn=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack}).prototype=Object.create(Error.prototype),Mn.prototype.constructor=Mn}function Un(t,e){return new Promise((function(i,n){var r=new Nn(t,e);if(r.signal&&r.signal.aborted)return n(new Mn("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new In,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;setTimeout((function(){i(new wn(r,n))}),0)},s.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){n(new Mn("Aborted","AbortError"))}),0)},s.open(r.method,function(t){try{return""===t&&gn.location.href?gn.location.href:t}catch(e){return t}}(r.url),!0),"include"===r.credentials?s.withCredentials=!0:"omit"===r.credentials&&(s.withCredentials=!1),"responseType"in s&&(vn?s.responseType="blob":En&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof In?r.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,bn(e.headers[t]))})),r.signal&&(r.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&r.signal.removeEventListener("abort",a)}),s.send(void 0===r._bodyInit?null:r._bodyInit)}))}Un.polyfill=!0,gn.fetch||(gn.fetch=Un,gn.Headers=In,gn.Request=Nn,gn.Response=wn);var Bn=i(138),Vn=new Array,Fn=new Array,Gn=!0,Hn=function(){function t(){this._adsManager=void 0,this._captionsManager=void 0,this._environment=void 0,this._eventDispatcher=void 0,this._licenseController=void 0,this._logger=void 0,this._newRelicTracker=void 0,this._platformController=void 0,this._playerContainerDiv=void 0,this._playerDiv=void 0,this._thumbnailsController=void 0,this._videoEngine=void 0,this._ssaiMediaTailorParser=void 0,this._initEvents=void 0,this._initialized=void 0,this._isSSAI=void 0,this.config=void 0,this._adsManager=null,this._captionsManager=null,this._eventDispatcher=B.getInstance(),this._logger=new tn,this._licenseController=null,this._newRelicTracker=null,this._thumbnailsController=null,this._ssaiMediaTailorParser=null,this._videoEngine=null,this._platformController=new it(this._logger),this._environment=this._platformController.environment,this._initEvents=new Array,this._initialized=!1,this._isSSAI=!1,this.config=null}var e=t.prototype;return e.init=function(){var e=g()(m.a.mark((function e(i){var n,r,s,a,o,l,u,c,d,h,p,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gn=!1,n=t.DefaultConfig,this.config=Object.assign({},n,i),this._playerContainerDiv=this.config.div,this._playerDiv=document.createElement("div"),this._playerDiv.id="player",this._playerDiv.style.width="100%",this._environment.platform===Y.PLAYSTATION_4?this._playerDiv.style.height="100%":this._playerDiv.style.height="auto",this._playerDiv.style.position="relative",void 0!==this._playerContainerDiv?null==(r=this._playerContainerDiv)||r.appendChild(this._playerDiv):this._logger.error("Please, provide a valid div for the player"),(this._environment.platform===Y.PLAYSTATION_4||void 0!==this.config.externalSubtitles&&void 0!==this.config.captionDisplayer)&&(this._captionsManager=new $(this.config.externalSubtitles,this._playerDiv),this._captionsManager.init(),void 0!==this.config.captionDisplayer&&this._captionsManager.registerPlugin(this.config.captionDisplayer)),s=this,o=(a=function(t){var e=-1;if(s._initEvents.length>0)for(var i=0,n=!1;!n&&i<s._initEvents.length;)(t===R.PLAYER_EVENT&&s._initEvents[i].eventType.includes(N.PLAYER_CREATING)||t===R.AD_EVENT&&s._initEvents[i].eventType.includes(N.AD_LIBRARY_CREATING))&&(n=!0,e=i),i++;return e})(R.AD_EVENT),l=a(R.PLAYER_EVENT),u=-1===o?void 0:this._initEvents[o],c=-1===l?void 0:this._initEvents[l],d=function(){if(null!==s.config&&void 0!==s.config.useNewRelicTracker&&void 0!==Yn&&s.config.useNewRelicTracker)if(void 0!==nrvideo&&null!==nrvideo)try{s._newRelicTracker=new nrvideo.NexPlayerTracker(Yn,{}),nrvideo.Core.addTracker(s._newRelicTracker)}catch(t){console.log("An error has occurred while creating the New Relic tracker",t)}else console.log("Could not fetch the New Relic tracker")},h=function(){if(null!==s._captionsManager){s.addEventListener(N.WEBMAF_SUBTITLES_DATA_LOADED,(function(t){null!==s._captionsManager&&void 0!==t.data.textTrack&&s._captionsManager.storeSubtitles(t.data.textTrack)})),s.addEventListener(N.CC_NEW_DATA,(function(t){var e;void 0!==t.data.ccData&&(null==(e=s._captionsManager)||e.feedCuesCC(t.data.ccData))}))}},""===this.config.adURL&&""===this.config.vast&&void 0===this.config.ssaiMediaTailor){e.next=55;break}if(this._isSSAI=!1,p=""!==this.config.adURL?this.config.adURL:this.config.vast,this._logger.log("Ad URL: ",this.config.adURL),g=void 0,void 0===this.config.ssaiMediaTailor){e.next=34;break}return this._logger.log("Using SSAI from MediaTailor"),this._ssaiMediaTailorParser=new pn(this.config.ssaiMediaTailor,this._logger),e.next=29,this._ssaiMediaTailorParser.init();case 29:return e.next=31,this._ssaiMediaTailorParser.getAdsTrackingInfo().then((function(t){g=t,s._logger.log("Ads tracking request has been completed succesfully. Data: ",g)})).catch((function(t){s._logger.error(t)}));case 31:this.config.src=this._ssaiMediaTailorParser.manifestURL,p=this._ssaiMediaTailorParser.adsTrackingURL,this._isSSAI=!0;case 34:return this._adsManager=new Zi(this._playerDiv,p,this._isSSAI,u,g,this._logger,this.config.adsParamsToEncode),e.next=37,this._adsManager.init();case 37:if(this._logger.log("Ad type is ",this._adsManager.getAdType()),this._videoEngine=new pi(this.config,c,this._environment.platform,this._logger,this._isSSAI),!(this._adsManager.getAdType()!==zi.VAST&&!this._adsManager.hasPreroll()||this.config.resumePosition>0)){e.next=47;break}return e.next=42,this._videoEngine.createPlayer();case 42:d(),h(),this._videoEngine.init(),e.next=52;break;case 47:return e.next=49,this._videoEngine.createPlayer();case 49:d(),h(),this._adsManager.checkInitialAds();case 52:null!==this._adsManager&&this._adsManager.setVideoEngine(this._videoEngine),e.next=62;break;case 55:return this._logger.log("No ads have been provided."),this._videoEngine=new pi(this.config,c,this._environment.platform,this._logger),e.next=59,this._videoEngine.createPlayer();case 59:d(),h(),this._videoEngine.init();case 62:null!==this._captionsManager&&this._captionsManager.setVideoEngine(this._videoEngine),this._initialized=!0,this._initEvents=[],null!==this._videoEngine&&void 0!==this.config.thumbnails&&(this._thumbnailsController=new hn(this.config.thumbnails,this._logger,this.config.src,this._videoEngine));case 66:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.destroy=function(){var t=g()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this._videoEngine){t.next=4;break}return t.next=3,this._videoEngine.destroy();case 3:this._videoEngine=null;case 4:null!==this._adsManager&&(this._adsManager.destroy(),this._adsManager=null),B.getInstance().destroy(),this._initEvents=[],this._initialized=!1,this._licenseController=null,this._platformController=null;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.play=function(){null!==this._videoEngine&&this._videoEngine.play()},e.pause=function(){null!==this._videoEngine&&this._videoEngine.pause()},e.seek=function(t){if(null!==this._videoEngine)if(this._isSSAI){if(null!==this._adsManager&&!this._adsManager.isAdPlaying()){this._logger.log("Trying to seek to ",t);var e=this._adsManager.getSSAIAdsInfo();if(e&&e.avails.length>0){for(var i=0,n=-1;i<e.avails.length&&-1===n;)void 0!==e.avails[i].ads&&t>=e.avails[i].ads[0].startTimeInSeconds&&(i<e.avails.length-2?void 0!==this._adsManager&&t<e.avails[i+1].ads[0].startTimeInSeconds&&!this._adsManager.getAdBreaks()[i].executed&&(n=i):void 0===this._adsManager||this._adsManager.getAdBreaks()[i].executed||(n=i)),i++;if(-1===n)this._logger.log("Seeking normally to ",t),this._logger.log("All the ads were executed or none of them were skipped."),this._videoEngine.seek(t);else{var r=this;this.addEventListener(N.AD_BLOCK_END,(function e(){r.seek(t),r.removeEventListener(N.AD_BLOCK_END,e)})),this._logger.log("Seeking to the start of the skipped ad. Its time position is ",Math.round(e.avails[n].ads[0].startTimeInSeconds)),this._videoEngine.seek(Math.round(e.avails[n].ads[0].startTimeInSeconds))}}}}else this._logger.log("Seeking to ",t),this._videoEngine.seek(t)},e.isILogger=function(t){return!(void 0===t.error||!t.debug||void 0===t.info||void 0===t.warn||void 0===t.log)},e.isLive=function(){return null!==this._videoEngine&&this._videoEngine.isLive()},e.isSeeking=function(){return null!==this._videoEngine&&this._videoEngine.isSeeking()},e.getAdInstance=function(){return this._adsManager},e.getAudioStreams=function(){return null!==this._videoEngine?this._videoEngine.getAudioTracks():[]},e.getAudioTracks=function(){return null!==this._videoEngine?this._videoEngine.getAudioTracks():[]},e.getCurrentAudioStream=function(){return null!==this._videoEngine?this._videoEngine.getCurrentAudioTrack():{}},e.getCurrentAudioTrack=function(){return null!==this._videoEngine?this._videoEngine.getCurrentAudioTrack():{}},e.getCurrentContentType=function(){return null!==this._videoEngine?this.isCurrentAssetAd()?G.AD:G.MAIN:G.NONE},e.getCurrentSubtitle=function(){return null!==this._captionsManager?this._captionsManager.getCurrentSubtitle().id:null!==this._videoEngine?this._videoEngine.getCurrentSubtitle().id:-1},e.getCurrentTime=function(){return null!==this._videoEngine?this._videoEngine.getCurrentTime():NaN},e.getCurrentTrack=function(){return null!==this._videoEngine?this._videoEngine.getCurrentVideoTrack():{}},e.getDroppedFrames=function(){return null!==this._videoEngine?this._videoEngine.getDroppedFrames():NaN},e.getDuration=function(){return null!==this._videoEngine?this._videoEngine.getDuration():NaN},e.getLogger=function(){return this._logger},e.getMediaElement=function(){return this._videoEngine},e.getPlaybackRate=function(){return null!==this._videoEngine?this._videoEngine.getPlaybackRate():NaN},e.getPlayerContainerDiv=function(){return this._playerContainerDiv},e.getPlayerDiv=function(){return this._playerDiv},e.getProtocol=function(){return null!==this._videoEngine?this._videoEngine.getProtocol():j.NONE},e.getSubtitles=function(){return null!==this._captionsManager?this._captionsManager.getSubtitles():null!==this._videoEngine?this._videoEngine.getSubtitles():[]},e.getThumbnailAt=function(t){return null!==this._thumbnailsController?this._thumbnailsController.getThumbnailAt(t):null},e.getThumbnails=function(){return null!==this._thumbnailsController?this._thumbnailsController.getThumbnails():null},e.getURL=function(){var t;return null==(t=this.config)?void 0:t.src},e.getVersion=function(){return Bn&&Bn.version?Bn.version:""},e.getVolume=function(){return null!==this._videoEngine?this._videoEngine.getVolume():-1},e.isCurrentAssetAd=function(){var t;return!(null==(t=this._adsManager)||!t.isAdPlaying())},e.isCurrentAssetMuted=function(){var t;return null!=(t=this._adsManager)&&t.isAdPlaying()?this._adsManager.getMute():null!==this._videoEngine&&this._videoEngine.getMute()},e.setAudio=function(t){null!==this._videoEngine&&this._videoEngine.setCurrentAudioTrack(t)},e.setCurrentAudioTrack=function(t){null!==this._videoEngine&&this._videoEngine.setCurrentAudioTrack(t)},e.setCurrentSubtitle=function(t){null!==this._captionsManager?this._captionsManager.setCurrentSubtitle(t):null!==this._videoEngine&&this._videoEngine.setCurrentSubtitle(t)},e.setLogger=function(t){this.isILogger(t)?this._logger=t:this._logger.error("Could not assign logger to nexPlayer : Functions do not match ILogger")},e.setMute=function(t){null!==this._videoEngine&&this._videoEngine.setMute(t)},e.setSubtitle=function(t){null!==this._captionsManager?this._captionsManager.setCurrentSubtitle(t):null!==this._videoEngine&&this._videoEngine.setCurrentSubtitle(t)},e.setVolume=function(t){null!==this._videoEngine&&t>=0&&t<=1&&this._videoEngine.setVolume(t)},e.addEventListener=function(t,e){if(this._initialized||t!==N.PLAYER_CREATING&&t!==N.AD_LIBRARY_CREATING)switch(U(t)){case R.PLAYER_EVENT:t===N.NEXPLAYER_ERROR&&this._logger.warn(t+' is deprecated. Please, use "error" instead'),null!==this._videoEngine?(this._logger.log("Adding listener for event (PLAYER_EVENT): ",t),this._videoEngine.addEventListener(t,e)):this._logger.error("The player is not initialized yet.");break;case R.AD_EVENT:null!==this._adsManager?(this._logger.log("Adding listener for event (AD_EVENT): ",t),this._adsManager.addEventListener(t,e)):this._logger.error("The ad library is not initialized yet.");break;case R.NONE:this._logger.error("Incorrect event type: ",t)}else{var i={};i.eventType=t,i.func=e,this._initEvents.push(i)}},e.removeEventListener=function(t,e){switch(U(t)){case R.PLAYER_EVENT:null!==this._videoEngine?this._videoEngine.removeEventListener(t,e):this._logger.error("The player is not initialized yet");break;case R.AD_EVENT:null!==this._adsManager?this._adsManager.removeEventListener(t,e):this._logger.error("The ad library is not initialized yet");break;case R.NONE:this._logger.error("Incorrect event type: ",t)}},e.addTrackerData=function(t,e){null!==this._newRelicTracker?(this._newRelicTracker.customData[t]=e,this._logger.log("Custom data added"),console.log(this._newRelicTracker)):this._logger.warn("New Relic tracker has not been defined")},e.removeTrackerData=function(t,e){null!==this._newRelicTracker?(delete this._newRelicTracker.customData[t],this._logger.log("Custom data removed"),console.log(this._newRelicTracker)):this._logger.warn("New Relic tracker has not been defined")},_()(t,[{key:"Environment",get:function(){return this._environment}}],[{key:"DefaultConfig",get:function(){return void 0===t.defaultConfig?Je:t.defaultConfig}}]),t}();Hn.defaultConfig=void 0;var Yn=null,Wn=null,jn=function(t){if(Wn=null,Gn)return(Yn=new Hn).addEventListener(N.PLAYER_CREATING,(function(e){if(void 0!==t.callbacksForPlayer&&"function"==typeof t.callbacksForPlayer&&null!==Yn&&Yn.addEventListener(N.PLAYER_CREATED,(function(e){void 0!==t.callbacksForPlayer&&t.callbacksForPlayer(Yn,e.data.videoElement)})),void 0!==Fn&&Fn.length>0)for(var i=function(t){null!==Yn&&Yn.addEventListener(Fn[t].eventType,(function(e){Fn[t].func(e)}))},n=0;n<Fn.length;n++)i(n)})),void 0!==Vn&&Vn.length>0&&Yn.addEventListener(N.AD_LIBRARY_CREATING,(function(t){for(var e=function(t){null!==Yn&&Yn.addEventListener(Vn[t].eventType,(function(e){Vn[t].func(e)}))},i=0;i<Vn.length;i++)e(i)})),Yn.init(t),Yn;Wn=t},Qn=function(){var t=g()(m.a.mark((function t(e){var i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===Yn){t.next=11;break}if(void 0!==(i=Yn.getPlayerContainerDiv())&&null!=e)if(0===e.id.localeCompare(i.id))for(;i.firstChild;)i.firstChild.remove();else console.error("The div provided is invalid. Please, provide the div used for creating the player");else console.error("The div provided is invalid. Please, provide the div used for creating the player. Or no div was used for creating the player");return Fn=[],Vn=[],t.next=7,Yn.destroy();case 7:Yn=null,Gn=!0,console.log("Player destroyed!"),null!==Wn&&jn(Wn);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Kn=function(t,e){var i={eventType:t,func:e};Fn.push(i)},qn=function(t,e){var i={eventType:t,func:e};Vn.push(i)},zn=function(){return null!==Yn?Yn.getAdInstance():(console.error("AdInstance doesn't exist yet. Please, use it when an ad starts."),null)},Xn=function(){return Gn}}])}));