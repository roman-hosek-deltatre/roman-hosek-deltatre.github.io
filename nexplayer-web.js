// https://nexplayer-html5-releases.s3.amazonaws.com/HTML5/4.4.3.4_20221216/nexplayer.js

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nexplayer=t():e.nexplayer=t()}(window,function(){return function(a){var r={};function n(e){var t;return(r[e]||(t=r[e]={i:e,l:!1,exports:{}},a[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}return n.m=a,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=259)}([function(e,t,a){"use strict";function p(e,t,a){var r,n,i,o=e&p.F,s=e&p.G,l=e&p.P,u=e&p.B,c=s?f:e&p.S?f[t]||(f[t]={}):(f[t]||{})[_],d=s?m:m[t]||(m[t]={}),h=d[_]||(d[_]={});for(r in a=s?t:a)n=((i=!o&&c&&void 0!==c[r])?c:a)[r],i=u&&i?v(n,f):l&&"function"==typeof n?v(Function.call,n):n,c&&y(c,r,n,e&p.U),d[r]!=n&&g(d,r,i),l&&h[r]!=n&&(h[r]=n)}var f=a(3),m=a(16),g=a(19),y=a(20),v=a(30),_="prototype";f.core=m,p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128,e.exports=p},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){var u,a,e,t,r,c,n,i,o,s,l,d;function h(){}return u=Math,a=Object.create||function(e){return h.prototype=e,e=new h,h.prototype=null,e},t=(e={}).lib={},r=t.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,a=e.words,r=this.sigBytes,n=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<n;i++){var o=a[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=o<<24-(r+i)%4*8}else for(i=0;i<n;i+=4)t[r+i>>>2]=a[i>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=u.ceil(t/4)},clone:function(){var e;return(e=r.clone.call(this)).words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4){var r=function(t){var a=987654321,r=4294967295;return function(){var e=((a=36969*(65535&a)+(a>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return(e/4294967296+.5)*(.5<u.random()?1:-1)}}(4294967296*(n||u.random())),n=987654071*r();t.push(4294967296*r()|0)}return new c.init(t,e)}}),n=e.enc={},i=n.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r+=2)a[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(a,t/2)}},o=n.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(a,t)}},s=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,a=t.words,r=t.sigBytes,n=this.blockSize,i=r/(4*n),o=(i=e?u.ceil(i):u.max((0|i)-this._minBufferSize,0))*n,e=u.min(4*o,r);if(o){for(var s=0;s<o;s+=n)this._doProcessBlock(a,s);var l=a.splice(0,o);t.sigBytes-=e}return new c.init(l,e)},clone:function(){var e;return(e=r.clone.call(this))._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(e,t){return new a.init(t).finalize(e)}},_createHmacHelper:function(a){return function(e,t){return new d.HMAC.init(a,t).finalize(e)}}}),d=e.algo={},e},"object"===n(t)?e.exports=t=r():void 0!==(r="function"==typeof(n=r)?n.apply(t,[]):n)&&(e.exports=r)},function(e,t,a){"use strict";var r=a(6);e.exports=function(e){if(r(e))return e;throw TypeError(e+" is not an object!")}},function(e,t,a){"use strict";e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function n(e){return"string"==typeof e?f:p}function i(e,t,a){var r,n=this._iv;n?(r=n,this._iv=void 0):r=this._prevBlock;for(var i=0;i<a;i++)e[t+i]^=r[i]}var t,a,o,r,s,l,u,c,d,h,p,f;e.lib.Cipher||(t=(e=e).lib,a=t.Base,o=t.WordArray,r=t.BufferedBlockAlgorithm,(s=e.enc).Utf8,l=s.Base64,u=e.algo.EvpKDF,c=t.Cipher=r.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(r){return{encrypt:function(e,t,a){return n(t).encrypt(r,e,t,a)},decrypt:function(e,t,a){return n(t).decrypt(r,e,t,a)}}}}),t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),s=e.mode={},d=t.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=s.CBC=((s=d.extend()).Encryptor=s.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize;i.call(this,e,t,r),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),s.Decryptor=s.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=e.slice(t,t+r);a.decryptBlock(e,t),i.call(this,e,t,r),this._prevBlock=n}}),s),s=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,a=t-e.sigBytes%t,r=a<<24|a<<16|a<<8|a,n=[],i=0;i<a;i+=4)n.push(r);t=o.create(n,a);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:d,padding:s}),reset:function(){c.reset.call(this);var e,t=this.cfg,a=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,a&&a.words):(this._mode=e.call(t,this,a&&a.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),h=t.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(l)},parse:function(e){var t,e=l.parse(e),a=e.words;return 1398893684==a[0]&&1701076831==a[1]&&(t=o.create(a.slice(2,4)),a.splice(0,4),e.sigBytes-=16),h.create({ciphertext:e,salt:t})}},p=t.SerializableCipher=a.extend({cfg:a.extend({format:d}),encrypt:function(e,t,a,r){r=this.cfg.extend(r);var n=e.createEncryptor(a,r),t=n.finalize(t),n=n.cfg;return h.create({ciphertext:t,key:a,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,a,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(a,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),s=(e.kdf={}).OpenSSL={execute:function(e,t,a,r){r=r||o.random(8);e=u.create({keySize:t+a}).compute(e,r),a=o.create(e.words.slice(t),4*a);return e.sigBytes=4*t,h.create({key:e,iv:a,salt:r})}},f=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:s}),encrypt:function(e,t,a,r){a=(r=this.cfg.extend(r)).kdf.execute(a,e.keySize,e.ivSize),r.iv=a.iv,e=p.encrypt.call(this,e,t,a.key,r);return e.mixIn(a),e},decrypt:function(e,t,a,r){r=this.cfg.extend(r),t=this._parse(t,r.format);a=r.kdf.execute(a,e.keySize,e.ivSize,t.salt);return r.iv=a.iv,p.decrypt.call(this,e,t,a.key,r)}}))},"object"===n(t)?e.exports=t=r(a(1),a(17)):(n=[a(1),a(17)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":r(e))?null!==e:"function"==typeof e}},function(e,t,a){"use strict";e.exports=a(530)},function(e,t,a){"use strict";var r=a(65)("wks"),n=a(49),i=a(3).Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:n)("Symbol."+e))}).store=r},function(e,t,a){"use strict";var r=a(32),n=Math.min;e.exports=function(e){return 0<e?n(r(e),9007199254740991):0}},function(e,t,a){"use strict";e.exports=!a(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,a){"use strict";var r=a(2),n=a(152),i=a(34),o=Object.defineProperty;t.f=a(10)?Object.defineProperty:function(e,t,a){if(r(e),t=i(t,!0),r(a),n)try{return o(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){"use strict";var r=a(35);e.exports=function(e){return Object(r(e))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=t.connectAdvanced=t.createProvider=t.Provider=void 0;var r=a(535),n=o(r),i=o(a(212)),a=o(a(544));function o(e){return e&&e.__esModule?e:{default:e}}t.Provider=n.default,t.createProvider=r.createProvider,t.connectAdvanced=i.default,t.connect=a.default},function(e,t,a){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ActionPlaying=function(){return{type:"PLAYING"}},t.ActionPause=function(){return{type:"PAUSE"}},t.ActionEnded=function(){return{type:"ENDED"}},t.ActionOrderPlay=function(){return{type:"ORDER_PLAY"}},t.ActionOrderPause=function(){return{type:"ORDER_PAUSE"}},t.ActionOrderSeek=function(e){return{type:"ORDER_SEEK",seekValue:e}},t.ActionFullScreen=function(){return{type:"ORDER_FULL_SCREEN"}},t.ActionChangeSize=function(e){return{type:"SIZE",newSize:e}},t.ActionIsLive=function(){return{type:"IS_LIVE"}},t.ActionIsNotLive=function(){return{type:"IS_NOT_LIVE"}},t.ActionGetMarginVideoLeft=function(e){return{type:"MARGIN_VIDEO",marginVideoLeft:e}},t.ActionShowThumb=function(e,t,a){return{type:"SHOW_THUMB",clientPosition:e,marginSeekbarLeft:t,seekbarWidth:a}},t.ActionLoadThumb=function(e){return{type:"LOAD_THUMB",thumbnails:e}},t.ActionCurrentTimeChange=function(e,t,a,r){return{type:"TIME_UPDATE",currentTime:e,totalTime:t,currentTimeBuffer:a,isSeeking:r}},t.ActionShowLanguage=function(){return{type:"SHOW_LANGUAGE"}},t.ActionHideLanguage=function(){return{type:"HIDE_LANGUAGE"}},t.ActionLoading=function(){return{type:"LOADING"}},t.ActionUserIdle=function(){return{type:"USER_IDLE"}},t.ActionUserActive=function(){return{type:"USER_ACTIVE"}},t.ActionUpdateAvailableAudios=function(e){return{type:"UPDATE_AUDIOS",languages:e}},t.ActionUpdateAvailableSubtitles=function(e){return{type:"UPDATE_SUBTITLES",subtitles:e}},t.ActionUpdateAdCues=function(e){return{type:"UPDATE_AD_CUES",adsCues:e}},t.ActionUpdateAvailableQualities=function(e){return{type:"UPDATE_QUALITIES",qualities:e}},t.ActionUpdateSelectedAudio=function(e){return{type:"SELECTED_AUDIO",audio:e}},t.ActionUpdateSelectedSubtitle=function(e){return{type:"SELECTED_SUBTITLE",subtitle:e}},t.ActionChangeVolume=function(e){return{type:"CHANGED_VOLUME",volume:e}},t.ActionAdStarted=function(){return{type:"AD_STARTED"}},t.ActionAdEnded=function(){return{type:"AD_ENDED"}},t.ActionUpdateCuePoints=function(e){return{type:"AD_UPDATE_CUE_POINTS",cues:e}},t.ActionCallBackUnMute=function(e){return{type:"UN_MUTE_CALLBACK",unMuteCallback:e}},t.ActionAirplayEnabled=function(){return{type:"AIRPLAY_ENABLED"}},t.ActionChromecastEnabled=function(){return{type:"CHROMECAST_ENABLED"}},t.ActionSetSpeed=function(e){return{type:"CHANGED_SPEED",speed:e}},t.ActionSetQuality=function(e){return{type:"CHANGED_QUALITY",quality:e}},t.InitURL=function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R,D,N,L,O,U,B,F,j,V,$,G,H,W,z,K,q,Y,X){return{addRequestFilter:R,adsDelay:M,adsLoadTimeout:$,adsMode:B,adsParamsToEncode:j,autoplay:x,callbackForLogger:g,callbackForReturn:S,callbackForSubtitles:T,callbacks:s,cast:d,configuration:w,debug:m,defaultLanguage:b,disableKeyEvents:P,div:p,drm:o,dynamicThumbnails:u,externalSubtitles:E,hideControlBarOnStart:k,hideUITime:_,improveStartUp:U,key:e,logosrc:i,mutedAtStart:h,poster:n,preferredAudioCodec:L,reinitializeAfterAds:I,resumePosition:C,showAdsUI:F,showingFullUI:A,src:t,ssaiMediaTailor:V,startFullScreen:v,startingBufferLength:N,staticThumbnails:c,subtitle:r,title:a,trailer:O,type:"INIT_URL",type_360:f,useDefaultControls:y,useNewRelicTracker:D,vast:l,bitrateConfig:G,retryParameters:H,backupManifests:W,wmInfo:z,daiConfig:K,pageUrl:q,preferredVideoCodec:Y,enableVpaid:X}},t.ActionPlayerInitialized=function(e){return{type:"PLAYER_INITIALIZED",player:e}}},function(e,t,a){"use strict";e=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a,r,c,n,i;return a=(t=e).lib,r=a.Base,c=a.WordArray,a=t.algo,n=a.MD5,i=a.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:n,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=a.hasher.create(),n=c.create(),i=n.words,o=a.keySize,s=a.iterations;i.length<o;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<s;u++)l=r.finalize(l),r.reset();n.concat(l)}return n.sigBytes=4*o,n}}),t.EvpKDF=function(e,t,a){return i.create(a).compute(e,t)},e.EvpKDF},"object"===n(t)?e.exports=t=r(a(1),a(63),a(64)):(n=[a(1),a(63),a(64)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r=a(578),n=("string"==typeof r&&(r=[[e.i,r,""]]),{hmr:!0});n.transform=void 0,a(101)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){"use strict";var r=a(11),n=a(48);e.exports=a(10)?function(e,t,a){return r.f(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){"use strict";var i=a(3),o=a(19),s=a(23),l=a(49)("src"),r=a(262),n="toString",u=(""+r).split(n);a(16).inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,a,r){var n="function"==typeof a;n&&!s(a,"name")&&o(a,"name",t),e[t]!==a&&(n&&!s(a,l)&&o(a,l,e[t]?""+e[t]:u.join(String(t))),e===i?e[t]=a:r?e[t]?e[t]=a:o(e,t,a):(delete e[t],o(e,t,a)))})(Function.prototype,n,function(){return"function"==typeof this&&this[l]||r.call(this)})},function(e,t,a){"use strict";function r(e,t,a,r){var e=String(o(e)),n="<"+t;return""!==a&&(n+=" "+a+'="'+String(r).replace(s,"&quot;")+'"'),n+">"+e+"</"+t+">"}var n=a(0),i=a(5),o=a(35),s=/"/g;e.exports=function(t,e){var a={};a[t]=e(r),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",a)}},function(e,t,a){"use strict";function r(){this.init=function(){var i={};this.on=function(e,t){i[e]||(i[e]=[]),i[e]=i[e].concat(t)},this.off=function(e,t){return!!i[e]&&(t=i[e].indexOf(t),i[e]=i[e].slice(),i[e].splice(t,1),-1<t)},this.trigger=function(e){var t,a,r,n=i[e];if(n)if(2===arguments.length)for(a=n.length,t=0;t<a;++t)n[t].call(this,arguments[1]);else{for(r=[],t=arguments.length,t=1;t<arguments.length;++t)r.push(arguments[t]);for(a=n.length,t=0;t<a;++t)n[t].apply(this,r)}},this.dispose=function(){i={}}}}r.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},r.prototype.partialFlush=function(e){this.trigger("partialdone",e)},r.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},r.prototype.reset=function(e){this.trigger("reset",e)},e.exports=r},function(e,t,a){"use strict";var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,a){"use strict";var r=a(66),n=a(35);e.exports=function(e){return r(n(e))}},function(e,t,a){"use strict";var r=a(67),n=a(48),i=a(24),o=a(34),s=a(23),l=a(152),u=Object.getOwnPropertyDescriptor;t.f=a(10)?u:function(e,t){if(e=i(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},function(e,t,a){"use strict";var r=a(23),n=a(12),i=a(108)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var f;return f=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=this._map,n=(e.clamp(),[]),i=0;i<a;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<a;s++)n.push(r.charAt(o>>>6*(3-s)&63));var l=r.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,a=this._map;if(!(r=this._reverseMap))for(var r=this._reverseMap=[],n=0;n<a.length;n++)r[a.charCodeAt(n)]=n;for(var i,o,s=a.charAt(64),l=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),u=t,c=r,d=[],h=0,p=0;p<u;p++)p%4&&(i=c[l.charCodeAt(p-1)]<<p%4*2,o=c[l.charCodeAt(p)]>>>6-p%4*2,d[h>>>2]|=(i|o)<<24-h%4*8,h++);return f.create(d,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){for(var l=Math,t=e,a=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,A=[],i=0;i<64;i++)A[i]=4294967296*l.abs(l.sin(i+1))|0;function P(e,t,a,r,n,i,o){e=e+(t&a|~t&r)+n+o;return(e<<i|e>>>32-i)+t}function C(e,t,a,r,n,i,o){e=e+(t&r|a&~r)+n+o;return(e<<i|e>>>32-i)+t}function w(e,t,a,r,n,i,o){e=e+(t^a^r)+n+o;return(e<<i|e>>>32-i)+t}function M(e,t,a,r,n,i,o){e=e+(a^(t|~r))+n+o;return(e<<i|e>>>32-i)+t}return n=n.MD5=r.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var r=t+a,n=e[r];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,o=e[t+0],s=e[t+1],l=e[t+2],u=e[t+3],c=e[t+4],d=e[t+5],h=e[t+6],p=e[t+7],f=e[t+8],m=e[t+9],g=e[t+10],y=e[t+11],v=e[t+12],_=e[t+13],k=e[t+14],b=e[t+15],S=P(i[0],x=i[1],T=i[2],E=i[3],o,7,A[0]),E=P(E,S,x,T,s,12,A[1]),T=P(T,E,S,x,l,17,A[2]),x=P(x,T,E,S,u,22,A[3]);S=P(S,x,T,E,c,7,A[4]),E=P(E,S,x,T,d,12,A[5]),T=P(T,E,S,x,h,17,A[6]),x=P(x,T,E,S,p,22,A[7]),S=P(S,x,T,E,f,7,A[8]),E=P(E,S,x,T,m,12,A[9]),T=P(T,E,S,x,g,17,A[10]),x=P(x,T,E,S,y,22,A[11]),S=P(S,x,T,E,v,7,A[12]),E=P(E,S,x,T,_,12,A[13]),T=P(T,E,S,x,k,17,A[14]),S=C(S,x=P(x,T,E,S,b,22,A[15]),T,E,s,5,A[16]),E=C(E,S,x,T,h,9,A[17]),T=C(T,E,S,x,y,14,A[18]),x=C(x,T,E,S,o,20,A[19]),S=C(S,x,T,E,d,5,A[20]),E=C(E,S,x,T,g,9,A[21]),T=C(T,E,S,x,b,14,A[22]),x=C(x,T,E,S,c,20,A[23]),S=C(S,x,T,E,m,5,A[24]),E=C(E,S,x,T,k,9,A[25]),T=C(T,E,S,x,u,14,A[26]),x=C(x,T,E,S,f,20,A[27]),S=C(S,x,T,E,_,5,A[28]),E=C(E,S,x,T,l,9,A[29]),T=C(T,E,S,x,p,14,A[30]),S=w(S,x=C(x,T,E,S,v,20,A[31]),T,E,d,4,A[32]),E=w(E,S,x,T,f,11,A[33]),T=w(T,E,S,x,y,16,A[34]),x=w(x,T,E,S,k,23,A[35]),S=w(S,x,T,E,s,4,A[36]),E=w(E,S,x,T,c,11,A[37]),T=w(T,E,S,x,p,16,A[38]),x=w(x,T,E,S,g,23,A[39]),S=w(S,x,T,E,_,4,A[40]),E=w(E,S,x,T,o,11,A[41]),T=w(T,E,S,x,u,16,A[42]),x=w(x,T,E,S,h,23,A[43]),S=w(S,x,T,E,m,4,A[44]),E=w(E,S,x,T,v,11,A[45]),T=w(T,E,S,x,b,16,A[46]),S=M(S,x=w(x,T,E,S,l,23,A[47]),T,E,o,6,A[48]),E=M(E,S,x,T,p,10,A[49]),T=M(T,E,S,x,k,15,A[50]),x=M(x,T,E,S,d,21,A[51]),S=M(S,x,T,E,v,6,A[52]),E=M(E,S,x,T,u,10,A[53]),T=M(T,E,S,x,g,15,A[54]),x=M(x,T,E,S,s,21,A[55]),S=M(S,x,T,E,f,6,A[56]),E=M(E,S,x,T,b,10,A[57]),T=M(T,E,S,x,h,15,A[58]),x=M(x,T,E,S,_,21,A[59]),S=M(S,x,T,E,c,6,A[60]),E=M(E,S,x,T,y,10,A[61]),T=M(T,E,S,x,l,15,A[62]),x=M(x,T,E,S,m,21,A[63]),i[0]=i[0]+S|0,i[1]=i[1]+x|0,i[2]=i[2]+T|0,i[3]=i[3]+E|0},_doFinalize:function(){for(var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes,n=(t[r>>>5]|=128<<24-r%32,l.floor(a/4294967296)),n=(t[15+(64+r>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t[14+(64+r>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process(),this._hash),i=n.words,o=0;o<4;o++){var s=i[o];i[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return n},clone:function(){var e;return(e=r.clone.call(this))._hash=this._hash.clone(),e}}),t.MD5=r._createHelper(n),t.HmacMD5=r._createHmacHelper(n),e.MD5},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(module,exports,__webpack_require__){"use strict";!function(global){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var innerGlobal="undefined"!=typeof window?window:global,exportTo={},k;for(k in!function(window,global,module){var $jscomp=$jscomp||{},$jscomp$lookupPolyfilledValue=($jscomp.scope={},$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){return e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value),e},$jscomp.getGlobal=function(e){e=["object"==("undefined"==typeof globalThis?"undefined":_typeof(globalThis))&&globalThis,e,"object"==(void 0===window?"undefined":_typeof(window))&&window,"object"==("undefined"==typeof self?"undefined":_typeof(self))&&self,"object"==(void 0===global?"undefined":_typeof(global))&&global];for(var t=0;t<e.length;++t){var a=e[t];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"===_typeof(Symbol("x")),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$",function(e,t){var a=$jscomp.propertyToPolyfillSymbol[t];return null!=a&&void 0!==(a=e[a])?a:e[t]}),COMPILED=($jscomp.polyfill=function(e,t,a,r){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,t,a,r):$jscomp.polyfillUnisolated(e,t,a,r))},$jscomp.polyfillUnisolated=function(e,t,a,r){for(a=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var n=e[r];if(!(n in a))return;a=a[n]}(t=t(r=a[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:t})},$jscomp.polyfillIsolated=function(e,t,a,r){var n=e.split(".");e=1===n.length,r=n[0],r=!e&&r in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var i=0;i<n.length-1;i++){var o=n[i];if(!(o in r))return;r=r[o]}n=n[n.length-1],null!=(t=t(a=$jscomp.IS_SYMBOL_NATIVE&&"es6"===a?r[n]:null))&&(e?$jscomp.defineProperty($jscomp.polyfills,n,{configurable:!0,writable:!0,value:t}):t!==a&&(void 0===$jscomp.propertyToPolyfillSymbol[n]&&(a=1e9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[n]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(n):$jscomp.POLYFILL_PREFIX+a+"$"+n),$jscomp.defineProperty(r,$jscomp.propertyToPolyfillSymbol[n],{configurable:!0,writable:!0,value:t})))},$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",function(e){var a,r,n;return e||((a=function(e,t){this.$jscomp$symbol$id_=e,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})}).prototype.toString=function(){return this.$jscomp$symbol$id_},r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new a(r+(t||"")+"_"+n++,t)})},"es6","es3"),$jscomp.polyfill("Symbol.iterator",function(e){if(!e){e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<t.length;a++){var r=$jscomp.global[t[a]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&$jscomp.defineProperty(r.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}}return e},"es6","es3"),$jscomp.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e},$jscomp.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.arrayFromIterator=function(e){for(var t,a=[];!(t=e.next()).done;)a.push(t.value);return a},$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))},$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},$jscomp.getConstructImplementation=function(){var r;return $jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct?(Reflect.construct(e,[],function(){}),new e instanceof e?Reflect.construct:(r=Reflect.construct,function(e,t,a){return e=r(e,t),a&&Reflect.setPrototypeOf(e,a.prototype),e})):function(e,t,a){return a=$jscomp.objectCreate((a=void 0===a?e:a).prototype||Object.prototype),Function.prototype.apply.call(e,a,t)||a};function e(){}},$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf(),$jscomp.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,$jscomp.inherits=function(e,t){if(e.prototype=$jscomp.objectCreate(t.prototype),e.prototype.constructor=e,$jscomp.setPrototypeOf){var a=$jscomp.setPrototypeOf;a(e,t)}else for(a in t){var r;"prototype"!=a&&(Object.defineProperties?(r=Object.getOwnPropertyDescriptor(t,a))&&Object.defineProperty(e,a,r):e[a]=t[a])}e.superClass_=t.prototype},$jscomp.generator={},$jscomp.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},$jscomp.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1},$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},$jscomp.generator.Context.prototype.next_=function(e){this.yieldResult=e},$jscomp.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},$jscomp.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},$jscomp.generator.Context.prototype.yieldAll=function(e,t){var e=$jscomp.makeIterator(e),a=e.next();if($jscomp.generator.ensureIteratorResultIsObject_(a),!a.done)return this.yieldAllIterator_=e,this.yield(a.value,t);this.yieldResult=a.value,this.nextAddress=t},$jscomp.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,null!=t&&(this.finallyAddress_=t)},$jscomp.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},$jscomp.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},$jscomp.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},$jscomp.generator.Context.prototype.enterFinallyBlock=function(e,t,a){a?this.finallyContexts_[a]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},$jscomp.generator.Context.prototype.leaveFinallyBlock=function(e,t){t=this.finallyContexts_.splice(t||0)[0];if(t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();null!=t.jumpTo&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},$jscomp.generator.Context.prototype.forIn=function(e){return new $jscomp.generator.Context.PropertyIterator(e)},$jscomp.generator.Context.PropertyIterator=function(e){for(var t in this.object_=e,this.properties_=[],e)this.properties_.push(t);this.properties_.reverse()},$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},$jscomp.generator.Engine_=function(e){this.context_=new $jscomp.generator.Context,this.program_=e},$jscomp.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(e){return{value:e,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},$jscomp.generator.Engine_.prototype.yieldAllStep_=function(e,t,a){try{var r=e.call(this.context_.yieldAllIterator_,t);if($jscomp.generator.ensureIteratorResultIsObject_(r),!r.done)return this.context_.stop_(),r;var n=r.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}return this.context_.yieldAllIterator_=null,a.call(this.context_,n),this.nextStep_()},$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},$jscomp.generator.Generator_=function(t){this.next=function(e){return t.next_(e)},this.throw=function(e){return t.throw_(e)},this.return=function(e){return t.return_(e)},this[Symbol.iterator]=function(){return this}},$jscomp.generator.createGenerator=function(e,t){t=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(t));return $jscomp.setPrototypeOf&&e.prototype&&$jscomp.setPrototypeOf(t,e.prototype),t},$jscomp.asyncExecutePromiseGenerator=function(t){function n(e){return t.next(e)}function i(e){return t.throw(e)}return new Promise(function(a,r){!function e(t){t.done?a(t.value):Promise.resolve(t.value).then(n,i).then(e,r)}(t.next())})},$jscomp.asyncExecutePromiseGeneratorFunction=function(e){return $jscomp.asyncExecutePromiseGenerator(e())},$jscomp.asyncExecutePromiseGeneratorProgram=function(e){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e)))},$jscomp.polyfill("Reflect",function(e){return e||{}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(e){return $jscomp.construct},"es6","es3"),$jscomp.polyfill("Reflect.setPrototypeOf",function(e){var a;return e||($jscomp.setPrototypeOf?(a=$jscomp.setPrototypeOf,function(e,t){try{return a(e,t),!0}catch(e){return!1}}):null)},"es6","es5"),$jscomp.polyfill("Promise",function(e){function t(){this.batch_=null}function o(a){return a instanceof s?a:new s(function(e,t){e(a)})}if(e&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===$jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){var t;null==this.batch_&&(this.batch_=[],(t=this).asyncExecuteFunction(function(){t.executeBatch_()})),this.batch_.push(e)};function s(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}var a=$jscomp.global.setTimeout,n=(t.prototype.asyncExecuteFunction=function(e){a(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var a=e[t];e[t]=null;try{a()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e})},s.prototype.createResolveAndReject_=function(){function e(t){return function(e){r||(r=!0,t.call(a,e))}}var a=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},s.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.settleSameAsPromise_(e);else{switch(void 0===e?"undefined":_typeof(e)){case"object":var t=null!=e;break;case"function":t=!0;break;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},s.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},s.prototype.reject_=function(e){this.settle_(2,e)},s.prototype.fulfill_=function(e){this.settle_(1,e)},s.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},s.prototype.scheduleUnhandledRejectionCheck_=function(){var t=this;a(function(){var e;t.notifyUnhandledRejection_()&&void 0!==(e=$jscomp.global.console)&&e.error(t.result_)},1)},s.prototype.notifyUnhandledRejection_=function(){var e,t,a;return!this.isRejectionHandled_&&(e=$jscomp.global.CustomEvent,t=$jscomp.global.Event,void 0===(a=$jscomp.global.dispatchEvent)||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=$jscomp.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,a(e)))},s.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)n.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}},new t);return s.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},s.prototype.settleSameAsThenable_=function(e,t){var a=this.createResolveAndReject_();try{e.call(t,a.resolve,a.reject)}catch(e){a.reject(e)}},s.prototype.then=function(e,t){function a(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(e){n(e)}}:e}var r,n,i=new s(function(e,t){r=e,n=t});return this.callWhenSettled_(a(e,r),a(t,n)),i},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.callWhenSettled_=function(e,t){function a(){switch(r.state_){case 1:e(r.result_);break;case 2:t(r.result_);break;default:throw Error("Unexpected state: "+r.state_)}}var r=this;null==this.onSettledCallbacks_?n.asyncExecute(a):this.onSettledCallbacks_.push(a),this.isRejectionHandled_=!0},s.resolve=o,s.reject=function(a){return new s(function(e,t){t(a)})},s.race=function(n){return new s(function(e,t){for(var a=$jscomp.makeIterator(n),r=a.next();!r.done;r=a.next())o(r.value).callWhenSettled_(e,t)})},s.all=function(e){var t=$jscomp.makeIterator(e),i=t.next();return i.done?o([]):new s(function(a,e){for(var r=[],n=0;r.push(void 0),n++,o(i.value).callWhenSettled_(function(t){return function(e){r[t]=e,0==--n&&a(r)}}(r.length-1),e),!(i=t.next()).done;);})},s},"es6","es3"),$jscomp.checkEs6ConformanceViaProxy=function(){try{var r={},n=Object.create(new $jscomp.global.Proxy(r,{get:function(e,t,a){return e==r&&"q"==t&&a==n}}));return!0===n.q}catch(e){return!1}},$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy(),$jscomp.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},$jscomp.polyfill("WeakMap",function(r){function a(){}function n(e){var t=void 0===e?"undefined":_typeof(e);return"object"===t&&null!==e||"function"===t}function i(e){var t;$jscomp.owns(e,o)||(t=new a,$jscomp.defineProperty(e,o,{value:t}))}function e(e){var t;$jscomp.ISOLATE_POLYFILLS||(t=Object[e])&&(Object[e]=function(e){return e instanceof a?e:(Object.isExtensible(e)&&i(e),t(e))})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(r&&$jscomp.ES6_CONFORMANCE)return r}else if(function(){if(r&&Object.seal)try{var e=Object.seal({}),t=Object.seal({}),a=new r([[e,2],[t,3]]);return 2==a.get(e)&&3==a.get(t)?(a.delete(e),a.set(t,4),!a.has(e)&&4==a.get(t)):void 0}catch(e){}}())return r;function t(e){if(this.id_=(s+=Math.random()+1).toString(),e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}var o="$jscomp_hidden_"+Math.random(),s=(e("freeze"),e("preventExtensions"),e("seal"),0);return t.prototype.set=function(e,t){if(!n(e))throw Error("Invalid WeakMap key");if(i(e),$jscomp.owns(e,o))return e[o][this.id_]=t,this;throw Error("WeakMap key fail: "+e)},t.prototype.get=function(e){return n(e)&&$jscomp.owns(e,o)?e[o][this.id_]:void 0},t.prototype.has=function(e){return n(e)&&$jscomp.owns(e,o)&&$jscomp.owns(e[o],this.id_)},t.prototype.delete=function(e){return!!(n(e)&&$jscomp.owns(e,o)&&$jscomp.owns(e[o],this.id_))&&delete e[o][this.id_]},t},"es6","es3"),$jscomp.MapEntry=function(){},$jscomp.polyfill("Map",function(n){if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(n&&$jscomp.ES6_CONFORMANCE)return n}else if(function(){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&n&&"function"==typeof n&&n.prototype.entries&&"function"==typeof Object.seal)try{var e,t,a=Object.seal({x:4}),r=new n($jscomp.makeIterator([[a,"s"]]));return"s"!=r.get(a)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size?void 0:(t=(e=r.entries()).next()).done||t.value[0]!=a||"s"!=t.value[1]?void 0:!((t=e.next()).done||4!=t.value[0].x||"t"!=t.value[1]||!e.next().done)}catch(e){}}())return n;function e(e){if(this.data_={},this.head_=a(),this.size=0,e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}var o=new WeakMap,r=(e.prototype.set=function(e,t){var a=r(this,e=0===e?0:e);return a.list||(a.list=this.data_[a.id]=[]),a.entry?a.entry.value=t:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++),this},e.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,0))},e.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=a(),this.size=0},e.prototype.has=function(e){return!!r(this,e).entry},e.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},e.prototype.entries=function(){return t(this,function(e){return[e.key,e.value]})},e.prototype.keys=function(){return t(this,function(e){return e.key})},e.prototype.values=function(){return t(this,function(e){return e.value})},e.prototype.forEach=function(e,t){for(var a,r=this.entries();!(a=r.next()).done;)a=a.value,e.call(t,a[1],a[0],this)},e.prototype[Symbol.iterator]=e.prototype.entries,function(e,t){var a=t&&(void 0===t?"undefined":_typeof(t)),r=("object"==a||"function"==a?o.has(t)?a=o.get(t):(a=""+ ++s,o.set(t,a)):a="p_"+t,e.data_[a]);if(r&&$jscomp.owns(e.data_,a))for(var n=0;n<r.length;n++){var i=r[n];if(t!=t&&i.key!=i.key||t===i.key)return{id:a,list:r,index:n,entry:i}}return{id:a,list:r,index:-1,entry:void 0}}),t=function(e,t){var a=e.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=e.head_;)a=a.previous;if(a.next!=a.head)return a=a.next,{done:!1,value:t(a)};a=null}return{done:!0,value:void 0}})},a=function(){var e={};return e.previous=e.next=e.head=e},s=0;return e},"es6","es3"),$jscomp.polyfill("Set",function(n){if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(n&&$jscomp.ES6_CONFORMANCE)return n}else if(function(){if(!$jscomp.ASSUME_NO_NATIVE_SET&&n&&"function"==typeof n&&n.prototype.entries&&"function"==typeof Object.seal)try{var e,t,a=Object.seal({x:4}),r=new n($jscomp.makeIterator([a]));return r.has(a)&&1==r.size&&r.add(a)==r&&1==r.size&&r.add({x:4})==r&&2==r.size?(t=(e=r.entries()).next()).done||t.value[0]!=a||t.value[1]!=a?void 0:!(t=e.next()).done&&t.value[0]!=a&&4==t.value[0].x&&t.value[1]==t.value[0]&&e.next().done:void 0}catch(e){}}())return n;function e(e){if(this.map_=new Map,e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.map_.size}return e.prototype.add=function(e){return this.map_.set(e=0===e?0:e,e),this.size=this.map_.size,this},e.prototype.delete=function(e){return e=this.map_.delete(e),this.size=this.map_.size,e},e.prototype.clear=function(){this.map_.clear(),this.size=0},e.prototype.has=function(e){return this.map_.has(e)},e.prototype.entries=function(){return this.map_.entries()},e.prototype.keys=e.prototype.values=function(){return this.map_.values()},e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,a){var r=this;this.map_.forEach(function(e){return t.call(a,e,e,r)})},e},"es6","es3"),$jscomp.polyfill("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(e){return e||function(e,t){var a=this,r=(a=a instanceof String?String(a):a).length,n=t||0;for(n<0&&(n=Math.max(n+r,0));n<r;n++){var i=a[n];if(i===e||Object.is(i,e))return!0}return!1}},"es7","es3"),$jscomp.checkStringArgs=function(e,t,a){if(null==e)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.includes",function(e){return e||function(e,t){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,t||0)}},"es6","es3"),$jscomp.findInternal=function(e,t,a){for(var r=(e=e instanceof String?String(e):e).length,n=0;n<r;n++){var i=e[n];if(t.call(a,i,n,e))return{i:n,v:i}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.findIndex",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}},"es6","es3"),$jscomp.iteratorFromArray=function(t,a){t instanceof String&&(t+="");var r=0,n=!1,e={next:function(){var e;return!n&&r<t.length?(e=r++,{value:a(e,t[e]),done:!1}):{done:n=!0,value:void 0}}};return e[Symbol.iterator]=function(){return e},e},$jscomp.polyfill("Array.prototype.values",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e,t){return t})}},"es8","es3"),$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(e){return e||function(e,t){for(var a=$jscomp.checkStringArgs(this,e,"startsWith"),r=a.length,n=(e+="").length,i=Math.max(0,Math.min(0|t,a.length)),o=0;o<n&&i<r;)if(a[i++]!=e[o++])return!1;return n<=o}},"es6","es3"),$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var a=1;a<arguments.length;a++){var r=arguments[a];if(r)for(var n in r)$jscomp.owns(r,n)&&(e[n]=r[n])}return e},$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3"),$jscomp.polyfill("Array.from",function(e){return e||function(e,t,a){t=null!=t?t:function(e){return e};var r=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof n){e=n.call(e);for(var i=0;!(n=e.next()).done;)r.push(t.call(a,n.value,i++))}else for(n=e.length,i=0;i<n;i++)r.push(t.call(a,e[i],i));return r}},"es6","es3"),$jscomp.polyfill("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}},"es9","es3"),$jscomp.polyfill("Array.prototype.entries",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e,t){return[e,t]})}},"es6","es3"),$jscomp.polyfill("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}},"es6","es3"),$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3"),$jscomp.polyfill("Object.values",function(e){return e||function(e){var t,a=[];for(t in e)$jscomp.owns(e,t)&&a.push(e[t]);return a}},"es8","es3"),$jscomp.polyfill("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}},"es6","es3"),$jscomp.polyfill("Object.entries",function(e){return e||function(e){var t,a=[];for(t in e)$jscomp.owns(e,t)&&a.push([t,e[t]]);return a}},"es8","es3"),!0),goog=goog||{};if(goog.global=this||self,goog.exportPath_=function(e,t,a,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)if(e.length||void 0===t)r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={};else if(!a&&goog.isObject(t)&&goog.isObject(r[n]))for(var i in t)t.hasOwnProperty(i)&&(r[n][i]=t[i]);else r[n]=t},goog.define=function(e,t){var a,r;return COMPILED||(a=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES,a&&void 0===a.nodeType&&Object.prototype.hasOwnProperty.call(a,e)?t=a[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])),t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t,a){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t,a)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e.nonce||e.getAttribute("nonce")))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){var e;return!(!goog.moduleLoaderState_||goog.moduleLoaderState_.type!=goog.ModuleType.ES6)||!!(e=goog.global.$jscomp)&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var a=e.split("."),r=t||goog.global,n=0;n<a.length;n++)if(null==(r=r[a[n]]))return null;return r},goog.addDependency=function(e,t,a,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,a,r)},goog.ENABLE_DEBUG_LOADER=!1,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_||(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.TRUSTED_TYPES_POLICY_NAME="goog",goog.hasBadLetScoping=null,goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var a={},r=a;if("function"==typeof e)r=e.call(void 0,r);else{if("string"!=typeof e)throw Error("Invalid module definition");r=goog.loadModuleFromSource_.call(void 0,r,e)}var n=goog.moduleLoaderState_.moduleName;if("string"!=typeof n||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r,a!==r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==(void 0===r?"undefined":_typeof(r))&&null!=r&&Object.seal(r),goog.loadedModules_[n]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a,b){return eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(b)),a},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,a){var r=goog.global.$jscomp,n=(r||(goog.global.$jscomp=r={}),r.transpile);if(!n){var i=goog.basePath+goog.TRANSPILER,o=goog.loadFileSync_(i);if(o){if(!function(){(0,eval)(o+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,n=(r=goog.global.$jscomp).transpile}}return(n=n||(r.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}))(e,t,a)},goog.typeOf=function(e){var t=void 0===e?"undefined":_typeof(e);return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isObject=function(e){var t=void 0===e?"undefined":_typeof(e);return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.cloneObject=function(e){var t,a=goog.typeOf(e);if("object"!=a&&"array"!=a)return e;if("function"==typeof e.clone)return e.clone();for(t in a="array"==a?[]:{},e)a[t]=goog.cloneObject(e[t]);return a},goog.bindNative_=function(e,t,a){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(t,a,e){var r;if(t)return 2<arguments.length?(r=Array.prototype.slice.call(arguments,2),function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(a,e)}):function(){return t.apply(a,arguments)};throw Error()},goog.bind=function(e,t,a){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var e=a.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(e,t){for(var a in t)e[a]=t[a]},goog.now=function(){return Date.now()},goog.globalEval=function(e){(0,eval)(e)},goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);function r(e){return goog.cssNameMapping_[e]||e}var a=function(e){e=e.split("-");for(var t=[],a=0;a<e.length;a++)t.push(r(e[a]));return t.join("-")},a=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:a:function(e){return e};return a=t?e+"-"+a(t):a(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,a,t){return t&&t.html&&(e=e.replace(/</g,"&lt;")),t&&t.unescapeHtmlEntities&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),e=a?e.replace(/\{\$([^}]+)}/g,function(e,t){return null!=a&&t in a?a[t]:e}):e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,a){goog.exportPath_(e,t,!0,a)},goog.exportProperty=function(e,t,a){e[t]=a},goog.inherits=function(e,i){function t(){}t.prototype=i.prototype,e.superClass_=i.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,a){for(var r=Array(arguments.length-2),n=2;n<arguments.length;n++)r[n-2]=arguments[n];return i.prototype[t].apply(e,r)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var a=t.constructor,r=t.statics;return a&&a!=Object.prototype.constructor||(a=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),a=goog.defineClass.createSealingConstructor_(a,e),e&&goog.inherits(a,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(a.prototype,t),null!=r&&(r instanceof Function?r(a):goog.defineClass.applyProperties_(a,r)),a},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],e}:t},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)a=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,a=goog.global.trustedTypes;if(a&&a.createPolicy)try{t=a.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.isEdge_=function(){return!!(goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"").match(/Edge\/(\d+)(\.\d)*/i)},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(null!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document,t=(e=(t=e.currentScript)?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var a=e[t].src,r=-1==(r=a.lastIndexOf("?"))?a.length:r;if("base.js"==a.substr(r-7,7)){goog.basePath=a.substr(0,r-7);break}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,a){e?d[t]=!0:a()?d[c=t]=!1:e=d[t]=!0}function b(f){try{return!!eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(f))}catch(g){return!1}}var c="es3",d={es3:!1},e=!1;return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){return!goog.isEdge_()&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es7",function(){return b("2**3==8")}),a("es8",function(){return b("async()=>1,1")}),a("es9",function(){return b("({...rest}={}),1")}),a("es_2019",function(){return b('let r;try{throw 0}catch{r="\u2029"};r')}),a("es_2020",function(){return b("null?.x??1")}),a("es_next",function(){return!1}),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;var a;if(this.requiresTranspilation_||(a=this.createRequiresTranspilation_(),this.requiresTranspilation_=a.map,this.transpilationTarget_=this.transpilationTarget_||a.target),e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function a(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){for(var n=[],i=0;i<e.length;i++){var o=this.getPathFromDeps_(e[i]);if(!o)throw Error("Unregonized namespace: "+e[i]);n.push(this.dependencies_[o])}for(var o=goog.require,s=0,i=0;i<e.length;i++)o(e[i]),n[i].onLoad(function(){++s==e.length&&a()})}else a()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){e=this.getPathFromDeps_(e);e&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){var r,n;this.getPathFromDeps_(e)?(r=this,n=[],function e(t){var a=r.getPathFromDeps_(t);if(!a)throw Error("Bad dependency path or symbol: "+t);if(!r.written_[a]){for(r.written_[a]=!0,t=r.dependencies_[a],a=0;a<t.requires.length;a++)goog.isProvided_(t.requires[a])||e(t.requires[a]);n.push(t)}}(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()):goog.logToConsole_("goog.require could not find: "+e)},goog.DebugLoader_.prototype.loadDeps_=function(){for(var n=this,i=this.paused_;this.depsToLoad_.length&&!i;)!function(){var t=!1,a=n.depsToLoad_.shift(),e=!1,r=(n.loading_(a),{pause:function(){if(t)throw Error("Cannot call pause after the call to load.");i=!0},resume:function(){t?n.resume_():i=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0,n.loaded_(a)},pending:function(){for(var e=[],t=0;t<n.loadingDeps_.length;t++)e.push(n.loadingDeps_[t]);return e},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,a){a&&(goog.loadedModules_[a]={exports:t,type:goog.ModuleType.ES6,moduleId:a||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(e){if(t)throw Error("Cannot register with defer after the call to load.");n.defer_(a,e)},areDepsLoaded:function(){return n.areDepsLoaded_(a.requires)}});try{a.load(r)}finally{t=!0}}();i&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var a=this.getPathFromDeps_(e[t]);if(!a||!(a in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,a){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,a,r,n){this.path=e,this.relativePath=t,this.provides=a,this.requires=r,this.loadFlags=n,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return e=0<=t&&0<=(t=(e=e.substring(t+3)).indexOf("/"))?e.substring(t+1):e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var e=goog.Dependency.callbackMap_[e],a=[],r=1;r<arguments.length;r++)a.push(arguments[r]);e.apply(void 0,a)},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void a.loaded();throw Error('Cannot write "'+this.path+'" after document load')}var r,t,n,i=goog.getScriptNonce();!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()?(r=goog.Dependency.registerCallback_(function e(t){t.readyState&&"complete"!=t.readyState?t.onload=e:(goog.Dependency.unregisterCallback_(r),a.loaded())}),t='<script src="'+this.path+'"'+(i=i?' nonce="'+i+'"':"")+(goog.Dependency.defer_?" defer":"")+' id="script-'+r+'"><\/script>',t+="<script"+i+">",t=goog.Dependency.defer_?t+"document.getElementById('script-"+r+"').onload = function() {\n  goog.Dependency.callback_('"+r+"', this);\n};\n":t+"goog.Dependency.callback_('"+r+"', document.getElementById('script-"+r+"'));",t+="<\/script>",e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(t):t)):((n=e.createElement("script")).defer=goog.Dependency.defer_,n.async=!1,i&&(n.nonce=i),goog.DebugLoader_.IS_OLD_IE_?(a.pause(),n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(a.loaded(),a.resume())}):n.onload=function(){n.onload=null,a.loaded()},n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,e.head.appendChild(n))}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),a.loaded()):a.pause()},goog.Es6ModuleDependency=function(e,t,a,r,n){goog.Dependency.call(this,e,t,a,r,n)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(t){var n,a,e,r,i,o;goog.global.CLOSURE_IMPORT_SCRIPT?goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?t.loaded():t.pause():goog.inHtmlDocument_()?(n=goog.global.document,a=this,goog.isDocumentLoading_()?(e=function(e,t){var a="",r=goog.getScriptNonce();r&&(a=' nonce="'+r+'"'),a=t?'<script type="module" crossorigin'+a+">"+t+"<\/script>":'<script type="module" crossorigin src="'+e+'"'+a+"><\/script>",n.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(a):a)},goog.Dependency.defer_=!0):e=function(e,t){var a=n.createElement("script"),r=(a.defer=!0,a.async=!1,a.type="module",a.setAttribute("crossorigin",!0),goog.getScriptNonce());r&&(a.nonce=r),t?a.text=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(t):t:a.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,n.head.appendChild(a)},e(void 0,'goog.Dependency.callback_("'+(r=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(r),t.setModuleState(goog.ModuleType.ES6)}))+'")'),e(this.path,void 0),i=goog.Dependency.registerCallback_(function(e){goog.Dependency.unregisterCallback_(i),t.registerEs6ModuleExports(a.path,e,goog.moduleLoaderState_.moduleName)}),e(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)'),e(void 0,'goog.Dependency.callback_("'+(o=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(o),t.clearModuleState(),t.loaded()}))+'")')):(goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),t.pause())},goog.TransformedDependency=function(e,t,a,r,n){goog.Dependency.call(this,e,t,a,r,n),this.contents_=null,this.lazyFetch_=!(goog.inHtmlDocument_()&&"noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function r(){u.contents_=goog.loadFileSync_(u.path),u.contents_&&(u.contents_=u.transform(u.contents_),u.contents_)&&(u.contents_+="\n//# sourceURL="+u.path)}function e(){if(u.lazyFetch_&&r(),u.contents_){n&&a.setModuleState(goog.ModuleType.ES6);try{var e,t=u.contents_;u.contents_=null,goog.globalEval(goog.CLOSURE_EVAL_PREFILTER_.createScript(t)),n&&(e=goog.moduleLoaderState_.moduleName)}finally{n&&a.clearModuleState()}n&&goog.global.$jscomp.require.ensure([u.getPathName()],function(){a.registerEs6ModuleExports(u.path,goog.global.$jscomp.require(u.getPathName()),e)}),a.loaded()}}var n,t,i,o,s,l,u=this;goog.global.CLOSURE_IMPORT_SCRIPT?(r(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,a.loaded()):a.pause()):(n=this.loadFlags.module==goog.ModuleType.ES6,this.lazyFetch_||r(),l=(o=1<a.pending().length)&&goog.DebugLoader_.IS_OLD_IE_,o=goog.Dependency.defer_&&(o||goog.isDocumentLoading_()),l||o?a.defer(function(){e()}):(t=goog.global.document,l=goog.inHtmlDocument_()&&("ActiveXObject"in goog.global||goog.isEdge_()),n&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!l?(goog.Dependency.defer_=!0,a.pause(),i=t.onreadystatechange,t.onreadystatechange=function(){"interactive"==t.readyState&&(t.onreadystatechange=i,e(),a.resume()),"function"==typeof i&&i.apply(void 0,arguments)}):!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?(o=goog.global.document,s=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(s),e()}),l="<script"+((l=goog.getScriptNonce())?' nonce="'+l+'"':"")+">"+goog.protectScriptTag_('goog.Dependency.callback_("'+s+'");')+"<\/script>",o.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(l):l)):e()))},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,a,r,n,i){goog.TransformedDependency.call(this,e,t,a,r,n),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,a,r,n){goog.TransformedDependency.call(this,e,t,a,r,n)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,a,r,n,i,o){goog.TransformedDependency.call(this,e,t,a,r,n),this.needsTranspile_=i,this.transpiler_=o},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,a,r){t=t||[],e=e.replace(/\\/g,"/");var n=goog.normalizePath_(goog.basePath+e);for(r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{}),a=this.factory_.createDependency(n,e,t,a,r,goog.transpiler_.needsTranspile(r.lang||"es3",r.module)),this.dependencies_[n]=a,a=0;a<t.length;a++)this.idToPath_[t[a]]=n;this.idToPath_[e]=n},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,a,r,n,i){return n.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,a,r,n,i,this.transpiler):i?new goog.TranspiledDependency(e,t,a,r,n,this.transpiler):new(n.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?goog.PreTranspiledEs6ModuleDependency:goog.Es6ModuleDependency:goog.Dependency)(e,t,a,r,n)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),!COMPILED){var isChrome87=!1;try{isChrome87=eval(goog.global.trustedTypes.emptyScript)!==goog.global.trustedTypes.emptyScript}catch(a){}goog.CLOSURE_EVAL_PREFILTER_=goog.global.trustedTypes&&isChrome87&&goog.createTrustedTypesPolicy("goog#base#devonly#eval")||{createScript:goog.identity_}}goog.asserts=function(){},goog.asserts.assert=function(e,t){},goog.asserts.ENABLE_ASSERTS=!0,goog.asserts.ENABLE_ASSERTS&&console.assert&&console.assert.bind&&(goog.asserts.assert=console.assert.bind(console));var shaka={abr:{}},$jscomp$compprop0,MAX_BYTE_LENGTH=(shaka.abr.Ewma=function(e){goog.asserts.assert(0<e,"expected halfLife to be positive"),this.alpha_=Math.exp(Math.log(.5)/e),this.totalWeight_=this.estimate_=0},shaka.abr.Ewma.prototype.sample=function(e,t){t=t*(1-(t=Math.pow(this.alpha_,e)))+t*this.estimate_;isNaN(t)||(this.estimate_=t,this.totalWeight_+=e)},shaka.abr.Ewma.prototype.getEstimate=function(){return this.estimate_/(1-Math.pow(this.alpha_,this.totalWeight_))},shaka.abr.EwmaBandwidthEstimator=function(){this.fast_=new shaka.abr.Ewma(2),this.slow_=new shaka.abr.Ewma(5),this.bytesSampled_=0,this.minTotalBytes_=128e3,this.minBytes_=16e3},shaka.abr.EwmaBandwidthEstimator.prototype.sample=function(e,t){var a;t<this.minBytes_||(a=8e3*t/e,e=e/1e3,this.bytesSampled_+=t,this.fast_.sample(e,a),this.slow_.sample(e,a))},shaka.abr.EwmaBandwidthEstimator.prototype.getBandwidthEstimate=function(e){return this.bytesSampled_<this.minTotalBytes_?e:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())},shaka.abr.EwmaBandwidthEstimator.prototype.hasGoodEstimate=function(){return this.bytesSampled_>=this.minTotalBytes_},shaka.log=function(){},shaka.log.alwaysError=function(e){},shaka.log.alwaysWarn=function(e){},shaka.log.warnOnce=function(e,t){for(var a=[],r=1;r<arguments.length;++r)a[r-1]=arguments[r];shaka.log.oneTimeWarningIssued_.has(e)||(shaka.log.oneTimeWarningIssued_.add(e),shaka.log.alwaysWarn.apply(shaka.log,$jscomp.arrayFromIterable(a)))},shaka.log.error=function(e){},shaka.log.warning=function(e){},shaka.log.info=function(e){},shaka.log.debug=function(e){},shaka.log.v1=function(e){},shaka.log.v2=function(e){},shaka.log.Level={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,V1:5,V2:6},shaka.log.MAX_LOG_LEVEL=4,shaka.log.oneTimeWarningIssued_=new Set,window.console&&window.console.log.bind&&($jscomp$compprop0={},shaka.log.logMap_=($jscomp$compprop0[shaka.log.Level.ERROR]=console.error.bind(console),$jscomp$compprop0[shaka.log.Level.WARNING]=console.warn.bind(console),$jscomp$compprop0[shaka.log.Level.INFO]=console.info.bind(console),$jscomp$compprop0[shaka.log.Level.DEBUG]=console.log.bind(console),$jscomp$compprop0[shaka.log.Level.V1]=console.debug.bind(console),$jscomp$compprop0[shaka.log.Level.V2]=console.debug.bind(console),$jscomp$compprop0),shaka.log.alwaysWarn=shaka.log.logMap_[shaka.log.Level.WARNING],shaka.log.alwaysError=shaka.log.logMap_[shaka.log.Level.ERROR],goog.DEBUG?(goog.exportSymbol("shaka.log",shaka.log),shaka.log.setLevel=function(t){function e(e){return e<=t?(goog.asserts.assert(shaka.log.logMap_[e],"Unexpected log level"),shaka.log.logMap_[e]):function(){}}shaka.log.currentLevel=t,shaka.log.error=e(shaka.log.Level.ERROR),shaka.log.warning=e(shaka.log.Level.WARNING),shaka.log.info=e(shaka.log.Level.INFO),shaka.log.debug=e(shaka.log.Level.DEBUG),shaka.log.v1=e(shaka.log.Level.V1),shaka.log.v2=e(shaka.log.Level.V2)},shaka.log.setLevel(shaka.log.Level.NONE)):(shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.ERROR&&(shaka.log.error=shaka.log.logMap_[shaka.log.Level.ERROR]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.WARNING&&(shaka.log.warning=shaka.log.logMap_[shaka.log.Level.WARNING]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.INFO&&(shaka.log.info=shaka.log.logMap_[shaka.log.Level.INFO]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.DEBUG&&(shaka.log.debug=shaka.log.logMap_[shaka.log.Level.DEBUG]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V1&&(shaka.log.v1=shaka.log.logMap_[shaka.log.Level.V1]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V2&&(shaka.log.v2=shaka.log.logMap_[shaka.log.Level.V2]))),shaka.util={},shaka.util.Iterables=function(){},shaka.util.Iterables.map=function(e,t){for(var a=[],r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())a.push(t(n.value));return a},shaka.util.Iterables.every=function(e,t){for(var a=$jscomp.makeIterator(e),r=a.next();!r.done;r=a.next())if(!t(r.value))return!1;return!0},shaka.util.Iterables.some=function(e,t){for(var a=$jscomp.makeIterator(e),r=a.next();!r.done;r=a.next())if(t(r.value))return!0;return!1},shaka.util.Iterables.filter=function(e,t){for(var a=[],r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())t(n=n.value)&&a.push(n);return a},shaka.util.Iterables.range=function e(t){var a;return $jscomp.generator.createGenerator(e,function(e){return 1==e.nextAddress&&(a=0),3!=e.nextAddress?a<t?e.yield(a,3):e.jumpTo(0):(a++,e.jumpTo(2))})},shaka.util.Iterables.enumerate=function e(t){var a,r,n,i,o,s;return $jscomp.generator.createGenerator(e,function(e){return 1==e.nextAddress&&(a=-1,n=r=void 0,i=$jscomp.makeIterator(t),o=i.next()),5!=e.nextAddress?o.done?-1==a?e.jumpTo(0):e.yield({i:a,prev:r,item:n,next:void 0},0):(s=o.value,0<=a?e.yield({i:a,item:n,prev:r,next:s},5):e.jumpTo(5)):(a++,r=n,n=s,o=i.next(),e.jumpTo(2))})},shaka.util.BufferUtils=function(){},shaka.util.BufferUtils.equal=function(e,t){var a=shaka.util.BufferUtils;if(e||t){if(!e||!t||e.byteLength!=t.byteLength)return!1;if(a.unsafeGetArrayBuffer_(e)!=a.unsafeGetArrayBuffer_(t)||(e.byteOffset||0)!=(t.byteOffset||0))for(var a=shaka.util.BufferUtils.toUint8(e),r=shaka.util.BufferUtils.toUint8(t),n=$jscomp.makeIterator(shaka.util.Iterables.range(e.byteLength)),i=n.next();!i.done;i=n.next())if(a[i=i.value]!=r[i])return!1}return!0},shaka.util.BufferUtils.unsafeGetArrayBuffer_=function(e){return e instanceof ArrayBuffer?e:e.buffer},shaka.util.BufferUtils.toArrayBuffer=function(e){return e instanceof ArrayBuffer?e:(0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e:new Uint8Array(e)).buffer},shaka.util.BufferUtils.toUint8=function(e,t,a){return shaka.util.BufferUtils.view_(e,void 0===t?0:t,a=void 0===a?1/0:a,Uint8Array)},shaka.util.BufferUtils.toDataView=function(e,t,a){return shaka.util.BufferUtils.view_(e,void 0===t?0:t,a=void 0===a?1/0:a,DataView)},shaka.util.BufferUtils.view_=function(e,t,a,r){var n=shaka.util.BufferUtils.unsafeGetArrayBuffer_(e),i=(e.byteOffset||0)+e.byteLength;return new r(n,e=Math.max(0,Math.min((e.byteOffset||0)+t,i)),Math.min(e+Math.max(a,0),i)-e)},goog.exportSymbol("shaka.util.BufferUtils",shaka.util.BufferUtils),goog.exportProperty(shaka.util.BufferUtils,"toDataView",shaka.util.BufferUtils.toDataView),goog.exportProperty(shaka.util.BufferUtils,"toUint8",shaka.util.BufferUtils.toUint8),goog.exportProperty(shaka.util.BufferUtils,"toArrayBuffer",shaka.util.BufferUtils.toArrayBuffer),goog.exportProperty(shaka.util.BufferUtils,"equal",shaka.util.BufferUtils.equal),shaka.util.Error=function(e,t,a,r){for(var n=[],i=3;i<arguments.length;++i)n[i-3]=arguments[i];if(this.severity=e,this.category=t,this.code=a,this.data=n,this.handled=!1,goog.DEBUG){for(var o in i=n="UNKNOWN",shaka.util.Error.Category)shaka.util.Error.Category[o]==this.category&&(n=o);for(var s in shaka.util.Error.Code)shaka.util.Error.Code[s]==this.code&&(i=s);if(this.message="Shaka Error "+n+"."+i+" ("+this.data.toString()+")",shaka.util.Error.createStack)try{throw Error(this.message)}catch(e){this.stack=e.stack}}},shaka.util.Error.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},goog.exportSymbol("shaka.util.Error",shaka.util.Error),goog.DEBUG&&(shaka.util.Error.createStack=!0),shaka.util.Error.Severity={RECOVERABLE:1,CRITICAL:2},goog.exportProperty(shaka.util.Error,"Severity",shaka.util.Error.Severity),shaka.util.Error.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},goog.exportProperty(shaka.util.Error,"Category",shaka.util.Error.Category),shaka.util.Error.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,NO_WEB_CRYPTO_API:4040,HLS_AES_128_INVALID_KEY_OR_IV_LENGTH:4041,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},goog.exportProperty(shaka.util.Error,"Code",shaka.util.Error.Code),shaka.util.Lazy=function(e){this.gen_=e,this.value_=void 0},shaka.util.Lazy.prototype.value=function(){return null==this.value_&&(this.value_=this.gen_(),goog.asserts.assert(null!=this.value_,"Unable to create lazy value")),this.value_},shaka.util.Lazy.prototype.reset=function(){this.value_=void 0},shaka.util.TextEncoder=function(){},shaka.util.TextEncoder.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":""+String(e)).length,a=new Uint8Array(8+(t<<1)|0),r=0,n=!Uint8Array,i=0;i<t;i=i+1|0,r=r+1|0){var o=0|e.charCodeAt(i);if(o<=127)a[r]=o;else{if(o<=2047)a[r]=192|o>>6;else{for(;;){if(55296<=o)if(o<=56319){var s=0|e.charCodeAt(i=i+1|0);if(56320<=s&&s<=57343){if(65535<(o=(o<<10)+s-56613888|0)){a[r]=240|o>>18,a[r=r+1|0]=128|o>>12&63,a[r=r+1|0]=128|o>>6&63,a[r=r+1|0]=128|63&o;continue}break}o=65533}else o<=57343&&(o=65533);!n&&i<<1<r&&i<<1<(r-7|0)&&(n=!0,(s=new Uint8Array(3*t)).set(a),a=s)}a[r]=224|o>>12,a[r=r+1|0]=128|o>>6&63}a[r=r+1|0]=128|63&o}}return null===(e=a.subarray(0,r))?new Uint8Array(0):e},shaka.util.StringUtils=function(){},shaka.util.StringUtils.fromUTF8=function(e){if(!e)return"";if(239==(e=shaka.util.BufferUtils.toUint8(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),!/xbox/i.test(navigator.userAgent)&&window.TextDecoder)return(e=(new TextDecoder).decode(e)).includes("")&&shaka.log.alwaysError('Decoded string contains an "unknown character"codepoint.  That probably means the UTF8 encoding was incorrect!'),e;e=shaka.util.StringUtils.fromCharCode(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BAD_ENCODING)}},shaka.util.StringUtils.fromUTF16=function(e,t,a){if(!e)return"";if(!a&&0!=e.byteLength%2)throw shaka.log.error("Data has an incorrect length, must be even."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BAD_ENCODING);var r=Math.floor(e.byteLength/2);a=new Uint16Array(r),e=shaka.util.BufferUtils.toDataView(e);for(var n=(r=$jscomp.makeIterator(shaka.util.Iterables.range(r))).next();!n.done;n=r.next())a[n=n.value]=e.getUint16(2*n,t);return shaka.util.StringUtils.fromCharCode(a)},shaka.util.StringUtils.fromBytesAutoDetect=function(e){var t=shaka.util.StringUtils;if(!e)return"";var a=shaka.util.BufferUtils.toUint8(e);if(239==a[0]&&187==a[1]&&191==a[2])return t.fromUTF8(a);if(254==a[0]&&255==a[1])return t.fromUTF16(a.subarray(2),!1);if(255==a[0]&&254==a[1])return t.fromUTF16(a.subarray(2),!0);function r(e){return a.byteLength<=e||32<=a[e]&&a[e]<=126}if(shaka.log.debug("Unable to find byte-order-mark, making an educated guess."),0==a[0]&&0==a[2])return t.fromUTF16(e,!1);if(0==a[1]&&0==a[3])return t.fromUTF16(e,!0);if(r(0)&&r(1)&&r(2)&&r(3))return t.fromUTF8(e);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.UNABLE_TO_DETECT_ENCODING)},shaka.util.StringUtils.toUTF8=function(e){var t=new shaka.util.TextEncoder;return shaka.util.BufferUtils.toArrayBuffer(t.encode(e))},shaka.util.StringUtils.toUTF16=function(e,t){for(var a=new ArrayBuffer(2*e.length),r=new DataView(a),n=$jscomp.makeIterator(shaka.util.Iterables.enumerate(e)),i=n.next();!i.done;i=n.next()){var i=(o=i.value).i,o=o.item.charCodeAt(0);r.setUint16(2*i,o,t)}return a},shaka.util.StringUtils.fromCharCode=function(e){return shaka.util.StringUtils.fromCharCodeImpl_.value()(e)},shaka.util.StringUtils.resetFromCharCode=function(){shaka.util.StringUtils.fromCharCodeImpl_.reset()},goog.exportSymbol("shaka.util.StringUtils",shaka.util.StringUtils),goog.exportProperty(shaka.util.StringUtils,"resetFromCharCode",shaka.util.StringUtils.resetFromCharCode),goog.exportProperty(shaka.util.StringUtils,"toUTF16",shaka.util.StringUtils.toUTF16),goog.exportProperty(shaka.util.StringUtils,"toUTF8",shaka.util.StringUtils.toUTF8),goog.exportProperty(shaka.util.StringUtils,"fromBytesAutoDetect",shaka.util.StringUtils.fromBytesAutoDetect),goog.exportProperty(shaka.util.StringUtils,"fromUTF16",shaka.util.StringUtils.fromUTF16),goog.exportProperty(shaka.util.StringUtils,"fromUTF8",shaka.util.StringUtils.fromUTF8),shaka.util.StringUtils.fromCharCodeImpl_=new shaka.util.Lazy(function(){for(var e={$jscomp$loop$prop$size$598:65536};0<e.$jscomp$loop$prop$size$598;(e={$jscomp$loop$prop$size$598:e.$jscomp$loop$prop$size$598}).$jscomp$loop$prop$size$598/=2)if(function(e){try{var t=new Uint8Array(e),a=String.fromCharCode.apply(null,t);return goog.asserts.assert(a,"Should get value"),0<a.length}catch(e){return!1}}(e.$jscomp$loop$prop$size$598)){var n=e;return function(e){for(var t="",a=0;a<e.length;a+=n.$jscomp$loop$prop$size$598){var r=e.subarray(a,a+n.$jscomp$loop$prop$size$598);t+=String.fromCharCode.apply(null,r)}return t};return}return goog.asserts.assert(!1,"Unable to create a fromCharCode method"),null}),shaka.util.DataViewReader=function(e,t){this.dataView_=shaka.util.BufferUtils.toDataView(e),this.littleEndian_=t==shaka.util.DataViewReader.Endianness.LITTLE_ENDIAN,this.position_=0},shaka.util.DataViewReader.prototype.getDataView=function(){return this.dataView_},shaka.util.DataViewReader.prototype.hasMoreData=function(){return this.position_<this.dataView_.byteLength},shaka.util.DataViewReader.prototype.getPosition=function(){return this.position_},shaka.util.DataViewReader.prototype.getLength=function(){return this.dataView_.byteLength},shaka.util.DataViewReader.prototype.readUint8=function(){try{var e=this.dataView_.getUint8(this.position_);return this.position_+=1,e}catch(e){throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint16=function(){try{var e=this.dataView_.getUint16(this.position_,this.littleEndian_);return this.position_+=2,e}catch(e){throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint32=function(){try{var e=this.dataView_.getUint32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readInt32=function(){try{var e=this.dataView_.getInt32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint64=function(){try{var e,t;this.littleEndian_?(e=this.dataView_.getUint32(this.position_,!0),t=this.dataView_.getUint32(this.position_+4,!0)):(t=this.dataView_.getUint32(this.position_,!1),e=this.dataView_.getUint32(this.position_+4,!1))}catch(e){throw this.outOfBounds_()}if(2097151<t)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);return this.position_+=8,t*Math.pow(2,32)+e},shaka.util.DataViewReader.prototype.readBytes=function(e){if(goog.asserts.assert(0<=e,"Bad call to DataViewReader.readBytes"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();var t=shaka.util.BufferUtils.toUint8(this.dataView_,this.position_,e);return this.position_+=e,t},shaka.util.DataViewReader.prototype.skip=function(e){if(goog.asserts.assert(0<=e,"Bad call to DataViewReader.skip"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_+=e},shaka.util.DataViewReader.prototype.rewind=function(e){if(goog.asserts.assert(0<=e,"Bad call to DataViewReader.rewind"),this.position_<e)throw this.outOfBounds_();this.position_-=e},shaka.util.DataViewReader.prototype.seek=function(e){if(goog.asserts.assert(0<=e,"Bad call to DataViewReader.seek"),e<0||e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_=e},shaka.util.DataViewReader.prototype.readTerminatedString=function(){for(var e=this.position_;this.hasMoreData()&&0!=this.dataView_.getUint8(this.position_);)this.position_+=1;return e=shaka.util.BufferUtils.toUint8(this.dataView_,e,this.position_-e),this.position_+=1,shaka.util.StringUtils.fromUTF8(e)},shaka.util.DataViewReader.prototype.outOfBounds_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)},goog.exportSymbol("shaka.util.DataViewReader",shaka.util.DataViewReader),goog.exportProperty(shaka.util.DataViewReader.prototype,"readTerminatedString",shaka.util.DataViewReader.prototype.readTerminatedString),goog.exportProperty(shaka.util.DataViewReader.prototype,"seek",shaka.util.DataViewReader.prototype.seek),goog.exportProperty(shaka.util.DataViewReader.prototype,"rewind",shaka.util.DataViewReader.prototype.rewind),goog.exportProperty(shaka.util.DataViewReader.prototype,"skip",shaka.util.DataViewReader.prototype.skip),goog.exportProperty(shaka.util.DataViewReader.prototype,"readBytes",shaka.util.DataViewReader.prototype.readBytes),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint64",shaka.util.DataViewReader.prototype.readUint64),goog.exportProperty(shaka.util.DataViewReader.prototype,"readInt32",shaka.util.DataViewReader.prototype.readInt32),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint32",shaka.util.DataViewReader.prototype.readUint32),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint16",shaka.util.DataViewReader.prototype.readUint16),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint8",shaka.util.DataViewReader.prototype.readUint8),goog.exportProperty(shaka.util.DataViewReader.prototype,"getLength",shaka.util.DataViewReader.prototype.getLength),goog.exportProperty(shaka.util.DataViewReader.prototype,"getPosition",shaka.util.DataViewReader.prototype.getPosition),goog.exportProperty(shaka.util.DataViewReader.prototype,"hasMoreData",shaka.util.DataViewReader.prototype.hasMoreData),shaka.util.DataViewReader.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:1},goog.exportProperty(shaka.util.DataViewReader,"Endianness",shaka.util.DataViewReader.Endianness),shaka.deprecate={},shaka.deprecate.Version=function(e,t){this.major_=e,this.minor_=t},shaka.deprecate.Version.prototype.major=function(){return this.major_},shaka.deprecate.Version.prototype.minor=function(){return this.minor_},shaka.deprecate.Version.prototype.compareTo=function(e){var t=this.minor_-e.minor_;return this.major_-e.major_||t},shaka.deprecate.Version.prototype.toString=function(){return"v"+this.major_+"."+this.minor_},shaka.deprecate.Version.parse=function(e){return e=e.substring(1).split(".",2),new shaka.deprecate.Version(Number(e[0]),Number(e[1]))},shaka.deprecate.Enforcer=function(e,t,a){this.libraryVersion_=e,this.onPending_=t,this.onExpired_=a},shaka.deprecate.Enforcer.prototype.enforce=function(e,t,a){(0<e.compareTo(this.libraryVersion_)?this.onPending_:this.onExpired_)(this.libraryVersion_,e,t,a)},shaka.Deprecate=function(){},shaka.Deprecate.init=function(e){goog.asserts.assert(null==shaka.Deprecate.enforcer_,"Deprecate.init should only be called once."),shaka.Deprecate.enforcer_=new shaka.deprecate.Enforcer(shaka.deprecate.Version.parse(e),shaka.Deprecate.onPending_,shaka.Deprecate.onExpired_)},shaka.Deprecate.deprecateFeature=function(e,t,a){var r=shaka.Deprecate.enforcer_;goog.asserts.assert(r,"Missing deprecation enforcer. Was |init| called?"),e=new shaka.deprecate.Version(e,0),r.enforce(e,t,a)},shaka.Deprecate.onPending_=function(e,t,a,r){shaka.log.alwaysWarn([a,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))},shaka.Deprecate.onExpired_=function(e,t,a,r){e=[a,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""),shaka.log.alwaysError(e),goog.asserts.assert(!1,e)},shaka.Deprecate.enforcer_=null,shaka.util.Functional=function(){},shaka.util.Functional.createFallbackPromiseChain=function(e,a){return e.reduce(function(e,t){return e.catch(function(){return a(t)})},Promise.reject())},shaka.util.Functional.collapseArrays=function(e,t){return e.concat(t)},shaka.util.Functional.ignored=function(e){},shaka.util.Functional.noop=function(){},shaka.util.Functional.isNotNull=function(e){return null!=e},shaka.util.Functional.callFactory=function(t){var e=Object.create(t.prototype||Object.prototype);try{var a=t.call(e);a||(shaka.Deprecate.deprecateFeature(4,"Factories requiring new","Factories should be plain functions"),a=e)}catch(e){shaka.Deprecate.deprecateFeature(4,"Factories requiring new","Factories should be plain functions"),a=new t}return a},shaka.util.Mp4Parser=function(){this.headers_=[],this.boxDefinitions_=[],this.done_=!1},shaka.util.Mp4Parser.prototype.box=function(e,t){e=shaka.util.Mp4Parser.typeFromString_(e);return this.headers_[e]=shaka.util.Mp4Parser.BoxType_.BASIC_BOX,this.boxDefinitions_[e]=t,this},shaka.util.Mp4Parser.prototype.fullBox=function(e,t){e=shaka.util.Mp4Parser.typeFromString_(e);return this.headers_[e]=shaka.util.Mp4Parser.BoxType_.FULL_BOX,this.boxDefinitions_[e]=t,this},shaka.util.Mp4Parser.prototype.stop=function(){this.done_=!0},shaka.util.Mp4Parser.prototype.parse=function(e,t,a){for(e=new shaka.util.DataViewReader(e,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),this.done_=!1;e.hasMoreData()&&!this.done_;)this.parseNext(0,e,t,a)},shaka.util.Mp4Parser.prototype.parseNext=function(e,t,a,r){var n=t.getPosition();if(r&&n+8>t.getLength())this.done_=!0;else{var i=t.readUint32(),o=t.readUint32(),s=shaka.util.Mp4Parser.typeToString(o),l=!1;switch(shaka.log.v2("Parsing MP4 box",s),i){case 0:i=t.getLength()-n;break;case 1:if(r&&t.getPosition()+8>t.getLength())return void(this.done_=!0);i=t.readUint64(),l=!0}if(s=this.boxDefinitions_[o]){var u=null,c=null;if(this.headers_[o]==shaka.util.Mp4Parser.BoxType_.FULL_BOX){if(r&&t.getPosition()+4>t.getLength())return void(this.done_=!0);u=(c=t.readUint32())>>>24,c&=16777215}o=n+i,a&&o>t.getLength()&&(o=t.getLength()),r&&o>t.getLength()?this.done_=!0:(t=0<(r=o-t.getPosition())?t.readBytes(r):new Uint8Array(0),s({parser:this,partialOkay:a||!1,version:u,flags:c,reader:t=new shaka.util.DataViewReader(t,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),size:i,start:n+e,has64BitSize:l}))}else e=Math.min(n+i-t.getPosition(),t.getLength()-t.getPosition()),t.skip(e)}},shaka.util.Mp4Parser.children=function(e){for(var t=shaka.util.Mp4Parser.headerSize(e);e.reader.hasMoreData()&&!e.parser.done_;)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)},shaka.util.Mp4Parser.sampleDescription=function(e){for(var t=shaka.util.Mp4Parser.headerSize(e),a=e.reader.readUint32(),r=(a=$jscomp.makeIterator(shaka.util.Iterables.range(a))).next();!r.done&&(shaka.util.Functional.ignored(r.value),e.parser.parseNext(e.start+t,e.reader,e.partialOkay),!e.parser.done_);r=a.next());},shaka.util.Mp4Parser.allData=function(a){return function(e){var t=e.reader.getLength()-e.reader.getPosition();a(e.reader.readBytes(t))}},shaka.util.Mp4Parser.typeFromString_=function(e){goog.asserts.assert(4==e.length,"Mp4 box names must be 4 characters long");for(var t=0,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())t=t<<8|a.value.charCodeAt(0);return t},shaka.util.Mp4Parser.typeToString=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},shaka.util.Mp4Parser.headerSize=function(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)},goog.exportSymbol("shaka.util.Mp4Parser",shaka.util.Mp4Parser),goog.exportProperty(shaka.util.Mp4Parser,"headerSize",shaka.util.Mp4Parser.headerSize),goog.exportProperty(shaka.util.Mp4Parser,"typeToString",shaka.util.Mp4Parser.typeToString),goog.exportProperty(shaka.util.Mp4Parser,"allData",shaka.util.Mp4Parser.allData),goog.exportProperty(shaka.util.Mp4Parser,"sampleDescription",shaka.util.Mp4Parser.sampleDescription),goog.exportProperty(shaka.util.Mp4Parser,"children",shaka.util.Mp4Parser.children),goog.exportProperty(shaka.util.Mp4Parser.prototype,"parseNext",shaka.util.Mp4Parser.prototype.parseNext),goog.exportProperty(shaka.util.Mp4Parser.prototype,"parse",shaka.util.Mp4Parser.prototype.parse),goog.exportProperty(shaka.util.Mp4Parser.prototype,"stop",shaka.util.Mp4Parser.prototype.stop),goog.exportProperty(shaka.util.Mp4Parser.prototype,"fullBox",shaka.util.Mp4Parser.prototype.fullBox),goog.exportProperty(shaka.util.Mp4Parser.prototype,"box",shaka.util.Mp4Parser.prototype.box),shaka.util.Mp4Parser.BoxType_={BASIC_BOX:0,FULL_BOX:1},shaka.util.DelayedTick=function(e){this.onTick_=e,this.cancelPending_=null},shaka.util.DelayedTick.prototype.tickAfter=function(e){var t=this,a=(this.stop(),!0),r=null;return this.cancelPending_=function(){window.clearTimeout(r),a=!1},r=window.setTimeout(function(){a&&t.onTick_()},1e3*e),this},shaka.util.DelayedTick.prototype.stop=function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)},shaka.util.Timer=function(e){this.onTick_=e,this.ticker_=null},shaka.util.Timer.prototype.tickNow=function(){return this.stop(),this.onTick_(),this},shaka.util.Timer.prototype.tickAfter=function(e){var t=this;return this.stop(),this.ticker_=new shaka.util.DelayedTick(function(){t.onTick_()}).tickAfter(e),this},shaka.util.Timer.prototype.tickEvery=function(e){var t=this;return this.stop(),this.ticker_=new shaka.util.DelayedTick(function(){t.ticker_.tickAfter(e),t.onTick_()}).tickAfter(e),this},shaka.util.Timer.prototype.stop=function(){this.ticker_&&(this.ticker_.stop(),this.ticker_=null)},goog.exportSymbol("shaka.util.Timer",shaka.util.Timer),goog.exportProperty(shaka.util.Timer.prototype,"stop",shaka.util.Timer.prototype.stop),goog.exportProperty(shaka.util.Timer.prototype,"tickEvery",shaka.util.Timer.prototype.tickEvery),goog.exportProperty(shaka.util.Timer.prototype,"tickAfter",shaka.util.Timer.prototype.tickAfter),goog.exportProperty(shaka.util.Timer.prototype,"tickNow",shaka.util.Timer.prototype.tickNow),shaka.util.Platform=function(){},shaka.util.Platform.supportsMediaSource=function(){return!(!window.MediaSource||!MediaSource.isTypeSupported)},shaka.util.Platform.supportsMediaType=function(e){return""!=shaka.util.Platform.anyMediaElement().canPlayType(e)},shaka.util.Platform.isEdge=function(){return!!navigator.userAgent.match(/Edge?\//)},shaka.util.Platform.isLegacyEdge=function(){return!!navigator.userAgent.match(/Edge\//)},shaka.util.Platform.isIE=function(){return shaka.util.Platform.userAgentContains_("Trident/")},shaka.util.Platform.isXbox=function(){return shaka.util.Platform.userAgentContains_("Xbox")},shaka.util.Platform.isXboxOne=function(){return shaka.util.Platform.userAgentContains_("Xbox One")},shaka.util.Platform.isXboxSeriesX=function(){return shaka.util.Platform.userAgentContains_("Xbox Series X")},shaka.util.Platform.isTizen=function(){return shaka.util.Platform.userAgentContains_("Tizen")},shaka.util.Platform.isTizen4=function(){return shaka.util.Platform.userAgentContains_("Tizen 4")},shaka.util.Platform.isTizen3=function(){return shaka.util.Platform.userAgentContains_("Tizen 3")},shaka.util.Platform.isTizen2=function(){return shaka.util.Platform.userAgentContains_("Tizen 2")},shaka.util.Platform.isWebOS=function(){return shaka.util.Platform.userAgentContains_("Web0S")},shaka.util.Platform.isChromecast=function(){return shaka.util.Platform.userAgentContains_("CrKey")},shaka.util.Platform.isChrome=function(){return shaka.util.Platform.userAgentContains_("Chrome")&&!shaka.util.Platform.isEdge()},shaka.util.Platform.isApple=function(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!shaka.util.Platform.isTizen()},shaka.util.Platform.safariVersion=function(){var e;return shaka.util.Platform.isApple()&&(e=(e=navigator.userAgent.match(/Version\/(\d+)/))||navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null},shaka.util.Platform.isMobile=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||shaka.util.Platform.isApple()&&1<navigator.maxTouchPoints},shaka.util.Platform.userAgentContains_=function(e){return(navigator.userAgent||"").includes(e)},shaka.util.Platform.anyMediaElement=function(){var e=shaka.util.Platform;return e.cachedMediaElement_||(e.cacheExpirationTimer_||(e.cacheExpirationTimer_=new shaka.util.Timer(function(){e.cachedMediaElement_=null})),e.cachedMediaElement_=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0],e.cachedMediaElement_||(e.cachedMediaElement_=document.createElement("video")),e.cacheExpirationTimer_.tickAfter(1)),e.cachedMediaElement_},shaka.util.Platform.requiresEncryptionInfoInAllInitSegments=function(){var e=shaka.util.Platform;return e.isTizen()||e.isXboxOne()},shaka.util.Platform.cacheExpirationTimer_=null,shaka.util.Platform.cachedMediaElement_=null,shaka.util.Uint8ArrayUtils=function(){},shaka.util.Uint8ArrayUtils.equal=function(e,t){return shaka.Deprecate.deprecateFeature(4,"shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),shaka.util.BufferUtils.equal(e,t)},shaka.util.Uint8ArrayUtils.toStandardBase64=function(e){return e=shaka.util.StringUtils.fromCharCode(shaka.util.BufferUtils.toUint8(e)),btoa(e)},shaka.util.Uint8ArrayUtils.toBase64=function(e,t){t=null==t||t;e=shaka.util.Uint8ArrayUtils.toStandardBase64(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")},shaka.util.Uint8ArrayUtils.fromBase64=function(e){var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/"));e=new Uint8Array(t.length);for(var a=(t=$jscomp.makeIterator(shaka.util.Iterables.enumerate(t))).next();!a.done;a=t.next())e[(a=a.value).i]=a.item.charCodeAt(0);return e},shaka.util.Uint8ArrayUtils.fromHex=function(e){for(var t=e.length/2,a=new Uint8Array(t),r=(t=$jscomp.makeIterator(shaka.util.Iterables.range(t))).next();!r.done;r=t.next())a[r=r.value]=window.parseInt(e.substr(2*r,2),16);return a},shaka.util.Uint8ArrayUtils.toHex=function(e){var t=shaka.util.BufferUtils.toUint8(e);e="";for(var a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next())e+=a=1==(a=(a=a.value).toString(16)).length?"0"+a:a;return e},shaka.util.Uint8ArrayUtils.concat=function(e){for(var t=[],a=0;a<arguments.length;++a)t[+a]=arguments[a];for(var r=0,n=$jscomp.makeIterator(t),a=n.next();!a.done;a=n.next())r+=a.value.byteLength;for(r=new Uint8Array(r),n=0,a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next())a=a.value,r.set(shaka.util.BufferUtils.toUint8(a),n),n+=a.byteLength;return r},goog.exportSymbol("shaka.util.Uint8ArrayUtils",shaka.util.Uint8ArrayUtils),goog.exportProperty(shaka.util.Uint8ArrayUtils,"concat",shaka.util.Uint8ArrayUtils.concat),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toHex",shaka.util.Uint8ArrayUtils.toHex),goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromHex",shaka.util.Uint8ArrayUtils.fromHex),goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromBase64",shaka.util.Uint8ArrayUtils.fromBase64),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toBase64",shaka.util.Uint8ArrayUtils.toBase64),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toStandardBase64",shaka.util.Uint8ArrayUtils.toStandardBase64),goog.exportProperty(shaka.util.Uint8ArrayUtils,"equal",shaka.util.Uint8ArrayUtils.equal),shaka.media={},shaka.media.ContentWorkarounds=function(){},shaka.media.ContentWorkarounds.fakeEncryption=function(e){var t,a=shaka.media.ContentWorkarounds,r=(e=shaka.util.BufferUtils.toUint8(e),!1),n=[],i=function(e){n.push(e),shaka.util.Mp4Parser.children(e)},o=function(e){r=!0},s=[];if((new shaka.util.Mp4Parser).box("moov",i).box("trak",i).box("mdia",i).box("minf",i).box("stbl",i).fullBox("stsd",function(e){t=e,n.push(e),shaka.util.Mp4Parser.sampleDescription(e)}).fullBox("encv",o).fullBox("enca",o).fullBox("avc1",function(e){s.push({box:e,newType:a.BOX_TYPE_ENCV_})}).fullBox("ec-3",function(e){s.push({box:e,newType:a.BOX_TYPE_ENCA_})}).fullBox("mp4a",function(e){s.push({box:e,newType:a.BOX_TYPE_ENCA_})}).parse(e),r)shaka.log.debug("Init segment already indicates encryption.");else{if(0==s.length||!t)throw shaka.log.error("Failed to find boxes needed to fake encryption!"),shaka.log.v2("Failed init segment (hex):",shaka.util.Uint8ArrayUtils.toHex(e)),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.CONTENT_TRANSFORMATION_FAILED);for(s.reverse(),o=(i=$jscomp.makeIterator(s)).next();!o.done;o=i.next()){var o=o.value,l=shaka.util.Mp4Parser.typeToString(o.newType);shaka.log.debug('Inserting "'+l+'" box into init segment.'),e=a.insertEncryptionMetadata_(e,t,o.box,n,o.newType)}}return e},shaka.media.ContentWorkarounds.insertEncryptionMetadata_=function(e,t,a,r,n){var i=shaka.media.ContentWorkarounds,o=i.createEncryptionMetadata_(e,a,n),s=(n=new Uint8Array(e.byteLength+o.byteLength),a=shaka.util.Platform.isXboxOne()?a.start:a.start+a.size,e.subarray(0,a));for(e=e.subarray(a),n.set(s),n.set(o,a),n.set(e,a+o.byteLength),e=(r=$jscomp.makeIterator(r)).next();!e.done;e=r.next())e=e.value,goog.asserts.assert(e.start<a,"Ancestor MP4 box found in the wrong location!  Modified init segment will not make sense!"),i.updateBoxSize_(n,e.start,e.size+o.byteLength);return i=shaka.util.BufferUtils.toDataView(n,t.start),t=shaka.util.Mp4Parser.headerSize(t),o=i.getUint32(t),i.setUint32(t,o+1),n},shaka.media.ContentWorkarounds.createEncryptionMetadata_=function(e,t,a){var r=shaka.media.ContentWorkarounds,n=r.CANNED_SINF_BOX_.value(),i=e.subarray(t.start,t.start+t.size),o=shaka.util.BufferUtils.toDataView(i);return(e=new Uint8Array(t.size+n.byteLength)).set(i,0),(i=shaka.util.BufferUtils.toDataView(e)).setUint32(r.BOX_TYPE_OFFSET_,a),e.set(n,t.size),a=o.getUint32(r.BOX_TYPE_OFFSET_),i.setUint32(t.size+r.CANNED_SINF_BOX_FORMAT_OFFSET_,a),r.updateBoxSize_(e,0,e.byteLength),e},shaka.media.ContentWorkarounds.updateBoxSize_=function(e,t,a){var r=shaka.media.ContentWorkarounds;0!=(t=(e=shaka.util.BufferUtils.toDataView(e,t)).getUint32(r.BOX_SIZE_OFFSET_))&&(1==t?(e.setUint32(r.BOX_SIZE_64_OFFSET_,a>>32),e.setUint32(r.BOX_SIZE_64_OFFSET_+4,4294967295&a)):e.setUint32(r.BOX_SIZE_OFFSET_,a))},shaka.media.ContentWorkarounds.CANNED_SINF_BOX_=new shaka.util.Lazy(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}),shaka.media.ContentWorkarounds.CANNED_SINF_BOX_FORMAT_OFFSET_=16,shaka.media.ContentWorkarounds.BOX_SIZE_OFFSET_=0,shaka.media.ContentWorkarounds.BOX_TYPE_OFFSET_=4,shaka.media.ContentWorkarounds.BOX_SIZE_64_OFFSET_=8,shaka.media.ContentWorkarounds.BOX_TYPE_ENCV_=1701733238,shaka.media.ContentWorkarounds.BOX_TYPE_ENCA_=1701733217,shaka.util.ArrayUtils=function(){},shaka.util.ArrayUtils.defaultEquals=function(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t},shaka.util.ArrayUtils.remove=function(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)},shaka.util.ArrayUtils.count=function(e,t){for(var a=0,r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())a+=t(n.value)?1:0;return a},shaka.util.ArrayUtils.hasSameElements=function(e,t,a){if(a=a||shaka.util.ArrayUtils.defaultEquals,e.length!=t.length)return!1;t=t.slice();for(var r={},n=(e=$jscomp.makeIterator(e)).next();!n.done;r={$jscomp$loop$prop$item$600:r.$jscomp$loop$prop$item$600},n=e.next()){if(r.$jscomp$loop$prop$item$600=n.value,-1==(n=t.findIndex(function(t){return function(e){return a(t.$jscomp$loop$prop$item$600,e)}}(r))))return!1;t[n]=t[t.length-1],t.pop()}return 0==t.length},shaka.util.ArrayUtils.equal=function(e,t,a){if(a=a||shaka.util.ArrayUtils.defaultEquals,e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0},shaka.text={},shaka.text.Cue=function(e,t,a){var r=shaka.text.Cue;this.startTime=e,this.direction=r.direction.HORIZONTAL_LEFT_TO_RIGHT,this.endTime=t,this.payload=a,this.region=new shaka.text.CueRegion,this.position=null,this.positionAlign=r.positionAlign.AUTO,this.size=0,this.textAlign=r.textAlign.CENTER,this.writingMode=r.writingMode.HORIZONTAL_TOP_TO_BOTTOM,this.lineInterpretation=r.lineInterpretation.LINE_NUMBER,this.line=null,this.lineHeight="",this.lineAlign=r.lineAlign.START,this.displayAlign=r.displayAlign.AFTER,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=r.fontWeight.NORMAL,this.fontStyle=r.fontStyle.NORMAL,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=!1,this.cellResolution={columns:32,rows:15}},shaka.text.Cue.lineBreak=function(e,t){e=new shaka.text.Cue(e,t,"");return e.lineBreak=!0,e},shaka.text.Cue.prototype.clone=function(){var e,t=new shaka.text.Cue(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},shaka.text.Cue.equal=function(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var a in e)if("startTime"!=a&&"endTime"!=a&&"payload"!=a)if("nestedCues"==a){if(!shaka.util.ArrayUtils.equal(e.nestedCues,t.nestedCues,shaka.text.Cue.equal))return!1}else if("region"==a||"cellResolution"==a){for(var r in e[a])if(e[a][r]!=t[a][r])return!1}else if(Array.isArray(e[a])){if(!shaka.util.ArrayUtils.equal(e[a],t[a]))return!1}else if(e[a]!=t[a])return!1;return!0},goog.exportSymbol("shaka.text.Cue",shaka.text.Cue),shaka.text.Cue.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:"auto"},goog.exportProperty(shaka.text.Cue,"positionAlign",shaka.text.Cue.positionAlign),shaka.text.Cue.textAlign={LEFT:"left",RIGHT:"right",CENTER:"center",START:"start",END:"end"},goog.exportProperty(shaka.text.Cue,"textAlign",shaka.text.Cue.textAlign),shaka.text.Cue.displayAlign={BEFORE:"before",CENTER:"center",AFTER:"after"},goog.exportProperty(shaka.text.Cue,"displayAlign",shaka.text.Cue.displayAlign),shaka.text.Cue.direction={HORIZONTAL_LEFT_TO_RIGHT:"ltr",HORIZONTAL_RIGHT_TO_LEFT:"rtl"},goog.exportProperty(shaka.text.Cue,"direction",shaka.text.Cue.direction),shaka.text.Cue.writingMode={HORIZONTAL_TOP_TO_BOTTOM:"horizontal-tb",VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},goog.exportProperty(shaka.text.Cue,"writingMode",shaka.text.Cue.writingMode),shaka.text.Cue.lineInterpretation={LINE_NUMBER:0,PERCENTAGE:1},goog.exportProperty(shaka.text.Cue,"lineInterpretation",shaka.text.Cue.lineInterpretation),shaka.text.Cue.lineAlign={CENTER:"center",START:"start",END:"end"},goog.exportProperty(shaka.text.Cue,"lineAlign",shaka.text.Cue.lineAlign),shaka.text.Cue.defaultTextColor={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"},goog.exportProperty(shaka.text.Cue,"defaultTextColor",shaka.text.Cue.defaultTextColor),shaka.text.Cue.defaultTextBackgroundColor={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"},goog.exportProperty(shaka.text.Cue,"defaultTextBackgroundColor",shaka.text.Cue.defaultTextBackgroundColor),shaka.text.Cue.fontWeight={NORMAL:400,BOLD:700},goog.exportProperty(shaka.text.Cue,"fontWeight",shaka.text.Cue.fontWeight),shaka.text.Cue.fontStyle={NORMAL:"normal",ITALIC:"italic",OBLIQUE:"oblique"},goog.exportProperty(shaka.text.Cue,"fontStyle",shaka.text.Cue.fontStyle),shaka.text.Cue.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},goog.exportProperty(shaka.text.Cue,"textDecoration",shaka.text.Cue.textDecoration),shaka.text.CueRegion=function(){var e=shaka.text.CueRegion;this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=e.units.PERCENTAGE,this.scroll=e.scrollMode.NONE},goog.exportSymbol("shaka.text.CueRegion",shaka.text.CueRegion),shaka.text.CueRegion.units={PX:0,PERCENTAGE:1,LINES:2},goog.exportProperty(shaka.text.CueRegion,"units",shaka.text.CueRegion.units),shaka.text.CueRegion.scrollMode={NONE:"",UP:"up"},goog.exportProperty(shaka.text.CueRegion,"scrollMode",shaka.text.CueRegion.scrollMode),shaka.cea={},shaka.cea.ICaptionDecoder=function(){},shaka.cea.ICaptionDecoder.prototype.extract=function(e,t){},shaka.cea.ICaptionDecoder.prototype.decode=function(){},shaka.cea.ICaptionDecoder.prototype.clear=function(){},shaka.cea.CeaUtils=function(){},shaka.cea.CeaUtils.getParsedCaption=function(e,t,a,r,n){if(n<=r)return null;for(var i=-1,o=-1,s=0;s<a.length;s++)if(a[s].some(function(e){return null!=e&&""!=e.getChar().trim()})){i=s;break}for(s=a.length-1;0<=s;s--)if(a[s].some(function(e){return null!=e&&""!=e.getChar().trim()})){o=s;break}if(-1===i||-1===o)return null;for(var l=s=!1,u=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,c=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,d=shaka.cea.CeaUtils.createStyledCue(r,n,s,l,u,c);i<=o;i++){for(var h,p,f,m,g=a[i],y=-1,v=-1,_=0;_<g.length;_++)if(null!=g[_]&&""!==g[_].getChar().trim()){y=_;break}for(_=g.length-1;0<=_;_--)if(null!=g[_]&&""!==g[_].getChar().trim()){v=_;break}if(-1===y||-1===v)g=shaka.cea.CeaUtils.createLineBreakCue(r,n),e.nestedCues.push(g);else{for(;y<=v;y++)(_=g[y])?(h=_.isUnderlined(),p=_.isItalicized(),f=_.getTextColor(),m=_.getBackgroundColor(),h==s&&p==l&&f==u&&m==c||(d.payload&&e.nestedCues.push(d),d=shaka.cea.CeaUtils.createStyledCue(r,n,h,p,f,m),s=h,l=p,u=f,c=m),d.payload+=_.getChar()):d.payload+=" ";d.payload&&e.nestedCues.push(d),i!==o&&(d=shaka.cea.CeaUtils.createLineBreakCue(r,n),e.nestedCues.push(d)),d=shaka.cea.CeaUtils.createStyledCue(r,n,s,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null},shaka.cea.CeaUtils.createStyledCue=function(e,t,a,r,n,i){return e=new shaka.text.Cue(e,t,""),a&&e.textDecoration.push(shaka.text.Cue.textDecoration.UNDERLINE),r&&(e.fontStyle=shaka.text.Cue.fontStyle.ITALIC),e.color=n,e.backgroundColor=i,e},shaka.cea.CeaUtils.createLineBreakCue=function(e,t){e=new shaka.text.Cue(e,t,"");return e.lineBreak=!0,e},shaka.cea.CeaUtils.StyledChar=function(e,t,a,r,n){this.character_=e,this.underline_=t,this.italics_=a,this.backgroundColor_=r,this.textColor_=n},shaka.cea.CeaUtils.StyledChar.prototype.getChar=function(){return this.character_},shaka.cea.CeaUtils.StyledChar.prototype.isUnderlined=function(){return this.underline_},shaka.cea.CeaUtils.StyledChar.prototype.isItalicized=function(){return this.italics_},shaka.cea.CeaUtils.StyledChar.prototype.getBackgroundColor=function(){return this.backgroundColor_},shaka.cea.CeaUtils.StyledChar.prototype.getTextColor=function(){return this.textColor_},shaka.cea.CeaUtils.DEFAULT_BG_COLOR="black",shaka.cea.CeaUtils.DEFAULT_TXT_COLOR="white",shaka.cea.Cea708Window=function(e){this.windowNum_=e,this.relativeToggle_=this.visible_=!1,this.colCount_=this.rowCount_=this.anchorId_=this.verticalAnchor_=this.horizontalAnchor_=0,this.justification_=shaka.cea.Cea708Window.TextJustification.CENTER,this.memory_=[],this.col_=this.row_=this.startTime_=0,this.underline_=this.italics_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,this.resetMemory(),shaka.util.Functional.ignored(this.verticalAnchor_,this.relativeToggle_,this.horizontalAnchor_,this.anchorId_,this.windowNum_)},shaka.cea.Cea708Window.prototype.defineWindow=function(e,t,a,r,n,i,o){this.visible_=e,this.verticalAnchor_=t,this.horizontalAnchor_=a,this.anchorId_=r,this.relativeToggle_=n,this.rowCount_=i,this.colCount_=o},shaka.cea.Cea708Window.prototype.resetMemory=function(){this.memory_=[];for(var e=0;e<shaka.cea.Cea708Window.MAX_ROWS;e++)this.memory_.push(this.createNewRow_())},shaka.cea.Cea708Window.prototype.createNewRow_=function(){for(var e=[],t=0;t<shaka.cea.Cea708Window.MAX_COLS;t++)e.push(null);return e},shaka.cea.Cea708Window.prototype.setCharacter=function(e){this.isPenInBounds_()&&(e=new shaka.cea.CeaUtils.StyledChar(e,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.memory_[this.row_][this.col_]=e,this.col_++)},shaka.cea.Cea708Window.prototype.backspace=function(){!this.isPenInBounds_()||this.col_<=0&&this.row_<=0||(this.col_<=0?(this.col_=this.colCount_-1,this.row_--):this.col_--,this.memory_[this.row_][this.col_]=null)},shaka.cea.Cea708Window.prototype.isPenInBounds_=function(){var e=this.col_<this.colCount_&&0<=this.col_;return this.row_<this.rowCount_&&0<=this.row_&&e},shaka.cea.Cea708Window.prototype.isVisible=function(){return this.visible_},shaka.cea.Cea708Window.prototype.moveUpRows_=function(e){for(var t=0,a=e;a<shaka.cea.Cea708Window.MAX_ROWS;a++,t++)this.memory_[t]=this.memory_[a];for(a=0;a<e;a++,t++)this.memory_[t]=this.createNewRow_()},shaka.cea.Cea708Window.prototype.carriageReturn=function(){this.row_+1>=this.rowCount_?this.moveUpRows_(1):this.row_++,this.col_=0},shaka.cea.Cea708Window.prototype.horizontalCarriageReturn=function(){this.memory_[this.row_]=this.createNewRow_(),this.col_=0},shaka.cea.Cea708Window.prototype.forceEmit=function(e,t){var t="svc"+t,a=shaka.cea.Cea708Window.TextJustification,r=new shaka.text.Cue(this.startTime_,e,"");return r.textAlign=this.justification_===a.LEFT?shaka.text.Cue.textAlign.LEFT:this.justification_===a.RIGHT?shaka.text.Cue.textAlign.RIGHT:shaka.text.Cue.textAlign.CENTER,(t=shaka.cea.CeaUtils.getParsedCaption(r,t,this.memory_,this.startTime_,e))&&this.setStartTime(e),t},shaka.cea.Cea708Window.prototype.setPenLocation=function(e,t){this.row_=e,this.col_=t},shaka.cea.Cea708Window.prototype.setPenBackgroundColor=function(e){this.backgroundColor_=e},shaka.cea.Cea708Window.prototype.setPenTextColor=function(e){this.textColor_=e},shaka.cea.Cea708Window.prototype.setPenUnderline=function(e){this.underline_=e},shaka.cea.Cea708Window.prototype.setPenItalics=function(e){this.italics_=e},shaka.cea.Cea708Window.prototype.resetPen=function(){this.col_=this.row_=0,this.italics_=this.underline_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR},shaka.cea.Cea708Window.prototype.setJustification=function(e){this.justification_=e},shaka.cea.Cea708Window.prototype.display=function(){this.visible_=!0},shaka.cea.Cea708Window.prototype.hide=function(){this.visible_=!1},shaka.cea.Cea708Window.prototype.toggle=function(){this.visible_=!this.visible_},shaka.cea.Cea708Window.prototype.setStartTime=function(e){this.startTime_=e},shaka.cea.Cea708Window.TextJustification={LEFT:0,RIGHT:1,CENTER:2,FULL:3},shaka.cea.Cea708Window.MAX_COLS=42,shaka.cea.Cea708Window.MAX_ROWS=15,shaka.cea.DtvccPacketBuilder=function(){this.builtPackets_=[],this.currentPacketBeingBuilt_=null,this.bytesLeftToAddInCurrentPacket_=0},shaka.cea.DtvccPacketBuilder.prototype.addByte=function(e){e.type===shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START?(this.bytesLeftToAddInCurrentPacket_=2*(63&e.value)-1,this.currentPacketBeingBuilt_=[]):this.currentPacketBeingBuilt_&&(0<this.bytesLeftToAddInCurrentPacket_&&(this.currentPacketBeingBuilt_.push(e),this.bytesLeftToAddInCurrentPacket_--),0===this.bytesLeftToAddInCurrentPacket_)&&(e=new shaka.cea.DtvccPacket(this.currentPacketBeingBuilt_),this.builtPackets_.push(e),this.currentPacketBeingBuilt_=null,this.bytesLeftToAddInCurrentPacket_=0)},shaka.cea.DtvccPacketBuilder.prototype.getBuiltPackets=function(){return this.builtPackets_},shaka.cea.DtvccPacketBuilder.prototype.clearBuiltPackets=function(){this.builtPackets_=[]},shaka.cea.DtvccPacketBuilder.prototype.clear=function(){this.builtPackets_=[],this.currentPacketBeingBuilt_=[],this.bytesLeftToAddInCurrentPacket_=0},shaka.cea.DtvccPacket=function(e){this.pos_=0,this.packetData_=e},shaka.cea.DtvccPacket.prototype.hasMoreData=function(){return this.pos_<this.packetData_.length},shaka.cea.DtvccPacket.prototype.getPosition=function(){return this.pos_},shaka.cea.DtvccPacket.prototype.readByte=function(){if(this.hasMoreData())return this.packetData_[this.pos_++];throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)},shaka.cea.DtvccPacket.prototype.skip=function(e){if(this.pos_+e>this.packetData_.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS);this.pos_+=e},shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA=2,shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START=3,shaka.cea.Cea708Service=function(e){this.serviceNumber_=e,this.windows_=[null,null,null,null,null,null,null,null],this.currentWindow_=null},shaka.cea.Cea708Service.prototype.handleCea708ControlCode=function(e){var t=(a=e.readByte()).value,a=a.pts;return 0<=(t=t===shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1?t<<16|e.readByte().value:t)&&t<=31?this.handleC0_(t,a):128<=t&&t<=159?this.handleC1_(e,t,a):(4096<=t&&t<=4127?this.handleC2_(e,255&t):4224<=t&&t<=4255?this.handleC3_(e,255&t):32<=t&&t<=127?this.handleG0_(t):160<=t&&t<=255?this.handleG1_(t):4128<=t&&t<=4223?this.handleG2_(255&t):4256<=t&&t<=4351&&this.handleG3_(255&t),null)},shaka.cea.Cea708Service.prototype.handleG0_=function(e){this.currentWindow_&&(127===e?this.currentWindow_.setCharacter(""):this.currentWindow_.setCharacter(String.fromCharCode(e)))},shaka.cea.Cea708Service.prototype.handleG1_=function(e){this.currentWindow_&&this.currentWindow_.setCharacter(String.fromCharCode(e))},shaka.cea.Cea708Service.prototype.handleG2_=function(e){this.currentWindow_&&(shaka.cea.Cea708Service.G2Charset.has(e)?(e=shaka.cea.Cea708Service.G2Charset.get(e),this.currentWindow_.setCharacter(e)):this.currentWindow_.setCharacter("_"))},shaka.cea.Cea708Service.prototype.handleG3_=function(e){this.currentWindow_&&(160!=e?this.currentWindow_.setCharacter("_"):this.currentWindow_.setCharacter("[CC]"))},shaka.cea.Cea708Service.prototype.handleC0_=function(e,t){if(!this.currentWindow_)return null;var a=this.currentWindow_,r=null;switch(e){case shaka.cea.Cea708Service.ASCII_BACKSPACE:a.backspace();break;case shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN:a.isVisible()&&(r=a.forceEmit(t,this.serviceNumber_)),a.carriageReturn();break;case shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN:a.isVisible()&&(r=a.forceEmit(t,this.serviceNumber_)),a.horizontalCarriageReturn();break;case shaka.cea.Cea708Service.ASCII_FORM_FEED:a.isVisible()&&(r=a.forceEmit(t,this.serviceNumber_)),a.resetMemory(),a.setPenLocation(0,0)}return r},shaka.cea.Cea708Service.prototype.handleC1_=function(e,t,a){if(128<=t&&t<=135)this.setCurrentWindow_(7&t);else{if(136===t)return e=e.readByte().value,this.clearWindows_(e,a);if(137===t)e=e.readByte().value,this.displayWindows_(e,a);else{if(138===t)return e=e.readByte().value,this.hideWindows_(e,a);if(139===t)return e=e.readByte().value,this.toggleWindows_(e,a);if(140===t)return e=e.readByte().value,this.deleteWindows_(e,a);if(143===t)return this.reset_(a);144===t?this.setPenAttributes_(e):145===t?this.setPenColor_(e):146===t?this.setPenLocation_(e):151===t?this.setWindowAttributes_(e):152<=t&&t<=159&&this.defineWindow_(e,(15&t)-8,a)}}return null},shaka.cea.Cea708Service.prototype.handleC2_=function(e,t){8<=t&&t<=15?e.skip(1):16<=t&&t<=23?e.skip(2):24<=t&&t<=31&&e.skip(3)},shaka.cea.Cea708Service.prototype.handleC3_=function(e,t){128<=t&&t<=135?e.skip(4):136<=t&&t<=143&&e.skip(5)},shaka.cea.Cea708Service.prototype.setCurrentWindow_=function(e){this.windows_[e]&&(this.currentWindow_=this.windows_[e])},shaka.cea.Cea708Service.prototype.getSpecifiedWindowIds_=function e(t){var a,r=this;return $jscomp.generator.createGenerator(e,function(e){return 1==e.nextAddress&&(a=0),5!=e.nextAddress?a<8?1==(1&t)&&r.windows_[a]?e.yield(a,5):e.jumpTo(5):e.jumpTo(0):(t>>=1,a++,e.jumpTo(2))})},shaka.cea.Cea708Service.prototype.clearWindows_=function(e,t){for(var a=null,r=$jscomp.makeIterator(this.getSpecifiedWindowIds_(e)),n=r.next();!n.done;n=r.next())(n=this.windows_[n.value]).isVisible()&&(a=n.forceEmit(t,this.serviceNumber_)),n.resetMemory();return a},shaka.cea.Cea708Service.prototype.displayWindows_=function(e,t){for(var a=$jscomp.makeIterator(this.getSpecifiedWindowIds_(e)),r=a.next();!r.done;r=a.next())(r=this.windows_[r.value]).isVisible()||r.setStartTime(t),r.display()},shaka.cea.Cea708Service.prototype.hideWindows_=function(e,t){for(var a=null,r=$jscomp.makeIterator(this.getSpecifiedWindowIds_(e)),n=r.next();!n.done;n=r.next())(n=this.windows_[n.value]).isVisible()&&(a=n.forceEmit(t,this.serviceNumber_)),n.hide();return a},shaka.cea.Cea708Service.prototype.toggleWindows_=function(e,t){for(var a=null,r=$jscomp.makeIterator(this.getSpecifiedWindowIds_(e)),n=r.next();!n.done;n=r.next())(n=this.windows_[n.value]).isVisible()?a=n.forceEmit(t,this.serviceNumber_):n.setStartTime(t),n.toggle();return a},shaka.cea.Cea708Service.prototype.deleteWindows_=function(e,t){for(var a=null,r=$jscomp.makeIterator(this.getSpecifiedWindowIds_(e)),n=r.next();!n.done;n=r.next()){var n=n.value,i=this.windows_[n];i.isVisible()&&(a=i.forceEmit(t,this.serviceNumber_)),this.windows_[n]=null}return a},shaka.cea.Cea708Service.prototype.reset_=function(e){return e=this.deleteWindows_(255,e),this.clear(),e},shaka.cea.Cea708Service.prototype.clear=function(){this.currentWindow_=null,this.windows_=[null,null,null,null,null,null,null,null]},shaka.cea.Cea708Service.prototype.setPenAttributes_=function(e){var t;e.skip(1),e=e.readByte().value,this.currentWindow_&&(t=0<(64&e),this.currentWindow_.setPenItalics(0<(128&e)),this.currentWindow_.setPenUnderline(t))},shaka.cea.Cea708Service.prototype.setPenColor_=function(e){var t,a=e.readByte().value,r=e.readByte().value;e.skip(1),this.currentWindow_&&(e=3&r,t=(12&r)>>2,r=(48&r)>>4,a=this.rgbColorToHex_((48&a)>>4,(12&a)>>2,3&a),e=this.rgbColorToHex_(r,t,e),this.currentWindow_.setPenTextColor(a),this.currentWindow_.setPenBackgroundColor(e))},shaka.cea.Cea708Service.prototype.setPenLocation_=function(e){var t=e.readByte().value;e=e.readByte().value,this.currentWindow_&&this.currentWindow_.setPenLocation(15&t,63&e)},shaka.cea.Cea708Service.prototype.setWindowAttributes_=function(e){e.skip(1),e.skip(1);var t=e.readByte().value;e.skip(1),this.currentWindow_&&this.currentWindow_.setJustification(3&t)},shaka.cea.Cea708Service.prototype.defineWindow_=function(e,t,a){var r=null!==this.windows_[t],n=(r||((s=new shaka.cea.Cea708Window(t)).setStartTime(a),this.windows_[t]=s),e.readByte().value),i=e.readByte().value,o=(a=e.readByte().value,e.readByte().value),s=e.readByte().value,n=(e=e.readByte().value,0<(32&n)),l=127&i,i=0<(128&i),u=1+(15&o),o=(240&o)>>4;s=1+(63&s),r&&0==(7&e)||this.windows_[t].resetPen(),this.windows_[t].defineWindow(n,l,a,o,i,u,s),this.currentWindow_=this.windows_[t]},shaka.cea.Cea708Service.prototype.rgbColorToHex_=function(e,t,a){var r={0:0,1:0,2:1,3:1};return shaka.cea.Cea708Service.Colors[(e=r[e])<<2|(t=r[t])<<1|(a=r[a])]},shaka.cea.Cea708Service.ASCII_BACKSPACE=8,shaka.cea.Cea708Service.ASCII_FORM_FEED=12,shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN=13,shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN=14,shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1=16,shaka.cea.Cea708Service.G2Charset=new Map([[32," "],[33," "],[37,""],[42," "],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61," "],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),shaka.cea.Cea708Service.Colors="black blue green cyan red magenta yellow white".split(" "),shaka.cea.Cea608Memory=function(e,t){this.rows_=[],this.row_=1,this.scrollRows_=0,this.fieldNum_=e,this.channelNum_=t,this.italics_=this.underline_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,this.reset()},shaka.cea.Cea608Memory.prototype.forceEmit=function(e,t){var a="CC"+(this.fieldNum_<<1|this.channelNum_+1),r=new shaka.text.Cue(e,t,"");return shaka.cea.CeaUtils.getParsedCaption(r,a,this.rows_,e,t)},shaka.cea.Cea608Memory.prototype.reset=function(){this.resetAllRows(),this.row_=1},shaka.cea.Cea608Memory.prototype.getRow=function(){return this.row_},shaka.cea.Cea608Memory.prototype.setRow=function(e){this.row_=e},shaka.cea.Cea608Memory.prototype.getScrollSize=function(){return this.scrollRows_},shaka.cea.Cea608Memory.prototype.setScrollSize=function(e){this.scrollRows_=e},shaka.cea.Cea608Memory.prototype.addChar=function(e,t){if(!(t<32||127<t)){var a="";switch(e){case shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN:a=shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.has(t)?shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.get(t):String.fromCharCode(t);break;case shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN:a=shaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars.get(t);break;case shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH:this.eraseChar(),a=shaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench.get(t);break;case shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:this.eraseChar(),a=shaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman.get(t)}a&&(a=new shaka.cea.CeaUtils.StyledChar(a,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.rows_[this.row_].push(a))}},shaka.cea.Cea608Memory.prototype.eraseChar=function(){this.rows_[this.row_].pop()},shaka.cea.Cea608Memory.prototype.moveRows=function(e,t,a){if(t<=e)for(--a;0<=a;a--)this.rows_[e+a]=this.rows_[t+a].map(function(e){return e});else for(var r=0;r<a;r++)this.rows_[e+r]=this.rows_[t+r].map(function(e){return e})},shaka.cea.Cea608Memory.prototype.resetRows=function(e,t){for(var a=0;a<=t;a++)this.rows_[e+a]=[]},shaka.cea.Cea608Memory.prototype.resetAllRows=function(){this.resetRows(0,shaka.cea.Cea608Memory.CC_ROWS)},shaka.cea.Cea608Memory.prototype.eraseBuffer=function(){this.row_=0<this.scrollRows_?this.scrollRows_:0,this.resetAllRows()},shaka.cea.Cea608Memory.prototype.setUnderline=function(e){this.underline_=e},shaka.cea.Cea608Memory.prototype.setItalics=function(e){this.italics_=e},shaka.cea.Cea608Memory.prototype.setTextColor=function(e){this.textColor_=e},shaka.cea.Cea608Memory.prototype.setBackgroundColor=function(e){this.backgroundColor_=e},shaka.cea.Cea608Memory.CC_ROWS=15,shaka.cea.Cea608Memory.CharSet={BASIC_NORTH_AMERICAN:0,SPECIAL_NORTH_AMERICAN:1,SPANISH_FRENCH:2,PORTUGUESE_GERMAN:3},shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),shaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56," "],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),shaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44," "],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),shaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),shaka.cea.Cea608DataChannel=function(e,t){this.type_=shaka.cea.Cea608DataChannel.CaptionType.NONE,this.text_=new shaka.cea.Cea608Memory(e,t),this.displayedMemory_=new shaka.cea.Cea608Memory(e,t),this.nonDisplayedMemory_=new shaka.cea.Cea608Memory(e,t),this.curbuf_=this.displayedMemory_,this.prevEndTime_=0,this.lastcp_=null},shaka.cea.Cea608DataChannel.prototype.reset=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON,this.curbuf_=this.displayedMemory_,this.lastcp_=null,this.displayedMemory_.reset(),this.nonDisplayedMemory_.reset(),this.text_.reset()},shaka.cea.Cea608DataChannel.prototype.pacToRow_=function(e,t){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&e)<<1|t>>5&1]},shaka.cea.Cea608DataChannel.prototype.controlPac_=function(e,t){var a,r,e=this.pacToRow_(e,t),n=(30&t)>>1,i=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,o=!1;n<7?i=shaka.cea.Cea608DataChannel.TEXT_COLORS[n]:7==n&&(o=!0),n=1==(1&t),this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(t=this.curbuf_,this.type_===shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&e!==t.getRow()&&(a=1+t.getRow()-t.getScrollSize(),r=1+e-t.getScrollSize(),t.moveRows(r,a,t.getScrollSize()),t.resetRows(0,r-1),t.resetRows(e+1,shaka.cea.Cea608Memory.CC_ROWS-e)),t.setRow(e),this.curbuf_.setUnderline(n),this.curbuf_.setItalics(o),this.curbuf_.setTextColor(i),this.curbuf_.setBackgroundColor(shaka.cea.CeaUtils.DEFAULT_BG_COLOR))},shaka.cea.Cea608DataChannel.prototype.controlMidrow_=function(e){this.curbuf_.setUnderline(!1),this.curbuf_.setItalics(!1),this.curbuf_.setTextColor(shaka.cea.CeaUtils.DEFAULT_TXT_COLOR),this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32);var t=!1,a=shaka.cea.Cea608DataChannel.TEXT_COLORS[(14&e)>>1];"white_italics"===a&&(a="white",t=!0),this.curbuf_.setUnderline(1==(1&e)),this.curbuf_.setItalics(t),this.curbuf_.setTextColor(a)},shaka.cea.Cea608DataChannel.prototype.controlBackgroundAttribute_=function(e,t){var a=shaka.cea.CeaUtils.DEFAULT_BG_COLOR;0==(7&e)&&(a=shaka.cea.Cea608DataChannel.BG_COLORS[(14&t)>>1]),this.curbuf_.setBackgroundColor(a)},shaka.cea.Cea608DataChannel.prototype.controlMiscellaneous_=function(e){var t=shaka.cea.Cea608DataChannel.MiscCmd_,a=e.pts,r=null;switch(e.ccData2){case t.RCL:this.controlRcl_();break;case t.BS:this.controlBs_();break;case t.RU2:r=this.controlRu_(2,a);break;case t.RU3:r=this.controlRu_(3,a);break;case t.RU4:r=this.controlRu_(4,a);break;case t.FON:this.controlFon_();break;case t.RDC:this.controlRdc_(a);break;case t.TR:this.controlTr_();break;case t.RTD:this.controlRtd_();break;case t.EDM:r=this.controlEdm_(a);break;case t.CR:r=this.controlCr_(a);break;case t.ENM:this.controlEnm_();break;case t.EOC:r=this.controlEoc_(a)}return r},shaka.cea.Cea608DataChannel.prototype.controlCr_=function(e){var t,a,r=this.curbuf_;return this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP?null:(t=r.forceEmit(this.prevEndTime_,e),a=r.getRow()-r.getScrollSize()+1,r.moveRows(a-1,a,r.getScrollSize()),r.resetRows(0,a-1),r.resetRows(r.getRow(),shaka.cea.Cea608Memory.CC_ROWS-r.getRow()),this.prevEndTime_=e,t)},shaka.cea.Cea608DataChannel.prototype.controlRu_=function(e,t){var a=this.curbuf_=this.displayedMemory_,r=null;return this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(r=a.forceEmit(this.prevEndTime_,t),this.displayedMemory_.eraseBuffer(),this.nonDisplayedMemory_.eraseBuffer(),a.setRow(shaka.cea.Cea608Memory.CC_ROWS)),this.type_=shaka.cea.Cea608DataChannel.CaptionType.ROLLUP,a.setScrollSize(e),r},shaka.cea.Cea608DataChannel.prototype.controlFon_=function(){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32)},shaka.cea.Cea608DataChannel.prototype.controlEdm_=function(e){var t=this.displayedMemory_,a=null;return this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(a=t.forceEmit(this.prevEndTime_,e)),t.resetAllRows(),a},shaka.cea.Cea608DataChannel.prototype.controlRdc_=function(e){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON,this.curbuf_=this.displayedMemory_,this.curbuf_.setScrollSize(0),this.prevEndTime_=e},shaka.cea.Cea608DataChannel.prototype.controlEnm_=function(){this.nonDisplayedMemory_.resetAllRows()},shaka.cea.Cea608DataChannel.prototype.controlEoc_=function(e){var t=null,a=(this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(t=this.displayedMemory_.forceEmit(this.prevEndTime_,e)),this.nonDisplayedMemory_);return this.nonDisplayedMemory_=this.displayedMemory_,this.displayedMemory_=a,this.controlRcl_(),this.prevEndTime_=e,t},shaka.cea.Cea608DataChannel.prototype.controlRcl_=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.POPON,this.curbuf_=this.nonDisplayedMemory_,this.curbuf_.setScrollSize(0)},shaka.cea.Cea608DataChannel.prototype.controlBs_=function(){this.curbuf_.eraseChar()},shaka.cea.Cea608DataChannel.prototype.controlTr_=function(){this.text_.reset(),this.controlRtd_()},shaka.cea.Cea608DataChannel.prototype.controlRtd_=function(){shaka.log.warnOnce("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),this.curbuf_=this.text_,this.type_=shaka.cea.Cea608DataChannel.CaptionType.TEXT},shaka.cea.Cea608DataChannel.prototype.handleBasicNorthAmericanChar=function(e,t){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,e),this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,t)},shaka.cea.Cea608DataChannel.prototype.handleExtendedWesternEuropeanChar_=function(e,t){this.curbuf_.addChar(1&e?shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH,t)},shaka.cea.Cea608DataChannel.prototype.handleControlCode=function(e){var t=e.ccData1,a=e.ccData2;if(this.lastcp_===(t<<8|a))return this.lastcp_=null;if(this.lastcp_=t<<8|a,this.isPAC_(t,a))this.controlPac_(t,a);else if(this.isMidrowStyleChange_(t,a))this.controlMidrow_(a);else if(this.isBackgroundAttribute_(t,a))this.controlBackgroundAttribute_(t,a);else if(this.isSpecialNorthAmericanChar_(t,a))this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN,a);else if(this.isExtendedWesternEuropeanChar_(t,a))this.handleExtendedWesternEuropeanChar_(t,a);else if(this.isMiscellaneous_(t,a))return this.controlMiscellaneous_(e);return null},shaka.cea.Cea608DataChannel.prototype.isMiscellaneous_=function(e,t){return 20==(246&e)&&32==(240&t)},shaka.cea.Cea608DataChannel.prototype.isPAC_=function(e,t){return 16==(240&e)&&64==(192&t)},shaka.cea.Cea608DataChannel.prototype.isMidrowStyleChange_=function(e,t){return 17==(247&e)&&32==(240&t)},shaka.cea.Cea608DataChannel.prototype.isBackgroundAttribute_=function(e,t){return 16==(247&e)&&32==(240&t)||23==(247&e)&&45==(255&t)},shaka.cea.Cea608DataChannel.prototype.isSpecialNorthAmericanChar_=function(e,t){return 17==(247&e)&&48==(240&t)},shaka.cea.Cea608DataChannel.prototype.isExtendedWesternEuropeanChar_=function(e,t){return 18==(246&e)&&32==(224&t)},shaka.cea.Cea608DataChannel.isControlCode=function(e){return 16==(112&e)},shaka.cea.Cea608DataChannel.MiscCmd_={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},shaka.cea.Cea608DataChannel.CaptionType={NONE:0,POPON:1,PAINTON:2,ROLLUP:3,TEXT:4},shaka.cea.Cea608DataChannel.BG_COLORS="black green blue cyan red yellow magenta black".split(" "),shaka.cea.Cea608DataChannel.TEXT_COLORS="white green blue cyan red yellow magenta white_italics".split(" "),shaka.cea.CeaDecoder=function(){this.cea608DataArray_=[],this.cea708DataArray_=[],this.dtvccPacketBuilder_=new shaka.cea.DtvccPacketBuilder,this.badFrames_=0,this.cea608ModeToStream_=new Map([["CC1",new shaka.cea.Cea608DataChannel(0,0)],["CC2",new shaka.cea.Cea608DataChannel(0,1)],["CC3",new shaka.cea.Cea608DataChannel(1,0)],["CC4",new shaka.cea.Cea608DataChannel(1,1)]]),this.currentField2Channel_=this.currentField1Channel_=0,this.serviceNumberToService_=new Map,this.reset()},shaka.cea.CeaDecoder.prototype.clear=function(){this.badFrames_=0,this.cea608DataArray_=[],this.cea708DataArray_=[],this.dtvccPacketBuilder_.clear(),this.reset();for(var e=$jscomp.makeIterator(this.serviceNumberToService_.values()),t=e.next();!t.done;t=e.next())t.value.clear()},shaka.cea.CeaDecoder.prototype.reset=function(){this.currentField2Channel_=this.currentField1Channel_=0;for(var e=$jscomp.makeIterator(this.cea608ModeToStream_.values()),t=e.next();!t.done;t=e.next())t.value.reset()},shaka.cea.CeaDecoder.prototype.extract=function(e,t){var a=new shaka.util.DataViewReader(e,shaka.util.DataViewReader.Endianness.BIG_ENDIAN);if(a.readUint8()===shaka.cea.CeaDecoder.USA_COUNTRY_CODE&&a.readUint16()===shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE&&a.readUint32()===shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER&&3===a.readUint8()){var r=a.readUint8();if(0!=(64&r)){r&=31,a.skip(1);for(var n=0;n<r;n++){var i=a.readUint8(),o=(4&i)>>2,s=a.readUint8(),l=a.readUint8();o&&((i&=3)===shaka.cea.CeaDecoder.NTSC_CC_FIELD_1||i===shaka.cea.CeaDecoder.NTSC_CC_FIELD_2?this.cea608DataArray_.push({pts:t,type:i,ccData1:s,ccData2:l,order:this.cea608DataArray_.length}):(this.cea708DataArray_.push({pts:t,type:i,value:s,order:this.cea708DataArray_.length}),this.cea708DataArray_.push({pts:t,type:shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA,value:l,order:this.cea708DataArray_.length})))}}}},shaka.cea.CeaDecoder.prototype.decode=function(){var e=[],t=function(e,t){return e.pts-t.pts||e.order-t.order};this.cea608DataArray_.sort(t),this.cea708DataArray_.sort(t);for(var a=(t=$jscomp.makeIterator(this.cea608DataArray_)).next();!a.done;a=t.next())(a=this.decodeCea608_(a.value))&&e.push(a);for(a=(t=$jscomp.makeIterator(this.cea708DataArray_)).next();!a.done;a=t.next())this.dtvccPacketBuilder_.addByte(a.value);for(t=this.dtvccPacketBuilder_.getBuiltPackets(),a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next())a=this.decodeCea708_(a.value),e.push.apply(e,$jscomp.arrayFromIterable(a));return this.dtvccPacketBuilder_.clearBuiltPackets(),this.cea608DataArray_=[],this.cea708DataArray_=[],e},shaka.cea.CeaDecoder.prototype.decodeCea608_=function(e){var t,a=e.type;return shaka.cea.Cea608DataChannel.isControlCode(e.ccData1)&&(t=e.ccData1>>3&1,0===a?this.currentField1Channel_=t:this.currentField2Channel_=t),a=this.cea608ModeToStream_.get("CC"+(a<<1|(a?this.currentField2Channel_:this.currentField1Channel_)+1)),255===e.ccData1&&255===e.ccData2||!e.ccData1&&!e.ccData2||!this.isOddParity_(e.ccData1)||!this.isOddParity_(e.ccData2)?(45<=++this.badFrames_&&this.reset(),null):(this.badFrames_=0,e.ccData1&=127,e.ccData2&=127,e.ccData1||e.ccData2?(t=null,shaka.cea.Cea608DataChannel.isControlCode(e.ccData1)?t=a.handleControlCode(e):a.handleBasicNorthAmericanChar(e.ccData1,e.ccData2),t):null)},shaka.cea.CeaDecoder.prototype.decodeCea708_=function(e){var t=[];try{for(;e.hasMoreData();){var a,r=e.readByte().value,n=(224&r)>>5,i=31&r;if(0!=(n=7===n&&0!=i?63&e.readByte().value:n)){this.serviceNumberToService_.has(n)||(a=new shaka.cea.Cea708Service(n),this.serviceNumberToService_.set(n,a));for(var o=this.serviceNumberToService_.get(n),s=e.getPosition();e.getPosition()-s<i;){var l=o.handleCea708ControlCode(e);l&&t.push(l)}}}}catch(e){if(!(e instanceof shaka.util.Error&&e.code===shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS))throw e;shaka.log.warnOnce("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return t},shaka.cea.CeaDecoder.prototype.isOddParity_=function(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t},shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE=49,shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER=1195456820,shaka.cea.CeaDecoder.NTSC_CC_FIELD_1=0,shaka.cea.CeaDecoder.NTSC_CC_FIELD_2=1,shaka.cea.CeaDecoder.USA_COUNTRY_CODE=181,shaka.cea.ICeaParser=function(){},shaka.cea.ICeaParser.prototype.init=function(e){},shaka.cea.ICeaParser.prototype.parse=function(e){},shaka.cea.ICeaParser.NALU_TYPE_SEI=6,shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE=9e4,shaka.cea.SeiProcessor=function(){},shaka.cea.SeiProcessor.prototype.process=function e(t){var a,r,n,i,o=this;return $jscomp.generator.createGenerator(e,function(e){if(1==e.nextAddress&&(a=o.removeEmu_(t),r=0),4==e.nextAddress)return r+=i,e.jumpTo(2);if(!(r+a<t.length))return e.jumpTo(0);for(n=0;255==t[r];)n+=255,r++;for(n+=t[r++],i=0;255==t[r];)i+=255,r++;return i+=t[r++],4!=n?e.jumpTo(4):e.yield(t.subarray(r,r+i),4)})},shaka.cea.SeiProcessor.prototype.removeEmu_=function(e){for(var t=0,a=0,r=0;a<e.length;)2==t&&3==e[a]?t=0:(0==e[a]?t++:t=0,e[r]=e[a],r++),a++;return a-r},shaka.util.Mp4BoxParsers=function(){},shaka.util.Mp4BoxParsers.parseTFHD=function(e,t){var a=null,r=null,n=e.readUint32();return 1&t&&e.skip(8),2&t&&e.skip(4),{trackId:n,defaultSampleDuration:a=8&t?e.readUint32():a,defaultSampleSize:r=16&t?e.readUint32():r}},shaka.util.Mp4BoxParsers.parseTFDT=function(e,t){return{baseMediaDecodeTime:1==t?e.readUint64():e.readUint32()}},shaka.util.Mp4BoxParsers.parseMDHD=function(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.readUint32()}},shaka.util.Mp4BoxParsers.parseTREX=function(e){return e.skip(4),e.skip(4),{defaultSampleDuration:e.readUint32(),defaultSampleSize:e=e.readUint32()}},shaka.util.Mp4BoxParsers.parseTRUN=function(e,t,a){var r=e.readUint32(),n=[];1&a&&e.skip(4),4&a&&e.skip(4);for(var i=$jscomp.makeIterator(shaka.util.Iterables.range(r)),o=i.next();!o.done;o=i.next())shaka.util.Functional.ignored(o.value),o={sampleDuration:null,sampleSize:null,sampleCompositionTimeOffset:null},256&a&&(o.sampleDuration=e.readUint32()),512&a&&(o.sampleSize=e.readUint32()),1024&a&&e.skip(4),2048&a&&(o.sampleCompositionTimeOffset=0==t?e.readUint32():e.readInt32()),n.push(o);return{sampleCount:r,sampleData:n}},shaka.util.Mp4BoxParsers.parseTKHD=function(e,t){t=1==t?(e.skip(8),e.skip(8),e.readUint64()):(e.skip(4),e.skip(4),e.readUint32());return{trackId:t}},shaka.cea.Mp4CeaParser=function(){this.seiProcessor_=new shaka.cea.SeiProcessor,this.trackIdToTimescale_=new Map,this.defaultSampleSize_=this.defaultSampleDuration_=0},shaka.cea.Mp4CeaParser.prototype.init=function(e){var a=this,t=shaka.util.Mp4Parser,r=[],n=[];if((new t).box("moov",t.children).box("mvex",t.children).fullBox("trex",function(e){e=shaka.util.Mp4BoxParsers.parseTREX(e.reader),a.defaultSampleDuration_=e.defaultSampleDuration,a.defaultSampleSize_=e.defaultSampleSize}).box("trak",t.children).fullBox("tkhd",function(e){goog.asserts.assert(null!=e.version,"TKHD is a full box and should have a valid version."),e=shaka.util.Mp4BoxParsers.parseTKHD(e.reader,e.version),r.push(e.trackId)}).box("mdia",t.children).fullBox("mdhd",function(e){goog.asserts.assert(null!=e.version,"MDHD is a full box and should have a valid version."),e=shaka.util.Mp4BoxParsers.parseMDHD(e.reader,e.version),n.push(e.timescale)}).parse(e,!0),!r.length||!n.length||r.length!=n.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);r.forEach(function(e,t){a.trackIdToTimescale_.set(e,n[t])})},shaka.cea.Mp4CeaParser.prototype.parse=function(e){var t=this,a=shaka.util.Mp4Parser,r=[],n=this.defaultSampleDuration_,i=this.defaultSampleSize_,o=[],s=null,l=shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE;return(new a).box("moof",a.children).box("traf",a.children).fullBox("trun",function(e){goog.asserts.assert(null!=e.version&&null!=e.flags,"TRUN is a full box and should have a valid version & flags."),o=shaka.util.Mp4BoxParsers.parseTRUN(e.reader,e.version,e.flags).sampleData}).fullBox("tfhd",function(e){goog.asserts.assert(null!=e.flags,"TFHD is a full box and should have valid flags."),e=shaka.util.Mp4BoxParsers.parseTFHD(e.reader,e.flags),n=e.defaultSampleDuration||t.defaultSampleDuration_,i=e.defaultSampleSize||t.defaultSampleSize_,e=e.trackId,t.trackIdToTimescale_.has(e)&&(l=t.trackIdToTimescale_.get(e))}).fullBox("tfdt",function(e){goog.asserts.assert(null!=e.version,"TFDT is a full box and should have a valid version."),s=shaka.util.Mp4BoxParsers.parseTFDT(e.reader,e.version).baseMediaDecodeTime}).box("mdat",function(e){if(null===s)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);t.parseMdat_(e.reader,s,l,n,i,o,r)}).parse(e,!1),r},shaka.cea.Mp4CeaParser.prototype.parseMdat_=function(e,t,a,r,n,i,o){var s=0,l=n;for(i.length&&(l=i[0].sampleSize||n);e.hasMoreData();){var u=e.readUint32();if((31&e.readUint8())==shaka.cea.ICeaParser.NALU_TYPE_SEI)for(var c=0,c=(t+(c=i.length>s?i[s].sampleCompositionTimeOffset||0:c))/a,d=$jscomp.makeIterator(this.seiProcessor_.process(e.readBytes(u-1))),h=d.next();!h.done;h=d.next())o.push({packet:h.value,pts:c});else e.skip(u-1);0==(l-=u+4)&&(t=i.length>s?t+(i[s].sampleDuration||r):t+r,s++,l=i.length>s&&i[s].sampleSize||n)}},shaka.media.IClosedCaptionParser=function(){},shaka.media.IClosedCaptionParser.prototype.init=function(e){},shaka.media.IClosedCaptionParser.prototype.parseFrom=function(e){},shaka.media.IClosedCaptionParser.prototype.reset=function(){},shaka.media.ClosedCaptionParser=function(){this.ceaParser_=new shaka.cea.Mp4CeaParser,this.ceaDecoder_=new shaka.cea.CeaDecoder},shaka.media.ClosedCaptionParser.prototype.init=function(e){this.ceaParser_.init(e)},shaka.media.ClosedCaptionParser.prototype.parseFrom=function(e){e=this.ceaParser_.parse(e);for(var t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){var t=t.value,a=shaka.util.BufferUtils.toUint8(t.packet);this.ceaDecoder_.extract(a,t.pts)}return this.ceaDecoder_.decode()},shaka.media.ClosedCaptionParser.prototype.reset=function(){this.ceaDecoder_.clear()},shaka.media.TimeRangesUtils=function(){},shaka.media.TimeRangesUtils.bufferStart=function(e){return!e||1==e.length&&e.end(0)-e.start(0)<1e-6?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null},shaka.media.TimeRangesUtils.bufferEnd=function(e){return e&&!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&e.length?e.end(e.length-1):null},shaka.media.TimeRangesUtils.isBuffered=function(e,t,a){return a=void 0===a?0:a,!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1))&&t+a>=e.start(0)},shaka.media.TimeRangesUtils.bufferedAheadOf=function(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var a=0,r=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(e)),n=r.next();!n.done;n=r.next()){var i=n.value,n=i.start;t<(i=i.end)&&(a+=i-Math.max(n,t))}return a},shaka.media.TimeRangesUtils.getGapIndex=function(e,r,n){var t=shaka.media.TimeRangesUtils;return e&&e.length&&!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&0<=(e=t.getBufferedInfo(e).findIndex(function(e,t,a){return e.start>r&&(0==t||a[t-1].end-r<=n)}))?e:null},shaka.media.TimeRangesUtils.getBufferedInfo=function(e){if(!e)return[];for(var t=[],a=$jscomp.makeIterator(shaka.util.Iterables.range(e.length)),r=a.next();!r.done;r=a.next())r=r.value,t.push({start:e.start(r),end:e.end(r)});return t},shaka.util.IDestroyable=function(){},shaka.util.IDestroyable.prototype.destroy=function(){},goog.uri={},goog.uri.utils={},goog.uri.utils.splitRe_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},goog.uri.utils.split=function(e){return e.match(goog.uri.utils.splitRe_)},goog.Uri=function(e){e instanceof goog.Uri?(this.setScheme(e.getScheme()),this.setUserInfo(e.getUserInfo()),this.setDomain(e.getDomain()),this.setPort(e.getPort()),this.setPath(e.getPath()),this.setQueryData(e.getQueryData().clone()),this.setFragment(e.getFragment())):e&&(e=goog.uri.utils.split(String(e)))?(this.setScheme(e[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(e[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(e[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(e[goog.uri.utils.ComponentIndex.PORT]),this.setPath(e[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(e[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(e[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):this.queryData_=new goog.Uri.QueryData(null,null)},goog.Uri.prototype.scheme_="",goog.Uri.prototype.userInfo_="",goog.Uri.prototype.domain_="",goog.Uri.prototype.port_=null,goog.Uri.prototype.path_="",goog.Uri.prototype.fragment_="",goog.Uri.prototype.toString=function(){var e,t=[],a=this.getScheme();return a&&t.push(goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":"),(a=this.getDomain())&&(t.push("//"),(e=this.getUserInfo())&&t.push(goog.Uri.encodeSpecialChars_(e,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@"),t.push(goog.Uri.removeDoubleEncoding_(encodeURIComponent(a))),null!=(a=this.getPort()))&&t.push(":",String(a)),(a=this.getPath())&&(this.hasDomain()&&"/"!=a.charAt(0)&&t.push("/"),t.push(goog.Uri.encodeSpecialChars_(a,"/"==a.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0))),(a=this.getEncodedQuery())&&t.push("?",a),(a=this.getFragment())&&t.push("#",goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInFragment_)),t.join("")},goog.Uri.prototype.resolve=function(e){var t,a=this.clone(),r=("data"===a.scheme_&&(a=new goog.Uri),e.hasScheme()),n=(r?a.setScheme(e.getScheme()):r=e.hasUserInfo(),r?a.setUserInfo(e.getUserInfo()):r=e.hasDomain(),r?a.setDomain(e.getDomain()):r=e.hasPort(),e.getPath());return r?a.setPort(e.getPort()):(r=e.hasPath())&&("/"!=n.charAt(0)&&(this.hasDomain()&&!this.hasPath()?n="/"+n:-1!=(t=a.getPath().lastIndexOf("/"))&&(n=a.getPath().substr(0,t+1)+n)),n=goog.Uri.removeDotSegments(n)),r?a.setPath(n):r=e.hasQuery(),r?a.setQueryData(e.getQueryData().clone()):r=e.hasFragment(),r&&a.setFragment(e.getFragment()),a},goog.Uri.prototype.clone=function(){return new goog.Uri(this)},goog.Uri.prototype.getScheme=function(){return this.scheme_},goog.Uri.prototype.setScheme=function(e,t){return(this.scheme_=t?goog.Uri.decodeOrEmpty_(e,!0):e)&&(this.scheme_=this.scheme_.replace(/:$/,"")),this},goog.Uri.prototype.hasScheme=function(){return!!this.scheme_},goog.Uri.prototype.getUserInfo=function(){return this.userInfo_},goog.Uri.prototype.setUserInfo=function(e,t){return this.userInfo_=t?goog.Uri.decodeOrEmpty_(e):e,this},goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_},goog.Uri.prototype.getDomain=function(){return this.domain_},goog.Uri.prototype.setDomain=function(e,t){return this.domain_=t?goog.Uri.decodeOrEmpty_(e,!0):e,this},goog.Uri.prototype.hasDomain=function(){return!!this.domain_},goog.Uri.prototype.getPort=function(){return this.port_},goog.Uri.prototype.setPort=function(e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this.port_=e}else this.port_=null;return this},goog.Uri.prototype.hasPort=function(){return null!=this.port_},goog.Uri.prototype.getPath=function(){return this.path_},goog.Uri.prototype.setPath=function(e,t){return this.path_=t?goog.Uri.decodeOrEmpty_(e,!0):e,this},goog.Uri.prototype.hasPath=function(){return!!this.path_},goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()},goog.Uri.prototype.setQueryData=function(e,t){return e instanceof goog.Uri.QueryData?this.queryData_=e:(t||(e=goog.Uri.encodeSpecialChars_(e,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(e,null)),this},goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()},goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()},goog.Uri.prototype.getQueryData=function(){return this.queryData_},goog.Uri.prototype.getFragment=function(){return this.fragment_},goog.Uri.prototype.setFragment=function(e,t){return this.fragment_=t?goog.Uri.decodeOrEmpty_(e):e,this},goog.Uri.prototype.hasFragment=function(){return!!this.fragment_},goog.Uri.removeDotSegments=function(e){if(".."==e||"."==e)return"";if(-1==e.indexOf("./")&&-1==e.indexOf("/."))return e;var t=0==e.lastIndexOf("/",0);e=e.split("/");for(var a=[],r=0;r<e.length;){var n=e[r++];"."==n?t&&r==e.length&&a.push(""):".."==n?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),t&&r==e.length&&a.push("")):(a.push(n),t=!0)}return a.join("/")},goog.Uri.decodeOrEmpty_=function(e,t){return e?(t?decodeURI:decodeURIComponent)(e):""},goog.Uri.encodeSpecialChars_=function(e,t,a){return null!=e?(e=encodeURI(e).replace(t,goog.Uri.encodeChar_),e=a?goog.Uri.removeDoubleEncoding_(e):e):null},goog.Uri.encodeChar_=function(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)},goog.Uri.removeDoubleEncoding_=function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")},goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g,goog.Uri.reDisallowedInRelativePath_=/[#\?:]/g,goog.Uri.reDisallowedInAbsolutePath_=/[#\?]/g,goog.Uri.reDisallowedInQuery_=/[#\?@]/g,goog.Uri.reDisallowedInFragment_=/#/g,goog.Uri.QueryData=function(e,t){this.encodedQuery_=e||null},goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var e=this.encodedQuery_.split("&"),t=0;t<e.length;t++){var a,r=e[t].indexOf("="),n=null;0<=r?(a=e[t].substring(0,r),n=e[t].substring(r+1)):a=e[t],a=decodeURIComponent(a.replace(/\+/g," ")),n=n||"",this.add(a,decodeURIComponent(n.replace(/\+/g," ")))}},goog.Uri.QueryData.prototype.keyMap_=null,goog.Uri.QueryData.prototype.count_=null,goog.Uri.QueryData.prototype.getCount=function(){return this.ensureKeyMapInitialized_(),this.count_},goog.Uri.QueryData.prototype.add=function(e,t){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var a=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return a||(this.keyMap_[e]=a=[]),a.push(t),goog.asserts.assert(null!=this.count_,"Should not be null."),this.count_++,this},goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e,t=[];for(e in this.keyMap_)for(var a=encodeURIComponent(e),r=this.keyMap_[e],n=0;n<r.length;n++){var i=a;""!==r[n]&&(i+="="+encodeURIComponent(r[n])),t.push(i)}return this.encodedQuery_=t.join("&")},goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())},goog.Uri.QueryData.prototype.clone=function(){var e=new goog.Uri.QueryData;if(e.encodedQuery_=this.encodedQuery_,this.keyMap_){var t,a={};for(t in this.keyMap_)a[t]=this.keyMap_[t].concat();e.keyMap_=a,e.count_=this.count_}return e},shaka.util.ManifestParserUtils=function(){},shaka.util.ManifestParserUtils.resolveUris=function(e,t){var a,r=shaka.util.Functional;return 0==t.length?e:(a=t.map(function(e){return new goog.Uri(e)}),e.map(function(e){return new goog.Uri(e)}).map(function(t){return a.map(function(e){return t.resolve(e)})}).reduce(r.collapseArrays,[]).map(function(e){return e.toString()}))},shaka.util.ManifestParserUtils.createDrmInfo=function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,sessionType:"",initData:t||[],keyIds:new Set}},shaka.util.ManifestParserUtils.guessCodecs=function(e,t){if(1==t.length)return t[0];e=shaka.util.ManifestParserUtils.guessCodecsSafe(e,t);if(null!=e)return e;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_GUESS_CODECS,t)},shaka.util.ManifestParserUtils.guessCodecsSafe=function(e,t){for(var a=$jscomp.makeIterator(shaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_[e]),r=a.next();!r.done;r=a.next())for(var r=r.value,n=$jscomp.makeIterator(t),i=n.next();!i.done;i=n.next())if(i=i.value,r.test(i.trim()))return i.trim();return e==shaka.util.ManifestParserUtils.ContentType.TEXT?"":null},shaka.util.ManifestParserUtils.ContentType={VIDEO:"video",AUDIO:"audio",TEXT:"text",IMAGE:"image",APPLICATION:"application"},shaka.util.ManifestParserUtils.TextStreamKind={SUBTITLE:"subtitle",CLOSED_CAPTION:"caption"},shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS=1/15,shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_=[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_=[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_=[/^vtt$/,/^wvtt/,/^stpp/],shaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_={audio:shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_,video:shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_,text:shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_},shaka.util.PublicPromise=function(){var a,r,e=new Promise(function(e,t){a=e,r=t});return e.resolve=a,e.reject=r,e},shaka.util.PublicPromise.prototype.resolve=function(e){},shaka.util.PublicPromise.prototype.reject=function(e){},shaka.dependencies=function(){},shaka.dependencies.add=function(e,t){if(!shaka.dependencies.Allowed[e])throw Error(e+" is not supported");shaka.dependencies.dependencies_.set(e,function(){return t})},shaka.dependencies.has=function(e){return shaka.dependencies.dependencies_.has(e)},shaka.dependencies.muxjs=function(){return shaka.dependencies.dependencies_.get(shaka.dependencies.Allowed.muxjs)()},goog.exportSymbol("shaka.dependencies",shaka.dependencies),goog.exportProperty(shaka.dependencies,"has",shaka.dependencies.has),goog.exportProperty(shaka.dependencies,"add",shaka.dependencies.add),shaka.dependencies.Allowed={muxjs:"muxjs"},goog.exportProperty(shaka.dependencies,"Allowed",shaka.dependencies.Allowed),shaka.dependencies.dependencies_=new Map([[shaka.dependencies.Allowed.muxjs,function(){return window.muxjs}]]),shaka.media.Transmuxer=function(){var t=this;this.muxjs_=shaka.dependencies.muxjs(),this.muxTransmuxer_=new this.muxjs_.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.transmuxPromise_=null,this.transmuxedData_=[],this.captions_=[],this.metadata_=[],this.isTransmuxing_=!1,this.muxTransmuxer_.on("data",function(e){return t.onTransmuxed_(e)}),this.muxTransmuxer_.on("done",function(){return t.onTransmuxDone_()})},shaka.media.Transmuxer.prototype.destroy=function(){return this.muxTransmuxer_.dispose(),this.muxTransmuxer_=null,Promise.resolve()},shaka.media.Transmuxer.isSupported=function(e,t){var a,r=shaka.media.Transmuxer;return!(!shaka.dependencies.muxjs()||!r.isTsContainer(e))&&(t?MediaSource.isTypeSupported(r.convertTsCodecs(t,e)):(t=shaka.util.ManifestParserUtils.ContentType,a=r.convertTsCodecs(t.AUDIO,e),r=r.convertTsCodecs(t.VIDEO,e),MediaSource.isTypeSupported(a)||MediaSource.isTypeSupported(r)))},shaka.media.Transmuxer.isTsContainer=function(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]},shaka.media.Transmuxer.convertTsCodecs=function(e,t){var a,r=shaka.util.ManifestParserUtils.ContentType,t=t.replace(/mp2t/i,"mp4");return e==r.AUDIO&&(t=t.replace("video","audio")),(r=/avc1\.(66|77|100)\.(\d+)/.exec(t))&&(e="avc1.","66"==(a=r[1])?e+="4200":"77"==a?e+="4d00":(goog.asserts.assert("100"==a,"Legacy avc1 parsing code out of sync with regex!"),e+="6400"),a=Number(r[2]),goog.asserts.assert(a<256,"Invalid legacy avc1 level number!"),e=(e+=(a>>4).toString(16))+(15&a).toString(16),t=t.replace(r[0],e)),t},shaka.media.Transmuxer.prototype.transmux=function(e){return goog.asserts.assert(!this.isTransmuxing_,"No transmuxing should be in progress."),this.isTransmuxing_=!0,this.transmuxPromise_=new shaka.util.PublicPromise,this.transmuxedData_=[],this.captions_=[],this.metadata_=[],e=shaka.util.BufferUtils.toUint8(e),this.muxTransmuxer_.push(e),this.muxTransmuxer_.flush(),this.isTransmuxing_&&this.transmuxPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.TRANSMUXING_FAILED)),this.transmuxPromise_},shaka.media.Transmuxer.prototype.onTransmuxed_=function(e){this.captions_=e.captions,this.metadata_=e.metadata,this.transmuxedData_.push(shaka.util.Uint8ArrayUtils.concat(e.initSegment,e.data))},shaka.media.Transmuxer.prototype.onTransmuxDone_=function(){var e={data:shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,$jscomp.arrayFromIterable(this.transmuxedData_)),captions:this.captions_,metadata:this.metadata_};this.transmuxPromise_.resolve(e),this.isTransmuxing_=!1},shaka.util.MimeUtils=function(){},shaka.util.MimeUtils.getFullType=function(e,t){return t&&(e+='; codecs="'+t+'"'),e},shaka.util.MimeUtils.getFullOrConvertedType=function(e,t,a){return e=shaka.util.MimeUtils.getFullType(e,t),shaka.dependencies.muxjs()&&shaka.media.Transmuxer.isTsContainer(e)?shaka.media.Transmuxer.convertTsCodecs(a,e):e},shaka.util.MimeUtils.getExtendedType=function(a){var r=[a.mimeType];return shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_.forEach(function(e,t){t=a[t];t&&r.push(e+'="'+t+'"')}),"PQ"==a.hdr&&r.push('eotf="smpte2084"'),r.join(";")},shaka.util.MimeUtils.getContainerType=function(e){return e.split(";")[0].split("/")[1]},shaka.util.MimeUtils.splitCodecs=function(e){return e.split(",")},shaka.util.MimeUtils.getCodecBase=function(e){return shaka.util.MimeUtils.getCodecParts_(e)[0]},shaka.util.MimeUtils.getBasicType=function(e){return e.split(";")[0]},shaka.util.MimeUtils.getCodecs=function(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""},shaka.util.MimeUtils.getCodecParts_=function(e){var t=e.split(".");return e=t[0],t.pop(),[e,t=t.join(".")]},shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE="application/cea-608",shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE="application/cea-708",125093);shaka.text.TextEngine=function(e,t){this.parser_=null,this.displayer_=e,this.video_=t,this.appendWindowStart_=this.timestampOffset_=0,this.appendWindowEnd_=1/0,this.bufferEnd_=this.bufferStart_=null,this.eventFirstTime=!0,this.selectedClosedCaptionId_="",this.cuesTimer_=null,this.closedCaptionsMap_=new Map},shaka.text.TextEngine.registerParser=function(e,t){shaka.text.TextEngine.parserMap_[e]=t},shaka.text.TextEngine.unregisterParser=function(e){delete shaka.text.TextEngine.parserMap_[e]},shaka.text.TextEngine.findParser=function(e){return shaka.text.TextEngine.parserMap_[e]},shaka.text.TextEngine.isTypeSupported=function(e){return!(!shaka.text.TextEngine.parserMap_[e]&&e!=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE&&e!=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE)},shaka.text.TextEngine.prototype.destroy=function(){return this.displayer_=this.parser_=null,this.closedCaptionsMap_.clear(),this.cuesTimer_&&(this.cuesTimer_.stop(),this.cuesTimer_=null),Promise.resolve()},shaka.text.TextEngine.prototype.setDisplayer=function(e){this.displayer_=e},shaka.text.TextEngine.prototype.initParser=function(e){e!=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE&&e!=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE&&(e=shaka.text.TextEngine.parserMap_[e],goog.asserts.assert(e,"Text type negotiation should have happened already"),this.parser_=shaka.util.Functional.callFactory(e))},shaka.text.TextEngine.prototype.appendBuffer=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(s.parser_,"The parser should already be initialized"),e.yield(Promise.resolve(),2)):s.parser_&&s.displayer_?null==a||null==r?(s.parser_.parseInit(shaka.util.BufferUtils.toUint8(t)),e.return()):(n={periodStart:s.timestampOffset_,segmentStart:a,segmentEnd:r,videoTime:s.video_.currentTime},s.eventFirstTime=!0,s.cuesTimer_&&(s.cuesTimer_.stop(),s.cuesTimer_=null),t.byteLength&&t.byteLength>=MAX_BYTE_LENGTH?(s.parser_.parseMedia(shaka.util.BufferUtils.toUint8(t),n,!0),s.cuesTimer_&&s.cuesTimer_.stop(),s.cuesTimer_=new shaka.util.Timer(function(){s.parser_.areRangesParsed()&&s.cuesTimer_&&s.cuesTimer_.stop(),n.videoTime=s.video_.currentTime;var e,t=s.parser_.getWebVTTRangeLimits(n.videoTime);t&&-1!==t.start&&-1!==t.end&&(e=t=s.parser_.parsePartialMedia(n,t),1<(e=0===s.appendWindowStart_&&s.appendWindowEnd_===s.video_.duration?e:t.filter(function(e){return e.startTime>=s.appendWindowStart_&&e.startTime<s.appendWindowEnd_})).length)&&s.displayer_.append(e,!0),s.eventFirstTime&&(t=new CustomEvent("loadedsubtitles"),s.video_.dispatchEvent(t),s.eventFirstTime=!1)}).tickEvery(.33)):(o=s.parser_.parseMedia(shaka.util.BufferUtils.toUint8(t),n,!1),1<(o=o.filter(function(e){return e.startTime>=s.appendWindowStart_&&e.startTime<s.appendWindowEnd_})).length&&(i=400<o.length,s.displayer_.append(o,i))),null==s.bufferStart_?s.bufferStart_=Math.max(a,s.appendWindowStart_):(goog.asserts.assert(null!=s.bufferEnd_,"There should already be a buffered range end."),goog.asserts.assert(a-s.bufferEnd_<=1,"There should not be a gap in text references >1s")),s.bufferEnd_=Math.min(r,s.appendWindowEnd_),s.eventFirstTime&&(o=new CustomEvent("loadedsubtitles"),s.video_.dispatchEvent(o),s.eventFirstTime=!1),void e.jumpToEnd()):e.return()})},shaka.text.TextEngine.prototype.remove=function(t,a){var r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(Promise.resolve(),2);r.displayer_&&r.displayer_.remove(t,a)&&(null==r.bufferStart_?goog.asserts.assert(null==r.bufferEnd_,"end must be null if startTime is null"):(goog.asserts.assert(null!=r.bufferEnd_,"end must be non-null if startTime is non-null"),a<=r.bufferStart_||t>=r.bufferEnd_||(t<=r.bufferStart_&&a>=r.bufferEnd_?r.bufferStart_=r.bufferEnd_=null:t<=r.bufferStart_&&a<r.bufferEnd_?r.bufferStart_=a:t>r.bufferStart_&&a>=r.bufferEnd_?r.bufferEnd_=t:goog.asserts.assert(!1,"removal from the middle is not supported by TextEngine")))),e.jumpToEnd()})},shaka.text.TextEngine.prototype.setTimestampOffset=function(e){this.timestampOffset_=e},shaka.text.TextEngine.prototype.setAppendWindow=function(e,t){this.appendWindowStart_=e,this.appendWindowEnd_=t},shaka.text.TextEngine.prototype.bufferStart=function(){return this.bufferStart_},shaka.text.TextEngine.prototype.bufferEnd=function(){return this.bufferEnd_},shaka.text.TextEngine.prototype.isBuffered=function(e){return null!=this.bufferStart_&&null!=this.bufferEnd_&&e>=this.bufferStart_&&e<this.bufferEnd_},shaka.text.TextEngine.prototype.bufferedAheadOf=function(e){return null==this.bufferEnd_||this.bufferEnd_<e?0:(goog.asserts.assert(null!=this.bufferStart_,"start should not be null if end is not null"),this.bufferEnd_-Math.max(e,this.bufferStart_))},shaka.text.TextEngine.prototype.setSelectedClosedCaptionId=function(e,t){this.selectedClosedCaptionId_=e;var a=this.closedCaptionsMap_.get(e);if(a){this.cuesTimer_&&(this.cuesTimer_.stop(),this.cuesTimer_=null);for(var r=$jscomp.makeIterator(a.keys()),n=r.next();!n.done;n=r.next())(n=a.get(n.value).filter(function(e){return e.endTime<=t}))&&this.displayer_.append(n,!1)}},shaka.text.TextEngine.prototype.convertMuxjsCaptionsToShakaCaptions=function(e){for(var t=[],a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){var a=a.value,r=new shaka.text.Cue(a.startTime,a.endTime,a.text);t.push({stream:a.stream,cue:r})}return t},shaka.text.TextEngine.prototype.storeAndAppendClosedCaptions=function(e,t,a,r){for(var n=t+" "+a,i=new Map,o=(e=$jscomp.makeIterator(e)).next();!o.done;o=e.next()){var o=(s=o.value).stream,s=s.cue;i.has(o)||i.set(o,new Map),i.get(o).has(n)||i.get(o).set(n,[]),s.startTime+=r,s.endTime+=r,s.startTime>=this.appendWindowStart_&&s.startTime<this.appendWindowEnd_&&(i.get(o).get(n).push(s),o==this.selectedClosedCaptionId_)&&this.displayer_.append([s],!1)}for(n=(r=$jscomp.makeIterator(i.keys())).next();!n.done;n=r.next())for(n=n.value,this.closedCaptionsMap_.has(n)||this.closedCaptionsMap_.set(n,new Map),o=(e=$jscomp.makeIterator(i.get(n).keys())).next();!o.done;o=e.next())o=o.value,s=i.get(n).get(o),this.closedCaptionsMap_.get(n).set(o,s);this.bufferStart_=null==this.bufferStart_?Math.max(t,this.appendWindowStart_):Math.min(this.bufferStart_,Math.max(t,this.appendWindowStart_)),this.bufferEnd_=Math.max(this.bufferEnd_,Math.min(a,this.appendWindowEnd_))},shaka.text.TextEngine.prototype.getNumberOfClosedCaptionChannels=function(){return this.closedCaptionsMap_.size},shaka.text.TextEngine.prototype.getNumberOfClosedCaptionsInChannel=function(e){return(e=this.closedCaptionsMap_.get(e))?e.size:0},goog.exportSymbol("shaka.text.TextEngine",shaka.text.TextEngine),goog.exportProperty(shaka.text.TextEngine.prototype,"destroy",shaka.text.TextEngine.prototype.destroy),goog.exportProperty(shaka.text.TextEngine,"findParser",shaka.text.TextEngine.findParser),goog.exportProperty(shaka.text.TextEngine,"unregisterParser",shaka.text.TextEngine.unregisterParser),goog.exportProperty(shaka.text.TextEngine,"registerParser",shaka.text.TextEngine.registerParser),shaka.text.TextEngine.parserMap_={},shaka.util.Destroyer=function(e){this.destroyed_=!1,this.waitOnDestroy_=new shaka.util.PublicPromise,this.onDestroy_=e},shaka.util.Destroyer.prototype.destroyed=function(){return this.destroyed_},shaka.util.Destroyer.prototype.destroy=function(){var e=this;return this.destroyed_?this.waitOnDestroy_:(this.destroyed_=!0,this.onDestroy_().then(function(){e.waitOnDestroy_.resolve()},function(){e.waitOnDestroy_.resolve()}))},shaka.util.Destroyer.prototype.ensureNotDestroyed=function(e){if(this.destroyed_){if(e instanceof shaka.util.Error&&e.code==shaka.util.Error.Code.OBJECT_DESTROYED)throw e;throw shaka.util.Destroyer.destroyedError(e)}},shaka.util.Destroyer.destroyedError=function(e){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OBJECT_DESTROYED,e)},shaka.util.IReleasable=function(){},shaka.util.IReleasable.prototype.release=function(){},shaka.util.MultiMap=function(){this.map_={}},shaka.util.MultiMap.prototype.push=function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]},shaka.util.MultiMap.prototype.get=function(e){return(e=this.map_[e])?e.slice():null},shaka.util.MultiMap.prototype.getAll=function(){var e,t=[];for(e in this.map_)t.push.apply(t,$jscomp.arrayFromIterable(this.map_[e]));return t},shaka.util.MultiMap.prototype.remove=function(e,t){e in this.map_&&(this.map_[e]=this.map_[e].filter(function(e){return e!=t}),0==this.map_[e].length)&&delete this.map_[e]},shaka.util.MultiMap.prototype.clear=function(){this.map_={}},shaka.util.MultiMap.prototype.forEach=function(e){for(var t in this.map_)e(t,this.map_[t])},shaka.util.MultiMap.prototype.size=function(){return Object.keys(this.map_).length},shaka.util.EventManager=function(){this.bindingMap_=new shaka.util.MultiMap},shaka.util.EventManager.prototype.release=function(){this.removeAll(),this.bindingMap_=null},shaka.util.EventManager.prototype.listen=function(e,t,a,r){this.bindingMap_&&(e=new shaka.util.EventManager.Binding_(e,t,a,r),this.bindingMap_.push(t,e))},shaka.util.EventManager.prototype.listenOnce=function(a,r,n,e){var i=this;this.listen(a,r,function e(t){i.unlisten(a,r,e),n(t)},e)},shaka.util.EventManager.prototype.unlisten=function(e,t,a){if(this.bindingMap_)for(var r=this.bindingMap_.get(t)||[],n=(r=$jscomp.makeIterator(r)).next();!n.done;n=r.next())(n=n.value).target!=e||a!=n.listener&&a||(n.unlisten(),this.bindingMap_.remove(t,n))},shaka.util.EventManager.prototype.removeAll=function(){if(this.bindingMap_){for(var e=this.bindingMap_.getAll(),t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next())t.value.unlisten();this.bindingMap_.clear()}},goog.exportSymbol("shaka.util.EventManager",shaka.util.EventManager),goog.exportProperty(shaka.util.EventManager.prototype,"removeAll",shaka.util.EventManager.prototype.removeAll),goog.exportProperty(shaka.util.EventManager.prototype,"unlisten",shaka.util.EventManager.prototype.unlisten),goog.exportProperty(shaka.util.EventManager.prototype,"listenOnce",shaka.util.EventManager.prototype.listenOnce),goog.exportProperty(shaka.util.EventManager.prototype,"listen",shaka.util.EventManager.prototype.listen),goog.exportProperty(shaka.util.EventManager.prototype,"release",shaka.util.EventManager.prototype.release),shaka.util.EventManager.Binding_=function(e,t,a,r){this.target=e,this.type=t,this.listener=a,this.options=shaka.util.EventManager.Binding_.convertOptions_(e,r),this.target.addEventListener(t,a,this.options)},shaka.util.EventManager.Binding_.prototype.unlisten=function(){goog.asserts.assert(this.target,"Missing target"),this.target.removeEventListener(this.type,this.listener,this.options),this.listener=this.target=null,this.options=!1},shaka.util.EventManager.Binding_.convertOptions_=function(e,t){var a,r;return null!=t&&("boolean"==typeof t||(a=new Set(["passive","capture"]),r=Object.keys(t).filter(function(e){return!a.has(e)}),goog.asserts.assert(0==r.length,"Unsupported flag(s) to addEventListener: "+r.join(",")),shaka.util.EventManager.Binding_.doesSupportObject_(e))?t:t.capture||!1)},shaka.util.EventManager.Binding_.doesSupportObject_=function(e){var t=shaka.util.EventManager.Binding_.supportsObject_;if(null==t){t=!1;try{var a={},r={get:function(){return!(t=!0)}};Object.defineProperty(a,"passive",r),Object.defineProperty(a,"capture",r),r=function(){},e.addEventListener("test",r,a),e.removeEventListener("test",r,a)}catch(e){t=!1}shaka.util.EventManager.Binding_.supportsObject_=t}return t||!1},shaka.util.EventManager.Binding_.supportsObject_=void 0,shaka.media.MediaSourceEngine=function(e,t,a,r){var n=this;this.video_=e,this.textDisplayer_=a,this.sourceBuffers_={},this.sourceBufferTypes_={},this.textEngine_=null,e=function(e,t,a){},this.onMetadata_=r||e,this.queues_={},this.eventManager_=new shaka.util.EventManager,this.transmuxers_={},this.captionParser_=t,this.mediaSourceOpen_=new shaka.util.PublicPromise,this.mediaSource_=this.createMediaSource(this.mediaSourceOpen_),this.destroyer_=new shaka.util.Destroyer(function(){return n.doDestroy_()}),this.url_=""},shaka.media.MediaSourceEngine.prototype.createMediaSource=function(e){var t=this,a=new MediaSource;return this.eventManager_.listenOnce(a,"sourceopen",function(){return t.onSourceOpen_(e)}),this.url_=shaka.media.MediaSourceEngine.createObjectURL(a),this.video_.src=this.url_,a},shaka.media.MediaSourceEngine.prototype.onSourceOpen_=function(e){URL.revokeObjectURL(this.url_),e.resolve()},shaka.media.MediaSourceEngine.isStreamSupported=function(e){var t=shaka.util.MimeUtils.getFullType(e.mimeType,e.codecs),a=shaka.util.MimeUtils.getExtendedType(e);return shaka.text.TextEngine.isTypeSupported(t)||MediaSource.isTypeSupported(a)||shaka.media.Transmuxer.isSupported(t,e.type)},shaka.media.MediaSourceEngine.probeSupport=function(){for(var e={},t=$jscomp.makeIterator('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),a=t.next();!a.done;a=t.next()){a=a.value,shaka.util.Platform.supportsMediaSource()?shaka.text.TextEngine.isTypeSupported(a)?e[a]=!0:e[a]=MediaSource.isTypeSupported(a)||shaka.media.Transmuxer.isSupported(a):e[a]=shaka.util.Platform.supportsMediaType(a);var r=a.split(";")[0];e[r]=e[r]||e[a]}return e},shaka.media.MediaSourceEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.MediaSourceEngine.prototype.doDestroy_=function(){var t,a,r,n,i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){for(r in t=shaka.util.Functional,a=[],c.queues_)for(n=c.queues_[r],i=n[0],c.queues_[r]=n.slice(0,1),i&&a.push(i.p.catch(t.noop)),o=$jscomp.makeIterator(n.slice(1)),s=o.next();!s.done;s=o.next())s.value.p.reject(shaka.util.Destroyer.destroyedError());for(l in c.textEngine_&&a.push(c.textEngine_.destroy()),c.textDisplayer_&&a.push(c.textDisplayer_.destroy()),c.transmuxers_)a.push(c.transmuxers_[l].destroy());return e.yield(Promise.all(a),2)}if(c.eventManager_&&(c.eventManager_.release(),c.eventManager_=null),c.video_&&(c.video_.removeAttribute("src"),c.video_.load(),c.video_=null),c.mediaSource_=null,c.textEngine_=null,c.textDisplayer_=null,c.sourceBuffers_={},c.transmuxers_={},c.captionParser_=null,goog.DEBUG)for(u in c.queues_)goog.asserts.assert(0==c.queues_[u].length,u+" queue should be empty after destroy!");c.queues_={},e.jumpToEnd()})},shaka.media.MediaSourceEngine.prototype.open=function(){return this.mediaSourceOpen_},shaka.media.MediaSourceEngine.prototype.init=function(t,a){var r,n,i,o,s,l,u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return r=shaka.util.ManifestParserUtils.ContentType,e.yield(u.mediaSourceOpen_,2);for(n={},i=$jscomp.makeIterator(t.keys()),o=i.next();!o.done;n={$jscomp$loop$prop$contentType$603:n.$jscomp$loop$prop$contentType$603},o=i.next())n.$jscomp$loop$prop$contentType$603=o.value,s=t.get(n.$jscomp$loop$prop$contentType$603),goog.asserts.assert(shaka.media.MediaSourceEngine.isStreamSupported(s),"Type negotiation should happen before MediaSourceEngine.init!"),s=shaka.util.MimeUtils.getFullType(s.mimeType,s.codecs),n.$jscomp$loop$prop$contentType$603==r.TEXT?u.reinitText(s):(!a&&MediaSource.isTypeSupported(s)||!shaka.media.Transmuxer.isSupported(s,n.$jscomp$loop$prop$contentType$603)||(u.transmuxers_[n.$jscomp$loop$prop$contentType$603]=new shaka.media.Transmuxer,s=shaka.media.Transmuxer.convertTsCodecs(n.$jscomp$loop$prop$contentType$603,s)),l=u.mediaSource_.addSourceBuffer(s),u.eventManager_.listen(l,"error",function(e){return function(){return u.onError_(e.$jscomp$loop$prop$contentType$603)}}(n)),u.eventManager_.listen(l,"updateend",function(e){return function(){return u.onUpdateEnd_(e.$jscomp$loop$prop$contentType$603)}}(n)),u.sourceBuffers_[n.$jscomp$loop$prop$contentType$603]=l,u.sourceBufferTypes_[n.$jscomp$loop$prop$contentType$603]=s,u.queues_[n.$jscomp$loop$prop$contentType$603]=[]);e.jumpToEnd()})},shaka.media.MediaSourceEngine.prototype.reinitText=function(e){this.textEngine_||(this.textEngine_=new shaka.text.TextEngine(this.textDisplayer_,this.video_)),this.textEngine_.initParser(e)},shaka.media.MediaSourceEngine.prototype.ended=function(){return!this.mediaSource_||"ended"==this.mediaSource_.readyState},shaka.media.MediaSourceEngine.prototype.bufferStart=function(e){return e==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferStart():shaka.media.TimeRangesUtils.bufferStart(this.getBuffered_(e))},shaka.media.MediaSourceEngine.prototype.bufferEnd=function(e){return e==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferEnd():shaka.media.TimeRangesUtils.bufferEnd(this.getBuffered_(e))},shaka.media.MediaSourceEngine.prototype.isBuffered=function(e,t,a){return e==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.isBuffered(t):(e=this.getBuffered_(e),shaka.media.TimeRangesUtils.isBuffered(e,t,a))},shaka.media.MediaSourceEngine.prototype.bufferedAheadOf=function(e,t){return e==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferedAheadOf(t):(e=this.getBuffered_(e),shaka.media.TimeRangesUtils.bufferedAheadOf(e,t))},shaka.media.MediaSourceEngine.prototype.getBufferedInfo=function(){var e,t=shaka.util.ManifestParserUtils.ContentType,a=shaka.media.TimeRangesUtils,t={total:a.getBufferedInfo(this.video_.buffered),audio:a.getBufferedInfo(this.getBuffered_(t.AUDIO)),video:a.getBufferedInfo(this.getBuffered_(t.VIDEO)),text:[]};return this.textEngine_&&(a=this.textEngine_.bufferStart(),e=this.textEngine_.bufferEnd(),null!=a)&&null!=e&&t.text.push({start:a,end:e}),t},shaka.media.MediaSourceEngine.prototype.getBuffered_=function(t){try{return this.sourceBuffers_[t].buffered}catch(e){return t in this.sourceBuffers_&&shaka.log.error("failed to get buffered range for "+t,e),null}},shaka.media.MediaSourceEngine.prototype.appendBuffer=function(t,a,r,n,i){var o,s,l,u,c,d,h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.util.ManifestParserUtils.ContentType,t==o.TEXT?e.yield(h.textEngine_.appendBuffer(a,r,n),0):h.transmuxers_[t]?e.yield(h.transmuxers_[t].transmux(a),10):(a=(i&&(h.textEngine_||h.reinitText("text/vtt"),null==r&&null==n?h.captionParser_.init(a):(s=h.captionParser_.parseFrom(a)).length&&(l=h.sourceBuffers_[o.VIDEO].timestampOffset,h.textEngine_.storeAndAppendClosedCaptions(s,r,n,l))),h.workAroundBrokenPlatforms_(a,r,t)),e.yield(h.enqueueOperation_(t,function(){return h.append_(t,a)}),0))):(s=e.yieldResult,h.textEngine_||h.reinitText("text/vtt"),s.metadata&&(l=h.sourceBuffers_[t].timestampOffset,h.onMetadata_(s.metadata,l,n)),s.captions&&s.captions.length&&(u=h.sourceBuffers_[o.VIDEO].timestampOffset,c=h.textEngine_.convertMuxjsCaptionsToShakaCaptions(s.captions),h.textEngine_.storeAndAppendClosedCaptions(c,r,n,u)),d=s.data,d=h.workAroundBrokenPlatforms_(d,r,t),e.yield(h.enqueueOperation_(t,function(){return h.append_(t,d)}),0))})},shaka.media.MediaSourceEngine.prototype.setSelectedClosedCaptionId=function(e){var t=this.bufferEnd(shaka.util.ManifestParserUtils.ContentType.VIDEO)||0;this.textEngine_.setSelectedClosedCaptionId(e,t)},shaka.media.MediaSourceEngine.prototype.clearSelectedClosedCaptionId=function(){this.textEngine_&&this.textEngine_.setSelectedClosedCaptionId("",0)},shaka.media.MediaSourceEngine.prototype.remove=function(t,a,r){var n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n=shaka.util.ManifestParserUtils.ContentType,t==n.TEXT?e.yield(i.textEngine_.remove(a,r),0):e.yield(i.enqueueOperation_(t,function(){return i.remove_(t,a,r)}),0)})},shaka.media.MediaSourceEngine.prototype.clear=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return a=shaka.util.ManifestParserUtils.ContentType,t==a.TEXT?r.textEngine_?e.yield(r.textEngine_.remove(0,1/0),0):e.return():e.yield(r.enqueueOperation_(t,function(){return r.remove_(t,0,r.mediaSource_.duration)}),0)})},shaka.media.MediaSourceEngine.prototype.resetCaptionParser=function(){this.captionParser_.reset()},shaka.media.MediaSourceEngine.prototype.flush=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return a=shaka.util.ManifestParserUtils.ContentType,t==a.TEXT?e.return():e.yield(r.enqueueOperation_(t,function(){return r.flush_(t)}),0)})},shaka.media.MediaSourceEngine.prototype.setStreamProperties=function(t,a,r,n){var i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return i=shaka.util.ManifestParserUtils.ContentType,t==i.TEXT?(o.textEngine_.setTimestampOffset(a),o.textEngine_.setAppendWindow(r,n),e.return()):e.yield(Promise.all([o.enqueueOperation_(t,function(){return o.abort_(t)}),o.enqueueOperation_(t,function(){return o.setTimestampOffset_(t,a)}),o.enqueueOperation_(t,function(){return o.setAppendWindow_(t,r,n)})]),0)})},shaka.media.MediaSourceEngine.prototype.endOfStream=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(a.enqueueBlockingOperation_(function(){a.ended()||(t?a.mediaSource_.endOfStream(t):a.mediaSource_.endOfStream())}),0)})},shaka.media.MediaSourceEngine.prototype.setDuration=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return goog.asserts.assert(isNaN(a.mediaSource_.duration)||a.mediaSource_.duration<=t,"duration cannot decrease: "+a.mediaSource_.duration+" -> "+t),e.yield(a.enqueueBlockingOperation_(function(){a.mediaSource_.duration=t}),0)})},shaka.media.MediaSourceEngine.prototype.getDuration=function(){return this.mediaSource_.duration},shaka.media.MediaSourceEngine.prototype.append_=function(e,t){this.sourceBuffers_[e].appendBuffer(t)},shaka.media.MediaSourceEngine.prototype.remove_=function(e,t,a){a<=t?this.onUpdateEnd_(e):this.sourceBuffers_[e].remove(t,a)},shaka.media.MediaSourceEngine.prototype.abort_=function(e){var t=this.sourceBuffers_[e].appendWindowStart,a=this.sourceBuffers_[e].appendWindowEnd;this.sourceBuffers_[e].abort(),this.sourceBuffers_[e].appendWindowStart=t,this.sourceBuffers_[e].appendWindowEnd=a,this.onUpdateEnd_(e)},shaka.media.MediaSourceEngine.prototype.flush_=function(e){goog.asserts.assert(0==this.video_.buffered.length,"MediaSourceEngine.flush_ should only be used after clearing all data!"),this.video_.currentTime-=.001,this.onUpdateEnd_(e)},shaka.media.MediaSourceEngine.prototype.setTimestampOffset_=function(e,t){t<0&&(t+=.001),this.sourceBuffers_[e].timestampOffset=t,this.onUpdateEnd_(e)},shaka.media.MediaSourceEngine.prototype.setAppendWindow_=function(e,t,a){this.sourceBuffers_[e].appendWindowStart=0,this.sourceBuffers_[e].appendWindowEnd=a,this.sourceBuffers_[e].appendWindowStart=t,this.onUpdateEnd_(e)},shaka.media.MediaSourceEngine.prototype.onError_=function(e){var t=this.queues_[e][0];goog.asserts.assert(t,"Spurious error event!"),goog.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on error!"),t.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_FAILED,this.video_.error?this.video_.error.code:0))},shaka.media.MediaSourceEngine.prototype.onUpdateEnd_=function(e){var t=this.queues_[e][0];goog.asserts.assert(t,"Spurious updateend event!"),t&&(goog.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on updateend!"),t.p.resolve(),this.popFromQueue_(e))},shaka.media.MediaSourceEngine.prototype.enqueueOperation_=function(e,t){this.destroyer_.ensureNotDestroyed();t={start:t,p:new shaka.util.PublicPromise};return this.queues_[e].push(t),1==this.queues_[e].length&&this.startOperation_(e),t.p},shaka.media.MediaSourceEngine.prototype.enqueueBlockingOperation_=function(t){var a,r,n,i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:for(n in c.destroyer_.ensureNotDestroyed(),a=[],r={},c.sourceBuffers_)r.$jscomp$loop$prop$ready$605=new shaka.util.PublicPromise,i={start:function(e){return function(){return e.$jscomp$loop$prop$ready$605.resolve()}}(r),p:r.$jscomp$loop$prop$ready$605},c.queues_[n].push(i),a.push(r.$jscomp$loop$prop$ready$605),1==c.queues_[n].length&&i.start(),r={$jscomp$loop$prop$ready$605:r.$jscomp$loop$prop$ready$605};return e.setCatchFinallyBlocks(2),e.yield(Promise.all(a),4);case 4:e.leaveTryBlock(3);break;case 2:if(o=e.enterCatchBlock(),goog.asserts.assert(c.destroyer_.destroyed(),"Should be destroyed by now"),goog.DEBUG)for(s in c.sourceBuffers_)c.queues_[s].length&&(goog.asserts.assert(1==c.queues_[s].length,"Should be at most one item in queue!"),goog.asserts.assert(a.includes(c.queues_[s][0].p),"The item in queue should be one of our waiters!"),c.queues_[s].shift());throw o;case 3:if(goog.DEBUG)for(l in c.sourceBuffers_)goog.asserts.assert(0==c.sourceBuffers_[l].updating,"SourceBuffers should not be updating after a blocking op!");try{t()}catch(e){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,e)}finally{for(u in c.sourceBuffers_)c.popFromQueue_(u)}e.jumpToEnd()}})},shaka.media.MediaSourceEngine.prototype.popFromQueue_=function(e){this.queues_[e].shift(),this.startOperation_(e)},shaka.media.MediaSourceEngine.prototype.startOperation_=function(t){var a=this.queues_[t][0];if(a)try{a.start()}catch(e){"QuotaExceededError"==e.name?a.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR,t)):a.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,e)),this.popFromQueue_(t)}},shaka.media.MediaSourceEngine.prototype.getTextDisplayer=function(){return goog.asserts.assert(this.textDisplayer_,"TextDisplayer should only be null when this is destroyed"),this.textDisplayer_},shaka.media.MediaSourceEngine.prototype.setTextDisplayer=function(e){var t=this.textDisplayer_;this.textDisplayer_=e,t&&(e.setTextVisibility(t.isTextVisible()),t.destroy()),this.textEngine_&&this.textEngine_.setDisplayer(e)},shaka.media.MediaSourceEngine.prototype.workAroundBrokenPlatforms_=function(e,t,a){var r=this.video_.mediaKeys;return null==t&&r&&shaka.util.Platform.requiresEncryptionInfoInAllInitSegments()&&"mp4"==shaka.util.MimeUtils.getContainerType(this.sourceBufferTypes_[a])&&(shaka.log.debug("Forcing fake encryption information in init segment."),e=shaka.media.ContentWorkarounds.fakeEncryption(e)),e},shaka.media.MediaSourceEngine.createObjectURL=window.URL.createObjectURL,shaka.util.LanguageUtils=function(){},shaka.util.LanguageUtils.areLocaleCompatible=function(e,t){var a=shaka.util.LanguageUtils;return(e=a.normalize(e))==(t=a.normalize(t))},shaka.util.LanguageUtils.areLanguageCompatible=function(e,t){e=(a=shaka.util.LanguageUtils).normalize(e),t=a.normalize(t);var e=a.disassembleLocale_(e),a=a.disassembleLocale_(t);return e[0]==a[0]},shaka.util.LanguageUtils.isParentOf=function(e,t){e=(a=shaka.util.LanguageUtils).normalize(e),t=a.normalize(t);var e=a.disassembleLocale_(e),a=a.disassembleLocale_(t);return e[0]==a[0]&&1==e.length&&2==a.length},shaka.util.LanguageUtils.isSiblingOf=function(e,t){e=(a=shaka.util.LanguageUtils).normalize(e),t=a.normalize(t);var e=a.disassembleLocale_(e),a=a.disassembleLocale_(t);return 2==e.length&&2==a.length&&e[0]==a[0]},shaka.util.LanguageUtils.normalize=function(e){var t=shaka.util.LanguageUtils,a=e.split("-");return e=a[0]||"",a=a[1]||"",e=e.toLowerCase(),e=t.isoMap_.get(e)||e,(a=a.toUpperCase())?e+"-"+a:e},shaka.util.LanguageUtils.areSiblings=function(e,t){var a=(r=shaka.util.LanguageUtils).getBase(e),r=r.getBase(t);return e!=a&&t!=r&&a==r},shaka.util.LanguageUtils.relatedness=function(e,t){var a=shaka.util.LanguageUtils;return e=a.normalize(e),(t=a.normalize(t))==e?4:a.isParentOf(t,e)?3:a.isSiblingOf(t,e)?2:a.isParentOf(e,t)?1:0},shaka.util.LanguageUtils.getBase=function(e){var t=shaka.util.LanguageUtils,a=e.indexOf("-");return e=(e=0<=a?e.substring(0,a):e).toLowerCase(),t.isoMap_.get(e)||e},shaka.util.LanguageUtils.getLocaleForText=function(e){var t=shaka.util.LanguageUtils;return goog.asserts.assert(e.type==shaka.util.ManifestParserUtils.ContentType.TEXT,"Can only get language from text streams"),t.normalize(e.language||"und")},shaka.util.LanguageUtils.getLocaleForVariant=function(e){var t=shaka.util.LanguageUtils;return e.language?t.normalize(e.language):e.audio&&e.audio.language?t.normalize(e.audio.language):e.video&&e.video.language?t.normalize(e.video.language):"und"},shaka.util.LanguageUtils.findClosestLocale=function(e,t){for(var a=shaka.util.LanguageUtils,r=a.normalize(e),n=new Set,i=$jscomp.makeIterator(t),o=i.next();!o.done;o=i.next())n.add(a.normalize(o.value));for(o=(i=$jscomp.makeIterator(n)).next();!o.done;o=i.next())if((o=o.value)==r)return o;for(o=(i=$jscomp.makeIterator(n)).next();!o.done;o=i.next())if(o=o.value,a.isParentOf(o,r))return o;for(o=(i=$jscomp.makeIterator(n)).next();!o.done;o=i.next())if(o=o.value,a.isSiblingOf(o,r))return o;for(o=(n=$jscomp.makeIterator(n)).next();!o.done;o=n.next())if(o=o.value,a.isParentOf(r,o))return o;return null},shaka.util.LanguageUtils.disassembleLocale_=function(e){var t=e.split("-");return goog.asserts.assert(t.length<=2,["Locales should not have more than 2 components. ",e," has too many components."].join()),t},shaka.util.LanguageUtils.isoMap_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),shaka.util.StreamUtils=function(){},shaka.util.StreamUtils.chooseCodecsAndFilterManifest=function(e,t,a,r){var n=shaka.util.StreamUtils,i=e.variants,o=((t.length||a.length)&&(i=n.choosePreferredCodecs(i,t,a)),i=n.filterVariantsByAudioChannelCount(i,r),t=shaka.util.StreamUtils.getVariantsByCodecs_(i),t=shaka.util.StreamUtils.filterVariantsByDensity_(t),shaka.util.StreamUtils.findBestCodecs_(t));e.variants=e.variants.filter(function(e){return shaka.util.StreamUtils.getGroupVariantCodecs_(e)==o||(shaka.log.debug("Dropping Variant (better codec available)",e),!1)})},shaka.util.StreamUtils.getVariantsByCodecs_=function(e){for(var t=new shaka.util.MultiMap,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){var a=a.value,r=shaka.util.StreamUtils.getGroupVariantCodecs_(a);t.push(r,a)}return t},shaka.util.StreamUtils.filterVariantsByDensity_=function(e){var o=0,s=new Map,l=e.size();return e.forEach(function(e,t){for(var a=$jscomp.makeIterator(t),r=a.next();!r.done;r=a.next()){var n,i=(r=r.value).video;i&&i.width&&i.height&&(i=i.width*i.height*(i.frameRate||1),s.has(i)||s.set(i,new shaka.util.MultiMap),(n=s.get(i)).push(e,r),n.size()===l)&&(o=Math.max(o,i))}}),o?s.get(o):e},shaka.util.StreamUtils.choosePreferredCodecs=function(e,t,a){for(var r={},n=(t=$jscomp.makeIterator(t)).next();!n.done;r={$jscomp$loop$prop$videoCodec$607:r.$jscomp$loop$prop$videoCodec$607},n=t.next())if(r.$jscomp$loop$prop$videoCodec$607=n.value,(n=e.filter(function(t){return function(e){return e.video&&e.video.codecs.startsWith(t.$jscomp$loop$prop$videoCodec$607)}}(r))).length){e=n;break}for(r={},t=(a=$jscomp.makeIterator(a)).next();!t.done;r={$jscomp$loop$prop$audioCodec$609:r.$jscomp$loop$prop$audioCodec$609},t=a.next())if(r.$jscomp$loop$prop$audioCodec$609=t.value,(t=e.filter(function(t){return function(e){return e.audio&&e.audio.codecs.startsWith(t.$jscomp$loop$prop$audioCodec$609)}}(r))).length){e=t;break}return e},shaka.util.StreamUtils.findBestCodecs_=function(e){var o="",s=1/0;return e.forEach(function(e,t){for(var a=0,r=0,n=$jscomp.makeIterator(t),i=n.next();!i.done;i=n.next())a+=i.value.bandwidth||0,++r;shaka.log.debug("codecs",e,"avg bandwidth",a/=r),a<s&&(o=e,s=a)}),goog.asserts.assert(""!==o,"Should have chosen codecs!"),goog.asserts.assert(!isNaN(s),"Bandwidth should be a number!"),o},shaka.util.StreamUtils.getGroupVariantCodecs_=function(e){var t="",a="";return(t=e.video?shaka.util.MimeUtils.getCodecBase(e.video.codecs):t)+"-"+(a=e.audio?shaka.util.MimeUtils.getCodecBase(e.audio.codecs):a)},shaka.util.StreamUtils.filterByRestrictions=function(e,t,a){e.variants=e.variants.filter(function(e){return shaka.util.StreamUtils.meetsRestrictions(e,t,a)})},shaka.util.StreamUtils.meetsRestrictions=function(e,t,a){function r(e,t,a){return t<=e&&e<=a}var n=e.video;return!(n&&n.width&&n.height&&(!r(n.width,t.minWidth,Math.min(t.maxWidth,a.width))||!r(n.height,t.minHeight,Math.min(t.maxHeight,a.height))||!r(n.width*n.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))},shaka.util.StreamUtils.applyRestrictions=function(e,t,a){for(var r=!1,n=(e=$jscomp.makeIterator(e)).next();!n.done;n=e.next()){var i=(n=n.value).allowedByApplication;n.allowedByApplication=shaka.util.StreamUtils.meetsRestrictions(n,t,a),i!=n.allowedByApplication&&(r=!0)}return r},shaka.util.StreamUtils.filterManifest=function(t,a,r,n){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return n?e.yield(shaka.util.StreamUtils.filterManifestByMediaCapabilities(r,0<r.offlineSessionIds.length),3):(shaka.util.StreamUtils.filterManifestByDrm(r,t),e.yield(shaka.util.StreamUtils.filterManifestByMediaSource(r),3));shaka.util.StreamUtils.filterManifestByCurrentVariant(a,r),shaka.util.StreamUtils.filterTextStreams_(r),shaka.util.StreamUtils.filterImageStreams_(r),e.jumpToEnd()})},shaka.util.StreamUtils.filterManifestByDrm=function(e,t){e.variants=e.variants.filter(function(e){return t&&t.initialized()?t.supportsVariant(e):shaka.log.debug("DrmEngine is not initialized yet."),!0})},shaka.util.StreamUtils.filterManifestByMediaCapabilities=function(t,a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(navigator.mediaCapabilities,"MediaCapabilities should be valid."),e.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(t.variants,a),2)):3!=e.nextAddress?shaka.util.Platform.isWebOS()&&void 0===window.UHDSupport?e.yield(shaka.util.StreamUtils.webOSSupportUHD(),3):e.jumpTo(3):(t.variants=t.variants.filter(function(e){var t=e.video;return shaka.util.Platform.isXboxOne()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(shaka.log.debug("Dropping variant - not compatible with platform",shaka.util.StreamUtils.getVariantSummaryString_(e)),!1):shaka.util.Platform.isWebOS()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&!window.UHDSupport?(shaka.log.debug("Dropping variant - video not compatible with 4K",shaka.util.StreamUtils.getStreamSummaryString_(t)),!1):((t=e.decodingInfos.some(function(e){return e.supported}))||shaka.log.debug("Dropping variant - not compatible with platform",shaka.util.StreamUtils.getVariantSummaryString_(e)),t)}),void e.jumpToEnd())})},shaka.util.StreamUtils.webOSSupportUHD=function(){function a(t){void 0!==window.webOS?(void 0!==e&&e.stop(),void 0!==window.webOS.deviceInfo?window.webOS.deviceInfo(function(e){window.UHDSupport=!0===e.uhd,t()}):(window.UHDSupport=!1,t())):(e=new shaka.util.Timer(function(){3<r?(e.stop(),window.UHDSupport=!1,t()):a(t),r++})).tickAfter(.1)}var e,r=0;return new Promise(function(e,t){a(e)})},shaka.util.StreamUtils.filterManifestByMediaSource=function(t){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return shaka.util.Platform.isWebOS()&&void 0===window.UHDSupport?e.yield(shaka.util.StreamUtils.webOSSupportUHD(),2):e.jumpTo(2);t.variants=t.variants.filter(function(e){var t=e.audio;return e=e.video,t&&!shaka.media.MediaSourceEngine.isStreamSupported(t)?(shaka.log.debug("Dropping variant - audio not compatible with platform",shaka.util.StreamUtils.getStreamSummaryString_(t)),!1):e&&!shaka.media.MediaSourceEngine.isStreamSupported(e)?(shaka.log.debug("Dropping variant - video not compatible with platform",shaka.util.StreamUtils.getStreamSummaryString_(e)),!1):shaka.util.Platform.isWebOS()&&e&&(e.width&&1920<e.width||e.height&&1080<e.height)&&!1===window.UHDSupport?(shaka.log.debug("Dropping variant - video not compatible with 4K",shaka.util.StreamUtils.getStreamSummaryString_(e)),!1):!(shaka.util.Platform.isXboxOne()&&e&&(e.width&&1920<e.width||e.height&&1080<e.height)&&(e.codecs.includes("avc1.")||e.codecs.includes("avc3."))&&(shaka.log.debug("Dropping variant - video not compatible with platform",shaka.util.StreamUtils.getStreamSummaryString_(e)),1))}),e.jumpToEnd()})},shaka.util.StreamUtils.getDecodingInfosForVariants=function(t,a){var n,r,i,o,s,l,u,c,d,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(t.some(function(e){return e.decodingInfos.length}))return shaka.log.debug("Already got the variants' decodingInfo."),e.return();for(n=navigator.mediaCapabilities,r=[],i=function(t,a){var r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),e.yield(n.decodingInfo(a),4)):2!=e.nextAddress?(r=e.yieldResult,t.decodingInfos.push(r),e.leaveTryBlock(0)):(r=e.enterCatchBlock(),shaka.log.info("MediaCapabilities.decodingInfo() failed.",JSON.stringify(a),r),void e.jumpToEnd())})},o=$jscomp.makeIterator(t),s=o.next();!s.done;s=o.next())for(l=s.value,u=shaka.util.StreamUtils.getDecodingConfigs_(l,a),c=$jscomp.makeIterator(u),d=c.next();!d.done;d=c.next())h=d.value,r.push(i(l,h));return e.yield(Promise.all(r),0)})},shaka.util.StreamUtils.getDecodingConfigs_=function(e,t){var a,r=e.audio,n=e.video,i=shaka.util.ManifestParserUtils.ContentType,o={type:"media-source"};if(n&&(a=n.codecs,n.codecs.includes(",")&&(s=n.codecs.split(","),a=shaka.util.ManifestParserUtils.guessCodecs(i.VIDEO,s),a=shaka.util.StreamUtils.patchVp9(a),s=shaka.util.ManifestParserUtils.guessCodecs(i.AUDIO,s),s=shaka.util.MimeUtils.getFullOrConvertedType(n.mimeType,s,i.AUDIO),o.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}),a=shaka.util.StreamUtils.patchVp9(a),a=shaka.util.MimeUtils.getFullOrConvertedType(n.mimeType,a,i.VIDEO),o.video={contentType:a,width:n.width||1,height:n.height||1,bitrate:n.bandwidth||e.bandwidth||1,framerate:n.frameRate||1}),r&&(a="ac-3"==r.codecs.toLowerCase()&&shaka.util.Platform.isTizen()?"ec-3":r.codecs,i=shaka.util.MimeUtils.getFullOrConvertedType(r.mimeType,a,i.AUDIO),o.audio={contentType:i,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[o];i=[],a=new Map;for(var s,l=(s=$jscomp.makeIterator(s)).next();!l.done;l=s.next()){var u=l.value;a.get(u.keySystem)||a.set(u.keySystem,[]),a.get(u.keySystem).push(u)}s=t?"required":"optional";for(var u=t?["persistent-license"]:["temporary"],c=$jscomp.makeIterator(a.keys()),d=c.next();!d.done;d=c.next()){for(var h=d.value,d=Object.assign({},o),p=a.get(h),h={keySystem:h,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:u},l=(p=$jscomp.makeIterator(p)).next();!l.done;l=p.next()){if((l=l.value).initData&&l.initData.length){for(var f=new Set,m=$jscomp.makeIterator(l.initData),g=m.next();!g.done;g=m.next())f.add(g.value.initDataType);1<f.size&&shaka.log.v2("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",l),h.initDataType=l.initData[0].initDataType}l.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required"),l.persistentStateRequired&&(h.persistentState="required"),l.sessionType&&(h.sessionTypes=[l.sessionType]),r&&(h.audio?h.audio.robustness=h.audio.robustness||l.audioRobustness:h.audio={robustness:l.audioRobustness}),n&&(h.video?h.video.robustness=h.video.robustness||l.videoRobustness:h.video={robustness:l.videoRobustness})}d.keySystemConfiguration=h,i.push(d)}return i},shaka.util.StreamUtils.patchVp9=function(e){return"vp9"==e?"vp09.00.10.08":e},shaka.util.StreamUtils.filterManifestByCurrentVariant=function(a,e){var r=shaka.util.StreamUtils;e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,t&&a&&a.audio&&!r.areStreamsCompatible_(t,a.audio)?(shaka.log.debug("Droping variant - not compatible with active audio","active audio",r.getStreamSummaryString_(a.audio),"variant.audio",r.getStreamSummaryString_(t)),!1):!(e&&a&&a.video&&!r.areStreamsCompatible_(e,a.video)&&(shaka.log.debug("Droping variant - not compatible with active video","active video",r.getStreamSummaryString_(a.video),"variant.video",r.getStreamSummaryString_(e)),1))})},shaka.util.StreamUtils.filterTextStreams_=function(e){e.textStreams=e.textStreams.filter(function(e){var t=shaka.util.MimeUtils.getFullType(e.mimeType,e.codecs);return(t=shaka.text.TextEngine.isTypeSupported(t))||shaka.log.debug("Dropping text stream. Is not supported by the platform.",e),t})},shaka.util.StreamUtils.filterImageStreams_=function(e){e.imageStreams=e.imageStreams.filter(function(e){var t=["image/svg+xml","image/png","image/jpeg"],a=shaka.util.Platform;return(a.isWebOS()||a.isTizen()||a.isChromecast())&&t.push("image/webp"),(t=t.includes(e.mimeType))||shaka.log.debug("Dropping image stream. Is not supported by the platform.",e),t})},shaka.util.StreamUtils.areStreamsCompatible_=function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},shaka.util.StreamUtils.variantToTrack=function(e){var t=e.audio,a=e.video,r=t?t.codecs:null,n=a?a.codecs:null,i=[],o=(n&&i.push(n),r&&i.push(r),[]),s=(a&&o.push(a.mimeType),t&&o.push(t.mimeType),o=o[0]||null,[]),l=(t&&s.push(t.kind),a&&s.push(a.kind),s=s[0]||null,new Set);if(t)for(var u=$jscomp.makeIterator(t.roles),c=u.next();!c.done;c=u.next())l.add(c.value);if(a)for(c=(u=$jscomp.makeIterator(a.roles)).next();!c.done;c=u.next())l.add(c.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:o,codecs:i.join(", "),audioCodec:r,videoCodec:n,primary:e.primary,roles:Array.from(l),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},a&&(e.videoId=a.id,e.originalVideoId=a.originalId,e.width=a.width||null,e.height=a.height||null,e.frameRate=a.frameRate||null,e.pixelAspectRatio=a.pixelAspectRatio||null,e.videoBandwidth=a.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},shaka.util.StreamUtils.textStreamToTrack=function(e){return{id:e.id,active:!1,type:shaka.util.ManifestParserUtils.ContentType.TEXT,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}},shaka.util.StreamUtils.imageStreamToTrack=function(e){return{id:e.id,active:!1,type:shaka.util.ManifestParserUtils.ContentType.IMAGE,bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:e.width||null,height:e.height||null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:e.tilesLayout||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}},shaka.util.StreamUtils.html5TrackId=function(e){return e.__shaka_id||(e.__shaka_id=shaka.util.StreamUtils.nextTrackId_++),e.__shaka_id},shaka.util.StreamUtils.html5TextTrackToTrack=function(e){var t=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,a=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(e);return a.active="disabled"!=e.mode,a.type="text",a.originalTextId=e.id,"captions"==e.kind&&(a.mimeType=t),e.kind&&(a.roles=[e.kind]),"forced"==e.kind&&(a.forced=!0),a},shaka.util.StreamUtils.html5AudioTrackToTrack=function(e){var t=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t},shaka.util.StreamUtils.html5TrackToGenericShakaTrack_=function(e){return{id:shaka.util.StreamUtils.html5TrackId(e),active:!1,type:"",bandwidth:0,language:shaka.util.LanguageUtils.normalize(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}},shaka.util.StreamUtils.isPlayable=function(e){return e.allowedByApplication&&e.allowedByKeySystem},shaka.util.StreamUtils.getPlayableVariants=function(e){return e.filter(function(e){return shaka.util.StreamUtils.isPlayable(e)})},shaka.util.StreamUtils.filterVariantsByAudioChannelCount=function(e,t){for(var a=e.filter(function(e){return e.audio&&e.audio.channelsCount}),r=new Map,n=(a=$jscomp.makeIterator(a)).next();!n.done;n=a.next()){var i=(n=n.value).audio.channelsCount;goog.asserts.assert(null!=i,"Must have count after filtering!"),r.has(i)||r.set(i,[]),r.get(i).push(n)}return 0==(a=Array.from(r.keys())).length?e:(n=a.filter(function(e){return e<=t})).length?r.get(Math.max.apply(Math,$jscomp.arrayFromIterable(n))):r.get(Math.min.apply(Math,$jscomp.arrayFromIterable(a)))},shaka.util.StreamUtils.filterVariantsByAudioCodec=function(e,t){var a=new Map;e.sort(function(e,t){return e.audio.bandwidth<t.audio.bandwidth?-1:e.audio.bandwidth>t.audio.bandwidth?1:0});for(var r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next()){var i=(n=n.value).audio.codecs;a.has(i)||a.set(i,[]),a.get(i).push(n)}var o=Array.from(a.keys());if(0===o.length)return e;var s=0;if(0===(r=[]).length)for(;s<t.length&&0===r.length;)r=o.filter(function(e){return e===t[s]}),s++;return 0===r.length&&(r=o.filter(function(e){return e===o[0]})),a.get.apply(a,$jscomp.arrayFromIterable(r))},shaka.util.StreamUtils.filterStreamsByLanguageAndRole=function(e,t,a,r){var n,i=shaka.util.LanguageUtils,o=e,s=e.filter(function(e){return e.primary}),l=(o=s.length?s:o).length?o[0].language:"",o=o.filter(function(e){return e.language==l});if(o=(o=t&&(n=i.findClosestLocale(i.normalize(t),e.map(function(e){return e.language})))?e.filter(function(e){return i.normalize(e.language)==n}):o).filter(function(e){return e.forced==r}),a){if((e=shaka.util.StreamUtils.filterTextStreamsByRole_(o,a)).length)return e;shaka.log.warning("No exact match for the text role could be found.")}else if((e=o.filter(function(e){return 0==e.roles.length})).length)return e;return(e=o.map(function(e){return e.roles}).reduce(shaka.util.Functional.collapseArrays,[])).length?shaka.util.StreamUtils.filterTextStreamsByRole_(o,e[0]):o},shaka.util.StreamUtils.filterTextStreamsByRole_=function(e,t){return e.filter(function(e){return e.roles.includes(t)})},shaka.util.StreamUtils.isAudio=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.AUDIO},shaka.util.StreamUtils.isVideo=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.VIDEO},shaka.util.StreamUtils.getVariantStreams=function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},shaka.util.StreamUtils.getVariantSummaryString_=function(e){var t=[];return e.audio&&t.push(shaka.util.StreamUtils.getStreamSummaryString_(e.audio)),e.video&&t.push(shaka.util.StreamUtils.getStreamSummaryString_(e.video)),t.join(", ")},shaka.util.StreamUtils.getStreamSummaryString_=function(e){return shaka.util.StreamUtils.isAudio(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:shaka.util.StreamUtils.isVideo(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"},shaka.util.StreamUtils.nextTrackId_=0,shaka.abr.SimpleAbrManager=function(){var t=this;this.switch_=null,this.enabled_=!1,this.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator,navigator.connection&&navigator.connection.addEventListener("change",function(){var e;t.config_.useNetworkInformation&&t.enabled_&&(t.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator,e=t.chooseVariant())&&t.switch_(e)}),this.variants_=[],this.playbackRate_=1,this.startupComplete_=!1,this.config_=this.lastTimeChosenMs_=null},shaka.abr.SimpleAbrManager.prototype.stop=function(){this.switch_=null,this.enabled_=!1,this.variants_=[],this.playbackRate_=1,this.lastTimeChosenMs_=null},shaka.abr.SimpleAbrManager.prototype.init=function(e){this.switch_=e},shaka.abr.SimpleAbrManager.prototype.chooseVariant=function(){var e=(a=shaka.abr.SimpleAbrManager).filterAndSortVariants_(this.config_.restrictions,this.variants_),t=this.getDefaultBandwidth_(),t=this.bandwidthEstimator_.getBandwidthEstimate(t);this.variants_.length&&!e.length&&(shaka.log.warning("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=a.filterAndSortVariants_(null,this.variants_))[0]]);for(var a=e[0]||null,r=(e=$jscomp.makeIterator(shaka.util.Iterables.enumerate(e))).next();!r.done;r=e.next()){var n=r.value,r=n.item,i=n.next,o=isNaN(this.playbackRate_)?1:Math.abs(this.playbackRate_),s=(n=o*r.bandwidth)/this.config_.bandwidthDowngradeTarget,i=o*(i||{bandwidth:1/0}).bandwidth/this.config_.bandwidthUpgradeTarget;shaka.log.v2("Bandwidth ranges:",(n/1e6).toFixed(3),(s/1e6).toFixed(3),(i/1e6).toFixed(3)),s<=t&&t<=i&&(a=r)}return this.lastTimeChosenMs_=Date.now(),a},shaka.abr.SimpleAbrManager.prototype.enable=function(){this.enabled_=!0},shaka.abr.SimpleAbrManager.prototype.disable=function(){this.enabled_=!1},shaka.abr.SimpleAbrManager.prototype.segmentDownloaded=function(e,t){shaka.log.v2("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.lastTimeChosenMs_,"enabled="+this.enabled_),goog.asserts.assert(0<=e,"expected a non-negative duration"),this.bandwidthEstimator_.sample(e,t),null!=this.lastTimeChosenMs_&&this.enabled_&&this.suggestStreams_()},shaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate=function(){return this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate)},shaka.abr.SimpleAbrManager.prototype.setVariants=function(e){this.variants_=e},shaka.abr.SimpleAbrManager.prototype.playbackRateChanged=function(e){this.playbackRate_=e},shaka.abr.SimpleAbrManager.prototype.configure=function(e){this.config_=e},shaka.abr.SimpleAbrManager.prototype.suggestStreams_=function(){if(shaka.log.v2("Suggesting Streams..."),goog.asserts.assert(null!=this.lastTimeChosenMs_,"lastTimeChosenMs_ should not be null"),this.startupComplete_){if(Date.now()-this.lastTimeChosenMs_<1e3*this.config_.switchInterval)return void shaka.log.v2("Still within switch interval...")}else{if(!this.bandwidthEstimator_.hasGoodEstimate())return void shaka.log.v2("Still waiting for a good estimate...");this.startupComplete_=!0}var e=this.chooseVariant(),t=this.getDefaultBandwidth_(),t=this.bandwidthEstimator_.getBandwidthEstimate(t);t=Math.round(t/1e3),e&&(shaka.log.debug("Calling switch_(), bandwidth="+t+" kbps"),this.switch_(e))},shaka.abr.SimpleAbrManager.prototype.getDefaultBandwidth_=function(){var e=this.config_.defaultBandwidthEstimate;return e=navigator.connection&&navigator.connection.downlink&&this.config_.useNetworkInformation?1e6*navigator.connection.downlink:e},shaka.abr.SimpleAbrManager.filterAndSortVariants_=function(t,e){return(e=t?e.filter(function(e){return goog.asserts.assert(t,"Restrictions should exist!"),shaka.util.StreamUtils.meetsRestrictions(e,t,{width:1/0,height:1/0})}):e).sort(function(e,t){return e.bandwidth-t.bandwidth})},goog.exportSymbol("shaka.abr.SimpleAbrManager",shaka.abr.SimpleAbrManager),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"configure",shaka.abr.SimpleAbrManager.prototype.configure),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"playbackRateChanged",shaka.abr.SimpleAbrManager.prototype.playbackRateChanged),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"setVariants",shaka.abr.SimpleAbrManager.prototype.setVariants),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"getBandwidthEstimate",shaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"segmentDownloaded",shaka.abr.SimpleAbrManager.prototype.segmentDownloaded),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"disable",shaka.abr.SimpleAbrManager.prototype.disable),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"enable",shaka.abr.SimpleAbrManager.prototype.enable),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"chooseVariant",shaka.abr.SimpleAbrManager.prototype.chooseVariant),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"init",shaka.abr.SimpleAbrManager.prototype.init),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"stop",shaka.abr.SimpleAbrManager.prototype.stop),shaka.media.AdaptationSet=function(e,t){this.root_=e,this.variants_=new Set([e]);for(var a=$jscomp.makeIterator(t=t||[]),r=a.next();!r.done;r=a.next())this.add(r.value)},shaka.media.AdaptationSet.prototype.add=function(e){return this.canInclude(e)?(this.variants_.add(e),!0):(shaka.log.warning("Rejecting variant - not compatible with root."),!1)},shaka.media.AdaptationSet.prototype.canInclude=function(e){return shaka.media.AdaptationSet.areAdaptable(this.root_,e)},shaka.media.AdaptationSet.areAdaptable=function(e,t){var a=shaka.media.AdaptationSet;return!!e.audio==!!t.audio&&!!e.video==!!t.video&&e.language==t.language&&(goog.asserts.assert(!!e.audio==!!t.audio,"Both should either have audio or not have audio."),!(e.audio&&t.audio&&!a.areAudiosCompatible_(e.audio,t.audio)||(goog.asserts.assert(!!e.video==!!t.video,"Both should either have video or not have video."),e.video&&t.video&&!a.areVideosCompatible_(e.video,t.video))))},shaka.media.AdaptationSet.prototype.values=function(){return this.variants_.values()},shaka.media.AdaptationSet.areAudiosCompatible_=function(e,t){var a=shaka.media.AdaptationSet;return!((!e.channelsCount||!t.channelsCount||2<e.channelsCount||2<t.channelsCount)&&e.channelsCount!=t.channelsCount||!a.canTransitionBetween_(e,t)||!a.areRolesEqual_(e.roles,t.roles))},shaka.media.AdaptationSet.areVideosCompatible_=function(e,t){var a=shaka.media.AdaptationSet;return!(!a.canTransitionBetween_(e,t)||!a.areRolesEqual_(e.roles,t.roles))},shaka.media.AdaptationSet.canTransitionBetween_=function(e,t){if(e.mimeType!=t.mimeType)return!1;var a=shaka.util.MimeUtils.splitCodecs(e.codecs).map(function(e){return shaka.util.MimeUtils.getCodecBase(e)}),r=shaka.util.MimeUtils.splitCodecs(t.codecs).map(function(e){return shaka.util.MimeUtils.getCodecBase(e)});if(a.length!=r.length)return!1;a.sort(),r.sort();for(var n=$jscomp.makeIterator(shaka.util.Iterables.range(a.length)),i=n.next();!i.done;i=n.next())if(a[i=i.value]!=r[i])return!1;return!0},shaka.media.AdaptationSet.areRolesEqual_=function(e,t){var a=new Set(e),r=new Set(t);if(a.delete("main"),r.delete("main"),a.size!=r.size)return!1;for(var n=(a=$jscomp.makeIterator(a)).next();!n.done;n=a.next())if(!r.has(n.value))return!1;return!0},shaka.media.AdaptationSetCriteria=function(){},shaka.media.AdaptationSetCriteria.prototype.create=function(e){},shaka.media.ExampleBasedCriteria=function(e){this.example_=e,this.fallback_=new shaka.media.PreferenceBasedCriteria(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")},shaka.media.ExampleBasedCriteria.prototype.create=function(e){var t=this,a=e.filter(function(e){return shaka.media.AdaptationSet.areAdaptable(t.example_,e)});return a.length?new shaka.media.AdaptationSet(a[0],a):this.fallback_.create(e)},shaka.media.PreferenceBasedCriteria=function(e,t,a,r){this.language_=e,this.role_=t,this.channelCount_=a,this.label_=void 0===r?"":r},shaka.media.PreferenceBasedCriteria.prototype.create=function(e){var t=shaka.media.PreferenceBasedCriteria,a=shaka.util.StreamUtils,r=[],r=t.filterByLanguage_(e,this.language_),n=e.filter(function(e){return e.primary});for(r=r.length?r:n.length?n:e,(e=t.filterVariantsByRole_(r,this.role_)).length?r=e:shaka.log.warning("No exact match for variant role could be found."),this.channelCount_&&((a=a.filterVariantsByAudioChannelCount(r,this.channelCount_)).length?r=a:shaka.log.warning("No exact match for the channel count could be found.")),this.label_&&((t=t.filterVariantsByLabel_(r,this.label_)).length?r=t:shaka.log.warning("No exact match for variant label could be found.")),t=new shaka.media.AdaptationSet(r[0]),a=(r=$jscomp.makeIterator(r)).next();!a.done;a=r.next())a=a.value,t.canInclude(a)&&t.add(a);return t},shaka.media.PreferenceBasedCriteria.filterByLanguage_=function(e,t){var a=shaka.util.LanguageUtils,t=a.normalize(t),r=a.findClosestLocale(t,e.map(function(e){return a.getLocaleForVariant(e)}));return r?e.filter(function(e){return r==a.getLocaleForVariant(e)}):[]},shaka.media.PreferenceBasedCriteria.filterVariantsByRole_=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})},shaka.media.PreferenceBasedCriteria.filterVariantsByLabel_=function(e,t){return e.filter(function(e){return!!e.audio&&(e=e.audio.label.toLowerCase())==t.toLowerCase()})},shaka.media.BufferingObserver=function(e,t){var a=shaka.media.BufferingObserver.State;this.previousState_=a.SATISFIED,this.thresholds_=(new Map).set(a.SATISFIED,t).set(a.STARVING,e)},shaka.media.BufferingObserver.prototype.setThresholds=function(e,t){var a=shaka.media.BufferingObserver.State;this.thresholds_.set(a.SATISFIED,t).set(a.STARVING,e)},shaka.media.BufferingObserver.prototype.update=function(e,t){var a=shaka.media.BufferingObserver.State,r=this.thresholds_.get(this.previousState_),n=this.previousState_;return this.previousState_=a=t||r<=e?a.SATISFIED:a.STARVING,n!=a},shaka.media.BufferingObserver.prototype.setState=function(e){this.previousState_=e},shaka.media.BufferingObserver.prototype.getState=function(){return this.previousState_},shaka.media.BufferingObserver.State={STARVING:0,SATISFIED:1},shaka.net={},shaka.net.Backoff=function(e,t){t=void 0!==t&&t;var a=shaka.net.Backoff.defaultRetryParameters();this.maxAttempts_=(null==e.maxAttempts?a:e).maxAttempts,goog.asserts.assert(1<=this.maxAttempts_,"maxAttempts should be >= 1"),this.baseDelay_=(null==e.baseDelay?a:e).baseDelay,goog.asserts.assert(0<=this.baseDelay_,"baseDelay should be >= 0"),this.fuzzFactor_=(null==e.fuzzFactor?a:e).fuzzFactor,goog.asserts.assert(0<=this.fuzzFactor_,"fuzzFactor should be >= 0"),this.backoffFactor_=(null==e.backoffFactor?a:e).backoffFactor,goog.asserts.assert(0<=this.backoffFactor_,"backoffFactor should be >= 0"),this.numAttempts_=0,this.nextUnfuzzedDelay_=this.baseDelay_,(this.autoReset_=t)&&(goog.asserts.assert(2<=this.maxAttempts_,"maxAttempts must be >= 2 for autoReset == true"),this.numAttempts_=1)},shaka.net.Backoff.prototype.attempt=function(){var t,a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(r.numAttempts_>=r.maxAttempts_){if(!r.autoReset_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.ATTEMPTS_EXHAUSTED);r.reset_()}return(t=r.numAttempts_,r.numAttempts_++,0==t)?(goog.asserts.assert(!r.autoReset_,"Failed to delay with auto-reset!"),e.return()):(a=shaka.net.Backoff.fuzz_(r.nextUnfuzzedDelay_,r.fuzzFactor_),e.yield(new Promise(function(e){shaka.net.Backoff.defer(a,e)}),2))}r.nextUnfuzzedDelay_*=r.backoffFactor_,e.jumpToEnd()})},shaka.net.Backoff.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},shaka.net.Backoff.fuzz_=function(e,t){return e*(1+(2*Math.random()-1)*t)},shaka.net.Backoff.prototype.reset_=function(){goog.asserts.assert(this.autoReset_,"Should only be used for auto-reset!"),this.numAttempts_=1,this.nextUnfuzzedDelay_=this.baseDelay_},shaka.net.Backoff.defer=function(e,t){new shaka.util.Timer(t).tickAfter(e/1e3)},shaka.util.AbortableOperation=function(e,t){this.promise=e,this.onAbort_=t,this.aborted_=!1},shaka.util.AbortableOperation.failed=function(e){return new shaka.util.AbortableOperation(Promise.reject(e),function(){return Promise.resolve()})},shaka.util.AbortableOperation.aborted=function(){var e=Promise.reject(shaka.util.AbortableOperation.abortError());return e.catch(function(){}),new shaka.util.AbortableOperation(e,function(){return Promise.resolve()})},shaka.util.AbortableOperation.abortError=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)},shaka.util.AbortableOperation.completed=function(e){return new shaka.util.AbortableOperation(Promise.resolve(e),function(){return Promise.resolve()})},shaka.util.AbortableOperation.notAbortable=function(e){return new shaka.util.AbortableOperation(e,function(){return e.catch(function(){})})},shaka.util.AbortableOperation.prototype.abort=function(){return this.aborted_=!0,this.onAbort_()},shaka.util.AbortableOperation.all=function(e){return new shaka.util.AbortableOperation(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})},shaka.util.AbortableOperation.prototype.finally=function(t){return this.promise.then(function(e){return t(!0)},function(e){return t(!1)}),this},shaka.util.AbortableOperation.prototype.chain=function(r,n){function e(a){return function(e){var t;i.aborted_&&a?o.reject(s):(t=a?r:n)?l=shaka.util.AbortableOperation.wrapChainCallback_(t,e,o):(a?o.resolve:o.reject)(e)}}var i=this,o=new shaka.util.PublicPromise,s=shaka.util.AbortableOperation.abortError(),l=function(){return o.reject(s),i.abort()};return this.promise.then(e(!0),e(!1)),new shaka.util.AbortableOperation(o,function(){return l()})},shaka.util.AbortableOperation.wrapChainCallback_=function(e,t,a){try{var r=e(t);return r&&r.promise&&r.abort?(a.resolve(r.promise),function(){return r.abort()}):(a.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(e){return a.reject(e),function(){return Promise.resolve()}}},goog.exportSymbol("shaka.util.AbortableOperation",shaka.util.AbortableOperation),goog.exportProperty(shaka.util.AbortableOperation.prototype,"chain",shaka.util.AbortableOperation.prototype.chain),goog.exportProperty(shaka.util.AbortableOperation.prototype,"finally",shaka.util.AbortableOperation.prototype.finally),goog.exportProperty(shaka.util.AbortableOperation,"all",shaka.util.AbortableOperation.all),goog.exportProperty(shaka.util.AbortableOperation.prototype,"abort",shaka.util.AbortableOperation.prototype.abort),goog.exportProperty(shaka.util.AbortableOperation,"notAbortable",shaka.util.AbortableOperation.notAbortable),goog.exportProperty(shaka.util.AbortableOperation,"completed",shaka.util.AbortableOperation.completed),goog.exportProperty(shaka.util.AbortableOperation,"aborted",shaka.util.AbortableOperation.aborted),goog.exportProperty(shaka.util.AbortableOperation,"failed",shaka.util.AbortableOperation.failed),shaka.util.FakeEvent=function(e,t){for(var a in t=void 0===t?{}:t)Object.defineProperty(this,a,{value:t[a],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=(window.performance&&window.performance.now?window.performance:Date).now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.stopped=!1},shaka.util.FakeEvent.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},shaka.util.FakeEvent.prototype.stopImmediatePropagation=function(){this.stopped=!0},shaka.util.FakeEvent.prototype.stopPropagation=function(){},goog.exportSymbol("shaka.util.FakeEvent",shaka.util.FakeEvent),shaka.util.FakeEventTarget=function(){this.listeners_=new shaka.util.MultiMap,this.dispatchTarget=this},shaka.util.FakeEventTarget.prototype.addEventListener=function(e,t,a){this.listeners_.push(e,t)},shaka.util.FakeEventTarget.prototype.listenToAllEvents=function(e){this.addEventListener(shaka.util.FakeEventTarget.ALL_EVENTS_,e)},shaka.util.FakeEventTarget.prototype.removeEventListener=function(e,t,a){this.listeners_.remove(e,t)},shaka.util.FakeEventTarget.prototype.dispatchEvent=function(e){goog.asserts.assert(e instanceof shaka.util.FakeEvent,"FakeEventTarget can only dispatch FakeEvents!");var t=this.listeners_.get(e.type)||[],a=this.listeners_.get(shaka.util.FakeEventTarget.ALL_EVENTS_);for(a&&(t=t.concat(a)),a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next()){a=a.value,e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;try{a.handleEvent?a.handleEvent(e):a.call(this,e)}catch(e){shaka.log.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.stopped)break}return e.defaultPrevented},shaka.util.FakeEventTarget.ALL_EVENTS_="All",shaka.util.ObjectUtils=function(){},shaka.util.ObjectUtils.cloneObject=function(e){var i=new Set;return function e(t){switch(void 0===t?"undefined":_typeof(t)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t||t.buffer&&t.buffer.constructor==ArrayBuffer)return t;if(i.has(t))return null;var a=t.constructor==Array;if(t.constructor!=Object&&!a)return null;i.add(t);var r,n=a?[]:{};for(r in t)n[r]=e(t[r]);return a&&(n.length=t.length),n}}(e)},shaka.util.ObjectUtils.shallowCloneObject=function(e){var t,a={};for(t in e)a[t]=e[t];return a},shaka.util.OperationManager=function(){this.operations_=[]},shaka.util.OperationManager.prototype.manage=function(e){var t=this;this.operations_.push(e.finally(function(){shaka.util.ArrayUtils.remove(t.operations_,e)}))},shaka.util.OperationManager.prototype.destroy=function(){for(var e=[],t=$jscomp.makeIterator(this.operations_),a=t.next();!a.done;a=t.next())(a=a.value).promise.catch(function(){}),e.push(a.abort());return this.operations_=[],Promise.all(e)},shaka.net.NetworkingEngine=function(e){shaka.util.FakeEventTarget.call(this),this.destroyed_=!1,this.operationManager_=new shaka.util.OperationManager,this.requestFilters_=new Set,this.responseFilters_=new Set,this.onProgressUpdated_=e||null,this.forceHTTPS_=!1},$jscomp.inherits(shaka.net.NetworkingEngine,shaka.util.FakeEventTarget),shaka.net.NetworkingEngine.prototype.setForceHTTPS=function(e){this.forceHTTPS_=e},shaka.net.NetworkingEngine.registerScheme=function(e,t,a,r){r=void 0!==r&&r,goog.asserts.assert(null==a||0<a,"explicit priority must be > 0"),a=a||shaka.net.NetworkingEngine.PluginPriority.APPLICATION;var n=shaka.net.NetworkingEngine.schemes_[e];(!n||a>=n.priority)&&(shaka.net.NetworkingEngine.schemes_[e]={priority:a,plugin:t,progressSupport:r})},shaka.net.NetworkingEngine.unregisterScheme=function(e){delete shaka.net.NetworkingEngine.schemes_[e]},shaka.net.NetworkingEngine.prototype.registerRequestFilter=function(e){this.requestFilters_.add(e)},shaka.net.NetworkingEngine.prototype.unregisterRequestFilter=function(e){this.requestFilters_.delete(e)},shaka.net.NetworkingEngine.prototype.clearAllRequestFilters=function(){this.requestFilters_.clear()},shaka.net.NetworkingEngine.prototype.registerResponseFilter=function(e){this.responseFilters_.add(e)},shaka.net.NetworkingEngine.prototype.unregisterResponseFilter=function(e){this.responseFilters_.delete(e)},shaka.net.NetworkingEngine.prototype.clearAllResponseFilters=function(){this.responseFilters_.clear()},shaka.net.NetworkingEngine.defaultRetryParameters=function(){return shaka.net.Backoff.defaultRetryParameters()},shaka.net.NetworkingEngine.makeRequest=function(e,t,a){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===a?null:a}},shaka.net.NetworkingEngine.prototype.destroy=function(){return this.destroyed_=!0,this.requestFilters_.clear(),this.responseFilters_.clear(),this.operationManager_.destroy()},shaka.net.NetworkingEngine.prototype.request=function(r,e){var n=this,t=shaka.util.ObjectUtils,a=new shaka.net.NetworkingEngine.NumBytesRemainingClass;if(this.destroyed_)return(t=Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED))).catch(function(){}),new shaka.net.NetworkingEngine.PendingRequest(t,function(){return Promise.resolve()},a);goog.asserts.assert(e.uris&&e.uris.length,"Request without URIs!"),e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?t.cloneObject(e.retryParameters):shaka.net.NetworkingEngine.defaultRetryParameters(),e.uris=t.cloneObject(e.uris);var i=(t=this.filterRequest_(r,e)).chain(function(){return n.makeRequestWithRetry_(r,e,a)}),o=i.chain(function(e){return n.filterResponse_(r,e)}),s=Date.now(),l=0,u=(t.promise.then(function(){l=Date.now()-s},function(){}),0),c=(i.promise.then(function(){u=Date.now()},function(){}),o.chain(function(e){var t=Date.now()-u,a=e.response;return a.timeMs+=l,a.timeMs+=t,e.gotProgress||!n.onProgressUpdated_||a.fromCache||r!=shaka.net.NetworkingEngine.RequestType.SEGMENT||n.onProgressUpdated_(a.timeMs,a.data.byteLength),a},function(e){throw e&&(goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type"),e.severity=shaka.util.Error.Severity.CRITICAL),e}));return t=new shaka.net.NetworkingEngine.PendingRequest(c.promise,function(){return c.abort()},a),this.operationManager_.manage(t),t},shaka.net.NetworkingEngine.prototype.filterRequest_=function(t,a){for(var e=shaka.util.AbortableOperation.completed(void 0),r={},n=$jscomp.makeIterator(this.requestFilters_),i=n.next();!i.done;r={$jscomp$loop$prop$requestFilter$611:r.$jscomp$loop$prop$requestFilter$611},i=n.next())r.$jscomp$loop$prop$requestFilter$611=i.value,e=e.chain(function(e){return function(){return a.body&&(a.body=shaka.util.BufferUtils.toArrayBuffer(a.body)),e.$jscomp$loop$prop$requestFilter$611(t,a)}}(r));return e.chain(void 0,function(e){if(e instanceof shaka.util.Error&&e.code==shaka.util.Error.Code.OPERATION_ABORTED)throw e;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.REQUEST_FILTER_ERROR,e)})},shaka.net.NetworkingEngine.prototype.makeRequestWithRetry_=function(e,t,a){var r=new shaka.net.Backoff(t.retryParameters,!1);return this.send_(e,t,r,0,null,a)},shaka.net.NetworkingEngine.prototype.send_=function(i,a,r,o,n,s){var l,u,c,d,h,p=this,e=(this.forceHTTPS_&&(a.uris[o]=a.uris[o].replace("http://","https://")),new goog.Uri(a.uris[o])),t=e.getScheme(),f=!1,m=(t||(t=shaka.net.NetworkingEngine.getLocationProtocol_(),goog.asserts.assert(":"==t[t.length-1],"location.protocol expected to end with a colon!"),t=t.slice(0,-1),e.setScheme(t),a.uris[o]=e.toString()),t=t.toLowerCase(),(t=shaka.net.NetworkingEngine.schemes_[t])?t.plugin:null);return m?(l=t.progressSupport,c=u=null,d=!1,shaka.util.AbortableOperation.notAbortable(r.attempt()).chain(function(){if(p.destroyed_)return shaka.util.AbortableOperation.aborted();h=Date.now();var e,r,n=shaka.net.NetworkingEngine.RequestType.SEGMENT,t=m(a.uris[o],a,i,function(e,t,a){u&&u.stop(),c&&c.tickAfter(r/1e3),p.onProgressUpdated_&&i==n&&(p.onProgressUpdated_(e,t),f=!0,s.setBytes(a))});return l&&((e=a.retryParameters.connectionTimeout)&&(u=new shaka.util.Timer(function(){d=!0,t.abort()})).tickAfter(e/1e3),r=a.retryParameters.stallTimeout)&&(c=new shaka.util.Timer(function(){d=!0,t.abort()})),t}).chain(function(e){return u&&u.stop(),c&&c.stop(),null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,gotProgress:f}},function(e){if(u&&u.stop(),c&&c.stop(),p.destroyed_)return shaka.util.AbortableOperation.aborted();if((e=d?new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,a.uris[o],i):e)instanceof shaka.util.Error){if(e.code==shaka.util.Error.Code.OPERATION_ABORTED)throw e;if(e.code==shaka.util.Error.Code.ATTEMPTS_EXHAUSTED)throw goog.asserts.assert(n,"Should have last error"),n;var t;if(e.severity==shaka.util.Error.Severity.RECOVERABLE)return t=new shaka.util.FakeEvent("retry",{error:e}),p.dispatchEvent(t),o=(o+1)%a.uris.length,p.send_(i,a,r,o,e,s)}throw e})):shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.UNSUPPORTED_SCHEME,e))},shaka.net.NetworkingEngine.prototype.filterResponse_=function(a,r){for(var e=shaka.util.AbortableOperation.completed(void 0),t={},n=$jscomp.makeIterator(this.responseFilters_),i=n.next();!i.done;t={$jscomp$loop$prop$responseFilter$613:t.$jscomp$loop$prop$responseFilter$613},i=n.next())t.$jscomp$loop$prop$responseFilter$613=i.value,e=e.chain(function(t){return function(){var e=r.response;return e.data&&(e.data=shaka.util.BufferUtils.toArrayBuffer(e.data)),t.$jscomp$loop$prop$responseFilter$613(a,e)}}(t));return e.chain(function(){return r},function(e){var t=shaka.util.Error.Severity.CRITICAL;if(e instanceof shaka.util.Error){if(e.code==shaka.util.Error.Code.OPERATION_ABORTED)throw e;t=e.severity}throw new shaka.util.Error(t,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.RESPONSE_FILTER_ERROR,e)})},shaka.net.NetworkingEngine.getLocationProtocol_=function(){return location.protocol},goog.exportSymbol("shaka.net.NetworkingEngine",shaka.net.NetworkingEngine),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"request",shaka.net.NetworkingEngine.prototype.request),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"destroy",shaka.net.NetworkingEngine.prototype.destroy),goog.exportProperty(shaka.net.NetworkingEngine,"makeRequest",shaka.net.NetworkingEngine.makeRequest),goog.exportProperty(shaka.net.NetworkingEngine,"defaultRetryParameters",shaka.net.NetworkingEngine.defaultRetryParameters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllResponseFilters",shaka.net.NetworkingEngine.prototype.clearAllResponseFilters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterResponseFilter",shaka.net.NetworkingEngine.prototype.unregisterResponseFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerResponseFilter",shaka.net.NetworkingEngine.prototype.registerResponseFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllRequestFilters",shaka.net.NetworkingEngine.prototype.clearAllRequestFilters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterRequestFilter",shaka.net.NetworkingEngine.prototype.unregisterRequestFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerRequestFilter",shaka.net.NetworkingEngine.prototype.registerRequestFilter),goog.exportProperty(shaka.net.NetworkingEngine,"unregisterScheme",shaka.net.NetworkingEngine.unregisterScheme),goog.exportProperty(shaka.net.NetworkingEngine,"registerScheme",shaka.net.NetworkingEngine.registerScheme),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"setForceHTTPS",shaka.net.NetworkingEngine.prototype.setForceHTTPS),shaka.net.NetworkingEngine.NumBytesRemainingClass=function(){this.bytesToLoad_=0},shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.setBytes=function(e){this.bytesToLoad_=e},shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.getBytes=function(){return this.bytesToLoad_},goog.exportProperty(shaka.net.NetworkingEngine,"NumBytesRemainingClass",shaka.net.NetworkingEngine.NumBytesRemainingClass),shaka.net.NetworkingEngine.PendingRequest=function(e,t,a){shaka.util.AbortableOperation.call(this,e,t),this.bytesRemaining_=a},$jscomp.inherits(shaka.net.NetworkingEngine.PendingRequest,shaka.util.AbortableOperation),shaka.net.NetworkingEngine.PendingRequest.prototype.getBytesRemaining=function(){return this.bytesRemaining_.getBytes()},goog.exportProperty(shaka.net.NetworkingEngine,"PendingRequest",shaka.net.NetworkingEngine.PendingRequest),shaka.net.NetworkingEngine.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},goog.exportProperty(shaka.net.NetworkingEngine,"RequestType",shaka.net.NetworkingEngine.RequestType),shaka.net.NetworkingEngine.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3},goog.exportProperty(shaka.net.NetworkingEngine,"PluginPriority",shaka.net.NetworkingEngine.PluginPriority),shaka.net.NetworkingEngine.schemes_={},shaka.util.FairPlayUtils=function(){},shaka.util.FairPlayUtils.defaultGetContentId=function(e){return e=shaka.util.StringUtils.fromBytesAutoDetect(e),new goog.Uri(e).getDomain()},shaka.util.FairPlayUtils.initDataTransform=function(e,t,a){if(!a||!a.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.SERVER_CERTIFICATE_REQUIRED);t="string"==typeof t?shaka.util.StringUtils.toUTF16(t,!0):t,e=shaka.util.StringUtils.fromBytesAutoDetect(e),e=shaka.util.StringUtils.toUTF16(e,!0);function r(e){shaka.util.BufferUtils.toDataView(n).setUint32(i,e.byteLength,!0),i+=4,n.set(shaka.util.BufferUtils.toUint8(e),i),i+=e.byteLength}var n=new Uint8Array(12+e.byteLength+t.byteLength+a.byteLength),i=0;return r(e),r(t),r(a),goog.asserts.assert(i==n.length,"Inconsistent init data length"),n},goog.exportSymbol("shaka.util.FairPlayUtils",shaka.util.FairPlayUtils),goog.exportProperty(shaka.util.FairPlayUtils,"initDataTransform",shaka.util.FairPlayUtils.initDataTransform),goog.exportProperty(shaka.util.FairPlayUtils,"defaultGetContentId",shaka.util.FairPlayUtils.defaultGetContentId),shaka.util.MapUtils=function(){},shaka.util.MapUtils.asMap=function(e){for(var t=new Map,a=$jscomp.makeIterator(Object.keys(e)),r=a.next();!r.done;r=a.next())r=r.value,t.set(r,e[r]);return t},shaka.util.MapUtils.asObject=function(e){var a={};return e.forEach(function(e,t){a[t]=e}),a},shaka.util.MapUtils.hasSameElements=function(e,t){if(e||t){if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var a=$jscomp.makeIterator(e),r=a.next();!r.done;r=a.next()){var r=(n=$jscomp.makeIterator(r.value)).next().value,n=n.next().value;if(!t.has(r))return!1;if((r=t.get(r))!=n||null==r)return!1}}return!0},shaka.media.DrmEngine=function(t,e){var a=this;e=void 0===e?1:e,this.playerInterface_=t,this.supportedTypes_=new Set,this.video_=this.mediaKeys_=null,this.initializedForStorage_=this.initialized_=!1,this.licenseTimeSeconds_=0,this.currentDrmInfo_=null,this.eventManager_=new shaka.util.EventManager,this.activeSessions_=new Map,this.offlineSessionIds_=[],this.allSessionsLoaded_=new shaka.util.PublicPromise,this.config_=null,this.onError_=function(e){a.allSessionsLoaded_.reject(e),t.onError(e)},this.keyStatusByKeyId_=new Map,this.announcedKeyStatusByKeyId_=new Map,this.keyStatusTimer_=new shaka.util.Timer(function(){return a.processKeyStatusChanges_()}),this.usePersistentLicenses_=!1,this.mediaKeyMessageEvents_=[],this.initialRequestsSent_=!1,this.expirationTimer_=new shaka.util.Timer(function(){a.pollExpiration_()}).tickEvery(e),this.allSessionsLoaded_.catch(function(){}),this.destroyer_=new shaka.util.Destroyer(function(){return a.destroyNow_()})},shaka.media.DrmEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.DrmEngine.prototype.destroyNow_=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return t.eventManager_.release(),t.eventManager_=null,t.allSessionsLoaded_.reject(),t.expirationTimer_.stop(),t.expirationTimer_=null,t.keyStatusTimer_.stop(),t.keyStatusTimer_=null,e.yield(t.closeOpenSessions_(),2);case 2:if(t.video_)return goog.asserts.assert(!t.video_.src,"video src must be removed first!"),e.setCatchFinallyBlocks(4),e.yield(t.video_.setMediaKeys(null),6);e.jumpTo(3);break;case 6:e.leaveTryBlock(5);break;case 4:e.enterCatchBlock();case 5:t.video_=null;case 3:t.currentDrmInfo_=null,t.supportedTypes_.clear(),t.mediaKeys_=null,t.offlineSessionIds_=[],t.config_=null,t.onError_=function(){},t.playerInterface_=null,e.jumpToEnd()}})},shaka.media.DrmEngine.prototype.configure=function(e){this.config_=e},shaka.media.DrmEngine.prototype.initForStorage=function(e,t,a){return this.initializedForStorage_=!0,this.offlineSessionIds_=[],this.usePersistentLicenses_=t,this.init_(e,!!a)},shaka.media.DrmEngine.prototype.initForPlayback=function(e,t,a){return this.offlineSessionIds_=t,this.usePersistentLicenses_=0<t.length,this.init_(e,!!a)},shaka.media.DrmEngine.prototype.initForRemoval=function(e,t,a,r,n){var i=new Map;return(r={audioCapabilities:r,videoCapabilities:n,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:e}).drmInfos=[{keySystem:e,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:a,initData:null,keyIds:null}],i.set(e,r),this.queryMediaKeys_(i,[],!1)},shaka.media.DrmEngine.prototype.init_=function(t,a){var r,n,i,o,s,l,u,c,d,h,p,f,m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return s||Object.keys(m.config_.servers).length?(f=m.queryMediaKeys_(p,t,a),e.return(s?f:f.catch(function(){}))):(m.initialized_=!0,e.return(Promise.resolve()));if(goog.asserts.assert(m.config_,"DrmEngine configure() must be called before init()!"),r=m.configureClearKey_())for(n=$jscomp.makeIterator(t),i=n.next();!i.done;i=n.next())(o=i.value).video&&(o.video.drmInfos=[r]),o.audio&&(o.audio.drmInfos=[r]);for((s=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}))||(f=shaka.util.MapUtils.asMap(m.config_.servers),shaka.media.DrmEngine.replaceDrmInfo_(t,f)),l=$jscomp.makeIterator(t),i=l.next();!i.done;i=l.next())for(u=i.value,u=m.getVariantDrmInfos_(u),c=$jscomp.makeIterator(u),d=c.next();!d.done;d=c.next())h=d.value,shaka.media.DrmEngine.fillInDrmInfoDefaults_(h,shaka.util.MapUtils.asMap(m.config_.servers),shaka.util.MapUtils.asMap(m.config_.advanced||{}));return a?e.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(t,m.usePersistentLicenses_),2):(p=m.prepareMediaKeyConfigsForVariants_(t),e.jumpTo(2))})},shaka.media.DrmEngine.prototype.attach=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return r.mediaKeys_?(r.video_=t,r.eventManager_.listenOnce(r.video_,"play",function(){return r.onPlay_()}),"webkitCurrentPlaybackTargetIsWireless"in r.video_&&r.eventManager_.listen(r.video_,"webkitcurrentplaybacktargetiswirelesschanged",function(){return r.closeOpenSessions_()}),a=(a=r.video_.setMediaKeys(r.mediaKeys_)).catch(function(e){return goog.asserts.assert(e instanceof Error,"Wrong error type!"),Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_ATTACH_TO_VIDEO,e.message))}),e.yield(a,2)):(r.eventManager_.listenOnce(t,"encrypted",function(e){r.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO))}),e.return());r.destroyer_.ensureNotDestroyed(),r.createOrLoad(),r.currentDrmInfo_.initData.length||r.offlineSessionIds_.length||(a=function(e){return r.newInitData(e.initDataType,shaka.util.BufferUtils.toUint8(e.initData))},r.eventManager_.listen(r.video_,"encrypted",a)),e.jumpToEnd()})},shaka.media.DrmEngine.prototype.setServerCertificate=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(a.initialized_,"Must call init() before setServerCertificate"),a.mediaKeys_&&a.currentDrmInfo_&&a.currentDrmInfo_.serverCertificate&&a.currentDrmInfo_.serverCertificate.length?(e.setCatchFinallyBlocks(3),e.yield(a.mediaKeys_.setServerCertificate(a.currentDrmInfo_.serverCertificate),5)):e.jumpTo(0);if(3!=e.nextAddress)return e.yieldResult||shaka.log.warning("Server certificates are not supported by the key system.  The server certificate has been ignored."),e.leaveTryBlock(0);throw t=e.enterCatchBlock(),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INVALID_SERVER_CERTIFICATE,t.message)})},shaka.media.DrmEngine.prototype.removeSession=function(t){var a,r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(i.mediaKeys_,"Must call init() before removeSession"),e.yield(i.loadOfflineSession_(t),2)):(a=e.yieldResult)?(r=[],(n=i.activeSessions_.get(a))&&(n.updatePromise=new shaka.util.PublicPromise,r.push(n.updatePromise)),shaka.log.v2("Attempting to remove session",t),r.push(a.remove()),e.yield(Promise.all(r),0)):(shaka.log.v2("Ignoring attempt to remove missing session",t),e.return())})},shaka.media.DrmEngine.prototype.createOrLoad=function(){for(var e=(this.currentDrmInfo_?this.currentDrmInfo_.initData:[])||[],t=$jscomp.makeIterator(e),a=t.next();!a.done;a=t.next())a=a.value,this.newInitData(a.initDataType,a.initData);for(a=(t=$jscomp.makeIterator(this.offlineSessionIds_)).next();!a.done;a=t.next())this.loadOfflineSession_(a.value);return e.length||this.offlineSessionIds_.length||this.allSessionsLoaded_.resolve(),this.allSessionsLoaded_},shaka.media.DrmEngine.prototype.newInitData=function(e,t){for(var a=this.activeSessions_.values(),r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next())if(shaka.util.BufferUtils.equal(t,r.value.initData)&&!shaka.util.Platform.isTizen2())return;this.createTemporarySession_(e,t)},shaka.media.DrmEngine.prototype.initialized=function(){return this.initialized_},shaka.media.DrmEngine.keySystem=function(e){return e?e.keySystem:""},shaka.media.DrmEngine.isPlayReadyKeySystem=function(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.(playready|playready.recommendation.esvm)/)},shaka.media.DrmEngine.prototype.willSupport=function(e){var t;return!!shaka.util.Platform.isLegacyEdge()||(e=e.toLowerCase(),shaka.util.Platform.isTizen()&&e.includes('codecs="ac-3"')?(t=e.replace("ac-3","ec-3"),this.supportedTypes_.has(e)||this.supportedTypes_.has(t)):this.supportedTypes_.has(e))},shaka.media.DrmEngine.prototype.getSessionIds=function(){var e=this.activeSessions_.keys(),e=shaka.util.Iterables.map(e,function(e){return e.sessionId});return Array.from(e)},shaka.media.DrmEngine.prototype.getExpiration=function(){for(var e=1/0,t=this.activeSessions_.keys(),a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next())a=a.value,isNaN(a.expiration)||(e=Math.min(e,a.expiration));return e},shaka.media.DrmEngine.prototype.getLicenseTime=function(){return this.licenseTimeSeconds_||NaN},shaka.media.DrmEngine.prototype.getDrmInfo=function(){return this.currentDrmInfo_},shaka.media.DrmEngine.prototype.getMediaKeys=function(){return this.mediaKeys_},shaka.media.DrmEngine.prototype.getKeyStatuses=function(){return shaka.util.MapUtils.asObject(this.announcedKeyStatusByKeyId_)},shaka.media.DrmEngine.prototype.prepareMediaKeyConfigsForVariants_=function(e){for(var t=shaka.util.ManifestParserUtils.ContentType,a=new Set,r=(o=$jscomp.makeIterator(e)).next();!r.done;r=o.next()){var r=this.getVariantDrmInfos_(r.value),n=$jscomp.makeIterator(r);for(r=n.next();!r.done;r=n.next())a.add(r.value)}for(r=(o=$jscomp.makeIterator(a)).next();!r.done;r=o.next())shaka.media.DrmEngine.fillInDrmInfoDefaults_(r.value,shaka.util.MapUtils.asMap(this.config_.servers),shaka.util.MapUtils.asMap(this.config_.advanced||{}));var n=this.usePersistentLicenses_?"required":"optional",i=this.usePersistentLicenses_?["persistent-license"]:["temporary"],o=new Map;for(r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next())r=r.value,o.set(r.keySystem,{initDataTypes:["cenc"],audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:n,sessionTypes:i,label:r.keySystem,drmInfos:[]});for(r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next())for(r=r.value,r=(a=$jscomp.makeIterator([r.audio,r.video])).next();!r.done;r=a.next())if(n=r.value){var i=shaka.media.DrmEngine.computeMimeType_(n),s=null,l=("ac-3"==n.codecs.toLowerCase()&&shaka.util.Platform.isTizen()&&(s=shaka.media.DrmEngine.computeMimeType_(n,"ec-3")),$jscomp.makeIterator(n.drmInfos));for(r=l.next();!r.done;r=l.next()){var u=r.value,c=(r=o.get(u.keySystem),goog.asserts.assert(r,"Any missing configs should have be filled in before."),r.drmInfos.push(u),u.initData&&u.initData.length&&(r.initDataTypes=[].concat($jscomp.arrayFromIterable(new Set(u.initData.map(function(e){return e.initDataType}))))),u.distinctiveIdentifierRequired&&(r.distinctiveIdentifier="required"),u.persistentStateRequired&&(r.persistentState="required"),u.sessionType&&(r.sessionTypes=[u.sessionType]),{robustness:(u=n.type==t.AUDIO?u.audioRobustness:u.videoRobustness)||"",contentType:i});(n.type==t.AUDIO?r.audioCapabilities:r.videoCapabilities).push(c),s&&(n.type==t.AUDIO?r.audioCapabilities:r.videoCapabilities).push(u={robustness:u||"",contentType:s})}}return o},shaka.media.DrmEngine.computeMimeType_=function(e,t){t=shaka.util.MimeUtils.getFullType(e.mimeType,t||e.codecs);return shaka.media.Transmuxer.isSupported(t)?shaka.media.Transmuxer.convertTsCodecs(e.type,t):t},shaka.media.DrmEngine.prototype.queryMediaKeys_=function(t,a,r){var n,i,o,s,l,u,c,d,h,p,f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(n=new Map,r){i=f.getKeySystemAccessFromVariants_(a,n),e.jumpTo(2);break}return e.yield(f.getKeySystemAccessByConfigs_(t),3);case 3:i=e.yieldResult;case 2:if(!(o=i))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE);for(f.destroyer_.ensureNotDestroyed(),e.setCatchFinallyBlocks(4),f.supportedTypes_.clear(),p=o.getConfiguration(),shaka.log.v2("Got MediaKeySystemAccess with configuration",p),h=p.audioCapabilities||[],p=p.videoCapabilities||[],s=$jscomp.makeIterator(h),l=s.next();!l.done;l=s.next())u=l.value,f.supportedTypes_.add(u.contentType.toLowerCase());for(c=$jscomp.makeIterator(p),l=c.next();!l.done;l=c.next())d=l.value,f.supportedTypes_.add(d.contentType.toLowerCase());if(goog.asserts.assert(f.supportedTypes_.size,"We should get at least one supported MIME type"),f.currentDrmInfo_=r?f.createDrmInfoByInfos_(o.keySystem,n.get(o.keySystem)):shaka.media.DrmEngine.createDrmInfoByConfigs_(o.keySystem,t.get(o.keySystem)),f.currentDrmInfo_.licenseServerUri)return e.yield(o.createMediaKeys(),6);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_LICENSE_SERVER_GIVEN,f.currentDrmInfo_.keySystem);case 6:return h=e.yieldResult,f.destroyer_.ensureNotDestroyed(),shaka.log.info("Created MediaKeys object for key system",f.currentDrmInfo_.keySystem),f.mediaKeys_=h,f.initialized_=!0,e.yield(f.setServerCertificate(),7);case 7:f.destroyer_.ensureNotDestroyed(),e.leaveTryBlock(0);break;case 4:if(p=e.enterCatchBlock(),f.destroyer_.ensureNotDestroyed(p),f.currentDrmInfo_=null,f.supportedTypes_.clear(),p instanceof shaka.util.Error)throw p;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_CDM,p.message)}})},shaka.media.DrmEngine.prototype.getKeySystemAccessFromVariants_=function(e,t){for(var a=$jscomp.makeIterator(e),r=a.next();!r.done;r=a.next())for(var n=this.getVariantDrmInfos_(r.value),r=(n=$jscomp.makeIterator(n)).next();!r.done;r=n.next()){var i=r.value;t.has(i.keySystem)||t.set(i.keySystem,[]),t.get(i.keySystem).push(i)}if(1==t.size&&t.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);for(a={},i=(n=$jscomp.makeIterator(this.config_.preferredKeySystems)).next();!i.done;a={$jscomp$loop$prop$preferredKeySystem$615:a.$jscomp$loop$prop$preferredKeySystem$615},i=n.next())for(a.$jscomp$loop$prop$preferredKeySystem$615=i.value,r=(i=$jscomp.makeIterator(e)).next();!r.done;r=i.next())if(r=r.value.decodingInfos.find(function(t){return function(e){return e.supported&&null!=e.keySystemAccess&&e.keySystemAccess.keySystem==t.$jscomp$loop$prop$preferredKeySystem$615}}(a)))return r.keySystemAccess;for(n=(a=$jscomp.makeIterator([!0,!1])).next();!n.done;n=a.next())for(n=n.value,r=(i=$jscomp.makeIterator(e)).next();!r.done;r=i.next()){var o=$jscomp.makeIterator(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){r=t.get(s.keySystemAccess.keySystem);var l=$jscomp.makeIterator(r);for(r=l.next();!r.done;r=l.next())if(!!r.value.licenseServerUri==n)return s.keySystemAccess}}}return null},shaka.media.DrmEngine.prototype.getKeySystemAccessByConfigs_=function(t){var a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(1==t.size&&t.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);for(r=$jscomp.makeIterator(t.values()),n=r.next();!n.done;n=r.next())0==(i=n.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;o=$jscomp.makeIterator(y.config_.preferredKeySystems),s=o.next();case 2:if(s.done)e.jumpTo(4);else{if(l=s.value,t.has(l))return u=t.get(l),e.setCatchFinallyBlocks(6),e.yield(navigator.requestMediaKeySystemAccess(l,[u]),8);e.jumpTo(3)}break;case 8:return a=e.yieldResult,e.return(a);case 6:g=e.enterCatchBlock(),shaka.log.v2("Requesting",l,"failed with config",u,g);case 7:y.destroyer_.ensureNotDestroyed();case 3:s=o.next(),e.jumpTo(2);break;case 4:c=$jscomp.makeIterator([!0,!1]),d=c.next();case 9:if(d.done){e.jumpTo(11);break}h=d.value,p=$jscomp.makeIterator(t.keys()),s=p.next();case 12:if(s.done)d=c.next(),e.jumpTo(9);else{if(f=s.value,m=t.get(f),m.drmInfos.some(function(e){return!!e.licenseServerUri})==h)return e.setCatchFinallyBlocks(15),e.yield(navigator.requestMediaKeySystemAccess(f,[m]),17);e.jumpTo(13)}break;case 17:return a=e.yieldResult,e.return(a);case 15:g=e.enterCatchBlock(),shaka.log.v2("Requesting",f,"failed with config",m,g);case 16:y.destroyer_.ensureNotDestroyed();case 13:s=p.next(),e.jumpTo(12);break;case 11:return e.return(a)}})},shaka.media.DrmEngine.prototype.configureClearKey_=function(){var a,r,n,e,t,i=shaka.util.MapUtils.asMap(this.config_.clearKeys);return 0==i.size?null:(t=shaka.util.StringUtils,a=shaka.util.Uint8ArrayUtils,r=[],n=[],i.forEach(function(e,t){t=a.fromHex(t),e=a.fromHex(e),t={kty:"oct",kid:a.toBase64(t,!1),k:a.toBase64(e,!1)};r.push(t),n.push(t.kid)}),i=JSON.stringify({keys:r}),e=JSON.stringify({kids:n}),t=[{initData:shaka.util.BufferUtils.toUint8(t.toUTF8(e)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(i),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,sessionType:"",initData:t,keyIds:new Set(n)})},shaka.media.DrmEngine.prototype.loadOfflineSession_=function(e){var a,r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){switch(t.nextAddress){case 1:try{shaka.log.v1("Attempting to load an offline session",e),a=i.mediaKeys_.createSession("persistent-license")}catch(e){return r=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,e.message),i.onError_(r),t.return(Promise.reject(r))}return i.eventManager_.listen(a,"message",function(e){return i.onSessionMessage_(e)}),i.eventManager_.listen(a,"keystatuseschange",function(e){return i.onKeyStatusesChange_(e)}),r={initData:null,loaded:!1,oldExpiration:1/0,updatePromise:null,type:"persistent-license"},i.activeSessions_.set(a,r),t.setCatchFinallyBlocks(2),t.yield(a.load(e),4);case 4:return(n=t.yieldResult,i.destroyer_.ensureNotDestroyed(),shaka.log.v2("Loaded offline session",e,n),n)?(r.loaded=!0,i.areAllSessionsLoaded_()&&i.allSessionsLoaded_.resolve(),t.return(a)):(i.activeSessions_.delete(a),i.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.OFFLINE_SESSION_REMOVED)),t.return(Promise.resolve()));case 2:n=t.enterCatchBlock(),i.destroyer_.ensureNotDestroyed(n),i.activeSessions_.delete(a),i.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,n.message));case 3:return t.return(Promise.resolve())}})},shaka.media.DrmEngine.prototype.createTemporarySession_=function(e,t){var r=this,a=(goog.asserts.assert(this.mediaKeys_,"mediaKeys_ should be valid when creating temporary session."),this.currentDrmInfo_.sessionType);try{shaka.log.info("Creating new",a,"session"),shaka.log.info("Media Keys object is ",this.mediaKeys_);var n=this.mediaKeys_.createSession(a)}catch(e){return void this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,e.message))}this.eventManager_.listen(n,"message",function(e){return r.onSessionMessage_(e)}),this.eventManager_.listen(n,"keystatuseschange",function(e){return r.onKeyStatusesChange_(e)}),this.activeSessions_.set(n,{initData:t,loaded:!1,oldExpiration:1/0,updatePromise:null,type:a});try{t=this.config_.initDataTransform(t,e,this.currentDrmInfo_)}catch(e){return(a=e)instanceof shaka.util.Error||(a=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INIT_DATA_TRANSFORM_ERROR,e)),void this.onError_(a)}n.generateRequest(e,t).catch(function(e){var t,a;r.destroyer_.destroyed()||(goog.asserts.assert(e instanceof Error,"Wrong error type!"),r.activeSessions_.delete(n),(t=e.errorCode)&&t.systemCode&&((a=t.systemCode)<0&&(a+=Math.pow(2,32)),a="0x"+a.toString(16)),r.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_GENERATE_LICENSE_REQUEST,e.message,e,a)))})},shaka.media.DrmEngine.defaultInitDataTransform=function(e,t,a){return"skd"==t&&(t=a.serverCertificate,a=shaka.util.FairPlayUtils.defaultGetContentId(e),e=shaka.util.FairPlayUtils.initDataTransform(e,a,t)),e},shaka.media.DrmEngine.prototype.onSessionMessage_=function(e){this.delayLicenseRequest_()?this.mediaKeyMessageEvents_.push(e):this.sendLicenseRequest_(e)},shaka.media.DrmEngine.prototype.delayLicenseRequest_=function(){return!!this.video_&&this.config_.delayLicenseRequestUntilPlayed&&this.video_.paused&&!this.initialRequestsSent_},shaka.media.DrmEngine.prototype.sendLicenseRequest_=function(t){var a,r,n,i,o,s,l,u,c,d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a=t.target,shaka.log.v1("Sending license request for session",a.sessionId,"of type",t.messageType),d.config_.logLicenseExchange&&(n=shaka.util.Uint8ArrayUtils.toBase64(t.message),shaka.log.info("EME license request",n)),r=d.activeSessions_.get(a),n=d.currentDrmInfo_.licenseServerUri,l=d.config_.advanced[d.currentDrmInfo_.keySystem],"individualization-request"==t.messageType&&l&&l.individualizationServer&&(n=l.individualizationServer),l=shaka.net.NetworkingEngine.RequestType.LICENSE,(s=shaka.net.NetworkingEngine.makeRequest([n],d.config_.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=a.sessionId,shaka.media.DrmEngine.isPlayReadyKeySystem(d.currentDrmInfo_.keySystem)&&d.unpackPlayReadyRequest_(s),i=Date.now(),e.setCatchFinallyBlocks(2),l=d.playerInterface_.netEngine.request(l,s),e.yield(l.promise,4);case 4:o=e.yieldResult,e.leaveTryBlock(3);break;case 2:return s=e.enterCatchBlock(),goog.asserts.assert(s instanceof shaka.util.Error,"Wrong NetworkingEngine error type!"),l=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_REQUEST_FAILED,s),d.onError_(l),r&&r.updatePromise&&r.updatePromise.reject(l),e.return();case 3:return d.destroyer_.destroyed()?e.return():(d.licenseTimeSeconds_+=(Date.now()-i)/1e3,d.config_.logLicenseExchange&&(u=shaka.util.Uint8ArrayUtils.toBase64(o.data),shaka.log.info("EME license response",u)),e.setCatchFinallyBlocks(5),shaka.log.v1("Updating session",a.sessionId),e.yield(a.update(o.data),7));case 7:e.leaveTryBlock(6);break;case 5:return u=e.enterCatchBlock(),c=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_RESPONSE_REJECTED,u.message),d.onError_(c),r&&r.updatePromise&&r.updatePromise.reject(c),e.return();case 6:c=new shaka.util.FakeEvent("drmsessionupdate"),d.playerInterface_.onEvent(c),r&&(r.updatePromise&&r.updatePromise.resolve(),new shaka.util.Timer(function(){r.loaded=!0,d.areAllSessionsLoaded_()&&d.allSessionsLoaded_.resolve()}).tickAfter(shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_)),e.jumpToEnd()}})},shaka.media.DrmEngine.prototype.unpackPlayReadyRequest_=function(e){if((t=shaka.util.StringUtils.fromUTF16(e.body,!0,!0)).includes("PlayReadyKeyMessage")){shaka.log.debug("Unwrapping PlayReady request.");for(var t,a=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next()){var r=(n=r.value).getElementsByTagName("name")[0],n=n.getElementsByTagName("value")[0];goog.asserts.assert(r&&n,"Malformed PlayReady headers!"),e.headers[r.textContent]=n.textContent}t=t.getElementsByTagName("Challenge")[0],goog.asserts.assert(t,"Malformed PlayReady challenge!"),goog.asserts.assert("base64encoded"==t.getAttribute("encoding"),"Unexpected PlayReady challenge encoding!"),e.body=shaka.util.Uint8ArrayUtils.fromBase64(t.textContent)}else shaka.log.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"},shaka.media.DrmEngine.prototype.onKeyStatusesChange_=function(e){var o=this,s=(e=e.target,shaka.log.v2("Key status changed for session",e.sessionId),this.activeSessions_.get(e)),l=!1,t=(e.keyStatuses.forEach(function(e,t){var a,r,n,i;"string"==typeof t&&(a=t,t=e,e=a),(shaka.media.DrmEngine.isPlayReadyKeySystem(o.currentDrmInfo_.keySystem)&&16==t.byteLength&&shaka.util.Platform.isEdge()||shaka.util.Platform.isXbox()||shaka.util.Platform.isXboxOne())&&(r=(a=shaka.util.BufferUtils.toDataView(t)).getUint32(0,!0),n=a.getUint16(4,!0),i=a.getUint16(6,!0),a.setUint32(0,r,!0),a.setUint16(4,n,!0),a.setUint16(6,i,!0)),"status-pending"!=e&&(s.loaded=!0),s||goog.asserts.assert("usable"!=e,"Usable keys found in closed session"),"expired"==e&&(l=!0),a=shaka.util.Uint8ArrayUtils.toHex(t),o.keyStatusByKeyId_.set(a,e)}),e.expiration-Date.now());(t<0||l&&t<1e3)&&s&&!s.updatePromise&&(shaka.log.debug("Session has expired",e.sessionId),this.activeSessions_.delete(e),e.close().catch(function(){})),this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.keyStatusTimer_.tickAfter(shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME))},shaka.media.DrmEngine.prototype.processKeyStatusChanges_=function(){var e=this.keyStatusByKeyId_,a=this.announcedKeyStatusByKeyId_;a.clear(),e.forEach(function(e,t){return a.set(t,e)}),(e=Array.from(a.values())).length&&e.every(function(e){return"expired"==e})&&this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.EXPIRED)),this.playerInterface_.onKeyStatus(shaka.util.MapUtils.asObject(a))},shaka.media.DrmEngine.isBrowserSupported=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)},shaka.media.DrmEngine.probeSupport=function(){var n,i,t,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(shaka.media.DrmEngine.isBrowserSupported(),"Must have basic EME support"),a="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.microsoft.playready.recommendation.esvm com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],i=new Map,t=function(t){var a,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return e.setCatchFinallyBlocks(2),e.yield(navigator.requestMediaKeySystemAccess(t,n),4);case 4:return a=e.yieldResult,r=!!(r=a.getConfiguration().sessionTypes)&&r.includes("persistent-license"),shaka.util.Platform.isTizen3()&&(r=!1),i.set(t,{persistentState:r}),e.yield(a.createMediaKeys(),5);case 5:e.leaveTryBlock(0);break;case 2:e.enterCatchBlock(),i.set(t,null),e.jumpToEnd()}})},a=a.map(t),e.yield(Promise.all(a),2)):e.return(shaka.util.MapUtils.asObject(i))})},shaka.media.DrmEngine.prototype.onPlay_=function(){for(var e=$jscomp.makeIterator(this.mediaKeyMessageEvents_),t=e.next();!t.done;t=e.next())this.sendLicenseRequest_(t.value);this.initialRequestsSent_=!0,this.mediaKeyMessageEvents_=[]},shaka.media.DrmEngine.prototype.closeSession_=function(t){var a,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=shaka.media.DrmEngine,r=new Promise(function(e,t){new shaka.util.Timer(t).tickAfter(a.CLOSE_TIMEOUT_)}),e.setCatchFinallyBlocks(2),e.yield(Promise.race([Promise.all([t.close(),t.closed]),r]),4)):2!=e.nextAddress?e.leaveTryBlock(0):(e.enterCatchBlock(),shaka.log.warning("Timeout waiting for session close"),void e.jumpToEnd())})},shaka.media.DrmEngine.prototype.closeOpenSessions_=function(){var t,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return t=Array.from(n.activeSessions_.entries()),n.activeSessions_.clear(),e.yield(Promise.all(t.map(function(e){var t,a=(e=$jscomp.makeIterator(e)).next().value,r=e.next().value;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),n.initializedForStorage_||n.offlineSessionIds_.includes(a.sessionId)||"persistent-license"!==r.type?(shaka.log.v1("Closing session",a.sessionId,r),e.yield(n.closeSession_(a),5)):(shaka.log.v1("Removing session",a.sessionId),e.yield(a.remove(),5))):2!=e.nextAddress?e.leaveTryBlock(0):(t=e.enterCatchBlock(),shaka.log.error("Failed to close or remove the session",t),void e.jumpToEnd())})})),0)})},shaka.media.DrmEngine.prototype.supportsVariant=function(e){var t,a=e.audio,r=e.video;return!(a&&a.encrypted&&(a=shaka.media.DrmEngine.computeMimeType_(a),!this.willSupport(a))||r&&r.encrypted&&(r=shaka.media.DrmEngine.computeMimeType_(r),!this.willSupport(r)))&&(t=shaka.media.DrmEngine.keySystem(this.currentDrmInfo_),0==(e=this.getVariantDrmInfos_(e)).length||e.some(function(e){return e.keySystem==t}))},shaka.media.DrmEngine.areDrmCompatible=function(e,t){return!e.length||!t.length||0<shaka.media.DrmEngine.getCommonDrmInfos(e,t).length},shaka.media.DrmEngine.getCommonDrmInfos=function(e,t){if(!e.length)return t;if(!t.length)return e;for(var a=[],r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())for(var n=n.value,i=(o=$jscomp.makeIterator(t)).next();!i.done;i=o.next())if(i=i.value,n.keySystem==i.keySystem){var o=(o=(o=[]).concat(n.initData||[])).concat(i.initData||[]),s=n.keyIds&&i.keyIds?new Set([].concat($jscomp.arrayFromIterable(n.keyIds),$jscomp.arrayFromIterable(i.keyIds))):n.keyIds||i.keyIds;a.push({keySystem:n.keySystem,licenseServerUri:n.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:n.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:n.persistentStateRequired||i.persistentStateRequired,videoRobustness:n.videoRobustness||i.videoRobustness,audioRobustness:n.audioRobustness||i.audioRobustness,serverCertificate:n.serverCertificate||i.serverCertificate,initData:o,keyIds:s});break}return a},shaka.media.DrmEngine.prototype.getVariantDrmInfos_=function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])},shaka.media.DrmEngine.prototype.pollExpiration_=function(){var n=this;this.activeSessions_.forEach(function(e,t){var a=e.oldExpiration,r=t.expiration;(r=isNaN(r)?1/0:r)!=a&&(n.playerInterface_.onExpirationUpdated(t.sessionId,r),e.oldExpiration=r)})},shaka.media.DrmEngine.prototype.areAllSessionsLoaded_=function(){var e=this.activeSessions_.values();return shaka.util.Iterables.every(e,function(e){return e.loaded})},shaka.media.DrmEngine.replaceDrmInfo_=function(e,t){var a=[];t.forEach(function(e,t){a.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})});for(var r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())(n=n.value).video&&(n.video.drmInfos=a),n.audio&&(n.audio.drmInfos=a)},shaka.media.DrmEngine.prototype.createDrmInfoByInfos_=function(e,t){for(var a=[],r=[],n=[],i=new Set,o=(shaka.media.DrmEngine.processDrmInfos_(t,a,r,n,i),1<r.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used."),1<a.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used."),this.usePersistentLicenses_?"persistent-license":"temporary"),a={keySystem:e,licenseServerUri:a[0],distinctiveIdentifierRequired:t[0].distinctiveIdentifierRequired,persistentStateRequired:t[0].persistentStateRequired,sessionType:t[0].sessionType||o,audioRobustness:t[0].audioRobustness||"",videoRobustness:t[0].videoRobustness||"",serverCertificate:r[0],initData:n,keyIds:i},n=(r=$jscomp.makeIterator(t)).next();!n.done;n=r.next())(n=n.value).distinctiveIdentifierRequired&&(a.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),n.persistentStateRequired&&(a.persistentStateRequired=n.persistentStateRequired);return a},shaka.media.DrmEngine.createDrmInfoByConfigs_=function(e,t){var a=[],r=[],n=[],i=new Set;return shaka.media.DrmEngine.processDrmInfos_(t.drmInfos,a,r,n,i),1<r.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used."),1<a.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used."),{keySystem:e,licenseServerUri:a[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,sessionType:t.sessionTypes[0]||"temporary",audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:r[0],initData:n,keyIds:i}},shaka.media.DrmEngine.processDrmInfos_=function(e,t,a,r,n){for(var i={},o=(e=$jscomp.makeIterator(e)).next();!o.done;i={$jscomp$loop$prop$drmInfo$617:i.$jscomp$loop$prop$drmInfo$617},o=e.next()){if(i.$jscomp$loop$prop$drmInfo$617=o.value,t.includes(i.$jscomp$loop$prop$drmInfo$617.licenseServerUri)||t.push(i.$jscomp$loop$prop$drmInfo$617.licenseServerUri),!i.$jscomp$loop$prop$drmInfo$617.serverCertificate||a.some(function(t){return function(e){return shaka.util.BufferUtils.equal(e,t.$jscomp$loop$prop$drmInfo$617.serverCertificate)}}(i))||a.push(i.$jscomp$loop$prop$drmInfo$617.serverCertificate),i.$jscomp$loop$prop$drmInfo$617.initData)for(var o={},s=$jscomp.makeIterator(i.$jscomp$loop$prop$drmInfo$617.initData),l=s.next();!l.done;o={$jscomp$loop$prop$initDataOverride$619:o.$jscomp$loop$prop$initDataOverride$619},l=s.next())o.$jscomp$loop$prop$initDataOverride$619=l.value,r.some(function(a){return function(e){var t=a.$jscomp$loop$prop$initDataOverride$619;return e=!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&shaka.util.BufferUtils.equal(e.initData,t.initData)}}(o))||r.push(o.$jscomp$loop$prop$initDataOverride$619);if(i.$jscomp$loop$prop$drmInfo$617.keyIds)for(s=(o=$jscomp.makeIterator(i.$jscomp$loop$prop$drmInfo$617.keyIds)).next();!s.done;s=o.next())n.add(s.value)}},shaka.media.DrmEngine.fillInDrmInfoDefaults_=function(e,t,a){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(t.size&&(t=t.get(e.keySystem)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(a=a.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=a.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=a.persistentStateRequired),e.videoRobustness||(e.videoRobustness=a.videoRobustness),e.audioRobustness||(e.audioRobustness=a.audioRobustness),e.serverCertificate||(e.serverCertificate=a.serverCertificate),a.sessionType)&&(e.sessionType=a.sessionType),window.cast&&window.cast.__platform__&&("com.microsoft.playready"==e.keySystem||"com.microsoft.playready.recommendation.esvm"==e.keySystem||"com.microsoft.playready.recommendation"==e.keySystem)&&(e.keySystem="com.chromecast.playready"))},shaka.media.DrmEngine.CLOSE_TIMEOUT_=1,shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_=5,shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME=.5,shaka.media.DrmEngine.DUMMY_KEY_ID=new shaka.util.Lazy(function(){return shaka.util.BufferUtils.toArrayBuffer(new Uint8Array([0]))}),shaka.media.ManifestParser=function(){},shaka.media.ManifestParser.registerParserByExtension=function(e,t){shaka.media.ManifestParser.parsersByExtension[e]=t},shaka.media.ManifestParser.registerParserByMime=function(e,t){shaka.media.ManifestParser.parsersByMime[e]=t},shaka.media.ManifestParser.unregisterParserByMime=function(e){delete shaka.media.ManifestParser.parsersByMime[e]},shaka.media.ManifestParser.probeSupport=function(){var e=shaka.media.ManifestParser,t={};if(shaka.util.Platform.supportsMediaSource()){for(var a in e.parsersByMime)t[a]=!0;for(var r in e.parsersByExtension)t[r]=!0}for(var n,a={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},i=(r=$jscomp.makeIterator(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=r.next())i=i.value,shaka.util.Platform.supportsMediaSource()?t[i]=!!e.parsersByMime[i]:t[i]=shaka.util.Platform.supportsMediaType(i);for(n in a)shaka.util.Platform.supportsMediaSource()?t[n]=!!e.parsersByExtension[n]:t[n]=shaka.util.Platform.supportsMediaType(a[n]);return t},shaka.media.ManifestParser.getFactory=function(t,a,r,n){var i,o,s;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(i=shaka.media.ManifestParser,n){if(o=i.parsersByMime[n.toLowerCase()])return e.return(o);shaka.log.warning("Could not determine manifest type using MIME type ",n)}if(o=i.getExtension(t)){if(s=i.parsersByExtension[o])return e.return(s);shaka.log.warning("Could not determine manifest type for extension ",o)}else shaka.log.warning("Could not find extension for ",t);return n?e.jumpTo(2):e.yield(i.getMimeType(t,a,r),3)}if(2!=e.nextAddress&&(n=e.yieldResult)){if(s=shaka.media.ManifestParser.parsersByMime[n])return e.return(s);shaka.log.warning("Could not determine manifest type using MIME type",n)}throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.UNABLE_TO_GUESS_MANIFEST_TYPE,t)})},shaka.media.ManifestParser.getMimeType=function(t,a,r){var n,i;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(n=shaka.net.NetworkingEngine.RequestType.MANIFEST,(i=shaka.net.NetworkingEngine.makeRequest([t],r)).method="HEAD",e.yield(a.request(n,i).promise,2)):(n=e.yieldResult,i=n.headers["content-type"],e.return(i?i.toLowerCase().split(";").shift():""))})},shaka.media.ManifestParser.getExtension=function(e){return 1==(e=new goog.Uri(e).getPath().split("/").pop().split(".")).length?"":e.pop().toLowerCase()},shaka.media.ManifestParser.isSupported=function(e,t){return!!shaka.util.Platform.supportsMediaSource()&&(t in shaka.media.ManifestParser.parsersByMime||shaka.media.ManifestParser.getExtension(e)in shaka.media.ManifestParser.parsersByExtension)},goog.exportSymbol("shaka.media.ManifestParser",shaka.media.ManifestParser),goog.exportProperty(shaka.media.ManifestParser,"unregisterParserByMime",shaka.media.ManifestParser.unregisterParserByMime),goog.exportProperty(shaka.media.ManifestParser,"registerParserByMime",shaka.media.ManifestParser.registerParserByMime),goog.exportProperty(shaka.media.ManifestParser,"registerParserByExtension",shaka.media.ManifestParser.registerParserByExtension),shaka.media.ManifestParser.parsersByMime={},shaka.media.ManifestParser.parsersByExtension={},shaka.media.InitSegmentReference=function(e,t,a){this.getUris=e,this.startByte=t,this.endByte=a},shaka.media.InitSegmentReference.prototype.getStartByte=function(){return this.startByte},shaka.media.InitSegmentReference.prototype.getEndByte=function(){return this.endByte},shaka.media.InitSegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null},shaka.media.InitSegmentReference.equal=function(e,t){var a=shaka.util.ArrayUtils;return e&&t?e.getStartByte()==t.getStartByte()&&e.getEndByte()==t.getEndByte()&&a.equal(e.getUris(),t.getUris()):e==t},goog.exportSymbol("shaka.media.InitSegmentReference",shaka.media.InitSegmentReference),goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getEndByte",shaka.media.InitSegmentReference.prototype.getEndByte),goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getStartByte",shaka.media.InitSegmentReference.prototype.getStartByte),shaka.media.SegmentReference=function(e,t,a,r,n,i,o,s,l,u,c){u=void 0===u?0:u,c=void 0===c?[]:c,goog.asserts.assert(e<=t,"startTime must be less than or equal to endTime"),goog.asserts.assert(null==n||r<n,"startByte must be < endByte"),this.startTime=e,this.trueEndTime=this.endTime=t,this.getUrisInner=a,this.startByte=r,this.endByte=n,this.initSegmentReference=i,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l,this.segmentNumber=u,this.partialReferences=c},shaka.media.SegmentReference.prototype.getUris=function(){return this.getUrisInner()},shaka.media.SegmentReference.prototype.getStartTime=function(){return this.startTime},shaka.media.SegmentReference.prototype.getEndTime=function(){return this.endTime},shaka.media.SegmentReference.prototype.getStartByte=function(){return this.startByte},shaka.media.SegmentReference.prototype.getEndByte=function(){return this.endByte},shaka.media.SegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null},shaka.media.SegmentReference.prototype.hasPartialSegments=function(){return 0<this.partialReferences.length},goog.exportSymbol("shaka.media.SegmentReference",shaka.media.SegmentReference),goog.exportProperty(shaka.media.SegmentReference.prototype,"getEndByte",shaka.media.SegmentReference.prototype.getEndByte),goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartByte",shaka.media.SegmentReference.prototype.getStartByte),goog.exportProperty(shaka.media.SegmentReference.prototype,"getEndTime",shaka.media.SegmentReference.prototype.getEndTime),goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartTime",shaka.media.SegmentReference.prototype.getStartTime),goog.exportProperty(shaka.media.SegmentReference.prototype,"getUris",shaka.media.SegmentReference.prototype.getUris),shaka.media.PresentationTimeline=function(e,t,a){this.presentationStartTime_=e,this.presentationDelay_=t,this.segmentAvailabilityDuration_=this.duration_=1/0,this.maxSegmentDuration_=1,this.maxSegmentEndTime_=this.minSegmentStartTime_=null,this.clockOffset_=0,this.static_=!0,this.userSeekStart_=0,this.autoCorrectDrift_=void 0===a||a,this.availabilityTimeOffset_=0},shaka.media.PresentationTimeline.prototype.getDuration=function(){return this.duration_},shaka.media.PresentationTimeline.prototype.getMaxSegmentDuration=function(){return this.maxSegmentDuration_},shaka.media.PresentationTimeline.prototype.setDuration=function(e){goog.asserts.assert(0<e,"duration must be > 0"),this.duration_=e},shaka.media.PresentationTimeline.prototype.getPresentationStartTime=function(){return this.presentationStartTime_},shaka.media.PresentationTimeline.prototype.setClockOffset=function(e){this.clockOffset_=e},shaka.media.PresentationTimeline.prototype.setStatic=function(e){this.static_=e},shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration=function(e){goog.asserts.assert(0<=e,"segmentAvailabilityDuration must be >= 0"),this.segmentAvailabilityDuration_=e},shaka.media.PresentationTimeline.prototype.setDelay=function(e){goog.asserts.assert(0<=e,"delay must be >= 0"),this.presentationDelay_=e},shaka.media.PresentationTimeline.prototype.getDelay=function(){return this.presentationDelay_},shaka.media.PresentationTimeline.prototype.notifySegments=function(e){var t;0!=e.length&&(t=e[e.length-1].endTime,this.notifyMinSegmentStartTime(e[0].startTime),this.maxSegmentDuration_=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.maxSegmentDuration_),this.maxSegmentEndTime_=Math.max(this.maxSegmentEndTime_,t),null!=this.presentationStartTime_&&this.autoCorrectDrift_&&(this.presentationStartTime_=(Date.now()+this.clockOffset_)/1e3-this.maxSegmentEndTime_-this.maxSegmentDuration_),shaka.log.v1("notifySegments:","maxSegmentDuration="+this.maxSegmentDuration_))},shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime=function(e){this.minSegmentStartTime_=null==this.minSegmentStartTime_?e:Math.min(this.minSegmentStartTime_,e)},shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration=function(e){this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,e),shaka.log.v1("notifyNewSegmentDuration:","maxSegmentDuration="+this.maxSegmentDuration_)},shaka.media.PresentationTimeline.prototype.offset=function(e){null!=this.minSegmentStartTime_&&(this.minSegmentStartTime_+=e),null!=this.maxSegmentEndTime_&&(this.maxSegmentEndTime_+=e)},shaka.media.PresentationTimeline.prototype.isLive=function(){return 1/0==this.duration_&&!this.static_},shaka.media.PresentationTimeline.prototype.isInProgress=function(){return 1/0!=this.duration_&&!this.static_},shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart=function(){goog.asserts.assert(0<=this.segmentAvailabilityDuration_,"The availability duration should be positive");var e=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return Math.max(this.userSeekStart_,e)},shaka.media.PresentationTimeline.prototype.setUserSeekStart=function(e){this.userSeekStart_=e},shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd=function(){return this.isLive()||this.isInProgress()?Math.min(this.getLiveEdge_()+this.availabilityTimeOffset_,this.duration_):this.maxSegmentEndTime_||this.duration_},shaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart=function(e){var t,a=Math.max(this.minSegmentStartTime_,this.userSeekStart_);return 1/0==this.segmentAvailabilityDuration_?Math.ceil(1e3*a)/1e3:(t=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_,e=Math.min(t+e,this.getSeekRangeEnd()),Math.max(a,e))},shaka.media.PresentationTimeline.prototype.getSeekRangeStart=function(){return this.getSafeSeekRangeStart(0)},shaka.media.PresentationTimeline.prototype.getSeekRangeEnd=function(){var e=this.isLive()||this.isInProgress()?this.presentationDelay_:0;return Math.max(0,this.getSegmentAvailabilityEnd()-e)},shaka.media.PresentationTimeline.prototype.usingPresentationStartTime=function(){return!(null==this.presentationStartTime_||null!=this.maxSegmentEndTime_&&this.autoCorrectDrift_)},shaka.media.PresentationTimeline.prototype.getLiveEdge_=function(){goog.asserts.assert(null!=this.presentationStartTime_,"Cannot compute timeline live edge without start time");var e=(Date.now()+this.clockOffset_)/1e3;return Math.max(0,e-this.maxSegmentDuration_-this.presentationStartTime_)},shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset=function(e){this.availabilityTimeOffset_=e},shaka.media.PresentationTimeline.prototype.assertIsValid=function(){goog.DEBUG&&(this.isLive()?goog.asserts.assert(null!=this.presentationStartTime_,"Detected as live stream, but does not match our model of live!"):this.isInProgress()?goog.asserts.assert(null!=this.presentationStartTime_&&1/0==this.segmentAvailabilityDuration_,"Detected as IPR stream, but does not match our model of IPR!"):goog.asserts.assert(1/0==this.segmentAvailabilityDuration_&&1/0!=this.duration_&&this.static_,"Detected as VOD stream, but does not match our model of VOD!"))},goog.exportSymbol("shaka.media.PresentationTimeline",shaka.media.PresentationTimeline),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setAvailabilityTimeOffset",shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"usingPresentationStartTime",shaka.media.PresentationTimeline.prototype.usingPresentationStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeEnd",shaka.media.PresentationTimeline.prototype.getSeekRangeEnd),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSeekRangeStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSafeSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityEnd",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setUserSeekStart",shaka.media.PresentationTimeline.prototype.setUserSeekStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityStart",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"isInProgress",shaka.media.PresentationTimeline.prototype.isInProgress),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"isLive",shaka.media.PresentationTimeline.prototype.isLive),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"offset",shaka.media.PresentationTimeline.prototype.offset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMinSegmentStartTime",shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifySegments",shaka.media.PresentationTimeline.prototype.notifySegments),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDelay",shaka.media.PresentationTimeline.prototype.getDelay),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDelay",shaka.media.PresentationTimeline.prototype.setDelay),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setSegmentAvailabilityDuration",shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setStatic",shaka.media.PresentationTimeline.prototype.setStatic),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setClockOffset",shaka.media.PresentationTimeline.prototype.setClockOffset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getPresentationStartTime",shaka.media.PresentationTimeline.prototype.getPresentationStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDuration",shaka.media.PresentationTimeline.prototype.setDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.getMaxSegmentDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDuration",shaka.media.PresentationTimeline.prototype.getDuration),shaka.media.StallDetector=function(e,t){this.implementation_=e,this.wasMakingProgress_=e.shouldBeMakingProgress(),this.value_=e.getPresentationSeconds(),this.lastUpdateSeconds_=e.getWallSeconds(),this.didJump_=!1,this.stallThresholdSeconds_=t,this.onStall_=function(){}},shaka.media.StallDetector.prototype.release=function(){this.implementation_=null,this.onStall_=function(){}},shaka.media.StallDetector.prototype.onStall=function(e){this.onStall_=e},shaka.media.StallDetector.prototype.poll=function(){var e=this.implementation_,t=e.shouldBeMakingProgress(),a=e.getPresentationSeconds(),r=e.getWallSeconds();return this.value_==a&&this.wasMakingProgress_==t||(this.lastUpdateSeconds_=r,this.value_=a,this.wasMakingProgress_=t,this.didJump_=!1),(t=(a=r-this.lastUpdateSeconds_)>=this.stallThresholdSeconds_&&t&&!this.didJump_)&&(this.onStall_(this.value_,a),this.didJump_=!0,this.value_=e.getPresentationSeconds()),t},shaka.media.StallDetector.Implementation=function(){},shaka.media.StallDetector.Implementation.prototype.shouldBeMakingProgress=function(){},shaka.media.StallDetector.Implementation.prototype.getPresentationSeconds=function(){},shaka.media.StallDetector.Implementation.prototype.getWallSeconds=function(){},shaka.media.StallDetector.MediaElementImplementation=function(e){this.mediaElement_=e},shaka.media.StallDetector.MediaElementImplementation.prototype.shouldBeMakingProgress=function(){return!this.mediaElement_.paused&&0!=this.mediaElement_.playbackRate&&0!=this.mediaElement_.buffered.length&&shaka.media.StallDetector.MediaElementImplementation.hasContentFor_(this.mediaElement_.buffered,this.mediaElement_.currentTime)},shaka.media.StallDetector.MediaElementImplementation.prototype.getPresentationSeconds=function(){return this.mediaElement_.currentTime},shaka.media.StallDetector.MediaElementImplementation.prototype.getWallSeconds=function(){return Date.now()/1e3},shaka.media.StallDetector.MediaElementImplementation.hasContentFor_=function(e,t){for(var a=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(e)),r=a.next();!r.done;r=a.next())if(!(t<(r=r.value).start-.1||t>r.end-.5))return!0;return!1},shaka.media.GapJumpingController=function(e,t,a,r,n){var i=this;this.video_=e,this.timeline_=t,this.config_=a,this.onEvent_=n,this.eventManager_=new shaka.util.EventManager,this.seekingEventReceived_=!1,this.prevReadyState_=e.readyState,this.didFireLargeGap_=!1,this.stallDetector_=r,this.hadSegmentAppended_=!1,this.eventManager_.listen(e,"waiting",function(){return i.onPollGapJump_()}),this.gapJumpTimer_=new shaka.util.Timer(function(){i.onPollGapJump_()}).tickEvery(.25)},shaka.media.GapJumpingController.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),null!=this.gapJumpTimer_&&(this.gapJumpTimer_.stop(),this.gapJumpTimer_=null),this.stallDetector_&&(this.stallDetector_.release(),this.stallDetector_=null),this.video_=this.timeline_=this.onEvent_=null},shaka.media.GapJumpingController.prototype.onSegmentAppended=function(){this.hadSegmentAppended_=!0,this.onPollGapJump_()},shaka.media.GapJumpingController.prototype.onSeeking=function(){this.seekingEventReceived_=!0,this.didFireLargeGap_=this.hadSegmentAppended_=!1},shaka.media.GapJumpingController.prototype.onPollGapJump_=function(){if(0!=this.video_.readyState){if(this.video_.seeking){if(!this.seekingEventReceived_)return}else this.seekingEventReceived_=!1;if(!(this.video_.paused&&0!=this.video_.currentTime||(this.video_.readyState!=this.prevReadyState_&&(this.didFireLargeGap_=!1,this.prevReadyState_=this.video_.readyState),this.stallDetector_&&this.stallDetector_.poll()))){for(var e,t,a,r,n=this.config_.smallGapLimit,i=this.video_.currentTime,o=this.video_.buffered,s=0;s<o.length;s++);null==(s=shaka.media.TimeRangesUtils.getGapIndex(o,i,this.config_.gapDetectionThreshold))||0==s&&!this.hadSegmentAppended_||(e=o.start(s),this.timeline_.getSeekRangeEnd()<=e)||(n=(t=e-i)<=n,a=!1,t<shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE)||(n||this.didFireLargeGap_||(this.didFireLargeGap_=!0,(r=new shaka.util.FakeEvent("largegap",{currentTime:i,gapSize:t})).cancelable=!0,this.onEvent_(r),this.config_.jumpLargeGaps&&!r.defaultPrevented?a=!0:shaka.log.info("Ignoring large gap at",i,"size",t)),(n||a)&&(0==s?shaka.log.info("Jumping forward",t,"seconds because of gap before start time of",e):shaka.log.info("Jumping forward",t,"seconds because of gap starting at",o.end(s-1),"and ending at",e),this.video_.currentTime=e))}}},shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE=.001,shaka.util.MediaReadyState=function(){},shaka.util.MediaReadyState.waitForReadyState=function(e,t,a,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=shaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_.value().get(t),a.listenOnce(e,t,r))},shaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_=new shaka.util.Lazy(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}),shaka.media.VideoWrapper=function(e,t,a){var r=this;this.video_=e,this.onSeek_=t,this.startTime_=a,this.started_=!1,this.eventManager_=new shaka.util.EventManager,this.mover_=new shaka.media.VideoWrapper.PlayheadMover(e,10),shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){r.setStartTime_(r.startTime_)})},shaka.media.VideoWrapper.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),null!=this.mover_&&(this.mover_.release(),this.mover_=null),this.onSeek_=function(){},this.video_=null},shaka.media.VideoWrapper.prototype.getTime=function(){return this.started_?this.video_.currentTime:this.startTime_},shaka.media.VideoWrapper.prototype.setTime=function(e){var t=this;0<this.video_.readyState?this.mover_.moveTo(e):shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){t.setStartTime_(t.startTime_)})},shaka.media.VideoWrapper.prototype.setStartTime_=function(e){var t=this;Math.abs(this.video_.currentTime-e)<.001?this.startListeningToSeeks_():(this.eventManager_.listenOnce(this.video_,"seeking",function(){t.startListeningToSeeks_()}),this.mover_.moveTo(0==this.video_.currentTime?e:this.video_.currentTime))},shaka.media.VideoWrapper.prototype.startListeningToSeeks_=function(){var e=this;goog.asserts.assert(0<this.video_.readyState,"The media element should be ready before we listen for seeking."),this.started_=!0,this.eventManager_.listen(this.video_,"seeking",function(){return e.onSeek_()})},shaka.media.VideoWrapper.PlayheadMover=function(e,t){var a=this;this.mediaElement_=e,this.maxAttempts_=t,this.targetTime_=this.originTime_=this.remainingAttempts_=0,this.timer_=new shaka.util.Timer(function(){return a.onTick_()})},shaka.media.VideoWrapper.PlayheadMover.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.mediaElement_=null},shaka.media.VideoWrapper.PlayheadMover.prototype.moveTo=function(e){this.originTime_=this.mediaElement_.currentTime,this.targetTime_=e,this.remainingAttempts_=this.maxAttempts_,this.mediaElement_.currentTime=e,this.timer_.tickEvery(.1)},shaka.media.VideoWrapper.PlayheadMover.prototype.onTick_=function(){this.remainingAttempts_<=0?(shaka.log.warning(["Failed to move playhead from",this.originTime_,"to",this.targetTime_].join(" ")),this.timer_.stop()):this.mediaElement_.currentTime!=this.originTime_?this.timer_.stop():(this.mediaElement_.currentTime=this.targetTime_,this.remainingAttempts_--)},shaka.media.Playhead=function(){},shaka.media.Playhead.prototype.setStartTime=function(e){},shaka.media.Playhead.prototype.getTime=function(){},shaka.media.Playhead.prototype.notifyOfBufferingChange=function(){},shaka.media.SrcEqualsPlayhead=function(e){var t=this;this.mediaElement_=e,this.started_=!1,this.startTime_=null,this.eventManager_=new shaka.util.EventManager;shaka.util.MediaReadyState.waitForReadyState(this.mediaElement_,HTMLMediaElement.HAVE_CURRENT_DATA,this.eventManager_,function(){null==t.startTime_?t.started_=!0:(t.eventManager_.listenOnce(t.mediaElement_,"seeking",function(){t.started_=!0}),t.mediaElement_.currentTime=Math.max(0,t.mediaElement_.currentTime+t.startTime_))})},shaka.media.SrcEqualsPlayhead.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.mediaElement_=null},shaka.media.SrcEqualsPlayhead.prototype.setStartTime=function(e){this.startTime_=this.started_?this.startTime_:e},shaka.media.SrcEqualsPlayhead.prototype.getTime=function(){return(this.started_?this.mediaElement_.currentTime:this.startTime_)||0},shaka.media.SrcEqualsPlayhead.prototype.notifyOfBufferingChange=function(){},shaka.media.MediaSourcePlayhead=function(e,t,a,r,n,i){var o=this;this.minSeekRange_=3,this.mediaElement_=e,this.timeline_=t.presentationTimeline,this.minBufferTime_=t.minBufferTime||0,this.config_=a,this.onSeek_=n,this.lastCorrectiveSeek_=null,this.gapController_=new shaka.media.GapJumpingController(e,t.presentationTimeline,a,this.createStallDetector_(e,a),i),this.videoWrapper_=new shaka.media.VideoWrapper(e,function(){return o.onSeeking_()},this.getStartTime_(r)),this.checkWindowTimer_=new shaka.util.Timer(function(){o.onPollWindow_()}).tickEvery(.25)},shaka.media.MediaSourcePlayhead.prototype.release=function(){this.videoWrapper_&&(this.videoWrapper_.release(),this.videoWrapper_=null),this.gapController_&&(this.gapController_.release(),this.gapController_=null),this.checkWindowTimer_&&(this.checkWindowTimer_.stop(),this.checkWindowTimer_=null),this.mediaElement_=this.videoWrapper_=this.timeline_=this.config_=null,this.onSeek_=function(){}},shaka.media.MediaSourcePlayhead.prototype.setStartTime=function(e){this.videoWrapper_.setTime(e)},shaka.media.MediaSourcePlayhead.prototype.getTime=function(){var e=this.videoWrapper_.getTime();return 0<this.mediaElement_.readyState&&!this.mediaElement_.paused?this.clampTime_(e):e},shaka.media.MediaSourcePlayhead.prototype.getStartTime_=function(e){return null==e?e=1/0>this.timeline_.getDuration()?this.timeline_.getSeekRangeStart():this.timeline_.getSeekRangeEnd():e<0&&(e=this.timeline_.getSeekRangeEnd()+e),this.clampSeekToDuration_(this.clampTime_(e))},shaka.media.MediaSourcePlayhead.prototype.notifyOfBufferingChange=function(){this.gapController_.onSegmentAppended()},shaka.media.MediaSourcePlayhead.prototype.onPollWindow_=function(){var e,t,a;0==this.mediaElement_.readyState||this.mediaElement_.paused||(e=this.videoWrapper_.getTime(),t=this.timeline_.getSeekRangeStart(),e<(t=(a=this.timeline_.getSeekRangeEnd())-t<this.minSeekRange_?a-this.minSeekRange_:t)&&(t=this.reposition_(e),shaka.log.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),this.mediaElement_.currentTime=t))},shaka.media.MediaSourcePlayhead.prototype.onSeeking_=function(){this.gapController_.onSeeking();var e=this.videoWrapper_.getTime(),t=this.reposition_(e);if(Math.abs(t-e)>shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE){var a=Date.now()/1e3;if(!this.lastCorrectiveSeek_||this.lastCorrectiveSeek_<a-1)return this.lastCorrectiveSeek_=a,void this.videoWrapper_.setTime(t)}shaka.log.v1("Seek to "+e),this.onSeek_()},shaka.media.MediaSourcePlayhead.prototype.clampSeekToDuration_=function(e){var t=this.timeline_.getDuration();return t<=e?(goog.asserts.assert(0<=this.config_.durationBackoff,"Duration backoff must be non-negative!"),t-this.config_.durationBackoff):e},shaka.media.MediaSourcePlayhead.prototype.reposition_=function(e){goog.asserts.assert(this.config_,"Cannot reposition playhead when it has beeen destroyed");var t=Math.max(this.minBufferTime_,this.config_.rebufferingGoal),a=this.config_.safeSeekOffset,r=this.timeline_.getSeekRangeStart(),n=this.timeline_.getSeekRangeEnd(),i=this.timeline_.getDuration(),o=(n-r<this.minSeekRange_&&(r=n-this.minSeekRange_),this.timeline_.getSafeSeekRangeStart(t)),s=this.timeline_.getSafeSeekRangeStart(a),t=this.timeline_.getSafeSeekRangeStart(t+a);return i<=e?(shaka.log.v1("Playhead past duration."),this.clampSeekToDuration_(e)):n<e?(shaka.log.v1("Playhead past end."),n):e<r?shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,s)?(shaka.log.v1("Playhead before start & start is buffered"),s):(shaka.log.v1("Playhead before start & start is unbuffered"),t):o<=e||shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,e)?(shaka.log.v1("Playhead in safe region or in buffered region."),e):(shaka.log.v1("Playhead outside safe region & in unbuffered region."),t)},shaka.media.MediaSourcePlayhead.prototype.clampTime_=function(e){var t=this.timeline_.getSeekRangeStart();return e<t||(t=this.timeline_.getSeekRangeEnd())<e?t:e},shaka.media.MediaSourcePlayhead.prototype.createStallDetector_=function(a,e){var r,t;return e.stallEnabled?(t=e.stallThreshold,r=e.stallSkip,(t=new shaka.media.StallDetector(new shaka.media.StallDetector.MediaElementImplementation(a),t)).onStall(function(e,t){shaka.log.debug("Stall detected at "+e+" for "+t+" seconds."),r?(shaka.log.debug("Seeking forward "+r+" seconds to break stall."),a.currentTime+=r):(shaka.log.debug("Pausing and unpausing to break stall."),a.pause(),a.play())}),t):null},shaka.media.SegmentIndex=function(e){goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(e),this.references=e,this.timer_=null,this.numEvicted=0,this.immutable_=!1},shaka.media.SegmentIndex.prototype.getReferences=function(){return this.references},shaka.media.SegmentIndex.prototype.destroy=function(){return shaka.Deprecate.deprecateFeature(4,"shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},shaka.media.SegmentIndex.prototype.release=function(){this.immutable_||(this.references=[],this.timer_&&this.timer_.stop(),this.timer_=null)},shaka.media.SegmentIndex.prototype.markImmutable=function(){this.immutable_=!0},shaka.media.SegmentIndex.prototype.find=function(e){for(var t=this.references.length-1,a=t;0<=a;--a){var r=this.references[a],n=a<t?this.references[a+1].startTime:r.endTime;if(e>=r.startTime&&e<n)return a+this.numEvicted}return this.references.length&&e<this.references[0].startTime?this.numEvicted:null},shaka.media.SegmentIndex.prototype.get=function(e){return 0==this.references.length||(e-=this.numEvicted)<0||e>=this.references.length?null:this.references[e]},shaka.media.SegmentIndex.prototype.offset=function(e){if(!this.immutable_)for(var t=$jscomp.makeIterator(this.references),a=t.next();!a.done;a=t.next())(a=a.value).startTime+=e,a.endTime+=e,a.timestampOffset+=e},shaka.media.SegmentIndex.prototype.merge=function(t){goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(t),!this.immutable_&&t.length&&(this.references=this.references.filter(function(e){return e.startTime<t[0].startTime}),this.references.push.apply(this.references,$jscomp.arrayFromIterable(t)),goog.DEBUG)&&shaka.media.SegmentIndex.assertCorrectReferences_(this.references)},shaka.media.SegmentIndex.prototype.mergeAndEvict=function(e,t){var a=this,r=(e=e.filter(function(e){return e.endTime>t&&(0==a.references.length||e.endTime>a.references[0].startTime)}),this.references[0]),e=(this.merge(e),this.references[0]);r&&goog.asserts.assert(r.startTime==e.startTime,"SegmentIndex.merge should not change the first reference time!"),this.evict(t)},shaka.media.SegmentIndex.prototype.evict=function(t){var e;this.immutable_||(e=this.references.length,this.references=this.references.filter(function(e){return e.endTime>t}),this.numEvicted+=e-this.references.length)},shaka.media.SegmentIndex.prototype.fit=function(e,t,a){if(a=void 0!==a&&a,goog.asserts.assert(null!=t,"Content duration must be known for static content!"),goog.asserts.assert(1/0!=t,"Content duration must be finite for static content!"),!this.immutable_){for(;this.references.length&&this.references[this.references.length-1].startTime>=t;)this.references.pop();for(;this.references.length&&this.references[0].endTime<=e;)this.references.shift(),a||this.numEvicted++;0!=this.references.length&&(e=this.references[this.references.length-1],this.references[this.references.length-1]=new shaka.media.SegmentReference(e.startTime,t,e.getUrisInner,e.startByte,e.endByte,e.initSegmentReference,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd))}},shaka.media.SegmentIndex.prototype.updateEvery=function(e,t){var a=this;goog.asserts.assert(!this.timer_,"SegmentIndex timer already started!"),this.immutable_||(this.timer_&&this.timer_.stop(),this.timer_=new shaka.util.Timer(function(){var e=t();e?a.references.push.apply(a.references,$jscomp.arrayFromIterable(e)):(a.timer_.stop(),a.timer_=null)}),this.timer_.tickEvery(e))},shaka.media.SegmentIndex.prototype[Symbol.iterator]=function(){var e=this.getIteratorForTime(0);return goog.asserts.assert(null!=e,"Iterator for 0 should never be null!"),e},shaka.media.SegmentIndex.prototype.getIteratorForTime=function(e){var t=this.find(e);if(null==t)return null;var a=this.get(--t+1),r=-1;if(a&&a.hasPartialSegments())for(var n=a.partialReferences.length-1;0<=n;--n){var i=a.partialReferences[n];if(e>=i.startTime&&e<i.endTime){t++,r=n-1;break}}return new shaka.media.SegmentIterator(this,t,r)},shaka.media.SegmentIndex.forSingleSegment=function(e,t,a){return e=new shaka.media.SegmentReference(e,e+t,function(){return a},0,null,null,e,e,e+t),new shaka.media.SegmentIndex([e])},goog.exportSymbol("shaka.media.SegmentIndex",shaka.media.SegmentIndex),goog.exportProperty(shaka.media.SegmentIndex,"forSingleSegment",shaka.media.SegmentIndex.forSingleSegment),goog.exportProperty(shaka.media.SegmentIndex.prototype,"getIteratorForTime",shaka.media.SegmentIndex.prototype.getIteratorForTime),goog.exportProperty(shaka.media.SegmentIndex.prototype,"updateEvery",shaka.media.SegmentIndex.prototype.updateEvery),goog.exportProperty(shaka.media.SegmentIndex.prototype,"fit",shaka.media.SegmentIndex.prototype.fit),goog.exportProperty(shaka.media.SegmentIndex.prototype,"evict",shaka.media.SegmentIndex.prototype.evict),goog.exportProperty(shaka.media.SegmentIndex.prototype,"mergeAndEvict",shaka.media.SegmentIndex.prototype.mergeAndEvict),goog.exportProperty(shaka.media.SegmentIndex.prototype,"merge",shaka.media.SegmentIndex.prototype.merge),goog.exportProperty(shaka.media.SegmentIndex.prototype,"offset",shaka.media.SegmentIndex.prototype.offset),goog.exportProperty(shaka.media.SegmentIndex.prototype,"get",shaka.media.SegmentIndex.prototype.get),goog.exportProperty(shaka.media.SegmentIndex.prototype,"find",shaka.media.SegmentIndex.prototype.find),goog.exportProperty(shaka.media.SegmentIndex.prototype,"markImmutable",shaka.media.SegmentIndex.prototype.markImmutable),goog.exportProperty(shaka.media.SegmentIndex.prototype,"release",shaka.media.SegmentIndex.prototype.release),goog.exportProperty(shaka.media.SegmentIndex.prototype,"destroy",shaka.media.SegmentIndex.prototype.destroy),goog.exportProperty(shaka.media.SegmentIndex.prototype,"getReferences",shaka.media.SegmentIndex.prototype.getReferences),goog.DEBUG&&(shaka.media.SegmentIndex.assertCorrectReferences_=function(a){goog.asserts.assert(a.every(function(e,t){return 0==t||(t=a[t-1]).startTime<e.startTime||!(t.startTime>e.startTime)&&t.endTime<=e.endTime}),"SegmentReferences are incorrect")}),shaka.media.SegmentIterator=function(e,t,a){this.segmentIndex_=e,this.currentPosition_=t,this.currentPartialPosition_=a,this.isLastIncreasedBySegNum_=!0},shaka.media.SegmentIterator.prototype.isLastIncreasedBySegNum=function(){return this.isLastIncreasedBySegNum_},shaka.media.SegmentIterator.prototype.setLastIncreasedBySegNum=function(e){"boolean"==typeof e&&this.isLastIncreasedBySegNum_!==e&&(this.isLastIncreasedBySegNum_=e)},shaka.media.SegmentIterator.prototype.currentPosition=function(){return this.currentPosition_},shaka.media.SegmentIterator.prototype.seek=function(e){return shaka.Deprecate.deprecateFeature(4,"shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.segmentIndex_.getIteratorForTime(e))?(this.currentPosition_=e.currentPosition_,this.currentPartialPosition_=e.currentPartialPosition_):(this.currentPosition_=Number.MAX_VALUE,this.currentPartialPosition_=0),this.next().value},shaka.media.SegmentIterator.prototype.current=function(){var e=this.segmentIndex_.get(this.currentPosition_);return e&&e.hasPartialSegments()&&e.getUris().length&&this.currentPartialPosition_>=e.partialReferences.length&&(this.currentPosition_++,this.currentPartialPosition_=0,e=this.segmentIndex_.get(this.currentPosition_)),e&&e.hasPartialSegments()?e.partialReferences[this.currentPartialPosition_]:e},shaka.media.SegmentIterator.prototype.next=function(){var e=this.segmentIndex_.get(this.currentPosition_);return e&&e.hasPartialSegments()&&(this.currentPartialPosition_++,!e.getUris().length||this.currentPartialPosition_!=e.partialReferences.length)||(this.currentPosition_++,this.currentPartialPosition_=0),{value:e=this.current(),done:!e}},shaka.media.SegmentIterator.prototype.nextBySegmentNumber=function(e){return 0<(e=e-this.segmentIndex_.getReferences()[0].segmentNumber+1)&&e<this.segmentIndex_.getReferences().length?(this.currentPosition_=e,this.currentPartialPosition_=0,this.segmentIndex_.get(this.currentPosition_)):null},goog.exportSymbol("shaka.media.SegmentIterator",shaka.media.SegmentIterator),goog.exportProperty(shaka.media.SegmentIterator.prototype,"nextBySegmentNumber",shaka.media.SegmentIterator.prototype.nextBySegmentNumber),goog.exportProperty(shaka.media.SegmentIterator.prototype,"next",shaka.media.SegmentIterator.prototype.next),goog.exportProperty(shaka.media.SegmentIterator.prototype,"current",shaka.media.SegmentIterator.prototype.current),goog.exportProperty(shaka.media.SegmentIterator.prototype,"seek",shaka.media.SegmentIterator.prototype.seek),goog.exportProperty(shaka.media.SegmentIterator.prototype,"currentPosition",shaka.media.SegmentIterator.prototype.currentPosition),goog.exportProperty(shaka.media.SegmentIterator.prototype,"isLastIncreasedBySegNum",shaka.media.SegmentIterator.prototype.isLastIncreasedBySegNum),shaka.media.MetaSegmentIndex=function(){shaka.media.SegmentIndex.call(this,[]),this.indexes_=[]},$jscomp.inherits(shaka.media.MetaSegmentIndex,shaka.media.SegmentIndex),shaka.media.MetaSegmentIndex.prototype.appendSegmentIndex=function(e){goog.asserts.assert(0==this.indexes_.length||0==e.numEvicted,"Should not append a new segment index with already-evicted segments"),this.indexes_.push(e)},shaka.media.MetaSegmentIndex.prototype.clone=function(){var e=new shaka.media.MetaSegmentIndex;return e.indexes_=this.indexes_.slice(),e},shaka.media.MetaSegmentIndex.prototype.release=function(){for(var e=$jscomp.makeIterator(this.indexes_),t=e.next();!t.done;t=e.next())t.value.release();this.indexes_=[]},shaka.media.MetaSegmentIndex.prototype.find=function(e){for(var t=0,a=$jscomp.makeIterator(this.indexes_),r=a.next();!r.done;r=a.next()){var n=(r=r.value).find(e);if(null!=n)return n+t;t+=r.numEvicted+r.references.length}return null},shaka.media.MetaSegmentIndex.prototype.get=function(e){for(var t=0,a=!1,r=$jscomp.makeIterator(this.indexes_),n=r.next();!n.done;n=r.next()){n=n.value,goog.asserts.assert(!a||0==n.numEvicted,"Should not see evicted segments after available segments");var i=n.get(e-t);if(i)return i;t+=n.numEvicted+n.references.length,a=a||0!=n.references.length}return null},shaka.media.MetaSegmentIndex.prototype.offset=function(e){goog.asserts.assert(!1,"offset() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.merge=function(e){goog.asserts.assert(!1,"merge() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.evict=function(e){goog.asserts.assert(!1,"evict() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.mergeAndEvict=function(e,t){goog.asserts.assert(!1,"mergeAndEvict() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.fit=function(e,t){goog.asserts.assert(!1,"fit() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.updateEvery=function(e,t){goog.asserts.assert(!1,"updateEvery() should not be used in MetaSegmentIndex!")},goog.exportSymbol("shaka.media.MetaSegmentIndex",shaka.media.MetaSegmentIndex),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"updateEvery",shaka.media.MetaSegmentIndex.prototype.updateEvery),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"fit",shaka.media.MetaSegmentIndex.prototype.fit),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"mergeAndEvict",shaka.media.MetaSegmentIndex.prototype.mergeAndEvict),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"evict",shaka.media.MetaSegmentIndex.prototype.evict),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"merge",shaka.media.MetaSegmentIndex.prototype.merge),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"offset",shaka.media.MetaSegmentIndex.prototype.offset),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"get",shaka.media.MetaSegmentIndex.prototype.get),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"find",shaka.media.MetaSegmentIndex.prototype.find),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"release",shaka.media.MetaSegmentIndex.prototype.release),shaka.media.PlayRateController=function(e){var t=this;this.harness_=e,this.isBuffering_=!1,this.rate_=this.harness_.getRate(),this.pollRate_=.25,this.timer_=new shaka.util.Timer(function(){t.harness_.movePlayhead(t.rate_*t.pollRate_)})},shaka.media.PlayRateController.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.harness_=null},shaka.media.PlayRateController.prototype.setBuffering=function(e){this.isBuffering_=e,this.apply_()},shaka.media.PlayRateController.prototype.set=function(e){goog.asserts.assert(0!=e,"Should never set rate of 0 explicitly!"),this.rate_=e,this.apply_()},shaka.media.PlayRateController.prototype.getRealRate=function(){return this.rate_},shaka.media.PlayRateController.prototype.getDefaultRate=function(){return this.harness_.getDefaultRate()},shaka.media.PlayRateController.prototype.apply_=function(){this.timer_.stop();var e=this.calculateCurrentRate_();if(shaka.log.v1("Changing effective playback rate to",e),0<=e)try{return void this.applyRate_(e)}catch(e){}this.timer_.tickEvery(this.pollRate_),this.applyRate_(0)},shaka.media.PlayRateController.prototype.calculateCurrentRate_=function(){return this.isBuffering_?0:this.rate_},shaka.media.PlayRateController.prototype.applyRate_=function(e){var t=this.harness_.getRate();return t!=e&&this.harness_.setRate(e),t!=e},shaka.media.IPlayheadObserver=function(){},shaka.media.IPlayheadObserver.prototype.poll=function(e,t){},shaka.media.PlayheadObserverManager=function(e){var t=this;this.mediaElement_=e,this.observers_=new Set,this.pollingLoop_=new shaka.util.Timer(function(){t.pollAllObservers_(!1)}).tickEvery(.25)},shaka.media.PlayheadObserverManager.prototype.release=function(){this.pollingLoop_.stop();for(var e=$jscomp.makeIterator(this.observers_),t=e.next();!t.done;t=e.next())t.value.release();this.observers_.clear()},shaka.media.PlayheadObserverManager.prototype.manage=function(e){this.observers_.add(e)},shaka.media.PlayheadObserverManager.prototype.notifyOfSeek=function(){this.pollAllObservers_(!0)},shaka.media.PlayheadObserverManager.prototype.pollAllObservers_=function(e){for(var t=$jscomp.makeIterator(this.observers_),a=t.next();!a.done;a=t.next())a.value.poll(this.mediaElement_.currentTime,e)},shaka.media.RegionTimeline=function(e){var t=this;this.onAddRegion_=function(e){},this.regions_=new Set,this.getSeekRange_=e,this.filterTimer_=new shaka.util.Timer(function(){t.filterBySeekRange_()}).tickEvery(shaka.media.RegionTimeline.REGION_FILTER_INTERVAL)},shaka.media.RegionTimeline.prototype.release=function(){this.onAddRegion_=function(e){},this.regions_.clear(),this.filterTimer_.stop()},shaka.media.RegionTimeline.prototype.setListeners=function(e){this.onAddRegion_=e},shaka.media.RegionTimeline.prototype.addRegion=function(e){null==this.findSimilarRegion_(e)&&(this.regions_.add(e),this.onAddRegion_(e))},shaka.media.RegionTimeline.prototype.filterBySeekRange_=function(){for(var e=this.getSeekRange_(),t=$jscomp.makeIterator(this.regions_),a=t.next();!a.done;a=t.next())(a=a.value).endTime<e.start&&this.regions_.delete(a)},shaka.media.RegionTimeline.prototype.findSimilarRegion_=function(e){for(var t=$jscomp.makeIterator(this.regions_),a=t.next();!a.done;a=t.next())if((a=a.value).schemeIdUri==e.schemeIdUri&&a.id==e.id&&a.startTime==e.startTime&&a.endTime==e.endTime)return a;return null},shaka.media.RegionTimeline.prototype.regions=function(){return this.regions_},shaka.media.RegionTimeline.REGION_FILTER_INTERVAL=2,shaka.media.RegionObserver=function(e){var a=this;this.timeline_=e,this.oldPosition_=new Map,this.onEnter_=function(e,t){},this.onExit_=function(e,t){},this.onSkip_=function(e,t){};e=(r=shaka.media.RegionObserver.RelativePosition_).BEFORE_THE_REGION;var t=r.IN_THE_REGION,r=r.AFTER_THE_REGION;this.rules_=[{weWere:null,weAre:t,invoke:function(e,t){return a.onEnter_(e,t)}},{weWere:e,weAre:t,invoke:function(e,t){return a.onEnter_(e,t)}},{weWere:r,weAre:t,invoke:function(e,t){return a.onEnter_(e,t)}},{weWere:t,weAre:e,invoke:function(e,t){return a.onExit_(e,t)}},{weWere:t,weAre:r,invoke:function(e,t){return a.onExit_(e,t)}},{weWere:e,weAre:r,invoke:function(e,t){return a.onSkip_(e,t)}},{weWere:r,weAre:e,invoke:function(e,t){return a.onSkip_(e,t)}}]},shaka.media.RegionObserver.prototype.release=function(){this.timeline_=null,this.oldPosition_.clear(),this.onEnter_=function(e,t){},this.onExit_=function(e,t){},this.onSkip_=function(e,t){}},shaka.media.RegionObserver.prototype.poll=function(e,t){for(var a=shaka.media.RegionObserver,r=$jscomp.makeIterator(this.timeline_.regions()),n=r.next();!n.done;n=r.next()){var n=n.value,i=this.oldPosition_.get(n),o=a.determinePositionRelativeTo_(n,e);this.oldPosition_.set(n,o);for(var s=$jscomp.makeIterator(this.rules_),l=s.next();!l.done;l=s.next())(l=l.value).weWere==i&&l.weAre==o&&l.invoke(n,t)}},shaka.media.RegionObserver.prototype.setListeners=function(e,t,a){this.onEnter_=e,this.onExit_=t,this.onSkip_=a},shaka.media.RegionObserver.determinePositionRelativeTo_=function(e,t){var a=shaka.media.RegionObserver.RelativePosition_;return t<e.startTime?a.BEFORE_THE_REGION:t>e.endTime?a.AFTER_THE_REGION:a.IN_THE_REGION},shaka.media.RegionObserver.RelativePosition_={BEFORE_THE_REGION:1,IN_THE_REGION:2,AFTER_THE_REGION:3},shaka.util.Networking=function(){},shaka.util.Networking.createSegmentRequest=function(e,t,a,r,n){return e=shaka.net.NetworkingEngine.makeRequest(e,r,n),0==t&&null==a||(e.headers.Range=a?"bytes="+t+"-"+a:"bytes="+t+"-"),e},shaka.util.TextDecoder=function(){this._tmpBufferU16=new Uint16Array(32),this.Object_prototype_toString={}.toString,this.sharedArrayBufferString=this.Object_prototype_toString.call(window.SharedArrayBuffer),this.undefinedObjectString=this.Object_prototype_toString(),this.arrayBufferString=this.Object_prototype_toString.call(ArrayBuffer.prototype),this.fromCharCode=String.fromCharCode},shaka.util.TextDecoder.prototype.decode=function(e){if(!ArrayBuffer.isView(e)){var t=this.Object_prototype_toString.call(e);if(t!==this.arrayBufferString&&t!==this.sharedArrayBufferString&&t!==this.undefinedObjectString)throw TypeError("Failed to execute 'decode' on 'TextDecoder': Theprovided value is not of type'(ArrayBuffer or ArrayBufferView)'");null!==e&&(e=shaka.util.BufferUtils.toUint8(e))}for(var a,r,n,i="",o="",s=0,l=(t=e.length||0)-32|0,u=0,c=0,d=0,h=-1;s<t;){for(a=s<=l?32:t-s|0;d<a;s=s+1|0,d=d+1|0){switch((r=255&e[s])>>4){case 15:if(2!=(n=255&e[s=s+1|0])>>6||247<r){s=s-1|0;break}u=(7&r)<<6|63&n,c=5,r=256;case 14:u=u<<6|((15&r)<<6|63&(n=255&e[s=s+1|0])),c=2==n>>6?c+4|0:24,r=r+256&768;case 13:case 12:u=u<<6|((31&r)<<6|63&(n=255&e[s=s+1|0])),c=c+7|0,s<t&&2==n>>6&&u>>c&&u<1114112?0<=(u=(r=u)-65536|0)&&(h=55296+(u>>10)|0,r=56320+(1023&u)|0,d<31?(this._tmpBufferU16[d]=h,d=d+1|0,h=-1):(n=h,h=r,r=n)):(s=s-(r>>=8)-1|0,r=65533),u=c=0,a=s<=l?32:t-s|0;default:this._tmpBufferU16[d]=r;continue;case 11:case 10:case 9:case 8:}this._tmpBufferU16[d]=65533}if(o+=this.fromCharCode(this._tmpBufferU16[0],this._tmpBufferU16[1],this._tmpBufferU16[2],this._tmpBufferU16[3],this._tmpBufferU16[4],this._tmpBufferU16[5],this._tmpBufferU16[6],this._tmpBufferU16[7],this._tmpBufferU16[8],this._tmpBufferU16[9],this._tmpBufferU16[10],this._tmpBufferU16[11],this._tmpBufferU16[12],this._tmpBufferU16[13],this._tmpBufferU16[14],this._tmpBufferU16[15],this._tmpBufferU16[16],this._tmpBufferU16[17],this._tmpBufferU16[18],this._tmpBufferU16[19],this._tmpBufferU16[20],this._tmpBufferU16[21],this._tmpBufferU16[22],this._tmpBufferU16[23],this._tmpBufferU16[24],this._tmpBufferU16[25],this._tmpBufferU16[26],this._tmpBufferU16[27],this._tmpBufferU16[28],this._tmpBufferU16[29],this._tmpBufferU16[30],this._tmpBufferU16[31]),d<32&&(o=o.slice(0,d-32|0)),s<t){if(d=~(this._tmpBufferU16[0]=h)>>>31,h=-1,o.length<i.length)continue}else-1!==h&&(o+=this.fromCharCode(h));i+=o,o=""}return i},shaka.util.Id3=function(){this.decoder=-1},shaka.util.Id3.prototype.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},shaka.util.Id3.prototype.readSize=function(e,t){var a=(127&e[t])<<21;return(a=(a|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},shaka.util.Id3.prototype.getFrameData=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),a=this.readSize(e,4);return{type:t,size:a,data:e.subarray(10,10+a)}},shaka.util.Id3.prototype.decodeFrame=function(e){return"PRIV"===e.type?this.decodePrivFrame(e):"W"===e.type[0]?this.decodeURLFrame(e):this.decodeTextFrame(e)},shaka.util.Id3.prototype.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},shaka.util.Id3.prototype.decodePrivFrame=function(e){var t,a;if(!(e.size<2))return t=this.utf8ArrayToStr(e.data,!0),a=shaka.util.BufferUtils.toUint8(e.data.subarray(t.length+1)),{key:e.type,info:t,data:a}},shaka.util.Id3.prototype.decodeURLFrame=function(e){var t,a;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(a=this.utf8ArrayToStr(e.data.subarray(1),!0)).length+1,t=this.utf8ArrayToStr(e.data.subarray(t)),{key:e.type,info:a,data:t}):(a=this.utf8ArrayToStr(e.data),{key:e.type,data:a})},shaka.util.Id3.prototype.getTextDecoder=function(){return-1==this.decoder&&(this.decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):new shaka.util.TextDecoder),this.decoder},shaka.util.Id3.prototype.utf8ArrayToStr=function(e,t){t=void 0!==t&&t;var a,r=this.getTextDecoder();if(-1!=r)return r=r.decode(e),t?-1!==(a=r.indexOf("\0"))?r.substring(0,a):r:r.replace(/\0/g,"");r=e.length;for(var n,i,o="",s=0;s<r&&(0!==(a=e[s++])||!t);)if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(a);break;case 12:case 13:n=e[s++],o+=String.fromCharCode((31&a)<<6|63&n);break;case 14:n=e[s++],i=e[s++],o+=String.fromCharCode((15&a)<<12|(63&n)<<6|(63&i)<<0)}return o},shaka.util.Id3.prototype.decodeTextFrame=function(e){var t,a;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(a=this.utf8ArrayToStr(e.data.subarray(1),!0)).length+1,t=this.utf8ArrayToStr(e.data.subarray(t)),{key:e.type,info:a,data:t}):(a=this.utf8ArrayToStr(e.data.subarray(1)),{key:e.type,data:a})},shaka.util.Id3.prototype.getID3Frames=function(e){for(var t=0,a=[];this.isHeader(e,t);){for(var r=this.readSize(e,t+6),r=(t+=10)+r;t+8<r;){var n=this.getFrameData(e.subarray(t)),i=this.decodeFrame(n);i&&a.push(i),t+=n.size+10}this.isFooter(e,t)&&(t+=10)}return a},shaka.media.StreamingEngine=function(e,t,a){var r=this;this.playerInterface_=t,this.manifest_=e,this.protocol_=a,this.config_=null,this.bufferingGoalScale_=1,this.currentTextStream_=this.currentVariant_=null,this.mediaStates_=new Map,this.startupComplete_=!1,this.failureCallbackBackoff_=null,this.fatalError_=!1,this.previousEndCue=-1,this.destroyer_=new shaka.util.Destroyer(function(){return r.doDestroy_()})},shaka.media.StreamingEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.StreamingEngine.prototype.doDestroy_=function(){var t,a,r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){for(t=[],a=$jscomp.makeIterator(i.mediaStates_.values()),r=a.next();!r.done;r=a.next())n=r.value,i.cancelUpdate_(n),t.push(i.abortOperations_(n));return e.yield(Promise.all(t),2)}i.mediaStates_.clear(),i.playerInterface_=null,i.manifest_=null,i.config_=null,e.jumpToEnd()})},shaka.media.StreamingEngine.prototype.configure=function(e){this.config_=e,this.failureCallbackBackoff_=new shaka.net.Backoff({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},shaka.media.StreamingEngine.prototype.start=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(t.config_,"StreamingEngine configure() must be called before init()!"),e.yield(t.initStreams_(),2);t.destroyer_.ensureNotDestroyed(),shaka.log.debug("init: completed initial Stream setup"),t.startupComplete_=!0,e.jumpToEnd()})},shaka.media.StreamingEngine.prototype.getCurrentVariant=function(){return this.currentVariant_},shaka.media.StreamingEngine.prototype.getCurrentTextStream=function(){return this.currentTextStream_},shaka.media.StreamingEngine.prototype.loadNewTextStream_=function(t){var a,r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(!i.mediaStates_.has(a.TEXT),"Should not call loadNewTextStream_ while streaming text!"),e.setCatchFinallyBlocks(2),e.yield(i.playerInterface_.mediaSourceEngine.clear(a.TEXT),4);case 4:e.leaveTryBlock(3);break;case 2:r=e.enterCatchBlock(),i.playerInterface_&&i.playerInterface_.onError(r);case 3:r=shaka.util.MimeUtils.getFullType(t.mimeType,t.codecs),i.playerInterface_.mediaSourceEngine.reinitText(r),n=i.playerInterface_.mediaSourceEngine.getTextDisplayer(),(n.isTextVisible()||i.config_.alwaysStreamText)&&(n=i.createMediaState_(t),i.mediaStates_.set(a.TEXT,n),i.scheduleUpdate_(n,0)),e.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.unloadTextStream=function(){var e=shaka.util.ManifestParserUtils.ContentType,t=this.mediaStates_.get(e.TEXT);t&&(this.cancelUpdate_(t),this.abortOperations_(t).catch(function(){}),this.mediaStates_.delete(e.TEXT)),this.currentTextStream_=null},shaka.media.StreamingEngine.prototype.setTrickPlay=function(e){var t,a=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.VIDEO);a&&(t=a.stream)&&(shaka.log.debug("setTrickPlay",e),e?(e=t.trickModeVideo)&&!a.restoreStreamAfterTrickPlay&&(shaka.log.debug("Engaging trick mode stream",e),this.switchInternal_(e,!1,0,!1),a.restoreStreamAfterTrickPlay=t):(t=a.restoreStreamAfterTrickPlay)&&(shaka.log.debug("Restoring non-trick-mode stream",t),a.restoreStreamAfterTrickPlay=null,this.switchInternal_(t,!0,0,!1)))},shaka.media.StreamingEngine.prototype.switchVariant=function(e,t,a,r){t=void 0!==t&&t,a=void 0===a?0:a,r=void 0!==r&&r,this.currentVariant_=e,this.startupComplete_&&(e.video&&this.switchInternal_(e.video,t,a,r),e.audio)&&this.switchInternal_(e.audio,t,a,r)},shaka.media.StreamingEngine.prototype.switchTextStream=function(e){var t;this.currentTextStream_=e,this.startupComplete_&&(t=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(e&&e.type==t.TEXT,"Wrong stream type passed to switchTextStream!"),this.switchInternal_(e,!0,0,!1))},shaka.media.StreamingEngine.prototype.reloadTextStream=function(){var e=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.TEXT);e&&this.switchInternal_(e.stream,!0,0,!0)},shaka.media.StreamingEngine.prototype.switchInternal_=function(e,t,a,r){var n=this,i=shaka.util.ManifestParserUtils.ContentType,o=this.mediaStates_.get(e.type);o||e.type!=i.TEXT?(goog.asserts.assert(o,"switch: expected mediaState to exist"),o&&(o.restoreStreamAfterTrickPlay&&(shaka.log.debug("switch during trick play mode",e),e.trickModeVideo?(e=(o.restoreStreamAfterTrickPlay=e).trickModeVideo,shaka.log.debug("switch found trick play stream",e)):(o.restoreStreamAfterTrickPlay=null,shaka.log.debug("switch found no special trick play stream"))),o.stream!=e||r?(e.type==i.TEXT&&(r=shaka.util.MimeUtils.getFullType(e.mimeType,e.codecs),this.playerInterface_.mediaSourceEngine.reinitText(r)),o.stream=e,o.segmentIterator=null,e=shaka.media.StreamingEngine.logPrefix_(o),shaka.log.debug("switch: switching to Stream "+e),t&&(o.clearingBuffer?o.waitingToFlushBuffer=!0:o.performingUpdate?(o.waitingToClearBuffer=!0,o.clearBufferSafeMargin=a,o.waitingToFlushBuffer=!0):(this.cancelUpdate_(o),this.clearBuffer_(o,!0,a).catch(function(e){n.playerInterface_&&(goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),n.playerInterface_.onError(e))}))),this.makeAbortDecision_(o).catch(function(e){n.playerInterface_&&(goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),n.playerInterface_.onError(e))})):(t=shaka.media.StreamingEngine.logPrefix_(o),shaka.log.debug("switch: Stream "+t+" already active")))):this.loadNewTextStream_(e)},shaka.media.StreamingEngine.prototype.makeAbortDecision_=function(t){var a,r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?t.operation?(a=t.stream,r=t.operation,a.segmentIndex?e.jumpTo(2):e.yield(a.createSegmentIndex(),2)):e.return():t.operation!=r||t.stream!=a?e.return():(goog.asserts.assert(t.stream.segmentIndex,"Segment index should exist by now!"),n.shouldAbortCurrentRequest_(t)&&(shaka.log.info("Aborting current segment request."),t.operation.abort()),void e.jumpToEnd())})},shaka.media.StreamingEngine.prototype.shouldAbortCurrentRequest_=function(e){goog.asserts.assert(e.operation,"Abort logic requires an ongoing operation!"),goog.asserts.assert(e.stream&&e.stream.segmentIndex,"Abort logic requires a segment index");var t=this.playerInterface_.getPresentationTime(),a=this.playerInterface_.mediaSourceEngine.bufferEnd(e.type),r=this.getTimeNeeded_(e,t),n=null==(r=e.stream.segmentIndex.find(r))?null:e.stream.segmentIndex.get(r);return r=n?n.getSize():null,!!(r=n&&!r?(n.getEndTime()-n.getStartTime())*(e.stream.bandwidth||0)/8:r)&&((n=n.initSegmentReference)&&(r+=n.getSize()||0),8*r/(n=this.playerInterface_.getBandwidthEstimate())<(a||0)-t-Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal)||e.operation.getBytesRemaining()>r)},shaka.media.StreamingEngine.prototype.seeked=function(){for(var e=this.playerInterface_.getPresentationTime(),t=this.config_.smallGapLimit,a=shaka.util.ManifestParserUtils.ContentType,r=!1,n=$jscomp.makeIterator(this.mediaStates_.keys()),i=n.next();!i.done;i=n.next()){var i=i.value,o=this.mediaStates_.get(i),s=shaka.media.StreamingEngine.logPrefix_(o);o.segmentIterator=null,this.playerInterface_.mediaSourceEngine.isBuffered(i,e,t)||(null!=this.playerInterface_.mediaSourceEngine.bufferEnd(i)&&(this.forceClearBuffer_(o),r=!0),o.operation&&(o.operation.abort(),shaka.log.debug(s,"Aborting operation due to seek"),o.operation=null),i===a.TEXT&&this.playerInterface_.mediaSourceEngine.resetCaptionParser())}r||shaka.log.debug("(all): seeked: buffered seek: presentationTime="+e)},shaka.media.StreamingEngine.prototype.forceClearBuffer_=function(e){var t=this,a=shaka.media.StreamingEngine.logPrefix_(e);e.clearingBuffer?shaka.log.debug(a,"clear: already clearing the buffer"):e.waitingToClearBuffer?shaka.log.debug(a,"clear: already waiting"):e.performingUpdate?(shaka.log.debug(a,"clear: currently updating"),e.waitingToClearBuffer=!0,e.clearBufferSafeMargin=0):null==this.playerInterface_.mediaSourceEngine.bufferStart(e.type)?(shaka.log.debug(a,"clear: nothing buffered"),null==e.updateTimer&&this.scheduleUpdate_(e,0)):(shaka.log.debug(a,"clear: handling right now"),this.cancelUpdate_(e),this.clearBuffer_(e,!1,0).catch(function(e){t.playerInterface_&&(goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),t.playerInterface_.onError(e))}))},shaka.media.StreamingEngine.prototype.initStreams_=function(){var t,a,r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(a=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(l.config_,"StreamingEngine configure() must be called before init()!"),l.currentVariant_)return t=new Map,r=new Set,l.currentVariant_.audio&&(t.set(a.AUDIO,l.currentVariant_.audio),r.add(l.currentVariant_.audio)),l.currentVariant_.video&&(t.set(a.VIDEO,l.currentVariant_.video),r.add(l.currentVariant_.video)),l.currentTextStream_&&(t.set(a.TEXT,l.currentTextStream_),r.add(l.currentTextStream_)),a=l.playerInterface_.mediaSourceEngine,r=l.config_.forceTransmuxTS,e.yield(a.init(t,r),2);throw shaka.log.error("init: no Streams chosen"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STREAMING,shaka.util.Error.Code.STREAMING_ENGINE_STARTUP_INVALID_STATE)}for(l.destroyer_.ensureNotDestroyed(),l.setDuration_(),n=$jscomp.makeIterator(t.keys()),i=n.next();!i.done;i=n.next())o=i.value,s=t.get(o),l.mediaStates_.has(o)||(s=l.createMediaState_(s),l.mediaStates_.set(o,s),l.scheduleUpdate_(s,0));e.jumpToEnd()})},shaka.media.StreamingEngine.prototype.createMediaState_=function(e){return{stream:e,type:e.type,segmentIterator:null,lastSegmentReference:null,lastInitSegmentReference:null,lastTimestampOffset:null,lastAppendWindowStart:null,lastAppendWindowEnd:null,restoreStreamAfterTrickPlay:null,endOfStream:!1,performingUpdate:!1,updateTimer:null,waitingToClearBuffer:!1,clearBufferSafeMargin:0,waitingToFlushBuffer:!1,clearingBuffer:!1,recovering:!1,hasError:!1,operation:null}},shaka.media.StreamingEngine.prototype.setDuration_=function(){var e=this.manifest_.presentationTimeline.getDuration();e<1/0?this.playerInterface_.mediaSourceEngine.setDuration(e):this.playerInterface_.mediaSourceEngine.setDuration(Math.pow(2,32))},shaka.media.StreamingEngine.prototype.onUpdate_=function(t){var a,r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(o.destroyer_.ensureNotDestroyed(),a=shaka.media.StreamingEngine.logPrefix_(t),goog.asserts.assert(!t.performingUpdate&&null!=t.updateTimer,a+" unexpected call to onUpdate_()"),t.performingUpdate||null==t.updateTimer)return e.return();if(goog.asserts.assert(!t.clearingBuffer,a+" onUpdate_() should not be called when clearing the buffer"),t.clearingBuffer)return e.return();if(t.updateTimer=null,t.waitingToClearBuffer)return shaka.log.debug(a,"skipping update and clearing the buffer"),e.yield(o.clearBuffer_(t,t.waitingToFlushBuffer,t.clearBufferSafeMargin),3);e.jumpTo(2);break;case 3:return e.return();case 2:if(t.stream.segmentIndex){e.jumpTo(4);break}return r=t.stream,e.yield(t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return null==t.updateTimer&&o.scheduleUpdate_(t,0),e.return();case 4:e.setCatchFinallyBlocks(6),null!=(n=o.update_(t))&&(o.scheduleUpdate_(t,n),t.hasError=!1),e.leaveTryBlock(7);break;case 6:return n=e.enterCatchBlock(),e.setCatchFinallyBlocks(8),e.yield(o.handleStreamingError_(n),10);case 10:e.leaveTryBlock(9);break;case 8:e.enterCatchBlock();case 9:return e.return();case 7:if(i=Array.from(o.mediaStates_.values()),o.startupComplete_&&i.every(function(e){return e.endOfStream}))return shaka.log.v1(a,"calling endOfStream()..."),e.yield(o.playerInterface_.mediaSourceEngine.endOfStream(),12);e.jumpTo(0);break;case 12:o.destroyer_.ensureNotDestroyed(),0!=(i=o.playerInterface_.mediaSourceEngine.getDuration())&&i<o.manifest_.presentationTimeline.getDuration()&&o.manifest_.presentationTimeline.setDuration(i),e.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.update_=function(e){goog.asserts.assert(this.manifest_,"manifest_ should not be null"),goog.asserts.assert(this.config_,"config_ should not be null");var t=shaka.util.ManifestParserUtils.ContentType;if(shaka.media.StreamingEngine.isEmbeddedText_(e))this.playerInterface_.mediaSourceEngine.setSelectedClosedCaptionId(e.stream.originalId||"");else{e.type==t.TEXT&&this.playerInterface_.mediaSourceEngine.clearSelectedClosedCaptionId();var a=shaka.media.StreamingEngine.logPrefix_(e),r=this.playerInterface_.getPresentationTime(),n=this.getTimeNeeded_(e,r),i=(shaka.log.v2(a,"timeNeeded="+n),this.playerInterface_.mediaSourceEngine.bufferedAheadOf(e.type,r)),o=(shaka.log.v2(a,"update_:","presentationTime="+r,"bufferedAhead="+i),Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal,this.config_.bufferingGoal)*this.bufferingGoalScale_);if(n>=this.manifest_.presentationTimeline.getDuration())shaka.log.debug(a,"buffered to end of presentation"),e.endOfStream=!0,e.type==t.VIDEO&&(e=this.mediaStates_.get(t.TEXT))&&shaka.media.StreamingEngine.isEmbeddedText_(e)&&(e.endOfStream=!0);else{if(e.endOfStream=!1,o<=i)return shaka.log.v2(a,"buffering goal met"),.5;if(t=this.playerInterface_.mediaSourceEngine.bufferEnd(e.type),!(t=this.getSegmentReferenceNeeded_(e,r,t)))return 1;i=1/0,o=Array.from(this.mediaStates_.values());for(var s=(o=$jscomp.makeIterator(o)).next();!s.done;s=o.next())s=s.value,shaka.media.StreamingEngine.isEmbeddedText_(s)||s.segmentIterator&&!s.segmentIterator.current()||(s=this.getTimeNeeded_(s,r),i=Math.min(i,s));if(i+(o=this.manifest_.presentationTimeline.getMaxSegmentDuration()*shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_)<=n)return shaka.log.v2(a,"waiting for other streams to buffer"),1;this.fetchAndAppend_(e,r,t).catch(function(){})}}return null},shaka.media.StreamingEngine.prototype.getTimeNeeded_=function(e,t){return e.lastSegmentReference?e.lastSegmentReference.endTime:t},shaka.media.StreamingEngine.prototype.getSegmentReferenceNeeded_=function(e,t,a){var r=shaka.media.StreamingEngine.logPrefix_(e);if(goog.asserts.assert(e.stream.segmentIndex,"segment index should have been generated already"),"HLS"===this.protocol_){if(e.lastSegmentReference)return(r=(r=e.stream.segmentIndex.getReferences())[e.lastSegmentReference.segmentNumber-r[0].segmentNumber+1])?(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(r.startTime),e.segmentIterator&&e.segmentIterator.setLastIncreasedBySegNum(!0)):(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(t),r=e.segmentIterator&&e.segmentIterator.next().value,e.segmentIterator&&e.segmentIterator.setLastIncreasedBySegNum(!1)),r;if(0===a&&0===e.stream.segmentIndex.getReferences()[0].startTime)return e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(0),t=e.segmentIterator&&e.segmentIterator.next().value,e.segmentIterator&&e.segmentIterator.setLastIncreasedBySegNum(!1),t;a=this.config_.inaccurateManifestTolerance;var n=Math.max(t-a,0),i=(shaka.log.v1(r,"looking up segment","lookupTime:",n,"presentationTime:",t),null);a&&(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(n),i=e.segmentIterator&&e.segmentIterator.next().value,e.segmentIterator)&&e.segmentIterator.setLastIncreasedBySegNum(!1),i||(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(t),i=e.segmentIterator&&e.segmentIterator.next().value,e.segmentIterator&&e.segmentIterator.setLastIncreasedBySegNum(!1)),null==i&&shaka.log.warning(r,"cannot find segment","lookupTime:",n,"presentationTime:",t)}else{if(e.segmentIterator)return e.segmentIterator.current();if(e.lastSegmentReference||a)return t=e.lastSegmentReference?e.lastSegmentReference.endTime:a,goog.asserts.assert(null!=t,"Should have a time to search"),shaka.log.v1(r,"looking up segment from new stream endTime:",t),e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(t),(e=e.segmentIterator&&e.segmentIterator.next().value)||shaka.log.warning(r,"cannot find segment","endTime:",t),e;a=this.config_.inaccurateManifestTolerance,n=Math.max(t-a,0),shaka.log.v1(r,"looking up segment","lookupTime:",n,"presentationTime:",t),i=null,a&&(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(n),i=e.segmentIterator&&e.segmentIterator.next().value),i||(e.segmentIterator=e.stream.segmentIndex.getIteratorForTime(t),i=e.segmentIterator&&e.segmentIterator.next().value),i||shaka.log.warning(r,"cannot find segment","lookupTime:",n,"presentationTime:",t)}return i},shaka.media.StreamingEngine.prototype.fetchAndAppend_=function(i,o,s){var t,a,l,r,n,u,c,d,h,p,f,m,g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return t=shaka.util.ManifestParserUtils.ContentType,a=shaka.media.StreamingEngine,a=a.logPrefix_(i),shaka.log.v1(a,"fetchAndAppend_:","presentationTime="+o,"reference.startTime="+s.startTime,"reference.endTime="+s.endTime),l=i.stream,r=i.segmentIterator,i.performingUpdate=!0,e.setCatchFinallyBlocks(2),e.yield(g.initSourceBuffer_(i,s),4);case 4:return(g.destroyer_.ensureNotDestroyed(),g.fatalError_)?e.return():(shaka.log.v2(a,"fetching segment"),f="video/mp4"==l.mimeType||"audio/mp4"==l.mimeType,p=window.ReadableStream,g.config_.lowLatencyMode&&p&&f?(h=new Uint8Array(0),f=function(t){var a,r,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return g.destroyer_.ensureNotDestroyed(),g.fatalError_?e.return():(h=g.concatArray_(h,t),a=!1,r=0,(new shaka.util.Mp4Parser).box("mdat",function(e){r=e.size+e.start,a=!0}).parse(h,!1,!0),a?(n=h.subarray(0,r),h=h.subarray(r),e.yield(g.append_(i,o,l,s,n),0)):e.jumpTo(0))})},e.yield(g.fetch_(i,s,f),6)):(g.config_.lowLatencyMode&&!p&&shaka.log.warning("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser."),f=g.fetch_(i,s),e.yield(f,7)));case 7:if(n=e.yieldResult,!l.clearKey){e.jumpTo(8);break}if(!(u=l.clearKey.iv))for(u=shaka.util.BufferUtils.toUint8(new ArrayBuffer(16)),c=l.clearKey.firstMediaSequenceNumber+r.currentPosition(),d=u.byteLength-1;0<=d;d--)u[d]=255&c,c>>=8;return e.yield(window.crypto.subtle.decrypt({name:"AES-CBC",iv:u},l.clearKey.cryptoKey,n),9);case 9:n=e.yieldResult;case 8:return g.destroyer_.ensureNotDestroyed(),g.fatalError_?e.return():i.waitingToClearBuffer?(shaka.log.info(a,"waitingToClearBuffer, skip append"),i.performingUpdate=!1,g.scheduleUpdate_(i,0),e.return()):e.yield(g.append_(i,o,l,s,n),6);case 6:if(g.destroyer_.ensureNotDestroyed(),g.fatalError_)return e.return();i.lastSegmentReference=s,p="HLS"===g.protocol_&&r.isLastIncreasedBySegNum()?r.nextBySegmentNumber(s.segmentNumber):r.next().value,shaka.log.v2(a,"advancing to next segment",p),i.performingUpdate=!1,i.recovering=!1,f=g.playerInterface_.mediaSourceEngine.getBufferedInfo(),m=f[i.type],shaka.log.v1(a,"finished fetch and append",JSON.stringify(m)),i.waitingToClearBuffer||g.playerInterface_.onSegmentAppended(),g.scheduleUpdate_(i,0),e.leaveTryBlock(0);break;case 2:if(m=e.enterCatchBlock(),g.destroyer_.ensureNotDestroyed(m),g.fatalError_)return e.return();if(goog.asserts.assert(m instanceof shaka.util.Error,"Should only receive a Shaka error"),i.performingUpdate=!1,m.code==shaka.util.Error.Code.OPERATION_ABORTED){i.performingUpdate=!1,i.updateTimer=null,g.scheduleUpdate_(i,0),e.jumpTo(0);break}if(i.type==t.TEXT&&g.config_.ignoreTextStreamFailures){m.code==shaka.util.Error.Code.BAD_HTTP_STATUS?shaka.log.warning(a,"Text stream failed to download. Proceeding without it."):shaka.log.warning(a,"Text stream failed to parse. Proceeding without it."),g.mediaStates_.delete(t.TEXT),e.jumpTo(0);break}if(m.code==shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR){g.handleQuotaExceeded_(i,m),e.jumpTo(0);break}if(m.code==shaka.util.Error.Code.BAD_HTTP_STATUS&&m.data&&404==m.data[1]){shaka.log.v2(a,"segment not available."),i.performingUpdate=!1,i.updateTimer=null,g.scheduleUpdate_(i,1),e.jumpTo(0);break}return shaka.log.error(a,"failed fetch and append: code="+m.code),i.hasError=!0,m.severity=shaka.util.Error.Severity.CRITICAL,e.setCatchFinallyBlocks(16),e.yield(g.handleStreamingError_(m),18);case 18:e.leaveTryBlock(0);break;case 16:e.enterCatchBlock(),e.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.retry=function(){if(this.destroyer_.destroyed())return shaka.log.error("Unable to retry after StreamingEngine is destroyed!"),!1;if(this.fatalError_)return shaka.log.error("Unable to retry after StreamingEngine encountered a fatal error!"),!1;for(var e=$jscomp.makeIterator(this.mediaStates_.values()),t=e.next();!t.done;t=e.next()){var t=t.value,a=shaka.media.StreamingEngine.logPrefix_(t);t.hasError&&(shaka.log.info(a,"Retrying after failure..."),t.hasError=!1,this.scheduleUpdate_(t,.1))}return!0},shaka.media.StreamingEngine.prototype.concatArray_=function(e,t){var a=new Uint8Array(e.length+t.length);return a.set(e),a.set(t,e.length),a},shaka.media.StreamingEngine.prototype.handleQuotaExceeded_=function(t,e){var a=shaka.media.StreamingEngine.logPrefix_(t);if(Array.from(this.mediaStates_.values()).some(function(e){return e!=t&&e.recovering}))shaka.log.debug(a,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*this.bufferingGoalScale_);if(20<r)this.bufferingGoalScale_-=.2;else{if(!(4<r))return shaka.log.error(a,"MediaSource threw QuotaExceededError too many times"),this.fatalError_=t.hasError=!0,void this.playerInterface_.onError(e);this.bufferingGoalScale_-=.04}shaka.log.warning(a,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*this.bufferingGoalScale_))+"%"),t.recovering=!0}this.scheduleUpdate_(t,4)},shaka.media.StreamingEngine.prototype.initSourceBuffer_=function(r,t){var a,n,i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return a=shaka.media.StreamingEngine,n=a.logPrefix_(r),i=[],o=Math.max(0,t.appendWindowStart-a.APPEND_WINDOW_START_FUDGE_),s=t.appendWindowEnd+a.APPEND_WINDOW_END_FUDGE_,goog.asserts.assert(t.startTime<=s,n+" segment should start before append window end"),(l=t.timestampOffset)==r.lastTimestampOffset&&o==r.lastAppendWindowStart&&s==r.lastAppendWindowEnd||(shaka.log.v1(n,"setting timestamp offset to "+l),shaka.log.v1(n,"setting append window start to "+o),shaka.log.v1(n,"setting append window end to "+s),i.push(function(){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.setCatchFinallyBlocks(2),r.lastAppendWindowStart=o,r.lastAppendWindowEnd=s,r.lastTimestampOffset=l,e.yield(c.playerInterface_.mediaSourceEngine.setStreamProperties(r.type,l,o,s),4);if(2!=e.nextAddress)return e.leaveTryBlock(0);throw t=e.enterCatchBlock(),r.lastAppendWindowStart=null,r.lastAppendWindowEnd=null,r.lastTimestampOffset=null,t})}())),!shaka.media.InitSegmentReference.equal(t.initSegmentReference,r.lastInitSegmentReference)&&(r.lastInitSegmentReference=t.initSegmentReference)&&(shaka.log.v1(n,"fetching init segment"),u=c.fetch_(r,t.initSegmentReference),i.push(function(){var t,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return e.setCatchFinallyBlocks(2),e.yield(u,4);case 4:return a=e.yieldResult,c.destroyer_.ensureNotDestroyed(),shaka.log.v1(n,"appending init segment"),t=r.stream.closedCaptions&&0<r.stream.closedCaptions.size,e.yield(c.playerInterface_.mediaSourceEngine.appendBuffer(r.type,a,null,null,t),5);case 5:e.leaveTryBlock(0);break;case 2:throw a=e.enterCatchBlock(),r.lastInitSegmentReference=null,a}})}())),e.yield(Promise.all(i),0)})},shaka.media.StreamingEngine.prototype.append_=function(t,a,r,n,i){var o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.media.StreamingEngine.logPrefix_(t),s=r.closedCaptions&&0<r.closedCaptions.size,(null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||l.config_.dispatchAllEmsgBoxes)&&(new shaka.util.Mp4Parser).fullBox("emsg",function(e){return l.parseEMSG_(n,r.emsgSchemeIdUris,e)}).parse(i),e.yield(l.evict_(t,a),2)):3!=e.nextAddress?(l.destroyer_.ensureNotDestroyed(),shaka.log.v1(o,"appending media segment"),e.yield(l.playerInterface_.mediaSourceEngine.appendBuffer(t.type,i,n.startTime,n.endTime,s),3)):(l.destroyer_.ensureNotDestroyed(),shaka.log.v2(o,"appended media segment"),void e.jumpToEnd())})},shaka.media.StreamingEngine.prototype.parseEMSG_=function(e,t,a){var r,n,i,o,s,l,u,c,d;if(0===a.version?(u=a.reader.readTerminatedString(),c=a.reader.readTerminatedString(),n=a.reader.readUint32(),o=a.reader.readUint32(),s=a.reader.readUint32(),l=a.reader.readUint32()):(n=a.reader.readUint32(),o=(i=a.reader.readUint64()/n+e.timestampOffset)-e.startTime,s=a.reader.readUint32(),l=a.reader.readUint32(),u=a.reader.readTerminatedString(),c=a.reader.readTerminatedString()),a=a.reader.readBytes(a.reader.getLength()-a.reader.getPosition()),t&&t.includes(u)||this.config_.dispatchAllEmsgBoxes)if("urn:mpeg:dash:event:2012"==u)this.playerInterface_.onManifestUpdate();else{for(i=(new shaka.util.Id3).getID3Frames(a),t=0;t<i.length;t++)i[t]&&"YDUR"===i[t].key&&(r=Number(i[t].data)),i[t]&&"YTYP"===i[t].key&&(d=i[t].data);d&&"S"===d?e=(i=e.startTime)+1:(e=e.startTime+r,i=this.previousEndCue),this.previousEndCue=e,n=new shaka.util.FakeEvent(shaka.Player.EventName.Emsg,{detail:{startTime:i,endTime:e,schemeIdUri:u,value:c,timescale:n,presentationTimeDelta:o,eventDuration:s,id:l,messageData:a}}),this.playerInterface_.onEvent(n)}},shaka.media.StreamingEngine.prototype.evict_=function(t,a){var r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return r=shaka.media.StreamingEngine.logPrefix_(t),shaka.log.v2(r,"checking buffer length"),n=Math.max(l.config_.bufferBehind,l.manifest_.presentationTimeline.getMaxSegmentDuration()),null==(i=l.playerInterface_.mediaSourceEngine.bufferStart(t.type))?(shaka.log.v2(r,"buffer behind okay because nothing buffered:","presentationTime="+a,"bufferBehind="+n),e.return()):(s=(o=a-i)-n)<=.01?(shaka.log.v2(r,"buffer behind okay:","presentationTime="+a,"bufferedBehind="+o,"bufferBehind="+n,"underflow="+Math.abs(s)),e.return()):(shaka.log.v1(r,"buffer behind too large:","presentationTime="+a,"bufferedBehind="+o,"bufferBehind="+n,"overflow="+s),e.yield(l.playerInterface_.mediaSourceEngine.remove(t.type,i,i+s),2));l.destroyer_.ensureNotDestroyed(),shaka.log.v1(r,"evicted "+s+" seconds"),e.jumpToEnd()})},shaka.media.StreamingEngine.isEmbeddedText_=function(e){var t=(a=shaka.util.MimeUtils).CEA608_CLOSED_CAPTION_MIMETYPE,a=a.CEA708_CLOSED_CAPTION_MIMETYPE;return e&&e.type==shaka.util.ManifestParserUtils.ContentType.TEXT&&(e.stream.mimeType==t||e.stream.mimeType==a)},shaka.media.StreamingEngine.prototype.fetch_=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.net.NetworkingEngine.RequestType.SEGMENT,n=shaka.util.Networking.createSegmentRequest(a.getUris(),a.startByte,a.endByte,s.config_.retryParameters,r),shaka.log.v2("fetching: reference=",a),i=t.stream,s.playerInterface_.modifySegmentRequest(n,{type:i.type,init:a instanceof shaka.media.InitSegmentReference,duration:a.endTime-a.startTime,mimeType:i.mimeType,codecs:i.codecs,bandwidth:i.bandwidth}),i=s.playerInterface_.netEngine.request(o,n),t.operation=i,e.yield(i.promise,2)):(o=e.yieldResult,t.operation=null,e.return(o.data))})},shaka.media.StreamingEngine.prototype.clearBuffer_=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(n=shaka.media.StreamingEngine.logPrefix_(t),goog.asserts.assert(!t.performingUpdate&&null==t.updateTimer,n+" unexpected call to clearBuffer_()"),t.waitingToClearBuffer=!1,t.waitingToFlushBuffer=!1,t.clearBufferSafeMargin=0,t.clearingBuffer=!0,t.lastSegmentReference=null,t.lastInitSegmentReference=null,t.segmentIterator=null,shaka.log.debug(n,"clearing buffer"),r?(i=s.playerInterface_.getPresentationTime(),o=s.playerInterface_.mediaSourceEngine.getDuration(),e.yield(s.playerInterface_.mediaSourceEngine.remove(t.type,i+r,o),3)):e.yield(s.playerInterface_.mediaSourceEngine.clear(t.type),4)):3!=e.nextAddress?(s.destroyer_.ensureNotDestroyed(),a?e.yield(s.playerInterface_.mediaSourceEngine.flush(t.type),3):e.jumpTo(3)):(s.destroyer_.ensureNotDestroyed(),shaka.log.debug(n,"cleared buffer"),t.clearingBuffer=!1,t.endOfStream=!1,s.scheduleUpdate_(t,0),void e.jumpToEnd())})},shaka.media.StreamingEngine.prototype.scheduleUpdate_=function(a,e){var r=this,t=shaka.media.StreamingEngine.logPrefix_(a),n=a.type;n!=shaka.util.ManifestParserUtils.ContentType.TEXT||this.mediaStates_.has(n)?(shaka.log.v2(t,"updating in "+e+" seconds"),goog.asserts.assert(null==a.updateTimer,t+" did not expect update to be scheduled"),a.updateTimer=new shaka.util.DelayedTick(function(){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),e.yield(r.onUpdate_(a),4)):2!=e.nextAddress?e.leaveTryBlock(0):(t=e.enterCatchBlock(),r.playerInterface_&&r.playerInterface_.onError(t),void e.jumpToEnd())})}).tickAfter(e)):shaka.log.v1(t,"Text stream is unloaded. No update is needed.")},shaka.media.StreamingEngine.prototype.cancelUpdate_=function(e){null!=e.updateTimer&&(e.updateTimer.stop(),e.updateTimer=null)},shaka.media.StreamingEngine.prototype.abortOperations_=function(t){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return t.operation?e.yield(t.operation.abort(),0):e.jumpTo(0)})},shaka.media.StreamingEngine.prototype.handleStreamingError_=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(a.failureCallbackBackoff_.attempt(),2);a.destroyer_.ensureNotDestroyed(),a.playerInterface_.onError(t),t.handled||a.config_.failureCallback(t),e.jumpToEnd()})},shaka.media.StreamingEngine.logPrefix_=function(e){return"("+e.type+":"+e.stream.id+")"},shaka.media.StreamingEngine.APPEND_WINDOW_START_FUDGE_=.1,shaka.media.StreamingEngine.APPEND_WINDOW_END_FUDGE_=.01,shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_=1,shaka.routing={},shaka.routing.Walker=function(e,t,a){var r=this;this.implementation_=a,this.currentlyAt_=e,this.currentlyWith_=t,this.waitForWork_=null,this.requests_=[],this.currentStep_=this.currentRoute_=null,this.mainLoopPromise_=Promise.resolve().then(function(){return r.mainLoop_()}),this.destroyer_=new shaka.util.Destroyer(function(){return r.doDestroy_()})},shaka.routing.Walker.prototype.getCurrentPayload=function(){return this.currentlyWith_},shaka.routing.Walker.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.routing.Walker.prototype.doDestroy_=function(){var t,a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return r.currentStep_&&r.currentStep_.abort(),r.unblockMainLoop_(),e.yield(r.mainLoopPromise_,2);for(r.currentRoute_&&r.currentRoute_.listeners.onCancel(),t=$jscomp.makeIterator(r.requests_),a=t.next();!a.done;a=t.next())a.value.listeners.onCancel();r.currentRoute_=null,r.requests_=[],r.implementation_=null,e.jumpToEnd()})},shaka.routing.Walker.prototype.startNewRoute=function(e){var t={onStart:function(){},onEnd:function(){},onCancel:function(){},onError:function(e){},onSkip:function(){},onEnter:function(){}};return this.requests_.push({create:e,listeners:t}),this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),t},shaka.routing.Walker.prototype.mainLoop_=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return t.destroyer_.destroyed()?e.jumpTo(0):e.yield(t.doOneThing_(),1)})},shaka.routing.Walker.prototype.doOneThing_=function(){return this.tryNewRoute_()?Promise.resolve():this.currentRoute_?this.takeNextStep_():(goog.asserts.assert(null==this.waitForWork_,"We should not have a promise yet."),this.implementation_.onIdle(this.currentlyAt_),this.waitForWork_=new shaka.util.PublicPromise)},shaka.routing.Walker.prototype.tryNewRoute_=function(){if(goog.asserts.assert(null==this.currentStep_,"We should never have a current step between taking steps."),0==this.requests_.length||this.currentRoute_&&!this.currentRoute_.interruptible)return!1;this.currentRoute_&&(this.currentRoute_.listeners.onCancel(),this.currentRoute_=null);var e=this.requests_.shift(),t=e.create(this.currentlyWith_);return t?(e.listeners.onStart(),this.currentRoute_={node:t.node,payload:t.payload,interruptible:t.interruptible,listeners:e.listeners}):e.listeners.onSkip(),!0},shaka.routing.Walker.prototype.takeNextStep_=function(){var t,a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return goog.asserts.assert(r.currentRoute_,"We need a current route to take the next step."),r.currentlyAt_=r.implementation_.getNext(r.currentlyAt_,r.currentlyWith_,r.currentRoute_.node,r.currentRoute_.payload),r.currentRoute_.listeners.onEnter(r.currentlyAt_),e.setCatchFinallyBlocks(2),r.currentStep_=r.implementation_.enterNode(r.currentlyAt_,r.currentlyWith_,r.currentRoute_.payload),e.yield(r.currentStep_.promise,4);case 4:r.currentStep_=null,r.currentlyAt_==r.currentRoute_.node&&(r.currentRoute_.listeners.onEnd(),r.currentRoute_=null),e.leaveTryBlock(0);break;case 2:return(t=e.enterCatchBlock()).code==shaka.util.Error.Code.OPERATION_ABORTED?(goog.asserts.assert(r.currentRoute_.interruptible,"Do not put abortable steps in non-interruptible routes!"),r.currentRoute_.listeners.onCancel()):r.currentRoute_.listeners.onError(t),r.currentRoute_=null,r.currentStep_=null,a=r,e.yield(r.implementation_.handleError(r.currentlyWith_,t),5);case 5:a.currentlyAt_=e.yieldResult,e.jumpToEnd()}})},shaka.routing.Walker.prototype.unblockMainLoop_=function(){this.waitForWork_&&(this.waitForWork_.resolve(),this.waitForWork_=null)},shaka.text.SimpleTextDisplayer=function(e){this.textTrack_=null;for(var t=$jscomp.makeIterator(Array.from(e.textTracks)),a=t.next();!a.done;a=t.next())(a=a.value).mode="disabled",a.label==shaka.Player.TextTrackLabel&&(this.textTrack_=a);this.textTrack_||(this.textTrack_=e.addTextTrack("subtitles",shaka.Player.TextTrackLabel)),this.textTrack_.mode="hidden"},shaka.text.SimpleTextDisplayer.prototype.remove=function(t,a){return!!this.textTrack_&&(shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(e){return e.startTime<a&&e.endTime>t}),!0)},shaka.text.SimpleTextDisplayer.prototype.append=function(e){for(var a=function e(t){var a=[],r=t.fontWeight>=shaka.text.Cue.fontWeight.BOLD,n=t.fontStyle==shaka.text.Cue.fontStyle.ITALIC,i=t.textDecoration.includes(shaka.text.Cue.textDecoration.UNDERLINE);return r&&a.push("b"),n&&a.push("i"),i&&a.push("u"),r=a.reduce(function(e,t){return e+"<"+t+">"},""),a=a.reduceRight(function(e,t){return e+"</"+t+">"},""),t.lineBreak||t.spacer?(t.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.extern.Cue","Please use lineBreak instead of spacer."),"\n"):t.nestedCues.length?t.nestedCues.map(e).join(""):r+t.payload+a},t=e.map(function(e){var t;return e.nestedCues.length?((t=e.clone()).nestedCues=[],t.payload=a(e),t):e}),r=[],n=(e=this.textTrack_.cues?Array.from(this.textTrack_.cues):[],{}),i=(t=$jscomp.makeIterator(t)).next();!i.done;n={$jscomp$loop$prop$inCue$621:n.$jscomp$loop$prop$inCue$621},i=t.next())n.$jscomp$loop$prop$inCue$621=i.value,e.some(function(t){return function(e){return e.startTime==t.$jscomp$loop$prop$inCue$621.startTime&&e.endTime==t.$jscomp$loop$prop$inCue$621.endTime&&e.text==t.$jscomp$loop$prop$inCue$621.payload}}(n))||(i=shaka.text.SimpleTextDisplayer.convertToTextTrackCue_(n.$jscomp$loop$prop$inCue$621))&&r.push(i);for(e=r.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}),n=(e=$jscomp.makeIterator(e)).next();!n.done;n=e.next())this.textTrack_.addCue(n.value)},shaka.text.SimpleTextDisplayer.prototype.destroy=function(){return this.textTrack_&&(shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(e){return!0}),this.textTrack_.mode="disabled"),this.textTrack_=null,Promise.resolve()},shaka.text.SimpleTextDisplayer.prototype.isTextVisible=function(){return"showing"==this.textTrack_.mode},shaka.text.SimpleTextDisplayer.prototype.setTextVisibility=function(e){this.textTrack_.mode=e?"showing":"hidden"},shaka.text.SimpleTextDisplayer.convertToTextTrackCue_=function(e){if(e.startTime>=e.endTime)return shaka.log.warning("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=shaka.text.Cue,a=new VTTCue(e.startTime,e.endTime,e.payload);a.lineAlign=e.lineAlign,a.positionAlign=e.positionAlign,e.size&&(a.size=e.size);try{a.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=a.align&&(a.align="middle"),e.writingMode==t.writingMode.VERTICAL_LEFT_TO_RIGHT?a.vertical="lr":e.writingMode==t.writingMode.VERTICAL_RIGHT_TO_LEFT&&(a.vertical="rl"),e.lineInterpretation==t.lineInterpretation.PERCENTAGE&&(a.snapToLines=!1),null!=e.line&&(a.line=e.line),null!=e.position&&(a.position=e.position),a},shaka.text.SimpleTextDisplayer.removeWhere_=function(e,t){var a=e.mode,r="showing"==a?"showing":"hidden";e.mode=r,goog.asserts.assert(e.cues,'Cues should be accessible when mode is set to "'+r+'".');for(var n=(r=$jscomp.makeIterator(Array.from(e.cues))).next();!n.done;n=r.next())(n=n.value)&&t(n)&&e.removeCue(n);e.mode=a},goog.exportSymbol("shaka.text.SimpleTextDisplayer",shaka.text.SimpleTextDisplayer),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"setTextVisibility",shaka.text.SimpleTextDisplayer.prototype.setTextVisibility),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"isTextVisible",shaka.text.SimpleTextDisplayer.prototype.isTextVisible),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"destroy",shaka.text.SimpleTextDisplayer.prototype.destroy),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"append",shaka.text.SimpleTextDisplayer.prototype.append),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"remove",shaka.text.SimpleTextDisplayer.prototype.remove),shaka.util.Dom=function(){},shaka.util.Dom.createHTMLElement=function(e){return document.createElement(e)},shaka.util.Dom.createButton=function(){return document.createElement("button")},shaka.util.Dom.asHTMLElement=function(e){return e},shaka.util.Dom.asHTMLMediaElement=function(e){return e},shaka.util.Dom.getElementByClassName=function(e,t){t=t.getElementsByClassName(e);return goog.asserts.assert(1==t.length,"Should only be one element with class name "+e),shaka.util.Dom.asHTMLElement(t[0])},shaka.util.Dom.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},goog.exportSymbol("shaka.util.Dom",shaka.util.Dom),goog.exportProperty(shaka.util.Dom,"removeAllChildren",shaka.util.Dom.removeAllChildren),shaka.text.UITextDisplayer=function(e,t){var a=this;goog.asserts.assert(t,"videoContainer should be valid."),this.isTextVisible_=!1,this.cues_=[],this.cuesObj={},this.video_=e,this.pos_=-1,this.videoContainer_=t,this.textContainer_=shaka.util.Dom.createHTMLElement("div"),this.textContainer_.classList.add("text-container"),this.textContainer_.style.position="absolute",this.textContainer_.style.width="80%",this.textContainer_.style.height="100%",this.textContainer_.style.marginLeft="10%",this.textContainer_.style.zIndex=99,this.textContainer_.classList.add("shaka-text-container"),this.textContainer_.style.textAlign="center",this.textContainer_.style.display="flex",this.textContainer_.style.flexDirection="column",this.textContainer_.style.alignItems="center",this.textContainer_.style.justifyContent="flex-end",this.videoContainer_.appendChild(this.textContainer_),this.captionsTimer_=null,this.currentCuesMap_=new Map,this.eventManager_=new shaka.util.EventManager,this.eventManager_.listen(document,"fullscreenchange",function(){a.updateCaptions_(!0)}),this.resizeObserver_=null,"ResizeObserver"in window&&(this.resizeObserver_=new ResizeObserver(function(){a.updateCaptions_(!0)}),this.resizeObserver_.observe(this.textContainer_))},shaka.text.UITextDisplayer.prototype.append=function(e,t){var r=this;if(void 0!==t&&t)0<e.length&&e.forEach(function(e){var t=Math.floor(e.startTime);r.cuesObj[t]||(r.cuesObj[t]=[]),r.cuesObj[t].push(e)}),this.captionsTimer_||(this.captionsTimer_=new shaka.util.Timer(function(){if((r.isTextVisible_||(r.cues_=[],r.captionsTimer_.stop(),r.captionsTimer_=null),r.pos_!==Math.floor(r.video_.currentTime))&&(r.pos_=Math.floor(r.video_.currentTime),0<r.cues_.length&&(e=r.cues_.filter(function(e){return r.video_.currentTime<e.endTime}),r.cues_=e),r.cuesObj[r.pos_]))for(var e={},t=$jscomp.makeIterator(r.cuesObj[r.pos_]),a=t.next();!a.done;e={$jscomp$loop$prop$cue$479$625:e.$jscomp$loop$prop$cue$479$625},a=t.next())e.$jscomp$loop$prop$cue$479$625=a.value,r.cues_.some(function(t){return function(e){return e.payload==t.$jscomp$loop$prop$cue$479$625.payload&&e.startTime==t.$jscomp$loop$prop$cue$479$625.startTime&&e.endTime==t.$jscomp$loop$prop$cue$479$625.endTime}}(e))||r.cues_.push(e.$jscomp$loop$prop$cue$479$625);r.updateCaptions_()}).tickEvery(.2));else{this.isTextVisible_&&!this.captionsTimer_&&(this.captionsTimer_=new shaka.util.Timer(function(){r.updateCaptions_()}).tickEvery(.25));for(var a={},n=$jscomp.makeIterator(e),i=n.next();!i.done;a={$jscomp$loop$prop$cue$623:a.$jscomp$loop$prop$cue$623},i=n.next())a.$jscomp$loop$prop$cue$623=i.value,this.cues_.some(function(t){return function(e){return e.payload==t.$jscomp$loop$prop$cue$623.payload&&e.startTime==t.$jscomp$loop$prop$cue$623.startTime&&e.endTime==t.$jscomp$loop$prop$cue$623.endTime}}(a))||this.cues_.push(a.$jscomp$loop$prop$cue$623);this.updateCaptions_()}},shaka.text.UITextDisplayer.prototype.destroy=function(){this.videoContainer_.removeChild(this.textContainer_),this.textContainer_=null,this.isTextVisible_=!1,this.cues_=[],this.cuesObj={},this.captionsTimer_&&(this.captionsTimer_.stop(),this.captionsTimer_=null),this.currentCuesMap_.clear(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.resizeObserver_&&(this.resizeObserver_.disconnect(),this.resizeObserver_=null)},shaka.text.UITextDisplayer.prototype.remove=function(t,a){return!!this.textContainer_&&(this.captionsTimer_&&(this.captionsTimer_.stop(),this.captionsTimer_=null),this.cues_=this.cues_.filter(function(e){return e.startTime<t||e.endTime>=a}),0===t&&1/0===a&&(this.cuesObj={}),this.updateCaptions_(),!0)},shaka.text.UITextDisplayer.prototype.isTextVisible=function(){return this.isTextVisible_},shaka.text.UITextDisplayer.prototype.setTextVisibility=function(e){this.isTextVisible_=e},shaka.text.UITextDisplayer.prototype.binarySearch=function(e,t,a){var r,n;return a<t?-1:(n=e[r=Math.floor((t+a)/2)],this.video_.currentTime>=n[0].startTime&&this.video_.currentTime<=n[n.length-1].endTime?r:(this.video_.currentTime<n[0].startTime?a=r-1:t=r+1,this.binarySearch(e,t,a)))},shaka.text.UITextDisplayer.prototype.updateCaptions_=function(e){var t=this;e=void 0!==e&&e;for(var a=this.video_.currentTime,r=function(e){return t.cues_.includes(e)&&t.isTextVisible_&&e.startTime<=a&&e.endTime>a},n=$jscomp.makeIterator(this.currentCuesMap_.keys()),i=n.next();!i.done;i=n.next()){var o,i=i.value;r(i)&&!e||(o=this.currentCuesMap_.get(i),this.textContainer_.removeChild(o),this.currentCuesMap_.delete(i))}for(e=new Set(this.currentCuesMap_.values()),i=(n=$jscomp.makeIterator(Array.from(this.textContainer_.childNodes))).next();!i.done;i=n.next())i=i.value,e.has(i)||this.textContainer_.removeChild(i);for(e=this.cues_.filter(function(e){return r(e)&&!t.currentCuesMap_.has(e)}).sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),i=(e=$jscomp.makeIterator(e)).next();!i.done;i=e.next())n=i.value,i=this.displayCue_(this.textContainer_,n,!1),this.currentCuesMap_.set(n,i)},shaka.text.UITextDisplayer.prototype.displayCue_=function(e,t,a){var r=a?"span":"div",n=(this.textContainer_.style.zIndex=99,(t.lineBreak||t.spacer)&&(t.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.extern.Cue","Please use lineBreak instead of spacer."),r="br"),shaka.util.Dom.createHTMLElement(r));for("br"!=r&&this.setCaptionStyles_(n,t,a),r=n,!a&&t.nestedCues.length&&((r=shaka.util.Dom.createHTMLElement("span")).classList.add("shaka-text-wrapper"),n.appendChild(r)),a=(t=$jscomp.makeIterator(t.nestedCues)).next();!a.done;a=t.next())this.displayCue_(r,a.value,!0);return e.appendChild(n),n},shaka.text.UITextDisplayer.prototype.setCaptionStyles_=function(e,t,a){var r=shaka.text.Cue,n=e.style,i=0==t.nestedCues.length;n.whiteSpace="pre-line",navigator.userAgent.includes("PlayStation 5")&&(n.whiteSpace="pre-wrap",n.width="100%",n.paddingTop="10%");for(var o=!0,s=t.payload;o;){if(c=s.match(/<[a-z]*>/gi),o=s.match(/<\/[a-z]*>/gi),!c){d?((s=shaka.util.Dom.createHTMLElement("span")).textContent=d,e.appendChild(s)):s&&((d=shaka.util.Dom.createHTMLElement("span")).textContent=s,e.appendChild(d));break}var l,u=s.indexOf(c[0]),n=s.indexOf(o[0])+o[0].length,c=s.substring(0,u),d=s.substring(n),u=(o=s.substring(u).replace(d,"")).substring(1,o.match(">").index);c&&((l=shaka.util.Dom.createHTMLElement("span")).textContent=c,e.appendChild(l)),o=(o=o.replace("<"+u+">","")).replace("</"+u+">",""),(c=shaka.util.Dom.createHTMLElement(u)).textContent=o,e.appendChild(c),s=s.substring(n),n=c.style}n.backgroundColor=t.backgroundColor,n.border=t.border,n.color=t.color,n.direction=t.direction,n.opacity=t.opacity,n.paddingLeft=shaka.text.UITextDisplayer.convertLengthValue_(t.linePadding,t,this.videoContainer_),n.paddingRight=shaka.text.UITextDisplayer.convertLengthValue_(t.linePadding,t,this.videoContainer_),t.backgroundImage&&(n.backgroundImage="url('"+t.backgroundImage+"')",n.backgroundRepeat="no-repeat",n.backgroundSize="contain",n.backgroundPosition="center",""==t.backgroundColor)&&(n.backgroundColor="transparent"),a?(n.display="inline",n.maxWidth="auto"):(n.display="flex",n.flexDirection="column",n.alignItems="center",n.justifyContent=t.displayAlign==r.displayAlign.BEFORE?"flex-start":t.displayAlign==r.displayAlign.CENTER?"center":"flex-end"),i||(n.margin="0"),n.marginBottom="7%",n.textShadow="4px 3px 0 #7A7A7A",n.fontFamily=t.fontFamily,n.fontWeight=t.fontWeight.toString(),n.fontStyle=t.fontStyle,n.letterSpacing=t.letterSpacing,void 0!==t.fontSize&&null!==t.fontSize&&""!==t.fontSize?n.fontSize=shaka.text.UITextDisplayer.convertLengthValue_(t.fontSize,t,this.videoContainer_):(e=this.videoContainer_.getBoundingClientRect().width)===window.screen.width?n.fontSize="2.5vw":(e=e/window.screen.width+1,n.fontSize=e.toString()+"vw"),t.line?t.lineInterpretation==r.lineInterpretation.PERCENTAGE&&(t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?t.lineAlign==r.lineAlign.START?n.top=t.line+"%":t.lineAlign==r.lineAlign.END&&(n.bottom=t.line+"%"):t.writingMode==r.writingMode.VERTICAL_LEFT_TO_RIGHT?t.lineAlign==r.lineAlign.START?n.left=t.line+"%":t.lineAlign==r.lineAlign.END&&(n.right=t.line+"%"):t.lineAlign==r.lineAlign.START?n.right=t.line+"%":t.lineAlign==r.lineAlign.END&&(n.left=t.line+"%")):t.region&&t.region.id&&(!a&&!i||t.backgroundImage)&&(a=shaka.text.CueRegion.units.PERCENTAGE,i=t.region.widthUnits==a?"%":"px",e=t.region.viewportAnchorUnits==a?"%":"px",n.height=t.region.height+(t.region.heightUnits==a?"%":"px"),n.width=t.region.width+i,n.top=t.region.viewportAnchorY+e,n.left=t.region.viewportAnchorX+e),n.lineHeight=t.lineHeight,t.position?t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?n.left=t.position.toString()+"%":n.top=t.position.toString()+"%":t.textAlign?"left"==t.textAlign?t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?n.left="0%":n.top="100%":"right"==t.textAlign?t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?n.right="0%":n.top="0%":t.writingMode!=r.writingMode.HORIZONTAL_TOP_TO_BOTTOM&&(n.top="50%",n.transform="translateY(-50%)"):t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?(n.left="50%",n.transform="translateX(-50%)"):(n.top="50%",n.transform="translateY(-50%)"),t.positionAlign==r.positionAlign.LEFT?n.cssFloat="left":t.positionAlign==r.positionAlign.RIGHT&&(n.cssFloat="right"),n.textAlign=t.textAlign,n.textDecoration=t.textDecoration.join(" "),n.writingMode=t.writingMode,"writingMode"in document.documentElement.style&&n.writingMode==t.writingMode||(n.webkitWritingMode=t.writingMode),t.size&&(t.writingMode==r.writingMode.HORIZONTAL_TOP_TO_BOTTOM?n.width=t.size+"%":n.height=t.size+"%"),n.overflow="visible",navigator.userAgent.includes("PlayStation 5")&&(n.textShadow="black 3px 3px",n.whiteSpace="pre-line")},shaka.text.UITextDisplayer.getLengthValueInfo_=function(e){return(e=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(e[1]),unit:e[2]}:null},shaka.text.UITextDisplayer.convertLengthValue_=function(e,t,a){var r=shaka.text.UITextDisplayer.getLengthValueInfo_(e);if(!r)return e;var n=r.value;switch(r.unit){case"%":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(n/100,t,a);case"c":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(n,t,a);default:return e}},shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_=function(e,t,a){return a.clientHeight*e/t.cellResolution.rows+"px"},goog.exportSymbol("shaka.text.UITextDisplayer",shaka.text.UITextDisplayer),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"setTextVisibility",shaka.text.UITextDisplayer.prototype.setTextVisibility),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"isTextVisible",shaka.text.UITextDisplayer.prototype.isTextVisible),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"remove",shaka.text.UITextDisplayer.prototype.remove),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"destroy",shaka.text.UITextDisplayer.prototype.destroy),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"append",shaka.text.UITextDisplayer.prototype.append),shaka.text.WebVttGenerator=function(){},shaka.text.WebVttGenerator.convert=function(e){function i(e){var t=[],a=e.fontWeight>=shaka.text.Cue.fontWeight.BOLD,r=e.fontStyle==shaka.text.Cue.fontStyle.ITALIC,n=e.textDecoration.includes(shaka.text.Cue.textDecoration.UNDERLINE);return a&&t.push("b"),r&&t.push("i"),n&&t.push("u"),a=t.reduce(function(e,t){return e+"<"+t+">"},""),t=t.reduceRight(function(e,t){return e+"</"+t+">"},""),e.lineBreak||e.spacer?(e.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.text.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(i).join(""):a+e.payload+t}var t=e.map(function(e){var t;return e.nestedCues.length?((t=e.clone()).nestedCues=[],t.payload=i(e),t):e});e="WEBVTT\n\n";for(var a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next()){var r=function(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),r=Math.floor(e%60);return(t<10?"0":"")+t+":"+(a<10?"0":"")+a+":"+(r<10?"0":"")+r+"."+((e=Math.floor(1e3*e%1e3))<100?e<10?"00":"0":"")+e};e=(e+=r((a=a.value).startTime)+" --\x3e "+r(a.endTime)+"\n")+(a.payload+"\n\n")}return e},goog.exportSymbol("shaka.text.WebVttGenerator",shaka.text.WebVttGenerator),shaka.util.CmcdManager=function(e,t){this.playerInterface_=e,this.config_=t,this.sid_="",this.sf_=void 0,this.playbackStarted_=!1,this.buffering_=!0,this.starved_=!1},shaka.util.CmcdManager.prototype.setBuffering=function(e){e||this.playbackStarted_||(this.playbackStarted_=!0),this.playbackStarted_&&e&&(this.starved_=!0),this.buffering_=e},shaka.util.CmcdManager.prototype.applyManifestData=function(e,t){try{this.config_.enabled&&(this.sf_=t.format,this.apply_(e,{ot:shaka.util.CmcdManager.ObjectType.MANIFEST,su:!this.playbackStarted_}))}catch(e){shaka.log.warnOnce("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},shaka.util.CmcdManager.prototype.applySegmentData=function(e,t){try{var a,r,n;this.config_.enabled&&((a={d:1e3*t.duration,st:this.getStreamType_()}).ot=this.getObjectType_(t),r=shaka.util.CmcdManager.ObjectType,(n=a.ot===r.VIDEO||a.ot===r.AUDIO||a.ot===r.MUXED||a.ot===r.TIMED_TEXT)&&(a.bl=this.getBufferLength_(t.type)),t.bandwidth&&(a.br=t.bandwidth/1e3),n&&a.ot!==r.TIMED_TEXT&&(a.tb=this.getTopBandwidth_(a.ot)/1e3),this.apply_(e,a))}catch(e){shaka.log.warnOnce("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}},shaka.util.CmcdManager.prototype.applyTextData=function(e){try{this.config_.enabled&&this.apply_(e,{ot:shaka.util.CmcdManager.ObjectType.CAPTION,su:!0})}catch(e){shaka.log.warnOnce("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}},shaka.util.CmcdManager.prototype.appendSrcData=function(t,e){try{var a,r;return this.config_.enabled?((a=this.createData_()).ot=this.getObjectTypeFromMimeType_(e),a.su=!0,r=shaka.util.CmcdManager.toQuery(a),shaka.util.CmcdManager.appendQueryToUri(t,r)):t}catch(e){return shaka.log.warnOnce("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}},shaka.util.CmcdManager.prototype.appendTextTrackData=function(t){try{var e,a;return this.config_.enabled?((e=this.createData_()).ot=shaka.util.CmcdManager.ObjectType.CAPTION,e.su=!0,a=shaka.util.CmcdManager.toQuery(e),shaka.util.CmcdManager.appendQueryToUri(t,a)):t}catch(e){return shaka.log.warnOnce("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),t}},shaka.util.CmcdManager.prototype.createData_=function(){return this.sid_||(this.sid_=this.config_.sessionId||window.crypto.randomUUID()),{v:shaka.util.CmcdManager.Version,sf:this.sf_,sid:this.sid_,cid:this.config_.contentId,mtp:this.playerInterface_.getBandwidthEstimate()/1e3}},shaka.util.CmcdManager.prototype.apply_=function(e,t,a){var r,n;t=void 0===t?{}:t,a=void 0===a?this.config_.useHeaders:a,this.config_.enabled&&(Object.assign(t,this.createData_()),t.pr=this.playerInterface_.getPlaybackRate(),r=t.ot===shaka.util.CmcdManager.ObjectType.VIDEO||t.ot===shaka.util.CmcdManager.ObjectType.MUXED,this.starved_&&r&&(t.bs=!0,t.su=!0,this.starved_=!1),null==t.su&&(t.su=this.buffering_),a?(t=shaka.util.CmcdManager.toHeaders(t),Object.keys(t).length&&Object.assign(e.headers,t)):(n=shaka.util.CmcdManager.toQuery(t))&&(e.uris=e.uris.map(function(e){return shaka.util.CmcdManager.appendQueryToUri(e,n)})))},shaka.util.CmcdManager.prototype.getObjectType_=function(e){var t=e.type;return e.init?shaka.util.CmcdManager.ObjectType.INIT:"video"==t?e.codecs.includes(",")?shaka.util.CmcdManager.ObjectType.MUXED:shaka.util.CmcdManager.ObjectType.VIDEO:"audio"==t?shaka.util.CmcdManager.ObjectType.AUDIO:"text"==t?"application/mp4"===e.mimeType?shaka.util.CmcdManager.ObjectType.TIMED_TEXT:shaka.util.CmcdManager.ObjectType.CAPTION:void 0},shaka.util.CmcdManager.prototype.getObjectTypeFromMimeType_=function(e){switch(e){case"video/webm":case"video/mp4":return shaka.util.CmcdManager.ObjectType.MUXED;case"application/x-mpegurl":return shaka.util.CmcdManager.ObjectType.MANIFEST}},shaka.util.CmcdManager.prototype.getBufferLength_=function(e){var t;return(e=this.playerInterface_.getBufferedInfo()[e]).length&&(t=this.playerInterface_.getCurrentTime(),e=e.find(function(e){return e.start<=t&&e.end>=t}))?1e3*(e.end-t):NaN},shaka.util.CmcdManager.prototype.getStreamType_=function(){return this.playerInterface_.isLive()?shaka.util.CmcdManager.StreamType.LIVE:shaka.util.CmcdManager.StreamType.VOD},shaka.util.CmcdManager.prototype.getTopBandwidth_=function(e){var t=this.playerInterface_.getVariantTracks();if(!t.length)return NaN;for(var a=t[0],r=(t=$jscomp.makeIterator(t)).next();!r.done;r=t.next())"variant"===(r=r.value).type&&r.bandwidth>a.bandwidth&&(a=r);switch(e){case(t=shaka.util.CmcdManager.ObjectType).VIDEO:return a.videoBandwidth||NaN;case t.AUDIO:return a.audioBandwidth||NaN;default:return a.bandwidth}},shaka.util.CmcdManager.serialize=function(e){for(var t=[],a=function(e){return Math.round(e)},r={br:a,d:a,bl:r=function(e){return 100*a(e/100)},dl:r,mtp:r,nor:function(e){return encodeURIComponent(e)},rtp:r,tb:a},n=Object.keys(e||{}).sort(),i=(n=$jscomp.makeIterator(n)).next();!i.done;i=n.next()){var o,s,l=e[i=i.value];s=l,Number.isNaN(s)||null==s||""===s||!1===s||"v"===i&&1===l||"pr"==i&&1===l||(s="string"===(o=(s=void 0)===(l=(o=r[i])?o(l):l)?"undefined":_typeof(l))&&"ot"!==i&&"sf"!==i&&"st"!==i?i+"="+JSON.stringify(l):"boolean"===o?i:"symbol"===o?i+"="+l.description:i+"="+l,t.push(s))}return t.join(",")},shaka.util.CmcdManager.toHeaders=function(e){for(var t=Object.keys(e),a={},r=["Object","Request","Session","Status"],n=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=$jscomp.makeIterator(t)).next();!o.done;o=t.next())n[null!=i[o=o.value]?i[o]:1][o]=e[o];for(e=0;e<n.length;e++)(i=shaka.util.CmcdManager.serialize(n[e]))&&(a["CMCD-"+r[e]]=i);return a},shaka.util.CmcdManager.toQuery=function(e){return"CMCD="+encodeURIComponent(shaka.util.CmcdManager.serialize(e))},shaka.util.CmcdManager.appendQueryToUri=function(e,t){var a;return!t||e.includes("offline:")?e:(a=e.includes("?")?"&":"?",e+a+t)},shaka.util.CmcdManager.ObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},shaka.util.CmcdManager.StreamType={VOD:"v",LIVE:"l"},shaka.util.CmcdManager.StreamingFormat={DASH:"d",HLS:"h",SMOOTH:"s",OTHER:"o"},goog.exportSymbol("shaka.util.CmcdManager.StreamingFormat",shaka.util.CmcdManager.StreamingFormat),shaka.util.CmcdManager.Version=1,shaka.util.ConfigUtils=function(){},shaka.util.ConfigUtils.mergeConfigObjects=function(e,t,a,r,n){goog.asserts.assert(e,"Destination config must not be null!");var i,o=n in r,s=!0;for(i in t){var l=n+"."+i,u=o?r[n]:a[i];o||i in a?void 0===t[i]?void 0===u||o?delete e[i]:e[i]=shaka.util.ObjectUtils.cloneObject(u):u.constructor==Object&&t[i]&&t[i].constructor==Object?(e[i]||(e[i]=shaka.util.ObjectUtils.cloneObject(u)),l=shaka.util.ConfigUtils.mergeConfigObjects(e[i],t[i],u,r,l),s=s&&l):_typeof(t[i])!=(void 0===u?"undefined":_typeof(u))||null==t[i]||"function"!=typeof t[i]&&t[i].constructor!=u.constructor?(shaka.log.alwaysError("Invalid config, wrong type for "+l),s=!1):("function"==typeof a[i]&&a[i].length!=t[i].length&&shaka.log.alwaysWarn("Unexpected number of arguments for "+l),e[i]=t[i]):(shaka.log.alwaysError("Invalid config, unrecognized key "+l),s=!1)}return s},shaka.util.ConfigUtils.convertToConfigObject=function(e,t){for(var a={},r=a,n=0,i=0;!((n=e.indexOf(".",n))<0);)0!=n&&"\\"==e[n-1]||(r[i=e.substring(i,n).replace(/\\\./g,".")]={},r=r[i],i=n+1),n+=1;return r[e.substring(i).replace(/\\\./g,".")]=t,a},goog.exportSymbol("shaka.util.ConfigUtils",shaka.util.ConfigUtils),goog.exportProperty(shaka.util.ConfigUtils,"convertToConfigObject",shaka.util.ConfigUtils.convertToConfigObject),goog.exportProperty(shaka.util.ConfigUtils,"mergeConfigObjects",shaka.util.ConfigUtils.mergeConfigObjects),shaka.util.PlayerConfiguration=function(){},shaka.util.PlayerConfiguration.createDefault=function(){var e=1e6,t=1/0,a=(navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData)&&(t=360),{retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:shaka.media.DrmEngine.defaultInitDataTransform,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]}),r={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"}},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1},backupManifests:[]},n={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),failureCallback:function(e){return shaka.log.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:Number.MAX_SAFE_INTEGER,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1},i=((shaka.util.Platform.isLegacyEdge()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast())&&(n.gapDetectionThreshold=.5),(shaka.util.Platform.isWebOS()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast())&&(n.stallSkip=0),{trackSelectionCallback:function(t){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(t)})},downloadSizeCallback:function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?navigator.storage&&navigator.storage.estimate?e.yield(navigator.storage.estimate(),3):e.return(!0):(a=e.yieldResult,e.return(a.usage+t<.95*a.quota))})},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0}),o={drm:a,manifest:r,streaming:n,offline:i,abrFactory:function(){return new shaka.abr.SimpleAbrManager},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodec:[],preferForcedSubs:!1,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,useMediaCapabilities:!1,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return i.trackSelectionCallback=function(t){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(shaka.util.PlayerConfiguration.defaultTrackSelect(t,o.preferredAudioLanguage))})},o},shaka.util.PlayerConfiguration.mergeConfigObjects=function(e,t,a){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return shaka.util.ConfigUtils.mergeConfigObjects(e,t,a||shaka.util.PlayerConfiguration.createDefault(),r,"")},shaka.util.PlayerConfiguration.defaultTrackSelect=function(e,t){var a,r=shaka.util.ManifestParserUtils.ContentType,n=shaka.util.LanguageUtils,i=e.filter(function(e){return"variant"==e.type}),o=[],s=n.findClosestLocale(t,i.map(function(e){return e.language})),l=(0==(o=0==(o=s?i.filter(function(e){return n.normalize(e.language)==s}):o).length?i.filter(function(e){return e.primary}):o).length&&(1<new Set(i.map(function(e){return e.language})).size&&shaka.log.warning("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),o=i),o.filter(function(e){return e.height&&e.height<=480}));for(l.length&&(l.sort(function(e,t){return goog.asserts.assert(null!=e.height,"Null height"),goog.asserts.assert(null!=t.height,"Null height"),t.height-e.height}),o=l.filter(function(e){return e.height==l[0].height})),i=[],o.length&&(a=Math.floor(o.length/2),o.sort(function(e,t){return e.bandwidth-t.bandwidth}),i.push(o[a])),a=(o=$jscomp.makeIterator(e)).next();!a.done;a=o.next())(a=a.value).type!=r.TEXT&&a.type!=r.IMAGE||i.push(a);return i},goog.exportSymbol("shaka.util.PlayerConfiguration",shaka.util.PlayerConfiguration),goog.exportProperty(shaka.util.PlayerConfiguration,"mergeConfigObjects",shaka.util.PlayerConfiguration.mergeConfigObjects),shaka.util.StateHistory=function(){this.open_=null,this.closed_=[]},shaka.util.StateHistory.prototype.update=function(e){null==this.open_?this.start_(e):this.update_(e)},shaka.util.StateHistory.prototype.getTimeSpentIn=function(e){var t=0;this.open_&&this.open_.state==e&&(t+=this.open_.duration);for(var a=$jscomp.makeIterator(this.closed_),r=a.next();!r.done;r=a.next())t+=(r=r.value).state==e?r.duration:0;return t},shaka.util.StateHistory.prototype.getCopy=function(){for(var e=function(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}},t=[],a=$jscomp.makeIterator(this.closed_),r=a.next();!r.done;r=a.next())t.push(e(r.value));return this.open_&&t.push(e(this.open_)),t},shaka.util.StateHistory.prototype.start_=function(e){goog.asserts.assert(null==this.open_,"There must be no open entry in order when we start"),shaka.log.v1("Changing Player state to",e),this.open_={timestamp:this.getNowInSeconds_(),state:e,duration:0}},shaka.util.StateHistory.prototype.update_=function(e){goog.asserts.assert(this.open_,"There must be an open entry in order to update it");var t=this.getNowInSeconds_();this.open_.duration=t-this.open_.timestamp,this.open_.state!=e&&(shaka.log.v1("Changing Player state to",e),this.closed_.push(this.open_),this.open_={timestamp:t,state:e,duration:0})},shaka.util.StateHistory.prototype.getNowInSeconds_=function(){return Date.now()/1e3},shaka.util.SwitchHistory=function(){this.currentText_=this.currentVariant_=null,this.history_=[]},shaka.util.SwitchHistory.prototype.updateCurrentVariant=function(e,t){this.currentVariant_!=e&&(this.currentVariant_=e,this.history_.push({timestamp:this.getNowInSeconds_(),id:e.id,type:"variant",fromAdaptation:t,bandwidth:e.bandwidth}))},shaka.util.SwitchHistory.prototype.updateCurrentText=function(e,t){this.currentText_!=e&&(this.currentText_=e,this.history_.push({timestamp:this.getNowInSeconds_(),id:e.id,type:"text",fromAdaptation:t,bandwidth:null}))},shaka.util.SwitchHistory.prototype.getCopy=function(){for(var e=[],t=$jscomp.makeIterator(this.history_),a=t.next();!a.done;a=t.next())e.push(this.clone_(a.value));return e},shaka.util.SwitchHistory.prototype.getNowInSeconds_=function(){return Date.now()/1e3},shaka.util.SwitchHistory.prototype.clone_=function(e){return{timestamp:e.timestamp,id:e.id,type:e.type,fromAdaptation:e.fromAdaptation,bandwidth:e.bandwidth}},shaka.util.Stats=function(){this.bandwidthEstimate_=this.currentStreamBandwidth_=this.maxSegmentDurationSeconds_=this.liveLatencySeconds_=this.licenseTimeSeconds_=this.drmTimeSeconds_=this.manifestTimeSeconds_=this.loadLatencySeconds_=this.completionPercent_=this.totalCorruptedFrames_=this.totalDecodedFrames_=this.totalDroppedFrames_=this.height_=this.width_=NaN,this.stateHistory_=new shaka.util.StateHistory,this.switchHistory_=new shaka.util.SwitchHistory},shaka.util.Stats.prototype.setDroppedFrames=function(e,t){this.totalDroppedFrames_=e,this.totalDecodedFrames_=t},shaka.util.Stats.prototype.setCorruptedFrames=function(e){this.totalCorruptedFrames_=e},shaka.util.Stats.prototype.setResolution=function(e,t){this.width_=e,this.height_=t},shaka.util.Stats.prototype.setLoadLatency=function(e){this.loadLatencySeconds_=e},shaka.util.Stats.prototype.setManifestTime=function(e){this.manifestTimeSeconds_=e},shaka.util.Stats.prototype.setCompletionPercent=function(e){isNaN(this.completionPercent_)?this.completionPercent_=e:this.completionPercent_=Math.max(this.completionPercent_,e)},shaka.util.Stats.prototype.setDrmTime=function(e){this.drmTimeSeconds_=e},shaka.util.Stats.prototype.setLicenseTime=function(e){this.licenseTimeSeconds_=e},shaka.util.Stats.prototype.setLiveLatency=function(e){this.liveLatencySeconds_=e},shaka.util.Stats.prototype.setMaxSegmentDuration=function(e){this.maxSegmentDurationSeconds_=e},shaka.util.Stats.prototype.setCurrentStreamBandwidth=function(e){this.currentStreamBandwidth_=e},shaka.util.Stats.prototype.setBandwidthEstimate=function(e){this.bandwidthEstimate_=e},shaka.util.Stats.prototype.getStateHistory=function(){return this.stateHistory_},shaka.util.Stats.prototype.getSwitchHistory=function(){return this.switchHistory_},shaka.util.Stats.prototype.getBlob=function(){return{width:this.width_,height:this.height_,streamBandwidth:this.currentStreamBandwidth_,decodedFrames:this.totalDecodedFrames_,droppedFrames:this.totalDroppedFrames_,corruptedFrames:this.totalCorruptedFrames_,estimatedBandwidth:this.bandwidthEstimate_,completionPercent:this.completionPercent_,loadLatency:this.loadLatencySeconds_,manifestTimeSeconds:this.manifestTimeSeconds_,drmTimeSeconds:this.drmTimeSeconds_,playTime:this.stateHistory_.getTimeSpentIn("playing"),pauseTime:this.stateHistory_.getTimeSpentIn("paused"),bufferingTime:this.stateHistory_.getTimeSpentIn("buffering"),licenseTime:this.licenseTimeSeconds_,liveLatency:this.liveLatencySeconds_,maxSegmentDuration:this.maxSegmentDurationSeconds_,stateHistory:this.stateHistory_.getCopy(),switchHistory:this.switchHistory_.getCopy()}},shaka.util.Stats.getEmptyBlob=function(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]}},shaka.Player=function(e,t){shaka.util.FakeEventTarget.call(this);var n=this,a=(this.loadMode_=shaka.Player.LoadMode.NOT_LOADED,this.videoContainer_=this.video_=null,this.isTextVisible_=this.newTrack=!1,this.eventManager_=new shaka.util.EventManager,this.abrManagerFactory_=this.abrManager_=this.assetUri_=this.manifest_=this.parserFactory_=this.parser_=this.streamingEngine_=this.cmcdManager_=this.regionTimeline_=this.bufferObserver_=this.bufferPoller_=this.playRateController_=this.playheadObservers_=this.playhead_=this.mediaSourceEngine_=this.drmEngine_=this.networkingEngine_=null,this.nextExternalStreamId_=1e9,this.config_=this.defaultConfig_(),this.maxHwRes_={width:1/0,height:1/0},this.stats_=null,this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(this.config_.preferredAudioLanguage,this.config_.preferredVariantRole,this.config_.preferredAudioChannelCount),this.currentTextLanguage_=this.config_.preferredTextLanguage,this.currentTextRole_=this.config_.preferredTextRole,this.currentTextForced_=this.config_.preferForcedSubs,this.cleanupOnUnload_=[],t&&t(this),this.networkingEngine_=this.createNetworkingEngine(),this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS),this.adManager_=null,shaka.Player.adManagerFactory_&&(this.adManager_=shaka.util.Functional.callFactory(shaka.Player.adManagerFactory_)),this.eventManager_.listen(window,"online",function(){n.retryStreaming()}),this.detachNode_={name:"detach"},this.attachNode_={name:"attach"},this.unloadNode_={name:"unload"},this.parserNode_={name:"manifest-parser"},this.manifestNode_={name:"manifest"},this.mediaSourceNode_={name:"media-source"},this.drmNode_={name:"drm-engine"},this.loadNode_={name:"load"},this.srcEqualsDrmNode_={name:"src-equals-drm-engine"},this.srcEqualsNode_={name:"src-equals"},shaka.util.AbortableOperation),r=new Map;r.set(this.attachNode_,function(e,t){return a.notAbortable(n.onAttach_(e,t))}),r.set(this.detachNode_,function(e,t){return a.notAbortable(n.onDetach_(e,t))}),r.set(this.unloadNode_,function(e,t){return a.notAbortable(n.onUnload_(e,t))}),r.set(this.mediaSourceNode_,function(e,t){e=n.onInitializeMediaSourceEngine_(e,t);return a.notAbortable(e)}),r.set(this.parserNode_,function(e,t){e=n.onInitializeParser_(e,t);return a.notAbortable(e)}),r.set(this.manifestNode_,function(e,t){return n.onParseManifest_(e,t)}),r.set(this.drmNode_,function(e,t){e=n.onInitializeDrm_(e,t);return a.notAbortable(e)}),r.set(this.loadNode_,function(e,t){return a.notAbortable(n.onLoad_(e,t))}),r.set(this.srcEqualsDrmNode_,function(e,t){e=n.onInitializeSrcEqualsDrm_(e,t);return a.notAbortable(e)}),r.set(this.srcEqualsNode_,function(e,t){return n.onSrcEquals_(e,t)}),this.walker_=new shaka.routing.Walker(this.detachNode_,shaka.Player.createEmptyPayload_(),{getNext:function(e,t,a,r){return n.getNextStep_(e,t,a,r)},enterNode:function(e,t,a){return n.dispatchEvent(n.makeEvent_(shaka.Player.EventName.OnStateChange,{state:e.name})),r.get(e)(t,a)},handleError:function(t,a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(shaka.log.warning("The walker saw an error:"),a instanceof shaka.util.Error?shaka.log.warning("Error Code:",a.code):(shaka.log.warning("Error Message:",a.message),shaka.log.warning("Error Stack:",a.stack)),e.yield(n.onUnload_(t,shaka.Player.createEmptyPayload_()),2)):e.return(t.mediaElement?n.attachNode_:n.detachNode_)})},onIdle:function(e){n.dispatchEvent(n.makeEvent_(shaka.Player.EventName.OnStateIdle,{state:e.name}))}}),e&&this.attach(e,!0)},$jscomp.inherits(shaka.Player,shaka.util.FakeEventTarget),shaka.Player.prototype.makeEvent_=function(e,t){return new shaka.util.FakeEvent(e,t)},shaka.Player.prototype.destroy=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a.loadMode_==shaka.Player.LoadMode.DESTROYED?e.return():(a.loadMode_=shaka.Player.LoadMode.DESTROYED,t=a.walker_.startNewRoute(function(e){return{node:a.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}}),e.yield(new Promise(function(e){t.onStart=function(){shaka.log.info("Preparing to destroy walker...")},t.onEnd=function(){e()},t.onCancel=function(){goog.asserts.assert(!1,"Our final detach call should never be cancelled."),e()},t.onError=function(){goog.asserts.assert(!1,"Our final detach call should never see an error"),e()},t.onSkip=function(){goog.asserts.assert(!1,"Our final detach call should never be skipped"),e()}}),2));case 2:return e.yield(a.walker_.destroy(),3);case 3:if(a.eventManager_&&(a.eventManager_.release(),a.eventManager_=null),a.abrManagerFactory_=null,a.abrManager_=null,a.config_=null,a.stats_=null,a.videoContainer_=null,a.networkingEngine_)return e.yield(a.networkingEngine_.destroy(),5);e.jumpTo(0);break;case 5:a.networkingEngine_=null,e.jumpToEnd()}})},shaka.Player.registerSupportPlugin=function(e,t){shaka.Player.supportPlugins_[e]=t},shaka.Player.setAdManagerFactory=function(e){shaka.Player.adManagerFactory_=e},shaka.Player.isBrowserSupported=function(){var e;return window.Promise||shaka.log.alwaysWarn("A Promise implementation or polyfill is required"),window.TextDecoder&&window.TextEncoder||shaka.log.alwaysWarn("A TextDecoder/TextEncoder implementation or polyfill is required"),!(!(window.Promise&&window.Uint8Array&&window.TextDecoder&&window.TextEncoder&&Array.prototype.forEach)||shaka.util.Platform.isIE()||(e=shaka.util.Platform.safariVersion())&&e<12||!shaka.media.DrmEngine.isBrowserSupported())&&(!!shaka.util.Platform.supportsMediaSource()||shaka.util.Platform.supportsMediaType("application/x-mpegurl"))},shaka.Player.probeSupport=function(t){var a,r,n,i,o,s;return t=void 0===t||t,$jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(shaka.Player.isBrowserSupported(),"Must have basic support"),a={},t?e.yield(shaka.media.DrmEngine.probeSupport(),3):e.jumpTo(2);for(s in 2!=e.nextAddress&&(a=e.yieldResult),r=shaka.media.ManifestParser.probeSupport(),n=shaka.media.MediaSourceEngine.probeSupport(),i={manifest:r,media:n,drm:a},o=shaka.Player.supportPlugins_)i[s]=o[s]();return e.return(i)})},shaka.Player.prototype.attach=function(e,t){var a,r;return t=void 0===t||t,this.loadMode_==shaka.Player.LoadMode.DESTROYED?Promise.reject(this.createAbortLoadError_()):((a=shaka.Player.createEmptyPayload_()).mediaElement=e,r=(t=shaka.util.Platform.supportsMediaSource()?t:!1)?this.mediaSourceNode_:this.attachNode_,(e=this.walker_.startNewRoute(function(e){return{node:r,payload:a,interruptible:!1}})).onStart=function(){return shaka.log.info("Starting attach...")},this.wrapWalkerListenersWithPromise_(e))},shaka.Player.prototype.detach=function(){var e,t=this;return this.loadMode_==shaka.Player.LoadMode.DESTROYED?Promise.reject(this.createAbortLoadError_()):((e=this.walker_.startNewRoute(function(e){return{node:t.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}})).onStart=function(){return shaka.log.info("Starting detach...")},this.wrapWalkerListenersWithPromise_(e))},shaka.Player.prototype.unload=function(a){var r=this;if(a=void 0===a||a,this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());shaka.util.Platform.supportsMediaSource()||(a=!1);var n=shaka.Player.createEmptyPayload_(),e=this.walker_.startNewRoute(function(e){var t=e.mediaElement&&a?r.mediaSourceNode_:e.mediaElement?r.attachNode_:r.detachNode_;return goog.asserts.assert(t,"We should have picked a destination."),n.mediaElement=e.mediaElement,{node:t,payload:n,interruptible:!1}});return e.onStart=function(){return shaka.log.info("Starting unload...")},this.wrapWalkerListenersWithPromise_(e)},shaka.Player.prototype.load=function(e,t,a){var r=this;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Loading));var n=shaka.Player.createEmptyPayload_(),i=(n.uri=e,n.startTimeOfLoad=Date.now()/1e3,a&&(n.mimeType=a),void 0!==t&&(n.startTime=t),this.shouldUseSrcEquals_(n)?this.srcEqualsNode_:this.loadNode_),o=this.walker_.startNewRoute(function(e){return null==e.mediaElement?null:(n.mediaElement=e.mediaElement,{node:i,payload:n,interruptible:!0})});return this.stats_=new shaka.util.Stats,this.cmcdManager_=this.createCmcd_(),o.onStart=function(){return shaka.log.info("Starting load of "+e+"...")},new Promise(function(e,t){o.onSkip=function(){return t(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.NO_VIDEO_ELEMENT))},o.onEnd=function(){e(),r.parser_.setVideoElement(r.video_),r.dispatchEvent(r.makeEvent_(shaka.Player.EventName.Loaded))},o.onCancel=function(){return t(r.createAbortLoadError_())},o.onError=function(e){return t(e)}})},shaka.Player.prototype.shouldUseSrcEquals_=function(e){var t=shaka.util.Platform;if(!t.supportsMediaSource())return!0;var a=e.mimeType,r=e.uri||"";if(a=a||{mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[shaka.media.ManifestParser.getExtension(r)]){if(!(e=""!=(e.mediaElement||t.anyMediaElement()).canPlayType(a)))return!1;if(!(a=shaka.media.ManifestParser.isSupported(r,a)))return!0;if(goog.asserts.assert(e&&a,"Both native and MSE playback should be possible!"),this.config_.streaming.preferNativeHls)return!0;if(t.isApple())return this.config_.streaming.useNativeHlsOnSafari}return!1};shaka.Player.prototype.onAttach_=function(e,t){var a=this;return goog.asserts.assert(null==e.mediaElement||e.mediaElement==t.mediaElement,"The routing logic failed. MediaElement requirement failed."),null==e.mediaElement&&(e.mediaElement=t.mediaElement,this.eventManager_.listen(e.mediaElement,"error",function(e){return a.onVideoError_(e)})),this.video_=e.mediaElement,Promise.resolve()},shaka.Player.prototype.onDetach_=function(e,t){return e.mediaElement&&(this.eventManager_.unlisten(e.mediaElement,"error"),e.mediaElement=null),this.video_=null,Promise.resolve()},shaka.Player.prototype.onUnload_=function(t,e){var a,r,n,i,o,s,l,u,c,d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return d.loadMode_!=shaka.Player.LoadMode.DESTROYED&&(d.loadMode_=shaka.Player.LoadMode.NOT_LOADED),a=d.cleanupOnUnload_.map(function(e){return e()}),d.cleanupOnUnload_=[],e.yield(Promise.all(a),2);case 2:if(d.dispatchEvent(d.makeEvent_(shaka.Player.EventName.Unloading)),t.mimeType=null,t.startTime=null,t.uri=null,t.mediaElement&&(d.eventManager_.unlisten(t.mediaElement,"loadedmetadata"),d.eventManager_.unlisten(t.mediaElement,"playing"),d.eventManager_.unlisten(t.mediaElement,"pause"),d.eventManager_.unlisten(t.mediaElement,"ended"),d.eventManager_.unlisten(t.mediaElement,"ratechange")),d.playheadObservers_&&(d.playheadObservers_.release(),d.playheadObservers_=null),d.bufferPoller_&&(d.bufferPoller_.stop(),d.bufferPoller_=null),d.parser_)return e.yield(d.parser_.stop(),4);e.jumpTo(3);break;case 4:d.parser_=null,d.parserFactory_=null;case 3:if(d.abrManager_)return e.yield(d.abrManager_.stop(),5);e.jumpTo(5);break;case 5:if(d.streamingEngine_)return e.yield(d.streamingEngine_.destroy(),8);e.jumpTo(7);break;case 8:d.streamingEngine_=null;case 7:if(d.playRateController_&&(d.playRateController_.release(),d.playRateController_=null),d.playhead_&&(d.playhead_.release(),d.playhead_=null),d.mediaSourceEngine_)return e.yield(d.mediaSourceEngine_.destroy(),10);e.jumpTo(9);break;case 10:d.mediaSourceEngine_=null;case 9:if(d.adManager_&&d.adManager_.onAssetUnload(),t.mediaElement&&t.mediaElement.src)return e.yield(new Promise(function(e){return new shaka.util.Timer(e).tickAfter(.1)}),12);e.jumpTo(11);break;case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(d.drmEngine_)return e.yield(d.drmEngine_.destroy(),14);e.jumpTo(13);break;case 14:d.drmEngine_=null;case 13:if(d.assetUri_=null,d.bufferObserver_=null,d.manifest_){for(r=$jscomp.makeIterator(d.manifest_.variants),n=r.next();!n.done;n=r.next())for(i=n.value,o=$jscomp.makeIterator([i.audio,i.video]),s=o.next();!s.done;s=o.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();for(u=$jscomp.makeIterator(d.manifest_.textStreams),s=u.next();!s.done;s=u.next())(c=s.value).segmentIndex&&c.segmentIndex.release()}d.manifest_=null,d.stats_=new shaka.util.Stats,d.lastTextFactory_=null,d.updateBufferState_(),e.jumpToEnd()}})},shaka.Player.prototype.onInitializeMediaSourceEngine_=function(t,a){var r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(shaka.util.Platform.supportsMediaSource(),"We should not be initializing media source on a platform that does not support media source."),goog.asserts.assert(t.mediaElement,"We should have a media element when initializing media source."),goog.asserts.assert(t.mediaElement==a.mediaElement,"|has| and |wants| should have the same media element when initializing media source."),goog.asserts.assert(null==o.mediaSourceEngine_,"We should not have a media source engine yet."),r=new shaka.media.ClosedCaptionParser,i=o.config_.textDisplayFactory,n=shaka.util.Functional.callFactory(i),o.lastTextFactory_=i,i=o.createMediaSourceEngine(t.mediaElement,r,n,function(e,t,a){var r;o.newTrack||(r=new CustomEvent("addtrack"),o.video_.addTextTrack("metadata"),o.video_.dispatchEvent(r),o.newTrack=!0),o.processTimedMetadataMediaSrc_(e,t,a)}),e.yield(i.open(),2);o.mediaSourceEngine_=i,e.jumpToEnd()})},shaka.Player.prototype.onInitializeParser_=function(t,a){var r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(t.mediaElement,"We should have a media element when initializing the parser."),goog.asserts.assert(t.mediaElement==a.mediaElement,"|has| and |wants| should have the same media element when initializing the parser."),goog.asserts.assert(o.networkingEngine_,"Need networking engine when initializing the parser."),goog.asserts.assert(o.config_,"Need player config when initializing the parser."),t.mimeType=a.mimeType,t.uri=a.uri,goog.asserts.assert(t.uri,"We should have an asset uri when initializing the parsing."),i=t.uri,r=o.networkingEngine_,o.assetUri_=i,n=o,e.yield(shaka.media.ManifestParser.getFactory(i,r,o.config_.manifest.retryParameters,t.mimeType),2);n.parserFactory_=e.yieldResult,goog.asserts.assert(o.parserFactory_,"Must have manifest parser"),o.parser_=shaka.util.Functional.callFactory(o.parserFactory_),i=shaka.util.ObjectUtils.cloneObject(o.config_.manifest),a.mediaElement&&"AUDIO"===a.mediaElement.nodeName&&(i.disableVideo=!0),o.parser_.configure(i),e.jumpToEnd()})},shaka.Player.prototype.onParseManifest_=function(e,t){var a,r,n=this,i=(goog.asserts.assert(e.mimeType==t.mimeType,"|has| and |wants| should have the same mime type when parsing."),goog.asserts.assert(e.uri==t.uri,"|has| and |wants| should have the same uri when parsing."),goog.asserts.assert(e.uri,"|has| should have a valid uri when parsing."),goog.asserts.assert(e.uri==this.assetUri_,"|has.uri| should match the cached asset uri."),goog.asserts.assert(this.networkingEngine_,"Need networking engine to parse manifest."),goog.asserts.assert(this.config_,"Need player config to parse manifest."),goog.asserts.assert(this.parser_,"|this.parser_| should have been set in an earlier step."),e.uri),t=this.networkingEngine_,o=(this.regionTimeline_=new shaka.media.RegionTimeline(function(){return n.seekRange()}),this.regionTimeline_.setListeners(function(e){n.onRegionEvent_(shaka.Player.EventName.TimelineRegionAdded,e),n.adManager_&&n.adManager_.onDashTimedMetadata(e)}),{modifyManifestRequest:function(e,t){n.cmcdManager_.applyManifestData(e,t)},modifySegmentRequest:function(e,t){n.cmcdManager_.applySegmentData(e,t)},networkingEngine:t,filter:function(t){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(n.filterManifest_(t))})},makeTextStreamsForClosedCaptions:function(e){return n.makeTextStreamsForClosedCaptions_(e)},onTimelineRegionAdded:function(e){return n.regionTimeline_.addRegion(e)},onEvent:function(e){return n.dispatchEvent(e)},onError:function(e){return n.onError_(e)},isLowLatencyMode:function(){return n.isLowLatencyMode_()},isAutoLowLatencyMode:function(){return n.isAutoLowLatencyMode_()},enableLowLatencyMode:function(){n.configure("streaming.lowLatencyMode",!0)}}),s=Date.now()/1e3;return new shaka.util.AbortableOperation($jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=n,e.yield(n.parser_.start(i,o),2);if(a.manifest_=e.yieldResult,r=n.makeEvent_(shaka.Player.EventName.ManifestParsed),n.dispatchEvent(r),0==n.manifest_.variants.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.NO_VARIANTS);shaka.Player.filterForAVVariants_(n.manifest_),r=Date.now()/1e3,r=r-s,n.stats_.setManifestTime(r),e.jumpToEnd()}),function(){return shaka.log.info("Aborting parser step..."),n.parser_.stop()})},shaka.Player.prototype.onInitializeDrm_=function(t,a){var r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(goog.asserts.assert(t.mimeType==a.mimeType,"The load graph should have ensured the mime types matched."),goog.asserts.assert(t.uri==a.uri,"The load graph should have ensured the uris matched"),goog.asserts.assert(i.networkingEngine_,"|onInitializeDrm_| should never be called after |destroy|"),goog.asserts.assert(i.config_,"|onInitializeDrm_| should never be called after |destroy|"),goog.asserts.assert(i.manifest_,"|this.manifest_| should have been set in an earlier step."),goog.asserts.assert(t.mediaElement,"We should have a media element when initializing the DRM Engine."),r=Date.now()/1e3,n=!0,i.drmEngine_=i.createDrmEngine({netEngine:i.networkingEngine_,onError:function(e){i.onError_(e)},onKeyStatus:function(e){i.onKeyStatus_(e)},onExpirationUpdated:function(e,t){i.onExpirationUpdated_(e,t)},onEvent:function(e){i.dispatchEvent(e),e.type==shaka.Player.EventName.DrmSessionUpdate&&n&&(n=!1,e=Date.now()/1e3-r,i.stats_.setDrmTime(e))}}),i.config_.useMediaCapabilities){e.jumpTo(2);break}return e.yield(shaka.util.StreamUtils.filterManifestByMediaSource(i.manifest_),2);case 2:return i.drmEngine_.configure(i.config_.drm),e.yield(i.drmEngine_.initForPlayback(i.manifest_.variants,i.manifest_.offlineSessionIds,i.config_.useMediaCapabilities),4);case 4:return e.yield(i.drmEngine_.attach(t.mediaElement),5);case 5:return e.yield(i.filterManifest_(i.manifest_),0)}})},shaka.Player.prototype.onLoad_=function(t,a){var r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(goog.asserts.assert(t.mimeType==a.mimeType,"|has| and |wants| should have the same mime type when loading."),goog.asserts.assert(t.uri==a.uri,"|has| and |wants| should have the same uri when loading."),goog.asserts.assert(t.mediaElement,"We should have a media element when loading."),goog.asserts.assert(!isNaN(a.startTimeOfLoad),"|wants| should tell us when the load was originally requested"),t.startTime=a.startTime,r=t.mediaElement,i=t.uri,l.assetUri_=i,i=null,0<l.assetUri_.indexOf(".mpd")?i="MPD":0<l.assetUri_.indexOf(".m3u8")&&(i="HLS"),l.playRateController_=new shaka.media.PlayRateController({getRate:function(){return t.mediaElement.playbackRate},getDefaultRate:function(){return t.mediaElement.defaultPlaybackRate},setRate:function(e){t.mediaElement.playbackRate=e},movePlayhead:function(e){t.mediaElement.currentTime+=e}}),n=function(){return l.updateStateHistory_()},o=function(){return l.onRateChange_()},l.eventManager_.listen(r,"playing",n),l.eventManager_.listen(r,"pause",n),l.eventManager_.listen(r,"ended",n),l.eventManager_.listen(r,"ratechange",o),n=l.config_.abrFactory,l.abrManager_&&l.abrManagerFactory_==n||(l.abrManagerFactory_=n,l.abrManager_=shaka.util.Functional.callFactory(n),"function"!=typeof l.abrManager_.playbackRateChanged&&(shaka.Deprecate.deprecateFeature(4,"AbrManager","Please use an AbrManager with playbackRateChanged function."),l.abrManager_.playbackRateChanged=function(e){}),l.abrManager_.configure(l.config_.abr)),l.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(l.config_.preferredAudioLanguage,l.config_.preferredVariantRole,l.config_.preferredAudioChannelCount),l.currentTextLanguage_=l.config_.preferredTextLanguage,l.currentTextRole_=l.config_.preferredTextRole,l.currentTextForced_=l.config_.preferForcedSubs,shaka.Player.applyPlayRange_(l.manifest_.presentationTimeline,l.config_.playRangeStart,l.config_.playRangeEnd),l.abrManager_.init(function(e,t,a){return l.switch_(e,t,a)}),l.playhead_=l.createPlayhead(t.startTime),l.playheadObservers_=l.createPlayheadObserversForMSE_(),o=Math.max(l.manifest_.minBufferTime,l.config_.streaming.rebufferingGoal),l.startBufferManagement_(o),shaka.util.StreamUtils.chooseCodecsAndFilterManifest(l.manifest_,l.config_.preferredVideoCodecs,l.config_.preferredAudioCodec,l.config_.preferredAudioChannelCount),l.streamingEngine_=l.createStreamingEngine(i),l.streamingEngine_.configure(l.config_.streaming),l.loadMode_=shaka.Player.LoadMode.MEDIA_SOURCE,l.dispatchEvent(l.makeEvent_(shaka.Player.EventName.Streaming)),n=null,l.getVariantTracks().find(function(e){return e.active}))e.jumpTo(2);else{if(n=l.chooseVariant_(),goog.asserts.assert(n,"Must choose an initial variant!"),l.switchVariant_(n,!0,!1,0),l.config_.streaming.startAtSegmentBoundary)return o=l.playhead_.getTime(),e.yield(l.adjustStartTime_(n,o),4);e.jumpTo(3)}break;case 4:i=e.yieldResult,l.playhead_.setStartTime(i);case 3:l.onAdaptation_();case 2:return l.getTextTracks().find(function(e){return e.active})||((o=l.chooseTextStream_())&&l.addTextStreamToSwitchHistory_(o,!0),n&&l.setInitialTextState_(n,o),o&&l.shouldStreamText_()&&l.streamingEngine_.switchTextStream(o)),e.yield(l.streamingEngine_.start(),5);case 5:l.config_.abr.enabled&&(l.abrManager_.enable(),l.onAbrStatusChanged_()),l.filterManifestByCurrentVariant_(),l.onTracksChanged_(),l.updateAbrManagerVariants_(),s=l.manifest_.variants.some(function(e){return e.primary}),l.config_.preferredAudioLanguage||s||shaka.log.warning("No preferred audio language set.  We have chosen an arbitrary language initially"),l.eventManager_.listenOnce(r,"loadedmetadata",function(){var e=Date.now()/1e3-a.startTimeOfLoad;l.stats_.setLoadLatency(e)}),e.jumpToEnd()}})},shaka.Player.prototype.onInitializeSrcEqualsDrm_=function(t,a){var r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(i=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(o.networkingEngine_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),goog.asserts.assert(o.config_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),r=Date.now()/1e3,n=!0,o.drmEngine_=o.createDrmEngine({netEngine:o.networkingEngine_,onError:function(e){o.onError_(e)},onKeyStatus:function(e){o.onKeyStatus_(e)},onExpirationUpdated:function(e,t){o.onExpirationUpdated_(e,t)},onEvent:function(e){o.dispatchEvent(e),e.type==shaka.Player.EventName.DrmSessionUpdate&&n&&(n=!1,e=Date.now()/1e3-r,o.stats_.setDrmTime(e))}}),o.drmEngine_.configure(o.config_.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:a.mimeType?shaka.util.MimeUtils.getBasicType(a.mimeType):"video/mp4",codecs:a.mimeType?shaka.util.MimeUtils.getCodecs(a.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.VIDEO,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.yield(o.drmEngine_.initForPlayback([i],[]),2)):e.yield(o.drmEngine_.attach(t.mediaElement),0)})},shaka.Player.prototype.onSrcEquals_=function(t,a){function e(){return r.updateStateHistory_()}var r=this,n=(goog.asserts.assert(t.mediaElement,"We should have a media element when loading."),goog.asserts.assert(a.uri,"|has| should have a valid uri when loading."),goog.asserts.assert(!isNaN(a.startTimeOfLoad),"|wants| should tell us when the load was originally requested"),goog.asserts.assert(this.video_==t.mediaElement,"The video element should match our media element"),t.uri=a.uri,t.startTime=a.startTime,this.assetUri_=t.uri,this.playhead_=new shaka.media.SrcEqualsPlayhead(t.mediaElement),null!=t.startTime&&this.playhead_.setStartTime(t.startTime),this.playRateController_=new shaka.media.PlayRateController({getRate:function(){return t.mediaElement.playbackRate},getDefaultRate:function(){return t.mediaElement.defaultPlaybackRate},setRate:function(e){t.mediaElement.playbackRate=e},movePlayhead:function(e){t.mediaElement.currentTime+=e}}),this.startBufferManagement_(this.config_.streaming.rebufferingGoal),this.eventManager_.listen(t.mediaElement,"playing",e),this.eventManager_.listen(t.mediaElement,"pause",e),this.eventManager_.listen(t.mediaElement,"ended",e),this.eventManager_.listen(t.mediaElement,"ratechange",function(){return r.onRateChange_()}),"none"!=this.video_.preload&&this.eventManager_.listenOnce(this.video_,"loadedmetadata",function(){var e=Date.now()/1e3-a.startTimeOfLoad;r.stats_.setLoadLatency(e)}),this.video_.audioTracks&&(this.eventManager_.listen(this.video_.audioTracks,"addtrack",function(){return r.onTracksChanged_()}),this.eventManager_.listen(this.video_.audioTracks,"removetrack",function(){return r.onTracksChanged_()}),this.eventManager_.listen(this.video_.audioTracks,"change",function(){return r.onTracksChanged_()})),this.video_.textTracks&&(this.eventManager_.listen(this.video_.textTracks,"addtrack",function(e){r.onTracksChanged_(),r.processTimedMetadataSrcEqls_(e)}),this.eventManager_.listen(this.video_.textTracks,"removetrack",function(){return r.onTracksChanged_()}),this.eventManager_.listen(this.video_.textTracks,"change",function(){return r.onTracksChanged_()})),t.mediaElement.src=t.uri,(shaka.util.Platform.isTizen()||shaka.util.Platform.isWebOS())&&t.mediaElement.load(),this.loadMode_=shaka.Player.LoadMode.SRC_EQUALS,this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Streaming)),new shaka.util.PublicPromise),i=(shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){n.resolve()}),!1);return this.cleanupOnUnload_.push(function(){i=!0}),shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_CURRENT_DATA,this.eventManager_,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?i?e.return():(r.setupPreferredAudioOnSrc_(),r.getFilteredTextTracks_().find(function(e){return"disabled"!=e.mode})?e.jumpTo(2):e.yield(new Promise(function(e){r.eventManager_.listenOnce(r.video_.textTracks,"change",e),new shaka.util.Timer(e).tickAfter(1)}),2)):i?e.return():(r.setupPreferredTextOnSrc_(),void e.jumpToEnd())})}),this.video_.error?n.reject(this.videoErrorToShakaError_()):"none"==this.video_.preload&&(shaka.log.alwaysWarn('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),n.resolve()),this.eventManager_.listenOnce(this.video_,"error",function(){n.reject(r.videoErrorToShakaError_())}),new shaka.util.AbortableOperation(n,function(){var e=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);return n.reject(e),Promise.resolve()})},shaka.Player.prototype.setupPreferredAudioOnSrc_=function(){var e,t=this.config_.preferredAudioLanguage;""!=t&&(this.selectAudioLanguage(t),""!=(e=this.config_.preferredVariantRole))&&this.selectAudioLanguage(t,e)},shaka.Player.prototype.setupPreferredTextOnSrc_=function(){var e,t=this.config_.preferredTextLanguage,a=this.config_.preferForcedSubs;""!=t&&(this.selectTextLanguage(t,"",a),""!=(e=this.config_.preferredTextRole))&&this.selectTextLanguage(t,e,a)},shaka.Player.prototype.processTimedMetadataSrcEqls_=function(e){var a=this,r=e.track;goog.asserts.assert(r instanceof TextTrack,"Wrong track type!"),"metadata"==r.kind&&(r.mode="hidden",this.eventManager_.listen(r,"cuechange",function(){if(r.activeCues)for(var e=$jscomp.makeIterator(r.activeCues),t=e.next();!t.done;t=e.next())t=t.value,a.dispatchMetadataEvent_(t.startTime,t.endTime,t.type,t.value),a.adManager_&&a.adManager_.onCueMetadataChange(t.value)}),new shaka.util.Timer(function(){for(var e=a.getMetadataTracks_(),t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next())t.value.mode="hidden"}).tickNow().tickAfter(.5))},shaka.Player.prototype.processTimedMetadataMediaSrc_=function(e,t,a){for(var r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var n=r.cueTime+t,i=a,o=$jscomp.makeIterator(r.frames),s=o.next();!s.done;s=o.next())this.dispatchMetadataEvent_(n,i,"ID3",s.value);this.adManager_&&this.adManager_.onHlsTimedMetadata(r,n)}},shaka.Player.prototype.dispatchMetadataEvent_=function(e,t,a,r){goog.asserts.assert(!t||e<=t,"Metadata start time should be less or equal to the end time!"),this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Metadata,{startTime:e,endTime:t,metadataType:a,payload:r}))},shaka.Player.filterForAVVariants_=function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(shaka.log.debug("Found variant with audio and video content, so filtering out audio-only content."),e.variants=e.variants.filter(t))},shaka.Player.prototype.createDrmEngine=function(e){return new shaka.media.DrmEngine(e,this.config_.drm.updateExpirationTime)},shaka.Player.prototype.createNetworkingEngine=function(){var a=this;return new shaka.net.NetworkingEngine(function(e,t){a.abrManager_&&a.abrManager_.segmentDownloaded(e,t)})},shaka.Player.prototype.createPlayhead=function(e){var t=this;return goog.asserts.assert(this.manifest_,"Must have manifest"),goog.asserts.assert(this.video_,"Must have video"),new shaka.media.MediaSourcePlayhead(this.video_,this.manifest_,this.config_.streaming,e,function(){return t.onSeek_()},function(e){return t.dispatchEvent(e)})},shaka.Player.prototype.createPlayheadObserversForMSE_=function(){var a=this,e=(goog.asserts.assert(this.manifest_,"Must have manifest"),goog.asserts.assert(this.regionTimeline_,"Must have region timeline"),goog.asserts.assert(this.video_,"Must have video element"),new shaka.media.RegionObserver(this.regionTimeline_)),t=(e.setListeners(function(e,t){a.onRegionEvent_(shaka.Player.EventName.TimelineRegionEnter,e)},function(e,t){a.onRegionEvent_(shaka.Player.EventName.TimelineRegionExit,e)},function(e,t){t||(a.onRegionEvent_(shaka.Player.EventName.TimelineRegionEnter,e),a.onRegionEvent_(shaka.Player.EventName.TimelineRegionExit,e))}),new shaka.media.PlayheadObserverManager(this.video_));return t.manage(e),t},shaka.Player.prototype.startBufferManagement_=function(e){var t=this;goog.asserts.assert(!this.bufferObserver_,"No buffering observer should exist before initialization."),goog.asserts.assert(!this.bufferPoller_,"No buffer timer should exist before initialization."),this.bufferObserver_=new shaka.media.BufferingObserver(1,2),this.bufferObserver_.setState(shaka.media.BufferingObserver.State.STARVING),this.updateBufferingSettings_(e),this.updateBufferState_(),this.bufferPoller_=new shaka.util.Timer(function(){t.pollBufferState_()}).tickEvery(.25)},shaka.Player.prototype.updateBufferingSettings_=function(e){this.bufferObserver_.setThresholds(e,Math.min(shaka.Player.TYPICAL_BUFFERING_THRESHOLD_,e/2))},shaka.Player.prototype.pollBufferState_=function(){switch(goog.asserts.assert(this.video_,"Need a media element to update the buffering observer"),goog.asserts.assert(this.bufferObserver_,"Need a buffering observer to update"),this.loadMode_){case shaka.Player.LoadMode.SRC_EQUALS:var e=this.isBufferedToEndSrc_();break;case shaka.Player.LoadMode.MEDIA_SOURCE:e=this.isBufferedToEndMS_();break;default:e=!1}var t=shaka.media.TimeRangesUtils.bufferedAheadOf(this.video_.buffered,this.video_.currentTime);this.bufferObserver_.update(t,e)&&this.updateBufferState_()},shaka.Player.prototype.createMediaSourceEngine=function(e,t,a,r){return new shaka.media.MediaSourceEngine(e,t,a,r)},shaka.Player.prototype.createCmcd_=function(){var e=this,t=this.abrManager_;return new shaka.util.CmcdManager({getBandwidthEstimate:function(){return t?t.getBandwidthEstimate():NaN},getBufferedInfo:function(){return e.getBufferedInfo()},getCurrentTime:function(){return e.video_?e.video_.currentTime:0},getVariantTracks:function(){return e.getVariantTracks()},getPlaybackRate:function(){return e.getPlaybackRate()},isLive:function(){return e.isLive()}},this.config_.cmcd)},shaka.Player.prototype.createStreamingEngine=function(e){var a=this;return goog.asserts.assert(this.playhead_&&this.abrManager_&&this.mediaSourceEngine_&&this.manifest_,"Must not be destroyed"),new shaka.media.StreamingEngine(this.manifest_,{getPresentationTime:function(){return a.playhead_.getTime()},getBandwidthEstimate:function(){return a.abrManager_.getBandwidthEstimate()},modifySegmentRequest:function(e,t){a.cmcdManager_.applySegmentData(e,t)},mediaSourceEngine:this.mediaSourceEngine_,netEngine:this.networkingEngine_,onError:function(e){return a.onError_(e)},onEvent:function(e){return a.dispatchEvent(e)},onManifestUpdate:function(){return a.onManifestUpdate_()},onSegmentAppended:function(){return a.onSegmentAppended_()}},e)},shaka.Player.prototype.configure=function(e,t){goog.asserts.assert(this.config_,"Config must not be null!"),goog.asserts.assert("object"==(void 0===e?"undefined":_typeof(e))||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof e&&(e=shaka.util.ConfigUtils.convertToConfigObject(e,t)),goog.asserts.assert("object"==(void 0===e?"undefined":_typeof(e)),"Should be an object!"),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(shaka.Deprecate.deprecateFeature(4,"manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal)&&(e.streaming.rebufferingGoal=.01);t=shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,e,this.defaultConfig_());return this.applyConfig_(),t},shaka.Player.prototype.setLogLevel=function(e){goog.DEBUG&&shaka.log.setLevel(e)},shaka.Player.prototype.applyConfig_=function(){var e,t;if(this.parser_&&(e=shaka.util.ObjectUtils.cloneObject(this.config_.manifest),this.video_&&"AUDIO"===this.video_.nodeName&&(e.disableVideo=!0),this.parser_.configure(e)),this.drmEngine_&&this.drmEngine_.configure(this.config_.drm),this.streamingEngine_){this.streamingEngine_.configure(this.config_.streaming);try{this.filterManifestWithRestrictions_(this.manifest_)}catch(e){this.onError_(e)}this.abrManager_&&this.updateAbrManagerVariants_(),!(e=this.streamingEngine_.getCurrentVariant())||e.allowedByApplication&&e.allowedByKeySystem||(shaka.log.debug("Choosing new variant after changing configuration"),this.chooseVariantAndSwitch_())}this.networkingEngine_&&this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS),this.mediaSourceEngine_&&(e=this.config_.textDisplayFactory,this.lastTextFactory_!=e)&&(t=shaka.util.Functional.callFactory(e),this.mediaSourceEngine_.setTextDisplayer(t),this.lastTextFactory_=e,this.streamingEngine_&&this.streamingEngine_.reloadTextStream()),this.abrManager_&&(this.abrManager_.configure(this.config_.abr),this.config_.abr.enabled?this.abrManager_.enable():this.abrManager_.disable(),this.onAbrStatusChanged_()),this.bufferObserver_&&(e=this.config_.streaming.rebufferingGoal,this.manifest_&&(e=Math.max(e,this.manifest_.minBufferTime)),this.updateBufferingSettings_(e)),this.manifest_&&shaka.Player.applyPlayRange_(this.manifest_.presentationTimeline,this.config_.playRangeStart,this.config_.playRangeEnd)},shaka.Player.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var e=this.defaultConfig_();return shaka.util.PlayerConfiguration.mergeConfigObjects(e,this.config_,this.defaultConfig_()),e},shaka.Player.prototype.getSharedConfiguration=function(){return goog.asserts.assert(this.config_,"Cannot call getSharedConfiguration after call destroy!"),this.config_},shaka.Player.prototype.resetConfiguration=function(){for(var e in goog.asserts.assert(this.config_,"Cannot be destroyed"),this.config_)delete this.config_[e];shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,this.defaultConfig_(),this.defaultConfig_()),this.applyConfig_()},shaka.Player.prototype.getLoadMode=function(){return this.loadMode_},shaka.Player.prototype.getMediaElement=function(){return this.video_},shaka.Player.prototype.getNetworkingEngine=function(){return this.networkingEngine_},shaka.Player.prototype.getAssetUri=function(){return this.assetUri_},shaka.Player.prototype.getAdManager=function(){return this.adManager_||null},shaka.Player.prototype.isLive=function(){return this.manifest_?this.manifest_.presentationTimeline.isLive():!(!this.video_||!this.video_.src)&&1/0==this.video_.duration},shaka.Player.prototype.isInProgress=function(){return!!this.manifest_&&this.manifest_.presentationTimeline.isInProgress()},shaka.Player.prototype.isAudioOnly=function(){var e;return this.manifest_?!!(e=this.manifest_.variants).length&&!e[0].video:!(!this.video_||!this.video_.src)&&(this.video_.videoTracks?0==this.video_.videoTracks.length:0==this.video_.videoHeight)},shaka.Player.prototype.isLowLatencyMode_=function(){return this.config_.streaming.lowLatencyMode},shaka.Player.prototype.isAutoLowLatencyMode_=function(){return this.config_.streaming.autoLowLatencyMode},shaka.Player.prototype.seekRange=function(){var e;return this.manifest_?{start:(e=this.manifest_.presentationTimeline).getSeekRangeStart(),end:e.getSeekRangeEnd()}:this.video_&&this.video_.src&&(e=this.video_.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},shaka.Player.prototype.keySystem=function(){return shaka.media.DrmEngine.keySystem(this.drmInfo())},shaka.Player.prototype.drmInfo=function(){return this.drmEngine_?this.drmEngine_.getDrmInfo():null},shaka.Player.prototype.getExpiration=function(){return this.drmEngine_?this.drmEngine_.getExpiration():1/0},shaka.Player.prototype.getKeyStatuses=function(){return this.drmEngine_?this.drmEngine_.getKeyStatuses():{}},shaka.Player.prototype.isBuffering=function(){var e=shaka.media.BufferingObserver.State;return!!this.bufferObserver_&&this.bufferObserver_.getState()==e.STARVING},shaka.Player.prototype.getPlaybackRate=function(){return this.video_?this.playRateController_?this.playRateController_.getRealRate():1:0},shaka.Player.prototype.trickPlay=function(e){goog.asserts.assert(0!=e,"Should never set a trick play rate of 0!"),0==e?shaka.log.alwaysWarn("A trick play rate of 0 is unsupported!"):(this.video_.paused&&this.video_.play(),this.playRateController_.set(e),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.abrManager_.playbackRateChanged(e),this.streamingEngine_.setTrickPlay(1<Math.abs(e))))},shaka.Player.prototype.cancelTrickPlay=function(){var e=this.playRateController_.getDefaultRate();this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&this.playRateController_.set(e),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.playRateController_.set(e),this.abrManager_.playbackRateChanged(e),this.streamingEngine_.setTrickPlay(!1))},shaka.Player.prototype.getVariantTracks=function(){if(this.manifest_){for(var e=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null,t=[],a=$jscomp.makeIterator(this.manifest_.variants),r=a.next();!r.done;r=a.next()){var n,r=r.value;shaka.util.StreamUtils.isPlayable(r)&&((n=shaka.util.StreamUtils.variantToTrack(r)).active=r==e,t.push(n))}return t}return this.video_&&this.video_.audioTracks?Array.from(this.video_.audioTracks).map(function(e){return shaka.util.StreamUtils.html5AudioTrackToTrack(e)}):[]},shaka.Player.prototype.getTextTracks=function(){if(this.manifest_){for(var e=this.streamingEngine_?this.streamingEngine_.getCurrentTextStream():null,t=[],a=$jscomp.makeIterator(this.manifest_.textStreams),r=a.next();!r.done;r=a.next()){var r=r.value,n=shaka.util.StreamUtils.textStreamToTrack(r);n.active=r==e,t.push(n)}return t}var i;return this.video_&&this.video_.src&&this.video_.textTracks?(e=this.getFilteredTextTracks_(),i=shaka.util.StreamUtils,e.map(function(e){return i.html5TextTrackToTrack(e)})):[]},shaka.Player.prototype.getImageTracks=function(){var t;return this.manifest_?(t=shaka.util.StreamUtils,this.manifest_.imageStreams.map(function(e){return t.imageStreamToTrack(e)})):[]},shaka.Player.prototype.getThumbnails=function(t,a){var r,n,i,o,s,l,u,c,d,h,p=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?p.manifest_?(r=p.manifest_.imageStreams.find(function(e){return e.id==t}))?r.segmentIndex?e.jumpTo(3):e.yield(r.createSegmentIndex(),3):e.return(null):e.jumpTo(2):2==e.nextAddress||null==(n=r.segmentIndex.find(a))?e.return(null):(n=r.segmentIndex.get(n),(h=/(\d+)x(\d+)/.exec(r.tilesLayout))?(o=r.width||0,s=r.height||0,i=parseInt(h[1],10),h=parseInt(h[2],10),o=o/i,s=s/h,h=i*h,l=n.trueEndTime-n.startTime,l=l/h,u=n.startTime,d=c=0,1<h&&(h=Math.floor((a-n.startTime)/l),u=n.startTime+h*l,c=h%i*o,d=Math.floor(h/i)*s),e.return({height:s,positionX:c,positionY:d,startTime:u,duration:l,uris:n.getUris(),width:o})):(shaka.log.warning("Tiles layout does not contain a valid format  (columns x rows)"),e.return(null)))})},shaka.Player.prototype.selectTextTrack=function(t){if(this.manifest_&&this.streamingEngine_){var e=this.manifest_.textStreams.find(function(e){return e.id==t.id});e?e==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(e,!1),this.streamingEngine_.switchTextStream(e),this.onTextChanged_(),this.currentTextLanguage_=e.language):shaka.log.error("No stream with id",t.id)}else if(this.video_&&this.video_.src&&this.video_.textTracks){e=this.getFilteredTextTracks_();for(var a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())a=a.value,shaka.util.StreamUtils.html5TrackId(a)==t.id?a.mode=this.isTextVisible_?"showing":"hidden":a.mode="disabled";this.onTextChanged_()}},shaka.Player.prototype.selectVariantTrack=function(t,e,a){if(e=void 0!==e&&e,a=void 0===a?0:a,this.manifest_&&this.streamingEngine_){this.config_.abr.enabled&&shaka.log.alwaysWarn("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.manifest_.variants.find(function(e){return e.id==t.id});r?shaka.util.StreamUtils.isPlayable(r)?(this.switchVariant_(r,!1,e,a),this.currentAdaptationSetCriteria_=new shaka.media.ExampleBasedCriteria(r),this.updateAbrManagerVariants_()):shaka.log.error("Unable to switch to restricted track",t.id):shaka.log.error("No variant with id",t.id)}else if(this.video_&&this.video_.audioTracks)for(e=Array.from(this.video_.audioTracks),a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())if(a=a.value,shaka.util.StreamUtils.html5TrackId(a)==t.id){this.switchHtml5Track_(a);break}},shaka.Player.prototype.getAudioLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getVariantTracks())},shaka.Player.prototype.getTextLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getTextTracks())},shaka.Player.prototype.getAudioLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getVariantTracks()))},shaka.Player.prototype.getTextLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getTextTracks()))},shaka.Player.prototype.selectAudioLanguage=function(e,t){var a=shaka.util.LanguageUtils;if(this.manifest_&&this.playhead_){if(this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(e,t||"",0,""),!this.config_.abr.enabled){for(var a=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},r=this.streamingEngine_.getCurrentVariant(),n=this.currentAdaptationSetCriteria_.create(this.manifest_.variants),i=null,o=(n=$jscomp.makeIterator(n.values())).next();!o.done;o=n.next())o=o.value,(!i||a(i,r)>a(o,r))&&(i=o);if(i)return a=shaka.util.StreamUtils.variantToTrack(i),void this.selectVariantTrack(a,!0)}this.chooseVariantAndSwitch_()}else if(this.video_&&this.video_.audioTracks){o=Array.from(this.video_.audioTracks),r=a.normalize(e),n=i=null;for(var s=(o=$jscomp.makeIterator(o)).next();!s.done;s=o.next()){var s=s.value,l=shaka.util.StreamUtils.html5AudioTrackToTrack(s);a.normalize(l.language)==r&&(i=s,t?l.roles.includes(t)&&(n=s):0==l.roles.length&&(n=s))}n?this.switchHtml5Track_(n):i&&this.switchHtml5Track_(i)}},shaka.Player.prototype.selectTextLanguage=function(e,t,a){a=void 0!==a&&a;var r,n=shaka.util.LanguageUtils;this.manifest_&&this.playhead_?(this.currentTextLanguage_=e,this.currentTextRole_=t||"",this.currentTextForced_=a,(e=this.chooseTextStream_())&&(e==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(e,!1),this.shouldStreamText_()&&(this.streamingEngine_.switchTextStream(e),this.onTextChanged_())))):(r=n.normalize(e),(e=this.getTextTracks().find(function(e){return n.normalize(e.language)==r&&(!t||e.roles.includes(t))&&e.forced==a}))&&this.selectTextTrack(e))},shaka.Player.prototype.selectVariantsByLabel=function(e){if(this.manifest_&&this.playhead_){for(var t=null,a=$jscomp.makeIterator(this.manifest_.variants),r=a.next();!r.done;r=a.next())if((r=r.value).audio.label==e){t=r;break}null==t?shaka.log.warning("No variants were found with label: "+e+". Ignoring the request to switch."):(this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(t.language,"",0,e),this.chooseVariantAndSwitch_())}},shaka.Player.prototype.isTextTrackVisible=function(){var e,t=this.isTextVisible_;return this.mediaSourceEngine_?(e=this.mediaSourceEngine_.getTextDisplayer().isTextVisible(),goog.asserts.assert(e==t,"text visibility has fallen out of sync"),e):this.video_&&this.video_.src&&this.video_.textTracks?this.getFilteredTextTracks_().some(function(e){return"showing"==e.mode}):t},shaka.Player.prototype.getFilteredTextTracks_=function(){return goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid."),Array.from(this.video_.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&e.label!=shaka.Player.TextTrackLabel})},shaka.Player.prototype.getMetadataTracks_=function(){return goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid."),Array.from(this.video_.textTracks).filter(function(e){return"metadata"==e.kind})},shaka.Player.prototype.setTextTrackVisibility=function(e){if(this.isTextVisible_!=(e=!!e)){if(this.isTextVisible_=e,this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE)this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(e),this.config_.streaming.alwaysStreamText||(e?this.streamingEngine_.getCurrentTextStream()||0<(e=shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_)).length&&(this.streamingEngine_.switchTextStream(e[0]),this.onTextChanged_()):this.streamingEngine_.unloadTextStream());else if(this.video_&&this.video_.src&&this.video_.textTracks)for(var t=this.getFilteredTextTracks_(),a=(t=$jscomp.makeIterator(t)).next();!a.done;a=t.next())"disabled"!=(a=a.value).mode&&(a.mode=e?"showing":"hidden");this.onTextTrackVisibility_()}},shaka.Player.prototype.getPlayheadTimeAsDate=function(){if(this.isLive()){var e=this.walker_.getCurrentPayload(),t=0;if(this.playhead_)t=this.playhead_.getTime();else if(e){if(null==e.startTime)return new Date;t=e.startTime}if(this.manifest_)return e=this.manifest_.presentationTimeline.getPresentationStartTime(),new Date(1e3*(e+t));if(this.video_&&this.video_.getStartDate)return e=this.video_.getStartDate(),isNaN(e.getTime())?(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t);shaka.log.warning("No way to get playhead time as Date!")}else shaka.log.warning("getPlayheadTimeAsDate is for live streams!");return null},shaka.Player.prototype.getPresentationStartTimeAsDate=function(){if(this.isLive()){var e;if(this.manifest_)return e=this.manifest_.presentationTimeline.getPresentationStartTime(),goog.asserts.assert(null!=e,"Presentation start time should not be null!"),new Date(1e3*e);if(this.video_&&this.video_.getStartDate)return e=this.video_.getStartDate(),isNaN(e.getTime())?(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e;shaka.log.warning("No way to get presentation start time as Date!")}else shaka.log.warning("getPresentationStartTimeAsDate is for live streams!");return null},shaka.Player.prototype.getBufferedInfo=function(){var e;return this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE?this.mediaSourceEngine_.getBufferedInfo():(e={total:[],audio:[],video:[],text:[]},this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&(e.total=shaka.media.TimeRangesUtils.getBufferedInfo(this.video_.buffered)),e)},shaka.Player.prototype.getStats=function(){if(this.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&this.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)return shaka.util.Stats.getEmptyBlob();this.updateStateHistory_(),goog.asserts.assert(this.video_,"If we have stats, we should have video_");var e=this.video_,t=e.currentTime/e.duration;return isNaN(t)||this.stats_.setCompletionPercent(Math.round(100*t)),e.getVideoPlaybackQuality&&(e=e.getVideoPlaybackQuality(),this.stats_.setDroppedFrames(Number(e.droppedVideoFrames),Number(e.totalVideoFrames)),this.stats_.setCorruptedFrames(Number(e.corruptedVideoFrames))),e=this.drmEngine_?this.drmEngine_.getLicenseTime():NaN,this.stats_.setLicenseTime(e),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&((e=this.streamingEngine_.getCurrentVariant())&&(t=(this.playRateController_?this.playRateController_.getRealRate():1)*e.bandwidth,this.stats_.setCurrentStreamBandwidth(t)),e&&e.video&&this.stats_.setResolution(e.video.width||NaN,e.video.height||NaN),this.isLive()&&(e=this.getPresentationStartTimeAsDate().valueOf()+1e3*this.seekRange().end,e=(Date.now()-e)/1e3,this.stats_.setLiveLatency(e)),this.manifest_&&this.manifest_.presentationTimeline&&(e=this.manifest_.presentationTimeline.getMaxSegmentDuration(),this.stats_.setMaxSegmentDuration(e)),e=this.abrManager_.getBandwidthEstimate(),this.stats_.setBandwidthEstimate(e)),this.stats_.getBlob()},shaka.Player.prototype.addTextTrack=function(e,t,a,r,n,i,o){if(o=void 0!==o&&o,shaka.Deprecate.deprecateFeature(4,"addTextTrack","Please use an addTextTrackAsync."),this.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&this.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding text tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(!r){var s=shaka.media.ManifestParser.getExtension(e);if(!(r={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"}[s]))throw shaka.log.error("The mimeType has not been provided and it could not be deduced from its extension."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_COULD_NOT_GUESS_MIME_TYPE,s)}if(this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS){if("text/vtt"!=r)throw shaka.log.error("Only WebVTT is supported when using src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_ONLY_WEBVTT_SRC_EQUALS,r);if(o&&(a="forced"),(r=document.createElement("track")).src=e,r.label=i||"",r.kind=a,r.srclang=t,this.video_.getAttribute("crossorigin")||this.video_.setAttribute("crossorigin","anonymous"),this.video_.appendChild(r),r=this.getTextTracks().find(function(e){return e.language==t&&e.label==(i||"")&&e.kind==a}))return this.onTracksChanged_(),r;throw shaka.log.error("Cannot add this text when loaded with src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS)}var s=shaka.util.ManifestParserUtils.ContentType,l=this.manifest_.presentationTimeline.getDuration();if(1/0==l)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);if(e={id:this.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:shaka.media.SegmentIndex.forSingleSegment(0,l,[e]),mimeType:r||"",codecs:n||"",kind:a,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:i||null,type:s.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},n=shaka.util.MimeUtils.getFullType(e.mimeType,e.codecs),shaka.text.TextEngine.isTypeSupported(n))return this.manifest_.textStreams.push(e),this.onTracksChanged_(),shaka.util.StreamUtils.textStreamToTrack(e);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,r)},shaka.Player.prototype.addTextTrackAsync=function(t,a,r,n,i,o,s){s=void 0!==s&&s;var l,u,c,d,h,p=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(p.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&p.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding text tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(n){e.jumpTo(2);break}if(l=shaka.media.ManifestParser.getExtension(t),n={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"}[l]){e.jumpTo(3);break}return e.setCatchFinallyBlocks(4),goog.asserts.assert(p.networkingEngine_,"Need networking engine."),e.yield(shaka.media.ManifestParser.getMimeType(t,p.networkingEngine_,p.config_.streaming.retryParameters),6);case 6:n=e.yieldResult,e.leaveTryBlock(3);break;case 4:e.enterCatchBlock();case 3:if(!n)throw shaka.log.error("The mimeType has not been provided and it could not be deduced from its extension."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_COULD_NOT_GUESS_MIME_TYPE,l);case 2:if(p.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)e.jumpTo(7);else{if("text/vtt"!=n)return goog.asserts.assert(p.networkingEngine_,"Need networking engine."),e.yield(p.getTextData_(t,p.networkingEngine_,p.config_.streaming.retryParameters),9);e.jumpTo(8)}break;case 9:u=e.yieldResult,u=p.convertToWebVTT_(u,n),u=new Blob([u],{type:"text/vtt"}),t=shaka.media.MediaSourceEngine.createObjectURL(u),n="text/vtt";case 8:if(s&&(r="forced"),(u=document.createElement("track")).src=t,u.label=o||"",u.kind=r,u.srclang=a,p.video_.getAttribute("crossorigin")||p.video_.setAttribute("crossorigin","anonymous"),p.video_.appendChild(u),c=p.getTextTracks(),c=c.find(function(e){return e.language==a&&e.label==(o||"")&&e.kind==r}))return p.onTracksChanged_(),e.return(c);throw shaka.log.error("Cannot add this text when loaded with src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS);case 7:if(c=shaka.util.ManifestParserUtils.ContentType,1/0==(d=p.manifest_.presentationTimeline.getDuration()))throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);if(d={id:p.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:shaka.media.SegmentIndex.forSingleSegment(0,d,[t]),mimeType:n||"",codecs:i||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:a,label:o||null,type:c.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},h=shaka.util.MimeUtils.getFullType(d.mimeType,d.codecs),shaka.text.TextEngine.isTypeSupported(h))return p.manifest_.textStreams.push(d),p.onTracksChanged_(),e.return(shaka.util.StreamUtils.textStreamToTrack(d));throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,n)}})},shaka.Player.prototype.getTextData_=function(t,a,r){var n,i;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(i=shaka.net.NetworkingEngine.RequestType.SEGMENT,(n=shaka.net.NetworkingEngine.makeRequest([t],r)).method="GET",e.yield(a.request(i,n).promise,2)):(i=e.yieldResult,e.return(i.data))})},shaka.Player.prototype.convertToWebVTT_=function(e,t){var a,r=shaka.text.TextEngine.findParser(t);if(r)return r=r(),a={periodStart:0,segmentStart:0,segmentEnd:this.video_.duration},e=shaka.util.BufferUtils.toUint8(e),r=r.parseMedia(e,a,!1),shaka.text.WebVttGenerator.convert(r);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,t)},shaka.Player.prototype.setMaxHardwareResolution=function(e,t){this.maxHwRes_.width=e,this.maxHwRes_.height=t},shaka.Player.prototype.retryStreaming=function(){return this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&this.streamingEngine_.retry()},shaka.Player.prototype.getManifest=function(){return shaka.log.alwaysWarn("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.manifest_},shaka.Player.prototype.changeManifestURL=function(e){this.parser_&&"string"==typeof e&&this.parser_.changeManifestURL(e,void 0)},shaka.Player.prototype.getManifestParserFactory=function(){return this.parserFactory_},shaka.Player.prototype.addVariantToSwitchHistory_=function(e,t){this.stats_.getSwitchHistory().updateCurrentVariant(e,t)},shaka.Player.prototype.addTextStreamToSwitchHistory_=function(e,t){this.stats_.getSwitchHistory().updateCurrentText(e,t)},shaka.Player.prototype.defaultConfig_=function(){var t=this,e=shaka.util.PlayerConfiguration.createDefault();return e.streaming.failureCallback=function(e){t.defaultStreamingFailureCallback_(e)},e.textDisplayFactory=function(){return t.videoContainer_?new shaka.text.UITextDisplayer(t.video_,t.videoContainer_):new shaka.text.SimpleTextDisplayer(t.video_)},e},shaka.Player.prototype.setVideoContainer=function(e){this.videoContainer_=e},shaka.Player.prototype.defaultStreamingFailureCallback_=function(e){var t=[shaka.util.Error.Code.BAD_HTTP_STATUS,shaka.util.Error.Code.HTTP_ERROR,shaka.util.Error.Code.TIMEOUT];this.isLive()&&t.includes(e.code)&&(e.severity=shaka.util.Error.Severity.RECOVERABLE,shaka.log.warning("Live streaming error.  Retrying automatically..."),this.retryStreaming())},shaka.Player.prototype.makeTextStreamsForClosedCaptions_=function(e){for(var t=shaka.util.ManifestParserUtils.ContentType,a=shaka.util.ManifestParserUtils.TextStreamKind,r=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,n=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE,i=new Set,o=$jscomp.makeIterator(e.textStreams),s=o.next();!s.done;s=o.next())(s=s.value).mimeType!=r&&s.mimeType!=n||i.add(s.originalId);for(s=(o=$jscomp.makeIterator(e.variants)).next();!s.done;s=o.next())if((s=s.value.video)&&s.closedCaptions)for(var l=$jscomp.makeIterator(s.closedCaptions.keys()),u=l.next();!u.done;u=l.next()){var c,d,u=u.value;i.has(u)||(d=u.startsWith("CC")?r:n,c=new shaka.media.MetaSegmentIndex,d={id:this.nextExternalStreamId_++,originalId:u,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:c,mimeType:d,codecs:"",kind:a.CLOSED_CAPTION,encrypted:!1,drmInfos:[],keyIds:new Set,language:s.closedCaptions.get(u),label:null,type:t.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:s.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},e.textStreams.push(d),i.add(u))}},shaka.Player.prototype.filterManifest_=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(a.filterManifestWithStreamUtils_(t),2);a.filterManifestWithRestrictions_(t),e.jumpToEnd()})},shaka.Player.prototype.filterManifestWithStreamUtils_=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(t,"Manifest should exist!"),goog.asserts.assert(r.video_,"Must not be destroyed"),a=r.streamingEngine_?r.streamingEngine_.getCurrentVariant():null,e.yield(shaka.util.StreamUtils.filterManifest(r.drmEngine_,a,t,r.config_.useMediaCapabilities),2);r.checkPlayableVariants_(t),e.jumpToEnd()})},shaka.Player.prototype.filterManifestWithRestrictions_=function(e){if(this.loadMode_!=shaka.Player.LoadMode.DESTROYED){shaka.util.StreamUtils.applyRestrictions(e.variants,this.config_.restrictions,this.maxHwRes_)&&this.streamingEngine_&&this.onTracksChanged_();var t=this.drmEngine_?this.drmEngine_.getDrmInfo():null;if(t&&this.drmEngine_.getMediaKeys())for(var a=$jscomp.makeIterator(e.variants),r=a.next();!r.done;r=a.next()){r=((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]);for(var n=(r=$jscomp.makeIterator(r)).next();!n.done;n=r.next())if((n=n.value).keySystem==t.keySystem)for(var i=(n=$jscomp.makeIterator(n.initData||[])).next();!i.done;i=n.next())i=i.value,this.drmEngine_.newInitData(i.initDataType,i.initData)}this.checkRestrictedVariants_(e)}},shaka.Player.prototype.filterManifestByCurrentVariant_=function(){goog.asserts.assert(this.manifest_,"Manifest should be valid"),goog.asserts.assert(this.streamingEngine_,"StreamingEngine should be valid");var e=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null;shaka.util.StreamUtils.filterManifestByCurrentVariant(e,this.manifest_),this.checkPlayableVariants_(this.manifest_)},shaka.Player.prototype.adjustStartTime_=function(t,a){var r,n,i,o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=t.audio,r=t.video,n=function(t,a){var r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?t?e.yield(t.createSegmentIndex(),2):e.return(null):(r=t.segmentIndex[Symbol.iterator]().seek(a))?(r=r.startTime,goog.asserts.assert(r<=a,"Segment should start before target time!"),e.return(r)):e.return(null)})},e.yield(n(o,a),2)):3!=e.nextAddress?(i=e.yieldResult,e.yield(n(r,a),3)):null!=(o=e.yieldResult)&&null!=i?e.return(Math.max(o,i)):null!=o?e.return(o):null!=i?e.return(i):e.return(a)})},shaka.Player.prototype.updateBufferState_=function(){var e=this.isBuffering();shaka.log.v2("Player changing buffering state to",e),this.stats_&&this.bufferObserver_&&this.playhead_&&(this.playRateController_.setBuffering(e),this.updateStateHistory_()),this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Buffering,{buffering:e}))},shaka.Player.prototype.onRateChange_=function(){var e=this.video_.playbackRate;0!=e&&(this.playRateController_&&this.playRateController_.set(e),e=this.makeEvent_(shaka.Player.EventName.RateChange),this.dispatchEvent(e))},shaka.Player.prototype.updateStateHistory_=function(){var e,t;this.stats_&&this.bufferObserver_&&(e=shaka.media.BufferingObserver.State,t=this.stats_.getStateHistory(),this.bufferObserver_.getState()==e.STARVING?t.update("buffering"):this.video_.paused?t.update("paused"):this.video_.ended?t.update("ended"):t.update("playing"))},shaka.Player.prototype.onSeek_=function(){this.playheadObservers_&&this.playheadObservers_.notifyOfSeek(),this.streamingEngine_&&this.streamingEngine_.seeked(),this.bufferObserver_&&this.pollBufferState_()},shaka.Player.prototype.updateAbrManagerVariants_=function(){try{goog.asserts.assert(this.manifest_,"Manifest should exist by now!"),this.checkRestrictedVariants_(this.manifest_)}catch(e){return this.onError_(e),!1}var e=this.manifest_.variants.filter(function(e){return shaka.util.StreamUtils.isPlayable(e)}),e=this.currentAdaptationSetCriteria_.create(e);return this.abrManager_.setVariants(Array.from(e.values())),!0},shaka.Player.prototype.chooseVariant_=function(){return this.updateAbrManagerVariants_()?this.abrManager_.chooseVariant():null},shaka.Player.prototype.chooseTextStream_=function(){return shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_)[0]||null},shaka.Player.prototype.chooseVariantAndSwitch_=function(){goog.asserts.assert(this.config_,"Must not be destroyed");var e=this.chooseVariant_();e&&(this.switchVariant_(e,!0,!0,0),this.onAdaptation_())},shaka.Player.prototype.switchVariant_=function(e,t,a,r){var n=this.streamingEngine_.getCurrentVariant();e==n?(shaka.log.debug("Variant already selected."),a&&this.streamingEngine_.switchVariant(e,a,r,!0)):(this.addVariantToSwitchHistory_(e,t),this.streamingEngine_.switchVariant(e,a,r),t=null,n&&(t=shaka.util.StreamUtils.variantToTrack(n)),e=shaka.util.StreamUtils.variantToTrack(e),this.onVariantChanged_(t,e))},shaka.Player.prototype.switchHtml5Track_=function(e){goog.asserts.assert(this.video_&&this.video_.audioTracks,"Video and video.audioTracks should not be null!");var t=Array.from(this.video_.audioTracks).find(function(e){return e.enabled});e.enabled=!0,e.id!==t.id&&(t.enabled=!1),t=shaka.util.StreamUtils.html5AudioTrackToTrack(t),e=shaka.util.StreamUtils.html5AudioTrackToTrack(e),this.onVariantChanged_(t,e)},shaka.Player.prototype.setInitialTextState_=function(e,t){t?(e.audio&&this.shouldInitiallyShowText_(e.audio,t)&&(this.isTextVisible_=!0),this.isTextVisible_&&(this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(!0),goog.asserts.assert(this.shouldStreamText_(),"Should be streaming text")),this.onTextTrackVisibility_()):this.isTextVisible_=!1},shaka.Player.prototype.shouldInitiallyShowText_=function(e,t){var a=shaka.util.LanguageUtils,r=a.normalize(this.config_.preferredTextLanguage),e=a.normalize(e.language),t=a.normalize(t.language);return a.areLanguageCompatible(t,r)&&!a.areLanguageCompatible(e,t)},shaka.Player.prototype.onManifestUpdate_=function(){this.parser_&&this.parser_.update&&this.parser_.update()},shaka.Player.prototype.onSegmentAppended_=function(){this.playhead_&&this.playhead_.notifyOfBufferingChange(),this.pollBufferState_()},shaka.Player.prototype.switch_=function(e,t,a){t=void 0!==t&&t,a=void 0===a?0:a,shaka.log.debug("switch_"),goog.asserts.assert(this.config_.abr.enabled,"AbrManager should not call switch while disabled!"),goog.asserts.assert(this.manifest_,"We need a manifest to switch variants."),this.streamingEngine_&&e!=this.streamingEngine_.getCurrentVariant()&&(this.addVariantToSwitchHistory_(e,!0),this.streamingEngine_.switchVariant(e,t,a),this.onAdaptation_())},shaka.Player.prototype.onAdaptation_=function(){var e=this.makeEvent_(shaka.Player.EventName.Adaptation);this.delayDispatchEvent_(e)},shaka.Player.prototype.onTracksChanged_=function(){var e=this.makeEvent_(shaka.Player.EventName.TracksChanged);this.delayDispatchEvent_(e)},shaka.Player.prototype.onVariantChanged_=function(e,t){e=this.makeEvent_(shaka.Player.EventName.VariantChanged,{oldTrack:e,newTrack:t});this.delayDispatchEvent_(e)},shaka.Player.prototype.onTextChanged_=function(){var e=this.makeEvent_(shaka.Player.EventName.TextChanged);this.delayDispatchEvent_(e)},shaka.Player.prototype.onTextTrackVisibility_=function(){var e=this.makeEvent_(shaka.Player.EventName.TextTrackVisibility);this.delayDispatchEvent_(e)},shaka.Player.prototype.onAbrStatusChanged_=function(){var e=this.makeEvent_(shaka.Player.EventName.AbrStatusChanged,{newStatus:this.config_.abr.enabled});this.delayDispatchEvent_(e)},shaka.Player.prototype.onError_=function(e){var t;goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),this.loadMode_!=shaka.Player.LoadMode.DESTROYED&&(t=this.makeEvent_(shaka.Player.EventName.Error,{detail:e}),this.dispatchEvent(t),t.defaultPrevented)&&(e.handled=!0)},shaka.Player.prototype.onRegionEvent_=function(e,t){this.dispatchEvent(this.makeEvent_(e,{detail:{schemeIdUri:t.schemeIdUri,value:t.value,startTime:t.startTime,endTime:t.endTime,id:t.id,eventElement:t.eventElement}}))},shaka.Player.prototype.videoErrorToShakaError_=function(){var e,t;return goog.asserts.assert(this.video_.error,"Video error expected, but missing!"),!this.video_.error||1==(e=this.video_.error.code)?null:((t=this.video_.error.msExtendedCode)&&(t<0&&(t+=Math.pow(2,32)),t=t.toString(16)),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.VIDEO_ERROR,e,t,this.video_.error.message))},shaka.Player.prototype.onVideoError_=function(e){(e=this.videoErrorToShakaError_())&&this.onError_(e)},shaka.Player.prototype.onKeyStatus_=function(e){if(this.streamingEngine_){var t=Object.keys(e),a=(0==t.length&&shaka.log.warning("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),1==t.length&&"00"==t[0]),r=(a&&shaka.log.warning("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),shaka.Player.restrictedStatuses_),n=!1;if(t.length)for(var i=(t=$jscomp.makeIterator(this.manifest_.variants)).next();!i.done;i=t.next())for(var i=i.value,o=shaka.util.StreamUtils.getVariantStreams(i),s=(o=$jscomp.makeIterator(o)).next();!s.done;s=o.next()){var l=s.value,s=i.allowedByKeySystem;if(l.keyIds.size){i.allowedByKeySystem=!0;for(var u=(l=$jscomp.makeIterator(l.keyIds)).next();!u.done;u=l.next())u=u.value,u=e[a?"00":u],i.allowedByKeySystem=i.allowedByKeySystem&&!!u&&!r.includes(u)}s!=i.allowedByKeySystem&&(n=!0)}n&&this.updateAbrManagerVariants_(),(e=this.streamingEngine_.getCurrentVariant())&&!e.allowedByKeySystem&&(shaka.log.debug("Choosing new streams after key status changed"),this.chooseVariantAndSwitch_()),n&&this.onTracksChanged_()}},shaka.Player.prototype.onExpirationUpdated_=function(e,t){this.parser_&&this.parser_.onExpirationUpdated&&this.parser_.onExpirationUpdated(e,t);e=this.makeEvent_(shaka.Player.EventName.ExpirationUpdated);this.dispatchEvent(e)},shaka.Player.prototype.shouldStreamText_=function(){return this.config_.streaming.alwaysStreamText||this.isTextTrackVisible()},shaka.Player.applyPlayRange_=function(e,t,a){0<t&&(e.isLive()?shaka.log.warning("|playRangeStart| has been configured for live content. Ignoring the setting."):e.setUserSeekStart(t)),a<(t=e.getDuration())&&(e.isLive()?shaka.log.warning("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.setDuration(a))},shaka.Player.prototype.checkRestrictedVariants_=function(e){for(var t=shaka.Player.restrictedStatuses_,a=this.drmEngine_?this.drmEngine_.getKeyStatuses():{},r=(r=Object.keys(a)).length&&"00"==r[0],n=!1,i=!1,o=new Set,s=new Set,l=(e=$jscomp.makeIterator(e.variants)).next();!l.done;l=e.next()){var u=[];(l=l.value).audio&&u.push(l.audio),l.video&&u.push(l.video);for(var c=(u=$jscomp.makeIterator(u)).next();!c.done;c=u.next())if((c=c.value).keyIds.size)for(var d=(c=$jscomp.makeIterator(c.keyIds)).next();!d.done;d=c.next()){var d=d.value,h=a[r?"00":d];h?t.includes(h)&&s.add(h):o.add(d)}l.allowedByApplication?l.allowedByKeySystem&&(n=!0):i=!0}if(!n)throw t={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.RESTRICTIONS_CANNOT_BE_MET,t)},shaka.Player.prototype.checkPlayableVariants_=function(e){if(!e.variants.some(shaka.util.StreamUtils.isPlayable))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CONTENT_UNSUPPORTED_BY_BROWSER)},shaka.Player.prototype.delayDispatchEvent_=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(Promise.resolve(),2);a.loadMode_!=shaka.Player.LoadMode.DESTROYED&&a.dispatchEvent(t),e.jumpToEnd()})},shaka.Player.getLanguagesFrom_=function(e){for(var t=new Set,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())(a=a.value).language?t.add(shaka.util.LanguageUtils.normalize(a.language)):t.add("und");return t},shaka.Player.getLanguageAndRolesFrom_=function(e){for(var t=new Map,i=new Map,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){var r="und",n=[];(a=a.value).language&&(r=shaka.util.LanguageUtils.normalize(a.language)),(n="variant"==a.type?a.audioRoles:a.roles)&&n.length||(n=[""]),t.has(r)||t.set(r,new Set);for(var o=(n=$jscomp.makeIterator(n)).next();!o.done;o=n.next())o=o.value,t.get(r).add(o),a.label&&(i.has(r)||i.set(r,new Map),i.get(r).set(o,a.label))}var s=[];return t.forEach(function(e,t){for(var a=$jscomp.makeIterator(e),r=a.next();!r.done;r=a.next()){var r=r.value,n=null;i.has(t)&&i.get(t).has(r)&&(n=i.get(t).get(r)),s.push({language:t,role:r,label:n})}}),s},shaka.Player.prototype.isBufferedToEndMS_=function(){if(goog.asserts.assert(this.video_,"We need a video element to get buffering information"),goog.asserts.assert(this.mediaSourceEngine_,"We need a media source engine to get buffering information"),goog.asserts.assert(this.manifest_,"We need a manifest to get buffering information"),this.video_.ended||this.mediaSourceEngine_.ended())return!0;if(this.manifest_.presentationTimeline.isLive()){var e=this.manifest_.presentationTimeline.getSegmentAvailabilityEnd(),t=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered);if(null!=t&&e<=t)return!0}return!1},shaka.Player.prototype.isBufferedToEndSrc_=function(){var e;return goog.asserts.assert(this.video_,"We need a video element to get buffering information"),!!this.video_.ended||null!=(e=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered))&&e>=this.video_.duration-1},shaka.Player.prototype.createAbortLoadError_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED)},shaka.Player.prototype.getNextStep_=function(e,t,a,r){var n=null;return e==this.detachNode_&&(n=a==this.detachNode_?this.detachNode_:this.attachNode_),e==this.attachNode_&&(n=this.getNextAfterAttach_(a,t,r)),e==this.mediaSourceNode_&&(n=this.getNextAfterMediaSource_(a,t,r)),e==this.parserNode_&&(n=this.getNextMatchingAllDependencies_(this.loadNode_,this.manifestNode_,this.unloadNode_,a,t,r)),e==this.manifestNode_&&(n=this.getNextMatchingAllDependencies_(this.loadNode_,this.drmNode_,this.unloadNode_,a,t,r)),e==this.drmNode_&&(n=this.getNextMatchingAllDependencies_(this.loadNode_,this.loadNode_,this.unloadNode_,a,t,r)),e==this.srcEqualsDrmNode_&&(n=a==this.srcEqualsNode_&&t.mediaElement==r.mediaElement?this.srcEqualsNode_:this.unloadNode_),e!=this.loadNode_&&e!=this.srcEqualsNode_||(n=this.unloadNode_),e==this.unloadNode_&&(n=this.getNextAfterUnload_(a,t,r)),goog.asserts.assert(n,"Missing next step!"),n},shaka.Player.prototype.getNextAfterAttach_=function(e,t,a){return e==this.detachNode_||t.mediaElement!=a.mediaElement?this.detachNode_:e==this.attachNode_?this.attachNode_:e==this.mediaSourceNode_||e==this.loadNode_?this.mediaSourceNode_:e==this.srcEqualsNode_?this.srcEqualsDrmNode_:null},shaka.Player.prototype.getNextAfterMediaSource_=function(e,t,a){return e==this.loadNode_&&t.mediaElement==a.mediaElement?this.parserNode_:this.unloadNode_},shaka.Player.prototype.getNextAfterUnload_=function(e,t,a){return a.mediaElement&&t.mediaElement==a.mediaElement?this.attachNode_:this.detachNode_},shaka.Player.prototype.getNextMatchingAllDependencies_=function(e,t,a,r,n,i){return r==e&&n.mediaElement==i.mediaElement&&n.uri==i.uri&&n.mimeType==i.mimeType?t:a},shaka.Player.createEmptyPayload_=function(){return{mediaElement:null,mimeType:null,startTime:null,startTimeOfLoad:NaN,uri:null}},shaka.Player.prototype.wrapWalkerListenersWithPromise_=function(a){var r=this;return new Promise(function(e,t){a.onCancel=function(){return t(r.createAbortLoadError_())},a.onEnd=function(){return e()},a.onError=function(e){return t(e)},a.onSkip=function(){return t(r.createAbortLoadError_())}})},goog.exportSymbol("shaka.Player",shaka.Player),goog.exportProperty(shaka.Player.prototype,"setVideoContainer",shaka.Player.prototype.setVideoContainer),goog.exportProperty(shaka.Player.prototype,"getManifestParserFactory",shaka.Player.prototype.getManifestParserFactory),goog.exportProperty(shaka.Player.prototype,"getManifest",shaka.Player.prototype.getManifest),goog.exportProperty(shaka.Player.prototype,"retryStreaming",shaka.Player.prototype.retryStreaming),goog.exportProperty(shaka.Player.prototype,"setMaxHardwareResolution",shaka.Player.prototype.setMaxHardwareResolution),goog.exportProperty(shaka.Player.prototype,"addTextTrackAsync",shaka.Player.prototype.addTextTrackAsync),goog.exportProperty(shaka.Player.prototype,"addTextTrack",shaka.Player.prototype.addTextTrack),goog.exportProperty(shaka.Player.prototype,"getStats",shaka.Player.prototype.getStats),goog.exportProperty(shaka.Player.prototype,"getBufferedInfo",shaka.Player.prototype.getBufferedInfo),goog.exportProperty(shaka.Player.prototype,"getPresentationStartTimeAsDate",shaka.Player.prototype.getPresentationStartTimeAsDate),goog.exportProperty(shaka.Player.prototype,"getPlayheadTimeAsDate",shaka.Player.prototype.getPlayheadTimeAsDate),goog.exportProperty(shaka.Player.prototype,"setTextTrackVisibility",shaka.Player.prototype.setTextTrackVisibility),goog.exportProperty(shaka.Player.prototype,"isTextTrackVisible",shaka.Player.prototype.isTextTrackVisible),goog.exportProperty(shaka.Player.prototype,"selectVariantsByLabel",shaka.Player.prototype.selectVariantsByLabel),goog.exportProperty(shaka.Player.prototype,"selectTextLanguage",shaka.Player.prototype.selectTextLanguage),goog.exportProperty(shaka.Player.prototype,"selectAudioLanguage",shaka.Player.prototype.selectAudioLanguage),goog.exportProperty(shaka.Player.prototype,"getTextLanguages",shaka.Player.prototype.getTextLanguages),goog.exportProperty(shaka.Player.prototype,"getAudioLanguages",shaka.Player.prototype.getAudioLanguages),goog.exportProperty(shaka.Player.prototype,"getTextLanguagesAndRoles",shaka.Player.prototype.getTextLanguagesAndRoles),goog.exportProperty(shaka.Player.prototype,"getAudioLanguagesAndRoles",shaka.Player.prototype.getAudioLanguagesAndRoles),goog.exportProperty(shaka.Player.prototype,"selectVariantTrack",shaka.Player.prototype.selectVariantTrack),goog.exportProperty(shaka.Player.prototype,"selectTextTrack",shaka.Player.prototype.selectTextTrack),goog.exportProperty(shaka.Player.prototype,"getThumbnails",shaka.Player.prototype.getThumbnails),goog.exportProperty(shaka.Player.prototype,"getImageTracks",shaka.Player.prototype.getImageTracks),goog.exportProperty(shaka.Player.prototype,"getTextTracks",shaka.Player.prototype.getTextTracks),goog.exportProperty(shaka.Player.prototype,"getVariantTracks",shaka.Player.prototype.getVariantTracks),goog.exportProperty(shaka.Player.prototype,"cancelTrickPlay",shaka.Player.prototype.cancelTrickPlay),goog.exportProperty(shaka.Player.prototype,"trickPlay",shaka.Player.prototype.trickPlay),goog.exportProperty(shaka.Player.prototype,"getPlaybackRate",shaka.Player.prototype.getPlaybackRate),goog.exportProperty(shaka.Player.prototype,"isBuffering",shaka.Player.prototype.isBuffering),goog.exportProperty(shaka.Player.prototype,"getKeyStatuses",shaka.Player.prototype.getKeyStatuses),goog.exportProperty(shaka.Player.prototype,"getExpiration",shaka.Player.prototype.getExpiration),goog.exportProperty(shaka.Player.prototype,"drmInfo",shaka.Player.prototype.drmInfo),goog.exportProperty(shaka.Player.prototype,"keySystem",shaka.Player.prototype.keySystem),goog.exportProperty(shaka.Player.prototype,"seekRange",shaka.Player.prototype.seekRange),goog.exportProperty(shaka.Player.prototype,"isAudioOnly",shaka.Player.prototype.isAudioOnly),goog.exportProperty(shaka.Player.prototype,"isInProgress",shaka.Player.prototype.isInProgress),goog.exportProperty(shaka.Player.prototype,"isLive",shaka.Player.prototype.isLive),goog.exportProperty(shaka.Player.prototype,"getAdManager",shaka.Player.prototype.getAdManager),goog.exportProperty(shaka.Player.prototype,"getAssetUri",shaka.Player.prototype.getAssetUri),goog.exportProperty(shaka.Player.prototype,"getNetworkingEngine",shaka.Player.prototype.getNetworkingEngine),goog.exportProperty(shaka.Player.prototype,"getMediaElement",shaka.Player.prototype.getMediaElement),goog.exportProperty(shaka.Player.prototype,"getLoadMode",shaka.Player.prototype.getLoadMode),goog.exportProperty(shaka.Player.prototype,"resetConfiguration",shaka.Player.prototype.resetConfiguration),goog.exportProperty(shaka.Player.prototype,"getConfiguration",shaka.Player.prototype.getConfiguration),goog.exportProperty(shaka.Player.prototype,"setLogLevel",shaka.Player.prototype.setLogLevel),goog.exportProperty(shaka.Player.prototype,"configure",shaka.Player.prototype.configure),goog.exportProperty(shaka.Player.prototype,"load",shaka.Player.prototype.load),goog.exportProperty(shaka.Player.prototype,"unload",shaka.Player.prototype.unload),goog.exportProperty(shaka.Player.prototype,"detach",shaka.Player.prototype.detach),goog.exportProperty(shaka.Player.prototype,"attach",shaka.Player.prototype.attach),goog.exportProperty(shaka.Player,"probeSupport",shaka.Player.probeSupport),goog.exportProperty(shaka.Player,"isBrowserSupported",shaka.Player.isBrowserSupported),goog.exportProperty(shaka.Player,"setAdManagerFactory",shaka.Player.setAdManagerFactory),goog.exportProperty(shaka.Player,"registerSupportPlugin",shaka.Player.registerSupportPlugin),goog.exportProperty(shaka.Player.prototype,"destroy",shaka.Player.prototype.destroy),shaka.Player.EventName={AbrStatusChanged:"abrstatuschanged",Adaptation:"adaptation",Buffering:"buffering",DrmSessionUpdate:"drmsessionupdate",Emsg:"emsg",Error:"error",ExpirationUpdated:"expirationupdated",LargeGap:"largegap",Loaded:"loaded",Loading:"loading",ManifestChanged:"manifestchanged",ManifestParsed:"manifestparsed",Metadata:"metadata",OnStateChange:"onstatechange",OnStateIdle:"onstateidle",RateChange:"ratechange",SessionDataEvent:"sessiondata",Streaming:"streaming",TextChanged:"textchanged",TextTrackVisibility:"texttrackvisibility",TimelineRegionAdded:"timelineregionadded",TimelineRegionEnter:"timelineregionenter",TimelineRegionExit:"timelineregionexit",TracksChanged:"trackschanged",Unloading:"unloading",VariantChanged:"variantchanged"},shaka.Player.LoadMode={DESTROYED:0,NOT_LOADED:1,MEDIA_SOURCE:2,SRC_EQUALS:3},goog.exportProperty(shaka.Player,"LoadMode",shaka.Player.LoadMode),shaka.Player.TYPICAL_BUFFERING_THRESHOLD_=.5,shaka.Player.version="v4.4.2-dirty-debug",goog.exportProperty(shaka.Player,"version",shaka.Player.version),shaka.Deprecate.init(shaka.Player.version),shaka.Player.restrictedStatuses_=["output-restricted","internal-error"],shaka.Player.supportPlugins_={},shaka.Player.adManagerFactory_=null,shaka.Player.TextTrackLabel="Shaka Player TextTrack",shaka.ads={},shaka.ads.AdsStats=function(){this.loadTimes_=[],this.skipped_=this.playedCompletely_=this.started_=0},shaka.ads.AdsStats.prototype.addLoadTime=function(e){this.loadTimes_.push(e)},shaka.ads.AdsStats.prototype.incrementStarted=function(){this.started_++},shaka.ads.AdsStats.prototype.incrementPlayedCompletely=function(){this.playedCompletely_++},shaka.ads.AdsStats.prototype.incrementSkipped=function(){this.skipped_++},shaka.ads.AdsStats.prototype.getBlob=function(){return{loadTimes:this.loadTimes_,started:this.started_,playedCompletely:this.playedCompletely_,skipped:this.skipped_}},shaka.ads.ClientSideAd=function(e,t){var a=this;this.ad_=e,this.manager_=t,this.isPaused_=!1,this.volume_=this.manager_.getVolume(),this.eventManager_=new shaka.util.EventManager,this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.PAUSED,function(){a.isPaused_=!0}),this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.RESUMED,function(){a.isPaused_=!1})},shaka.ads.ClientSideAd.prototype.getDuration=function(){return this.ad_.getDuration()},shaka.ads.ClientSideAd.prototype.getMinSuggestedDuration=function(){return this.ad_.getMinSuggestedDuration()},shaka.ads.ClientSideAd.prototype.getRemainingTime=function(){return this.manager_.getRemainingTime()},shaka.ads.ClientSideAd.prototype.isPaused=function(){return this.isPaused_},shaka.ads.ClientSideAd.prototype.isSkippable=function(){return 0<=this.ad_.getSkipTimeOffset()},shaka.ads.ClientSideAd.prototype.getTimeUntilSkippable=function(){var e=this.ad_.getSkipTimeOffset(),e=this.getRemainingTime()-e;return Math.max(e,0)},shaka.ads.ClientSideAd.prototype.canSkipNow=function(){return this.manager_.getAdSkippableState()},shaka.ads.ClientSideAd.prototype.skip=function(){return this.manager_.skip()},shaka.ads.ClientSideAd.prototype.setPaused=function(e){this.isPaused_=e},shaka.ads.ClientSideAd.prototype.pause=function(){return this.manager_.pause()},shaka.ads.ClientSideAd.prototype.play=function(){return this.manager_.resume()},shaka.ads.ClientSideAd.prototype.getVolume=function(){return this.manager_.getVolume()},shaka.ads.ClientSideAd.prototype.setVolume=function(e){return this.manager_.setVolume(e)},shaka.ads.ClientSideAd.prototype.isMuted=function(){return 0==this.manager_.getVolume()},shaka.ads.ClientSideAd.prototype.resize=function(e,t){this.manager_.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},shaka.ads.ClientSideAd.prototype.setMuted=function(e){e?(this.volume_=this.getVolume(),this.setVolume(0)):this.setVolume(this.volume_)},shaka.ads.ClientSideAd.prototype.getSequenceLength=function(){var e=this.ad_.getAdPodInfo();return null==e?1:e.getTotalAds()},shaka.ads.ClientSideAd.prototype.getPositionInSequence=function(){var e=this.ad_.getAdPodInfo();return null==e?1:e.getAdPosition()},shaka.ads.ClientSideAd.prototype.release=function(){this.manager_=this.ad_=null},goog.exportSymbol("shaka.ads.ClientSideAd",shaka.ads.ClientSideAd),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"release",shaka.ads.ClientSideAd.prototype.release),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getPositionInSequence",shaka.ads.ClientSideAd.prototype.getPositionInSequence),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getSequenceLength",shaka.ads.ClientSideAd.prototype.getSequenceLength),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setMuted",shaka.ads.ClientSideAd.prototype.setMuted),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"resize",shaka.ads.ClientSideAd.prototype.resize),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isMuted",shaka.ads.ClientSideAd.prototype.isMuted),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setVolume",shaka.ads.ClientSideAd.prototype.setVolume),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getVolume",shaka.ads.ClientSideAd.prototype.getVolume),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"play",shaka.ads.ClientSideAd.prototype.play),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"pause",shaka.ads.ClientSideAd.prototype.pause),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"skip",shaka.ads.ClientSideAd.prototype.skip),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"canSkipNow",shaka.ads.ClientSideAd.prototype.canSkipNow),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ClientSideAd.prototype.getTimeUntilSkippable),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isSkippable",shaka.ads.ClientSideAd.prototype.isSkippable),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isPaused",shaka.ads.ClientSideAd.prototype.isPaused),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getRemainingTime",shaka.ads.ClientSideAd.prototype.getRemainingTime),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ClientSideAd.prototype.getMinSuggestedDuration),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getDuration",shaka.ads.ClientSideAd.prototype.getDuration),shaka.ads.ClientSideAdManager=function(e,t,a,r){var n=this;this.adContainer_=e,this.video_=t,this.requestAdsStartTime_=NaN,this.onEvent_=r,this.ad_=null,this.eventManager_=new shaka.util.EventManager,google.ima.settings.setLocale(a),(e=new google.ima.AdDisplayContainer(this.adContainer_,this.video_)).initialize(),this.adsLoader_=new google.ima.AdsLoader(e),this.adsLoader_.getSettings().setPlayerType("shaka-player"),this.adsLoader_.getSettings().setPlayerVersion(shaka.Player.version),this.imaAdsManager_=null,this.eventManager_.listenOnce(this.adsLoader_,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){n.onAdsManagerLoaded_(e)}),this.eventManager_.listen(this.adsLoader_,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){n.onAdError_(e)}),this.video_.onended=function(){n.adsLoader_.contentComplete()}},shaka.ads.ClientSideAdManager.prototype.requestAds=function(e){goog.asserts.assert(e.adTagUrl||e.adsResponse,"The ad tag needs to be set up before requesting ads, or adsResponse must be filled."),this.requestAdsStartTime_=Date.now()/1e3,this.adsLoader_.requestAds(e)},shaka.ads.ClientSideAdManager.prototype.stop=function(){this.imaAdsManager_&&this.imaAdsManager_.stop(),this.adContainer_&&shaka.util.Dom.removeAllChildren(this.adContainer_)},shaka.ads.ClientSideAdManager.prototype.onAdError_=function(e){shaka.log.warning("There was an ad error from the IMA SDK: "+e.getError()),shaka.log.warning("Resuming playback."),this.onAdComplete_(null),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:[]}))},shaka.ads.ClientSideAdManager.prototype.onAdsManagerLoaded_=function(e){var t=this,a=(goog.asserts.assert(null!=this.video_,"Video should not be null!"),Date.now()/1e3-this.requestAdsStartTime_);if(this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,{loadTime:a})),this.imaAdsManager_=e.getAdsManager(this.video_),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_AD_MANAGER_LOADED,{imaAdManager:this.imaAdsManager_})),(a=this.imaAdsManager_.getCuePoints()).length){e=[];for(var r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next())r=new shaka.ads.CuePoint(r.value),e.push(r);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:e}))}this.addImaEventListeners_();try{this.imaAdsManager_.init(this.video_.offsetWidth,this.video_.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),this.eventManager_.listen(this.video_,"loadeddata",function(){t.imaAdsManager_.resize(t.video_.offsetWidth,t.video_.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),this.imaAdsManager_.start()}catch(e){this.onAdComplete_(null)}},shaka.ads.ClientSideAdManager.prototype.addImaEventListeners_=function(){var t=this;this.eventManager_.listen(this.imaAdsManager_,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){t.onAdError_(e)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(e){t.onAdStart_(e)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.STARTED,function(e){t.onAdStart_(e)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_FIRST_QUARTILE,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.MIDPOINT,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MIDPOINT,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_THIRD_QUARTILE,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.COMPLETE,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_COMPLETE,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(e){t.onAdComplete_(e)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t.onAdComplete_(e)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIPPED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_VOLUME_CHANGED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MUTED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.PAUSED,function(e){goog.asserts.assert(null!=t.ad_,"Ad should not be null!"),t.ad_.setPaused(!0),t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_PAUSED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.RESUMED,function(e){goog.asserts.assert(null!=t.ad_,"Ad should not be null!"),t.ad_.setPaused(!1),t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_RESUMED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(e){goog.asserts.assert(null!=t.ad_,"Ad should not be null!"),t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIP_STATE_CHANGED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CLICK,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_CLICKED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_PROGRESS,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_BUFFERING,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.IMPRESSION,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_IMPRESSION,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_DURATION_CHANGED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.USER_CLOSE,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_CLOSED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOADED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_LOADED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ALL_ADS_COMPLETED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_LINEAR_CHANGED,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_METADATA,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_METADATA,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOG,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_RECOVERABLE_ERROR,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_BREAK_READY,{originalEvent:e}))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.INTERACTION,function(e){t.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_INTERACTION,{originalEvent:e}))})},shaka.ads.ClientSideAdManager.prototype.onAdStart_=function(e){goog.asserts.assert(this.imaAdsManager_,"Should have an ads manager at this point!");var t=e.getAd();this.ad_=new shaka.ads.ClientSideAd(t,this.imaAdsManager_),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,{ad:this.ad_,sdkAdObject:t,originalEvent:e})),this.adContainer_.setAttribute("ad-active","true"),this.video_.pause()},shaka.ads.ClientSideAdManager.prototype.onAdComplete_=function(e){this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED,{originalEvent:e})),this.adContainer_.removeAttribute("ad-active"),this.video_.play()},shaka.ads.ServerSideAd=function(e,t){this.ad_=e,this.adProgressData_=null,this.video_=t},shaka.ads.ServerSideAd.prototype.setProgressData=function(e){this.adProgressData_=e},shaka.ads.ServerSideAd.prototype.getDuration=function(){return this.adProgressData_?this.adProgressData_.duration:-1},shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration=function(){return this.getDuration()},shaka.ads.ServerSideAd.prototype.getRemainingTime=function(){return this.adProgressData_?this.adProgressData_.duration-this.adProgressData_.currentTime:-1},shaka.ads.ServerSideAd.prototype.isPaused=function(){return this.video_.paused},shaka.ads.ServerSideAd.prototype.isSkippable=function(){return this.ad_.isSkippable()},shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable=function(){var e=this.ad_.getSkipTimeOffset(),e=this.getRemainingTime()-e;return Math.max(e,0)},shaka.ads.ServerSideAd.prototype.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},shaka.ads.ServerSideAd.prototype.skip=function(){this.video_.currentTime+=this.getRemainingTime()},shaka.ads.ServerSideAd.prototype.pause=function(){return this.video_.pause()},shaka.ads.ServerSideAd.prototype.play=function(){return this.video_.play()},shaka.ads.ServerSideAd.prototype.getVolume=function(){return this.video_.volume},shaka.ads.ServerSideAd.prototype.setVolume=function(e){this.video_.volume=e},shaka.ads.ServerSideAd.prototype.isMuted=function(){return this.video_.muted},shaka.ads.ServerSideAd.prototype.resize=function(e,t){},shaka.ads.ServerSideAd.prototype.setMuted=function(e){this.video_.muted=e},shaka.ads.ServerSideAd.prototype.getSequenceLength=function(){var e=this.ad_.getAdPodInfo();return null==e?1:e.getTotalAds()},shaka.ads.ServerSideAd.prototype.getPositionInSequence=function(){var e=this.ad_.getAdPodInfo();return null==e?1:e.getAdPosition()},shaka.ads.ServerSideAd.prototype.release=function(){this.video_=this.adProgressData_=this.ad_=null},goog.exportSymbol("shaka.ads.ServerSideAd",shaka.ads.ServerSideAd),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"release",shaka.ads.ServerSideAd.prototype.release),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getPositionInSequence",shaka.ads.ServerSideAd.prototype.getPositionInSequence),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getSequenceLength",shaka.ads.ServerSideAd.prototype.getSequenceLength),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"setMuted",shaka.ads.ServerSideAd.prototype.setMuted),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"resize",shaka.ads.ServerSideAd.prototype.resize),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isMuted",shaka.ads.ServerSideAd.prototype.isMuted),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"setVolume",shaka.ads.ServerSideAd.prototype.setVolume),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getVolume",shaka.ads.ServerSideAd.prototype.getVolume),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"play",shaka.ads.ServerSideAd.prototype.play),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"pause",shaka.ads.ServerSideAd.prototype.pause),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"skip",shaka.ads.ServerSideAd.prototype.skip),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"canSkipNow",shaka.ads.ServerSideAd.prototype.canSkipNow),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isSkippable",shaka.ads.ServerSideAd.prototype.isSkippable),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isPaused",shaka.ads.ServerSideAd.prototype.isPaused),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getRemainingTime",shaka.ads.ServerSideAd.prototype.getRemainingTime),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getDuration",shaka.ads.ServerSideAd.prototype.getDuration),shaka.ads.ServerSideAdManager=function(e,t,a,r){var n=this;this.adContainer_=e,this.video_=t,this.streamPromise_=null,this.streamRequestStartTime_=NaN,this.onEvent_=r,this.isLiveContent_=!1,this.adProgressData_=this.ad_=this.snapForwardTime_=null,this.backupUrl_="",this.eventManager_=new shaka.util.EventManager,(e=new google.ima.dai.api.UiSettings).setLocale(a),this.streamManager_=new google.ima.dai.api.StreamManager(this.video_,this.adContainer_,e),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED,{imaStreamManager:this.streamManager_})),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){shaka.log.info("Ad SS Loaded"),n.onLoaded_(e)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.ERROR,function(){shaka.log.info("Ad SS Error"),n.onError_()}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){shaka.log.info("Ad Break Started")}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){shaka.log.info("Ad Started"),n.onAdStart_(e)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){shaka.log.info("Ad Break Ended"),n.onAdBreakEnded_()}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){n.onAdProgress_(e)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){shaka.log.info("Ad event: First Quartile"),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_FIRST_QUARTILE))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){shaka.log.info("Ad event: Midpoint"),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MIDPOINT))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){shaka.log.info("Ad event: Third Quartile"),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_THIRD_QUARTILE))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){shaka.log.info("Ad event: Complete"),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_COMPLETE)),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED)),n.adContainer_.removeAttribute("ad-active"),n.ad_=null}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){shaka.log.info("Ad event: Skipped"),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIPPED)),n.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){shaka.log.info("Ad event: Cue points changed"),n.onCuePointsChanged_(e)})},shaka.ads.ServerSideAdManager.prototype.streamRequest=function(e,t){return this.streamPromise_?Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CURRENT_DAI_REQUEST_NOT_FINISHED)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(this.isLiveContent_=!0),this.streamPromise_=new shaka.util.PublicPromise,this.streamManager_.requestStream(e),this.backupUrl_=t||"",this.streamRequestStartTime_=Date.now()/1e3,this.streamPromise_)},shaka.ads.ServerSideAdManager.prototype.replaceAdTagParameters=function(e){this.streamManager_.replaceAdTagParameters(e)},shaka.ads.ServerSideAdManager.prototype.stop=function(){this.streamManager_.reset(),this.backupUrl_="",this.snapForwardTime_=null},shaka.ads.ServerSideAdManager.prototype.onTimedMetadata=function(e,t,a){this.streamManager_.processMetadata(e,t,a)},shaka.ads.ServerSideAdManager.prototype.onCueMetadataChange=function(e){var t;e.key&&e.data&&((t={})[e.key]=e.data,this.streamManager_.onTimedMetadata(t))},shaka.ads.ServerSideAdManager.prototype.checkForSnapback_=function(){var e,t=this.video_.currentTime;0!=t&&(this.streamManager_.streamTimeForContentTime(t),e=this.streamManager_.previousCuePointForStreamTime(t))&&!e.played&&(shaka.log.info("Seeking back to the start of the ad break at "+e.start+" and will return to "+t),this.snapForwardTime_=t,this.video_.currentTime=e.start)},shaka.ads.ServerSideAdManager.prototype.onAdStart_=function(e){goog.asserts.assert(this.streamManager_,"Should have a stream manager at this point!"),e=e.getAd(),this.ad_=new shaka.ads.ServerSideAd(e,this.video_),this.adProgressData_&&this.ad_.setProgressData(this.adProgressData_),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,{ad:this.ad_})),this.adContainer_.setAttribute("ad-active","true")},shaka.ads.ServerSideAdManager.prototype.onAdBreakEnded_=function(){this.adContainer_.removeAttribute("ad-active");var e=this.video_.currentTime;this.snapForwardTime_&&this.snapForwardTime_>e&&(this.video_.currentTime=this.snapForwardTime_,this.snapForwardTime_=null)},shaka.ads.ServerSideAdManager.prototype.onLoaded_=function(e){var t=this,a=Date.now()/1e3-this.streamRequestStartTime_;this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,{loadTime:a})),e=e.getStreamData().url,this.streamPromise_.resolve(e),this.streamPromise_=null,this.isLiveContent_||this.eventManager_.listen(this.video_,"seeked",function(){t.checkForSnapback_()})},shaka.ads.ServerSideAdManager.prototype.onError_=function(){this.backupUrl_.length?(shaka.log.warning("IMA stream request returned an error. Falling back to the backup asset uri."),this.streamPromise_.resolve(this.backupUrl_)):this.streamPromise_.reject("IMA Stream request returned an error and there was no backup asset uri provided."),this.streamPromise_=null},shaka.ads.ServerSideAdManager.prototype.onAdProgress_=function(e){this.adProgressData_=e.getStreamData().adProgressData,this.ad_&&this.ad_.setProgressData(this.adProgressData_)},shaka.ads.ServerSideAdManager.prototype.onCuePointsChanged_=function(e){var t=e.getStreamData();e=[];for(var a=(t=$jscomp.makeIterator(t.cuepoints)).next();!a.done;a=t.next())a=a.value,a=new shaka.ads.CuePoint(a.start,a.end),e.push(a);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:e}))},shaka.ads.AdManager=function(){shaka.util.FakeEventTarget.call(this),this.ssAdManager_=this.csAdManager_=null,this.stats_=new shaka.ads.AdsStats,this.locale_=navigator.language},$jscomp.inherits(shaka.ads.AdManager,shaka.util.FakeEventTarget),shaka.ads.AdManager.prototype.setLocale=function(e){this.locale_=e},shaka.ads.AdManager.prototype.initClientSide=function(e,t){var a=this;if(!window.google||!google.ima||!google.ima.AdsLoader)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_IMA_SDK_MISSING);this.csAdManager_=new shaka.ads.ClientSideAdManager(e,t,this.locale_,function(e){if(e&&e.type)switch(e.type){case shaka.ads.AdManager.ADS_LOADED:a.stats_.addLoadTime(e.loadTime);break;case shaka.ads.AdManager.AD_STARTED:a.stats_.incrementStarted();break;case shaka.ads.AdManager.AD_COMPLETE:a.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:a.stats_.incrementSkipped()}a.dispatchEvent(e)})},shaka.ads.AdManager.prototype.onAssetUnload=function(){this.csAdManager_&&this.csAdManager_.stop(),this.dispatchEvent(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED)),this.stats_=new shaka.ads.AdsStats},shaka.ads.AdManager.prototype.requestClientSideAds=function(e){if(!this.csAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_AD_MANAGER_NOT_INITIALIZED);this.csAdManager_.requestAds(e)},shaka.ads.AdManager.prototype.initServerSide=function(e,t){var a=this;if(!window.google||!google.ima||!google.ima.dai)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_IMA_SDK_MISSING);this.ssAdManager_=new shaka.ads.ServerSideAdManager(e,t,this.locale_,function(e){if(e&&e.type)switch(e.type){case shaka.ads.AdManager.ADS_LOADED:a.stats_.addLoadTime(e.loadTime);break;case shaka.ads.AdManager.AD_STARTED:a.stats_.incrementStarted();break;case shaka.ads.AdManager.AD_COMPLETE:a.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:a.stats_.incrementSkipped()}a.dispatchEvent(e)})},shaka.ads.AdManager.prototype.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);e.adTagParameters||(e.adTagParameters={});var a=e.adTagParameters;return(a.mpt||a.mpv)&&shaka.log.alwaysWarn('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv=shaka.Player.version,this.ssAdManager_.streamRequest(e,t)},shaka.ads.AdManager.prototype.replaceServerSideAdTagParameters=function(e){if(!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);(e.mpt||e.mpv)&&shaka.log.alwaysWarn('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv=shaka.Player.version,this.ssAdManager_.replaceAdTagParameters(e)},shaka.ads.AdManager.prototype.getStats=function(){return this.stats_.getBlob()},shaka.ads.AdManager.prototype.onDashTimedMetadata=function(e){var t,a;this.ssAdManager_&&"urn:google:dai:2018"==e.schemeIdUri&&(t=e.schemeIdUri,a=e.eventElement?e.eventElement.getAttribute("messageData"):null,this.ssAdManager_.onTimedMetadata(t,a,e.startTime))},shaka.ads.AdManager.prototype.onHlsTimedMetadata=function(e,t){this.ssAdManager_?this.ssAdManager_.onTimedMetadata("ID3",e.data,t):shaka.log.warning("ID3 metadata processing was called without initializing server side ad logic. Ad-related metadata will not take effect")},shaka.ads.AdManager.prototype.onCueMetadataChange=function(e){this.ssAdManager_?this.ssAdManager_.onCueMetadataChange(e):shaka.log.warning("ID3 metadata processing was called without initializing server side ad logic. Ad-related metadata will not take effect")},goog.exportSymbol("shaka.ads.AdManager",shaka.ads.AdManager),goog.exportProperty(shaka.ads.AdManager.prototype,"onCueMetadataChange",shaka.ads.AdManager.prototype.onCueMetadataChange),goog.exportProperty(shaka.ads.AdManager.prototype,"onHlsTimedMetadata",shaka.ads.AdManager.prototype.onHlsTimedMetadata),goog.exportProperty(shaka.ads.AdManager.prototype,"onDashTimedMetadata",shaka.ads.AdManager.prototype.onDashTimedMetadata),goog.exportProperty(shaka.ads.AdManager.prototype,"getStats",shaka.ads.AdManager.prototype.getStats),goog.exportProperty(shaka.ads.AdManager.prototype,"replaceServerSideAdTagParameters",shaka.ads.AdManager.prototype.replaceServerSideAdTagParameters),goog.exportProperty(shaka.ads.AdManager.prototype,"requestServerSideStream",shaka.ads.AdManager.prototype.requestServerSideStream),goog.exportProperty(shaka.ads.AdManager.prototype,"initServerSide",shaka.ads.AdManager.prototype.initServerSide),goog.exportProperty(shaka.ads.AdManager.prototype,"requestClientSideAds",shaka.ads.AdManager.prototype.requestClientSideAds),goog.exportProperty(shaka.ads.AdManager.prototype,"onAssetUnload",shaka.ads.AdManager.prototype.onAssetUnload),goog.exportProperty(shaka.ads.AdManager.prototype,"initClientSide",shaka.ads.AdManager.prototype.initClientSide),goog.exportProperty(shaka.ads.AdManager.prototype,"setLocale",shaka.ads.AdManager.prototype.setLocale),shaka.ads.CuePoint=function(e,t){this.start=e,this.end=void 0===t?null:t},shaka.ads.AdManager.ADS_LOADED="ads-loaded",goog.exportProperty(shaka.ads.AdManager,"ADS_LOADED",shaka.ads.AdManager.ADS_LOADED),shaka.ads.AdManager.AD_STARTED="ad-started",goog.exportProperty(shaka.ads.AdManager,"AD_STARTED",shaka.ads.AdManager.AD_STARTED),shaka.ads.AdManager.AD_FIRST_QUARTILE="ad-first-quartile",goog.exportProperty(shaka.ads.AdManager,"AD_FIRST_QUARTILE",shaka.ads.AdManager.AD_FIRST_QUARTILE),shaka.ads.AdManager.AD_MIDPOINT="ad-midpoint",goog.exportProperty(shaka.ads.AdManager,"AD_MIDPOINT",shaka.ads.AdManager.AD_MIDPOINT),shaka.ads.AdManager.AD_THIRD_QUARTILE="ad-third-quartile",goog.exportProperty(shaka.ads.AdManager,"AD_THIRD_QUARTILE",shaka.ads.AdManager.AD_THIRD_QUARTILE),shaka.ads.AdManager.AD_COMPLETE="ad-complete",goog.exportProperty(shaka.ads.AdManager,"AD_COMPLETE",shaka.ads.AdManager.AD_COMPLETE),shaka.ads.AdManager.AD_STOPPED="ad-stopped",goog.exportProperty(shaka.ads.AdManager,"AD_STOPPED",shaka.ads.AdManager.AD_STOPPED),shaka.ads.AdManager.AD_SKIPPED="ad-skipped",goog.exportProperty(shaka.ads.AdManager,"AD_SKIPPED",shaka.ads.AdManager.AD_SKIPPED),shaka.ads.AdManager.AD_VOLUME_CHANGED="ad-volume-changed",goog.exportProperty(shaka.ads.AdManager,"AD_VOLUME_CHANGED",shaka.ads.AdManager.AD_VOLUME_CHANGED),shaka.ads.AdManager.AD_MUTED="ad-muted",goog.exportProperty(shaka.ads.AdManager,"AD_MUTED",shaka.ads.AdManager.AD_MUTED),shaka.ads.AdManager.AD_PAUSED="ad-paused",goog.exportProperty(shaka.ads.AdManager,"AD_PAUSED",shaka.ads.AdManager.AD_PAUSED),shaka.ads.AdManager.AD_RESUMED="ad-resumed",goog.exportProperty(shaka.ads.AdManager,"AD_RESUMED",shaka.ads.AdManager.AD_RESUMED),shaka.ads.AdManager.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",goog.exportProperty(shaka.ads.AdManager,"AD_SKIP_STATE_CHANGED",shaka.ads.AdManager.AD_SKIP_STATE_CHANGED),shaka.ads.AdManager.CUEPOINTS_CHANGED="ad-cue-points-changed",goog.exportProperty(shaka.ads.AdManager,"CUEPOINTS_CHANGED",shaka.ads.AdManager.CUEPOINTS_CHANGED),shaka.ads.AdManager.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",goog.exportProperty(shaka.ads.AdManager,"IMA_AD_MANAGER_LOADED",shaka.ads.AdManager.IMA_AD_MANAGER_LOADED),shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",goog.exportProperty(shaka.ads.AdManager,"IMA_STREAM_MANAGER_LOADED",shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED),shaka.ads.AdManager.AD_CLICKED="ad-clicked",goog.exportProperty(shaka.ads.AdManager,"AD_CLICKED",shaka.ads.AdManager.AD_CLICKED),shaka.ads.AdManager.AD_PROGRESS="ad-progress",goog.exportProperty(shaka.ads.AdManager,"AD_PROGRESS",shaka.ads.AdManager.AD_PROGRESS),shaka.ads.AdManager.AD_BUFFERING="ad-buffering",goog.exportProperty(shaka.ads.AdManager,"AD_BUFFERING",shaka.ads.AdManager.AD_BUFFERING),shaka.ads.AdManager.AD_IMPRESSION="ad-impression",goog.exportProperty(shaka.ads.AdManager,"AD_IMPRESSION",shaka.ads.AdManager.AD_IMPRESSION),shaka.ads.AdManager.AD_DURATION_CHANGED="ad-duration-changed",goog.exportProperty(shaka.ads.AdManager,"AD_DURATION_CHANGED",shaka.ads.AdManager.AD_DURATION_CHANGED),shaka.ads.AdManager.AD_CLOSED="ad-closed",goog.exportProperty(shaka.ads.AdManager,"AD_CLOSED",shaka.ads.AdManager.AD_CLOSED),shaka.ads.AdManager.AD_LOADED="ad-loaded",goog.exportProperty(shaka.ads.AdManager,"AD_LOADED",shaka.ads.AdManager.AD_LOADED),shaka.ads.AdManager.ALL_ADS_COMPLETED="all-ads-completed",goog.exportProperty(shaka.ads.AdManager,"ALL_ADS_COMPLETED",shaka.ads.AdManager.ALL_ADS_COMPLETED),shaka.ads.AdManager.AD_LINEAR_CHANGED="ad-linear-changed",goog.exportProperty(shaka.ads.AdManager,"AD_LINEAR_CHANGED",shaka.ads.AdManager.AD_LINEAR_CHANGED),shaka.ads.AdManager.AD_METADATA="ad-metadata",goog.exportProperty(shaka.ads.AdManager,"AD_METADATA",shaka.ads.AdManager.AD_METADATA),shaka.ads.AdManager.AD_RECOVERABLE_ERROR="ad-recoverable-error",goog.exportProperty(shaka.ads.AdManager,"AD_RECOVERABLE_ERROR",shaka.ads.AdManager.AD_RECOVERABLE_ERROR),shaka.ads.AdManager.AD_BREAK_READY="ad-break-ready",goog.exportProperty(shaka.ads.AdManager,"AD_BREAK_READY",shaka.ads.AdManager.AD_BREAK_READY),shaka.ads.AdManager.AD_INTERACTION="ad-interaction",goog.exportProperty(shaka.ads.AdManager,"AD_INTERACTION",shaka.ads.AdManager.AD_INTERACTION),shaka.Player.setAdManagerFactory(function(){return new shaka.ads.AdManager}),shaka.cast={},shaka.cast.CastUtils=function(){},shaka.cast.CastUtils.serialize=function(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof shaka.util.FakeEvent){var a,r={};for(a in t){var n=t[a];n&&"object"==(void 0===n?"undefined":_typeof(n))?"detail"==a&&(r[a]=n):a in Event||(r[a]=n)}return r}return t instanceof Error?shaka.cast.CastUtils.unpackError_(t):t instanceof TimeRanges?shaka.cast.CastUtils.unpackTimeRanges_(t):t instanceof Uint8Array?shaka.cast.CastUtils.unpackUint8Array_(t):"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t}})},shaka.cast.CastUtils.deserialize=function(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==(void 0===t?"undefined":_typeof(t))&&"TimeRanges"==t.__type__?shaka.cast.CastUtils.simulateTimeRanges_(t):t&&"object"==(void 0===t?"undefined":_typeof(t))&&"Uint8Array"==t.__type__?shaka.cast.CastUtils.makeUint8Array_(t):t&&"object"==(void 0===t?"undefined":_typeof(t))&&"Error"==t.__type__?shaka.cast.CastUtils.makeError_(t):t})},shaka.cast.CastUtils.unpackTimeRanges_=function(e){for(var t={__type__:"TimeRanges",length:e.length,start:[],end:[]},a=(e=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(e))).next();!a.done;a=e.next()){var r=(a=a.value).end;t.start.push(a.start),t.end.push(r)}return t},shaka.cast.CastUtils.simulateTimeRanges_=function(t){return{length:t.length,start:function(e){return t.start[e]},end:function(e){return t.end[e]}}},shaka.cast.CastUtils.unpackUint8Array_=function(e){return{__type__:"Uint8Array",entries:Array.from(e)}},shaka.cast.CastUtils.makeUint8Array_=function(e){return new Uint8Array(e.entries)},shaka.cast.CastUtils.unpackError_=function(e){var t=new Set(["name","message","stack"]);for(r in e)t.add(r);for(var a=$jscomp.makeIterator(Object.getOwnPropertyNames(e)),r=a.next();!r.done;r=a.next())t.add(r.value);for(a={},r=(t=$jscomp.makeIterator(t)).next();!r.done;r=t.next())a[r=r.value]=e[r];return{__type__:"Error",contents:a}},shaka.cast.CastUtils.makeError_=function(e){e=e.contents;var t,a=Error(e.message);for(t in e)a[t]=e[t];return a},shaka.cast.CastUtils.VideoEvents="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),shaka.cast.CastUtils.VideoAttributes="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),shaka.cast.CastUtils.VideoInitStateAttributes=["loop","playbackRate"],shaka.cast.CastUtils.VideoVoidMethods=["pause","play"],shaka.cast.CastUtils.PlayerGetterMethods={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},shaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},shaka.cast.CastUtils.PlayerInitState=[["getConfiguration","configure"]],shaka.cast.CastUtils.PlayerInitAfterLoadState=[["isTextTrackVisible","setTextTrackVisibility"]],shaka.cast.CastUtils.PlayerVoidMethods="addTextTrack addTextTrackAsync cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),shaka.cast.CastUtils.PlayerPromiseMethods=["attach","detach","load","unload"],shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE="urn:x-cast:com.google.shaka.v2",shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media",shaka.cast.CastSender=function(e,t,a,r,n,i){var o=this;this.receiverAppId_=e,this.statusChangeTimer_=new shaka.util.Timer(t),this.onFirstCastStateUpdate_=a,this.hasJoinedExistingSession_=!1,this.onRemoteEvent_=r,this.onResumeLocal_=n,this.onInitStateRequired_=i,this.isCasting_=this.apiReady_=!1,this.receiverName_="",this.appData_=null,this.onConnectionStatusChangedBound_=function(){return o.onConnectionStatusChanged_()},this.onMessageReceivedBound_=function(e,t){return o.onMessageReceived_(e,t)},this.cachedProperties_={video:{},player:{}},this.nextAsyncCallId_=0,this.asyncCallPromises_={},this.castPromise_=null,shaka.cast.CastSender.instances_.add(this)},shaka.cast.CastSender.prototype.destroy=function(){return shaka.cast.CastSender.instances_.delete(this),this.rejectAllPromises_(),shaka.cast.CastSender.session_&&this.removeListeners_(),this.statusChangeTimer_&&(this.statusChangeTimer_.stop(),this.statusChangeTimer_=null),this.onResumeLocal_=this.onRemoteEvent_=null,this.isCasting_=this.apiReady_=!1,this.onMessageReceivedBound_=this.onConnectionStatusChangedBound_=this.castPromise_=this.asyncCallPromises_=this.cachedProperties_=this.appData_=null,Promise.resolve()},shaka.cast.CastSender.prototype.apiReady=function(){return this.apiReady_},shaka.cast.CastSender.prototype.hasReceivers=function(){return shaka.cast.CastSender.hasReceivers_},shaka.cast.CastSender.prototype.isCasting=function(){return this.isCasting_},shaka.cast.CastSender.prototype.receiverName=function(){return this.receiverName_},shaka.cast.CastSender.prototype.hasRemoteProperties=function(){return 0!=Object.keys(this.cachedProperties_.video).length},shaka.cast.CastSender.prototype.init=function(){var e,t=shaka.cast.CastSender;this.receiverAppId_.length&&(window.chrome&&chrome.cast&&chrome.cast.isAvailable?(this.apiReady_=!0,this.statusChangeTimer_.tickNow(),e=new chrome.cast.SessionRequest(this.receiverAppId_),e=new chrome.cast.ApiConfig(e,function(e){return t.onExistingSessionJoined_(e)},function(e){return t.onReceiverStatusChanged_(e)},"origin_scoped"),chrome.cast.initialize(e,function(){shaka.log.debug("CastSender: init")},function(e){shaka.log.error("CastSender: init error",e)}),shaka.cast.CastSender.hasReceivers_&&this.statusChangeTimer_.tickAfter(shaka.cast.CastSender.STATUS_DELAY),(e=shaka.cast.CastSender.session_)&&e.status!=chrome.cast.SessionStatus.STOPPED?(shaka.log.debug("CastSender: re-using existing connection"),this.onExistingSessionJoined_(e)):shaka.cast.CastSender.session_=null):(window.__onGCastApiAvailable||(window.__onGCastApiAvailable=shaka.cast.CastSender.onSdkLoaded_),window.__onGCastApiAvailable!=shaka.cast.CastSender.onSdkLoaded_&&shaka.log.alwaysWarn("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")))},shaka.cast.CastSender.prototype.setAppData=function(e){this.appData_=e,this.isCasting_&&this.sendMessage_({type:"appData",appData:this.appData_})},shaka.cast.CastSender.prototype.cast=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!a.apiReady_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_API_UNAVAILABLE);if(!shaka.cast.CastSender.hasReceivers_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.NO_CAST_RECEIVERS);if(a.isCasting_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.ALREADY_CASTING);return a.castPromise_=new shaka.util.PublicPromise,chrome.cast.requestSession(function(e){return a.onSessionInitiated_(t,e)},function(e){return a.onConnectionError_(e)}),e.yield(a.castPromise_,0)})},shaka.cast.CastSender.prototype.showDisconnectDialog=function(){var t,a=this;this.isCasting_&&(t=this.onInitStateRequired_(),chrome.cast.requestSession(function(e){return a.onSessionInitiated_(t,e)},function(e){return a.onConnectionError_(e)}))},shaka.cast.CastSender.prototype.forceDisconnect=function(){if(this.isCasting_){if(this.rejectAllPromises_(),shaka.cast.CastSender.session_){this.removeListeners_();try{shaka.cast.CastSender.session_.stop(function(){},function(){})}catch(e){}shaka.cast.CastSender.session_=null}this.onConnectionStatusChanged_()}},shaka.cast.CastSender.prototype.get=function(r,n){var i=this,e=(goog.asserts.assert("video"==r||"player"==r,"Unexpected target name"),shaka.cast.CastUtils);if("video"==r){if(e.VideoVoidMethods.includes(n))return function(e){for(var t=[],a=0;a<arguments.length;++a)t[+a]=arguments[a];return i.remoteCall_.apply(i,[r,n].concat($jscomp.arrayFromIterable(t)))}}else if("player"==r){if(e.PlayerGetterMethodsThatRequireLive[n]){var t=this.get("player","isLive")();if(goog.asserts.assert(t,n+" should be called on a live stream!"),!t)return function(){}}if(e.PlayerVoidMethods.includes(n))return function(e){for(var t=[],a=0;a<arguments.length;++a)t[+a]=arguments[a];return i.remoteCall_.apply(i,[r,n].concat($jscomp.arrayFromIterable(t)))};if(e.PlayerPromiseMethods.includes(n))return function(e){for(var t=[],a=0;a<arguments.length;++a)t[+a]=arguments[a];return i.remoteAsyncCall_.apply(i,[r,n].concat($jscomp.arrayFromIterable(t)))};if(e.PlayerGetterMethods[n])return function(){return i.propertyGetter_(r,n)}}return this.propertyGetter_(r,n)},shaka.cast.CastSender.prototype.set=function(e,t,a){goog.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]=a,this.sendMessage_({type:"set",targetName:e,property:t,value:a})},shaka.cast.CastSender.prototype.onSessionInitiated_=function(e,t){shaka.log.debug("CastSender: onSessionInitiated"),this.onSessionCreated_(t),this.sendMessage_({type:"init",initState:e,appData:this.appData_}),this.castPromise_.resolve()},shaka.cast.CastSender.prototype.onConnectionError_=function(e){var t=shaka.util.Error.Code.UNEXPECTED_CAST_ERROR;switch(e.code){case"cancel":t=shaka.util.Error.Code.CAST_CANCELED_BY_USER;break;case"timeout":t=shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT;break;case"receiver_unavailable":t=shaka.util.Error.Code.CAST_RECEIVER_APP_UNAVAILABLE}this.castPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,t,e))},shaka.cast.CastSender.prototype.propertyGetter_=function(e,t){return goog.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]},shaka.cast.CastSender.prototype.remoteCall_=function(e,t,a){for(var r=[],n=2;n<arguments.length;++n)r[n-2]=arguments[n];goog.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.sendMessage_({type:"call",targetName:e,methodName:t,args:r})},shaka.cast.CastSender.prototype.remoteAsyncCall_=function(e,t,a){for(var r=[],n=2;n<arguments.length;++n)r[n-2]=arguments[n];goog.asserts.assert("video"==e||"player"==e,"Unexpected target name");var n=new shaka.util.PublicPromise,i=this.nextAsyncCallId_.toString();this.nextAsyncCallId_++,this.asyncCallPromises_[i]=n;try{this.sendMessage_({type:"asyncCall",targetName:e,methodName:t,args:r,id:i})}catch(e){n.reject(e)}return n},shaka.cast.CastSender.onExistingSessionJoined_=function(e){for(var t=$jscomp.makeIterator(shaka.cast.CastSender.instances_),a=t.next();!a.done;a=t.next())a.value.onExistingSessionJoined_(e)},shaka.cast.CastSender.prototype.onExistingSessionJoined_=function(e){shaka.log.debug("CastSender: onExistingSessionJoined");var t=this.onInitStateRequired_();this.castPromise_=new shaka.util.PublicPromise,this.hasJoinedExistingSession_=!0,this.onSessionInitiated_(t,e)},shaka.cast.CastSender.onReceiverStatusChanged_=function(e){for(var t=$jscomp.makeIterator(shaka.cast.CastSender.instances_),a=t.next();!a.done;a=t.next())a.value.onReceiverStatusChanged_(e)},shaka.cast.CastSender.prototype.onReceiverStatusChanged_=function(e){shaka.log.debug("CastSender: receiver status",e),shaka.cast.CastSender.hasReceivers_="available"==e,this.statusChangeTimer_.tickNow()},shaka.cast.CastSender.prototype.onSessionCreated_=function(e){(shaka.cast.CastSender.session_=e).addUpdateListener(this.onConnectionStatusChangedBound_),e.addMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_),this.onConnectionStatusChanged_()},shaka.cast.CastSender.prototype.removeListeners_=function(){var e=shaka.cast.CastSender.session_;e.removeUpdateListener(this.onConnectionStatusChangedBound_),e.removeMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_)},shaka.cast.CastSender.prototype.onConnectionStatusChanged_=function(){var e=!!shaka.cast.CastSender.session_&&"connected"==shaka.cast.CastSender.session_.status;if(shaka.log.debug("CastSender: connection status",e),this.isCasting_&&!e){for(var t in this.onResumeLocal_(),this.cachedProperties_)this.cachedProperties_[t]={};this.rejectAllPromises_()}this.receiverName_=(this.isCasting_=e)?shaka.cast.CastSender.session_.receiver.friendlyName:"",this.statusChangeTimer_.tickNow()},shaka.cast.CastSender.prototype.rejectAllPromises_=function(){for(var e in this.asyncCallPromises_){var t=this.asyncCallPromises_[e];delete this.asyncCallPromises_[e],t.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED))}},shaka.cast.CastSender.prototype.onMessageReceived_=function(e,t){var a=shaka.cast.CastUtils.deserialize(t);switch(shaka.log.v2("CastSender: message",a),a.type){case"event":var r=a.targetName,a=a.event;a=new shaka.util.FakeEvent(a.type,a),this.onRemoteEvent_(r,a);break;case"update":for(var n in r=a.update)for(var i in a=this.cachedProperties_[n]||{},r[n])a[i]=r[n][i];this.hasJoinedExistingSession_&&(this.onFirstCastStateUpdate_(),this.hasJoinedExistingSession_=!1);break;case"asyncComplete":if(n=a.id,a=a.error,i=this.asyncCallPromises_[n],delete this.asyncCallPromises_[n],goog.asserts.assert(i,"Unexpected async id"),i)if(a){for(r in n=new shaka.util.Error(a.severity,a.category,a.code),a)n[r]=a[r];i.reject(n)}else i.resolve()}},shaka.cast.CastSender.prototype.sendMessage_=function(t){t=shaka.cast.CastUtils.serialize(t);var a=shaka.cast.CastSender.session_;try{a.sendMessage(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,t,function(){},shaka.log.error)}catch(e){throw shaka.log.error("Cast session sendMessage threw",e),t=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT,e),a=new shaka.util.FakeEvent("error",{detail:t}),this.onRemoteEvent_("player",a),this.forceDisconnect(),t}},shaka.cast.CastSender.STATUS_DELAY=.02,shaka.cast.CastSender.hasReceivers_=!1,shaka.cast.CastSender.session_=null,shaka.cast.CastSender.instances_=new Set,shaka.cast.CastSender.onSdkLoaded_=function(e){if(e)for(var t=(e=$jscomp.makeIterator(shaka.cast.CastSender.instances_)).next();!t.done;t=e.next())t.value.init()},shaka.cast.CastProxy=function(e,t,a){shaka.util.FakeEventTarget.call(this);var r=this;this.localVideo_=e,this.localPlayer_=t,this.eventManager_=this.playerEventTarget_=this.videoEventTarget_=this.playerProxy_=this.videoProxy_=null,this.receiverAppId_=a,this.compiledToExternNames_=new Map,this.sender_=new shaka.cast.CastSender(a,function(){return r.onCastStatusChanged_()},function(){return r.onFirstCastStateUpdate_()},function(e,t){return r.onRemoteEvent_(e,t)},function(){return r.onResumeLocal_()},function(){return r.getInitState_()}),this.init_()},$jscomp.inherits(shaka.cast.CastProxy,shaka.util.FakeEventTarget),shaka.cast.CastProxy.prototype.destroy=function(e){return e&&this.sender_.forceDisconnect(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),e=[],this.localPlayer_&&(e.push(this.localPlayer_.destroy()),this.localPlayer_=null),this.sender_&&(e.push(this.sender_.destroy()),this.sender_=null),this.playerProxy_=this.videoProxy_=this.localVideo_=null,Promise.all(e)},shaka.cast.CastProxy.prototype.getVideo=function(){return this.videoProxy_},shaka.cast.CastProxy.prototype.getPlayer=function(){return this.playerProxy_},shaka.cast.CastProxy.prototype.canCast=function(){return this.sender_.apiReady()&&this.sender_.hasReceivers()},shaka.cast.CastProxy.prototype.isCasting=function(){return this.sender_.isCasting()},shaka.cast.CastProxy.prototype.receiverName=function(){return this.sender_.receiverName()},shaka.cast.CastProxy.prototype.cast=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=a.getInitState_(),e.yield(a.sender_.cast(t),2)):a.localPlayer_?e.yield(a.localPlayer_.unload(),0):e.return()})},shaka.cast.CastProxy.prototype.setAppData=function(e){this.sender_.setAppData(e)},shaka.cast.CastProxy.prototype.suggestDisconnect=function(){this.sender_.showDisconnectDialog()},shaka.cast.CastProxy.prototype.forceDisconnect=function(){this.sender_.forceDisconnect()},shaka.cast.CastProxy.prototype.changeReceiverId=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return t==a.receiverAppId_?e.return():(a.receiverAppId_=t,a.sender_.forceDisconnect(),e.yield(a.sender_.destroy(),2));a.sender_=null,a.sender_=new shaka.cast.CastSender(t,function(){return a.onCastStatusChanged_()},function(){return a.onFirstCastStateUpdate_()},function(e,t){return a.onRemoteEvent_(e,t)},function(){return a.onResumeLocal_()},function(){return a.getInitState_()}),a.sender_.init(),e.jumpToEnd()})},shaka.cast.CastProxy.prototype.init_=function(){var a=this;this.sender_.init(),this.eventManager_=new shaka.util.EventManager;for(var e,t,r=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents),n=r.next();!n.done;n=r.next())this.eventManager_.listen(this.localVideo_,n.value,function(e){return a.videoProxyLocalEvent_(e)});for(e in shaka.Player.EventName)this.eventManager_.listen(this.localPlayer_,shaka.Player.EventName[e],function(e){return a.playerProxyLocalEvent_(e)});for(t in this.videoProxy_={},r={},this.localVideo_)r.$jscomp$loop$prop$k$628=t,Object.defineProperty(this.videoProxy_,r.$jscomp$loop$prop$k$628,{configurable:!1,enumerable:!0,get:function(e){return function(){return a.videoProxyGet_(e.$jscomp$loop$prop$k$628)}}(r),set:function(t){return function(e){a.videoProxySet_(t.$jscomp$loop$prop$k$628,e)}}(r)}),r={$jscomp$loop$prop$k$628:r.$jscomp$loop$prop$k$628};this.playerProxy_={},this.iterateOverPlayerMethods_(function(e,t){goog.asserts.assert(a.playerProxy_,"Must have player proxy!"),Object.defineProperty(a.playerProxy_,e,{configurable:!1,enumerable:!0,get:function(){return a.playerProxyGet_(e)}})}),COMPILED&&this.mapCompiledToUncompiledPlayerMethodNames_(),this.videoEventTarget_=new shaka.util.FakeEventTarget,this.videoEventTarget_.dispatchTarget=this.videoProxy_,this.playerEventTarget_=new shaka.util.FakeEventTarget,this.playerEventTarget_.dispatchTarget=this.playerProxy_},shaka.cast.CastProxy.prototype.mapCompiledToUncompiledPlayerMethodNames_=function(){var r=this,n=new Map;this.iterateOverPlayerMethods_(function(e,t){var a;n.has(t)?(a=n.get(t),e.length<a.length?r.compiledToExternNames_.set(e,a):r.compiledToExternNames_.set(a,e)):n.set(t,e)})},shaka.cast.CastProxy.prototype.iterateOverPlayerMethods_=function(e){function t(e){return"constructor"!=e&&"function"==typeof a[e]&&!r.has(e)}goog.asserts.assert(this.localPlayer_,"Must have player!");var a=this.localPlayer_,r=new Set;for(n in a)t(n)&&(r.add(n),e(n,a[n]));for(var n=Object.getPrototypeOf(a),i=Object.getPrototypeOf({});n&&n!=i;){for(var o=$jscomp.makeIterator(Object.getOwnPropertyNames(n)),s=o.next();!s.done;s=o.next())t(s=s.value)&&(r.add(s),e(s,a[s]));n=Object.getPrototypeOf(n)}},shaka.cast.CastProxy.prototype.getInitState_=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.localPlayer_.getAssetUri(),startTime:null};this.localVideo_.pause();for(var t=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),a=t.next();!a.done;a=t.next())a=a.value,e.video[a]=this.localVideo_[a];for(this.localVideo_.ended||(e.startTime=this.localVideo_.currentTime),a=(t=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState)).next();!a.done;a=t.next()){var a=(r=a.value)[1],r=this.localPlayer_[r[0]]();e.player[a]=r}for(a=(t=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState)).next();!a.done;a=t.next())a=(r=a.value)[1],r=this.localPlayer_[r[0]](),e.playerAfterLoad[a]=r;return e},shaka.cast.CastProxy.prototype.onCastStatusChanged_=function(){var e=new shaka.util.FakeEvent("caststatuschanged");this.dispatchEvent(e)},shaka.cast.CastProxy.prototype.onFirstCastStateUpdate_=function(){var e=new shaka.util.FakeEvent(this.videoProxy_.paused?"pause":"play");this.videoEventTarget_.dispatchEvent(e)},shaka.cast.CastProxy.prototype.onResumeLocal_=function(){for(var r=this,e=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState),t=e.next();!t.done;t=e.next()){var t=(a=t.value)[1],a=this.sender_.get("player",a[0])();this.localPlayer_[t](a)}var n=this.sender_.get("player","getAssetUri")(),i=(t=this.sender_.get("video","ended"),e=Promise.resolve(),this.localVideo_.autoplay),o=(a=null,t||(a=this.sender_.get("video","currentTime")),n&&(this.localVideo_.autoplay=!1,e=this.localPlayer_.load(n,a)),{});for(a=(t=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes)).next();!a.done;a=t.next())a=a.value,o[a]=this.sender_.get("video",a);e.then(function(){if(r.localVideo_){for(var e=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),t=e.next();!t.done;t=e.next())t=t.value,r.localVideo_[t]=o[t];for(t=(e=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState)).next();!t.done;t=e.next()){var t=(a=t.value)[1],a=r.sender_.get("player",a[0])();r.localPlayer_[t](a)}r.localVideo_.autoplay=i,n&&r.localVideo_.play()}},function(e){goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),e=new shaka.util.FakeEvent(shaka.Player.EventName.Error,{detail:e}),r.localPlayer_.dispatchEvent(e)})},shaka.cast.CastProxy.prototype.videoProxyGet_=function(e){var r=this;if("addEventListener"==e)return function(e,t,a){return r.videoEventTarget_.addEventListener(e,t,a)};if("removeEventListener"==e)return function(e,t,a){return r.videoEventTarget_.removeEventListener(e,t,a)};if(this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()){var t=this.localVideo_[e];if("function"!=typeof t)return t}return this.sender_.isCasting()?this.sender_.get("video",e):e="function"==typeof(e=this.localVideo_[e])?e.bind(this.localVideo_):e},shaka.cast.CastProxy.prototype.videoProxySet_=function(e,t){this.sender_.isCasting()?this.sender_.set("video",e,t):this.localVideo_[e]=t},shaka.cast.CastProxy.prototype.videoProxyLocalEvent_=function(e){this.sender_.isCasting()||(e=new shaka.util.FakeEvent(e.type,e),this.videoEventTarget_.dispatchEvent(e))},shaka.cast.CastProxy.prototype.playerProxyGet_=function(e){var t,r=this;if("addEventListener"==(e=this.compiledToExternNames_.has(e)?this.compiledToExternNames_.get(e):e))return function(e,t,a){return r.playerEventTarget_.addEventListener(e,t,a)};if("removeEventListener"==e)return function(e,t,a){return r.playerEventTarget_.removeEventListener(e,t,a)};if("getMediaElement"==e)return function(){return r.videoProxy_};if("getSharedConfiguration"==e)return shaka.log.warning("Can't share configuration across a network. Returning copy."),this.sender_.get("player","getConfiguration");if("getNetworkingEngine"==e)return this.sender_.isCasting()&&shaka.log.warning("NOTE: getNetworkingEngine() is always local!"),function(){return r.localPlayer_.getNetworkingEngine()};if("getAdManager"==e)return this.sender_.isCasting()&&shaka.log.warning("NOTE: getAdManager() is always local!"),function(){return r.localPlayer_.getAdManager()};if("setVideoContainer"==e)return this.sender_.isCasting()&&shaka.log.warning("NOTE: setVideoContainer() is always local!"),function(e){return r.localPlayer_.setVideoContainer(e)};if(this.sender_.isCasting()){if("getManifest"==e||"drmInfo"==e)return function(){return shaka.log.alwaysWarn(e+"() does not work while casting!"),null};if("attach"==e||"detach"==e)return function(){return shaka.log.alwaysWarn(e+"() does not work while casting!"),Promise.resolve()}}return(!this.sender_.isCasting()||this.sender_.hasRemoteProperties()||!shaka.cast.CastUtils.PlayerGetterMethods[e])&&this.sender_.isCasting()?this.sender_.get("player",e):(t=this.localPlayer_[e],goog.asserts.assert("function"==typeof t,"only methods on Player"),t.bind(this.localPlayer_))},shaka.cast.CastProxy.prototype.playerProxyLocalEvent_=function(e){this.sender_.isCasting()||this.playerEventTarget_.dispatchEvent(e)},shaka.cast.CastProxy.prototype.onRemoteEvent_=function(e,t){goog.asserts.assert(this.sender_.isCasting(),"Should only receive remote events while casting"),this.sender_.isCasting()&&("video"==e?this.videoEventTarget_.dispatchEvent(t):"player"==e&&this.playerEventTarget_.dispatchEvent(t))},goog.exportSymbol("shaka.cast.CastProxy",shaka.cast.CastProxy),goog.exportProperty(shaka.cast.CastProxy.prototype,"changeReceiverId",shaka.cast.CastProxy.prototype.changeReceiverId),goog.exportProperty(shaka.cast.CastProxy.prototype,"forceDisconnect",shaka.cast.CastProxy.prototype.forceDisconnect),goog.exportProperty(shaka.cast.CastProxy.prototype,"suggestDisconnect",shaka.cast.CastProxy.prototype.suggestDisconnect),goog.exportProperty(shaka.cast.CastProxy.prototype,"setAppData",shaka.cast.CastProxy.prototype.setAppData),goog.exportProperty(shaka.cast.CastProxy.prototype,"cast",shaka.cast.CastProxy.prototype.cast),goog.exportProperty(shaka.cast.CastProxy.prototype,"receiverName",shaka.cast.CastProxy.prototype.receiverName),goog.exportProperty(shaka.cast.CastProxy.prototype,"isCasting",shaka.cast.CastProxy.prototype.isCasting),goog.exportProperty(shaka.cast.CastProxy.prototype,"canCast",shaka.cast.CastProxy.prototype.canCast),goog.exportProperty(shaka.cast.CastProxy.prototype,"getPlayer",shaka.cast.CastProxy.prototype.getPlayer),goog.exportProperty(shaka.cast.CastProxy.prototype,"getVideo",shaka.cast.CastProxy.prototype.getVideo),goog.exportProperty(shaka.cast.CastProxy.prototype,"destroy",shaka.cast.CastProxy.prototype.destroy),shaka.cast.CastReceiver=function(e,t,a,r){shaka.util.FakeEventTarget.call(this);var n=this;this.video_=e,this.player_=t,this.eventManager_=new shaka.util.EventManager,this.targets_={video:e,player:t},this.appDataCallback_=a||function(){},this.contentIdCallback_=r||function(e){return e},this.metadata_=null,this.isConnected_=!1,this.isIdle_=!0,this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!0,this.genericBus_=this.shakaBus_=null,this.pollTimer_=new shaka.util.Timer(function(){n.pollAttributes_()}),this.init_()},$jscomp.inherits(shaka.cast.CastReceiver,shaka.util.FakeEventTarget),shaka.cast.CastReceiver.prototype.isConnected=function(){return this.isConnected_},shaka.cast.CastReceiver.prototype.isIdle=function(){return this.isIdle_},shaka.cast.CastReceiver.prototype.setContentMetadata=function(e){this.metadata_=e},shaka.cast.CastReceiver.prototype.clearContentMetadata=function(){this.metadata_=null},shaka.cast.CastReceiver.prototype.setContentTitle=function(e){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.metadata_.title=e},shaka.cast.CastReceiver.prototype.setContentImage=function(e){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.metadata_.images=[{url:e}]},shaka.cast.CastReceiver.prototype.setContentArtist=function(e){this.metadata_||(this.metadata_={}),this.metadata_.artist=e,this.metadata_.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},shaka.cast.CastReceiver.prototype.destroy=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.eventManager_&&(a.eventManager_.release(),a.eventManager_=null),t=[],a.player_&&(t.push(a.player_.destroy()),a.player_=null),a.pollTimer_&&(a.pollTimer_.stop(),a.pollTimer_=null),a.video_=null,a.targets_=null,a.appDataCallback_=null,a.isConnected_=!1,a.isIdle_=!0,a.shakaBus_=null,a.genericBus_=null,e.yield(Promise.all(t),2);cast.receiver.CastReceiverManager.getInstance().stop(),e.jumpToEnd()})},shaka.cast.CastReceiver.prototype.init_=function(){var t=this,e=cast.receiver.CastReceiverManager.getInstance();e.onSenderConnected=function(){return t.onSendersChanged_()},e.onSenderDisconnected=function(){return t.onSendersChanged_()},e.onSystemVolumeChanged=function(){return t.fakeVolumeChangeEvent_()},this.genericBus_=e.getCastMessageBus(shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE),this.genericBus_.onMessage=function(e){return t.onGenericMessage_(e)},this.shakaBus_=e.getCastMessageBus(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE),this.shakaBus_.onMessage=function(e){return t.onShakaMessage_(e)},goog.DEBUG&&!shaka.util.Platform.isChromecast()||e.start();for(var a,r=(e=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents)).next();!r.done;r=e.next())this.eventManager_.listen(this.video_,r.value,function(e){return t.proxyEvent_("video",e)});for(a in shaka.Player.EventName)this.eventManager_.listen(this.player_,shaka.Player.EventName[a],function(e){return t.proxyEvent_("player",e)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?this.player_.setMaxHardwareResolution(3840,2160):this.player_.setMaxHardwareResolution(1920,1080),this.eventManager_.listen(this.video_,"loadeddata",function(){t.startUpdatingUpdateNumber_=!0}),this.eventManager_.listen(this.player_,"loading",function(){t.isIdle_=!1,t.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"playing",function(){t.isIdle_=!1,t.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"pause",function(){t.onCastStatusChanged_()}),this.eventManager_.listen(this.player_,"unloading",function(){t.isIdle_=!0,t.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"ended",function(){new shaka.util.Timer(function(){t.video_&&t.video_.ended&&(t.isIdle_=!0,t.onCastStatusChanged_())}).tickAfter(shaka.cast.CastReceiver.IDLE_INTERVAL)})},shaka.cast.CastReceiver.prototype.onSendersChanged_=function(){this.updateNumber_=0,this.initialStatusUpdatePending_=!0,this.isConnected_=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,this.onCastStatusChanged_()},shaka.cast.CastReceiver.prototype.onCastStatusChanged_=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(Promise.resolve(),2):a.player_?(t=new shaka.util.FakeEvent("caststatuschanged"),a.dispatchEvent(t),a.maybeSendMediaInfoMessage_()||a.sendMediaStatus_(),void e.jumpToEnd()):e.return()})},shaka.cast.CastReceiver.prototype.initState_=function(t,a){var r,n,i,o,s,l,u,c,d,h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:for(r in t.player)n=t.player[r],h.player_[r](n);return h.appDataCallback_(a),i=h.video_.autoplay,t.manifest?(h.video_.autoplay=!1,e.setCatchFinallyBlocks(5),e.yield(h.player_.load(t.manifest,t.startTime),7)):e.yield(Promise.resolve(),3);case 7:e.leaveTryBlock(3);break;case 5:return o=e.enterCatchBlock(),goog.asserts.assert(o instanceof shaka.util.Error,"Wrong error type!"),s=shaka.Player.EventName.Error,s=new shaka.util.FakeEvent(s,{detail:o}),h.player_&&h.player_.dispatchEvent(s),e.return();case 3:if(!h.player_)return e.return();for(l in t.video)u=t.video[l],h.video_[l]=u;for(c in t.playerAfterLoad)d=t.playerAfterLoad[c],h.player_[c](d);h.video_.autoplay=i,t.manifest&&(h.video_.play(),h.sendMediaStatus_()),e.jumpToEnd()}})},shaka.cast.CastReceiver.prototype.proxyEvent_=function(e,t){this.player_&&(this.pollAttributes_(),this.sendMessage_({type:"event",targetName:e,event:t},this.shakaBus_))},shaka.cast.CastReceiver.prototype.pollAttributes_=function(){this.pollTimer_.tickAfter(shaka.cast.CastReceiver.POLL_INTERVAL);for(var e,t={video:{},player:{}},a=$jscomp.makeIterator(shaka.cast.CastUtils.VideoAttributes),r=a.next();!r.done;r=a.next())r=r.value,t.video[r]=this.video_[r];if(this.player_.isLive())for(var n in a=shaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive)0==this.updateNumber_%a[n]&&(t.player[n]=this.player_[n]());for(e in shaka.cast.CastUtils.PlayerGetterMethods)0==this.updateNumber_%shaka.cast.CastUtils.PlayerGetterMethods[e]&&(t.player[e]=this.player_[e]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),this.startUpdatingUpdateNumber_&&(this.updateNumber_+=1),this.sendMessage_({type:"update",update:t},this.shakaBus_),this.maybeSendMediaInfoMessage_()},shaka.cast.CastReceiver.prototype.maybeSendMediaInfoMessage_=function(){return!(!this.initialStatusUpdatePending_||!this.video_.duration&&!this.player_.isLive()||(this.sendMediaInfoMessage_(),this.initialStatusUpdatePending_=!1))},shaka.cast.CastReceiver.prototype.sendMediaInfoMessage_=function(e){e=void 0===e?0:e;var t={contentId:this.player_.getAssetUri(),streamType:this.player_.isLive()?"LIVE":"BUFFERED",contentType:""};this.player_.isLive()||(t.duration=this.video_.duration),this.metadata_&&(t.metadata=this.metadata_),this.sendMediaStatus_(e,t)},shaka.cast.CastReceiver.prototype.fakeVolumeChangeEvent_=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();goog.asserts.assert(e,"System volume should not be null!"),e&&this.sendMessage_({type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.shakaBus_),this.sendMessage_({type:"event",targetName:"video",event:{type:"volumechange"}},this.shakaBus_)},shaka.cast.CastReceiver.prototype.onShakaMessage_=function(e){var t=this,a=shaka.cast.CastUtils.deserialize(e.data);switch(shaka.log.debug("CastReceiver: message",a),a.type){case"init":this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!0,this.initState_(a.initState,a.appData),this.pollAttributes_();break;case"appData":this.appDataCallback_(a.appData);break;case"set":var r=a.targetName,n=a.property,a=a.value;if("video"==r){if(e=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){e.setSystemVolumeLevel(a);break}if("muted"==n){e.setSystemVolumeMuted(a);break}}this.targets_[r][n]=a;break;case"call":(r=this.targets_[a.targetName])[a.methodName].apply(r,a.args);break;case"asyncCall":r=a.targetName,n=a.methodName,"player"==r&&"load"==n&&(this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1);var i=a.id,o=e.senderId;a=(e=this.targets_[r])[n].apply(e,a.args),(a="player"==r&&"load"==n?a.then(function(){t.initialStatusUpdatePending_=!0}):a).then(function(){return t.sendAsyncComplete_(o,i,null)},function(e){return t.sendAsyncComplete_(o,i,e)})}},shaka.cast.CastReceiver.prototype.onGenericMessage_=function(e){var a=this,r=shaka.cast.CastUtils.deserialize(e.data);switch(shaka.log.debug("CastReceiver: message",r),r.type){case"PLAY":this.video_.play(),this.sendMediaStatus_();break;case"PAUSE":this.video_.pause(),this.sendMediaStatus_();break;case"SEEK":e=r.currentTime;var t=r.resumeState;null!=e&&(this.video_.currentTime=Number(e)),t&&"PLAYBACK_START"==t?(this.video_.play(),this.sendMediaStatus_()):t&&"PLAYBACK_PAUSE"==t&&(this.video_.pause(),this.sendMediaStatus_());break;case"STOP":this.player_.unload().then(function(){a.player_&&a.sendMediaStatus_()});break;case"GET_STATUS":this.sendMediaInfoMessage_(Number(r.requestId));break;case"VOLUME":e=(t=r.volume).level;var t=t.muted,n=this.video_.volume,i=this.video_.muted;null!=e&&(this.video_.volume=Number(e)),null!=t&&(this.video_.muted=t),n==this.video_.volume&&i==this.video_.muted||this.sendMediaStatus_();break;case"LOAD":this.updateNumber_=0,this.initialStatusUpdatePending_=this.startUpdatingUpdateNumber_=!1,e=r.media,t=r.currentTime,n=this.contentIdCallback_(e.contentId),i=r.autoplay||!0,this.appDataCallback_(e.customData),i&&(this.video_.autoplay=!0),this.player_.load(n,t).then(function(){a.player_&&a.sendMediaInfoMessage_()}).catch(function(e){goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!");var t="LOAD_FAILED";e.category==shaka.util.Error.Category.PLAYER&&e.code==shaka.util.Error.Code.LOAD_INTERRUPTED&&(t="LOAD_CANCELLED"),a.sendMessage_({requestId:Number(r.requestId),type:t},a.genericBus_)});break;default:shaka.log.warning("Unrecognized message type from the generic Chromecast controller!",r.type),this.sendMessage_({requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.genericBus_)}},shaka.cast.CastReceiver.prototype.sendAsyncComplete_=function(e,t,a){this.player_&&this.sendMessage_({type:"asyncComplete",id:t,error:a},this.shakaBus_,e)},shaka.cast.CastReceiver.prototype.sendMessage_=function(e,t,a){this.isConnected_&&(e=shaka.cast.CastUtils.serialize(e),a?t.getCastChannel(a).send(e):t.broadcast(e))},shaka.cast.CastReceiver.prototype.getPlayState_=function(){var e=shaka.cast.CastReceiver.PLAY_STATE;return this.isIdle_?e.IDLE:this.player_.isBuffering()?e.BUFFERING:this.video_.paused?e.PAUSED:e.PLAYING},shaka.cast.CastReceiver.prototype.sendMediaStatus_=function(e,t){e=void 0===e?0:e,t=void 0===t?null:t;var a={mediaSessionId:0,playbackRate:this.video_.playbackRate,playerState:this.getPlayState_(),currentTime:this.video_.currentTime,supportedMediaCommands:63,volume:{level:this.video_.volume,muted:this.video_.muted}};t&&(a.media=t),this.sendMessage_({requestId:e,type:"MEDIA_STATUS",status:[a]},this.genericBus_)},goog.exportSymbol("shaka.cast.CastReceiver",shaka.cast.CastReceiver),goog.exportProperty(shaka.cast.CastReceiver.prototype,"destroy",shaka.cast.CastReceiver.prototype.destroy),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentArtist",shaka.cast.CastReceiver.prototype.setContentArtist),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentImage",shaka.cast.CastReceiver.prototype.setContentImage),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentTitle",shaka.cast.CastReceiver.prototype.setContentTitle),goog.exportProperty(shaka.cast.CastReceiver.prototype,"clearContentMetadata",shaka.cast.CastReceiver.prototype.clearContentMetadata),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentMetadata",shaka.cast.CastReceiver.prototype.setContentMetadata),goog.exportProperty(shaka.cast.CastReceiver.prototype,"isIdle",shaka.cast.CastReceiver.prototype.isIdle),goog.exportProperty(shaka.cast.CastReceiver.prototype,"isConnected",shaka.cast.CastReceiver.prototype.isConnected),shaka.cast.CastReceiver.POLL_INTERVAL=.5,shaka.cast.CastReceiver.IDLE_INTERVAL=5,shaka.cast.CastReceiver.PLAY_STATE={IDLE:"IDLE",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED"},shaka.util.Pssh=function(e){var t=this;this.systemIds=[],this.cencKeyIds=[],this.data=[],(new shaka.util.Mp4Parser).box("moov",shaka.util.Mp4Parser.children).fullBox("pssh",function(e){return t.parsePsshBox_(e)}).parse(e),0==this.data.length&&shaka.log.warning("No pssh box found!")},shaka.util.Pssh.prototype.parsePsshBox_=function(e){if(goog.asserts.assert(null!=e.version,"PSSH boxes are full boxes and must have a valid version"),goog.asserts.assert(null!=e.flags,"PSSH boxes are full boxes and must have a valid flag"),1<e.version)shaka.log.warning("Unrecognized PSSH version found!");else{var t=e.reader.getDataView();if(goog.asserts.assert(12<=t.byteOffset,"DataView at incorrect position"),t=shaka.util.BufferUtils.toUint8(t,-12,e.size),this.data.push(t),this.systemIds.push(shaka.util.Uint8ArrayUtils.toHex(e.reader.readBytes(16))),0<e.version){t=e.reader.readUint32();for(var a=(t=$jscomp.makeIterator(shaka.util.Iterables.range(t))).next();!a.done;a=t.next())shaka.util.Functional.ignored(a.value),a=shaka.util.Uint8ArrayUtils.toHex(e.reader.readBytes(16)),this.cencKeyIds.push(a)}}},shaka.util.Pssh.createPssh=function(e,t){goog.asserts.assert(16==t.byteLength,"Invalid system ID length");var a=e.length,r=12+t.length+4+a,n=new Uint8Array(r),i=shaka.util.BufferUtils.toDataView(n),o=0;return i.setUint32(0,r),o+=4,i.setUint32(4,1886614376),o+=4,i.setUint32(8,0),o+=4,n.set(t,12),o+=t.length,i.setUint32(o,a),n.set(e,o+=4),goog.asserts.assert(o+a===r,"PSSH invalid length."),n},shaka.util.Pssh.normaliseInitData=function(e){if(!e)return e;var t=new shaka.util.Pssh(e);if(t.data.length<=1)return e;e=[];for(var a={},r=(t=$jscomp.makeIterator(t.data)).next();!r.done;a={$jscomp$loop$prop$initData$523$630:a.$jscomp$loop$prop$initData$523$630},r=t.next())a.$jscomp$loop$prop$initData$523$630=r.value,e.some(function(t){return function(e){return shaka.util.BufferUtils.equal(e,t.$jscomp$loop$prop$initData$523$630)}}(a))||e.push(a.$jscomp$loop$prop$initData$523$630);return shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,$jscomp.arrayFromIterable(e))},shaka.util.XmlUtils=function(){},shaka.util.XmlUtils.findChild=function(e,t){e=shaka.util.XmlUtils.findChildren(e,t);return 1!=e.length?null:e[0]},shaka.util.XmlUtils.findChildNS=function(e,t,a){return 1!=(e=shaka.util.XmlUtils.findChildrenNS(e,t,a)).length?null:e[0]},shaka.util.XmlUtils.findChildren=function(e,t){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.tagName==t})},shaka.util.XmlUtils.getChildren=function(e){return Array.from(e.childNodes).filter(function(e){return e instanceof Element})},shaka.util.XmlUtils.findChildrenNS=function(e,t,a){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.localName==a&&e.namespaceURI==t})},shaka.util.XmlUtils.getAttributeNS=function(e,t,a){return e.hasAttributeNS(t,a)?e.getAttributeNS(t,a):null},shaka.util.XmlUtils.getContents=function(e){var t=shaka.util.XmlUtils;return Array.from(e.childNodes).every(t.isText)?e.textContent.trim():null},shaka.util.XmlUtils.isText=function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE},shaka.util.XmlUtils.parseAttr=function(e,t,a,r){r=void 0===r?null:r;var n=null;return null==(n=null!=(e=e.getAttribute(t))?a(e):n)?r:n},shaka.util.XmlUtils.parseDate=function(e){return!e||(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e))?null:Math.floor(e/1e3)},shaka.util.XmlUtils.parseDuration=function(e){var t;return e?(t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(shaka.log.warning("Invalid duration string:",e),null):null},shaka.util.XmlUtils.parseRange=function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t&&(e=Number(t[1]),isFinite(e))&&(t=Number(t[2]),isFinite(t))?{start:e,end:t}:null},shaka.util.XmlUtils.parseInt=function(e){return 0==(e=Number(e))%1?e:null},shaka.util.XmlUtils.parsePositiveInt=function(e){return 0==(e=Number(e))%1&&0<e?e:null},shaka.util.XmlUtils.parseNonNegativeInt=function(e){return 0==(e=Number(e))%1&&0<=e?e:null},shaka.util.XmlUtils.parseFloat=function(e){return e=Number(e),isNaN(e)?null:e},shaka.util.XmlUtils.evalDivision=function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},shaka.util.XmlUtils.parseXmlString=function(e,t){var a=new DOMParser,r=null,n=null;try{n=a.parseFromString(e,"text/xml")}catch(e){}return(r=n&&n.documentElement.tagName==t?n.documentElement:r)&&0<r.getElementsByTagName("parsererror").length?null:r},shaka.util.XmlUtils.parseXml=function(e,t){try{var a=shaka.util.StringUtils.fromUTF8(e);return shaka.util.XmlUtils.parseXmlString(a,t)}catch(e){return null}},shaka.dash={},shaka.dash.ContentProtection=function(){},shaka.dash.ContentProtection.parseFromAdaptationSet=function(e,t,a){var r=shaka.dash.ContentProtection,n=shaka.util.ManifestParserUtils,i=r.parseElements_(e),o=null,s=(e=[],[]),l=new Set(i.map(function(e){return e.keyId}));if(l.delete(null),1<l.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_CONFLICTING_KEY_IDS);if(t||(s=i.filter(function(e){return e.schemeUri!=r.MP4Protection_||(goog.asserts.assert(!e.init||e.init.length,"Init data must be null or non-empty."),o=e.init||o,!1)})).length&&0==(e=r.convertElements_(o,s,a)).length&&(e=[n.createDrmInfo("",o)]),i.length&&(t||!s.length))for(e=[],a=(t=$jscomp.makeIterator(Object.values(a))).next();!a.done;a=t.next())"org.w3.clearkey"!=(a=a.value)&&(a=n.createDrmInfo(a,o),e.push(a));if(n=Array.from(l)[0]||null)for(t=(l=$jscomp.makeIterator(e)).next();!t.done;t=l.next())for(a=(t=$jscomp.makeIterator(t.value.initData)).next();!a.done;a=t.next())a.value.keyId=n;return{defaultKeyId:n,defaultInit:o,drmInfos:e,firstRepresentation:!0}},shaka.dash.ContentProtection.parseFromRepresentation=function(e,t,a,r){var n=shaka.dash.ContentProtection.parseFromAdaptationSet(e,a,r);if(t.firstRepresentation)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,a=0==n.drmInfos.length,(0==t.drmInfos.length||e&&!a)&&(t.drmInfos=n.drmInfos),t.firstRepresentation=!1;else if(0<n.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(t){return n.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==t.drmInfos.length))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_COMMON_KEY_SYSTEM);return n.defaultKeyId||t.defaultKeyId},shaka.dash.ContentProtection.getWidevineLicenseUrl=function(e){return(e=shaka.util.XmlUtils.findChildNS(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""},shaka.dash.ContentProtection.parseMsProRecords_=function(e,t){for(var a=[];t<e.byteLength-1;){var r=e.getUint16(t,!0),n=(t+=2,e.getUint16(t,!0));if(t+=2,0!=(1&n)||n+t>e.byteLength)return shaka.log.warning("Malformed MS PRO object"),[];var i=shaka.util.BufferUtils.toUint8(e,t,n);a.push({type:r,value:i}),t+=n}return a},shaka.dash.ContentProtection.parseMsPro_=function(e){var t=shaka.util.BufferUtils.toDataView(e);return t.getUint32(0,!0)!=e.byteLength?(shaka.log.warning("PlayReady Object with invalid length encountered."),[]):shaka.dash.ContentProtection.parseMsProRecords_(t,6)},shaka.dash.ContentProtection.getLaurl_=function(e){for(var t=(e=$jscomp.makeIterator(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var a=(t=$jscomp.makeIterator(t.value.childNodes)).next();!a.done;a=t.next())if((a=a.value)instanceof Element&&"LA_URL"==a.tagName)return a.textContent;return""},shaka.dash.ContentProtection.getPlayReadyLicenseUrl=function(e){var t,a;return(a=shaka.util.XmlUtils.findChildNS(e.node,"urn:microsoft:playready","pro"))&&(t=(e=shaka.dash.ContentProtection).PLAYREADY_RECORD_TYPES,a=shaka.util.Uint8ArrayUtils.fromBase64(a.textContent),a=e.parseMsPro_(a).filter(function(e){return e.type===t.RIGHTS_MANAGEMENT})[0])&&(a=shaka.util.StringUtils.fromUTF16(a.value,!0),a=shaka.util.XmlUtils.parseXmlString(a,"WRMHEADER"))?e.getLaurl_(a):""},shaka.dash.ContentProtection.getInitDataFromPro_=function(e){var t,a;return(t=shaka.util.XmlUtils.findChildNS(e.node,"urn:microsoft:playready","pro"))?(t=shaka.util.Uint8ArrayUtils.fromBase64(t.textContent),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),[{initData:shaka.util.Pssh.createPssh(t,a),initDataType:"cenc",keyId:e.keyId}]):null},shaka.dash.ContentProtection.convertElements_=function(e,t,a){for(var r=shaka.dash.ContentProtection,n=shaka.util.ManifestParserUtils,i=r.licenseUrlParsers_,o=[],s=(t=$jscomp.makeIterator(t)).next();!s.done;s=t.next()){var l,u=a[(s=s.value).schemeUri];u&&(goog.asserts.assert(!s.init||s.init.length,"Init data must be null or non-empty."),l=r.getInitDataFromPro_(s),l=n.createDrmInfo(u,s.init||e||l),(u=i.get(u))&&(l.licenseServerUri=u(s)),o.push(l))}return o},shaka.dash.ContentProtection.parseElements_=function(e){for(var t=[],a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())(a=shaka.dash.ContentProtection.parseElement_(a.value))&&t.push(a);return t},shaka.dash.ContentProtection.parseElement_=function(e){var t=shaka.dash.ContentProtection.CencNamespaceUri_,a=e.getAttribute("schemeIdUri"),r=shaka.util.XmlUtils.getAttributeNS(e,t,"default_KID"),t=shaka.util.XmlUtils.findChildrenNS(e,t,"pssh").map(shaka.util.XmlUtils.getContents);if(!a)return shaka.log.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(a=a.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED);var n=[];try{n=t.map(function(e){return{initDataType:"cenc",initData:shaka.util.Uint8ArrayUtils.fromBase64(e),keyId:null}})}catch(e){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_PSSH_BAD_ENCODING)}return{node:e,schemeUri:a,keyId:r,init:0<n.length?n:null}},shaka.dash.ContentProtection.PLAYREADY_RECORD_TYPES={RIGHTS_MANAGEMENT:1,RESERVED:2,EMBEDDED_LICENSE:3},shaka.dash.ContentProtection.licenseUrlParsers_=(new Map).set("com.widevine.alpha",shaka.dash.ContentProtection.getWidevineLicenseUrl).set("com.microsoft.playready",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.recommendation",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.software",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.hardware",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.recommendation.esvm",shaka.dash.ContentProtection.getPlayReadyLicenseUrl),shaka.dash.ContentProtection.MP4Protection_="urn:mpeg:dash:mp4protection:2011",shaka.dash.ContentProtection.CencNamespaceUri_="urn:mpeg:cenc:2013",shaka.dash.MpdUtils=function(){},shaka.dash.MpdUtils.fillUriTemplate=function(i,e,t,a,r){var o={RepresentationID:e,Number:t,Bandwidth:a,Time:r};return i.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,t,a,r){if("$$"==e)return"$";var n=o[t];if(goog.asserts.assert(void 0!==n,"Unrecognized identifier"),null==n)return shaka.log.warning("URL template does not have an available substitution for ",'identifier "'+t+'":',i),e;switch("RepresentationID"==t&&a&&(shaka.log.warning("URL template should not contain a width specifier for identifier",'"RepresentationID":',i),a=void 0),"Time"==t&&(goog.asserts.assert("number"==typeof n,"Time value should be a number!"),goog.asserts.assert(Math.abs(n-Math.round(n))<.2,"Calculated $Time$ values must be close to integers"),n=Math.round(n)),r){case void 0:case"d":case"i":case"u":e=n.toString();break;case"o":e=n.toString(8);break;case"x":e=n.toString(16);break;case"X":e=n.toString(16).toUpperCase();break;default:goog.asserts.assert(!1,"Unhandled format specifier"),e=n.toString()}return a=window.parseInt(a,10)||1,Array(Math.max(0,a-e.length)+1).join("0")+e})},shaka.dash.MpdUtils.createTimeline=function(e,t,a,r){goog.asserts.assert(0<t&&t<1/0,"timescale must be a positive, finite integer"),goog.asserts.assert(0<r,"period duration must be a positive integer");for(var n=shaka.util.XmlUtils,i=n.findChildren(e,"S"),o=(e=[],-a),s=(i=$jscomp.makeIterator(shaka.util.Iterables.enumerate(i))).next();!s.done;s=i.next()){var l=(s=s.value).item,u=s.next,c=n.parseAttr(l,"t",n.parseNonNegativeInt),d=(s=n.parseAttr(l,"d",n.parseNonNegativeInt),n.parseAttr(l,"r",n.parseInt));if(null!=c&&(c-=a),!s){shaka.log.warning('"S" element must have a duration:','ignoring the remaining "S" elements.',l);break}if(c=null!=c?c:o,(d=d||0)<0)if(u){if(null==(u=n.parseAttr(u,"t",n.parseNonNegativeInt))){shaka.log.warning('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',l);break}if(u<=c){shaka.log.warning('An "S" element cannot have a negative repeatif its start ','time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',l);break}d=Math.ceil((u-c)/s)-1}else{if(1/0==r){shaka.log.warning('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',l);break}if(r<=c/t){shaka.log.warning('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',l);break}d=Math.ceil((r*t-c)/s)-1}for(0<e.length&&c!=o&&(Math.abs((c-o)/t)>=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS&&shaka.log.warning("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",l),e[e.length-1].end=c/t),u=(l=$jscomp.makeIterator(shaka.util.Iterables.range(d+1))).next();!u.done;u=l.next())shaka.util.Functional.ignored(u.value),e.push({start:c/t,end:(o=c+s)/t,unscaledStart:c}),c=o}return e},shaka.dash.MpdUtils.parseSegmentInfo=function(e,t){goog.asserts.assert(t(e.representation),"There must be at least one element of the given type.");var a=shaka.dash.MpdUtils,r=shaka.util.XmlUtils,n=1,i=((o=a.inheritAttribute(e,t,"timescale"))&&(n=r.parsePositiveInt(o)||1),a.inheritAttribute(e,t,"duration")),o=r.parsePositiveInt(i||""),s=((o=e.representation.contentType==shaka.util.ManifestParserUtils.ContentType.IMAGE?r.parseFloat(i||""):o)&&(o/=n),a.inheritAttribute(e,t,"startNumber")),i=Number(a.inheritAttribute(e,t,"presentationTimeOffset"))||0,r=r.parseNonNegativeInt(s||""),l=null;return{timescale:n,segmentDuration:o,startNumber:r=null!=s&&null!=r?r:1,scaledPresentationTimeOffset:i/n||0,unscaledPresentationTimeOffset:i,timeline:l=(s=a.inheritChild(e,t,"SegmentTimeline"))?a.createTimeline(s,n,i,e.periodInfo.duration||1/0):l}},shaka.dash.MpdUtils.inheritAttribute=function(e,t,a){var r=shaka.util.Functional;return goog.asserts.assert(t(e.representation),"There must be at least one element of the given type"),[t(e.representation),t(e.adaptationSet),t(e.period)].filter(r.isNotNull).map(function(e){return e.getAttribute(a)}).reduce(function(e,t){return e||t})},shaka.dash.MpdUtils.inheritChild=function(e,t,a){var r=shaka.util.Functional,n=(goog.asserts.assert(t(e.representation),"There must be at least one element of the given type"),e=[t(e.representation),t(e.adaptationSet),t(e.period)].filter(r.isNotNull),shaka.util.XmlUtils);return e.map(function(e){return n.findChild(e,a)}).reduce(function(e,t){return e||t})},shaka.dash.MpdUtils.handleXlinkInElement_=function(a,r,n,e,i,o){for(var s,t=shaka.util.XmlUtils,l=shaka.util.Error,u=shaka.util.ManifestParserUtils,c=shaka.dash.MpdUtils.XlinkNamespaceUri_,d=t.getAttributeNS(a,c,"href"),t=t.getAttributeNS(a,c,"actuate")||"onRequest",h=$jscomp.makeIterator(Array.from(a.attributes)),p=h.next();!p.done;p=h.next())(p=p.value).namespaceURI==c&&a.removeAttributeNS(p.namespaceURI,p.localName);return 5<=o?shaka.util.AbortableOperation.failed(new l(l.Severity.CRITICAL,l.Category.MANIFEST,l.Code.DASH_XLINK_DEPTH_LIMIT)):"onLoad"!=t?shaka.util.AbortableOperation.failed(new l(l.Severity.CRITICAL,l.Category.MANIFEST,l.Code.DASH_UNSUPPORTED_XLINK_ACTUATE)):(s=u.resolveUris([e],[d]),e=shaka.net.NetworkingEngine.RequestType.MANIFEST,u=shaka.net.NetworkingEngine.makeRequest(s,r),e=i.request(e,u),goog.asserts.assert(e instanceof shaka.util.AbortableOperation,"Unexpected implementation of IAbortableOperation!"),e.chain(function(e){if(!(e=shaka.util.XmlUtils.parseXml(e.data,a.tagName)))return shaka.util.AbortableOperation.failed(new l(l.Severity.CRITICAL,l.Category.MANIFEST,l.Code.DASH_INVALID_XML,d));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;e.childNodes.length;){var t=e.childNodes[0];e.removeChild(t),a.appendChild(t)}for(t=(e=$jscomp.makeIterator(Array.from(e.attributes))).next();!t.done;t=e.next())a.setAttributeNode(t.value.cloneNode(!1));return shaka.dash.MpdUtils.processXlinks(a,r,n,s[0],i,o+1)}))},shaka.dash.MpdUtils.processXlinks=function(t,a,r,n,i,o){o=void 0===o?0:o;var s=shaka.dash.MpdUtils,e=shaka.util.XmlUtils,l=s.XlinkNamespaceUri_;if(e.getAttributeNS(t,l,"href"))return e=s.handleXlinkInElement_(t,a,r,n,i,o),e=r?e.chain(void 0,function(e){return s.processXlinks(t,a,r,n,i,o)}):e;for(var u=[],c=$jscomp.makeIterator(Array.from(t.childNodes)),d=c.next();!d.done;d=c.next())(d=d.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==e.getAttributeNS(d,l,"href")?t.removeChild(d):"SegmentTimeline"!=d.tagName&&u.push(shaka.dash.MpdUtils.processXlinks(d,a,r,n,i,o)));return shaka.util.AbortableOperation.all(u).chain(function(){return t})},shaka.dash.MpdUtils.XlinkNamespaceUri_="http://www.w3.org/1999/xlink",shaka.media.Mp4SegmentIndexParser=function(){},shaka.media.Mp4SegmentIndexParser.parse=function(e,t,a,r,n,i,o){var s,l=shaka.media.Mp4SegmentIndexParser,u=(new shaka.util.Mp4Parser).fullBox("sidx",function(e){s=l.parseSIDX_(t,r,n,i,o,a,e)});if(e&&u.parse(e),s)return s;throw shaka.log.error('Invalid box type, expected "sidx".'),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE)},shaka.media.Mp4SegmentIndexParser.parseSIDX_=function(e,t,a,r,n,i,o){goog.asserts.assert(null!=o.version,"SIDX is a full box and should have a valid version.");var s,l=[],u=(o.reader.skip(4),o.reader.readUint32());if(0==u)throw shaka.log.error("Invalid timescale."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_INVALID_TIMESCALE);h=0==o.version?(s=o.reader.readUint32(),o.reader.readUint32()):(s=o.reader.readUint64(),o.reader.readUint64()),o.reader.skip(2);var c=o.reader.readUint16();for(e=e+o.size+h,h=(c=$jscomp.makeIterator(shaka.util.Iterables.range(c))).next();!h.done;h=c.next()){shaka.util.Functional.ignored(h.value);var d=o.reader.readUint32(),h=(2147483648&d)>>>31,p=(d&=2147483647,o.reader.readUint32());if(o.reader.skip(4),1==h)throw shaka.log.error("Heirarchical SIDXs are not supported."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_TYPE_NOT_SUPPORTED);l.push(new shaka.media.SegmentReference(s/u+a,(s+p)/u+a,function(){return i},e,e+d-1,t,a,r,n)),s+=p,e+=d}return o.parser.stop(),l},shaka.util.EbmlParser=function(e){this.dataView_=shaka.util.BufferUtils.toDataView(e),this.reader_=new shaka.util.DataViewReader(this.dataView_,shaka.util.DataViewReader.Endianness.BIG_ENDIAN)},shaka.util.EbmlParser.prototype.hasMoreData=function(){return this.reader_.hasMoreData()},shaka.util.EbmlParser.prototype.parseElement=function(){var e=this.parseId_(),t=this.parseVint_(),t=shaka.util.EbmlParser.isDynamicSizeValue_(t)?this.dataView_.byteLength-this.reader_.getPosition():shaka.util.EbmlParser.getVintValue_(t),a=(t=this.reader_.getPosition()+t<=this.dataView_.byteLength?t:this.dataView_.byteLength-this.reader_.getPosition(),shaka.util.BufferUtils.toDataView(this.dataView_,this.reader_.getPosition(),t));return this.reader_.skip(t),new shaka.util.EbmlElement(e,a)},shaka.util.EbmlParser.prototype.parseId_=function(){var e=this.parseVint_();if(7<e.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);for(var t=0,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())t=256*t+a.value;return t},shaka.util.EbmlParser.prototype.parseVint_=function(){var e=this.reader_.getPosition(),t=this.reader_.readUint8();if(0==t)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);return t=8-Math.floor(Math.log2(t)),goog.asserts.assert(t<=8&&1<=t,"Incorrect log2 value"),this.reader_.skip(t-1),shaka.util.BufferUtils.toUint8(this.dataView_,e,t)},shaka.util.EbmlParser.getVintValue_=function(e){if(8==e.length&&224&e[1])throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var t=0,a=$jscomp.makeIterator(shaka.util.Iterables.enumerate(e)),r=a.next();!r.done;r=a.next())var n=(r=r.value).item,t=0==r.i?n&(1<<8-e.length)-1:256*t+n;return t},shaka.util.EbmlParser.isDynamicSizeValue_=function(e){for(var t=shaka.util.BufferUtils,a=$jscomp.makeIterator(shaka.util.EbmlParser.DYNAMIC_SIZES),r=a.next();!r.done;r=a.next())if(t.equal(e,new Uint8Array(r.value)))return!0;return!1},shaka.util.EbmlParser.DYNAMIC_SIZES=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],shaka.util.EbmlElement=function(e,t){this.id=e,this.dataView_=t},shaka.util.EbmlElement.prototype.getOffset=function(){return this.dataView_.byteOffset},shaka.util.EbmlElement.prototype.createParser=function(){return new shaka.util.EbmlParser(this.dataView_)},shaka.util.EbmlElement.prototype.getUint=function(){if(8<this.dataView_.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);if(8==this.dataView_.byteLength&&224&this.dataView_.getUint8(0))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var e=0,t=$jscomp.makeIterator(shaka.util.Iterables.range(this.dataView_.byteLength)),a=t.next();!a.done;a=t.next())e=256*e+(a=this.dataView_.getUint8(a.value));return e},shaka.util.EbmlElement.prototype.getFloat=function(){if(4==this.dataView_.byteLength)return this.dataView_.getFloat32(0);if(8==this.dataView_.byteLength)return this.dataView_.getFloat64(0);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_BAD_FLOATING_POINT_SIZE)},shaka.media.WebmSegmentIndexParser=function(){},shaka.media.WebmSegmentIndexParser.parse=function(e,t,a,r,n,i,o){if(t=shaka.media.WebmSegmentIndexParser.parseWebmContainer_(t),(e=new shaka.util.EbmlParser(e).parseElement()).id!=shaka.media.WebmSegmentIndexParser.CUES_ID)throw shaka.log.error("Not a Cues element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUES_ELEMENT_MISSING);return shaka.media.WebmSegmentIndexParser.parseCues_(e,t.segmentOffset,t.timecodeScale,t.duration,a,r,n,i,o)},shaka.media.WebmSegmentIndexParser.parseWebmContainer_=function(e){if((e=new shaka.util.EbmlParser(e)).parseElement().id!=shaka.media.WebmSegmentIndexParser.EBML_ID)throw shaka.log.error("Not an EBML element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_EBML_HEADER_ELEMENT_MISSING);var t=e.parseElement();if(t.id!=shaka.media.WebmSegmentIndexParser.SEGMENT_ID)throw shaka.log.error("Not a Segment element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_SEGMENT_ELEMENT_MISSING);return{segmentOffset:e=t.getOffset(),timecodeScale:(t=shaka.media.WebmSegmentIndexParser.parseSegment_(t)).timecodeScale,duration:t.duration}},shaka.media.WebmSegmentIndexParser.parseSegment_=function(e){e=e.createParser();for(var t=null;e.hasMoreData();){var a=e.parseElement();if(a.id==shaka.media.WebmSegmentIndexParser.INFO_ID){t=a;break}}if(t)return shaka.media.WebmSegmentIndexParser.parseInfo_(t);throw shaka.log.error("Not an Info element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_INFO_ELEMENT_MISSING)},shaka.media.WebmSegmentIndexParser.parseInfo_=function(e){var t=e.createParser(),a=1e6;for(e=null;t.hasMoreData();){var r=t.parseElement();r.id==shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID?a=r.getUint():r.id==shaka.media.WebmSegmentIndexParser.DURATION_ID&&(e=r.getFloat())}if(null==e)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_DURATION_ELEMENT_MISSING);return{timecodeScale:t=a/1e9,duration:e*t}},shaka.media.WebmSegmentIndexParser.parseCues_=function(e,t,a,r,n,i,o,s,l){function u(){return n}var c=[];e=e.createParser();for(var d=null,h=null;e.hasMoreData();){var p,f=e.parseElement();f.id==shaka.media.WebmSegmentIndexParser.CUE_POINT_ID&&(p=shaka.media.WebmSegmentIndexParser.parseCuePoint_(f))&&(f=a*p.unscaledTime,p=t+p.relativeOffset,null!=d&&(goog.asserts.assert(null!=h,"last offset cannot be null"),c.push(new shaka.media.SegmentReference(d+o,f+o,u,h,p-1,i,o,s,l))),d=f,h=p)}return null!=d&&(goog.asserts.assert(null!=h,"last offset cannot be null"),c.push(new shaka.media.SegmentReference(d+o,r+o,u,h,null,i,o,s,l))),c},shaka.media.WebmSegmentIndexParser.parseCuePoint_=function(e){if((e=(t=e.createParser()).parseElement()).id!=shaka.media.WebmSegmentIndexParser.CUE_TIME_ID)throw shaka.log.warning("Not a CueTime element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TIME_ELEMENT_MISSING);if(e=e.getUint(),(t=t.parseElement()).id!=shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID)throw shaka.log.warning("Not a CueTrackPositions element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING);for(var t=t.createParser(),a=0;t.hasMoreData();){var r=t.parseElement();if(r.id==shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION){a=r.getUint();break}}return{unscaledTime:e,relativeOffset:a}},shaka.media.WebmSegmentIndexParser.EBML_ID=440786851,shaka.media.WebmSegmentIndexParser.SEGMENT_ID=408125543,shaka.media.WebmSegmentIndexParser.INFO_ID=357149030,shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID=2807729,shaka.media.WebmSegmentIndexParser.DURATION_ID=17545,shaka.media.WebmSegmentIndexParser.CUES_ID=475249515,shaka.media.WebmSegmentIndexParser.CUE_POINT_ID=187,shaka.media.WebmSegmentIndexParser.CUE_TIME_ID=179,shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID=183,shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION=241,shaka.dash.SegmentBase=function(){},shaka.dash.SegmentBase.createInitSegment=function(e,t){var a,r,n=shaka.util.XmlUtils,i=shaka.util.ManifestParserUtils,t=shaka.dash.MpdUtils.inheritChild(e,t,"Initialization");return t?(a=e.representation.baseUris,(r=t.getAttribute("sourceURL"))&&(a=i.resolveUris(e.representation.baseUris,[r])),i=0,r=null,(n=n.parseAttr(t,"range",n.parseRange))&&(i=n.start,r=n.end),new shaka.media.InitSegmentReference(function(){return a},i,r)):null},shaka.dash.SegmentBase.createStreamInfo=function(e,t){goog.asserts.assert(e.representation.segmentBase,"Should only be called with SegmentBase");var a=shaka.dash.MpdUtils,r=shaka.dash.SegmentBase,n=shaka.util.XmlUtils,i=1,o=(Number(a.inheritAttribute(e,r.fromInheritance_,"presentationTimeOffset"))||0)/(i=(a=a.inheritAttribute(e,r.fromInheritance_,"timescale"))?n.parsePositiveInt(a)||1:i)||0,s=r.createInitSegment(e,r.fromInheritance_),l=(r.checkSegmentIndexRangeSupport_(e,s),shaka.util.ObjectUtils.shallowCloneObject(e));return{generateSegmentIndex:function(){return r.generateSegmentIndex_(l,t,s,o)}}},shaka.dash.SegmentBase.generateSegmentIndexFromUris=function(t,a,r,n,i,o,s){var l,u,c,d,h,p,f,m,g,y,v,_,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(l=t.presentationTimeline,u=!t.dynamic||!t.periodInfo.isLastPeriod,c=t.periodInfo.start,d=t.periodInfo.duration,h=t.representation.mimeType.split("/")[1],p=null,m=[(f=a)(n,i,o),"webm"==h?f(r.getUris(),r.startByte,r.endByte):null],f=null,e.yield(Promise.all(m),2)):(f=e.yieldResult,m=f[0],g=f[1]||null,y=null,v=c-s,_=c,k=d?c+d:1/0,y="mp4"==h?shaka.media.Mp4SegmentIndexParser.parse(m,i,n,r,v,_,k):(goog.asserts.assert(g,"WebM requires init data"),shaka.media.WebmSegmentIndexParser.parse(m,g,n,r,v,_,k)),l.notifySegments(y),goog.asserts.assert(!p,"Should not call generateSegmentIndex twice"),p=new shaka.media.SegmentIndex(y),u&&p.fit(_,k,!0),e.return(p))})},shaka.dash.SegmentBase.fromInheritance_=function(e){return e.segmentBase},shaka.dash.SegmentBase.computeIndexRange_=function(e){var t=shaka.dash.MpdUtils,a=shaka.dash.SegmentBase,r=shaka.util.XmlUtils,n=t.inheritChild(e,a.fromInheritance_,"RepresentationIndex");return e=t.inheritAttribute(e,a.fromInheritance_,"indexRange"),e=r.parseRange(e||""),e=n?r.parseAttr(n,"range",r.parseRange,e):e},shaka.dash.SegmentBase.computeIndexUris_=function(e){var t=shaka.util.ManifestParserUtils,a=shaka.dash.MpdUtils.inheritChild(e,shaka.dash.SegmentBase.fromInheritance_,"RepresentationIndex"),r=e.representation.baseUris;return r=(a=a&&a.getAttribute("sourceURL"))?t.resolveUris(e.representation.baseUris,[a]):r},shaka.dash.SegmentBase.checkSegmentIndexRangeSupport_=function(e,t){var a=shaka.dash.SegmentBase;if(a.checkSegmentIndexSupport(e,t),!a.computeIndexRange_(e))throw shaka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentBase.checkSegmentIndexSupport=function(e,t){var a=shaka.util.ManifestParserUtils.ContentType,r=e.representation.contentType,n=e.representation.mimeType.split("/")[1];if(r!=a.TEXT&&"mp4"!=n&&"webm"!=n)throw shaka.log.error("SegmentBase specifies an unsupported container type.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER);if("webm"==n&&!t)throw shaka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_WEBM_MISSING_INIT)},shaka.dash.SegmentBase.generateSegmentIndex_=function(e,t,a,r){var n=(i=shaka.dash.SegmentBase).computeIndexUris_(e),i=i.computeIndexRange_(e);return goog.asserts.assert(i,"Index range should not be null!"),shaka.dash.SegmentBase.generateSegmentIndexFromUris(e,t,a,n,i.start,i.end,r)},shaka.dash.SegmentList=function(){},shaka.dash.SegmentList.createStreamInfo=function(e,t){goog.asserts.assert(e.representation.segmentList,"Should only be called with SegmentList");var a=shaka.dash.SegmentList,r=shaka.dash.SegmentBase.createInitSegment(e,a.fromInheritance_),n=a.parseSegmentListInfo_(e),i=(a.checkSegmentListInfo_(e,n),null),o=null;return e.period.id&&e.representation.id&&(o=e.period.id+","+e.representation.id,i=t[o]),a=a.createSegmentReferences_(e.periodInfo.start,e.periodInfo.duration,n.startNumber,e.representation.baseUris,n,r),r=!i,i?(o=e.presentationTimeline.getSegmentAvailabilityStart(),i.mergeAndEvict(a,o)):(e.presentationTimeline.notifySegments(a),i=new shaka.media.SegmentIndex(a),o&&e.dynamic&&(t[o]=i)),e.dynamic&&e.periodInfo.isLastPeriod||i.fit(e.periodInfo.start,e.periodInfo.duration?e.periodInfo.start+e.periodInfo.duration:1/0,r),{generateSegmentIndex:function(){return Promise.resolve(i)}}},shaka.dash.SegmentList.fromInheritance_=function(e){return e.segmentList},shaka.dash.SegmentList.parseSegmentListInfo_=function(e){var t=shaka.dash.SegmentList,a=shaka.dash.MpdUtils,r=t.parseMediaSegments_(e);return 0==(t=(e=a.parseSegmentInfo(e,t.fromInheritance_)).startNumber)&&(shaka.log.warning("SegmentList@startNumber must be > 0"),t=1),a=0,e.segmentDuration?a=e.segmentDuration*(t-1):e.timeline&&0<e.timeline.length&&(a=e.timeline[0].start),{segmentDuration:e.segmentDuration,startTime:a,startNumber:t,scaledPresentationTimeOffset:e.scaledPresentationTimeOffset,timeline:e.timeline,mediaSegments:r}},shaka.dash.SegmentList.checkSegmentListInfo_=function(e,t){if(!t.segmentDuration&&!t.timeline&&1<t.mediaSegments.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(!t.segmentDuration&&!e.periodInfo.duration&&!t.timeline&&1==t.mediaSegments.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(t.timeline&&0==t.timeline.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentList.createSegmentReferences_=function(e,t,a,r,n,i){a=shaka.util.ManifestParserUtils;for(var o=n.mediaSegments.length,s=(n.timeline&&n.timeline.length!=n.mediaSegments.length&&(o=Math.min(n.timeline.length,n.mediaSegments.length),shaka.log.warning("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",n.mediaSegments.length,"to",o)),e-n.scaledPresentationTimeOffset),l=t?e+t:1/0,u=[],c=n.startTime,d={},h=(o=$jscomp.makeIterator(shaka.util.Iterables.range(o))).next();!h.done;d={$jscomp$loop$prop$mediaUri$632:d.$jscomp$loop$prop$mediaUri$632},h=o.next()){var p=h.value,h=n.mediaSegments[p],f=(d.$jscomp$loop$prop$mediaUri$632=a.resolveUris(r,[h.mediaUri]),void 0),f=null!=n.segmentDuration?c+n.segmentDuration:n.timeline?n.timeline[p].end:(goog.asserts.assert(1==n.mediaSegments.length&&t,"There should be exactly one segment with a Period duration."),c+t),p=function(e){return function(){return e.$jscomp$loop$prop$mediaUri$632}}(d);u.push(new shaka.media.SegmentReference(e+c,e+f,p,h.start,h.end,i,s,e,l)),c=f}return u},shaka.dash.SegmentList.parseMediaSegments_=function(t){var e=[t.representation.segmentList,t.adaptationSet.segmentList,t.period.segmentList].filter(shaka.util.Functional.isNotNull),a=shaka.util.XmlUtils;return e.map(function(e){return a.findChildren(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(e){return e.getAttribute("indexRange")&&!t.indexRangeWarningGiven&&(t.indexRangeWarningGiven=!0,shaka.log.warning("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{mediaUri:e.getAttribute("media"),start:(e=a.parseAttr(e,"mediaRange",a.parseRange,{start:0,end:null})).start,end:e.end}})},shaka.dash.SegmentTemplate=function(){},shaka.dash.SegmentTemplate.createStreamInfo=function(e,t,a,r,n,i){goog.asserts.assert(e.representation.segmentTemplate,"Should only be called with SegmentTemplate");var o,s,l,u,c,d=shaka.dash.SegmentTemplate,h=d.createInitSegment_(e),p=d.parseSegmentTemplateInfo_(e),f=(d.checkSegmentTemplateInfo_(e,p),shaka.util.ObjectUtils.shallowCloneObject(e));return p.indexTemplate?(shaka.dash.SegmentBase.checkSegmentIndexSupport(e,h),{generateSegmentIndex:function(){return d.generateSegmentIndexFromIndexTemplate_(f,t,h,p)}}):p.segmentDuration?(r||(e.presentationTimeline.notifyMaxSegmentDuration(p.segmentDuration),e.presentationTimeline.notifyMinSegmentStartTime(e.periodInfo.start)),{generateSegmentIndex:function(){return d.generateSegmentIndexFromDuration_(f,p,n,h,i)}}):(r=o=null,e.period.id&&e.representation.id&&(r=e.period.id+","+e.representation.id,o=a[r]),s=d.createFromTimeline_(f,p,h),l=e.periodInfo.start,c=1/0!=(u=e.periodInfo.duration?e.periodInfo.start+e.periodInfo.duration:1/0),o?(c&&new shaka.media.SegmentIndex(s).fit(l,u,!0),o.mergeAndEvict(s,e.presentationTimeline.getSegmentAvailabilityStart())):(e.presentationTimeline.notifySegments(s),o=new shaka.media.SegmentIndex(s),r&&e.dynamic&&(a[r]=o)),c&&o.fit(l,u),{generateSegmentIndex:function(){return Promise.resolve(o)}})},shaka.dash.SegmentTemplate.fromInheritance_=function(e){return e.segmentTemplate},shaka.dash.SegmentTemplate.parseSegmentTemplateInfo_=function(e){var t=shaka.dash.SegmentTemplate,a=shaka.dash.MpdUtils,r=a.parseSegmentInfo(e,t.fromInheritance_),n=a.inheritAttribute(e,t.fromInheritance_,"media");return e=a.inheritAttribute(e,t.fromInheritance_,"index"),{segmentDuration:r.segmentDuration,timescale:r.timescale,startNumber:r.startNumber,scaledPresentationTimeOffset:r.scaledPresentationTimeOffset,unscaledPresentationTimeOffset:r.unscaledPresentationTimeOffset,timeline:r.timeline,mediaTemplate:n,indexTemplate:e}},shaka.dash.SegmentTemplate.checkSegmentTemplateInfo_=function(e,t){var a=t.indexTemplate?1:0;if(0==(a=(a+=t.timeline?1:0)+(t.segmentDuration?1:0)))throw shaka.log.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(1!=a&&(shaka.log.warning("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.representation),t.indexTemplate?(shaka.log.info("Using the index URL template by default."),t.timeline=null):(goog.asserts.assert(t.timeline,"There should be a timeline"),shaka.log.info("Using the SegmentTimeline by default.")),t.segmentDuration=null),!t.indexTemplate&&!t.mediaTemplate)throw shaka.log.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentTemplate.generateSegmentIndexFromIndexTemplate_=function(e,t,a,r){var n=shaka.dash.MpdUtils,i=shaka.util.ManifestParserUtils;return goog.asserts.assert(r.indexTemplate,"must be using index template"),n=n.fillUriTemplate(r.indexTemplate,e.representation.id,null,e.bandwidth||null,null),i=i.resolveUris(e.representation.baseUris,[n]),shaka.dash.SegmentBase.generateSegmentIndexFromUris(e,t,a,i,0,null,r.scaledPresentationTimeOffset)},shaka.dash.SegmentTemplate.generateSegmentIndexFromDuration_=function(e,i,t,o,a){goog.asserts.assert(i.mediaTemplate,"There should be a media template with duration");function s(){var e=null!=r&&a[r]||h;return e?d+e:1/0}function n(){var e=[Math.max(c.getSegmentAvailabilityStart(),d),Math.min(c.getSegmentAvailabilityEnd(),s())];return goog.asserts.assert(e.every(isFinite),"Available presentation times must be finite!"),goog.asserts.assert(e.every(function(e){return 0<=e}),"Available presentation times must be positive!"),goog.asserts.assert(null!=p,"Segment duration must not be null!"),e=e.map(function(e){return e-d}),[Math.ceil(e[0]/p),Math.ceil(e[1]/p)-1].map(function(e){return e+f})}var l=shaka.dash.MpdUtils,u=shaka.util.ManifestParserUtils,c=e.presentationTimeline,d=e.periodInfo.start,r=e.period.id,h=e.periodInfo.duration,p=i.segmentDuration,f=(goog.asserts.assert(null!=p,"Segment duration must not be null!"),i.startNumber),m=i.timescale,g=i.mediaTemplate,y=e.bandwidth||null,v=e.representation.id,_=e.representation.baseUris,k=d-i.scaledPresentationTimeOffset,b=n();e=e.dynamic?Math.max(b[0],b[1]-t+1):b[0],b=b[1],t=[];for(var S=function(t){goog.asserts.assert(null!=p,"Segment duration must not be null!");var a=(r=(t-f)*p)+i.scaledPresentationTimeOffset,e=r+d,r=e+p,n=Math.min(r,s());return goog.asserts.assert(e<n,"Generated a segment outside of the period!"),(e=new shaka.media.SegmentReference(e,n,function(){var e=l.fillUriTemplate(g,v,t,y,a*m);return u.resolveUris(_,[e])},0,null,o,k,d,s())).trueEndTime=r,e},E=e;E<=b;++E){var T=S(E);t.push(T)}var x,A=new shaka.media.SegmentIndex(t);return t=c.getSegmentAvailabilityEnd()<s(),E=c.isLive(),(t||E)&&(x=Math.max(e,b+1),A.updateEvery(p,function(){var e=c.getSegmentAvailabilityStart();A.evict(e),(t=$jscomp.makeIterator(n())).next();for(var t=t.next().value,a=[];x<=t;){var r=S(x);a.push(r),x++}return e>s()&&!a.length?null:a})),Promise.resolve(A)},shaka.dash.SegmentTemplate.createFromTimeline_=function(e,t,a){for(var r=shaka.dash.MpdUtils,n=shaka.util.ManifestParserUtils,i=e.periodInfo.start,o=e.periodInfo.duration,s=i-t.scaledPresentationTimeOffset,o=o?i+o:1/0,l=[],u={},c=$jscomp.makeIterator(shaka.util.Iterables.enumerate(t.timeline)),d=c.next();!d.done;u={$jscomp$loop$prop$mediaTemplate$634:u.$jscomp$loop$prop$mediaTemplate$634,$jscomp$loop$prop$repId$635:u.$jscomp$loop$prop$repId$635,$jscomp$loop$prop$segmentReplacement$636:u.$jscomp$loop$prop$segmentReplacement$636,$jscomp$loop$prop$bandwidth$637:u.$jscomp$loop$prop$bandwidth$637,$jscomp$loop$prop$timeReplacement$638:u.$jscomp$loop$prop$timeReplacement$638,$jscomp$loop$prop$baseUris$639:u.$jscomp$loop$prop$baseUris$639},d=c.next()){var h=d.value,d=(f=h.item).start,p=f.unscaledStart,f=f.end;u.$jscomp$loop$prop$segmentReplacement$636=h.i+t.startNumber,u.$jscomp$loop$prop$timeReplacement$638=p+t.unscaledPresentationTimeOffset,u.$jscomp$loop$prop$repId$635=e.representation.id,u.$jscomp$loop$prop$bandwidth$637=e.bandwidth||null,u.$jscomp$loop$prop$mediaTemplate$634=t.mediaTemplate,u.$jscomp$loop$prop$baseUris$639=e.representation.baseUris,h=function(t){return function(){goog.asserts.assert(t.$jscomp$loop$prop$mediaTemplate$634,"There should be a media template with a timeline");var e=r.fillUriTemplate(t.$jscomp$loop$prop$mediaTemplate$634,t.$jscomp$loop$prop$repId$635,t.$jscomp$loop$prop$segmentReplacement$636,t.$jscomp$loop$prop$bandwidth$637||null,t.$jscomp$loop$prop$timeReplacement$638);return n.resolveUris(t.$jscomp$loop$prop$baseUris$639,[e]).map(function(e){return e.toString()})}}(u),l.push(new shaka.media.SegmentReference(i+d,i+f,h,0,null,a,s,i,o))}return l},shaka.dash.SegmentTemplate.createInitSegment_=function(e){var t,a,r,n=shaka.dash.MpdUtils,i=shaka.util.ManifestParserUtils,o=n.inheritAttribute(e,shaka.dash.SegmentTemplate.fromInheritance_,"initialization");return o?(t=e.representation.id,a=e.bandwidth||null,r=e.representation.baseUris,new shaka.media.InitSegmentReference(function(){goog.asserts.assert(o,"Should have returned earler");var e=n.fillUriTemplate(o,t,null,a,null);return i.resolveUris(r,[e])},0,null)):null},shaka.util.PeriodCombiner=function(){this.variants_=[],this.audioStreams_=[],this.videoStreams_=[],this.textStreams_=[],this.imageStreams_=[],this.usedPeriodIds_=new Set},shaka.util.PeriodCombiner.prototype.release=function(){for(var e=this.audioStreams_.concat(this.videoStreams_,this.textStreams_,this.imageStreams_),t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.audioStreams_=[],this.videoStreams_=[],this.textStreams_=[],this.imageStreams_=[],this.variants_=[]},shaka.util.PeriodCombiner.prototype.getVariants=function(){return this.variants_},shaka.util.PeriodCombiner.prototype.getTextStreams=function(){return this.textStreams_},shaka.util.PeriodCombiner.prototype.getImageStreams=function(){return this.imageStreams_},shaka.util.PeriodCombiner.prototype.combinePeriods=function(t,a){var r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(r=shaka.util.ManifestParserUtils.ContentType,c=shaka.util.Iterables,shaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_(t),shaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_(t),shaka.util.PeriodCombiner.filterOutTextStreamDuplicates_(t),shaka.util.PeriodCombiner.filterOutImageStreamDuplicates_(t),!a&&1==t.length){u=t[0],R.audioStreams_=u.audioStreams,R.videoStreams_=u.videoStreams,R.textStreams_=u.textStreams,R.imageStreams_=u.imageStreams,e.jumpTo(2);break}for(n=-1,i=$jscomp.makeIterator(c.enumerate(t)),o=i.next();!o.done;o=i.next())l=o.value,s=l.i,l=l.item,R.usedPeriodIds_.has(l.id)||(R.usedPeriodIds_.add(l.id),-1==n&&(n=s));if(-1==n)return e.return();for(u=t.map(function(e){return e.audioStreams}),c=t.map(function(e){return e.videoStreams}),d=t.map(function(e){return e.textStreams}),h=t.map(function(e){return e.imageStreams}),p=$jscomp.makeIterator(d),f=p.next();!f.done;f=p.next())f.value.push(shaka.util.PeriodCombiner.dummyStream_(r.TEXT));for(m=$jscomp.makeIterator(h),g=m.next();!g.done;g=m.next())g.value.push(shaka.util.PeriodCombiner.dummyStream_(r.IMAGE));return e.yield(shaka.util.PeriodCombiner.combine_(R.audioStreams_,u,n,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),3);case 3:return e.yield(shaka.util.PeriodCombiner.combine_(R.videoStreams_,c,n,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),4);case 4:return e.yield(shaka.util.PeriodCombiner.combine_(R.textStreams_,d,n,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),5);case 5:return e.yield(shaka.util.PeriodCombiner.combine_(R.imageStreams_,h,n,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),2);case 2:if(y=0,v=[],R.videoStreams_.length&&R.audioStreams_.length)for(T=$jscomp.makeIterator(R.audioStreams_),x=T.next();!x.done;x=T.next())for(A=x.value,P=$jscomp.makeIterator(R.videoStreams_),C=P.next();!C.done;C=P.next())w=C.value,M=shaka.media.DrmEngine.getCommonDrmInfos(A.drmInfos,w.drmInfos),A.drmInfos.length&&w.drmInfos.length&&!M.length?shaka.log.warning("Incompatible DRM in audio & video, skipping variant creation.",A,w):(I=y++,v.push({id:I,language:A.language,primary:A.primary,audio:A,video:w,bandwidth:(A.bandwidth||0)+(w.bandwidth||0),drmInfos:M,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(_=R.videoStreams_.concat(R.audioStreams_),k=$jscomp.makeIterator(_),b=k.next();!b.done;b=k.next())S=b.value,E=y++,v.push({id:E,language:S.language,primary:S.primary,audio:S.type==r.AUDIO?S:null,video:S.type==r.VIDEO?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});R.variants_=v,e.jumpToEnd()}})},shaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_=function(e){for(var t=shaka.util.ArrayUtils,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){for(var a=a.value,r=[],n=$jscomp.makeIterator(a.audioStreams),i=n.next();!i.done;i=n.next()){for(var i=i.value,o=!1,s=$jscomp.makeIterator(r),l=s.next();!l.done;l=s.next())l=l.value,i.id!=l.id&&i.channelsCount==l.channelsCount&&i.language==l.language&&i.bandwidth==l.bandwidth&&i.label==l.label&&i.codecs==l.codecs&&i.mimeType==l.mimeType&&t.hasSameElements(i.roles,l.roles)&&i.audioSamplingRate==l.audioSamplingRate&&i.primary==l.primary&&(o=!0);o||r.push(i)}a.audioStreams=r}},shaka.util.PeriodCombiner.filterOutTextStreamDuplicates_=function(e){for(var t=shaka.util.ArrayUtils,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){for(var a=a.value,r=[],n=$jscomp.makeIterator(a.textStreams),i=n.next();!i.done;i=n.next()){for(var i=i.value,o=!1,s=$jscomp.makeIterator(r),l=s.next();!l.done;l=s.next())l=l.value,i.id!=l.id&&i.language==l.language&&i.label==l.label&&i.codecs==l.codecs&&i.mimeType==l.mimeType&&t.hasSameElements(i.roles,l.roles)&&(o=!0);o||r.push(i)}a.textStreams=r}},shaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_=function(e){for(var t=shaka.util.ArrayUtils,a=shaka.util.MapUtils,r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next()){for(var r=r.value,n=[],i=$jscomp.makeIterator(r.videoStreams),o=i.next();!o.done;o=i.next()){for(var o=o.value,s=!1,l=$jscomp.makeIterator(n),u=l.next();!u.done;u=l.next())u=u.value,o.id!=u.id&&o.width==u.width&&o.frameRate==u.frameRate&&o.codecs==u.codecs&&o.mimeType==u.mimeType&&o.label==u.label&&t.hasSameElements(o.roles,u.roles)&&a.hasSameElements(o.closedCaptions,u.closedCaptions)&&o.bandwidth==u.bandwidth&&(s=!0);s||n.push(o)}r.videoStreams=n}},shaka.util.PeriodCombiner.filterOutImageStreamDuplicates_=function(e){for(var t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){for(var t=t.value,a=[],r=$jscomp.makeIterator(t.imageStreams),n=r.next();!n.done;n=r.next()){for(var n=n.value,i=!1,o=$jscomp.makeIterator(a),s=o.next();!s.done;s=o.next())s=s.value,n.id!=s.id&&n.width==s.width&&n.codecs==s.codecs&&n.mimeType==s.mimeType&&(i=!0);i||a.push(n)}t.imageStreams=a}},shaka.util.PeriodCombiner.combineDbStreams=function(t){var a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(a=shaka.util.ManifestParserUtils.ContentType,1==t.length)return e.return(t[0]);for(p=t.map(function(e){return e.filter(function(e){return e.type==a.AUDIO})}),r=t.map(function(e){return e.filter(function(e){return e.type==a.VIDEO})}),n=t.map(function(e){return e.filter(function(e){return e.type==a.TEXT})}),i=t.map(function(e){return e.filter(function(e){return e.type==a.IMAGE})}),o=$jscomp.makeIterator(n),s=o.next();!s.done;s=o.next())s.value.push(shaka.util.PeriodCombiner.dummyStreamDB_(a.TEXT));for(l=$jscomp.makeIterator(i),u=l.next();!u.done;u=l.next())u.value.push(shaka.util.PeriodCombiner.dummyStreamDB_(a.IMAGE));return e.yield(shaka.util.PeriodCombiner.combine_([],p,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),2);case 2:return c=e.yieldResult,e.yield(shaka.util.PeriodCombiner.combine_([],r,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),3);case 3:return d=e.yieldResult,e.yield(shaka.util.PeriodCombiner.combine_([],n,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),4);case 4:return h=e.yieldResult,e.yield(shaka.util.PeriodCombiner.combine_([],i,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),5);case 5:if(p=e.yieldResult,f=0,d.length&&c.length)for(v=$jscomp.makeIterator(c),_=v.next();!_.done;_=v.next())for(k=_.value,b=$jscomp.makeIterator(d),S=b.next();!S.done;S=b.next())E=S.value,T=f++,E.variantIds.push(T),k.variantIds.push(T);else for(m=d.concat(c),g=$jscomp.makeIterator(m),y=g.next();!y.done;y=g.next())y.value.variantIds=[f++];return e.return(d.concat(c).concat(h).concat(p))}})},shaka.util.PeriodCombiner.combine_=function(t,a,r,n,i){var o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:for(o=shaka.util.ManifestParserUtils.ContentType,h=shaka.util.Iterables,s=[],l=$jscomp.makeIterator(h.enumerate(a)),u=l.next();!u.done;u=l.next())d=u.value,c=d.i,d=d.item,r<=c?s.push(new Set(d)):s.push(new Set);h=$jscomp.makeIterator(t),p=h.next();case 2:if(p.done){e.jumpTo(4);break}return g=p.value,e.yield(shaka.util.PeriodCombiner.extendExistingOutputStream_(g,a,r,i,s),5);case 5:if(!e.yieldResult)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);p=h.next(),e.jumpTo(2);break;case 4:f=$jscomp.makeIterator(s),m=f.next();case 6:if(m.done){e.jumpTo(8);break}g=m.value,y=$jscomp.makeIterator(g),v=y.next();case 9:if(v.done){m=f.next(),e.jumpTo(6);break}return _=v.value,e.yield(shaka.util.PeriodCombiner.createNewOutputStream_(_,a,n,i,s),12);case 12:(_=e.yieldResult)&&t.push(_),v=y.next(),e.jumpTo(9);break;case 8:for(k=$jscomp.makeIterator(s),m=k.next();!m.done;m=k.next())for(b=m.value,S={},E=$jscomp.makeIterator(b),v=E.next();!v.done;S={$jscomp$loop$prop$stream$530$641:S.$jscomp$loop$prop$stream$530$641},v=E.next())if(S.$jscomp$loop$prop$stream$530$641=v.value,T=S.$jscomp$loop$prop$stream$530$641.type==o.TEXT&&!S.$jscomp$loop$prop$stream$530$641.language,x=S.$jscomp$loop$prop$stream$530$641.type==o.IMAGE&&!S.$jscomp$loop$prop$stream$530$641.tilesLayout,!T&&!x&&t.some(function(t){return function(e){return e.mimeType==t.$jscomp$loop$prop$stream$530$641.mimeType&&shaka.util.MimeUtils.getCodecBase(e.codecs)==shaka.util.MimeUtils.getCodecBase(t.$jscomp$loop$prop$stream$530$641.codecs)}}(S)))throw shaka.log.error("Unused stream in period-flattening!",S.$jscomp$loop$prop$stream$530$641,t),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);return e.return(t)}})},shaka.util.PeriodCombiner.extendExistingOutputStream_=function(t,a,r,n,i){var o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.util.PeriodCombiner.findMatchesInAllPeriods_(a,t))?(goog.asserts.assert(t.createSegmentIndex,"outputStream should be a Stream type!"),e.yield(shaka.util.PeriodCombiner.createSegmentIndexes_(o),2)):(shaka.log.error("No matches extending output stream!",t,a),e.return(!1)):(goog.asserts.assert(o,"Matches should be non-null"),shaka.util.PeriodCombiner.extendOutputStream_(t,o,r,n,i),e.return(!0))})},shaka.util.PeriodCombiner.createSegmentIndexes_=function(e){for(var t=[],a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next())a=a.value,t.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&t.push(a.trickModeVideo.createSegmentIndex());return Promise.all(t)},shaka.util.PeriodCombiner.createNewOutputStream_=function(t,a,r,n,i){var o,s;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=r(t),(s=shaka.util.PeriodCombiner.findMatchesInAllPeriods_(a,o))?o.createSegmentIndex?e.yield(shaka.util.PeriodCombiner.createSegmentIndexes_(s),2):e.jumpTo(2):e.return(null)):(goog.asserts.assert(s,"Matches should be non-null"),shaka.util.PeriodCombiner.extendOutputStream_(o,s,0,n,i),e.return(o))})},shaka.util.PeriodCombiner.extendOutputStream_=function(e,t,a,r,n){for(var i=shaka.util.ManifestParserUtils.ContentType,o=shaka.util.LanguageUtils,s=(t=$jscomp.makeIterator(shaka.util.Iterables.enumerate(t))).next();!s.done;s=t.next()){var l,s=(u=s.value).i,u=u.item;a<=s&&(r(e,u),l=!0,l=(e.type!=i.AUDIO||0!=o.relatedness(e.language,u.language))&&l)&&n[s].delete(u)}},shaka.util.PeriodCombiner.cloneStream_=function(e){return(e=Object.assign({},e)).originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new shaka.media.MetaSegmentIndex,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e},shaka.util.PeriodCombiner.cloneStreamDB_=function(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e},shaka.util.PeriodCombiner.concatenateStreams_=function(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var a=t.keyIds;if(a=new Set([].concat($jscomp.arrayFromIterable(e.keyIds),$jscomp.arrayFromIterable(a))),e.keyIds=a,e.originalId=null==e.originalId?t.originalId:e.originalId+(","+(t.originalId||"")),a=shaka.media.DrmEngine.getCommonDrmInfos(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!a.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INCONSISTENT_DRM_ACROSS_PERIODS);if(e.drmInfos=a,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(a=$jscomp.makeIterator(t.closedCaptions)).next();!r.done;r=a.next()){var r=(n=$jscomp.makeIterator(r.value)).next().value,n=n.next().value;e.closedCaptions.set(r,n)}}goog.asserts.assert(e.segmentIndex instanceof shaka.media.MetaSegmentIndex,"Output streams should have a MetaSegmentIndex!"),goog.asserts.assert(t.segmentIndex,"Input segment index should have been created by now!"),e.segmentIndex.appendSegmentIndex(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=shaka.util.PeriodCombiner.cloneStream_(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),shaka.util.PeriodCombiner.concatenateStreams_(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&shaka.util.PeriodCombiner.concatenateStreams_(e.trickModeVideo,t)},shaka.util.PeriodCombiner.concatenateStreamDBs_=function(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var a=t.keyIds;if(a=new Set([].concat($jscomp.arrayFromIterable(e.keyIds),$jscomp.arrayFromIterable(a))),e.keyIds=a,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,$jscomp.arrayFromIterable(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(a=$jscomp.makeIterator(t.closedCaptions)).next();!r.done;r=a.next()){var r=(n=$jscomp.makeIterator(r.value)).next().value,n=n.next().value;e.closedCaptions.set(r,n)}}},shaka.util.PeriodCombiner.findMatchesInAllPeriods_=function(e,t){for(var a=[],r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next()){if(!(n=shaka.util.PeriodCombiner.findBestMatchInPeriod_(n.value,t)))return null;a.push(n)}return a},shaka.util.PeriodCombiner.findBestMatchInPeriod_=function(e,t){for(var a={audio:shaka.util.PeriodCombiner.areAVStreamsCompatible_,video:shaka.util.PeriodCombiner.areAVStreamsCompatible_,text:shaka.util.PeriodCombiner.areTextStreamsCompatible_,image:shaka.util.PeriodCombiner.areImageStreamsCompatible_}[t.type],r={audio:shaka.util.PeriodCombiner.isAudioStreamBetterMatch_,video:shaka.util.PeriodCombiner.isVideoStreamBetterMatch_,text:shaka.util.PeriodCombiner.isTextStreamBetterMatch_,image:shaka.util.PeriodCombiner.isImageStreamBetterMatch_}[t.type],n=null,i=$jscomp.makeIterator(e),o=i.next();!o.done;o=i.next())!a(t,o=o.value)||n&&!r(t,n,o)||(n=o);return n},shaka.util.PeriodCombiner.areAVStreamsCompatible_=function(e,t){return!(t.mimeType!=e.mimeType||shaka.util.MimeUtils.getCodecBase(t.codecs)!=shaka.util.MimeUtils.getCodecBase(e.codecs)||e.drmInfos&&!shaka.media.DrmEngine.areDrmCompatible(e.drmInfos,t.drmInfos))},shaka.util.PeriodCombiner.areTextStreamsCompatible_=function(e,t){return!!e.language&&(!t.language||0!=shaka.util.LanguageUtils.relatedness(e.language,t.language)&&t.kind==e.kind)},shaka.util.PeriodCombiner.areImageStreamsCompatible_=function(e,t){return!!e.tilesLayout},shaka.util.PeriodCombiner.isAudioStreamBetterMatch_=function(t,e,a){var r,n=shaka.util.LanguageUtils,i=(o=shaka.util.PeriodCombiner.BetterOrWorse).BETTER,o=o.WORSE;return t.id==a.id||(r=n.relatedness(t.language,e.language))<(n=n.relatedness(t.language,a.language))||!(n<r||(e.primary||!a.primary)&&(e.primary&&!a.primary||(t.roles.length?(i=e.roles.filter(function(e){return t.roles.includes(e)}),!((o=a.roles.filter(function(e){return t.roles.includes(e)})).length>i.length||!(o.length<i.length)&&a.roles.length<e.roles.length)):(a.roles.length||!e.roles.length)&&(a.roles.length&&!e.roles.length||(n=shaka.util.PeriodCombiner.compareClosestPreferLower(t.channelsCount,e.channelsCount,a.channelsCount))!=i&&(n==o||(n=shaka.util.PeriodCombiner.compareClosestPreferLower(t.audioSamplingRate,e.audioSamplingRate,a.audioSamplingRate))!=i&&(n==o||!t.bandwidth||shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(t.bandwidth,e.bandwidth,a.bandwidth)!=i))))))},shaka.util.PeriodCombiner.isVideoStreamBetterMatch_=function(e,t,a){var r=(n=shaka.util.PeriodCombiner.BetterOrWorse).BETTER,n=n.WORSE;if(e.id==a.id)return!0;var i=shaka.util.PeriodCombiner.compareClosestPreferLower(e.width*e.height,t.width*t.height,a.width*a.height);if(i==r)return!0;if(i==n)return!1;if(e.frameRate){if((i=shaka.util.PeriodCombiner.compareClosestPreferLower(e.frameRate,t.frameRate,a.frameRate))==r)return!0;if(i==n)return!1}return!(!e.bandwidth||shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(e.bandwidth,t.bandwidth,a.bandwidth)!=r)},shaka.util.PeriodCombiner.isTextStreamBetterMatch_=function(t,e,a){var r=shaka.util.LanguageUtils;if(t.id==a.id)return!0;var n=r.relatedness(t.language,e.language);if(n<(r=r.relatedness(t.language,a.language)))return!0;if(r<n)return!1;if(!e.primary&&a.primary)return!0;if(e.primary&&!a.primary)return!1;if(t.roles.length){if(n=e.roles.filter(function(e){return t.roles.includes(e)}),(r=a.roles.filter(function(e){return t.roles.includes(e)})).length>n.length)return!0;if(r.length<n.length)return!1}else{if(!a.roles.length&&e.roles.length)return!0;if(a.roles.length&&!e.roles.length)return!1}return a.mimeType==t.mimeType&&a.codecs==t.codecs&&(e.mimeType!=t.mimeType||e.codecs!=t.codecs)},shaka.util.PeriodCombiner.isImageStreamBetterMatch_=function(e,t,a){var r=shaka.util.PeriodCombiner.BetterOrWorse.BETTER;return e.id==a.id||shaka.util.PeriodCombiner.compareClosestPreferLower(e.width*e.height,t.width*t.height,a.width*a.height)==r},shaka.util.PeriodCombiner.dummyStreamDB_=function(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}},shaka.util.PeriodCombiner.dummyStream_=function(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new shaka.media.SegmentIndex([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}},shaka.util.PeriodCombiner.compareClosestPreferLower=function(e,t,a){var r=shaka.util.PeriodCombiner.BetterOrWorse,n=r.BETTER,i=r.WORSE;if(t==e&&e!=a)return i;if(a==e&&e!=t)return n;if(e<t){if(a<=e||a-e<t-e)return n;if(t-e<a-e)return i}else{if(e<a)return i;if(e-a<e-t)return n;if(e-t<e-a)return i}return r.EQUAL},shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_=function(e,t,a){var r=shaka.util.PeriodCombiner.BetterOrWorse,n=r.BETTER,i=r.WORSE;return t=Math.abs(e-t),(e=Math.abs(e-a))<t?n:t<e?i:r.EQUAL},shaka.util.PeriodCombiner.BetterOrWorse={BETTER:1,EQUAL:0,WORSE:-1},shaka.dash.DashParser=function(){var e=this;this.playerInterface_=this.config_=null,this.manifestUris_=[],this.manifest_=this.video_=null,this.globalId_=1,this.segmentIndexMap_={},this.periodDurations_={},this.periodCombiner_=new shaka.util.PeriodCombiner,this.updatePeriod_=0,this.averageUpdateDuration_=new shaka.abr.Ewma(5),this.updateTimer_=new shaka.util.Timer(function(){e.onUpdate_()}),this.operationManager_=new shaka.util.OperationManager,this.minTotalAvailabilityTimeOffset_=1/0,this.lowLatencyMode_=!1},shaka.dash.DashParser.prototype.configure=function(e){goog.asserts.assert(null!=e.dash,"DashManifestConfiguration should not be null!"),this.config_=e},shaka.dash.DashParser.prototype.start=function(t,a){var r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return n.setVideoElement(null),goog.asserts.assert(n.config_,"Must call configure() before start()!"),n.lowLatencyMode_=a.isLowLatencyMode(),n.manifestUris_=[t].concat(n.config_.backupManifests),n.playerInterface_=a,e.yield(n.requestManifest_(),2);if(r=e.yieldResult,n.playerInterface_&&n.setUpdateTimer_(r),n.playerInterface_)return goog.asserts.assert(n.manifest_,"Manifest should be non-null!"),e.return(n.manifest_);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)})},shaka.dash.DashParser.prototype.stop=function(){for(var e=$jscomp.makeIterator(Object.values(this.segmentIndexMap_)),t=e.next();!t.done;t=e.next())t.value.release();return this.periodCombiner_&&this.periodCombiner_.release(),this.config_=this.playerInterface_=null,this.manifestUris_=[],this.manifest_=null,this.segmentIndexMap_={},(this.periodCombiner_=null)!=this.updateTimer_&&(this.updateTimer_.stop(),this.updateTimer_=null),this.operationManager_.destroy()},shaka.dash.DashParser.prototype.update=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),e.yield(a.requestManifest_(),4)):2!=e.nextAddress?e.leaveTryBlock(0):(t=e.enterCatchBlock(),a.playerInterface_&&t?(goog.asserts.assert(t instanceof shaka.util.Error,"Bad error type"),a.playerInterface_.onError(t),void e.jumpToEnd()):e.return())})},shaka.dash.DashParser.prototype.changeManifestURL=function(e,t){var a=this.manifestUris_.indexOf(e);-1!==a&&this.manifestUris_.splice(a,1),this.manifestUris_.unshift(e),a=new shaka.util.FakeEvent(shaka.Player.EventName.ManifestChanged,{detail:{contentType:"main",requestType:"manifest",failingUrl:t,newUrl:e}}),this.playerInterface_.onEvent(a),this.onUpdate_()},shaka.dash.DashParser.prototype.onExpirationUpdated=function(e,t){},shaka.dash.DashParser.prototype.requestManifest_=function(){var t,a,r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(r=shaka.net.NetworkingEngine.RequestType.MANIFEST,n=shaka.net.NetworkingEngine.makeRequest(l.manifestUris_,l.config_.retryParameters),t=n.uris[0],i=l.playerInterface_.networkingEngine,a=Date.now(),i=i.request(r,n),l.operationManager_.manage(i),e.yield(i.promise,2)):3!=e.nextAddress?(r=e.yieldResult,n=r.originalUri,t.includes(n)||(-1!==(i=l.manifestUris_.indexOf(n))&&l.manifestUris_.splice(i,1),l.manifestUris_.unshift(n),o=shaka.Player.EventName.ManifestChanged,o=new shaka.util.FakeEvent(o,{detail:{contentType:"main",requestType:"manifest",failingUrl:t,newUrl:n}}),l.playerInterface_.onEvent(o)),l.playerInterface_?(r.uri&&!l.manifestUris_.includes(r.uri)&&l.manifestUris_.unshift(r.uri),e.yield(l.parseManifest_(r.data,r.uri),3)):e.return(0)):(o=Date.now(),s=(o-a)/1e3,l.averageUpdateDuration_.sample(1,s),e.return(s))})},shaka.dash.DashParser.prototype.parseManifest_=function(t,a){var r,n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return o=e.yieldResult,e.return(s.processManifest_(o,a));if(o=shaka.util.Error,i=shaka.dash.MpdUtils,r=shaka.util.XmlUtils.parseXml(t,"MPD"))return s.config_.dash.disableXlinkProcessing?e.return(s.processManifest_(r,a)):(n=s.config_.dash.xlinkFailGracefully,i=i.processXlinks(r,s.config_.retryParameters,n,a,s.playerInterface_.networkingEngine),s.operationManager_.manage(i),e.yield(i.promise,2));throw new o(o.Severity.CRITICAL,o.Category.MANIFEST,o.Code.DASH_INVALID_XML,a)})},shaka.dash.DashParser.prototype.processManifest_=function(t,a){var r,n,i,o,s,l,u,c,d,h,p,f,m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(c=shaka.util.Functional,d=shaka.util.XmlUtils,r=[a],0<(c=d.findChildren(t,"Location").map(d.getContents).filter(c.isNotNull)).length&&(c=shaka.util.ManifestParserUtils.resolveUris(r,c),r=m.manifestUris_=c),c=d.findChildren(t,"BaseURL"),f=c.map(d.getContents),r=shaka.util.ManifestParserUtils.resolveUris(r,f),f=0,c&&c.length&&(f=d.parseAttr(c[0],"availabilityTimeOffset",d.parseFloat)||0),c=m.config_.dash.ignoreMinBufferTime,n=0,c||(n=d.parseAttr(t,"minBufferTime",d.parseDuration)||0),m.updatePeriod_=d.parseAttr(t,"minimumUpdatePeriod",d.parseDuration,-1),c=d.parseAttr(t,"availabilityStartTime",d.parseDate),i=d.parseAttr(t,"timeShiftBufferDepth",d.parseDuration),h=m.config_.dash.ignoreSuggestedPresentationDelay,p=null,h||(p=d.parseAttr(t,"suggestedPresentationDelay",d.parseDuration)),h=m.config_.dash.ignoreMaxSegmentDuration,o=null,h||(o=d.parseAttr(t,"maxSegmentDuration",d.parseDuration)),h=t.getAttribute("type")||"static",m.manifest_)for(s=m.manifest_.presentationTimeline,l=$jscomp.makeIterator(Object.values(m.segmentIndexMap_)),u=l.next();!u.done;u=l.next())u.value.evict(s.getSegmentAvailabilityStart());else d=m.config_.defaultPresentationDelay||1.5*n,p=null!=p?p:d,s=new shaka.media.PresentationTimeline(c,p,m.config_.dash.autoCorrectDrift);return d=t.getAttribute("profiles")||"",c={dynamic:"static"!=h,presentationTimeline:s,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1,availabilityTimeOffset:f,profiles:d.split(",")},p=m.parsePeriods_(c,r,t),f=p.duration,d=p.periods,s.setStatic("static"==h),"static"!=h&&p.durationDerivedFromPeriods||s.setDuration(f||1/0),m.minTotalAvailabilityTimeOffset_&&!m.lowLatencyMode_&&m.playerInterface_.isAutoLowLatencyMode()&&(m.playerInterface_.enableLowLatencyMode(),m.lowLatencyMode_=m.playerInterface_.isLowLatencyMode()),m.lowLatencyMode_?s.setAvailabilityTimeOffset(m.minTotalAvailabilityTimeOffset_):m.minTotalAvailabilityTimeOffset_&&shaka.log.alwaysWarn("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),null==(i=s.isLive()&&!isNaN(m.config_.availabilityWindowOverride)?m.config_.availabilityWindowOverride:i)&&(i=1/0),s.setSegmentAvailabilityDuration(i),s.notifyMaxSegmentDuration(o||1),goog.DEBUG&&s.assertIsValid(),e.yield(m.periodCombiner_.combinePeriods(d,c.dynamic),2);case 2:if(m.manifest_)m.manifest_.variants=m.periodCombiner_.getVariants(),m.manifest_.textStreams=m.periodCombiner_.getTextStreams(),m.manifest_.imageStreams=m.periodCombiner_.getImageStreams(),m.playerInterface_.filter(m.manifest_);else if(m.manifest_={presentationTimeline:s,variants:m.periodCombiner_.getVariants(),textStreams:m.periodCombiner_.getTextStreams(),imageStreams:m.periodCombiner_.getImageStreams(),offlineSessionIds:[],minBufferTime:n||0},s.usingPresentationStartTime())return h=shaka.util.XmlUtils,p=h.findChildren(t,"UTCTiming"),e.yield(m.parseUtcTiming_(r,p),5);e.jumpTo(3);break;case 5:if(f=e.yieldResult,!m.playerInterface_)return e.return();s.setClockOffset(f);case 3:m.playerInterface_.makeTextStreamsForClosedCaptions(m.manifest_),e.jumpToEnd()}})},shaka.dash.DashParser.prototype.parsePeriods_=function(e,t,a){var r=shaka.util.XmlUtils,n=r.parseAttr(a,"mediaPresentationDuration",r.parseDuration),i=[],o=0;a=r.findChildren(a,"Period");for(var s=(a=$jscomp.makeIterator(shaka.util.Iterables.enumerate(a))).next();!s.done;s=a.next()){var l,s=(c=s.value).i,u=c.item,c=c.next,o=r.parseAttr(u,"start",r.parseDuration,o),d=r.parseAttr(u,"duration",r.parseDuration),h=null;if(c?null!=(l=r.parseAttr(c,"start",r.parseDuration))&&(h=l-o):null!=n&&(h=n-o),l=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS,h&&d&&Math.abs(h-d)>l&&shaka.log.warning("There is a gap/overlap between Periods",u),null==h&&(h=d),u=this.parsePeriod_(e,t,{start:o,duration:h,node:u,isLastPeriod:null==h||!c}),i.push(u),e.period.id&&h&&(this.periodDurations_[e.period.id]=h),null==h){c&&shaka.log.warning("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",c),o=null;break}o+=h}return null!=n?(o!=n&&shaka.log.warning("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:i,duration:n,durationDerivedFromPeriods:!1}):{periods:i,duration:o,durationDerivedFromPeriods:!0}},shaka.dash.DashParser.prototype.parsePeriod_=function(t,e,a){var r=this,n=shaka.util.Functional,i=shaka.util.XmlUtils,o=shaka.util.ManifestParserUtils.ContentType;t.period=this.createFrame_(a.node,null,e),t.periodInfo=a,t.period.availabilityTimeOffset=t.availabilityTimeOffset,t.period.id||(shaka.log.info("No Period ID given for Period with start time "+a.start+",  Assigning a default"),t.period.id="__shaka_period_"+a.start),e=i.findChildren(a.node,"EventStream");for(var s=(e=$jscomp.makeIterator(e)).next();!s.done;s=e.next())this.parseEventStream_(a.start,a.duration,s.value);if(n=i.findChildren(a.node,"AdaptationSet").map(function(e){return r.parseAdaptationSet_(t,e)}).filter(n.isNotNull),t.dynamic){for(a=[],e=(i=$jscomp.makeIterator(n)).next();!e.done;e=i.next())for(s=(e=$jscomp.makeIterator(e.value.representationIds)).next();!s.done;s=e.next())a.push(s.value);if(i=new Set(a),a.length!=i.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_DUPLICATE_REPRESENTATION_ID)}for(a=n.filter(function(e){return!e.trickModeFor}),n=n.filter(function(e){return e.trickModeFor}),i=(n=$jscomp.makeIterator(n)).next();!i.done;i=n.next()){e=(i=i.value).trickModeFor.split(" ");for(var l=(s=$jscomp.makeIterator(a)).next();!l.done;l=s.next()){var u=l.value;if(e.includes(u.id))for(var l={},c=(u=$jscomp.makeIterator(u.streams)).next();!c.done;l={$jscomp$loop$prop$stream$643:l.$jscomp$loop$prop$stream$643},c=u.next())l.$jscomp$loop$prop$stream$643=c.value,l.$jscomp$loop$prop$stream$643.trickModeVideo=i.streams.find(function(t){return function(e){return shaka.util.MimeUtils.getCodecBase(t.$jscomp$loop$prop$stream$643.codecs)==shaka.util.MimeUtils.getCodecBase(e.codecs)}}(l))}}if(i=this.config_.disableAudio?[]:this.getSetsOfType_(a,o.AUDIO),e=this.config_.disableVideo?[]:this.getSetsOfType_(a,o.VIDEO),n=this.config_.disableText?[]:this.getSetsOfType_(a,o.TEXT),a=this.config_.disableThumbnails?[]:this.getSetsOfType_(a,o.IMAGE),!e.length&&!i.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_PERIOD);for(o=[],s=(i=$jscomp.makeIterator(i)).next();!s.done;s=i.next())o.push.apply(o,$jscomp.arrayFromIterable(s.value.streams));for(i=[],s=(e=$jscomp.makeIterator(e)).next();!s.done;s=e.next())i.push.apply(i,$jscomp.arrayFromIterable(s.value.streams));for(e=[],s=(n=$jscomp.makeIterator(n)).next();!s.done;s=n.next())e.push.apply(e,$jscomp.arrayFromIterable(s.value.streams));for(n=[],s=(a=$jscomp.makeIterator(a)).next();!s.done;s=a.next())n.push.apply(n,$jscomp.arrayFromIterable(s.value.streams));return{id:t.period.id,audioStreams:o,videoStreams:i,textStreams:e,imageStreams:n}},shaka.dash.DashParser.prototype.getSetsOfType_=function(e,t){return e.filter(function(e){return e.contentType==t})},shaka.dash.DashParser.prototype.parseAdaptationSet_=function(t,e){var a=this,r=shaka.util.XmlUtils,n=shaka.util.Functional,i=(b=shaka.util.ManifestParserUtils).ContentType,o=shaka.dash.ContentProtection,s=(t.adaptationSet=this.createFrame_(e,t.period,null),!1),l=r.findChildren(e,"Role"),u=l.map(function(e){return e.getAttribute("value")}).filter(n.isNotNull),c=void 0;(n=t.adaptationSet.contentType==i.TEXT)&&(c=b.TextStreamKind.SUBTITLE);for(var d=(l=$jscomp.makeIterator(l)).next();!d.done;d=l.next()){var h=(d=d.value).getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(d=d.getAttribute("value"),d){case"main":s=!0;break;case"caption":case"subtitle":c=d}}h=r.findChildren(e,"EssentialProperty"),l=null,d=!1;for(var p=(h=$jscomp.makeIterator(h)).next();!p.done;p=h.next()){var f=p.value;"http://dashif.org/guidelines/trickmode"==f.getAttribute("schemeIdUri")?l=f.getAttribute("value"):d=!0}f=r.findChildren(e,"Accessibility"),h=shaka.util.LanguageUtils;var m=new Map;for(p=(f=$jscomp.makeIterator(f)).next();!p.done;p=f.next()){p=(g=p.value).getAttribute("schemeIdUri");if(g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==p)if(p=1,null!=g)for(var g=g.split(";"),y=$jscomp.makeIterator(g),v=y.next();!v.done;v=y.next()){var _=v.value,k=v=void 0,k=_.includes("=")?(v=(_=_.split("="))[0].startsWith("CC")?_[0]:"CC"+_[0],_[1]):(v="CC"+p,2==g.length?p+=2:p++,_);m.set(v,h.normalize(k))}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==p)if(p=1,null!=g)for(v=(g=$jscomp.makeIterator(g.split(";"))).next();!v.done;v=g.next())_=y=void 0,_=(v=v.value).includes("=")?(y="svc"+(v=v.split("="))[0],v[1].split(",")[0].split(":").pop()):(y="svc"+p,p++,v),m.set(y,h.normalize(_));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==p&&null!=g&&(u.push(g),"captions"==g)&&(c=b.TextStreamKind.CLOSED_CAPTION)}if(d)return null;var b=r.findChildren(e,"ContentProtection"),S=o.parseFromAdaptationSet(b,this.config_.dash.ignoreDrmInfo,this.config_.dash.keySystemsByURI),E=shaka.util.LanguageUtils.normalize(e.getAttribute("lang")||"und"),T=e.getAttribute("label");if((o=r.findChildren(e,"Label"))&&o.length&&(o=o[0]).textContent&&(T=o.textContent),0==(r=(o=r.findChildren(e,"Representation")).map(function(e){return a.parseRepresentation_(t,S,c,E,T,s,u,m,e)}).filter(function(e){return!!e})).length){if(l=t.adaptationSet.contentType==i.IMAGE,this.config_.dash.ignoreEmptyAdaptationSet||n||l)return null;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_ADAPTATION_SET)}if(!t.adaptationSet.contentType||t.adaptationSet.contentType==i.APPLICATION)for(t.adaptationSet.contentType=shaka.dash.DashParser.guessContentType_(r[0].mimeType,r[0].codecs),n=(i=$jscomp.makeIterator(r)).next();!n.done;n=i.next())n.value.type=t.adaptationSet.contentType;for(n=(i=$jscomp.makeIterator(r)).next();!n.done;n=i.next())for(n=n.value,d=(b=$jscomp.makeIterator(S.drmInfos)).next();!d.done;d=b.next())(d=d.value).keyIds=d.keyIds&&n.keyIds?new Set([].concat($jscomp.arrayFromIterable(d.keyIds),$jscomp.arrayFromIterable(n.keyIds))):d.keyIds||n.keyIds;return i=o.map(function(e){return e.getAttribute("id")}).filter(shaka.util.Functional.isNotNull),{id:t.adaptationSet.id||"__fake__"+this.globalId_++,contentType:t.adaptationSet.contentType,language:E,main:s,streams:r,drmInfos:S.drmInfos,trickModeFor:l,representationIds:i}},shaka.dash.DashParser.prototype.parseRepresentation_=function(e,t,a,r,n,i,o,s,l){var u=this,c=shaka.util.XmlUtils,d=shaka.util.ManifestParserUtils.ContentType;if(e.representation=this.createFrame_(l,e.adaptationSet,null),this.minTotalAvailabilityTimeOffset_=Math.min(this.minTotalAvailabilityTimeOffset_,e.representation.availabilityTimeOffset),!this.verifyRepresentation_(e.representation))return shaka.log.warning("Skipping Representation",e.representation),null;var h=e.periodInfo.start;e.bandwidth=c.parseAttr(l,"bandwidth",c.parsePositiveInt)||0;var p=(y=e.representation.contentType)==d.TEXT||y==d.APPLICATION,d=y==d.IMAGE;try{var f,m,g,y=function(e,t,a){return u.requestInitSegment_(e,t,a)};g=e.representation.segmentBase?shaka.dash.SegmentBase.createStreamInfo(e,y):e.representation.segmentList?shaka.dash.SegmentList.createStreamInfo(e,this.segmentIndexMap_):e.representation.segmentTemplate?shaka.dash.SegmentTemplate.createStreamInfo(e,y,this.segmentIndexMap_,!!this.manifest_,this.config_.dash.initialSegmentLimit,this.periodDurations_):(goog.asserts.assert(p,"Must have Segment* with non-text streams."),f=e.representation.baseUris,m=e.periodInfo.duration||0,{generateSegmentIndex:function(){return Promise.resolve(shaka.media.SegmentIndex.forSingleSegment(h,m,f))}})}catch(e){if((p||d)&&e.code==shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)return null;throw e}y=c.findChildren(l,"ContentProtection"),y=shaka.dash.ContentProtection.parseFromRepresentation(y,t,this.config_.dash.ignoreDrmInfo,this.config_.dash.keySystemsByURI),y=new Set(y?[y]:[]);var v,_,k=!1,b=(c.findChildren(l,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")})&&(e.representation.mimeType="audio/eac3-joc",k=!0),!1);if(p&&(b=o.includes("forced_subtitle")),d&&!(v=(l=c.findChildren(l,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))}))?l.getAttribute("value"):v))return null;l=e.representation.codecs,e.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(_="PQ");var S={id:this.globalId_++,originalId:e.representation.id,createSegmentIndex:function(){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return S.segmentIndex?e.jumpTo(0):(t=S,e.yield(g.generateSegmentIndex(),3));t.segmentIndex=e.yieldResult,e.jumpToEnd()})},segmentIndex:null,mimeType:e.representation.mimeType,codecs:e.representation.codecs,frameRate:e.representation.frameRate,pixelAspectRatio:e.representation.pixelAspectRatio,bandwidth:e.bandwidth,width:e.representation.width,height:e.representation.height,kind:a,encrypted:0<t.drmInfos.length,drmInfos:t.drmInfos,keyIds:y,language:r,label:n,type:e.adaptationSet.contentType,primary:i,trickModeVideo:null,emsgSchemeIdUris:e.representation.emsgSchemeIdUris,roles:o,forced:b,channelsCount:e.representation.numChannels,audioSamplingRate:e.representation.audioSamplingRate,spatialAudio:k,closedCaptions:s,hdr:_,tilesLayout:v};return S},shaka.dash.DashParser.prototype.onUpdate_=function(){var t,a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return goog.asserts.assert(0<=r.updatePeriod_,"There should be an update period"),shaka.log.info("Updating manifest..."),t=0,e.setCatchFinallyBlocks(2),e.yield(r.requestManifest_(),4);case 4:t=e.yieldResult,e.leaveTryBlock(3);break;case 2:a=e.enterCatchBlock(),goog.asserts.assert(a instanceof shaka.util.Error,"Should only receive a Shaka error"),r.playerInterface_&&(a.severity=shaka.util.Error.Severity.RECOVERABLE,r.playerInterface_.onError(a));case 3:if(!r.playerInterface_)return e.return();r.setUpdateTimer_(t),e.jumpToEnd()}})},shaka.dash.DashParser.prototype.setUpdateTimer_=function(e){this.updatePeriod_<0||(e=Math.max(shaka.dash.DashParser.MIN_UPDATE_PERIOD_,this.updatePeriod_-e,this.averageUpdateDuration_.getEstimate()),this.updateTimer_.tickAfter(e))},shaka.dash.DashParser.prototype.createFrame_=function(e,t,a){goog.asserts.assert(t||a,"Must provide either parent or baseUris");var r=shaka.util.ManifestParserUtils,n=shaka.util.XmlUtils,i=(t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,numChannels:null,audioSamplingRate:null,availabilityTimeOffset:0},a=a||t.baseUris,n.parseNonNegativeInt),o=n.evalDivision,s=(_=n.findChildren(e,"BaseURL")).map(n.getContents),l=e.getAttribute("contentType")||t.contentType,u=e.getAttribute("mimeType")||t.mimeType,c=e.getAttribute("codecs")||t.codecs,o=n.parseAttr(e,"frameRate",o)||t.frameRate,d=e.getAttribute("sar")||t.pixelAspectRatio,h=this.emsgSchemeIdUris_(n.findChildren(e,"InbandEventStream"),t.emsgSchemeIdUris),p=n.findChildren(e,"AudioChannelConfiguration"),p=this.parseAudioChannels_(p)||t.numChannels,f=n.parseAttr(e,"audioSamplingRate",i)||t.audioSamplingRate,l=l||shaka.dash.DashParser.guessContentType_(u,c),m=n.findChild(e,"SegmentBase"),g=n.findChild(e,"SegmentTemplate"),y=m&&n.parseAttr(m,"availabilityTimeOffset",n.parseFloat)||0,v=g&&n.parseAttr(g,"availabilityTimeOffset",n.parseFloat)||0,_=_&&_.length&&n.parseAttr(_[0],"availabilityTimeOffset",n.parseFloat)||0;return _=t.availabilityTimeOffset+_+y+v,{baseUris:r.resolveUris(a,s),segmentBase:m||t.segmentBase,segmentList:n.findChild(e,"SegmentList")||t.segmentList,segmentTemplate:g||t.segmentTemplate,width:n.parseAttr(e,"width",i)||t.width,height:n.parseAttr(e,"height",i)||t.height,contentType:l,mimeType:u,codecs:c,frameRate:o,pixelAspectRatio:d,emsgSchemeIdUris:h,id:e.getAttribute("id"),numChannels:p,audioSamplingRate:f,availabilityTimeOffset:_}},shaka.dash.DashParser.prototype.emsgSchemeIdUris_=function(e,t){for(var a=t.slice(),r=$jscomp.makeIterator(e),n=r.next();!n.done;n=r.next())n=n.value.getAttribute("schemeIdUri"),a.includes(n)||a.push(n);return a},shaka.dash.DashParser.prototype.parseAudioChannels_=function(e){for(var t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){var a=t.value;if((t=a.getAttribute("schemeIdUri"))&&(a=a.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return a.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(a,10);if(r)return r;shaka.log.warning("Channel parsing failure! Ignoring scheme and value",t,a);continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(a,16))){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",t,a);continue}for(e=0;r;)1&r&&++e,r>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":var r=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],n=parseInt(a,10);if(!n){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",t,a);continue}if(0<n&&n<r.length)return r[n];continue;default:shaka.log.warning("Unrecognized audio channel scheme:",t,a)}}return null},shaka.dash.DashParser.prototype.verifyRepresentation_=function(e){var t=shaka.util.ManifestParserUtils.ContentType,a=e.segmentBase?1:0;return 0==(a=(a+=e.segmentList?1:0)+(e.segmentTemplate?1:0))?e.contentType==t.TEXT||e.contentType==t.APPLICATION||(shaka.log.warning("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=a&&(shaka.log.warning("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.segmentBase?(shaka.log.info("Using SegmentBase by default."),e.segmentList=null):(goog.asserts.assert(e.segmentList,"There should be a SegmentList"),shaka.log.info("Using SegmentList by default.")),e.segmentTemplate=null),!0)},shaka.dash.DashParser.prototype.requestForTiming_=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return n=shaka.util.ManifestParserUtils.resolveUris(t,[a]),(n=shaka.net.NetworkingEngine.makeRequest(n,s.config_.retryParameters)).method=r,o=shaka.net.NetworkingEngine.RequestType.TIMING,o=s.playerInterface_.networkingEngine.request(o,n),s.operationManager_.manage(o),e.yield(o.promise,2);if(n=e.yieldResult,"HEAD"==r){if(!n.headers||!n.headers.date)return shaka.log.warning("UTC timing response is missing","expected date header"),e.return(0);i=n.headers.date}else i=shaka.util.StringUtils.fromUTF8(n.data);return o=Date.parse(i),isNaN(o)?(shaka.log.warning("Unable to parse date from UTC timing response"),e.return(0)):e.return(o-Date.now())})},shaka.dash.DashParser.prototype.parseUtcTiming_=function(t,a){var r,n,i,o,s,l,u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:n=a.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),r=u.config_.dash.clockSyncUri,!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),r=$jscomp.makeIterator(n),n=r.next();case 2:if(n.done)e.jumpTo(4);else{switch(l=n.value,e.setCatchFinallyBlocks(5),i=l.scheme,o=l.value,i){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return e.jumpTo(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return e.jumpTo(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return s=Date.parse(o),e.return(isNaN(s)?0:s-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":shaka.log.alwaysWarn("NTP UTCTiming scheme is not supported");break;default:shaka.log.alwaysWarn("Unrecognized scheme in UTCTiming element",i)}e.jumpTo(9)}break;case 7:return e.yield(u.requestForTiming_(t,o,"HEAD"),10);case 10:return e.return(e.yieldResult);case 8:return e.yield(u.requestForTiming_(t,o,"GET"),11);case 11:return e.return(e.yieldResult);case 9:e.leaveTryBlock(3);break;case 5:l=e.enterCatchBlock(),shaka.log.warning("Error fetching time from UTCTiming elem",l.message);case 3:n=r.next(),e.jumpTo(2);break;case 4:return shaka.log.alwaysWarn("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),e.return(0)}})},shaka.dash.DashParser.prototype.parseEventStream_=function(e,t,a){for(var r=shaka.util.XmlUtils,n=r.parseNonNegativeInt,i=a.getAttribute("schemeIdUri")||"",o=a.getAttribute("value")||"",s=r.parseAttr(a,"timescale",n)||1,l=(a=$jscomp.makeIterator(r.findChildren(a,"Event"))).next();!l.done;l=a.next()){var l=l.value,u=r.parseAttr(l,"presentationTime",n)||0,c=(u=u/s+e)+(c=r.parseAttr(l,"duration",n)||0)/s;null!=t&&(u=Math.min(u,e+t),c=Math.min(c,e+t)),l={schemeIdUri:i,value:o,startTime:u,endTime:c,id:l.getAttribute("id")||"",eventElement:l},this.playerInterface_.onTimelineRegionAdded(l)}},shaka.dash.DashParser.prototype.requestInitSegment_=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.net.NetworkingEngine.RequestType.SEGMENT,n=shaka.util.Networking.createSegmentRequest(t,a,r,s.config_.retryParameters),i=s.playerInterface_.networkingEngine,i=i.request(o,n),s.operationManager_.manage(i),e.yield(i.promise,2)):(o=e.yieldResult,e.return(o.data))})},shaka.dash.DashParser.prototype.setVideoElement=function(e){this.video_=e},shaka.dash.DashParser.prototype.getvideoElement=function(){return this.video_},shaka.dash.DashParser.guessContentType_=function(e,t){t=shaka.util.MimeUtils.getFullType(e,t);return shaka.text.TextEngine.isTypeSupported(t)?shaka.util.ManifestParserUtils.ContentType.TEXT:e.split("/")[0]},goog.exportSymbol("shaka.dash.DashParser",shaka.dash.DashParser),shaka.dash.DashParser.MIN_UPDATE_PERIOD_=3,shaka.media.ManifestParser.registerParserByExtension("mpd",function(){return new shaka.dash.DashParser}),shaka.media.ManifestParser.registerParserByMime("application/dash+xml",function(){return new shaka.dash.DashParser}),shaka.media.ManifestParser.registerParserByMime("video/vnd.mpeg.dash.mpd",function(){return new shaka.dash.DashParser}),shaka.hls={},shaka.hls.Playlist=function(e,t,a,r){this.absoluteUri=e,this.type=t,this.tags=a,this.segments=r||null},shaka.hls.PlaylistType={MASTER:0,MEDIA:1},shaka.hls.Tag=function(e,t,a,r){this.id=e,this.name=t,this.attributes=a,this.value=void 0===r?null:r},shaka.hls.Tag.prototype.toString=function(){var e=function(e){var t=isNaN(Number(e.value))?'"'+e.value+'"':e.value;return e.name+"="+t},t="#"+this.name,e=this.attributes?this.attributes.map(e):[];return this.value&&e.unshift(this.value),0<e.length&&(t+=":"+e.join(",")),t},shaka.hls.Tag.prototype.addAttribute=function(e){this.attributes.push(e)},shaka.hls.Tag.prototype.getAttribute=function(t){var e=this.attributes.filter(function(e){return e.name==t});return goog.asserts.assert(e.length<2,"A tag should not have multiple attributes with the same name!"),e.length?e[0]:null},shaka.hls.Tag.prototype.getAttributeValue=function(e,t){e=this.getAttribute(e);return e?e.value:t||null},shaka.hls.Tag.prototype.getRequiredAttrValue=function(e){var t=this.getAttribute(e);if(t)return t.value;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_ATTRIBUTE_MISSING,e)},shaka.hls.Tag.prototype.setName=function(e){this.name=e},shaka.hls.Segment=function(e,t,a){a=void 0===a?[]:a,this.tags=t,this.absoluteUri=e,this.partialSegments=a},shaka.hls.Attribute=function(e,t){this.name=e,this.value=t},shaka.hls.Utils=function(){},shaka.hls.Utils.filterTagsByName=function(e,t){return e.filter(function(e){return e.name==t})},shaka.hls.Utils.filterTagsByType=function(e,t){return e.filter(function(e){return e.getRequiredAttrValue("TYPE")==t})},shaka.hls.Utils.getFirstTagWithName=function(e,t){e=shaka.hls.Utils.filterTagsByName(e,t);return e.length?e[0]:null},shaka.hls.Utils.getFirstTagWithNameAsNumber=function(e,t,a){return a=void 0===a?0:a,(e=shaka.hls.Utils.getFirstTagWithName(e,t))?Number(e.value):a},shaka.hls.Utils.constructAbsoluteUri=function(e,t){return shaka.util.ManifestParserUtils.resolveUris([e],[t])[0]},shaka.hls.Utils.isComment=function(e){return/^#(?!EXT)/m.test(e)},shaka.util.TextParser=function(e){this.data_=e,this.position_=0},shaka.util.TextParser.prototype.atEnd=function(){return this.position_==this.data_.length},shaka.util.TextParser.prototype.readLine=function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)},shaka.util.TextParser.prototype.readWord=function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)},shaka.util.TextParser.prototype.skipWhitespace=function(){this.readRegex(/[ \t]+/gm)},shaka.util.TextParser.prototype.readRegex=function(e){return e=this.indexOf_(e),this.atEnd()||null==e||e.position!=this.position_?null:(this.position_+=e.length,e.results)},shaka.util.TextParser.prototype.readRegexReturnCapture_=function(e,t){return!this.atEnd()&&(e=this.readRegex(e))?e[t]:null},shaka.util.TextParser.prototype.indexOf_=function(e){return goog.asserts.assert(e.global,"global flag should be set"),e.lastIndex=this.position_,null==(e=e.exec(this.data_))?null:{position:e.index,length:e[0].length,results:e}},shaka.hls.ManifestTextParser=function(){this.globalId_=0,this.variantLines=new Map,this.parsedTags=new Map,this.parsedSegments=new Map},shaka.hls.ManifestTextParser.prototype.parsePlaylist=function(e,t){var a=shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS,r=shaka.hls.ManifestTextParser.SEGMENT_TAGS,n=shaka.util.StringUtils.fromUTF8(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_PLAYLIST_HEADER_MISSING);this.variantLines.has(t)||this.variantLines.set(t,{}),n=shaka.hls.PlaylistType.MASTER;for(var o=!0,s=0;s<i.length-1;){if(!shaka.hls.Utils.isComment(i[s])&&!o||i[s].includes("EXTINF")){if(i[s].includes("EXTINF")&&(o=!1,this.variantLines.get(t).firstLine||this.variantLines.set(t,{firstLine:i[s+1]}),n===shaka.hls.PlaylistType.MEDIA))break;var l=this.parseTag_(i[s]);if(--this.globalId_,a.includes(l.name))n=shaka.hls.PlaylistType.MEDIA;else if("EXT-X-STREAM-INF"==l.name||"EXT-X-I-FRAME-STREAM-INF"==l.name){o=!0;break}}else o=!1;s++}if(this.variantLines.get(t).lastLine)if(this.variantLines.get(t).firstLine&&this.variantLines.get(t).firstLine===i[s+1]){for(o=!(a=[]),s=void 0,l=i.length-1;0<=l&&(!(s=this.parsedSegments.has(t)?this.parsedSegments.get(t)[this.parsedSegments.get(t).length-1].absoluteUri:s)||!s.includes(i[l]));l--)shaka.hls.Utils.isComment(i[l])||(a.unshift(i[l]),!o&&i[l].includes("EXTINF")&&(o=!0));i=1<a.length&&o?(this.variantLines.get(t).lastLine=a[a.length-1],a):[]}else this.parsedSegments.set(t,[]),this.parsedTags.set(t,[]);else for(a=i.length-1;0<=a;a--)if(!shaka.hls.Utils.isComment(i[a])){this.variantLines.get(t).lastLine=i[a];break}if(a=[],o=!(o=[]),0===i.length&&this.parsedSegments.has(t))return o=this.parsedSegments.get(t),a=this.parsedTags.get(t),new shaka.hls.Playlist(t,shaka.hls.PlaylistType.MEDIA,a,o);for(var s={},u=(l=$jscomp.makeIterator(shaka.util.Iterables.enumerate(i))).next();!u.done;s={$jscomp$loop$prop$line$645:s.$jscomp$loop$prop$line$645},u=l.next()){var c=u.value,u=c.i;if(s.$jscomp$loop$prop$line$645=c.item,c=c.next,shaka.hls.Utils.isComment(s.$jscomp$loop$prop$line$645)||o||s.$jscomp$loop$prop$line$645.includes("EXTM3U"))o=!1;else{if(!o&&0<r.filter(function(t){return function(e){return t.$jscomp$loop$prop$line$645.includes(e)}}(s)).length){if(n!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);return r=(r=[].concat($jscomp.arrayFromIterable(i))).splice(u,r.length-u),this.parsedTags.has(t)?0<a.length&&this.parsedTags.set(t,this.parsedTags.get(t).concat(a)):this.parsedTags.set(t,a),o=this.parseSegments_(t,r,this.parsedTags.get(t)),this.parsedSegments.has(t)&&(o=this.parsedSegments.get(t).concat(o)),this.parsedSegments.set(t,o),new shaka.hls.Playlist(t,n,this.parsedTags.get(t),o)}u=this.parseTag_(s.$jscomp$loop$prop$line$645),a.push(u),"EXT-X-STREAM-INF"==u.name&&(o=new shaka.hls.Attribute("URI",c),u.addAttribute(o),o=!0)}}return this.parsedTags.set(t,a),new shaka.hls.Playlist(t,n,a)},shaka.hls.ManifestTextParser.prototype.parseSegments_=function(e,t,a){for(var r=[],n=[],i=[],o=null,s=(t=$jscomp.makeIterator(t)).next();!s.done;s=t.next())s=s.value,/^(#EXT)/.test(s)?(s=this.parseTag_(s),shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS.includes(s.name)?a.push(s):"EXT-X-MAP"==s.name?o=this.variantLines.get(e).mapTag=s:"EXT-X-PART"==s.name?i.push(s):"EXT-X-PRELOAD-HINT"==s.name?"PART"==s.getAttributeValue("TYPE")?i.push(s):"MAP"==s.getAttributeValue("TYPE")&&(s.setName("EXT-X-MAP"),o=this.variantLines.get(e).mapTag=s):n.push(s)):shaka.hls.Utils.isComment(s)||(s=s.trim(),s=shaka.hls.Utils.constructAbsoluteUri(e,s),o?n.push(o):this.variantLines.get(e).mapTag&&n.push(this.variantLines.get(e).mapTag),n=new shaka.hls.Segment(s,n,i),r.push(n),n=[],i=[]);return i.length&&(o?n.push(o):this.variantLines.get(e).mapTag&&n.push(this.variantLines.get(e).mapTag),e=new shaka.hls.Segment("",n,i),r.push(e)),r},shaka.hls.ManifestTextParser.prototype.parseTag_=function(e){return shaka.hls.ManifestTextParser.parseTag(this.globalId_++,e)},shaka.hls.ManifestTextParser.parseTag=function(e,t){if(!(n=t.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INVALID_HLS_TAG,t);var a,t=n[1],r=n[2],n=[];if(r){var i,o=(r=new shaka.util.TextParser(r)).readRegex(/^([^,=]+)(?:,|$)/g);for(o&&(a=o[1]),o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=r.readRegex(o);)i=new shaka.hls.Attribute(i[1],i[2]||i[3]),n.push(i)}return new shaka.hls.Tag(e,t,n,a)},shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),shaka.hls.ManifestTextParser.SEGMENT_TAGS="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" "),shaka.net.DataUriPlugin=function(){},shaka.net.DataUriPlugin.parse=function(e,t,a,r){try{var n=shaka.net.DataUriPlugin.parseRaw(e);return shaka.util.AbortableOperation.completed({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType}})}catch(e){return shaka.util.AbortableOperation.failed(e)}},shaka.net.DataUriPlugin.parseRaw=function(e){var t=e.split(":");if(t.length<2||"data"!=t[0])throw shaka.log.error("Bad data URI, failed to parse scheme"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_DATA_URI,e);if((t=t.slice(1).join(":").split(",")).length<2)throw shaka.log.error("Bad data URI, failed to extract encoding and MIME type"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_DATA_URI,e);var a=t[0],r=(e=window.decodeURIComponent(t.slice(1).join(",")),a=(t=a.split(";"))[0],!1);return 1<t.length&&"base64"==t[t.length-1]&&(r=!0,t.pop()),{data:r?shaka.util.Uint8ArrayUtils.fromBase64(e):shaka.util.StringUtils.toUTF8(e),contentType:a}},goog.exportSymbol("shaka.net.DataUriPlugin",shaka.net.DataUriPlugin),goog.exportProperty(shaka.net.DataUriPlugin,"parse",shaka.net.DataUriPlugin.parse),shaka.net.NetworkingEngine.registerScheme("data",shaka.net.DataUriPlugin.parse);var RANGE_OF_SEGMENTS=30,EmeEncryptionSchemePolyfill=(shaka.hls.HlsParser=function(){var e=this;this.config_=this.playerInterface_=null,this.globalId_=1,this.video_=null,this.globalVariables_=new Map,this.groupIdToStreamInfosMap_=new Map,this.variantUriSet_=new Set,this.uriToStreamInfosMap_=new Map,this.presentationTimeline_=null,this.masterPlaylistUri_="",this.manifestTextParser_=new shaka.hls.ManifestTextParser,this.updatePlaylistDelay_=0,this.updatePlaylistTimer_=new shaka.util.Timer(function(){e.onUpdate_()}),this.presentationType_=shaka.hls.HlsParser.PresentationType_.VOD,this.manifest_=null,this.maxTargetDuration_=0,this.minTargetDuration_=1/0,this.lowLatencyPresentationDelay_=this.partialTargetDuration_=0,this.operationManager_=new shaka.util.OperationManager,this.segmentsToNotifyByStream_=[],this.groupIdToClosedCaptionsMap_=new Map,this.aesEncrypted_=!1,this.groupIdToCodecsMap_=new Map,this.playlistStartTime_=new Map,this.oldSegments_=new Map,this.mapTagToInitSegmentRefMap_=new Map,this.discontinuityToTso_=new Map,this.lowLatencyMode_=!1,this.firstTime_=this.optimizeLive_=!0},shaka.hls.HlsParser.prototype.configure=function(e){this.config_=e},shaka.hls.HlsParser.prototype.start=function(t,a){var r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(n.config_,"Must call configure() before start()!"),n.playerInterface_=a,n.lowLatencyMode_=a.isLowLatencyMode(),e.yield(n.requestManifest_(t),2)):3!=e.nextAddress?(r=e.yieldResult,n.masterPlaylistUri_=r.uri,goog.asserts.assert(r.data,"Response data should be non-null!"),e.yield(n.parseManifest_(r.data),3)):(0<(r=n.updatePlaylistDelay_)&&n.updatePlaylistTimer_.tickAfter(r),goog.asserts.assert(n.manifest_,"Manifest should be non-null"),e.return(n.manifest_))})},shaka.hls.HlsParser.prototype.stop=function(){this.updatePlaylistTimer_&&(this.updatePlaylistTimer_.stop(),this.updatePlaylistTimer_=null);var e=[];return this.operationManager_&&(e.push(this.operationManager_.destroy()),this.operationManager_=null),this.config_=this.playerInterface_=null,this.variantUriSet_.clear(),this.manifest_=null,this.uriToStreamInfosMap_.clear(),this.groupIdToStreamInfosMap_.clear(),this.groupIdToCodecsMap_.clear(),this.globalVariables_.clear(),Promise.all(e)},shaka.hls.HlsParser.prototype.update=function(){var t,a,r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return n.isLive_()?(t=[],n.playlistStartTime_=new Map,(a=Array.from(n.uriToStreamInfosMap_.values())).length?e.yield(n.updateStream_(a[0]),2):e.jumpTo(2)):e.return();for(r=1;r<a.length;r++)t.push(n.updateStream_(a[r]));return e.yield(Promise.all(t),0)})},shaka.hls.HlsParser.prototype.changeManifestURL=function(e,t){shaka.log.warning("changeManifestURL method is not support for HLS streams yet.")},shaka.hls.HlsParser.prototype.updateStream_=function(t){var a,r,n,i,o,s,l,u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=shaka.hls.HlsParser.PresentationType_,n=t.absoluteMediaPlaylistUri,n=new goog.Uri(n),u.lowLatencyMode_&&t.canSkipSegments&&n.setQueryData(new goog.Uri.QueryData("_HLS_skip=YES")),u.firstTime_&&u.video_&&u.optimizeLive_&&u.isLive_&&(u.firstTime_=!1,(r=u).video_.addEventListener("seeked",function(){r.update()})),e.yield(u.requestManifest_(n.toString()),2);if(3!=e.nextAddress){if(n=e.yieldResult,(i=u.manifestTextParser_.parsePlaylist(n.data,n.uri)).type!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);return s=shaka.hls.Utils.filterTagsByName(i.tags,"EXT-X-DEFINE"),s=u.parseMediaVariables_(s),o=t.stream,e.yield(u.createSegments_(t.verbatimMediaPlaylistUri,i,o.type,o.mimeType,t.mediaSequenceToStartTime,s,t.discontinuityToMediaSequence,o.codecs,o.bandwidth,o.clearKey),3)}s=e.yieldResult,o.segmentIndex.mergeAndEvict(s,u.presentationTimeline_.getSegmentAvailabilityStart()),s.length&&(l=shaka.hls.Utils.getFirstTagWithNameAsNumber(i.tags,"EXT-X-MEDIA-SEQUENCE",0),l=t.mediaSequenceToStartTime.get(l),o.segmentIndex.evict(l)),l=s[s.length-1],goog.asserts.assert(l,"Should have segments!"),shaka.hls.Utils.getFirstTagWithName(i.tags,"EXT-X-ENDLIST")&&(u.setPresentationType_(a.VOD),u.presentationTimeline_.setDuration(l.endTime)),e.jumpToEnd()})},shaka.hls.HlsParser.prototype.onExpirationUpdated=function(e,t){},shaka.hls.HlsParser.prototype.parseManifest_=function(t){var a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(y=shaka.hls.Utils,goog.asserts.assert(b.masterPlaylistUri_,"Master playlist URI must be set before calling parseManifest_!"),(d=b.manifestTextParser_.parsePlaylist(t,b.masterPlaylistUri_)).type!=shaka.hls.PlaylistType.MASTER)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_MASTER_PLAYLIST_NOT_PROVIDED);for(a=y.filterTagsByName(d.tags,"EXT-X-DEFINE"),b.parseMasterVariables_(a),a=y.filterTagsByName(d.tags,"EXT-X-MEDIA"),r=y.filterTagsByName(d.tags,"EXT-X-STREAM-INF"),b.parseCodecs_(r),y=y.filterTagsByName(d.tags,"EXT-X-SESSION-DATA"),n=$jscomp.makeIterator(y),i=n.next();!i.done;i=n.next())s=i.value,l=s.getAttributeValue("DATA-ID"),u=s.getAttributeValue("URI"),o=s.getAttributeValue("LANGUAGE"),s=s.getAttributeValue("VALUE"),l={id:l},u&&(l.uri=shaka.hls.Utils.constructAbsoluteUri(b.masterPlaylistUri_,u)),o&&(l.language=o),s&&(l.value=s),u=new shaka.util.FakeEvent("sessiondata",l),b.playerInterface_&&b.playerInterface_.onEvent(u);return e.yield(b.createStreamInfosFromMediaTags_(a),2);case 2:return b.parseClosedCaptions_(a),e.yield(b.createVariantsForTags_(r),3);case 3:return c=e.yieldResult,e.yield(b.parseTexts_(a),4);case 4:if(d=e.yieldResult,!b.playerInterface_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);if(b.aesEncrypted_&&0==c.length)throw shaka.log.info("No stream is created, because we don't support AES-128","encryption yet"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_ENCRYPTION_NOT_SUPPORTED);for(p=h=1/0,f=$jscomp.makeIterator(b.uriToStreamInfosMap_.values()),m=f.next();!m.done;m=f.next())g=m.value,h=Math.min(h,g.minTimestamp),"text"!=g.stream.type&&(p=Math.min(p,g.maxTimestamp-g.minTimestamp));if(goog.asserts.assert(null==b.presentationTimeline_,"Presentation timeline created early!"),b.createPresentationTimeline_(),goog.asserts.assert(b.presentationTimeline_,"Presentation timeline not created!"),b.isLive_())b.updatePlaylistDelay_=b.minTargetDuration_,y=shaka.hls.HlsParser.PresentationType_,b.presentationType_==y.LIVE&&(v=b.presentationTimeline_.getDelay(),isNaN(b.config_.availabilityWindowOverride)||(v=b.config_.availabilityWindowOverride),b.presentationTimeline_.setSegmentAvailabilityDuration(v));else for(b.presentationTimeline_.setDuration(p),b.presentationTimeline_.offset(-h),_=$jscomp.makeIterator(b.uriToStreamInfosMap_.values()),m=_.next();!m.done;m=_.next())(k=m.value).stream.segmentIndex.offset(-h),k.stream.segmentIndex.fit(0,p);b.manifest_={presentationTimeline:b.presentationTimeline_,variants:c,textStreams:d,imageStreams:[],offlineSessionIds:[],minBufferTime:0},b.playerInterface_.makeTextStreamsForClosedCaptions(b.manifest_),e.jumpToEnd()}})},shaka.hls.HlsParser.prototype.parseMasterVariables_=function(e){for(var t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){var t=(a=t.value).getAttributeValue("NAME"),a=a.getAttributeValue("VALUE");t&&a&&(this.globalVariables_.has(t)||this.globalVariables_.set(t,a))}},shaka.hls.HlsParser.prototype.parseMediaVariables_=function(e){for(var t=new Map,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){var a=(n=a.value).getAttributeValue("NAME"),r=n.getAttributeValue("VALUE"),n=n.getAttributeValue("IMPORT");a&&r&&t.set(a,r),n&&(a=this.globalVariables_.get(n))&&t.set(n,a)}return t},shaka.hls.HlsParser.prototype.parseCodecs_=function(e){for(var t=shaka.util.ManifestParserUtils.ContentType,a=(e=$jscomp.makeIterator(e)).next();!a.done;a=e.next()){var r,n=(o=a.value).getAttributeValue("AUDIO"),a=o.getAttributeValue("VIDEO"),i=o.getAttributeValue("SUBTITLES"),o=this.getCodecsForVariantTag_(o);i&&(r=shaka.util.ManifestParserUtils.guessCodecsSafe(t.TEXT,o),goog.asserts.assert(null!=r,"Text codecs should be valid."),this.groupIdToCodecsMap_.set(i,r),shaka.util.ArrayUtils.remove(o,r)),n&&(i=shaka.util.ManifestParserUtils.guessCodecs(t.AUDIO,o),this.groupIdToCodecsMap_.set(n,i)),a&&(n=shaka.util.ManifestParserUtils.guessCodecs(t.VIDEO,o),this.groupIdToCodecsMap_.set(a,n))}},shaka.hls.HlsParser.prototype.setVideoElement=function(e){this.video_=e},shaka.hls.HlsParser.prototype.parseTexts_=function(t){var a,r,n,i,o,s,l,u,c,d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=shaka.hls.Utils.filterTagsByType(t,"SUBTITLES"),r=a.map(function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d.config_.disableText?e.return(null):(e.setCatchFinallyBlocks(2),e.yield(d.createStreamInfoFromMediaTag_(t),4));if(2!=e.nextAddress)return a=e.yieldResult,goog.asserts.assert(a,"Should always have a streamInfo for text"),e.return(a.stream);if(a=e.enterCatchBlock(),d.config_&&d.config_.hls.ignoreTextStreamFailures)return e.return(null);throw a})}),e.yield(Promise.all(r),2);for(r=e.yieldResult,n=$jscomp.makeIterator(a),i=n.next();!i.done;i=n.next())if(o=i.value,o=o.getRequiredAttrValue("GROUP-ID"),(s=d.groupIdToCodecsMap_.get(o))&&(l=d.groupIdToStreamInfosMap_.get(o)))for(u=$jscomp.makeIterator(l),c=u.next();!c.done;c=u.next())c.value.stream.codecs=s;return e.return(r.filter(function(e){return e}))})},shaka.hls.HlsParser.prototype.createStreamInfosFromMediaTags_=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=t.filter(function(e){var t=e.getAttributeValue("URI")||"";return"SUBTITLES"!=e.getAttributeValue("TYPE")&&""!=t})).length?e.yield(r.createStreamInfoFromMediaTag_(t[0]),2):e.jumpTo(2):(a=t.slice(1).map(function(e){return r.createStreamInfoFromMediaTag_(e)}),e.yield(Promise.all(a),0))})},shaka.hls.HlsParser.prototype.createVariantsForTags_=function(t){var a,r,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=t.map(function(t){var a,r,n,i,o,s;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=t.getAttributeValue("FRAME-RATE"),r=Number(t.getAttributeValue("AVERAGE-BANDWIDTH"))||Number(t.getRequiredAttrValue("BANDWIDTH")),s=t.getAttributeValue("RESOLUTION"),i=$jscomp.makeIterator(s?s.split("x"):[null,null]),n=i.next().value,i=i.next().value,o=t.getAttributeValue("VIDEO-RANGE"),e.yield(l.createStreamInfosForVariantTag_(t,s,a),2)):(s=e.yieldResult)?(goog.asserts.assert(s.audio.length||s.video.length,"We should have created a stream!"),e.return(l.createVariants_(s.audio,s.video,r,n,i,a,o))):e.return([])})}),e.yield(Promise.all(a),2)):(a=e.yieldResult,r=(r=a.reduce(shaka.util.Functional.collapseArrays,[])).filter(function(e){return null!=e}),e.return(r))})},shaka.hls.HlsParser.prototype.createStreamInfosForVariantTag_=function(t,e,a){var r,n,i,o,s,l,u,c,d,h,p,f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return r=shaka.util.ManifestParserUtils.ContentType,n=f.getCodecsForVariantTag_(t),o=t.getAttributeValue("AUDIO"),l=t.getAttributeValue("VIDEO"),goog.asserts.assert(null==o||null==l,"Unexpected: both video and audio described by media tags!"),i=(i=o||l)&&f.groupIdToStreamInfosMap_.has(i)?f.groupIdToStreamInfosMap_.get(i):[],o={audio:o?i:[],video:l?i:[]},shaka.log.debug("Guessing stream type for",t.toString()),l=!1,u=t.getRequiredAttrValue("URI"),c=o.audio.find(function(e){return e&&e.verbatimMediaPlaylistUri==u}),d=shaka.util.ManifestParserUtils.guessCodecsSafe(r.VIDEO,n),(h=shaka.util.ManifestParserUtils.guessCodecsSafe(r.AUDIO,n))&&!d?(s=r.AUDIO,shaka.log.debug("Guessing audio-only.")):!i.length&&h&&d?(shaka.log.debug("Guessing multiplexed audio+video."),s=r.VIDEO,n=[[d,h].join()]):o.audio.length&&c?(shaka.log.debug("Guessing audio-only."),s=r.AUDIO,l=!0):s=o.video.length?(shaka.log.debug("Guessing audio-only."),r.AUDIO):(shaka.log.debug("Guessing video-only."),r.VIDEO),l?e.jumpTo(2):e.yield(f.createStreamInfoFromVariantTag_(t,n,s),3);if(p=2!=e.nextAddress?e.yieldResult:p)o[p.stream.type]=[p];else if(null===p)return shaka.log.debug("streamInfo is null"),e.return(null);return f.filterLegacyCodecs_(o),e.return(o)})},shaka.hls.HlsParser.prototype.getCodecsForVariantTag_=function(e){var t=[],a=(this.config_.disableVideo||t.push("avc1.42E01E"),this.config_.disableAudio||t.push("mp4a.40.2"),t=t.join(","),e.getAttributeValue("CODECS",t).split(/\s*,\s*/));e=new Set;for(var t=[],r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next()){var r=r.value,n=shaka.util.MimeUtils.getCodecBase(r);e.has(n)?shaka.log.debug("Ignoring duplicate codec"):(t.push(r),e.add(n))}return t},shaka.hls.HlsParser.prototype.getChannelsCount_=function(e){return(e=e.getAttributeValue("CHANNELS"))?(e=e.split("/")[0],parseInt(e,10)):null},shaka.hls.HlsParser.prototype.isSpatialAudio_=function(e){return!!(e=e.getAttributeValue("CHANNELS"))&&e.includes("/JOC")},shaka.hls.HlsParser.prototype.getClosedCaptions_=function(e,t){var a=shaka.util.ManifestParserUtils.ContentType,e=e.getAttributeValue("CLOSED-CAPTIONS");return t==a.VIDEO&&e&&"NONE"!=e?this.groupIdToClosedCaptionsMap_.get(e):null},shaka.hls.HlsParser.prototype.getLanguage_=function(e){var t=shaka.util.LanguageUtils;return e=e.getAttributeValue("LANGUAGE")||"und",t.normalize(e)},shaka.hls.HlsParser.prototype.getType_=function(e){return e="subtitles"==(e=e.getRequiredAttrValue("TYPE").toLowerCase())?shaka.util.ManifestParserUtils.ContentType.TEXT:e},shaka.hls.HlsParser.prototype.filterLegacyCodecs_=function(e){for(var t,a=(e=$jscomp.makeIterator(e.audio.concat(e.video))).next();!a.done;a=e.next())(a=a.value)&&(t=(t=a.stream.codecs.split(",")).filter(function(e){return"mp4a.40.34"!=e}),a.stream.codecs=t.join(","))},shaka.hls.HlsParser.prototype.createVariants_=function(e,t,a,r,n,i,o){for(var s=shaka.util.ManifestParserUtils.ContentType,l=shaka.media.DrmEngine,u=$jscomp.makeIterator(t),c=u.next();!c.done;c=u.next())this.addVideoAttributes_(c.value.stream,r,n,i,o);for(r=this.config_.disableAudio,e.length&&!r||(e=[null]),r=this.config_.disableVideo,t.length&&!r||(t=[null]),r=[],n=(e=$jscomp.makeIterator(e)).next();!n.done;n=e.next())for(n=n.value,o=(i=$jscomp.makeIterator(t)).next();!o.done;o=i.next()){var d=o.value,h=(o=n?n.stream:null,u=d?d.stream:null,c=n?n.stream.drmInfos:null,d?d.stream.drmInfos:null),d=(d?d.verbatimMediaPlaylistUri:"")+" - "+(n?n.verbatimMediaPlaylistUri:"");o&&u&&!l.areDrmCompatible(c,h)?shaka.log.warning("Incompatible DRM info in HLS variant.  Skipping."):this.variantUriSet_.has(d)?shaka.log.debug("Skipping variant which only differs in text streams."):(goog.asserts.assert(!o||o.type==s.AUDIO,"Audio parameter mismatch!"),goog.asserts.assert(!u||u.type==s.VIDEO,"Video parameter mismatch!"),o={id:this.globalId_++,language:o?o.language:"und",primary:!!o&&o.primary||!!u&&u.primary,audio:o,video:u,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(o),this.variantUriSet_.add(d))}return r},shaka.hls.HlsParser.prototype.parseClosedCaptions_=function(e){e=shaka.hls.Utils.filterTagsByType(e,"CLOSED-CAPTIONS");for(var t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){var a=t.value,r=(goog.asserts.assert("EXT-X-MEDIA"==a.name,"Should only be called on media tags!"),t=this.getLanguage_(a),a.getRequiredAttrValue("GROUP-ID")),a=a.getRequiredAttrValue("INSTREAM-ID");this.groupIdToClosedCaptionsMap_.get(r)||this.groupIdToClosedCaptionsMap_.set(r,new Map),this.groupIdToClosedCaptionsMap_.get(r).set(a,t)}},shaka.hls.HlsParser.prototype.createStreamInfoFromMediaTag_=function(t){var a,r,n,i,o,s,l,u,c,d,h,p=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert("EXT-X-MEDIA"==t.name,"Should only be called on media tags!"),a=t.getRequiredAttrValue("GROUP-ID"),h="",(r=p.getType_(t))!=shaka.util.ManifestParserUtils.ContentType.TEXT&&a&&p.groupIdToCodecsMap_.has(a)&&(h=p.groupIdToCodecsMap_.get(a)),n=p.variableSubstitution_(t.getRequiredAttrValue("URI"),p.globalVariables_),p.uriToStreamInfosMap_.has(n)?e.return(p.uriToStreamInfosMap_.get(n)):(i=p.getLanguage_(t),o=t.getAttributeValue("NAME"),s=t.getAttribute("DEFAULT"),s="YES"==s,l="audio"==r?p.getChannelsCount_(t):null,u="audio"==r&&p.isSpatialAudio_(t),c=t.getAttributeValue("CHARACTERISTICS"),d=t.getAttributeValue("FORCED"),d="YES"==d,e.yield(p.createStreamInfo_(n,h,r,i,s,o,l,null,c,d,u),2))):(h=e.yieldResult,p.groupIdToStreamInfosMap_.has(a)?p.groupIdToStreamInfosMap_.get(a).push(h):p.groupIdToStreamInfosMap_.set(a,[h]),null==h?e.return(null):p.uriToStreamInfosMap_.has(n)?e.return(p.uriToStreamInfosMap_.get(n)):(p.uriToStreamInfosMap_.set(n,h),e.return(h)))})},shaka.hls.HlsParser.prototype.createStreamInfoFromVariantTag_=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert("EXT-X-STREAM-INF"==t.name,"Should only be called on variant tags!"),n=s.variableSubstitution_(t.getRequiredAttrValue("URI"),s.globalVariables_),s.uriToStreamInfosMap_.has(n)?e.return(s.uriToStreamInfosMap_.get(n)):(i=s.getClosedCaptions_(t,r),o=shaka.util.ManifestParserUtils.guessCodecs(r,a),e.yield(s.createStreamInfo_(n,o,r,"und",!1,null,null,i,null,!1,!1),2))):null==(o=e.yieldResult)?e.return(null):s.uriToStreamInfosMap_.has(n)?e.return(s.uriToStreamInfosMap_.get(n)):(s.uriToStreamInfosMap_.set(n,o),e.return(o))})},shaka.hls.HlsParser.prototype.createStreamInfo_=function(t,a,r,U,B,n,F,j,i,V,$,G){var o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,H,b,S,E,T,x,A,P,C,w,M,W,z,I,R,D,K,N,L,O=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return o=shaka.hls.Utils.constructAbsoluteUri(O.masterPlaylistUri_,t),e.yield(O.requestManifest_(o),2);case 2:if(s=e.yieldResult,o=s.uri,(s=O.manifestTextParser_.parsePlaylist(s.data,o)).type!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);if(l=[],s.segments)for(u=$jscomp.makeIterator(s.segments),c=u.next();!c.done;c=u.next())d=c.value,d=shaka.hls.Utils.filterTagsByName(d.tags,"EXT-X-KEY"),l.length<2&&l.push.apply(l,$jscomp.arrayFromIterable(d));h=!1,f=[],m=new Set,g=$jscomp.makeIterator(l),y=g.next();case 3:if(y.done){if(!h||f.length||p)return x=shaka.hls.Utils.filterTagsByName(s.tags,"EXT-X-DEFINE"),x=O.parseMediaVariables_(x),goog.asserts.assert(null!=s.segments,"Media playlist should have segments!"),O.determinePresentationType_(s),e.yield(O.guessMimeType_(r,a,s,x),9);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_KEYFORMATS_NOT_SUPPORTED)}if(E=y.value,"AES-128"!=(v=E.getRequiredAttrValue("METHOD"))){if("NONE"!=v)if(h=!0,S=E.getRequiredAttrValue("KEYFORMAT"),b=(b=shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_[S])?b(E):null){if(b.keyIds)for(_=$jscomp.makeIterator(b.keyIds),k=_.next();!k.done;k=_.next())H=k.value,m.add(H);f.push(b)}else shaka.log.warning("Unsupported HLS KEYFORMAT",S);e.jumpTo(4);break}if(h=!0,O.aesEncrypted_=!0,!window.crypto||!window.crypto.subtle)throw shaka.log.alwaysWarn("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.NO_WEB_CRYPTO_API);if(S=void(b=0),T=E.getAttributeValue("IV","")){if(16!=(S=shaka.util.Uint8ArrayUtils.fromHex(T.substr(2))).byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_INVALID_KEY_OR_IV_LENGTH,"IV")}else b=shaka.hls.Utils.getFirstTagWithNameAsNumber(s.tags,"EXT-X-MEDIA-SEQUENCE",0);return T=shaka.hls.Utils.constructAbsoluteUri(O.masterPlaylistUri_,E.getRequiredAttrValue("URI")),e.yield(O.requestManifest_(T),7);case 7:if((E=e.yieldResult).data&&16==E.data.byteLength)return e.yield(window.crypto.subtle.importKey("raw",E.data,"AES-CBC",!0,["decrypt"]),8);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_INVALID_KEY_OR_IV_LENGTH,"KEY");case 8:T=e.yieldResult,p={method:v,cryptoKey:T,iv:S,firstMediaSequenceNumber:b};case 4:y=g.next(),e.jumpTo(3);break;case 9:return A=e.yieldResult,shaka.hls.HlsParser.RAW_FORMATS_.includes(A)&&(a=""),P=new Map,C=new Map,e.setCatchFinallyBlocks(10),e.yield(O.createSegments_(t,s,r,A,P,x,C,a,G,p),12);case 12:w=e.yieldResult,e.leaveTryBlock(11);break;case 10:if((M=e.enterCatchBlock()).code==shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM)return shaka.log.alwaysWarn("Skipping unsupported HLS stream",A,t),e.return(null);throw M;case 11:if(M=w[0].startTime,W=w[w.length-1].endTime,L=new shaka.media.SegmentIndex(w),z=r==shaka.util.ManifestParserUtils.ContentType.TEXT?shaka.util.ManifestParserUtils.TextStreamKind.SUBTITLE:void 0,I=[],i)for(R=$jscomp.makeIterator(i.split(",")),D=R.next();!D.done;D=R.next())K=D.value,I.push(K);return N=!!(N=shaka.hls.Utils.getFirstTagWithName(s.tags,"EXT-X-SERVER-CONTROL"))&&null!=N.getAttribute("CAN-SKIP-UNTIL"),L={id:O.globalId_++,originalId:n,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:L,mimeType:A,codecs:a,kind:z,encrypted:h,drmInfos:f,keyIds:m,clearKey:p,language:U,label:n,type:r,primary:B,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:I,forced:V,channelsCount:F,audioSamplingRate:null,spatialAudio:$,closedCaptions:j,hdr:void 0,tilesLayout:void 0},e.return({stream:L,verbatimMediaPlaylistUri:t,absoluteMediaPlaylistUri:o,minTimestamp:M,maxTimestamp:W,mediaSequenceToStartTime:P,discontinuityToMediaSequence:C,canSkipSegments:N})}})},shaka.hls.HlsParser.prototype.determinePresentationType_=function(e){var t=shaka.hls.HlsParser.PresentationType_,a=shaka.hls.Utils.getFirstTagWithName(e.tags,"EXT-X-PLAYLIST-TYPE"),r=shaka.hls.Utils.getFirstTagWithName(e.tags,"EXT-X-ENDLIST"),r=a&&"VOD"==a.value||r,a=a&&"EVENT"==a.value&&!r;a=!r&&!a,r?this.setPresentationType_(t.VOD):(a?this.setPresentationType_(t.LIVE):this.setPresentationType_(t.EVENT),t=this.getRequiredTag_(e.tags,"EXT-X-TARGETDURATION"),t=Number(t.value),r=shaka.hls.Utils.getFirstTagWithName(e.tags,"EXT-X-PART-INF"),this.lowLatencyMode_&&r?(this.partialTargetDuration_=Number(r.getRequiredAttrValue("PART-TARGET")),this.minTargetDuration_=Math.min(this.partialTargetDuration_,this.minTargetDuration_),this.lowLatencyPresentationDelay_=(e=shaka.hls.Utils.getFirstTagWithName(e.tags,"EXT-X-SERVER-CONTROL"))?Number(e.getRequiredAttrValue("PART-HOLD-BACK")):0):this.minTargetDuration_=Math.min(t,this.minTargetDuration_),this.maxTargetDuration_=Math.max(t,this.maxTargetDuration_))},shaka.hls.HlsParser.prototype.createPresentationTimeline_=function(){this.isLive_()?(this.presentationTimeline_=new shaka.media.PresentationTimeline(0,this.config_.defaultPresentationDelay||this.lowLatencyPresentationDelay_||3*this.maxTargetDuration_),this.presentationTimeline_.setStatic(!1)):(this.presentationTimeline_=new shaka.media.PresentationTimeline(null,0),this.presentationTimeline_.setStatic(!0)),this.notifySegments_(),goog.asserts.assert(!this.presentationTimeline_.usingPresentationStartTime(),"We should not be using the presentation start time in HLS!")},shaka.hls.HlsParser.prototype.getInitSegmentReference_=function(e,t,a){var r;return(t=shaka.hls.Utils.getFirstTagWithName(t,"EXT-X-MAP"))?(r=t.getRequiredAttrValue("URI"),e=[a=this.variableSubstitution_(shaka.hls.Utils.constructAbsoluteUri(e,r),a),t.getAttributeValue("BYTERANGE","")].join("-"),this.mapTagToInitSegmentRefMap_.has(e)||(t=this.createInitSegmentReference_(a,t),this.mapTagToInitSegmentRefMap_.set(e,t)),this.mapTagToInitSegmentRefMap_.get(e)):null},shaka.hls.HlsParser.prototype.createInitSegmentReference_=function(e,t){var a=0,r=null,t=t.getAttributeValue("BYTERANGE");return t&&(a=t.split("@"),r=Number(a[0]),r=(a=Number(a[1]))+r-1),new shaka.media.InitSegmentReference(function(){return[e]},a,r)},shaka.hls.HlsParser.prototype.createSegmentReference_=function(e,t,a,r,n,i,o,s){s=void 0===s?0:s;var l=a.tags,u=this.variableSubstitution_(a.absoluteUri,i),c=shaka.hls.Utils.getFirstTagWithName(l,"EXTINF"),d=0,h=(i=0,null),p=[];if(this.lowLatencyMode_&&a.partialSegments.length)for(var d={},f=(a=$jscomp.makeIterator(shaka.util.Iterables.enumerate(a.partialSegments))).next();!f.done;d={$jscomp$loop$prop$pAbsoluteUri$647:d.$jscomp$loop$prop$pAbsoluteUri$647},f=a.next()){var m=(f=f.value).i,g=(f=f.item,0==m?t:p[p.length-1]),y=(m=0==m?r:g.endTime)+Number(f.getAttributeValue("DURATION")),v=0,_=null;"EXT-X-PRELOAD-HINT"==f.name?v=(g=f.getAttributeValue("BYTERANGE-START"))?Number(g):0:(v=f.getAttributeValue("BYTERANGE"),v=(g=$jscomp.makeIterator(this.parseByteRange_(g,v))).next().value,_=g.next().value),f=f.getAttributeValue("URI"),d.$jscomp$loop$prop$pAbsoluteUri$647=shaka.hls.Utils.constructAbsoluteUri(o,f),f=new shaka.media.SegmentReference(m,y,function(e){return function(){return[e.$jscomp$loop$prop$pAbsoluteUri$647]}}(d),v,_,e,n,0,1/0),p.push(f)}else if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,"EXTINF");return d=c?(o=c.value.split(","),r+Number(o[0])):p[p.length-1].endTime,(l=shaka.hls.Utils.getFirstTagWithName(l,"EXT-X-BYTERANGE"))?(i=(t=$jscomp.makeIterator(this.parseByteRange_(t,l.value))).next().value,h=t.next().value):p.length&&(i=p[0].startByte,h=p[p.length-1].endByte),new shaka.media.SegmentReference(r,d,function(){return u.length?[u]:[]},i,h,e,n,0,1/0,s,p)},shaka.hls.HlsParser.prototype.parseByteRange_=function(e,t){var a=0,r=null;return t&&(a=t.split("@"),r=Number(a[0]),r=(a=a[1]?Number(a[1]):(goog.asserts.assert(e,"Cannot refer back to previous HLS segment!"),e.endByte+1))+r-1),[a,r]},shaka.hls.HlsParser.prototype.notifySegments_=function(){if(this.presentationTimeline_){for(var e=$jscomp.makeIterator(this.segmentsToNotifyByStream_),t=e.next();!t.done;t=e.next())this.presentationTimeline_.notifySegments(t.value);this.segmentsToNotifyByStream_=[]}},shaka.hls.HlsParser.prototype.createSegments_=function(t,a,r,n,i,o,s,l,u,c){var d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(f=!1,d=[],0<a.segments.length&&!R.oldSegments_.has(a.absoluteUri)||!R.optimizeLive_)R.oldSegments_.set(a.absoluteUri,{lastLine:a.segments[a.segments.length-1].absoluteUri,firstLine:a.segments[0].absoluteUri,segments:a.segments}),d=a.segments;else{for(h=R.oldSegments_.get(a.absoluteUri).segments,p=a.segments.length-1;0<p;p--){if(a.segments[p].absoluteUri.includes(h[h.length-1].absoluteUri)){R.oldSegments_.get(a.absoluteUri).segments=R.oldSegments_.get(a.absoluteUri).segments.concat(d);break}d.unshift(a.segments[p])}for(;R.oldSegments_.get(a.absoluteUri).segments[0].absoluteUri!=a.segments[0].absoluteUri;)R.oldSegments_.get(a.absoluteUri).segments.shift(),R.optimizeLive_=!1;R.oldSegments_.get(a.absoluteUri).lastLine=a.segments[a.segments.length-1].absoluteUri,f=!0}if(!0===f&&0===d.length&&R.oldSegments_.get(a.absoluteUri).references)return e.return(R.oldSegments_.get(a.absoluteUri).references);if(goog.asserts.assert(d.length,"Playlist should have segments!"),v=R.oldSegments_.get(a.absoluteUri).mediaSequence&&R.optimizeLive_?(m=R.oldSegments_.get(a.absoluteUri).mediaSequence,y=R.oldSegments_.get(a.absoluteUri).skippedSeg,R.oldSegments_.get(a.absoluteUri).discontintuitySequence):(m=shaka.hls.Utils.getFirstTagWithNameAsNumber(a.tags,"EXT-X-MEDIA-SEQUENCE",0),y=g?Number(g.getAttributeValue("SKIPPED-SEGMENTS")):0,g=shaka.hls.Utils.getFirstTagWithName(a.tags,"EXT-X-SKIP"),shaka.hls.Utils.getFirstTagWithNameAsNumber(a.tags,"EXT-X-DISCONTINUITY-SEQUENCE")),_=m+y,R.isLive_()&&i.has(_)&&!f||R.isLive_()&&i.has(_)&&!R.optimizeLive_){k=i.get(_),e.jumpTo(2);break}if(R.isLive_()&&f&&R.optimizeLive_){k=R.oldSegments_.get(a.absoluteUri).firstStart,e.jumpTo(2);break}if(r==shaka.util.ManifestParserUtils.ContentType.TEXT){k=R.playlistStartTime_.values().next().value,e.jumpTo(2);break}if(R.playlistStartTime_.has(t)){e.jumpTo(5);break}return f=R.getInitSegmentReference_(a.absoluteUri,d[0].tags,o),goog.asserts.assert(r!=shaka.util.ManifestParserUtils.ContentType.TEXT,"Should only get start time from audio or video streams"),e.yield(R.getStartTime_(t,f,n,_,!1,d[0],o,r,l,u,c),6);case 6:b=e.yieldResult,R.playlistStartTime_.set(t,b);case 5:k=R.playlistStartTime_.get(t);case 2:if(b=d[0].absoluteUri,shaka.log.debug("First segment",b.split("/").pop(),"starts at",k),R.lowLatencyMode_&&(s.has(v)||s.set(v,_),y))for(;s.has(v+1)&&s.get(v+1)<_;)v++;S=R.discontinuityToTso_.get(v)||0,E=[],T=m,R.oldSegments_.has(a.absoluteUri)&&R.oldSegments_.get(a.absoluteUri).references&&R.optimizeLive_&&(E=R.oldSegments_.get(a.absoluteUri).references,T=R.oldSegments_.get(a.absoluteUri).segmentNumber),x=function(e){return shaka.util.Iterables.enumerate(e)},x=$jscomp.makeIterator(x(d)),A=x.next();case 7:if(A.done)e.jumpTo(9);else{if(P=A.value,M=P.i,P=P.item,C=E[E.length-1],w=0!=M||R.oldSegments_.has(a.absoluteUri)&&R.oldSegments_.get(a.absoluteUri).references&&R.optimizeLive_?C.endTime:k,_=m+y+M,i.set(_,w),f=R.getInitSegmentReference_(a.absoluteUri,P.tags,o),shaka.hls.Utils.getFirstTagWithName(P.tags,"EXT-X-DISCONTINUITY"))return v++,s.set(v,_),e.yield(R.getTimestampOffset_(v,t,f,n,_,P,o,w,r,l,u,c),11);e.jumpTo(10)}break;case 11:S=e.yieldResult;case 10:!R.lowLatencyMode_&&R.playerInterface_.isAutoLowLatencyMode()&&(R.playerInterface_.enableLowLatencyMode(),R.lowLatencyMode_=R.playerInterface_.isLowLatencyMode()),M=shaka.hls.Utils.getFirstTagWithName(P.tags,"EXTINF"),R.lowLatencyMode_||M?(I=R.createSegmentReference_(f,C,P,w,S,o,a.absoluteUri,T),E.push(I)):R.lowLatencyMode_||shaka.log.alwaysWarn("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),T++,A=x.next(),e.jumpTo(7);break;case 9:return R.oldSegments_.get(a.absoluteUri).mediaSequence=_-y,R.oldSegments_.get(a.absoluteUri).skippedSeg=y,R.oldSegments_.get(a.absoluteUri).discontintuitySequence=v,R.oldSegments_.get(a.absoluteUri).firstStart=E[E.length-1].endTime,R.oldSegments_.get(a.absoluteUri).segmentNumber=T,R.oldSegments_.get(a.absoluteUri).references=E,R.segmentsToNotifyByStream_.push(E),R.notifySegments_(),e.return(E)}})},shaka.hls.HlsParser.prototype.getTimestampOffset_=function(t,a,r,n,i,o,s,l,u,c,d,h){var p,f,m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(p=0,m.discontinuityToTso_.has(t)?(p=m.discontinuityToTso_.get(t),e.jumpTo(2)):e.yield(m.getStartTime_(a,r,n,i,!0,o,s,u,c,d,h),3)):(2!=e.nextAddress&&(f=e.yieldResult,p=l-f,shaka.log.v1("Segment timestampOffset =",p),m.discontinuityToTso_.set(t,p)),e.return(p))})},shaka.hls.HlsParser.prototype.fetchStartOfSegment_=function(t,a,r,n,i,o){var s,l,u,c,d,h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return(s=shaka.net.NetworkingEngine.RequestType.SEGMENT,l=shaka.util.Networking.createSegmentRequest(t.getUris(),t.startByte,t.endByte,h.config_.retryParameters),h.playerInterface_.modifySegmentRequest(l,{type:a,init:t instanceof shaka.media.InitSegmentReference,duration:t.endTime-t.startTime,mimeType:r,codecs:n,bandwidth:i}),h.config_.hls.useFullSegmentsForStartTime||o)?e.return(h.makeNetworkRequest_(l,s)):(u=shaka.util.Networking.createSegmentRequest(t.getUris(),t.startByte,t.startByte+shaka.hls.HlsParser.START_OF_SEGMENT_SIZE_-1,h.config_.retryParameters),h.playerInterface_.modifySegmentRequest(u,{type:a,init:t instanceof shaka.media.InitSegmentReference,duration:t.endTime-t.startTime,mimeType:r,codecs:n,bandwidth:i}),e.setCatchFinallyBlocks(2),e.yield(h.makeNetworkRequest_(u,s),4));case 4:return c=e.yieldResult,e.return(c);case 2:if((c=e.enterCatchBlock()).code==shaka.util.Error.Code.OPERATION_ABORTED)throw c;return shaka.log.alwaysWarn("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",u.uris[0]),e.yield(h.makeNetworkRequest_(l,s),5);case 5:return d=e.yieldResult,e.return(d)}})},shaka.hls.HlsParser.prototype.getStartTime_=function(t,a,r,n,i,o,s,l,u,c,d){var h,p,f,m,g,y,v,_,k,b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(h=b.createSegmentReference_(a,null,o,0,0,s,""),b.manifest_&&!i){if(p=b.uriToStreamInfosMap_.get(t),null!=(p=p.mediaSequenceToStartTime.get(n)))return shaka.log.v1("Found segment start time in previous manifest",p),e.return(p);shaka.log.debug("Unable to find segment start time in previous manifest!")}if(shaka.log.v1("Fetching segment to find start time"),r=r.toLowerCase(),shaka.hls.HlsParser.RAW_FORMATS_.includes(r))throw shaka.log.alwaysWarn("Raw formats are not yet supported.  Skipping "+r),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM);if("video/webm"==r)throw shaka.log.alwaysWarn("WebM in HLS is not yet supported.  Skipping."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM);if("video/mp4"!=r&&"audio/mp4"!=r){e.jumpTo(2);break}if(d)throw shaka.log.alwaysWarn("AES-128 in MP4 HLS is not yet supported.  Skipping "+r),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM);return p=[b.fetchStartOfSegment_(h,l,r,u,c,!!d)],a&&p.push(b.fetchStartOfSegment_(a,l,r,u,c,!!d)),e.yield(Promise.all(p),3);case 3:return m=e.yieldResult,f=m[0],m=m[1]||m[0],e.return(b.getStartTimeFromMp4Segment_(t,f.uri,f.data,m.data));case 2:if("video/mp2t"==r)return e.yield(b.fetchStartOfSegment_(h,l,r,u,c,!!d),5);e.jumpTo(4);break;case 5:if(g=e.yieldResult,goog.asserts.assert(g.data,"Should have a response body!"),!d){e.jumpTo(6);break}if(!(y=d.iv))for(y=shaka.util.BufferUtils.toUint8(new ArrayBuffer(16)),v=d.firstMediaSequenceNumber,_=y.byteLength-1;0<=_;_--)y[_]=255&v,v>>=8;return k=g,e.yield(window.crypto.subtle.decrypt({name:"AES-CBC",iv:y},d.cryptoKey,g.data),7);case 7:k.data=e.yieldResult;case 6:return e.return(b.getStartTimeFromTsSegment_(t,g.uri,g.data));case 4:throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,t)}})},shaka.hls.HlsParser.prototype.getStartTimeFromMp4Segment_=function(e,t,a,r){var n=shaka.util.Mp4Parser,i=0;if((new n).box("moov",n.children).box("trak",n.children).box("mdia",n.children).fullBox("mdhd",function(e){goog.asserts.assert(0==e.version||1==e.version,"MDHD version can only be 0 or 1"),i=shaka.util.Mp4BoxParsers.parseMDHD(e.reader,e.version).timescale,e.parser.stop()}).parse(r,!0),i){var o=0,s=!1;if((new n).box("moof",n.children).box("traf",n.children).fullBox("tfdt",function(e){goog.asserts.assert(0==e.version||1==e.version,"TFDT version can only be 0 or 1"),o=shaka.util.Mp4BoxParsers.parseTFDT(e.reader,e.version).baseMediaDecodeTime/i,s=!0,e.parser.stop()}).parse(a,!0),s)return o}else shaka.log.error("Unable to find timescale in init segment!");throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,e,t)},shaka.hls.HlsParser.prototype.getStartTimeFromTsSegment_=function(e,t,a){function r(){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,e,t)}var n=new shaka.util.DataViewReader(a,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),i=0,o=0;for(a=function(){n.seek(i+188),71!=(o=n.readUint8())&&(n.seek(i+192),o=n.readUint8()),71!=o&&(n.seek(i+204),o=n.readUint8()),71!=o&&r(),n.rewind(1)};;){i=n.getPosition(),71!=(o=n.readUint8())&&r();var s=n.readUint16();if(8191!=(8191&s)&&16384&s&&(0!=(s=(48&n.readUint8())>>4)&&2!=s||r(),3==s&&(s=n.readUint8(),n.skip(s)),1==n.readUint32()>>8))return n.skip(3),0!=(a=n.readUint8()>>6)&&1!=a||r(),0==(s=n.readUint8())&&r(),2==a?goog.asserts.assert(5==s,"Bad PES header?"):3==a&&goog.asserts.assert(10==s,"Bad PES header?"),(1073741824*((14&(a=n.readUint8()))>>1)+((65534&(s=n.readUint16()))<<14|(65534&n.readUint16())>>1))/shaka.hls.HlsParser.TS_TIMESCALE_;a()}},shaka.hls.HlsParser.prototype.variableSubstitution_=function(e,t){var a=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),r=a.match(/{\$\w*}/g);if(r)for(var n=(r=$jscomp.makeIterator(r)).next();!n.done;n=r.next()){var i=(n=n.value).slice(2,n.length-1),o=t.get(i);if(!o)throw shaka.log.error("A variable has been found that is not declared",i),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_VARIABLE_NOT_FOUND,i);a=a.replace(n,o)}return a},shaka.hls.HlsParser.prototype.guessMimeType_=function(t,a,r,n){var i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(o=shaka.hls.HlsParser,s=shaka.util.ManifestParserUtils.ContentType,i=shaka.net.NetworkingEngine.RequestType.SEGMENT,goog.asserts.assert(r.segments.length,"Playlist should have segments!"),l=c.variableSubstitution_(r.segments[0].absoluteUri,n),u=new goog.Uri(l),u=u.getPath().split(".").pop(),o=o.EXTENSION_MAP_BY_CONTENT_TYPE_[t],(u=o[u])?e.return(u):t==s.TEXT?a&&"vtt"!=a&&"wvtt"!=a?e.return("application/mp4"):e.return("text/vtt"):((u=shaka.net.NetworkingEngine.makeRequest([l],c.config_.retryParameters)).method="HEAD",e.yield(c.makeNetworkRequest_(u,i),2))):(s=e.yieldResult,(l=s.headers["content-type"])?e.return(l.split(";")[0]):(u=o.mp4,e.return(u)))})},shaka.hls.HlsParser.prototype.getRequiredTag_=function(e,t){e=shaka.hls.Utils.getFirstTagWithName(e,t);if(e)return e;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,t)},shaka.hls.HlsParser.prototype.addVideoAttributes_=function(e,t,a,r,n){e&&(e.width=Number(t)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(r)||void 0,e.hdr=n||void 0)},shaka.hls.HlsParser.prototype.requestManifest_=function(e){var t=shaka.net.NetworkingEngine.RequestType.MANIFEST;return e=shaka.net.NetworkingEngine.makeRequest([e],this.config_.retryParameters),this.playerInterface_.modifyManifestRequest(e,{format:shaka.util.CmcdManager.StreamingFormat.HLS}),this.makeNetworkRequest_(e,t)},shaka.hls.HlsParser.prototype.onUpdate_=function(){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(shaka.log.info("Updating manifest..."),goog.asserts.assert(0<a.updatePlaylistDelay_,"We should only call |onUpdate_| when we are suppose to be updating."),a.playerInterface_?(e.setCatchFinallyBlocks(2),e.yield(a.update(),4)):e.return()):2!=e.nextAddress?(t=a.updatePlaylistDelay_,a.updatePlaylistTimer_.tickAfter(t),e.leaveTryBlock(0)):(t=e.enterCatchBlock(),a.playerInterface_?(goog.asserts.assert(t instanceof shaka.util.Error,"Should only receive a Shaka error"),t.severity=shaka.util.Error.Severity.RECOVERABLE,a.playerInterface_.onError(t),a.updatePlaylistTimer_.tickAfter(.1),void e.jumpToEnd()):e.return())})},shaka.hls.HlsParser.prototype.isLive_=function(){return this.presentationType_!=shaka.hls.HlsParser.PresentationType_.VOD},shaka.hls.HlsParser.prototype.setPresentationType_=function(e){this.presentationType_=e,this.presentationTimeline_&&this.presentationTimeline_.setStatic(!this.isLive_()),this.isLive_()||this.updatePlaylistTimer_.stop()},shaka.hls.HlsParser.prototype.makeNetworkRequest_=function(e,t){if(this.operationManager_)return t=this.playerInterface_.networkingEngine.request(t,e),this.operationManager_.manage(t),t.promise;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)},shaka.hls.HlsParser.widevineDrmParser_=function(e){var t=e.getRequiredAttrValue("METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"];return a.includes(t)?(t=e.getRequiredAttrValue("URI"),t=shaka.net.DataUriPlugin.parseRaw(t),t=shaka.util.BufferUtils.toUint8(t.data),t=shaka.util.ManifestParserUtils.createDrmInfo("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=e.getAttributeValue("KEYID"))&&(e=e.toLowerCase(),goog.asserts.assert(e.startsWith("0x"),"Incorrect KEYID format!"),t.keyIds=new Set([e.substr(2)])),t):(shaka.log.error("Widevine in HLS is only supported with [",a.join(", "),"], not",t),null)},shaka.hls.HlsParser.playreadyDrmParser_=function(e){var t=e.getRequiredAttrValue("METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"];return a.includes(t)?(e=e.getRequiredAttrValue("URI"),e=shaka.net.DataUriPlugin.parseRaw(e),e=shaka.util.BufferUtils.toUint8(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=shaka.util.Pssh.createPssh(e,t),shaka.util.ManifestParserUtils.createDrmInfo("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):(shaka.log.error("PlayReady in HLS is only supported with [",a.join(", "),"], not",t),null)},goog.exportSymbol("shaka.hls.HlsParser",shaka.hls.HlsParser),shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},shaka.hls.HlsParser.RAW_FORMATS_=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],shaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_={mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},shaka.hls.HlsParser.EXTENSION_MAP_BY_CONTENT_TYPE_={audio:shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_,video:shaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_,text:shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_},shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":shaka.hls.HlsParser.widevineDrmParser_,"com.microsoft.playready":shaka.hls.HlsParser.playreadyDrmParser_},shaka.hls.HlsParser.PresentationType_={VOD:"VOD",EVENT:"EVENT",LIVE:"LIVE"},shaka.hls.HlsParser.TS_TIMESCALE_=9e4,shaka.hls.HlsParser.START_OF_SEGMENT_SIZE_=2048,shaka.media.ManifestParser.registerParserByExtension("m3u8",function(){return new shaka.hls.HlsParser}),shaka.media.ManifestParser.registerParserByMime("application/x-mpegurl",function(){return new shaka.hls.HlsParser}),shaka.media.ManifestParser.registerParserByMime("application/vnd.apple.mpegurl",function(){return new shaka.hls.HlsParser}),shaka.net.HttpPluginUtils=function(){},shaka.net.HttpPluginUtils.makeResponse=function(e,t,a,r,n,i){if(200<=a&&a<=299&&202!=a)return{uri:n||r,originalUri:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};n=null;try{n=shaka.util.StringUtils.fromBytesAutoDetect(t)}catch(e){}throw shaka.log.debug("HTTP error text:",n),new shaka.util.Error(401==a||403==a?shaka.util.Error.Severity.CRITICAL:shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.BAD_HTTP_STATUS,r,a,n,e,i)},shaka.net.HttpFetchPlugin=function(){},shaka.net.HttpFetchPlugin.parse=function(e,t,a,r){var n,i=new shaka.net.HttpFetchPlugin.Headers_,o=(shaka.util.MapUtils.asMap(t.headers).forEach(function(e,t){i.append(t,e)}),new shaka.net.HttpFetchPlugin.AbortController_),s={canceled:!1,timedOut:!1};return e=shaka.net.HttpFetchPlugin.request_(e,a,{body:t.body||void 0,headers:i,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,t.streamDataCallback),e=new shaka.util.AbortableOperation(e,function(){return s.canceled=!0,o.abort(),Promise.resolve()}),(t=t.retryParameters.timeout)&&((n=new shaka.util.Timer(function(){s.timedOut=!0,o.abort()})).tickAfter(t/1e3),e.finally(function(){n.stop()})),e},shaka.net.HttpFetchPlugin.request_=function(t,a,r,n,i,o){var s,l,u,c,d,h,p,f,m,g,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return f=shaka.net.HttpFetchPlugin.fetch_,s=shaka.net.HttpFetchPlugin.ReadableStream_,d=c=0,h=Date.now(),e.setCatchFinallyBlocks(2),e.yield(f(t,r),4);case 4:return l=e.yieldResult,p=l.clone().body.getReader(),m=(f=l.headers.get("Content-Length"))?parseInt(f,10):0,new s({start:function(n){(function t(){var a,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return e.setCatchFinallyBlocks(2),e.yield(p.read(),4);case 4:a=e.yieldResult,e.leaveTryBlock(3);break;case 2:return r=e.enterCatchBlock(),shaka.log.v1("error reading from stream",r.message),e.return();case 3:if(a.done);else if(c+=a.value.byteLength,o)return e.yield(o(a.value),5);e.jumpTo(5);break;case 5:(100<(r=Date.now())-h||a.done)&&(i(r-h,c-d,m-c),d=c,h=r),a.done?(goog.asserts.assert(!a.value,'readObj should be unset when "done" is true.'),n.close()):(n.enqueue(a.value),t()),e.jumpToEnd()}})})()}}),e.yield(l.arrayBuffer(),5);case 5:u=e.yieldResult,e.leaveTryBlock(3);break;case 2:if(g=e.enterCatchBlock(),n.canceled)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,t,a);if(n.timedOut)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,t,a);throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,t,g,a);case 3:return y={},l.headers.forEach(function(e,t){y[t.trim()]=e}),e.return(shaka.net.HttpPluginUtils.makeResponse(y,u,l.status,t,l.url,a))}})},shaka.net.HttpFetchPlugin.isSupported=function(){if(!window.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!window.fetch||!window.AbortController)},goog.exportSymbol("shaka.net.HttpFetchPlugin",shaka.net.HttpFetchPlugin),goog.exportProperty(shaka.net.HttpFetchPlugin,"isSupported",shaka.net.HttpFetchPlugin.isSupported),goog.exportProperty(shaka.net.HttpFetchPlugin,"parse",shaka.net.HttpFetchPlugin.parse),shaka.net.HttpFetchPlugin.fetch_=window.fetch,shaka.net.HttpFetchPlugin.AbortController_=window.AbortController,shaka.net.HttpFetchPlugin.ReadableStream_=window.ReadableStream,shaka.net.HttpFetchPlugin.Headers_=window.Headers,shaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0),shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0)),shaka.net.HttpXHRPlugin=function(){},shaka.net.HttpXHRPlugin.parse=function(s,a,l,r){var n=new shaka.net.HttpXHRPlugin.Xhr_,u=Date.now(),c=0,e=new Promise(function(i,o){for(var e in n.open(a.method,s,!0),n.responseType="arraybuffer",n.timeout=a.retryParameters.timeout,n.withCredentials=a.allowCrossSiteCredentials,n.onabort=function(){o(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,s,l))},n.onload=function(e){e=e.target,goog.asserts.assert(e,"XHR onload has no target!");for(var t=e.getAllResponseHeaders().trim().split("\r\n"),a={},r=(t=$jscomp.makeIterator(t)).next();!r.done;r=t.next())a[(r=r.value.split(": "))[0].toLowerCase()]=r.slice(1).join(": ");try{var n=shaka.net.HttpPluginUtils.makeResponse(a,e.response,e.status,s,e.responseURL,l);i(n)}catch(e){goog.asserts.assert(e instanceof shaka.util.Error,"Wrong error type!"),o(e)}},n.onerror=function(e){o(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,s,e,l))},n.ontimeout=function(e){o(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,s,l))},n.onprogress=function(e){var t=Date.now();(100<t-u||e.lengthComputable&&e.loaded==e.total)&&(r(t-u,e.loaded-c,e.total-e.loaded),c=e.loaded,u=t)},a.headers){var t=e.toLowerCase();n.setRequestHeader(t,a.headers[e])}n.send(a.body)});return new shaka.util.AbortableOperation(e,function(){return n.abort(),Promise.resolve()})},goog.exportSymbol("shaka.net.HttpXHRPlugin",shaka.net.HttpXHRPlugin),goog.exportProperty(shaka.net.HttpXHRPlugin,"parse",shaka.net.HttpXHRPlugin.parse),shaka.net.HttpXHRPlugin.Xhr_=window.XMLHttpRequest,shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0),shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0),shaka.offline={},shaka.offline.DownloadProgressEstimator=function(){this.actualDownloaded_=this.estimatedDownloaded_=this.estimatedTotal_=0,this.pending_=new Map,this.nextId_=0},shaka.offline.DownloadProgressEstimator.prototype.open=function(e){this.estimatedTotal_+=e;var t=this.nextId_;return this.nextId_++,this.pending_.set(t,e),t},shaka.offline.DownloadProgressEstimator.prototype.close=function(e,t){var a;this.pending_.has(e)&&(a=this.pending_.get(e),this.pending_.delete(e),this.estimatedDownloaded_+=a,this.actualDownloaded_+=t)},shaka.offline.DownloadProgressEstimator.prototype.getEstimatedProgress=function(){return 0==this.estimatedTotal_?0:this.estimatedDownloaded_/this.estimatedTotal_},shaka.offline.DownloadProgressEstimator.prototype.getTotalDownloaded=function(){return this.actualDownloaded_},shaka.offline.DownloadManager=function(e){var t=this;this.networkingEngine_=e,this.groups_=new Map,this.destroyer_=new shaka.util.Destroyer(function(){var e=Array.from(t.groups_.values());return Promise.all(e.map(function(e){return e.catch(function(){})}))}),this.abortCallbacks_=[],this.onProgress_=function(e,t){},this.onInitData_=function(e,t){},this.estimator_=new shaka.offline.DownloadProgressEstimator},shaka.offline.DownloadManager.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.offline.DownloadManager.prototype.setCallbacks=function(e,t){this.onProgress_=e,this.onInitData_=t},shaka.offline.DownloadManager.prototype.abortAll=function(){var e=this.abortCallbacks_.map(function(e){return e()});return this.abortCallbacks_=[],Promise.all(e)},shaka.offline.DownloadManager.prototype.queue=function(e,s,t,l,u){var c=this,d=(this.destroyer_.ensureNotDestroyed(),this.estimator_.open(t));return t=(this.groups_.get(e)||Promise.resolve()).then(function(){var t,a,r,n,i,o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(c.fetchSegment_(s),2);if(t=e.yieldResult,c.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED);if(l)for(n in a=shaka.util.BufferUtils.toUint8(t),(r=new shaka.util.Pssh(a)).data)o=Number(n),i=r.data[o],o=r.systemIds[o],c.onInitData_(i,o);return c.estimator_.close(d,t.byteLength),c.onProgress_(c.estimator_.getEstimatedProgress(),c.estimator_.getTotalDownloaded()),e.return(u(t))})}),this.groups_.set(e,t),t},shaka.offline.DownloadManager.prototype.queueWork=function(e,t){this.destroyer_.ensureNotDestroyed();var a=(this.groups_.get(e)||Promise.resolve()).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(t(),0)})});return this.groups_.set(e,a),a},shaka.offline.DownloadManager.prototype.waitToFinish=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(Promise.all(t.groups_.values()),2):e.return(t.estimator_.getTotalDownloaded())})},shaka.offline.DownloadManager.prototype.fetchSegment_=function(t){var a,r,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(r=shaka.net.NetworkingEngine.RequestType.SEGMENT,a=i.networkingEngine_.request(r,t),r=function(){return a.abort()},i.abortCallbacks_.push(r),e.yield(a.promise,2)):(n=e.yieldResult,shaka.util.ArrayUtils.remove(i.abortCallbacks_,r),e.return(n.data))})},shaka.offline.indexeddb={},shaka.offline.indexeddb.DBOperation=function(e,t){var a=this;this.transaction_=e,this.store_=e.objectStore(t),this.promise_=new shaka.util.PublicPromise,e.onabort=function(e){e.preventDefault(),a.promise_.reject()},e.onerror=function(e){e.preventDefault(),a.promise_.reject()},e.oncomplete=function(e){a.promise_.resolve()}},shaka.offline.indexeddb.DBOperation.prototype.abort=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){try{t.transaction_.abort()}catch(e){}return e.setCatchFinallyBlocks(2),e.yield(t.promise_,4)}if(2!=e.nextAddress)return e.leaveTryBlock(0);e.enterCatchBlock(),e.jumpToEnd()})},shaka.offline.indexeddb.DBOperation.prototype.forEachEntry=function(n){var t=this;return new Promise(function(a,e){var r=t.store_.openCursor();r.onerror=e,r.onsuccess=function(e){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return null==r.result?(a(),e.return()):(t=r.result,e.yield(n(t.key,t.value,t),2));t.continue(),e.jumpToEnd()})}})},shaka.offline.indexeddb.DBOperation.prototype.store=function(){return this.store_},shaka.offline.indexeddb.DBOperation.prototype.promise=function(){return this.promise_},shaka.offline.indexeddb.DBConnection=function(e){this.connection_=e,this.pending_=[]},shaka.offline.indexeddb.DBConnection.prototype.destroy=function(){return Promise.all(this.pending_.map(function(e){return e.abort()}))},shaka.offline.indexeddb.DBConnection.prototype.startReadOnlyOperation=function(e){return this.startOperation_(e,"readonly")},shaka.offline.indexeddb.DBConnection.prototype.startReadWriteOperation=function(e){return this.startOperation_(e,"readwrite")},shaka.offline.indexeddb.DBConnection.prototype.startOperation_=function(e,t){var a=this,t=this.connection_.transaction([e],t),r=new shaka.offline.indexeddb.DBOperation(t,e);return this.pending_.push(r),r.promise().then(function(){return a.stopTracking_(r)},function(){return a.stopTracking_(r)}),r},shaka.offline.indexeddb.DBConnection.prototype.stopTracking_=function(e){shaka.util.ArrayUtils.remove(this.pending_,e)},shaka.offline.indexeddb.BaseStorageCell=function(e,t,a){this.connection_=new shaka.offline.indexeddb.DBConnection(e),this.segmentStore_=t,this.manifestStore_=a},shaka.offline.indexeddb.BaseStorageCell.prototype.destroy=function(){return this.connection_.destroy()},shaka.offline.indexeddb.BaseStorageCell.prototype.hasFixedKeySpace=function(){return!0},shaka.offline.indexeddb.BaseStorageCell.prototype.addSegments=function(e){return this.rejectAdd(this.segmentStore_)},shaka.offline.indexeddb.BaseStorageCell.prototype.removeSegments=function(e,t){return this.remove_(this.segmentStore_,e,t)},shaka.offline.indexeddb.BaseStorageCell.prototype.getSegments=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(r.get_(r.segmentStore_,t),2):(a=e.yieldResult,e.return(a.map(function(e){return r.convertSegmentData(e)})))})},shaka.offline.indexeddb.BaseStorageCell.prototype.addManifests=function(e){return this.rejectAdd(this.manifestStore_)},shaka.offline.indexeddb.BaseStorageCell.prototype.updateManifestExpiration=function(t,a){var e=this.connection_.startReadWriteOperation(this.manifestStore_),r=e.store();return r.get(t).onsuccess=function(e){(e=e.target.result)&&(e.expiration=a,r.put(e,t))},e.promise()},shaka.offline.indexeddb.BaseStorageCell.prototype.removeManifests=function(e,t){return this.remove_(this.manifestStore_,e,t)},shaka.offline.indexeddb.BaseStorageCell.prototype.getManifests=function(t){var a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(r.get_(r.manifestStore_,t),2):(a=e.yieldResult,e.return(Promise.all(a.map(function(e){return r.convertManifest(e)}))))})},shaka.offline.indexeddb.BaseStorageCell.prototype.getAllManifests=function(){var t,n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=i.connection_.startReadOnlyOperation(i.manifestStore_),n=new Map,e.yield(t.forEachEntry(function(t,a){var r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(i.convertManifest(a),2);r=e.yieldResult,n.set(t,r),e.jumpToEnd()})}),2)):3!=e.nextAddress?e.yield(t.promise(),3):e.return(n)})},shaka.offline.indexeddb.BaseStorageCell.prototype.convertSegmentData=function(e){return e},shaka.offline.indexeddb.BaseStorageCell.prototype.convertManifest=function(e){return Promise.resolve(e)},shaka.offline.indexeddb.BaseStorageCell.prototype.rejectAdd=function(e){return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NEW_KEY_OPERATION_NOT_SUPPORTED,"Cannot add new value to "+e))},shaka.offline.indexeddb.BaseStorageCell.prototype.add=function(t,a){var r,n,i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return e.return(i);for(r=c.connection_.startReadWriteOperation(t),n=r.store(),i=[],o={},s=$jscomp.makeIterator(a),l=s.next();!l.done;o={$jscomp$loop$prop$request$649:o.$jscomp$loop$prop$request$649},l=s.next())u=l.value,o.$jscomp$loop$prop$request$649=n.add(u),o.$jscomp$loop$prop$request$649.onsuccess=function(t){return function(e){i.push(t.$jscomp$loop$prop$request$649.result)}}(o);return e.yield(r.promise(),2)})},shaka.offline.indexeddb.BaseStorageCell.prototype.remove_=function(e,t,a){for(var r=(e=this.connection_.startReadWriteOperation(e)).store(),n={},i=(t=$jscomp.makeIterator(t)).next();!i.done;n={$jscomp$loop$prop$key$651:n.$jscomp$loop$prop$key$651},i=t.next())n.$jscomp$loop$prop$key$651=i.value,r.delete(n.$jscomp$loop$prop$key$651).onsuccess=function(e){return function(){return a(e.$jscomp$loop$prop$key$651)}}(n);return e.promise()},shaka.offline.indexeddb.BaseStorageCell.prototype.get_=function(t,a){var r,n,i,o,s,l,u,c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){for(r=c.connection_.startReadOnlyOperation(t),n=r.store(),i={},o=[],s={},l=$jscomp.makeIterator(a),u=l.next();!u.done;s={$jscomp$loop$prop$request$653:s.$jscomp$loop$prop$request$653,$jscomp$loop$prop$key$654:s.$jscomp$loop$prop$key$654},u=l.next())s.$jscomp$loop$prop$key$654=u.value,s.$jscomp$loop$prop$request$653=n.get(s.$jscomp$loop$prop$key$654),s.$jscomp$loop$prop$request$653.onsuccess=function(e){return function(){null==e.$jscomp$loop$prop$request$653.result&&o.push(e.$jscomp$loop$prop$key$654),i[e.$jscomp$loop$prop$key$654]=e.$jscomp$loop$prop$request$653.result}}(s);return e.yield(r.promise(),2)}if(o.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+o);return e.return(a.map(function(e){return i[e]}))})},shaka.offline.indexeddb.EmeSessionStorageCell=function(e,t){this.connection_=new shaka.offline.indexeddb.DBConnection(e),this.store_=t},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.destroy=function(){return this.connection_.destroy()},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.getAll=function(){var t,a,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=r.connection_.startReadOnlyOperation(r.store_),a=[],e.yield(t.forEachEntry(function(e,t){a.push(t)}),2)):3!=e.nextAddress?e.yield(t.promise(),3):e.return(a)})},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.add=function(e){for(var t=this.connection_.startReadWriteOperation(this.store_),a=t.store(),r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next())a.add(r.value);return t.promise()},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.remove=function(r){var t,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=a.connection_.startReadWriteOperation(a.store_),e.yield(t.forEachEntry(function(e,t,a){r.includes(t.sessionId)&&a.delete()}),2)):e.yield(t.promise(),0)})},shaka.offline.StorageMuxer=function(){this.mechanisms_=new Map},shaka.offline.StorageMuxer.prototype.destroy=function(){for(var e=[],t=$jscomp.makeIterator(this.mechanisms_.values()),a=t.next();!a.done;a=t.next())e.push(a.value.destroy());return this.mechanisms_.clear(),Promise.all(e)},shaka.offline.StorageMuxer.prototype.init=function(){var a=this;shaka.offline.StorageMuxer.getRegistry_().forEach(function(e,t){e=e();e?a.mechanisms_.set(t,e):shaka.log.info("Skipping "+t+" as it is not supported on this platform")});for(var e=[],t=$jscomp.makeIterator(this.mechanisms_.values()),r=t.next();!r.done;r=t.next())e.push(r.value.init());return Promise.all(e)},shaka.offline.StorageMuxer.prototype.getActive=function(){var r=null;if(this.mechanisms_.forEach(function(e,a){e.getCells().forEach(function(e,t){e.hasFixedKeySpace()||(r=r||{path:{mechanism:a,cell:t},cell:e})})}),r)return r;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find a cell that supports add-operations")},shaka.offline.StorageMuxer.prototype.forEachCell=function(r){this.mechanisms_.forEach(function(e,a){e.getCells().forEach(function(e,t){r({mechanism:a,cell:t},e)})})},shaka.offline.StorageMuxer.prototype.getCell=function(e,t){var a=this.mechanisms_.get(e);if(!a)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find mechanism with name "+e);if(a=a.getCells().get(t))return a;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find cell with name "+t)},shaka.offline.StorageMuxer.prototype.forEachEmeSessionCell=function(a){this.mechanisms_.forEach(function(e,t){a(e.getEmeSessionCell())})},shaka.offline.StorageMuxer.prototype.getEmeSessionCell=function(){var e=Array.from(this.mechanisms_.keys());if(e.length)return this.mechanisms_.get(e[0]).getEmeSessionCell();throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED,"No supported storage mechanisms found")},shaka.offline.StorageMuxer.prototype.resolvePath=function(e){var t=this.mechanisms_.get(e.mechanism);return t?t.getCells().get(e.cell):null},shaka.offline.StorageMuxer.prototype.erase=function(){var a,t,r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=Array.from(r.mechanisms_.values()),(t=0<a.length)||shaka.offline.StorageMuxer.getRegistry_().forEach(function(e,t){e=e();e&&a.push(e)}),e.yield(Promise.all(a.map(function(e){return e.erase()})),2)):t?e.jumpTo(0):e.yield(Promise.all(a.map(function(e){return e.destroy()})),0)})},shaka.offline.StorageMuxer.register=function(e,t){shaka.offline.StorageMuxer.registry_.set(e,t)},shaka.offline.StorageMuxer.unregister=function(e){shaka.offline.StorageMuxer.registry_.delete(e)},shaka.offline.StorageMuxer.support=function(){for(var e=shaka.offline.StorageMuxer.getRegistry_(),t=(e=$jscomp.makeIterator(e.values())).next();!t.done;t=e.next())if(t=(t=t.value)())return t.destroy(),!0;return!1},shaka.offline.StorageMuxer.overrideSupport=function(e){shaka.offline.StorageMuxer.override_=e},shaka.offline.StorageMuxer.clearOverride=function(){shaka.offline.StorageMuxer.override_=null},shaka.offline.StorageMuxer.getRegistry_=function(){var e=shaka.offline.StorageMuxer.override_,t=shaka.offline.StorageMuxer.registry_;return!COMPILED&&e||t},goog.exportSymbol("shaka.offline.StorageMuxer",shaka.offline.StorageMuxer),goog.exportProperty(shaka.offline.StorageMuxer,"unregister",shaka.offline.StorageMuxer.unregister),goog.exportProperty(shaka.offline.StorageMuxer,"register",shaka.offline.StorageMuxer.register),goog.exportProperty(shaka.offline.StorageMuxer.prototype,"destroy",shaka.offline.StorageMuxer.prototype.destroy),shaka.offline.StorageMuxer.override_=null,shaka.offline.StorageMuxer.registry_=new Map,shaka.offline.indexeddb.V1StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V1StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V1StorageCell.prototype.updateManifestExpiration=function(t,a){var r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return r=o.connection_.startReadWriteOperation(o.manifestStore_),n=r.store(),i=new shaka.util.PublicPromise,n.get(t).onsuccess=function(e){(e=e.target.result)?(goog.asserts.assert(e.key==t,"With in-line keys, the keys should match"),e.expiration=a,n.put(e),i.resolve()):i.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+t))},e.yield(Promise.all([r.promise(),i]),0)})},shaka.offline.indexeddb.V1StorageCell.prototype.convertManifest=function(t){var a,r,n,i,o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return o=e.yieldResult,e.return({creationTime:0,originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:null==t.expiration?1/0:t.expiration,streams:o,sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata});for(a=shaka.offline.indexeddb.V1StorageCell,r=[],n=0;n<t.periods.length;++n)i=n==t.periods.length-1?t.duration:t.periods[n+1].startTime,i=i-t.periods[n].startTime,i=a.convertPeriod_(t.periods[n],i),r.push(i);return e.yield(shaka.util.PeriodCombiner.combineDbStreams(r),2)})},shaka.offline.indexeddb.V1StorageCell.convertPeriod_=function(t,a){var r=shaka.offline.indexeddb.V1StorageCell;r.fillMissingVariants_(t);for(var e=$jscomp.makeIterator(t.streams),n=e.next();!n.done;n=e.next())goog.asserts.assert(n.value.variantIds,"After filling in missing variants, each stream should have variant ids");return t.streams.map(function(e){return r.convertStream_(e,t.startTime,a)})},shaka.offline.indexeddb.V1StorageCell.convertStream_=function(e,t,a){var r=shaka.offline.indexeddb.V1StorageCell,n=e.initSegmentUri?r.getKeyFromSegmentUri_(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+a;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:n,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){return r.convertSegment_(e,n,t,o,i)}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}},shaka.offline.indexeddb.V1StorageCell.convertSegment_=function(e,t,a,r,n){var i=shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_(e.uri);return{startTime:a+e.startTime,endTime:a+e.endTime,dataKey:i,initSegmentKey:t,appendWindowStart:a,appendWindowEnd:r,timestampOffset:n}},shaka.offline.indexeddb.V1StorageCell.prototype.convertSegmentData=function(e){return{data:e.data}},shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_=function(e){var t;if(t=(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||/^offline:segment\/([0-9]+)$/.exec(e))return Number(t[1]);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,"Could not parse uri "+e)},shaka.offline.indexeddb.V1StorageCell.fillMissingVariants_=function(e){var t=shaka.util.ManifestParserUtils.ContentType.AUDIO,a=shaka.util.ManifestParserUtils.ContentType.VIDEO,r=e.streams.filter(function(e){return e.contentType==t});if(e=e.streams.filter(function(e){return e.contentType==a}),!r.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){goog.asserts.assert(r.every(function(e){return!e.variantIds}),"Some audio streams have variant ids and some do not."),goog.asserts.assert(e.every(function(e){return!e.variantIds}),"Some video streams have variant ids and some do not.");for(var n=$jscomp.makeIterator(r),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=$jscomp.makeIterator(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!r.length){shaka.log.debug("Found video-only content. Creating variants for video.");for(var o=n++,s=$jscomp.makeIterator(e),i=s.next();!i.done;i=s.next())i.value.variantIds.push(o)}if(!e.length&&r.length)for(shaka.log.debug("Found audio-only content. Creating variants for audio."),o=n++,i=(s=$jscomp.makeIterator(r)).next();!i.done;i=s.next())i.value.variantIds.push(o);if(e.length&&r.length)for(shaka.log.debug("Found audio-video content. Creating variants."),i=(r=$jscomp.makeIterator(r)).next();!i.done;i=r.next())for(i=i.value,s=(o=$jscomp.makeIterator(e)).next();!s.done;s=o.next()){var s=s.value,l=n++;i.variantIds.push(l),s.variantIds.push(l)}}},shaka.offline.indexeddb.V2StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V2StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V2StorageCell.prototype.convertManifest=function(t){var a,r,n,i,o=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return i=e.yieldResult,e.return({appMetadata:t.appMetadata,creationTime:0,drmInfo:t.drmInfo,duration:t.duration,expiration:null==t.expiration?1/0:t.expiration,originalManifestUri:t.originalManifestUri,sessionIds:t.sessionIds,size:t.size,streams:i});for(a=[],r=0;r<t.periods.length;++r)n=r==t.periods.length-1?t.duration:t.periods[r+1].startTime,n=n-t.periods[r].startTime,n=o.convertPeriod_(t.periods[r],n),a.push(n);return e.yield(shaka.util.PeriodCombiner.combineDbStreams(a),2)})},shaka.offline.indexeddb.V2StorageCell.prototype.convertPeriod_=function(e,t){for(var a=[],r=$jscomp.makeIterator(e.streams),n=r.next();!n.done;n=r.next())0!=(n=n.value).variantIds.length&&a.push(this.convertStream_(n,e.startTime,e.startTime+t));return a},shaka.offline.indexeddb.V2StorageCell.prototype.convertStream_=function(t,a,r){var n=this;return{id:t.id,originalId:t.originalId,primary:t.primary,type:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:void 0,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,encrypted:t.encrypted,keyIds:new Set([t.keyId]),segments:t.segments.map(function(e){return n.convertSegment_(e,t.initSegmentKey,a,r,t.presentationTimeOffset)}),variantIds:t.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}},shaka.offline.indexeddb.V2StorageCell.prototype.convertSegment_=function(e,t,a,r,n){return{startTime:a+e.startTime,endTime:a+e.endTime,initSegmentKey:t,appendWindowStart:a,appendWindowEnd:r,timestampOffset:a-n,dataKey:e.dataKey}},shaka.offline.indexeddb.V5StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V5StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V5StorageCell.prototype.hasFixedKeySpace=function(){return!1},shaka.offline.indexeddb.V5StorageCell.prototype.addSegments=function(e){return this.add(this.segmentStore_,e)},shaka.offline.indexeddb.V5StorageCell.prototype.addManifests=function(e){return this.add(this.manifestStore_,e)},shaka.offline.indexeddb.V5StorageCell.prototype.convertManifest=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},shaka.offline.indexeddb.StorageMechanism=function(){this.sessions_=this.v5_=this.v3_=this.v2_=this.v1_=this.db_=null},shaka.offline.indexeddb.StorageMechanism.prototype.init=function(){var t=this,e=shaka.offline.indexeddb.StorageMechanism.DB_NAME,a=shaka.offline.indexeddb.StorageMechanism.VERSION,r=new shaka.util.PublicPromise,n=window.indexedDB.open(e,a);return n.onsuccess=function(e){e=n.result,t.db_=e,t.v1_=shaka.offline.indexeddb.StorageMechanism.createV1_(e),t.v2_=shaka.offline.indexeddb.StorageMechanism.createV2_(e),t.v3_=shaka.offline.indexeddb.StorageMechanism.createV3_(e),t.v5_=shaka.offline.indexeddb.StorageMechanism.createV5_(e),t.sessions_=shaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_(e),r.resolve()},n.onupgradeneeded=function(e){t.createStores_(n.result)},n.onerror=function(e){r.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,n.error)),e.preventDefault()},r},shaka.offline.indexeddb.StorageMechanism.prototype.destroy=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(t.v1_)return e.yield(t.v1_.destroy(),2);e.jumpTo(2);break;case 2:if(t.v2_)return e.yield(t.v2_.destroy(),4);e.jumpTo(4);break;case 4:if(t.v3_)return e.yield(t.v3_.destroy(),6);e.jumpTo(6);break;case 6:if(t.v5_)return e.yield(t.v5_.destroy(),8);e.jumpTo(8);break;case 8:if(t.sessions_)return e.yield(t.sessions_.destroy(),10);e.jumpTo(10);break;case 10:t.db_&&t.db_.close(),e.jumpToEnd()}})},shaka.offline.indexeddb.StorageMechanism.prototype.getCells=function(){var e=new Map;return this.v1_&&e.set("v1",this.v1_),this.v2_&&e.set("v2",this.v2_),this.v3_&&e.set("v3",this.v3_),this.v5_&&e.set("v5",this.v5_),e},shaka.offline.indexeddb.StorageMechanism.prototype.getEmeSessionCell=function(){return goog.asserts.assert(this.sessions_,"Cannot be destroyed."),this.sessions_},shaka.offline.indexeddb.StorageMechanism.prototype.erase=function(){var t=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(t.v1_)return e.yield(t.v1_.destroy(),2);e.jumpTo(2);break;case 2:if(t.v2_)return e.yield(t.v2_.destroy(),4);e.jumpTo(4);break;case 4:if(t.v3_)return e.yield(t.v3_.destroy(),6);e.jumpTo(6);break;case 6:if(t.v5_)return e.yield(t.v5_.destroy(),8);e.jumpTo(8);break;case 8:return t.db_&&t.db_.close(),e.yield(shaka.offline.indexeddb.StorageMechanism.deleteAll_(),10);case 10:return t.db_=null,t.v1_=null,t.v2_=null,t.v3_=null,t.v5_=null,e.yield(t.init(),0)}})},shaka.offline.indexeddb.StorageMechanism.createV1_=function(e){var t=(a=shaka.offline.indexeddb.StorageMechanism).V1_SEGMENT_STORE,a=a.V1_MANIFEST_STORE,r=e.objectStoreNames;return r.contains(a)&&r.contains(t)?(shaka.log.debug("Mounting v1 idb storage cell"),new shaka.offline.indexeddb.V1StorageCell(e,t,a)):null},shaka.offline.indexeddb.StorageMechanism.createV2_=function(e){var t=(a=shaka.offline.indexeddb.StorageMechanism).V2_SEGMENT_STORE,a=a.V2_MANIFEST_STORE,r=e.objectStoreNames;return r.contains(a)&&r.contains(t)?(shaka.log.debug("Mounting v2 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(e,t,a)):null},shaka.offline.indexeddb.StorageMechanism.createV3_=function(e){var t=(a=shaka.offline.indexeddb.StorageMechanism).V3_SEGMENT_STORE,a=a.V3_MANIFEST_STORE,r=e.objectStoreNames;return r.contains(a)&&r.contains(t)?(shaka.log.debug("Mounting v3 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(e,t,a)):null},shaka.offline.indexeddb.StorageMechanism.createV5_=function(e){var t=(a=shaka.offline.indexeddb.StorageMechanism).V5_SEGMENT_STORE,a=a.V5_MANIFEST_STORE,r=e.objectStoreNames;return r.contains(a)&&r.contains(t)?(shaka.log.debug("Mounting v5 idb storage cell"),new shaka.offline.indexeddb.V5StorageCell(e,t,a)):null},shaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_=function(e){var t=shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE;return e.objectStoreNames.contains(t)?(shaka.log.debug("Mounting session ID idb storage cell"),new shaka.offline.indexeddb.EmeSessionStorageCell(e,t)):null},shaka.offline.indexeddb.StorageMechanism.prototype.createStores_=function(e){for(var t=$jscomp.makeIterator([shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE,shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE,shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE]),a=t.next();!a.done;a=t.next())a=a.value,e.objectStoreNames.contains(a)||e.createObjectStore(a,{autoIncrement:!0})},shaka.offline.indexeddb.StorageMechanism.deleteAll_=function(){var t=shaka.offline.indexeddb.StorageMechanism.DB_NAME,a=new shaka.util.PublicPromise,r=window.indexedDB.deleteDatabase(t);return r.onblocked=function(e){shaka.log.warning("Deleting",t,"is being blocked")},r.onsuccess=function(e){a.resolve()},r.onerror=function(e){a.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,r.error)),e.preventDefault()},a},shaka.offline.indexeddb.StorageMechanism.DB_NAME="shaka_offline_db",shaka.offline.indexeddb.StorageMechanism.VERSION=5,shaka.offline.indexeddb.StorageMechanism.V1_SEGMENT_STORE="segment",shaka.offline.indexeddb.StorageMechanism.V2_SEGMENT_STORE="segment-v2",shaka.offline.indexeddb.StorageMechanism.V3_SEGMENT_STORE="segment-v3",shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE="segment-v5",shaka.offline.indexeddb.StorageMechanism.V1_MANIFEST_STORE="manifest",shaka.offline.indexeddb.StorageMechanism.V2_MANIFEST_STORE="manifest-v2",shaka.offline.indexeddb.StorageMechanism.V3_MANIFEST_STORE="manifest-v3",shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE="manifest-v5",shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE="session-ids",shaka.offline.StorageMuxer.register("idb",function(){return shaka.util.Platform.isChromecast()||!window.indexedDB?null:new shaka.offline.indexeddb.StorageMechanism}),shaka.offline.OfflineUri=function(e,t,a,r){this.type_=e,this.mechanism_=t,this.cell_=a,this.key_=r,this.asString_=["offline:",e,"/",t,"/",a,"/",r].join("")},shaka.offline.OfflineUri.prototype.isManifest=function(){return"manifest"==this.type_},shaka.offline.OfflineUri.prototype.isSegment=function(){return"segment"==this.type_},shaka.offline.OfflineUri.prototype.mechanism=function(){return this.mechanism_},shaka.offline.OfflineUri.prototype.cell=function(){return this.cell_},shaka.offline.OfflineUri.prototype.key=function(){return this.key_},shaka.offline.OfflineUri.prototype.toString=function(){return this.asString_},shaka.offline.OfflineUri.parse=function(e){var t,a,r;return null!=(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e))&&("manifest"==(t=e[1])||"segment"==t)&&(a=e[2])&&(r=e[3])&&null!=t?new shaka.offline.OfflineUri(t,a,r,Number(e[4])):null},shaka.offline.OfflineUri.manifest=function(e,t,a){return new shaka.offline.OfflineUri("manifest",e,t,a)},shaka.offline.OfflineUri.segment=function(e,t,a){return new shaka.offline.OfflineUri("segment",e,t,a)},shaka.offline.ManifestConverter=function(e,t){this.mechanism_=e,this.cell_=t},shaka.offline.ManifestConverter.prototype.fromManifestDB=function(e){var t=this,a=new shaka.media.PresentationTimeline(null,0),r=(a.setDuration(e.duration),e.streams.filter(function(e){return t.isAudio_(e)})),n=e.streams.filter(function(e){return t.isVideo_(e)}),r=this.createVariants(r,n,a),n=e.streams.filter(function(e){return t.isText_(e)}).map(function(e){return t.fromStreamDB_(e,a)}),i=e.streams.filter(function(e){return t.isImage_(e)}).map(function(e){return t.fromStreamDB_(e,a)}),o=e.drmInfo?[e.drmInfo]:[];if(e.drmInfo)for(var s=$jscomp.makeIterator(r.values()),l=s.next();!l.done;l=s.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=o),l.video&&l.video.encrypted&&(l.video.drmInfos=o);return{presentationTimeline:a,minBufferTime:2,offlineSessionIds:e.sessionIds,variants:Array.from(r.values()),textStreams:n,imageStreams:i}},shaka.offline.ManifestConverter.prototype.createVariants=function(e,t,a){for(var r=new Set,n=$jscomp.makeIterator(e),i=n.next();!i.done;i=n.next())for(var o=$jscomp.makeIterator(i.value.variantIds),i=o.next();!i.done;i=o.next())r.add(i.value);for(i=(n=$jscomp.makeIterator(t)).next();!i.done;i=n.next())for(i=(o=$jscomp.makeIterator(i.value.variantIds)).next();!i.done;i=o.next())r.add(i.value);for(n=new Map,i=(r=$jscomp.makeIterator(r)).next();!i.done;i=r.next())i=i.value,n.set(i,this.createEmptyVariant_(i));for(r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next())for(r=r.value,i=this.fromStreamDB_(r,a),r=(o=$jscomp.makeIterator(r.variantIds)).next();!r.done;r=o.next())r=n.get(r.value),goog.asserts.assert(!r.audio,"A variant should only have one audio stream"),r.language=i.language,r.primary=r.primary||i.primary,r.audio=i;for(e=(t=$jscomp.makeIterator(t)).next();!e.done;e=t.next())for(r=e.value,e=this.fromStreamDB_(r,a),r=(i=$jscomp.makeIterator(r.variantIds)).next();!r.done;r=i.next())r=n.get(r.value),goog.asserts.assert(!r.video,"A variant should only have one video stream"),r.primary=r.primary||e.primary,r.video=e;return n},shaka.offline.ManifestConverter.prototype.fromStreamDB_=function(e,t){var a=this,r=e.segments.map(function(e,t){return a.fromSegmentDB_(t,e)});return t.notifySegments(r),r=new shaka.media.SegmentIndex(r),{id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:r,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:e.hdr,kind:e.kind,encrypted:e.encrypted,drmInfos:[],keyIds:e.keyIds,language:e.language,label:e.label,type:e.type,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:e.roles,forced:e.forced,channelsCount:e.channelsCount,audioSamplingRate:e.audioSamplingRate,spatialAudio:e.spatialAudio,closedCaptions:e.closedCaptions,tilesLayout:e.tilesLayout}},shaka.offline.ManifestConverter.prototype.fromSegmentDB_=function(e,t){var a=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,t.dataKey),r=null!=t.initSegmentKey?this.fromInitSegmentDB_(t.initSegmentKey):null;return new shaka.media.SegmentReference(t.startTime,t.endTime,function(){return[a.toString()]},0,null,r,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd)},shaka.offline.ManifestConverter.prototype.fromInitSegmentDB_=function(e){var t=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,e);return new shaka.media.InitSegmentReference(function(){return[t.toString()]},0,null)},shaka.offline.ManifestConverter.prototype.isAudio_=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.AUDIO},shaka.offline.ManifestConverter.prototype.isVideo_=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.VIDEO},shaka.offline.ManifestConverter.prototype.isText_=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.TEXT},shaka.offline.ManifestConverter.prototype.isImage_=function(e){return e.type==shaka.util.ManifestParserUtils.ContentType.IMAGE},shaka.offline.ManifestConverter.prototype.createEmptyVariant_=function(e){return{id:e,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}},shaka.offline.OfflineManifestParser=function(){this.uri_=null},shaka.offline.OfflineManifestParser.prototype.configure=function(e){},shaka.offline.OfflineManifestParser.prototype.start=function(t,a){var r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(r=shaka.offline.OfflineUri.parse(t),null!=(l.uri_=r)&&r.isManifest())return n=new shaka.offline.StorageMuxer,e.setFinallyBlock(2),e.yield(n.init(),4);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,t);case 4:return e.yield(n.getCell(r.mechanism(),r.cell()),5);case 5:return i=e.yieldResult,e.yield(i.getManifests([r.key()]),6);case 6:return i=e.yieldResult,o=i[0],s=new shaka.offline.ManifestConverter(r.mechanism(),r.cell()),s=s.fromManifestDB(o),a.makeTextStreamsForClosedCaptions(s),e.return(s);case 2:return e.enterFinallyBlock(),e.yield(n.destroy(),7);case 7:e.leaveFinallyBlock(0)}})},shaka.offline.OfflineManifestParser.prototype.stop=function(){return Promise.resolve()},shaka.offline.OfflineManifestParser.prototype.update=function(){},shaka.offline.OfflineManifestParser.prototype.setVideoElement=function(e){},shaka.offline.OfflineManifestParser.prototype.changeManifestURL=function(e,t){},shaka.offline.OfflineManifestParser.prototype.onExpirationUpdated=function(t,a){var r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return goog.asserts.assert(l.uri_,"Should not get update event before start has been called"),r=l.uri_,n=new shaka.offline.StorageMuxer,e.setCatchFinallyBlocks(2,3),e.yield(n.init(),5);case 5:return e.yield(n.getCell(r.mechanism(),r.cell()),6);case 6:return i=e.yieldResult,e.yield(i.getManifests([r.key()]),7);case 7:if(o=e.yieldResult,o=o[0],s=o.sessionIds.includes(t),o=null==o.expiration||o.expiration>a,s&&o)return shaka.log.debug("Updating expiration for stored content"),e.yield(i.updateManifestExpiration(r.key(),a),3);e.jumpTo(3);break;case 3:return e.enterFinallyBlock(),e.yield(n.destroy(),10);case 10:e.leaveFinallyBlock(0);break;case 2:s=e.enterCatchBlock(),shaka.log.error("There was an error updating",r,s),e.jumpTo(3)}})},shaka.media.ManifestParser.registerParserByMime("application/x-offline-manifest",function(){return new shaka.offline.OfflineManifestParser}),shaka.offline.OfflineScheme=function(){},shaka.offline.OfflineScheme.plugin=function(e,t,a,r){return(t=shaka.offline.OfflineUri.parse(e))&&t.isManifest()?shaka.offline.OfflineScheme.getManifest_(e):t&&t.isSegment()?shaka.offline.OfflineScheme.getSegment_(t.key(),t):shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,e))},shaka.offline.OfflineScheme.getManifest_=function(e){return e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},shaka.util.AbortableOperation.completed(e)},shaka.offline.OfflineScheme.getSegment_=function(e,t){goog.asserts.assert(t.isSegment(),"Only segment uri's should be given to getSegment");var a=new shaka.offline.StorageMuxer;return shaka.util.AbortableOperation.completed(void 0).chain(function(){return a.init()}).chain(function(){return a.getCell(t.mechanism(),t.cell())}).chain(function(e){return e.getSegments([t.key()])}).chain(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return a.destroy()})},goog.exportSymbol("shaka.offline.OfflineScheme",shaka.offline.OfflineScheme),goog.exportProperty(shaka.offline.OfflineScheme,"plugin",shaka.offline.OfflineScheme.plugin),shaka.net.NetworkingEngine.registerScheme("offline",shaka.offline.OfflineScheme.plugin),shaka.offline.SessionDeleter=function(){},shaka.offline.SessionDeleter.prototype.delete=function(t,a,r){var n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:i=shaka.offline.SessionDeleter,n=[],i=$jscomp.makeIterator(i.createBuckets_(r)),o=i.next();case 2:if(o.done){e.jumpTo(4);break}return s=o.value,s=l.doDelete_(t,a,s),e.yield(s,5);case 5:s=e.yieldResult,n=n.concat(s),o=i.next(),e.jumpTo(2);break;case 4:return e.return(n)}})},shaka.offline.SessionDeleter.prototype.doDelete_=function(t,a,r){var n,i,o;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return n=new shaka.media.DrmEngine({netEngine:a,onError:function(){},onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),e.setCatchFinallyBlocks(2),n.configure(t),e.yield(n.initForRemoval(r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities),4);case 4:e.leaveTryBlock(3);break;case 2:return i=e.enterCatchBlock(),shaka.log.warning("Error initializing EME",i),e.yield(n.destroy(),5);case 5:return e.return([]);case 3:return e.setCatchFinallyBlocks(6),e.yield(n.setServerCertificate(),8);case 8:e.leaveTryBlock(7);break;case 6:return i=e.enterCatchBlock(),shaka.log.warning("Error setting server certificate",i),e.yield(n.destroy(),9);case 9:return e.return([]);case 7:return o=[],e.yield(Promise.all(r.sessionIds.map(function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(e.setCatchFinallyBlocks(2),e.yield(n.removeSession(t),4)):2!=e.nextAddress?(o.push(t),e.leaveTryBlock(0)):(a=e.enterCatchBlock(),shaka.log.warning("Error deleting offline session",a),void e.jumpToEnd())})})),10);case 10:return e.yield(n.destroy(),11);case 11:return e.return(o)}})},shaka.offline.SessionDeleter.createBuckets_=function(e){for(var t=shaka.offline.SessionDeleter,a=[],r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next()){for(var r=r.value,n=!1,i=$jscomp.makeIterator(a),o=i.next();!o.done;o=i.next())if(o=o.value,t.isCompatible_(o.info,r)){o.sessionIds.push(r.sessionId),n=!0;break}n||a.push({info:r,sessionIds:[r.sessionId]})}return a},shaka.offline.SessionDeleter.isCompatible_=function(e,t){function a(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}var r=shaka.util.ArrayUtils;return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&r.hasSameElements(e.audioCapabilities,t.audioCapabilities,a)&&r.hasSameElements(e.videoCapabilities,t.videoCapabilities,a)},shaka.offline.StoredContentUtils=function(){},shaka.offline.StoredContentUtils.fromManifest=function(e,t,a,r){return goog.asserts.assert(t.variants.length,"Cannot create stored content from manifest with no variants."),{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:a,expiration:1/0,tracks:t=shaka.offline.StoredContentUtils.getTracks_(t),appMetadata:r}},shaka.offline.StoredContentUtils.fromManifestDB=function(e,t){goog.asserts.assert(t.streams.length,"Cannot create stored content from manifestDB with no streams.");var a=new shaka.offline.ManifestConverter(e.mechanism(),e.cell()).fromManifestDB(t),r=t.appMetadata||{},a=shaka.offline.StoredContentUtils.getTracks_(a);return goog.asserts.assert(null!=t.expiration,"Manifest expiration must be set by now!"),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:a,appMetadata:r}},shaka.offline.StoredContentUtils.getTracks_=function(e){for(var t=shaka.util.StreamUtils,a=[],r=t.getPlayableVariants(e.variants),n=(r=$jscomp.makeIterator(r)).next();!n.done;n=r.next())a.push(t.variantToTrack(n.value));for(r=(e=$jscomp.makeIterator(e.textStreams)).next();!r.done;r=e.next())a.push(t.textStreamToTrack(r.value));return a},shaka.offline.StreamBandwidthEstimator=function(){this.estimateByStreamId_={}},shaka.offline.StreamBandwidthEstimator.prototype.addVariant=function(e){var t,a,r=e.audio,n=e.video;r&&!n&&this.setBitrate_(r.id,r.bandwidth||e.bandwidth),!r&&n&&this.setBitrate_(n.id,n.bandwidth||e.bandwidth),r&&n&&(t=r.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_,(a=n.bandwidth||e.bandwidth-t)<=0&&(shaka.log.warning("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),a=e.bandwidth),this.setBitrate_(r.id,t),this.setBitrate_(n.id,a))},shaka.offline.StreamBandwidthEstimator.prototype.setBitrate_=function(e,t){this.estimateByStreamId_[e]=t},shaka.offline.StreamBandwidthEstimator.prototype.addText=function(e){this.estimateByStreamId_[e.id]=shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_},shaka.offline.StreamBandwidthEstimator.prototype.addImage=function(e){this.estimateByStreamId_[e.id]=e.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_},shaka.offline.StreamBandwidthEstimator.prototype.getSegmentEstimate=function(e,t){t=t.endTime-t.startTime;return this.getEstimate_(e)*t},shaka.offline.StreamBandwidthEstimator.prototype.getInitSegmentEstimate=function(e){return.5*this.getEstimate_(e)},shaka.offline.StreamBandwidthEstimator.prototype.getEstimate_=function(e){return null==(e=this.estimateByStreamId_[e])&&(e=0,shaka.log.error("Asking for bitrate of stream not given to the estimator")),0==e&&shaka.log.warning("Using bitrate of 0, this stream won't affect progress"),e},shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_=393216,shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_=52,shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_=2048,shaka.offline.Storage=function(e){var o=this;if(e&&e.constructor!=shaka.Player)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.LOCAL_PLAYER_INSTANCE_REQUIRED);this.networkingEngine_=this.config_=null,e?(this.config_=e.getSharedConfiguration(),this.networkingEngine_=e.getNetworkingEngine(),goog.asserts.assert(this.networkingEngine_,"Storage should not be initialized with a player that had |destroy| called on it.")):(this.config_=shaka.util.PlayerConfiguration.createDefault(),this.networkingEngine_=new shaka.net.NetworkingEngine),this.segmentsFromStore_=[],this.openOperations_=[],this.openDownloadManagers_=[];var s=!e;this.destroyer_=new shaka.util.Destroyer(function(){var t,a,r,n,i;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return e.yield(Promise.all(o.openDownloadManagers_.map(function(e){return e.abortAll()})),2);case 2:for(t=function(){},a=[],r=$jscomp.makeIterator(o.openOperations_),n=r.next();!n.done;n=r.next())i=n.value,a.push(i.then(t,t));return e.yield(Promise.all(a),3);case 3:if(s)return e.yield(o.networkingEngine_.destroy(),4);e.jumpTo(4);break;case 4:o.config_=null,o.networkingEngine_=null,e.jumpToEnd()}})})},shaka.offline.Storage.support=function(){return!!shaka.util.Platform.supportsMediaSource()&&shaka.offline.StorageMuxer.support()},shaka.offline.Storage.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.offline.Storage.prototype.configure=function(e,t){return goog.asserts.assert("object"==(void 0===e?"undefined":_typeof(e))||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof e&&(e=shaka.util.ConfigUtils.convertToConfigObject(e,t)),goog.asserts.assert("object"==(void 0===e?"undefined":_typeof(e)),"Should be an object!"),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(shaka.Deprecate.deprecateFeature(4,"manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),goog.asserts.assert(this.config_,"Cannot reconfigure stroage after calling destroy."),shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,e)},shaka.offline.Storage.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var e=shaka.util.PlayerConfiguration.createDefault();return shaka.util.PlayerConfiguration.mergeConfigObjects(e,this.config_,shaka.util.PlayerConfiguration.createDefault()),e},shaka.offline.Storage.prototype.getNetworkingEngine=function(){return this.networkingEngine_},shaka.offline.Storage.prototype.store=function(a,e,r){var n=this,i=(goog.asserts.assert(this.networkingEngine_,"Cannot call |downloadManifest_| after calling |destroy|."),this.getConfiguration()),t=new shaka.offline.DownloadManager(this.networkingEngine_),o=(this.openDownloadManagers_.push(t),e=this.store_(a,e||{},function(){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(goog.asserts.assert(n.networkingEngine_,"Should not call |store| after |destroy|"),e.yield(shaka.media.ManifestParser.getFactory(a,n.networkingEngine_,i.manifest.retryParameters,r||null),2)):(t=e.yieldResult,e.return(shaka.util.Functional.callFactory(t)))})},i,t),new shaka.util.AbortableOperation(e,function(){return t.abortAll()}));return o.finally(function(){shaka.util.ArrayUtils.remove(n.openDownloadManagers_,t)}),o.then=function(e){return shaka.Deprecate.deprecateFeature(4,"shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},this.startAbortableOperation_(o)},shaka.offline.Storage.prototype.getStoreInProgress=function(){return shaka.Deprecate.deprecateFeature(4,"shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},shaka.offline.Storage.prototype.store_=function(t,a,r,n,i){var o,s,l,u,c,d,h,p,f,m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return m.requireSupport_(),s=o=null,l=new shaka.offline.StorageMuxer,c=u=null,e.setCatchFinallyBlocks(2,3),e.yield(r(),5);case 5:return o=e.yieldResult,e.yield(m.parseManifest(t,o,n),6);case 6:if(d=e.yieldResult,m.ensureNotDestroyed_(),!d.presentationTimeline.isLive()&&!d.presentationTimeline.isInProgress())return e.yield(m.createDrmEngine(d,function(e){c=c||e},n),7);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.CANNOT_STORE_LIVE_OFFLINE,t);case 7:if(s=e.yieldResult,m.ensureNotDestroyed_(),c)throw c;return e.yield(m.filterManifest_(d,s,n),8);case 8:return e.yield(l.init(),9);case 9:return m.ensureNotDestroyed_(),e.yield(l.getActive(),10);case 10:return u=e.yieldResult,m.ensureNotDestroyed_(),goog.asserts.assert(s,"drmEngine should be non-null here."),e.yield(m.downloadManifest_(u.cell,s,d,t,a,n,i),11);case 11:if(h=e.yieldResult,m.ensureNotDestroyed_(),c)throw c;return e.yield(u.cell.addManifests([h]),12);case 12:return p=e.yieldResult,m.ensureNotDestroyed_(),p=shaka.offline.OfflineUri.manifest(u.path.mechanism,u.path.cell,p[0]),e.return(shaka.offline.StoredContentUtils.fromManifestDB(p,h));case 3:return e.enterFinallyBlock(),m.segmentsFromStore_=[],e.yield(l.destroy(),13);case 13:if(o)return e.yield(o.stop(),14);e.jumpTo(14);break;case 14:if(s)return e.yield(s.destroy(),16);e.jumpTo(16);break;case 16:e.leaveFinallyBlock(0);break;case 2:if(f=e.enterCatchBlock(),u)return e.yield(u.cell.removeSegments(m.segmentsFromStore_,function(){}),18);e.jumpTo(18);break;case 18:throw c||f}})},shaka.offline.Storage.prototype.filterManifest_=function(t,a,r){var n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return n=shaka.util.StreamUtils,o={width:1/0,height:1/0},n.filterByRestrictions(t,r.restrictions,o),r.useMediaCapabilities?e.yield(n.filterManifestByMediaCapabilities(t,r.offline.usePersistentLicense),3):e.yield(n.filterManifestByMediaSource(t),4);case 4:n.filterManifestByDrm(t,a),e.jumpTo(3);break;case 3:for(i=[],o=r.preferredAudioChannelCount,E=r.preferredVideoCodecs,s=r.preferredAudioCodec,n.chooseCodecsAndFilterManifest(t,E,s,o),l=$jscomp.makeIterator(t.variants),u=l.next();!u.done;u=l.next())c=u.value,goog.asserts.assert(n.isPlayable(c),'We should have already filtered by "is playable"'),i.push(n.variantToTrack(c));for(d=$jscomp.makeIterator(t.textStreams),h=d.next();!h.done;h=d.next())p=h.value,i.push(n.textStreamToTrack(p));for(f=$jscomp.makeIterator(t.imageStreams),m=f.next();!m.done;m=f.next())g=m.value,i.push(n.imageStreamToTrack(g));return e.yield(r.offline.trackSelectionCallback(i),6);case 6:for(y=e.yieldResult,v=t.presentationTimeline.getDuration(),_=0,k=$jscomp.makeIterator(y),b=k.next();!b.done;b=k.next())S=b.value,S=S.bandwidth*v/8,_+=S;return e.setCatchFinallyBlocks(7),e.yield(r.offline.downloadSizeCallback(_),9);case 9:if(!e.yieldResult)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_LIMIT_REACHED);e.leaveTryBlock(8);break;case 7:if((E=e.enterCatchBlock())instanceof shaka.util.Error)throw E;throw shaka.log.warning("downloadSizeCallback has produced an unexpected error",E),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.DOWNLOAD_SIZE_CALLBACK_ERROR);case 8:for(T=new Set,x=new Set,A=new Set,P=$jscomp.makeIterator(y),b=P.next();!b.done;b=P.next())"variant"==(C=b.value).type&&T.add(C.id),"text"==C.type&&x.add(C.id),"image"==C.type&&A.add(C.id);t.variants=t.variants.filter(function(e){return T.has(e.id)}),t.textStreams=t.textStreams.filter(function(e){return x.has(e.id)}),t.imageStreams=t.imageStreams.filter(function(e){return A.has(e.id)}),shaka.offline.Storage.validateManifest_(t),e.jumpToEnd()}})},shaka.offline.Storage.prototype.downloadManifest_=function(t,a,r,n,i,o,s){var l,u,c,d,h,p,f,m,g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return l=shaka.offline.StoredContentUtils.fromManifest(n,r,0,i),u=o.offline.progressCallback,c=function(e,t){l.size=t,u(l,e)},p=function(e,t){d&&o.offline.usePersistentLicense&&h==t&&a.newInitData("cenc",e)},s.setCallbacks(c,p),c=r.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}),p=r.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})}),h=null,(d=c&&!p)&&(p=a.getDrmInfo(),h=shaka.offline.Storage.defaultSystemIds_.get(p.keySystem)),e.setFinallyBlock(2),f=p=g.createOfflineManifest_(s,t,a,r,n,i,o),e.yield(s.waitToFinish(),4);case 4:if(f.size=e.yieldResult,p.expiration=a.getExpiration(),m=a.getSessionIds(),p.sessionIds=o.offline.usePersistentLicense?m:[],c&&o.offline.usePersistentLicense&&!m.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NO_INIT_DATA_FOR_OFFLINE);return e.return(p);case 2:return e.enterFinallyBlock(),e.yield(s.destroy(),5);case 5:e.leaveFinallyBlock(0)}})},shaka.offline.Storage.prototype.remove=function(e){return this.startOperation_(this.remove_(e))},shaka.offline.Storage.prototype.remove_=function(t){var a,r,n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(s.requireSupport_(),null!=(i=shaka.offline.OfflineUri.parse(t))&&i.isManifest())return a=i,r=new shaka.offline.StorageMuxer,e.setFinallyBlock(2),e.yield(r.init(),4);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,t);case 4:return e.yield(r.getCell(a.mechanism(),a.cell()),5);case 5:return n=e.yieldResult,e.yield(n.getManifests([a.key()]),6);case 6:return i=e.yieldResult,o=i[0],e.yield(Promise.all([s.removeFromDRM_(a,o,r),s.removeFromStorage_(n,a,o)]),2);case 2:return e.enterFinallyBlock(),e.yield(r.destroy(),8);case 8:e.leaveFinallyBlock(0)}})},shaka.offline.Storage.getCapabilities_=function(e,t){for(var a=shaka.util.MimeUtils,r=[],n=$jscomp.makeIterator(e.streams),i=n.next();!i.done;i=n.next())i=i.value,t&&"video"==i.type?r.push({contentType:a.getFullType(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||r.push({contentType:a.getFullType(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return r},shaka.offline.Storage.prototype.removeFromDRM_=function(e,t,a){var r=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return goog.asserts.assert(r.networkingEngine_,"Cannot be destroyed"),e.yield(shaka.offline.Storage.deleteLicenseFor_(r.networkingEngine_,r.config_.drm,a,t),0)})},shaka.offline.Storage.prototype.removeFromStorage_=function(e,t,a){var r=this,n=shaka.offline.Storage.getAllSegmentIds_(a),i=n.length+1,o=0,s=shaka.offline.StoredContentUtils.fromManifestDB(t,a);return a=function(e){o+=1,r.config_.offline.progressCallback(s,o/i)},Promise.all([e.removeSegments(n,a),e.removeManifests([t.key()],a)])},shaka.offline.Storage.prototype.removeEmeSessions=function(){return this.startOperation_(this.removeEmeSessions_())},shaka.offline.Storage.prototype.removeEmeSessions_=function(){var t,a,r,n,i,o,s,l,u,c,d,h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return h.requireSupport_(),goog.asserts.assert(h.networkingEngine_,"Cannot be destroyed"),t=h.networkingEngine_,a=h.config_.drm,r=new shaka.offline.StorageMuxer,n=new shaka.offline.SessionDeleter,i=!1,e.setFinallyBlock(2),e.yield(r.init(),4);case 4:o=[],r.forEachEmeSessionCell(function(e){return o.push(e)}),s=$jscomp.makeIterator(o),l=s.next();case 5:if(l.done){e.jumpTo(2);break}return u=l.value,e.yield(u.getAll(),8);case 8:return c=e.yieldResult,e.yield(n.delete(a,t,c),9);case 9:return d=e.yieldResult,e.yield(u.remove(d),10);case 10:d.length!=c.length&&(i=!0),l=s.next(),e.jumpTo(5);break;case 2:return e.enterFinallyBlock(),e.yield(r.destroy(),11);case 11:e.leaveFinallyBlock(3);break;case 3:return e.return(!i)}})},shaka.offline.Storage.prototype.list=function(){return this.startOperation_(this.list_())},shaka.offline.Storage.prototype.list_=function(){var r,t,n,a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a.requireSupport_(),r=[],t=new shaka.offline.StorageMuxer,e.setFinallyBlock(2),e.yield(t.init(),4);case 4:return n=Promise.resolve(),t.forEachCell(function(a,t){n=n.then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(t.getAllManifests(),2);e.yieldResult.forEach(function(e,t){t=shaka.offline.OfflineUri.manifest(a.mechanism,a.cell,t),t=shaka.offline.StoredContentUtils.fromManifestDB(t,e);r.push(t)}),e.jumpToEnd()})})}),e.yield(n,2);case 2:return e.enterFinallyBlock(),e.yield(t.destroy(),6);case 6:e.leaveFinallyBlock(3);break;case 3:return e.return(r)}})},shaka.offline.Storage.prototype.parseManifest=function(t,a,r){var n,i,o,s=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return n=null,o=s.networkingEngine_,goog.asserts.assert(o,"Should be initialized!"),o={networkingEngine:o,modifyManifestRequest:function(e,t){},modifySegmentRequest:function(e,t){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(e){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){n=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},a.configure(r.manifest),s.ensureNotDestroyed_(),e.yield(a.start(t,o),2);if(3!=e.nextAddress)return i=e.yieldResult,s.ensureNotDestroyed_(),o=shaka.offline.Storage.getAllStreamsFromManifest_(i),e.yield(Promise.all(shaka.util.Iterables.map(o,function(e){return e.createSegmentIndex()})),3);if(s.ensureNotDestroyed_(),n)throw n;return e.return(i)})},shaka.offline.Storage.prototype.createDrmEngine=function(t,a,r){var n,i=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return goog.asserts.assert(i.networkingEngine_,"Cannot call |createDrmEngine| after |destroy|"),(n=new shaka.media.DrmEngine({netEngine:i.networkingEngine_,onError:a,onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),e.yield(n.initForStorage(t.variants,r.offline.usePersistentLicense,r.useMediaCapabilities),2);case 2:return e.yield(n.setServerCertificate(),3);case 3:return e.yield(n.createOrLoad(),4);case 4:return e.return(n)}})},shaka.offline.Storage.prototype.createOfflineManifest_=function(e,t,a,r,n,i,o){var s=new shaka.offline.StreamBandwidthEstimator;return e=this.createStreams_(e,t,s,a,r,o),o=o.offline.usePersistentLicense,(t=a.getDrmInfo())&&o&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:n,duration:r.presentationTimeline.getDuration(),size:0,expiration:a.getExpiration(),streams:e,sessionIds:o?a.getSessionIds():[],drmInfo:t,appMetadata:i}},shaka.offline.Storage.prototype.createStreams_=function(e,t,a,r,n,i){for(var o=(r=$jscomp.makeIterator(n.variants)).next();!o.done;o=r.next())a.addVariant(o.value);for(o=(r=$jscomp.makeIterator(n.textStreams)).next();!o.done;o=r.next())a.addText(o.value);for(o=(r=$jscomp.makeIterator(n.imageStreams)).next();!o.done;o=r.next())a.addImage(o.value);(o=new Map).set(null,Promise.resolve(null));var s=new Map,l=shaka.offline.Storage.getAllStreamsFromManifest_(n);r=new Map;for(var u=(l=$jscomp.makeIterator(l)).next();!u.done;u=l.next()){var u=u.value,c=this.createStream_(e,t,a,n,u,i,o,s);r.set(u.id,c)}for(o=(e=$jscomp.makeIterator(n.variants)).next();!o.done;o=e.next())(t=o.value).audio&&r.get(t.audio.id).variantIds.push(t.id),t.video&&r.get(t.video.id).variantIds.push(t.id);return Array.from(r.values())},shaka.offline.Storage.prototype.createStream_=function(e,t,a,r,o,s,l,u){var c=this,d={id:o.id,originalId:o.originalId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout},h=o.id;return r=r.presentationTimeline.getSegmentAvailabilityStart(),shaka.offline.Storage.forEachSegment_(o,r,function(r){var n=c.getInitSegmentDbKey_(e,h,o.id,t,a,r.initSegmentReference,s,l),i=c.getSegmentDbKey_(e,h,o.id,t,a,r,s,u);e.queueWork(h,function(){var t,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(n,2):3!=e.nextAddress?(t=e.yieldResult,e.yield(i,3)):(a=e.yieldResult,d.segments.push({initSegmentKey:t,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,dataKey:a}),void e.jumpToEnd())})})}),d},shaka.offline.Storage.prototype.getInitSegmentDbKey_=function(e,t,a,r,n,i,o,s){var l=this;return s.has(i)?s.get(i):(o=shaka.util.Networking.createSegmentRequest(i.getUris(),i.startByte,i.endByte,o.streaming.retryParameters),e=e.queue(t,o,n.getInitSegmentEstimate(a),!0,function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(r.addSegments([{data:t}]),2):(a=e.yieldResult,l.segmentsFromStore_.push(a[0]),e.return(a[0]))})}),s.set(i,e),e)},shaka.offline.Storage.prototype.getSegmentDbKey_=function(e,t,a,r,n,i,o,s){var l=this,u=[i.getUris()[0],i.startByte,i.endByte].join("-");return s.has(u)?s.get(u):(o=shaka.util.Networking.createSegmentRequest(i.getUris(),i.startByte,i.endByte,o.streaming.retryParameters),e=e.queue(t,o,n.getSegmentEstimate(a,i),!1,function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?e.yield(r.addSegments([{data:t}]),2):(a=e.yieldResult,l.segmentsFromStore_.push(a[0]),e.return(a[0]))})}),s.set(u,e),e)},shaka.offline.Storage.forEachSegment_=function(e,t,a){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)a(r),r=e.segmentIndex.get(++t)},shaka.offline.Storage.prototype.ensureNotDestroyed_=function(){if(this.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED)},shaka.offline.Storage.prototype.requireSupport_=function(){if(!shaka.offline.Storage.support())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED)},shaka.offline.Storage.prototype.startOperation_=function(t){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a.openOperations_.push(t),e.setFinallyBlock(2),e.yield(t,4)):2!=e.nextAddress?e.return(e.yieldResult):(e.enterFinallyBlock(),shaka.util.ArrayUtils.remove(a.openOperations_,t),e.leaveFinallyBlock(0))})},shaka.offline.Storage.prototype.startAbortableOperation_=function(e){var t=this,a=e.promise;return this.openOperations_.push(a),e.finally(function(){shaka.util.ArrayUtils.remove(t.openOperations_,a)})},shaka.offline.Storage.getAllSegmentIds_=function(e){for(var t=[],a=(e=$jscomp.makeIterator(e.streams)).next();!a.done;a=e.next())for(var r=(a=$jscomp.makeIterator(a.value.segments)).next();!r.done;r=a.next())null!=(r=r.value).initSegmentKey&&t.push(r.initSegmentKey),t.push(r.dataKey);return t},shaka.offline.Storage.deleteAll=function(){var t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(t=new shaka.offline.StorageMuxer,e.setFinallyBlock(2),e.yield(t.erase(),2)):5!=e.nextAddress?(e.enterFinallyBlock(),e.yield(t.destroy(),5)):e.leaveFinallyBlock(0)})},shaka.offline.Storage.deleteLicenseFor_=function(t,a,r,n){var i,o,s,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?n.drmInfo?(i=r.getEmeSessionCell(),o=n.sessionIds.map(function(e){return{sessionId:e,keySystem:n.drmInfo.keySystem,licenseUri:n.drmInfo.licenseServerUri,serverCertificate:n.drmInfo.serverCertificate,audioCapabilities:shaka.offline.Storage.getCapabilities_(n,!1),videoCapabilities:shaka.offline.Storage.getCapabilities_(n,!0)}}),s=new shaka.offline.SessionDeleter,e.yield(s.delete(a,t,o),2)):e.return():3!=e.nextAddress?(l=e.yieldResult,e.yield(i.remove(l),3)):e.yield(i.add(o.filter(function(e){return!l.includes(e.sessionId)})),0)})},shaka.offline.Storage.getAllStreamsFromManifest_=function(e){for(var t=new Set,a=$jscomp.makeIterator(e.textStreams),r=a.next();!r.done;r=a.next())t.add(r.value);for(r=(a=$jscomp.makeIterator(e.imageStreams)).next();!r.done;r=a.next())t.add(r.value);for(a=(e=$jscomp.makeIterator(e.variants)).next();!a.done;a=e.next())(a=a.value).audio&&t.add(a.audio),a.video&&t.add(a.video);return t},shaka.offline.Storage.validateManifest_=function(e){var t=new Set(e.variants.map(function(e){return e.video})),a=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&shaka.log.warning("Multiple video tracks selected to be stored");for(var r=(t=$jscomp.makeIterator(a)).next();!r.done;r=t.next())for(var r=r.value,n=$jscomp.makeIterator(a),i=n.next();!i.done;i=n.next())r!=(i=i.value)&&r.language==i.language&&shaka.log.warning("Similar audio tracks were selected to be stored",r.id,i.id);for(t=(a=$jscomp.makeIterator(e)).next();!t.done;t=a.next())for(t=t.value,n=(r=$jscomp.makeIterator(e)).next();!n.done;n=r.next())t!=(n=n.value)&&t.language==n.language&&shaka.log.warning("Similar text tracks were selected to be stored",t.id,n.id)},goog.exportSymbol("shaka.offline.Storage",shaka.offline.Storage),goog.exportProperty(shaka.offline.Storage,"deleteAll",shaka.offline.Storage.deleteAll),goog.exportProperty(shaka.offline.Storage.prototype,"list",shaka.offline.Storage.prototype.list),goog.exportProperty(shaka.offline.Storage.prototype,"removeEmeSessions",shaka.offline.Storage.prototype.removeEmeSessions),goog.exportProperty(shaka.offline.Storage.prototype,"remove",shaka.offline.Storage.prototype.remove),goog.exportProperty(shaka.offline.Storage.prototype,"getStoreInProgress",shaka.offline.Storage.prototype.getStoreInProgress),goog.exportProperty(shaka.offline.Storage.prototype,"store",shaka.offline.Storage.prototype.store),goog.exportProperty(shaka.offline.Storage.prototype,"getNetworkingEngine",shaka.offline.Storage.prototype.getNetworkingEngine),goog.exportProperty(shaka.offline.Storage.prototype,"getConfiguration",shaka.offline.Storage.prototype.getConfiguration),goog.exportProperty(shaka.offline.Storage.prototype,"configure",shaka.offline.Storage.prototype.configure),goog.exportProperty(shaka.offline.Storage.prototype,"destroy",shaka.offline.Storage.prototype.destroy),goog.exportProperty(shaka.offline.Storage,"support",shaka.offline.Storage.support),shaka.offline.Storage.defaultSystemIds_=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb"),shaka.Player.registerSupportPlugin("offline",shaka.offline.Storage.support),shaka.polyfill=function(){},shaka.polyfill.installAll=function(){for(var e=$jscomp.makeIterator(shaka.polyfill.polyfills_),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(e){shaka.log.alwaysWarn("Error installing polyfill!",e)}}},shaka.polyfill.register=function(e,t){for(var a={priority:t||0,callback:e},r=$jscomp.makeIterator(shaka.util.Iterables.enumerate(shaka.polyfill.polyfills_)),n=r.next();!n.done;n=r.next()){var i=(n=n.value).i;if(n.item.priority<a.priority)return void shaka.polyfill.polyfills_.splice(i,0,a)}shaka.polyfill.polyfills_.push(a)},goog.exportSymbol("shaka.polyfill",shaka.polyfill),goog.exportProperty(shaka.polyfill,"register",shaka.polyfill.register),goog.exportProperty(shaka.polyfill,"installAll",shaka.polyfill.installAll),shaka.polyfill.polyfills_=[],shaka.polyfill.EncryptionScheme=function(){},shaka.polyfill.EncryptionScheme.install=function(){EncryptionSchemePolyfills.install()},shaka.polyfill.register(shaka.polyfill.EncryptionScheme.install,-2),shaka.polyfill.Fullscreen=function(){},shaka.polyfill.Fullscreen.install=function(){var e;window.Document&&((e=Element.prototype).requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),e=shaka.polyfill.Fullscreen.proxyEvent_,document.addEventListener("webkitfullscreenchange",e),document.addEventListener("webkitfullscreenerror",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("mozfullscreenerror",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("MSFullscreenError",e))},shaka.polyfill.Fullscreen.proxyEvent_=function(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),a=document.createEvent("Event");a.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(a)},shaka.polyfill.register(shaka.polyfill.Fullscreen.install),shaka.polyfill.MathRound=function(){},shaka.polyfill.MathRound.install=function(){shaka.log.debug("mathRound.install");var a,e=shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_+1;Math.round(e)!=e&&(shaka.log.debug("polyfill Math.round"),a=Math.round,Math.round=function(e){var t=e;return t=e<=shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_?a(e):t})},shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_=4503599627370496,shaka.polyfill.register(shaka.polyfill.MathRound.install),shaka.polyfill.MediaCapabilities=function(){},shaka.polyfill.MediaCapabilities.install=function(){shaka.log.debug("MediaCapabilities: install"),!shaka.util.Platform.isChromecast()&&navigator.mediaCapabilities?shaka.log.debug("MediaCapabilities: Native mediaCapabilities support found."):window.MediaSource?(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),navigator.mediaCapabilities.decodingInfo=shaka.polyfill.MediaCapabilities.decodingInfo_):shaka.log.debug("MediaSource must be available to install mediaCapabilities ","polyfill.")},shaka.polyfill.MediaCapabilities.decodingInfo_=function(t){var a,r,n,i,o,s,l,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return(a={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},t&&(!t.video||(r=t.video.contentType,MediaSource.isTypeSupported(r)))&&(!t.audio||(r=t.audio.contentType,MediaSource.isTypeSupported(r))))?t.keySystemConfiguration?(n=t.keySystemConfiguration,i=[],o=[],n.audio&&(s={robustness:n.audio.robustness||"",contentType:t.audio.contentType},i.push(s)),n.video&&(s={robustness:n.video.robustness||"",contentType:t.video.contentType},o.push(s)),l={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(l.audioCapabilities=i),o.length&&(l.videoCapabilities=o),e.setCatchFinallyBlocks(3),e.yield(navigator.requestMediaKeySystemAccess(n.keySystem,[l]),5)):(a.supported=!0,e.return(Promise.resolve(a))):e.return(a);case 5:u=e.yieldResult,e.leaveTryBlock(4);break;case 3:e.enterCatchBlock(),shaka.log.info("navigator.requestMediaKeySystemAccess failed.");case 4:u&&(a.supported=!0,a.keySystemAccess=u);case 2:return e.return(a)}})},shaka.polyfill.register(shaka.polyfill.MediaCapabilities.install,-1),shaka.polyfill.MediaSource=function(){},shaka.polyfill.MediaSource.install=function(){shaka.log.debug("MediaSource.install");var e=shaka.util.Platform.safariVersion();window.MediaSource?window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(shaka.log.info("Patching Chromecast MSE bugs."),shaka.polyfill.MediaSource.patchCastIsTypeSupported_()):e?(shaka.polyfill.MediaSource.rejectTsContent_(),e<=12?(shaka.log.info("Patching Safari 11 & 12 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_(),shaka.polyfill.MediaSource.patchRemovalRange_()):(shaka.log.info("Patching Safari 13 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_())):shaka.util.Platform.isTizen2()||shaka.util.Platform.isTizen3()||shaka.util.Platform.isTizen4()?(shaka.log.info("Rejecting Opus."),shaka.polyfill.MediaSource.rejectCodec_("opus")):shaka.log.info("Using native MSE as-is."):shaka.log.info("No MSE implementation available."),window.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(shaka.log.info("Patching vp09 support queries."),shaka.polyfill.MediaSource.patchVp09_())},shaka.polyfill.MediaSource.stubAbort_=function(){var r=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var t=[],a=0;a<arguments.length;++a)t[+a]=arguments[a];return(t=r.apply(this,t)).abort=function(){},t}},shaka.polyfill.MediaSource.patchRemovalRange_=function(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(e,t){return a.call(this,e,t-.001)}},shaka.polyfill.MediaSource.rejectTsContent_=function(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1].toLowerCase()&&t(e)}},shaka.polyfill.MediaSource.rejectCodec_=function(t){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return shaka.util.MimeUtils.getCodecBase(e)!=t&&a(e)}},shaka.polyfill.MediaSource.patchCastIsTypeSupported_=function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){var t=e.split(/ *; */);return t.shift(),t.some(function(e){return e.startsWith("codecs=")})?cast.__platform__.canDisplayType(e):a(e)}},shaka.polyfill.MediaSource.patchVp09_=function(){var i=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){var t,a,r=e.split(/ *; */),n=r.findIndex(function(e){return e.startsWith("codecs=")});return n<0||0<=(a=(t=r[n].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/)).findIndex(function(e){return e.startsWith("vp09")}))&&(t[a]="vp9",r[n]='codecs="'+t.join(",")+'"',e=r.join("; ")),i(e)}},shaka.polyfill.register(shaka.polyfill.MediaSource.install),shaka.polyfill.Orientation=function(){},shaka.polyfill.Orientation.install=function(){screen.orientation||null!=window.orientation&&shaka.polyfill.Orientation.installBasedOnWindowMethods_()},shaka.polyfill.Orientation.installBasedOnWindowMethods_=function(){function e(){switch(window.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new shaka.polyfill.Orientation.FakeOrientation;screen.orientation=t;e(),window.addEventListener("orientationchange",function(){e(),t.dispatchChangeEvent()})},shaka.polyfill.Orientation.FakeOrientation=function(){shaka.util.FakeEventTarget.call(this),this.type="",this.angle=0},$jscomp.inherits(shaka.polyfill.Orientation.FakeOrientation,shaka.util.FakeEventTarget),shaka.polyfill.Orientation.FakeOrientation.prototype.dispatchChangeEvent=function(){var e=new shaka.util.FakeEvent("change",{});this.dispatchEvent(e)},shaka.polyfill.Orientation.FakeOrientation.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var a=!1;switch(e){case"natural":a=t("default");break;case"any":a=!0,this.unlock();break;default:a=t(e)}return a?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},shaka.polyfill.Orientation.FakeOrientation.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},shaka.polyfill.register(shaka.polyfill.Orientation.install),shaka.polyfill.PatchedMediaKeysApple=function(){},shaka.polyfill.PatchedMediaKeysApple.install=function(){var e;window.HTMLVideoElement&&window.WebKitMediaKeys&&(shaka.log.info("Using Apple-prefixed EME"),e=shaka.polyfill.PatchedMediaKeysApple,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess)},shaka.polyfill.PatchedMediaKeysApple.requestMediaKeySystemAccess=function(e,t){shaka.log.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var a=shaka.polyfill.PatchedMediaKeysApple;try{var r=new a.MediaKeySystemAccess(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},shaka.polyfill.PatchedMediaKeysApple.setMediaKeys=function(e){shaka.log.debug("PatchedMediaKeysApple.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var t=shaka.polyfill.PatchedMediaKeysApple,a=this.mediaKeys;return a&&a!=e&&(goog.asserts.assert(a instanceof t.MediaKeys,"non-polyfill instance of oldMediaKeys"),a.setMedia(null)),delete this.mediaKeys,(this.mediaKeys=e)?(goog.asserts.assert(e instanceof t.MediaKeys,"non-polyfill instance of newMediaKeys"),e.setMedia(this)):Promise.resolve()},shaka.polyfill.PatchedMediaKeysApple.onWebkitNeedKey_=function(e){if(shaka.log.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),goog.asserts.assert(this.mediaKeys instanceof shaka.polyfill.PatchedMediaKeysApple.MediaKeys,"non-polyfill instance of newMediaKeys"),goog.asserts.assert(null!=e.initData,"missing init data!"),e=shaka.util.BufferUtils.toUint8(e.initData),shaka.util.BufferUtils.toDataView(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=shaka.util.StringUtils.fromUTF16(e.subarray(4),!0),e=shaka.util.StringUtils.toUTF8(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=shaka.util.BufferUtils.toArrayBuffer(e),this.dispatchEvent(t)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess=function(e,t){if(shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),(this.keySystem=e).startsWith("com.apple.fps"))for(var a=$jscomp.makeIterator(t),r=a.next();!r.done;r=a.next())if(r=this.checkConfig_(r.value))return void(this.configuration_=r);throw(a=Error("Unsupported keySystem")).name="NotSupportedError",a.code=DOMException.NOT_SUPPORTED_ERR,a},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.checkConfig_=function(e){if("required"==e.persistentState)return null;var t,a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},r=!1,n=!1;if(e.audioCapabilities)for(var i=$jscomp.makeIterator(e.audioCapabilities),o=i.next();!o.done;o=i.next())(o=o.value).contentType&&(r=!0,t=o.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,t))&&(a.audioCapabilities.push(o),n=!0);if(e.videoCapabilities)for(o=(e=$jscomp.makeIterator(e.videoCapabilities)).next();!o.done;o=e.next())(i=o.value).contentType&&(r=!0,o=i.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,o))&&(a.videoCapabilities.push(i),n=!0);return(n=r?n:WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"))?a:null},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new shaka.polyfill.PatchedMediaKeysApple.MediaKeys(this.keySystem);return Promise.resolve(e)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.getConfiguration=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.configuration_},shaka.polyfill.PatchedMediaKeysApple.MediaKeys=function(e){shaka.log.debug("PatchedMediaKeysApple.MediaKeys"),this.nativeMediaKeys_=new WebKitMediaKeys(e),this.eventManager_=new shaka.util.EventManager},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.createSession=function(e){if(shaka.log.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new shaka.polyfill.PatchedMediaKeysApple.MediaKeySession(this.nativeMediaKeys_,e)},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setServerCertificate=function(e){return shaka.log.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),Promise.resolve(!1)},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setMedia=function(e){var t=this,a=shaka.polyfill.PatchedMediaKeysApple;if(this.eventManager_.removeAll(),!e)return Promise.resolve();this.eventManager_.listen(e,"webkitneedkey",a.onWebkitNeedKey_);try{return shaka.util.MediaReadyState.waitForReadyState(e,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){e.webkitSetMediaKeys(t.nativeMediaKeys_)}),Promise.resolve()}catch(e){return Promise.reject(e)}},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession=function(e,t){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession"),shaka.util.FakeEventTarget.call(this),this.nativeMediaKeySession_=null,this.nativeMediaKeys_=e,this.updatePromise_=this.generateRequestPromise_=null,this.eventManager_=new shaka.util.EventManager,this.sessionId="",this.expiration=NaN,this.closed=new shaka.util.PublicPromise,this.keyStatuses=new shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap},$jscomp.inherits(shaka.polyfill.PatchedMediaKeysApple.MediaKeySession,shaka.util.FakeEventTarget),shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.generateRequest=function(e,t){var a=this;shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.generateRequestPromise_=new shaka.util.PublicPromise;try{var r=this.nativeMediaKeys_.createSession("video/mp4",shaka.util.BufferUtils.toUint8(t));this.nativeMediaKeySession_=r,this.sessionId=r.sessionId||"",this.eventManager_.listen(this.nativeMediaKeySession_,"webkitkeymessage",function(e){return a.onWebkitKeyMessage_(e)}),this.eventManager_.listen(r,"webkitkeyadded",function(e){return a.onWebkitKeyAdded_(e)}),this.eventManager_.listen(r,"webkitkeyerror",function(e){return a.onWebkitKeyError_(e)}),this.updateKeyStatus_("status-pending")}catch(e){this.generateRequestPromise_.reject(e)}return this.generateRequestPromise_},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.load=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.update=function(e){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.updatePromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_.update(shaka.util.BufferUtils.toUint8(e))}catch(e){this.updatePromise_.reject(e)}return this.updatePromise_},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.close=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(e){this.closed.reject(e)}return this.closed},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.remove=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyMessage_=function(e){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),goog.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ should be set before now!"),this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var t=null==this.keyStatuses.getStatus();e=new shaka.util.FakeEvent("message",{messageType:t?"license-request":"license-renewal",message:shaka.util.BufferUtils.toArrayBuffer(e.message)}),this.dispatchEvent(e)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyAdded_=function(e){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),goog.asserts.assert(!this.generateRequestPromise_,"Key added during generate!"),goog.asserts.assert(this.updatePromise_,"updatePromise_ should be set before now!"),this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyError_=function(e){if(shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.nativeMediaKeySession_.error,null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(e),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(e),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");break;default:this.updateKeyStatus_("internal-error")}},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.updateKeyStatus_=function(e){this.keyStatuses.setStatus(e),e=new shaka.util.FakeEvent("keystatuseschange"),this.dispatchEvent(e)},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap=function(){this.size=0,this.status_=void 0},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.setStatus=function(e){this.size=null==e?0:1,this.status_=e},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.forEach=function(e){this.status_&&e(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.get=function(e){if(this.has(e))return this.status_},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.has=function(e){var t=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return!(!this.status_||!shaka.util.BufferUtils.equal(e,t))},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysApple.install),shaka.polyfill.PatchedMediaKeysMs=function(){},shaka.polyfill.PatchedMediaKeysMs.install=function(){var e;!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(shaka.log.info("Using ms-prefixed EME v20140218"),e=shaka.polyfill.PatchedMediaKeysMs,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,HTMLMediaElement.prototype.setMediaKeys=e.MediaKeySystemAccess.setMediaKeys)},shaka.polyfill.PatchedMediaKeysMs.requestMediaKeySystemAccess=function(e,t){shaka.log.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var a=shaka.polyfill.PatchedMediaKeysMs;try{var r=new a.MediaKeySystemAccess(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},shaka.polyfill.PatchedMediaKeysMs.onMsNeedKey_=function(e){var t;shaka.log.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData&&((t=new CustomEvent("encrypted")).initDataType="cenc",t.initData=shaka.util.BufferUtils.toArrayBuffer(shaka.util.Pssh.normaliseInitData(e.initData)),this.dispatchEvent(t))},shaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess=function(e,t){shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var a=!1,r=$jscomp.makeIterator(t),n=r.next();!n.done;n=r.next()){var i,o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(n=n.value).initDataTypes,sessionTypes:["temporary"],label:n.label},s=!1;if(n.audioCapabilities)for(var l=$jscomp.makeIterator(n.audioCapabilities),u=l.next();!u.done;u=l.next())(u=u.value).contentType&&(s=!0,i=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,i))&&(o.audioCapabilities.push(u),a=!0);if(n.videoCapabilities)for(u=(l=$jscomp.makeIterator(n.videoCapabilities)).next();!u.done;u=l.next())(u=u.value).contentType&&(s=!0,i=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,i))&&(o.videoCapabilities.push(u),a=!0);if(s||(a=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),a="required"==n.persistentState?!1:a)return void(this.configuration_=o)}throw(a=Error("Unsupported keySystem")).name="NotSupportedError",a.code=DOMException.NOT_SUPPORTED_ERR,a},shaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new shaka.polyfill.PatchedMediaKeysMs.MediaKeys(this.keySystem);return Promise.resolve(e)},shaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.prototype.getConfiguration=function(){return shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.configuration_},shaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.setMediaKeys=function(e){shaka.log.debug("PatchedMediaKeysMs.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var t=shaka.polyfill.PatchedMediaKeysMs,a=this.mediaKeys;return a&&a!=e&&(goog.asserts.assert(a instanceof t.MediaKeys,"non-polyfill instance of oldMediaKeys"),a.setMedia(null)),delete this.mediaKeys,(this.mediaKeys=e)?(goog.asserts.assert(e instanceof t.MediaKeys,"non-polyfill instance of newMediaKeys"),e.setMedia(this)):Promise.resolve()},shaka.polyfill.PatchedMediaKeysMs.MediaKeys=function(e){shaka.log.debug("PatchedMediaKeysMs.MediaKeys"),this.nativeMediaKeys_=new MSMediaKeys(e),this.eventManager_=new shaka.util.EventManager},shaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.createSession=function(e){if(shaka.log.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new shaka.polyfill.PatchedMediaKeysMs.MediaKeySession(this.nativeMediaKeys_,e)},shaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.setServerCertificate=function(e){return shaka.log.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},shaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.setMedia=function(e){var t=this,a=shaka.polyfill.PatchedMediaKeysMs;if(this.eventManager_.removeAll(),!e)return Promise.resolve();this.eventManager_.listen(e,"msneedkey",a.onMsNeedKey_);try{return shaka.util.MediaReadyState.waitForReadyState(e,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){e.msSetMediaKeys(t.nativeMediaKeys_)}),Promise.resolve()}catch(e){return Promise.reject(e)}},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession=function(e,t){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession"),shaka.util.FakeEventTarget.call(this),this.nativeMediaKeySession_=null,this.nativeMediaKeys_=e,this.updatePromise_=this.generateRequestPromise_=null,this.eventManager_=new shaka.util.EventManager,this.sessionId="",this.expiration=NaN,this.closed=new shaka.util.PublicPromise,this.keyStatuses=new shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap},$jscomp.inherits(shaka.polyfill.PatchedMediaKeysMs.MediaKeySession,shaka.util.FakeEventTarget),shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.generateRequest=function(e,t){var a=this;shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.generateRequestPromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_=this.nativeMediaKeys_.createSession("video/mp4",shaka.util.BufferUtils.toUint8(t),null),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeymessage",function(e){return a.onMsKeyMessage_(e)}),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeyadded",function(e){return a.onMsKeyAdded_(e)}),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeyerror",function(e){return a.onMsKeyError_(e)}),this.updateKeyStatus_("status-pending")}catch(e){this.generateRequestPromise_.reject(e)}return this.generateRequestPromise_},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.load=function(){return shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.update=function(e){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.updatePromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_.update(shaka.util.BufferUtils.toUint8(e))}catch(e){this.updatePromise_.reject(e)}return this.updatePromise_},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.close=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(e){this.closed.reject(e)}return this.closed},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.remove=function(){return shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyMessage_=function(e){shaka.log.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),goog.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ not set in onMsKeyMessage_"),this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var t=null==this.keyStatuses.getStatus();e=new shaka.util.FakeEvent("message",{messageType:t?"license-request":"license-renewal",message:shaka.util.BufferUtils.toArrayBuffer(e.message)}),this.dispatchEvent(e)},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyAdded_=function(e){shaka.log.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.generateRequestPromise_?(shaka.log.debug("Simulating completion for a PR persistent license."),goog.asserts.assert(!this.updatePromise_,"updatePromise_ and generateRequestPromise_ set in onMsKeyAdded_"),this.updateKeyStatus_("usable"),this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null):(goog.asserts.assert(this.updatePromise_,"updatePromise_ not set in onMsKeyAdded_"),this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null))},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyError_=function(e){if(shaka.log.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.nativeMediaKeySession_.error,null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(e),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(e),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");break;default:this.updateKeyStatus_("internal-error")}},shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.updateKeyStatus_=function(e){this.keyStatuses.setStatus(e),e=new shaka.util.FakeEvent("keystatuseschange"),this.dispatchEvent(e)},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap=function(){this.size=0,this.status_=void 0},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.setStatus=function(e){this.size=null==e?0:1,this.status_=e},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.forEach=function(e){this.status_&&e(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.get=function(e){if(this.has(e))return this.status_},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.has=function(e){var t=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return!(!this.status_||!shaka.util.BufferUtils.equal(e,t))},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysMs.install),shaka.polyfill.PatchedMediaKeysNop=function(){},shaka.polyfill.PatchedMediaKeysNop.install=function(){var e;!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(shaka.log.info("EME not available."),e=shaka.polyfill.PatchedMediaKeysNop,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess)},shaka.polyfill.PatchedMediaKeysNop.requestMediaKeySystemAccess=function(e,t){return shaka.log.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess'),Promise.reject(Error("The key system specified is not supported."))},shaka.polyfill.PatchedMediaKeysNop.setMediaKeys=function(e){return shaka.log.debug("PatchedMediaKeysNop.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys'),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))},shaka.polyfill.PatchedMediaKeysNop.MediaKeys=function(){throw new TypeError("Illegal constructor.")},shaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.createSession=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.setServerCertificate=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess=function(){throw this.keySystem="",new TypeError("Illegal constructor.")},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.getConfiguration=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.createMediaKeys=function(){},shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysNop.install,-10),shaka.polyfill.PatchedMediaKeysWebkit=function(){},shaka.polyfill.PatchedMediaKeysWebkit.install=function(){var e=shaka.polyfill.PatchedMediaKeysWebkit;if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)shaka.log.info("Using webkit-prefixed EME v0.1b"),e.prefix_="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;shaka.log.info("Using nonprefixed EME v0.1b")}goog.asserts.assert(HTMLMediaElement.prototype[e.prefixApi_("generateKeyRequest")],"PatchedMediaKeysWebkit APIs not available!"),navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess}},shaka.polyfill.PatchedMediaKeysWebkit.prefixApi_=function(e){var t=shaka.polyfill.PatchedMediaKeysWebkit.prefix_;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e},shaka.polyfill.PatchedMediaKeysWebkit.requestMediaKeySystemAccess=function(e,t){shaka.log.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var a=shaka.polyfill.PatchedMediaKeysWebkit;try{var r=new a.MediaKeySystemAccess(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},shaka.polyfill.PatchedMediaKeysWebkit.setMediaKeys=function(e){shaka.log.debug("PatchedMediaKeysWebkit.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var t=shaka.polyfill.PatchedMediaKeysWebkit,a=this.mediaKeys;return a&&a!=e&&(goog.asserts.assert(a instanceof t.MediaKeys,"non-polyfill instance of oldMediaKeys"),a.setMedia(null)),delete this.mediaKeys,(this.mediaKeys=e)&&(goog.asserts.assert(e instanceof t.MediaKeys,"non-polyfill instance of newMediaKeys"),e.setMedia(this)),Promise.resolve()},shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_=function(){var e=document.getElementsByTagName("video");return e.length?e[0]:document.createElement("video")},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess=function(e,t){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess");var a=!1;"org.w3.clearkey"==(this.internalKeySystem_=this.keySystem=e)&&(a=!(this.internalKeySystem_="webkit-org.w3.clearkey"));for(var r=!1,n=shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_(),i=$jscomp.makeIterator(t),o=i.next();!o.done;o=i.next()){var s,l={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=$jscomp.makeIterator(o.audioCapabilities),d=c.next();!d.done;d=c.next())(d=d.value).contentType&&(u=!0,s=d.contentType.split(";")[0],n.canPlayType(s,this.internalKeySystem_))&&(l.audioCapabilities.push(d),r=!0);if(o.videoCapabilities)for(d=(c=$jscomp.makeIterator(o.videoCapabilities)).next();!d.done;d=c.next())(d=d.value).contentType&&(u=!0,n.canPlayType(d.contentType,this.internalKeySystem_))&&(l.videoCapabilities.push(d),r=!0);if(u||(r=n.canPlayType("video/mp4",this.internalKeySystem_)||n.canPlayType("video/webm",this.internalKeySystem_)),"required"==o.persistentState&&(a?(l.persistentState="required",l.sessionTypes=["persistent-license"]):r=!1),r)return void(this.configuration_=l)}throw a="org.w3.clearkey"!=e&&"com.widevine.alpha"!=e?"Unsupported keySystem":"None of the requested configurations were supported.",(a=Error(a)).name="NotSupportedError",a.code=DOMException.NOT_SUPPORTED_ERR,a},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys(this.internalKeySystem_);return Promise.resolve(e)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.getConfiguration=function(){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.configuration_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys=function(e){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys"),this.keySystem_=e,this.media_=null,this.eventManager_=new shaka.util.EventManager,this.newSessions_=[],this.sessionMap_=new Map},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setMedia=function(e){var t=this,a=(this.media_=e,this.eventManager_.removeAll(),shaka.polyfill.PatchedMediaKeysWebkit.prefix_);e&&(this.eventManager_.listen(e,a+"needkey",function(e){return t.onWebkitNeedKey_(e)}),this.eventManager_.listen(e,a+"keymessage",function(e){return t.onWebkitKeyMessage_(e)}),this.eventManager_.listen(e,a+"keyadded",function(e){return t.onWebkitKeyAdded_(e)}),this.eventManager_.listen(e,a+"keyerror",function(e){return t.onWebkitKeyError_(e)}))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.createSession=function(e){if(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=shaka.polyfill.PatchedMediaKeysWebkit,a=this.media_||document.createElement("video");return a.src||(a.src="about:blank"),e=new t.MediaKeySession(a,this.keySystem_,e),this.newSessions_.push(e),e},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setServerCertificate=function(e){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitNeedKey_=function(e){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e),goog.asserts.assert(this.media_,"media_ not set in onWebkitNeedKey_");var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=shaka.util.BufferUtils.toArrayBuffer(e.initData),this.media_.dispatchEvent(t)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyMessage_=function(e){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t,a=this.findSession_(e.sessionId);a?(t=null==a.keyStatuses.getStatus(),e=new shaka.util.FakeEvent("message",{messageType:t?"licenserequest":"licenserenewal",message:e.message}),a.generated(),a.dispatchEvent(e)):shaka.log.error("Session not found",e.sessionId)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyAdded_=function(e){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),e=this.findSession_(e.sessionId),goog.asserts.assert(e,"unable to find session in onWebkitKeyAdded_"),e&&e.ready()},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyError_=function(e){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=this.findSession_(e.sessionId);goog.asserts.assert(t,"unable to find session in onWebkitKeyError_"),t&&t.handleError(e)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.findSession_=function(e){var t=this.sessionMap_.get(e);return t?(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",t),t):(t=this.newSessions_.shift())?(t.sessionId=e,this.sessionMap_.set(e,t),shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",t),t):null},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession=function(e,t,a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession"),shaka.util.FakeEventTarget.call(this),this.media_=e,this.initialized_=!1,this.updatePromise_=this.generatePromise_=null,this.keySystem_=t,this.type_=a,this.sessionId="",this.expiration=NaN,this.closed=new shaka.util.PublicPromise,this.keyStatuses=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap},$jscomp.inherits(shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession,shaka.util.FakeEventTarget),shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generated=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),this.generatePromise_&&(this.generatePromise_.resolve(),this.generatePromise_=null)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.ready=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),this.updateKeyStatus_("usable"),this.updatePromise_&&this.updatePromise_.resolve(),this.updatePromise_=null},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.handleError=function(e){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),a=e.errorCode;a.systemCode=e.systemCode,t.errorCode=a,!e.sessionId&&this.generatePromise_?(45==e.systemCode&&(t.message="Unsupported session type."),this.generatePromise_.reject(t),this.generatePromise_=null):e.sessionId&&this.updatePromise_?(this.updatePromise_.reject(t),this.updatePromise_=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?this.updateKeyStatus_("output-restricted"):1==t?this.updateKeyStatus_("expired"):this.updateKeyStatus_("internal-error"))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generate_=function(e,t){var a,r,n,i=this,o=shaka.polyfill.PatchedMediaKeysWebkit;if(this.initialized_)return Promise.reject(Error("The session is already initialized."));this.initialized_=!0;try{n="persistent-license"==this.type_?(a=shaka.util.StringUtils,t?shaka.util.BufferUtils.toUint8(a.toUTF8("LOAD_SESSION|"+t)):(goog.asserts.assert(e,"expecting init data"),r=a.toUTF8("PERSISTENT|"),shaka.util.Uint8ArrayUtils.concat(r,e))):(goog.asserts.assert("temporary"==this.type_,"expected temporary session"),goog.asserts.assert(!t,"unexpected offline session ID"),goog.asserts.assert(e,"expecting init data"),shaka.util.BufferUtils.toUint8(e)),goog.asserts.assert(n,"init data not set!")}catch(e){return Promise.reject(e)}goog.asserts.assert(null==this.generatePromise_,"generatePromise_ should be null"),this.generatePromise_=new shaka.util.PublicPromise;var s=o.prefixApi_("generateKeyRequest");try{this.media_[s](this.keySystem_,n)}catch(e){if("InvalidStateError"!=e.name)return this.generatePromise_=null,Promise.reject(e);new shaka.util.Timer(function(){try{i.media_[s](i.keySystem_,n)}catch(e){i.generatePromise_.reject(e),i.generatePromise_=null}}).tickAfter(.01)}return this.generatePromise_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update_=function(e,t){var a,r,n,i=this,o=shaka.polyfill.PatchedMediaKeysWebkit;if(this.updatePromise_)this.updatePromise_.then(function(){return i.update_(e,t)}).catch(function(){return i.update_(e,t)});else{this.updatePromise_=e,a="webkit-org.w3.clearkey"==this.keySystem_?(a=shaka.util.Uint8ArrayUtils,r=shaka.util.StringUtils.fromUTF8(t),"oct"!=(n=JSON.parse(r)).keys[0].kty&&(this.updatePromise_.reject(Error("Response is not a valid JSON Web Key Set.")),this.updatePromise_=null),r=a.fromBase64(n.keys[0].k),a.fromBase64(n.keys[0].kid)):(r=shaka.util.BufferUtils.toUint8(t),null),o=o.prefixApi_("addKey");try{this.media_[o](this.keySystem_,r,a,this.sessionId)}catch(e){this.updatePromise_.reject(e),this.updatePromise_=null}}},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.updateKeyStatus_=function(e){this.keyStatuses.setStatus(e),e=new shaka.util.FakeEvent("keystatuseschange"),this.dispatchEvent(e)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generateRequest=function(e,t){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),this.generate_(t,null)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.load=function(e){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.type_?this.generate_(null,e):Promise.reject(Error("Not a persistent session."))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update=function(e){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e),goog.asserts.assert(this.sessionId,"update without session ID");var t=new shaka.util.PublicPromise;return this.update_(t,e),t},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.close=function(){var e=shaka.polyfill.PatchedMediaKeysWebkit;if(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.type_){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;e=e.prefixApi_("cancelKeyRequest");try{this.media_[e](this.keySystem_,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.remove=function(){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.type_?Promise.reject(Error("Not a persistent session.")):this.close()},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap=function(){this.size=0,this.status_=void 0},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.setStatus=function(e){this.size=null==e?0:1,this.status_=e},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.forEach=function(e){this.status_&&e(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.get=function(e){if(this.has(e))return this.status_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.has=function(e){var t=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return!(!this.status_||!shaka.util.BufferUtils.equal(e,t))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.prefix_="",shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysWebkit.install),shaka.polyfill.PiPWebkit=function(){},shaka.polyfill.PiPWebkit.install=function(){var e,t;!window.HTMLVideoElement||(e=HTMLVideoElement.prototype).requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(t=shaka.polyfill.PiPWebkit,shaka.log.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=t.requestPictureInPicture_,Object.defineProperty(e,"disablePictureInPicture",{get:t.getDisablePictureInPicture_,set:t.setDisablePictureInPicture_,enumerable:!0,configurable:!0}),document.exitPictureInPicture=t.exitPictureInPicture_,document.addEventListener("webkitpresentationmodechanged",t.proxyEvent_,!0))},shaka.polyfill.PiPWebkit.proxyEvent_=function(e){var t=(e=e.target).webkitPresentationMode==shaka.polyfill.PiPWebkit.PIP_MODE_?(document.pictureInPictureElement=e,new Event("enterpictureinpicture")):(document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),new Event("leavepictureinpicture"));e.dispatchEvent(t)},shaka.polyfill.PiPWebkit.requestPictureInPicture_=function(){var e=shaka.polyfill.PiPWebkit;return this.webkitSupportsPresentationMode(e.PIP_MODE_)?(this.webkitSetPresentationMode(e.PIP_MODE_),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))},shaka.polyfill.PiPWebkit.exitPictureInPicture_=function(){var e=shaka.polyfill.PiPWebkit,t=document.pictureInPictureElement;return t?(t.webkitSetPresentationMode(e.INLINE_MODE_),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))},shaka.polyfill.PiPWebkit.getDisablePictureInPicture_=function(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode(shaka.polyfill.PiPWebkit.PIP_MODE_)},shaka.polyfill.PiPWebkit.setDisablePictureInPicture_=function(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")},shaka.polyfill.PiPWebkit.PIP_MODE_="picture-in-picture",shaka.polyfill.PiPWebkit.INLINE_MODE_="inline",shaka.polyfill.register(shaka.polyfill.PiPWebkit.install),shaka.polyfill.StorageEstimate=function(){},shaka.polyfill.StorageEstimate.install=function(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=shaka.polyfill.StorageEstimate.storageEstimate_)},shaka.polyfill.StorageEstimate.storageEstimate_=function(){return new Promise(function(a,e){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,t){a({usage:e,quota:t})},e)})},shaka.polyfill.register(shaka.polyfill.StorageEstimate.install),shaka.polyfill.VideoPlayPromise=function(){},shaka.polyfill.VideoPlayPromise.install=function(){var t;shaka.log.debug("VideoPlayPromise.install"),window.HTMLMediaElement&&(t=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e})},shaka.polyfill.register(shaka.polyfill.VideoPlayPromise.install),shaka.polyfill.VideoPlaybackQuality=function(){},shaka.polyfill.VideoPlaybackQuality.install=function(){var e;window.HTMLVideoElement&&!(e=HTMLVideoElement.prototype).getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=shaka.polyfill.VideoPlaybackQuality.webkit_)},shaka.polyfill.VideoPlaybackQuality.webkit_=function(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}},shaka.polyfill.register(shaka.polyfill.VideoPlaybackQuality.install),shaka.polyfill.VTTCue=function(){},shaka.polyfill.VTTCue.install=function(){var r,e;window.VTTCue?shaka.log.info("Using native VTTCue."):window.TextTrackCue?(r=null,3==(e=TextTrackCue.length)?(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),r=shaka.polyfill.VTTCue.from3ArgsTextTrackCue_):6==e?(shaka.log.info("Using VTTCue polyfill from 6 argument TextTrackCue."),r=shaka.polyfill.VTTCue.from6ArgsTextTrackCue_):shaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_()&&(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),r=shaka.polyfill.VTTCue.from3ArgsTextTrackCue_),r?window.VTTCue=function(e,t,a){return r(e,t,a)}:shaka.log.error("No recognized signature for TextTrackCue found!")):shaka.log.error("VTTCue not available.")},shaka.polyfill.VTTCue.from3ArgsTextTrackCue_=function(e,t,a){return new window.TextTrackCue(e,t,a)},shaka.polyfill.VTTCue.from6ArgsTextTrackCue_=function(e,t,a){return new window.TextTrackCue(e+"-"+t+"-"+a,e,t,a)},shaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_=function(){try{return!!shaka.polyfill.VTTCue.from3ArgsTextTrackCue_(1,2,"")}catch(e){return!1}},shaka.polyfill.register(shaka.polyfill.VTTCue.install),shaka.text.LrcTextParser=function(){},shaka.text.LrcTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"LRC does not have init segments")},shaka.text.LrcTextParser.prototype.parseMedia=function(e,t,a){a=shaka.text.LrcTextParser;var r=null,n=[];e=shaka.util.StringUtils.fromUTF8(e).split(/\r?\n/);for(var i=(e=$jscomp.makeIterator(e)).next();!i.done;i=e.next()){var o=i.value;o&&!/^\s+$/.test(o)&&((i=a.lyricLine_.exec(o))?(o=a.parseTime_(i[1]),i=new shaka.text.Cue(o,t.segmentEnd||o+2,i[2]),r&&(r.endTime=o,n.push(r)),r=i):shaka.log.warning("LrcTextParser encountered an unknown line.",o))}return r&&n.push(r),n},shaka.text.LrcTextParser.prototype.parsePartialMedia=function(e,t){},shaka.text.LrcTextParser.prototype.parseNextRangeMedia=function(e){},shaka.text.LrcTextParser.prototype.areRangesParsed=function(){},shaka.text.LrcTextParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.LrcTextParser.parseTime_=function(e){var t=shaka.text.LrcTextParser.timeFormat_.exec(e);return 60*(e=parseInt(t[1],10))+(t=parseFloat(t[2].replace(",",".")))},goog.exportSymbol("shaka.text.LrcTextParser",shaka.text.LrcTextParser),goog.exportProperty(shaka.text.LrcTextParser.prototype,"getWebVTTRangeLimits",shaka.text.LrcTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.LrcTextParser.prototype,"areRangesParsed",shaka.text.LrcTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseNextRangeMedia",shaka.text.LrcTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parsePartialMedia",shaka.text.LrcTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseMedia",shaka.text.LrcTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseInit",shaka.text.LrcTextParser.prototype.parseInit),shaka.text.LrcTextParser.lyricLine_=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,shaka.text.LrcTextParser.timeFormat_=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/,shaka.text.TextEngine.registerParser("application/x-subtitle-lrc",function(){return new shaka.text.LrcTextParser}),shaka.text.TtmlTextParser=function(){},shaka.text.TtmlTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"TTML does not have init segments")},shaka.text.TtmlTextParser.prototype.parseMedia=function(e,t,a){a=shaka.text.TtmlTextParser;var r=shaka.util.XmlUtils,n=a.parameterNs_,i=a.styleNs_,o=shaka.util.StringUtils.fromUTF8(e),s=(e=[],new DOMParser),l=null;if(""!=o){try{l=s.parseFromString(o,"text/xml")}catch(e){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Failed to parse TTML.")}if(l){if(o=l.getElementsByTagName("parsererror")[0])throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,o.textContent);if(!(p=l.getElementsByTagName("tt")[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"TTML does not contain <tt> tag.");if(!(l=p.getElementsByTagName("body")[0]))return[];var o=r.getAttributeNS(p,n,"frameRate"),s=r.getAttributeNS(p,n,"subFrameRate"),u=r.getAttributeNS(p,n,"frameRateMultiplier"),c=r.getAttributeNS(p,n,"tickRate"),d=r.getAttributeNS(p,n,"cellResolution"),n=p.getAttribute("xml:space")||"default",h=r.getAttributeNS(p,i,"extent");if("default"!=n&&"preserve"!=n)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Invalid xml:space value: "+n);i="default"==n,n=new a.RateInfo_(o,s,u,c),o=a.getCellResolution_(d),s=(s=p.getElementsByTagName("metadata")[0])?r.getChildren(s):[];for(var u=Array.from(p.getElementsByTagName("style")),p=Array.from(p.getElementsByTagName("region")),c=[],f=(d=$jscomp.makeIterator(p)).next();!f.done;f=d.next())(f=a.parseCueRegion_(f.value,u,h))&&c.push(f);if(r.findChildren(l,"p").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<p> can only be inside <div> in TTML");for(h=(l=$jscomp.makeIterator(r.findChildren(l,"div"))).next();!h.done;h=l.next()){if(h=h.value,r.findChildren(h,"span").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<span> can only be inside <p> in TTML");if((d=r.findChildren(h,"p"))&&d.length)for(d=(h=$jscomp.makeIterator(d)).next();!d.done;d=h.next())(d=a.parseCue_(d.value,t.periodStart,n,s,u,p,c,i,!1,o))&&e.push(d);else(h=a.parseCue_(h,t.periodStart,n,s,u,p,c,i,!1,o))&&e.push(h)}}}return e},shaka.text.TtmlTextParser.prototype.parsePartialMedia=function(e,t){},shaka.text.TtmlTextParser.prototype.parseNextRangeMedia=function(e){},shaka.text.TtmlTextParser.prototype.areRangesParsed=function(){},shaka.text.TtmlTextParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.TtmlTextParser.parseCue_=function(e,t,a,r,n,i,o,s,l,u){var c=e.parentNode;if(e.nodeType==Node.TEXT_NODE?((d=document.createElement("span")).textContent=e.textContent,e=d):goog.asserts.assert(e.nodeType==Node.ELEMENT_NODE,"nodeType should be ELEMENT_NODE!"),goog.asserts.assert(e,"cueElement should be non-null!"),s="default"==(e.getAttribute("xml:space")||(s?"default":"preserve")),d=/\S/.test(e.textContent),!(e.hasAttribute("begin")||e.hasAttribute("end")||e.hasAttribute("dur")||d||"br"==e.tagName||l&&!s))return null;for(var d=(h=shaka.text.TtmlTextParser.parseTime_(e,a)).start,h=h.end;c&&c.nodeType==Node.ELEMENT_NODE&&"tt"!=c.tagName;)d=(h=shaka.text.TtmlTextParser.resolveTime_(c,a,d,h)).start,h=h.end,c=c.parentNode;if(null==d&&(d=0),d+=t,h=null==h?1/0:h+t,"br"==e.tagName)return(r=new shaka.text.Cue(d,h,"")).lineBreak=!0,r;var p,f="",c=[];if(Array.from(e.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE}))f=e.textContent,s&&(f=(f=f.trim()).replace(/\s+/g," "));else for(var m=$jscomp.makeIterator(e.childNodes),g=m.next();!g.done;g=m.next())(g=shaka.text.TtmlTextParser.parseCue_(g.value,t,a,r,n,i,o,s,!0,u))&&c.push(g);for((t=new shaka.text.Cue(d,h,f)).nestedCues=c,u&&(t.cellResolution=u),(i=shaka.text.TtmlTextParser.getElementsFromCollection_(e,"region",i,"")[0])&&i.getAttribute("xml:id")&&(p=i.getAttribute("xml:id"),t.region=o.filter(function(e){return e.id==p})[0]),o=null,a=(u=$jscomp.makeIterator(shaka.text.TtmlTextParser.smpteNsList_)).next();!a.done&&!(o=shaka.text.TtmlTextParser.getElementsFromCollection_(e,"backgroundImage",r,"#",a.value)[0]);a=u.next());return shaka.text.TtmlTextParser.addStyle_(t,e,i,o,n,l,0==c.length),t},shaka.text.TtmlTextParser.parseCueRegion_=function(e,t,a){var r,n,i=shaka.text.TtmlTextParser,o=new shaka.text.CueRegion,s=e.getAttribute("xml:id");return s?(o.id=s,s=null,a=(s=a?i.percentValues_.exec(a)||i.pixelValues_.exec(a):s)?Number(s[1]):null,s=s?Number(s[2]):null,(r=i.getStyleAttributeFromRegion_(e,t,"extent"))&&null!=(r=(n=i.percentValues_.exec(r))||i.pixelValues_.exec(r))&&(o.width=Number(r[1]),o.height=Number(r[2]),n||(null!=a&&(o.width=100*o.width/a),null!=s&&(o.height=100*o.height/s)),o.widthUnits=n||null!=a?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX,o.heightUnits=n||null!=s?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX),(e=i.getStyleAttributeFromRegion_(e,t,"origin"))&&null!=(r=(n=i.percentValues_.exec(e))||i.pixelValues_.exec(e))&&(o.viewportAnchorX=Number(r[1]),o.viewportAnchorY=Number(r[2]),n||(null!=s&&(o.viewportAnchorY=100*o.viewportAnchorY/s),null!=a&&(o.viewportAnchorX=100*o.viewportAnchorX/a)),o.viewportAnchorUnits=n||null!=a?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX),o):(shaka.log.warning("TtmlTextParser parser encountered a region with no id. Region will be ignored."),null)},shaka.text.TtmlTextParser.addStyle_=function(e,t,a,r,n,i,o){var s=shaka.text.TtmlTextParser,l=shaka.text.Cue;"rtl"==s.getStyleAttribute_(t,a,n,"direction",i=i||o)&&(e.direction=l.direction.HORIZONTAL_RIGHT_TO_LEFT),"tb"==(o=s.getStyleAttribute_(t,a,n,"writingMode",i))||"tblr"==o?e.writingMode=l.writingMode.VERTICAL_LEFT_TO_RIGHT:"tbrl"==o?e.writingMode=l.writingMode.VERTICAL_RIGHT_TO_LEFT:"rltb"==o||"rl"==o?e.direction=l.direction.HORIZONTAL_RIGHT_TO_LEFT:o&&(e.direction=l.direction.HORIZONTAL_LEFT_TO_RIGHT),(o=s.getStyleAttribute_(t,a,n,"textAlign",i))?(e.positionAlign=s.textAlignToPositionAlign_[o],e.lineAlign=s.textAlignToLineAlign_[o],goog.asserts.assert(o.toUpperCase()in l.textAlign,o.toUpperCase()+" Should be in Cue.textAlign values!"),e.textAlign=l.textAlign[o.toUpperCase()]):e.textAlign=l.textAlign.START,(o=s.getStyleAttribute_(t,a,n,"displayAlign",i))&&(goog.asserts.assert(o.toUpperCase()in l.displayAlign,o.toUpperCase()+" Should be in Cue.displayAlign values!"),e.displayAlign=l.displayAlign[o.toUpperCase()]),(o=s.getStyleAttribute_(t,a,n,"color",i))&&(e.color=o),(o=s.getStyleAttribute_(t,a,n,"backgroundColor",i))&&(e.backgroundColor=o),(o=s.getStyleAttribute_(t,a,n,"border",i))&&(e.border=o),(o=s.getStyleAttribute_(t,a,n,"fontFamily",i))&&(e.fontFamily=o),(o=s.getStyleAttribute_(t,a,n,"fontWeight",i))&&"bold"==o&&(e.fontWeight=l.fontWeight.BOLD),o=s.getStyleAttribute_(t,a,n,"wrapOption",i),e.wrapLine=!o||"noWrap"!=o,(o=s.getStyleAttribute_(t,a,n,"lineHeight",i))&&o.match(s.unitValues_)&&(e.lineHeight=o),(o=s.getStyleAttribute_(t,a,n,"fontSize",i))&&(o.match(s.unitValues_)||o.match(s.percentValue_))&&(e.fontSize=o),(o=s.getStyleAttribute_(t,a,n,"fontStyle",i))&&(goog.asserts.assert(o.toUpperCase()in l.fontStyle,o.toUpperCase()+" Should be in Cue.fontStyle values!"),e.fontStyle=l.fontStyle[o.toUpperCase()]),r&&(l=r.getAttribute("imageType")||r.getAttribute("imagetype"),o=r.getAttribute("encoding"),r=r.textContent.trim(),"PNG"==l)&&"Base64"==o&&r&&(e.backgroundImage="data:image/png;base64,"+r),(r=s.getStyleAttribute_(t,a,n,"letterSpacing",i))&&r.match(s.unitValues_)&&(e.letterSpacing=r),(r=s.getStyleAttribute_(t,a,n,"linePadding",i))&&r.match(s.unitValues_)&&(e.linePadding=r),(i=s.getStyleAttribute_(t,a,n,"opacity",i))&&(e.opacity=parseFloat(i)),(a=s.getStyleAttributeFromRegion_(a,n,"textDecoration"))&&s.addTextDecoration_(e,a),(t=s.getStyleAttributeFromElement_(t,n,"textDecoration"))&&s.addTextDecoration_(e,t)},shaka.text.TtmlTextParser.addTextDecoration_=function(e,t){for(var a=shaka.text.Cue,r=$jscomp.makeIterator(t.split(" ")),n=r.next();!n.done;n=r.next())switch(n.value){case"underline":e.textDecoration.includes(a.textDecoration.UNDERLINE)||e.textDecoration.push(a.textDecoration.UNDERLINE);break;case"noUnderline":e.textDecoration.includes(a.textDecoration.UNDERLINE)&&shaka.util.ArrayUtils.remove(e.textDecoration,a.textDecoration.UNDERLINE);break;case"lineThrough":e.textDecoration.includes(a.textDecoration.LINE_THROUGH)||e.textDecoration.push(a.textDecoration.LINE_THROUGH);break;case"noLineThrough":e.textDecoration.includes(a.textDecoration.LINE_THROUGH)&&shaka.util.ArrayUtils.remove(e.textDecoration,a.textDecoration.LINE_THROUGH);break;case"overline":e.textDecoration.includes(a.textDecoration.OVERLINE)||e.textDecoration.push(a.textDecoration.OVERLINE);break;case"noOverline":e.textDecoration.includes(a.textDecoration.OVERLINE)&&shaka.util.ArrayUtils.remove(e.textDecoration,a.textDecoration.OVERLINE)}},shaka.text.TtmlTextParser.getStyleAttribute_=function(e,t,a,r,n){n=void 0===n||n;var i=shaka.text.TtmlTextParser;return(e=i.getStyleAttributeFromElement_(e,a,r))||(n?i.getStyleAttributeFromRegion_(t,a,r):null)},shaka.text.TtmlTextParser.getStyleAttributeFromRegion_=function(e,t,a){return e?shaka.util.XmlUtils.getAttributeNS(e,shaka.text.TtmlTextParser.styleNs_,a)||shaka.text.TtmlTextParser.getInheritedStyleAttribute_(e,t,a):null},shaka.text.TtmlTextParser.getStyleAttributeFromElement_=function(e,t,a){var r=shaka.util.XmlUtils.getAttributeNS(e,shaka.text.TtmlTextParser.styleNs_,a);return r||shaka.text.TtmlTextParser.getInheritedStyleAttribute_(e,t,a)},shaka.text.TtmlTextParser.getInheritedStyleAttribute_=function(e,t,a){var r=shaka.util.XmlUtils,n=shaka.text.TtmlTextParser.styleNs_,i=shaka.text.TtmlTextParser.styleEbuttsNs_;e=shaka.text.TtmlTextParser.getElementsFromCollection_(e,"style",t,"");for(var o=null,s=0;s<e.length;s++){var l=r.getAttributeNS(e[s],i,a);(l=(l=l||r.getAttributeNS(e[s],n,a))||shaka.text.TtmlTextParser.getStyleAttributeFromElement_(e[s],t,a))&&(o=l)}return o},shaka.text.TtmlTextParser.getElementsFromCollection_=function(e,t,a,r,n){var i=[];if(e&&!(a.length<1)&&(e=shaka.text.TtmlTextParser.getInheritedAttribute_(e,t,n)))for(e=e.split(" "),t=(e=$jscomp.makeIterator(e)).next();!t.done;t=e.next()){t=t.value;for(var o=(n=$jscomp.makeIterator(a)).next();!o.done;o=n.next())if(r+(o=o.value).getAttribute("xml:id")==t){i.push(o);break}}return i},shaka.text.TtmlTextParser.getInheritedAttribute_=function(e,t,a){for(var r=null,n=shaka.util.XmlUtils;e&&!(r=a?n.getAttributeNS(e,a,t):e.getAttribute(t))&&(e=e.parentNode)instanceof Element;);return r},shaka.text.TtmlTextParser.resolveTime_=function(e,t,a,r){return e=shaka.text.TtmlTextParser.parseTime_(e,t),null==a?a=e.start:null!=e.start&&(a+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:a,end:r}},shaka.text.TtmlTextParser.parseTime_=function(e,t){var a=shaka.text.TtmlTextParser.parseTimeAttribute_(e.getAttribute("begin"),t),r=shaka.text.TtmlTextParser.parseTimeAttribute_(e.getAttribute("end"),t),e=shaka.text.TtmlTextParser.parseTimeAttribute_(e.getAttribute("dur"),t);return{start:a,end:r=null==r&&null!=e?a+e:r}},shaka.text.TtmlTextParser.parseTimeAttribute_=function(e,t){var a=null,r=shaka.text.TtmlTextParser;if(r.timeColonFormatFrames_.test(e))a=r.parseColonTimeWithFrames_(t,e);else if(r.timeColonFormat_.test(e))a=r.parseTimeFromRegex_(r.timeColonFormat_,e);else if(r.timeColonFormatMilliseconds_.test(e))a=r.parseTimeFromRegex_(r.timeColonFormatMilliseconds_,e);else if(r.timeFramesFormat_.test(e))a=r.parseFramesTime_(t,e);else if(r.timeTickFormat_.test(e))a=r.parseTickTime_(t,e);else if(r.timeHMSFormat_.test(e))a=r.parseTimeFromRegex_(r.timeHMSFormat_,e);else if(e)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in TTML");return a},shaka.text.TtmlTextParser.parseFramesTime_=function(e,t){t=shaka.text.TtmlTextParser.timeFramesFormat_.exec(t);return Number(t[1])/e.frameRate},shaka.text.TtmlTextParser.parseTickTime_=function(e,t){t=shaka.text.TtmlTextParser.timeTickFormat_.exec(t);return Number(t[1])/e.tickRate},shaka.text.TtmlTextParser.parseColonTimeWithFrames_=function(e,t){var t=shaka.text.TtmlTextParser.timeColonFormatFrames_.exec(t),a=Number(t[1]),r=Number(t[2]),n=Number(t[3]),i=Number(t[4]);return(n+=(i+=(Number(t[5])||0)/e.subFrameRate)/e.frameRate)+60*r+3600*a},shaka.text.TtmlTextParser.parseTimeFromRegex_=function(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)},shaka.text.TtmlTextParser.getCellResolution_=function(e){var t;return e&&(t=/^(\d+) (\d+)$/.exec(e))?{columns:e=parseInt(t[1],10),rows:t=parseInt(t[2],10)}:null},goog.exportSymbol("shaka.text.TtmlTextParser",shaka.text.TtmlTextParser),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"getWebVTTRangeLimits",shaka.text.TtmlTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"areRangesParsed",shaka.text.TtmlTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseNextRangeMedia",shaka.text.TtmlTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parsePartialMedia",shaka.text.TtmlTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseMedia",shaka.text.TtmlTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseInit",shaka.text.TtmlTextParser.prototype.parseInit),shaka.text.TtmlTextParser.RateInfo_=function(e,t,a,r){this.frameRate=Number(e)||30,this.subFrameRate=Number(t)||1,this.tickRate=Number(r),0==this.tickRate&&(this.tickRate=e?this.frameRate*this.subFrameRate:1),a&&(e=/^(\d+) (\d+)$/g.exec(a))&&(this.frameRate*=Number(e[1])/Number(e[2]))},shaka.text.TtmlTextParser.percentValues_=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,shaka.text.TtmlTextParser.percentValue_=/^(\d{1,2}(?:\.\d+)?|100)%$/,shaka.text.TtmlTextParser.unitValues_=/^(\d+px|\d+em|\d*\.?\d+c)$/,shaka.text.TtmlTextParser.pixelValues_=/^(\d+)px (\d+)px$/,shaka.text.TtmlTextParser.timeColonFormatFrames_=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,shaka.text.TtmlTextParser.timeColonFormat_=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,shaka.text.TtmlTextParser.timeColonFormatMilliseconds_=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,shaka.text.TtmlTextParser.timeFramesFormat_=/^(\d*(?:\.\d*)?)f$/,shaka.text.TtmlTextParser.timeTickFormat_=/^(\d*(?:\.\d*)?)t$/,shaka.text.TtmlTextParser.timeHMSFormat_=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,shaka.text.TtmlTextParser.textAlignToLineAlign_={left:shaka.text.Cue.lineAlign.START,center:shaka.text.Cue.lineAlign.CENTER,right:shaka.text.Cue.lineAlign.END,start:shaka.text.Cue.lineAlign.START,end:shaka.text.Cue.lineAlign.END},shaka.text.TtmlTextParser.textAlignToPositionAlign_={left:shaka.text.Cue.positionAlign.LEFT,center:shaka.text.Cue.positionAlign.CENTER,right:shaka.text.Cue.positionAlign.RIGHT},shaka.text.TtmlTextParser.parameterNs_="http://www.w3.org/ns/ttml#parameter",shaka.text.TtmlTextParser.styleNs_="http://www.w3.org/ns/ttml#styling",shaka.text.TtmlTextParser.styleEbuttsNs_="urn:ebu:tt:style",shaka.text.TtmlTextParser.smpteNsList_=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"],shaka.text.TextEngine.registerParser("application/ttml+xml",function(){return new shaka.text.TtmlTextParser}),shaka.text.Mp4TtmlParser=function(){this.parser_=new shaka.text.TtmlTextParser},shaka.text.Mp4TtmlParser.prototype.parseInit=function(e){var t=shaka.util.Mp4Parser,a=!1;if((new t).box("moov",t.children).box("trak",t.children).box("mdia",t.children).box("minf",t.children).box("stbl",t.children).fullBox("stsd",t.sampleDescription).box("stpp",function(e){a=!0,e.parser.stop()}).parse(e),!a)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML)},shaka.text.Mp4TtmlParser.prototype.parseMedia=function(e,t,a){var r=this,n=(a=shaka.util.Mp4Parser,!1),i=[];if((new a).box("mdat",a.allData(function(e){n=!0,i=i.concat(r.parser_.parseMedia(e,t,!1))})).parse(e,!1),n)return i;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML)},shaka.text.Mp4TtmlParser.prototype.parsePartialMedia=function(e,t){},shaka.text.Mp4TtmlParser.prototype.parseNextRangeMedia=function(e){},shaka.text.Mp4TtmlParser.prototype.areRangesParsed=function(){},shaka.text.Mp4TtmlParser.prototype.getWebVTTRangeLimits=function(e){},goog.exportSymbol("shaka.text.Mp4TtmlParser",shaka.text.Mp4TtmlParser),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"getWebVTTRangeLimits",shaka.text.Mp4TtmlParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"areRangesParsed",shaka.text.Mp4TtmlParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseNextRangeMedia",shaka.text.Mp4TtmlParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parsePartialMedia",shaka.text.Mp4TtmlParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseMedia",shaka.text.Mp4TtmlParser.prototype.parseMedia),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseInit",shaka.text.Mp4TtmlParser.prototype.parseInit),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp.ttml.im1t"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp.TTML.im1t"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.VttTextParser=function(){this.blocks_=[],this.regions_=[],this.numElements_=0,this.indexes_=[],this.lastParsedRangeIndex_=-1,this.NUM_SUB_ARRAYS=150,this.MIN_NUM_ELEMS_PARTIAL=1e3},shaka.text.VttTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"VTT does not have init segments")},shaka.text.VttTextParser.prototype.calculateCuesRanges_=function(e){this.indexes_=[];var t=[];if(e.length>this.MIN_NUM_ELEMS_PARTIAL){this.numElements_=Math.floor(e.length/this.NUM_SUB_ARRAYS);for(var a=0;a<this.NUM_SUB_ARRAYS;a++)a===this.NUM_SUB_ARRAYS-1?t.push({start:this.numElements_*a,end:e.length-1}):t.push({start:this.numElements_*a,end:this.numElements_*(a+1)-1})}else t=[{start:0,end:e.length-1}];return t},shaka.text.VttTextParser.prototype.parseMedia=function(e,t,a){a=void 0!==a&&a;var r=shaka.text.VttTextParser;if(e=(e=shaka.util.StringUtils.fromUTF8(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),this.blocks_=e.split("\n\n"),!/^WEBVTT($|[ \t\n])/m.test(this.blocks_[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);if(e=t.periodStart,this.blocks_[0].includes("X-TIMESTAMP-MAP")){var n=this.blocks_[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=this.blocks_[0].match(/MPEGTS:(\d+)/m);if(n&&i){if(e=new shaka.util.TextParser(n[1]),null==(e=shaka.text.VttTextParser.parseTime_(e)))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);for(var i=Number(i[1]),n=shaka.text.VttTextParser.MPEG_TIMESCALE_,o=shaka.text.VttTextParser.TS_ROLLOVER_/n,s=t.segmentStart;o<=s;)s-=o,i+=shaka.text.VttTextParser.TS_ROLLOVER_;e=t.periodStart+i/n-e}}for(i=(t=$jscomp.makeIterator(this.blocks_[0].split("\n"))).next();!i.done;i=t.next())i=i.value,/^Region:/.test(i)&&(i=r.parseRegion_(i),this.regions_.push(i));if(t=new Map,r.addDefaultTextColor_(t),i=[],a)this.blocks_=this.blocks_.slice(1),""===this.blocks_[this.blocks_.length-1]&&this.blocks_.pop(),this.indexes_=this.calculateCuesRanges_(this.blocks_);else for(n=(a=$jscomp.makeIterator(this.blocks_.slice(1))).next();!n.done;n=a.next())n=n.value.split("\n"),r.parseStyle_(n,t),(n=r.parseCue_(n,e,this.regions_,t))&&i.push(n);return i},shaka.text.VttTextParser.prototype.parseTime=function(e){var t,a,r;return(e=e.split(":"))[e.length-1].includes(".")&&(t=e[e.length-1].split("."),e=e.splice(0,e.length-1).concat(t)),t=0,e=4===e.length?(t=Number(e[0]),a=Number(e[1]),r=Number(e[2]),Number(e[3])):(a=Number(e[0]),r=Number(e[1]),Number(e[2])),59<a||59<r?null:e/1e3+r+60*a+3600*t},shaka.text.VttTextParser.prototype.getWebVTTRangeLimits=function(e){var t={start:-1,end:-1};if(0<this.blocks_.length&&void 0!==e)for(var a=0,r=!1;a<this.indexes_.length&&!r;){var n=(n=this.blocks_[this.indexes_[a].start]).match(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),i=(i=this.blocks_[this.indexes_[a].end]).match(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);e>=this.parseTime(n[0])&&e<=this.parseTime(i[1])&&(this.lastParsedRangeIndex_=a,t=this.indexes_[a],r=!0),a++}return t},shaka.text.VttTextParser.prototype.areRangesParsed=function(){return 0===this.blocks_.length},shaka.text.VttTextParser.prototype.parseNextRangeMedia=function(e){return[]},shaka.text.VttTextParser.prototype.parsePartialMedia=function(e,t){var a=[];if(0<this.blocks_.length){var r=e.periodStart,n=shaka.text.VttTextParser,i=new Map;n.addDefaultTextColor_(i);for(var o=t.start;o<=t.end;o++){var s=this.blocks_[o].split("\n");n.parseStyle_(s,i),(s=n.parseCue_(s,r,this.regions_,i))&&a.push(s)}if(this.blocks_.splice(t.start,t.end-t.start+1),0===t.start||t.end===this.blocks_.length-1)this.indexes_=this.calculateCuesRanges_(this.blocks_);else{for(r=this.blocks_.slice(0,t.start),r=this.calculateCuesRanges_(r),n=this.blocks_.slice(t.start,this.blocks_.length),n=this.calculateCuesRanges_(n),i=0;i<n.length;i++)n[i].start+=t.start,n[i].end+=t.start,n[i].start>n[i].end&&(n[i].start=n[i].end);this.indexes_=r.concat(n)}}return a},shaka.text.VttTextParser.addDefaultTextColor_=function(e){for(var t=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextColor)),a=t.next();!a.done;a=t.next()){var a=(r=$jscomp.makeIterator(a.value)).next().value,r=r.next().value,n=new shaka.text.Cue(0,0,"");n.color=r,e.set(a,n)}for(a=(t=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextBackgroundColor))).next();!a.done;a=t.next())a=(r=$jscomp.makeIterator(a.value)).next().value,r=r.next().value,(n=new shaka.text.Cue(0,0,"")).backgroundColor=r,e.set(a,n)},shaka.text.VttTextParser.parseRegion_=function(e){var t=shaka.text.VttTextParser,a=(e=new shaka.util.TextParser(e),new shaka.text.CueRegion);e.readWord(),e.skipWhitespace();for(var r=e.readWord();r;)t.parseRegionSetting_(a,r)||shaka.log.warning("VTT parser encountered an invalid VTTRegion setting: ",r," The setting will be ignored."),e.skipWhitespace(),r=e.readWord();return a},shaka.text.VttTextParser.parseStyle_=function(e,t){if((1!=e.length||e[0])&&!/^NOTE($|[ \t])/.test(e[0])&&"STYLE"==e[0]&&e[1].includes("::cue")){var a="global",r=e[1].match(/\((.*)\)/);r&&(a=r.pop()),r=e.slice(2,-1),e[1].includes("}")&&(n=/\{(.*?)\}/.exec(e[1]))&&(r=n[1].split(";"));for(var n=new shaka.text.Cue(0,0,""),i=!1,o=0;o<r.length;o++){var s=/^\s*([^:]+):\s*(.*)/.exec(r[o]);if(s){var l=s[1].trim(),u=s[2].trim().replace(";","");switch(l){case"background-color":i=!0,n.backgroundColor=u;break;case"color":i=!0,n.color=u;break;case"font-family":i=!0,n.fontFamily=u;break;case"font-size":i=!0,n.fontSize=u;break;case"font-weight":700<=parseInt(u,10)&&(i=!0,n.fontWeight=shaka.text.Cue.fontWeight.BOLD);break;case"font-style":switch(u){case"normal":i=!0,n.fontStyle=shaka.text.Cue.fontStyle.NORMAL;break;case"italic":i=!0,n.fontStyle=shaka.text.Cue.fontStyle.ITALIC;break;case"oblique":i=!0,n.fontStyle=shaka.text.Cue.fontStyle.OBLIQUE}break;case"opacity":i=!0,n.opacity=parseFloat(u);break;case"white-space":i=!0,n.wrapLine="noWrap"!=u;break;default:shaka.log.warning("VTT parser encountered an unsupported style: ",s)}}}i&&t.set(a,n)}},shaka.text.VttTextParser.parseCue_=function(e,t,a,r){var n=shaka.text.VttTextParser;if(1==e.length&&!e[0]||/^NOTE($|[ \t])/.test(e[0])||"STYLE"==e[0])return null;var i=null,o=(e[0].includes("--\x3e")||(i=e[0],e.splice(0,1)),new shaka.util.TextParser(e[0])),s=n.parseTime_(o),l=o.readRegex(/[ \t]+--\x3e[ \t]+/g),u=n.parseTime_(o);if(null==s||null==l||null==u)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in WebVTT");s+=t,u+=t,t=e.slice(1).join("\n").trim();var c={"&lt;":"<","&gt;":">","&amp;":"&"};for(t=t.replace(/&lt;|&gt;|&amp; /gi,function(e){return c[e]}),e=null,r.has("global")?((e=r.get("global").clone()).startTime=s,e.endTime=u,e.payload=""):e=new shaka.text.Cue(s,u,""),n.parseCueStyles(t,e,r),o.skipWhitespace(),r=o.readWord();r;)n.parseCueSetting(e,r,a)||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",r," The setting will be ignored."),o.skipWhitespace(),r=o.readWord();return null!=i&&(e.id=i),e},shaka.text.VttTextParser.parseCueStyles=function(e,t,a){var r=shaka.text.VttTextParser;if(0===a.size&&r.addDefaultTextColor_(a),e=r.replaceColorPayload_(e),n=shaka.util.XmlUtils.parseXmlString("<span>"+e+"</span>","span")){var n,i=[];if(1==(n=n.childNodes).length){var o=n[0];if(o.nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE)return void(t.payload=e)}for(n=(e=$jscomp.makeIterator(n)).next();!n.done;n=e.next())r.generateCueFromElement_(n.value,t,i,a);t.nestedCues=i}else shaka.log.warning("The cue's markup could not be parsed: ",e),t.payload=e},shaka.text.VttTextParser.replaceColorPayload_=function(e){for(var t=[],a=-1,r="",n=0;n<e.length;n++)if("/"===e[n]){if((i=e.indexOf(">",n))<=n)return e;var i=e.substring(n+1,i),o=t.pop();if(o===i)r+="/"+i+">";else{if(!o.startsWith("c.")||"c"!==i)return e;r+="/"+o+">"}n+=i.length+1}else"<"===e[n]?a=n+1:">"===e[n]&&0<a&&(t.push(e.substr(a,n-a)),a=-1),r+=e[n];return r},shaka.text.VttTextParser.getOrDefault_=function(e,t){return e&&0<e.length?e:t},shaka.text.VttTextParser.mergeStyle_=function(e,t){var a;t&&(a=shaka.text.VttTextParser,e.backgroundColor=a.getOrDefault_(t.backgroundColor,e.backgroundColor),e.color=a.getOrDefault_(t.color,e.color),e.fontFamily=a.getOrDefault_(t.fontFamily,e.fontFamily),e.fontSize=a.getOrDefault_(t.fontSize,e.fontSize),e.fontWeight=t.fontWeight,e.fontStyle=t.fontStyle,e.opacity=t.opacity,e.wrapLine=t.wrapLine)},shaka.text.VttTextParser.generateCueFromElement_=function(e,t,a,r){var n=shaka.text.VttTextParser,i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=shaka.text.Cue.fontWeight.BOLD,s=shaka.text.Cue.fontStyle.ITALIC,l=shaka.text.Cue.textDecoration.UNDERLINE,u=e.nodeName.split(/[ .]+/),c=(u=$jscomp.makeIterator(u)).next();!c.done;c=u.next())switch(c=c.value,r.has(c)&&n.mergeStyle_(i,r.get(c)),c){case"b":i.fontWeight=o;break;case"i":i.fontStyle=s;break;case"u":i.textDecoration.push(l)}if(shaka.util.XmlUtils.isText(e))for(r=e.textContent.split("\n"),n=!0,e=(r=$jscomp.makeIterator(r)).next();!e.done;e=r.next())e=e.value,n||((n=t.clone()).lineBreak=!0,a.push(n)),0<e.length&&((n=i.clone()).payload=e,a.push(n)),n=!1;else for(e=(t=$jscomp.makeIterator(e.childNodes)).next();!e.done;e=t.next())n.generateCueFromElement_(e.value,i,a,r)},shaka.text.VttTextParser.parseCueSetting=function(e,t,a){var r,n=shaka.text.VttTextParser;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))n.setTextAlign_(e,r[1]);else if(r=/^vertical:(lr|rl)$/.exec(t))n.setVerticalWritingMode_(e,r[1]);else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(r[1]),r[2]&&n.setPositionAlign_(e,r[2]);else{if(!(r=/^region:(.*)$/.exec(t)))return n.parsedLineValueAndInterpretation_(e,t);(t=n.getRegionById_(a,r[1]))&&(e.region=t)}return!0},shaka.text.VttTextParser.getRegionById_=function(e,t){e=e.filter(function(e){return e.id==t});return e.length?(goog.asserts.assert(1==e.length,"VTTRegion ids should be unique!"),e[0]):(shaka.log.warning("VTT parser could not find a region with id: ",t," The region will be ignored."),null)},shaka.text.VttTextParser.parseRegionSetting_=function(e,t){var a;if(a=/^id=(.*)$/.exec(t))e.id=a[1];else if(a=/^width=(\d{1,2}|100)%$/.exec(t))e.width=Number(a[1]);else if(a=/^lines=(\d+)$/.exec(t))e.height=Number(a[1]),e.heightUnits=shaka.text.CueRegion.units.LINES;else if(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.regionAnchorX=Number(a[1]),e.regionAnchorY=Number(a[2]);else if(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.viewportAnchorX=Number(a[1]),e.viewportAnchorY=Number(a[2]);else{if(!/^scroll=up$/.exec(t))return!1;e.scroll=shaka.text.CueRegion.scrollMode.UP}return!0},shaka.text.VttTextParser.setTextAlign_=function(e,t){var a=shaka.text.Cue;"middle"==t?e.textAlign=a.textAlign.CENTER:(goog.asserts.assert(t.toUpperCase()in a.textAlign,t.toUpperCase()+" Should be in Cue.textAlign values!"),e.textAlign=a.textAlign[t.toUpperCase()])},shaka.text.VttTextParser.setPositionAlign_=function(e,t){var a=shaka.text.Cue;e.positionAlign="line-left"==t||"start"==t?a.positionAlign.LEFT:"line-right"==t||"end"==t?a.positionAlign.RIGHT:a.positionAlign.CENTER},shaka.text.VttTextParser.setVerticalWritingMode_=function(e,t){var a=shaka.text.Cue;e.writingMode="lr"==t?a.writingMode.VERTICAL_LEFT_TO_RIGHT:a.writingMode.VERTICAL_RIGHT_TO_LEFT},shaka.text.VttTextParser.parsedLineValueAndInterpretation_=function(e,t){var a,r=shaka.text.Cue;if(a=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=r.lineInterpretation.PERCENTAGE;else{if(!(a=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)))return!1;e.lineInterpretation=r.lineInterpretation.LINE_NUMBER}return e.line=Number(a[1]),a[2]&&(goog.asserts.assert(a[2].toUpperCase()in r.lineAlign,a[2].toUpperCase()+" Should be in Cue.lineAlign values!"),e.lineAlign=r.lineAlign[a[2].toUpperCase()]),!0},shaka.text.VttTextParser.parseTime_=function(e){var t,a;return null==(e=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g))||(t=Number(e[2]),a=Number(e[3]),59<t)||59<a?null:Number(e[4])/1e3+a+60*t+3600*(Number(e[1])||0)},goog.exportSymbol("shaka.text.VttTextParser",shaka.text.VttTextParser),goog.exportProperty(shaka.text.VttTextParser.prototype,"parsePartialMedia",shaka.text.VttTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.VttTextParser.prototype,"parseNextRangeMedia",shaka.text.VttTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.VttTextParser.prototype,"areRangesParsed",shaka.text.VttTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.VttTextParser.prototype,"getWebVTTRangeLimits",shaka.text.VttTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.VttTextParser.prototype,"parseMedia",shaka.text.VttTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.VttTextParser.prototype,"parseInit",shaka.text.VttTextParser.prototype.parseInit),shaka.text.VttTextParser.MPEG_TIMESCALE_=9e4,shaka.text.VttTextParser.TS_ROLLOVER_=8589934592,shaka.text.TextEngine.registerParser("text/vtt",function(){return new shaka.text.VttTextParser}),shaka.text.TextEngine.registerParser('text/vtt; codecs="vtt"',function(){return new shaka.text.VttTextParser}),shaka.text.TextEngine.registerParser('text/vtt; codecs="wvtt"',function(){return new shaka.text.VttTextParser}),shaka.text.Mp4VttParser=function(){this.timescale_=null},shaka.text.Mp4VttParser.prototype.parseInit=function(e){var t=this,a=shaka.util.Mp4Parser,r=!1;if((new a).box("moov",a.children).box("trak",a.children).box("mdia",a.children).fullBox("mdhd",function(e){goog.asserts.assert(0==e.version||1==e.version,"MDHD version can only be 0 or 1"),e=shaka.util.Mp4BoxParsers.parseMDHD(e.reader,e.version),t.timescale_=e.timescale}).box("minf",a.children).box("stbl",a.children).fullBox("stsd",a.sampleDescription).box("wvtt",function(e){r=!0}).parse(e),!this.timescale_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);if(!r)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT)},shaka.text.Mp4VttParser.prototype.parseMedia=function(e,t,a){if(!this.timescale_)throw shaka.log.error("No init segment for MP4+VTT!"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);var r,n=shaka.util.Mp4Parser,i=0,o=[],s=!(a=[]),l=!1,u=!1,c=null;if((new n).box("moof",n.children).box("traf",n.children).fullBox("tfdt",function(e){s=!0,goog.asserts.assert(0==e.version||1==e.version,"TFDT version can only be 0 or 1"),i=shaka.util.Mp4BoxParsers.parseTFDT(e.reader,e.version).baseMediaDecodeTime}).fullBox("tfhd",function(e){goog.asserts.assert(null!=e.flags,"A TFHD box should have a valid flags value"),c=shaka.util.Mp4BoxParsers.parseTFHD(e.reader,e.flags).defaultSampleDuration}).fullBox("trun",function(e){l=!0,goog.asserts.assert(null!=e.version,"A TRUN box should have a valid version value"),goog.asserts.assert(null!=e.flags,"A TRUN box should have a valid flags value"),o=shaka.util.Mp4BoxParsers.parseTRUN(e.reader,e.version,e.flags).sampleData}).box("mdat",n.allData(function(e){goog.asserts.assert(!u,"VTT cues in mp4 with multiple MDAT are not currently supported"),u=!0,r=e})).parse(e,!1),!u&&!s&&!l)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);e=i;for(var n=new shaka.util.DataViewReader(r,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),d=$jscomp.makeIterator(o),h=d.next();!h.done;h=d.next()){var p=(h=h.value).sampleDuration||c,f=h.sampleCompositionTimeOffset?i+h.sampleCompositionTimeOffset:e,m=(e=f+(p||0),0);do{var g=n.readUint32(),y=(m+=g,n.readUint32()),v=null}while("vttc"==(y=shaka.util.Mp4Parser.typeToString(y))?8<g&&(v=n.readBytes(g-8)):("vtte"!=y&&shaka.log.error("Unknown box "+y+"! Skipping!"),n.skip(g-8)),p?v&&(goog.asserts.assert(null!=this.timescale_,"Timescale should not be null!"),g=shaka.text.Mp4VttParser.parseVTTC_(v,t.periodStart+f/this.timescale_,t.periodStart+e/this.timescale_),a.push(g)):shaka.log.error("WVTT sample duration unknown, and no default found!"),goog.asserts.assert(!h.sampleSize||m<=h.sampleSize,"The samples do not fit evenly into the sample sizes given in the TRUN box!"),h.sampleSize&&m<h.sampleSize)}return goog.asserts.assert(!n.hasMoreData(),"MDAT which contain VTT cues and non-VTT data are not currently supported!"),a.filter(shaka.util.Functional.isNotNull)},shaka.text.Mp4VttParser.prototype.parsePartialMedia=function(e,t){},shaka.text.Mp4VttParser.prototype.parseNextRangeMedia=function(e){},shaka.text.Mp4VttParser.prototype.areRangesParsed=function(){},shaka.text.Mp4VttParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.Mp4VttParser.parseVTTC_=function(e,t,a){var r,n,i;return(new shaka.util.Mp4Parser).box("payl",shaka.util.Mp4Parser.allData(function(e){r=shaka.util.StringUtils.fromUTF8(e)})).box("iden",shaka.util.Mp4Parser.allData(function(e){n=shaka.util.StringUtils.fromUTF8(e)})).box("sttg",shaka.util.Mp4Parser.allData(function(e){i=shaka.util.StringUtils.fromUTF8(e)})).parse(e),r?shaka.text.Mp4VttParser.assembleCue_(r,n,i,t,a):null},shaka.text.Mp4VttParser.assembleCue_=function(e,t,a,r,n){if(r=new shaka.text.Cue(r,n,""),n=new Map,shaka.text.VttTextParser.parseCueStyles(e,r,n),t&&(r.id=t),a)for(t=(e=new shaka.util.TextParser(a)).readWord();t;)shaka.text.VttTextParser.parseCueSetting(r,t,[])||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",t," The setting will be ignored."),e.skipWhitespace(),t=e.readWord();return r},goog.exportSymbol("shaka.text.Mp4VttParser",shaka.text.Mp4VttParser),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"getWebVTTRangeLimits",shaka.text.Mp4VttParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"areRangesParsed",shaka.text.Mp4VttParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseNextRangeMedia",shaka.text.Mp4VttParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parsePartialMedia",shaka.text.Mp4VttParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseMedia",shaka.text.Mp4VttParser.prototype.parseMedia),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseInit",shaka.text.Mp4VttParser.prototype.parseInit),shaka.text.TextEngine.registerParser('application/mp4; codecs="wvtt"',function(){return new shaka.text.Mp4VttParser}),shaka.text.SbvTextParser=function(){},shaka.text.SbvTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"SubViewer does not have init segments")},shaka.text.SbvTextParser.prototype.parseMedia=function(e,t,a){if(t=shaka.text.SbvTextParser,a=shaka.util.StringUtils.fromUTF8(e).replace(/\r+/g,""),e=[],""!=(a=a.trim())){a=a.split("\n\n");for(var r=(a=$jscomp.makeIterator(a)).next();!r.done;r=a.next()){var n=r.value.split("\n"),i=new shaka.util.TextParser(n[0]),r=t.parseTime_(i),o=i.readRegex(/,/g),i=t.parseTime_(i);if(null==r||null==o||null==i)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in SubViewer");n=n.slice(1).join("\n").trim(),r=new shaka.text.Cue(r,i,n),e.push(r)}}return e},shaka.text.SbvTextParser.prototype.parsePartialMedia=function(e,t){},shaka.text.SbvTextParser.prototype.parseNextRangeMedia=function(e){},shaka.text.SbvTextParser.prototype.areRangesParsed=function(){},shaka.text.SbvTextParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.SbvTextParser.parseTime_=function(e){var t,a;return null==(e=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g))||(t=Number(e[2]),a=Number(e[3]),59<t)||59<a?null:Number(e[4])/1e3+a+60*t+3600*(Number(e[1])||0)},goog.exportSymbol("shaka.text.SbvTextParser",shaka.text.SbvTextParser),goog.exportProperty(shaka.text.SbvTextParser.prototype,"getWebVTTRangeLimits",shaka.text.SbvTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.SbvTextParser.prototype,"areRangesParsed",shaka.text.SbvTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseNextRangeMedia",shaka.text.SbvTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parsePartialMedia",shaka.text.SbvTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseMedia",shaka.text.SbvTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseInit",shaka.text.SbvTextParser.prototype.parseInit),shaka.text.TextEngine.registerParser("text/x-subviewer",function(){return new shaka.text.SbvTextParser}),shaka.text.SrtTextParser=function(){this.parser_=new shaka.text.VttTextParser},shaka.text.SrtTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"SRT does not have init segments")},shaka.text.SrtTextParser.prototype.parseMedia=function(e,t,a){var r=shaka.text.SrtTextParser,n=(a=shaka.util.BufferUtils,shaka.util.StringUtils);return e=n.fromUTF8(e),e=r.srt2webvtt(e),a=a.toUint8(n.toUTF8(e)),this.parser_.parseMedia(a,t,!1)},shaka.text.SrtTextParser.prototype.parsePartialMedia=function(e,t){},shaka.text.SrtTextParser.prototype.parseNextRangeMedia=function(e){},shaka.text.SrtTextParser.prototype.areRangesParsed=function(){},shaka.text.SrtTextParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.SrtTextParser.srt2webvtt=function(e){var t=shaka.text.SrtTextParser,a="WEBVTT\n\n";if(""!=e){e=(e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n");for(var r=(e=$jscomp.makeIterator(e)).next();!r.done;r=e.next())a+=t.convertSrtCue_(r.value)}return a},shaka.text.SrtTextParser.convertSrtCue_=function(e){return(e=e.split(/\n/))[0].match(/\d+/)&&e.shift(),e[0]=e[0].replace(/,/g,"."),e.join("\n")+"\n\n"},goog.exportSymbol("shaka.text.SrtTextParser",shaka.text.SrtTextParser),goog.exportProperty(shaka.text.SrtTextParser,"srt2webvtt",shaka.text.SrtTextParser.srt2webvtt),goog.exportProperty(shaka.text.SrtTextParser.prototype,"getWebVTTRangeLimits",shaka.text.SrtTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.SrtTextParser.prototype,"areRangesParsed",shaka.text.SrtTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseNextRangeMedia",shaka.text.SrtTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parsePartialMedia",shaka.text.SrtTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseMedia",shaka.text.SrtTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseInit",shaka.text.SrtTextParser.prototype.parseInit),shaka.text.TextEngine.registerParser("text/srt",function(){return new shaka.text.SrtTextParser}),shaka.text.SsaTextParser=function(){},shaka.text.SsaTextParser.prototype.parseInit=function(e){goog.asserts.assert(!1,"SSA does not have init segments")},shaka.text.SsaTextParser.prototype.parseMedia=function(e,t,a){t=shaka.text.SsaTextParser;var r="";a="",e=shaka.util.StringUtils.fromUTF8(e).split(/\r?\n\s*\r?\n/);for(var n=(e=$jscomp.makeIterator(e)).next();!n.done;n=e.next()){n=n.value;if(o=t.ssaContent_.exec(n)){var i=o[1],o=o[2];if("V4 Styles"==i||"V4+ Styles"==i){r=o;continue}if("Events"==i){a=o;continue}}shaka.log.warning("SsaTextParser parser encountered an unknown part.",n)}for(e=[],n=null,r=r.split(/\r?\n/),o=(r=$jscomp.makeIterator(r)).next();!o.done;o=r.next())if(i=o.value,!/^\s*;/.test(i)&&(o=t.lineParts_.exec(i)))if(i=o[1].trim(),o=o[2].trim(),"Format"==i)n=o.split(t.valuesFormat_);else if("Style"==i){i=o.split(t.valuesFormat_),o={};for(var s=0;s<n.length&&s<i.length;s++)o[n[s]]=i[s];e.push(o)}for(n=[],r=null,i=a.split(/\r?\n/),a={},o=(i=$jscomp.makeIterator(i)).next();!o.done;a={$jscomp$loop$prop$styleName$656:a.$jscomp$loop$prop$styleName$656},o=i.next())if(o=o.value,!/^\s*;/.test(o)&&(s=t.lineParts_.exec(o)))if(o=s[1].trim(),s=s[2].trim(),"Format"==o)r=s.split(t.valuesFormat_);else if("Dialogue"==o){s=s.split(t.valuesFormat_),o={};for(var l=0;l<r.length&&l<s.length;l++)o[r[l]]=s[l];var l=t.parseTime_(o.Start),u=t.parseTime_(o.End),s=s.slice(r.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"");s=new shaka.text.Cue(l,u,s),a.$jscomp$loop$prop$styleName$656=o.Style,(o=e.find(function(t){return function(e){return e.Name==t.$jscomp$loop$prop$styleName$656}}(a)))&&t.addStyle_(s,o),n.push(s)}return n},shaka.text.SsaTextParser.prototype.parsePartialMedia=function(e,t){},shaka.text.SsaTextParser.prototype.parseNextRangeMedia=function(e){},shaka.text.SsaTextParser.prototype.areRangesParsed=function(){},shaka.text.SsaTextParser.prototype.getWebVTTRangeLimits=function(e){},shaka.text.SsaTextParser.addStyle_=function(e,t){var a=shaka.text.Cue,r=shaka.text.SsaTextParser,n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=(n=t.PrimaryColour)&&r.parseSsaColor_(n))&&(e.color=n),(n=t.BackColour)&&(r=r.parseSsaColor_(n))&&(e.backgroundColor=r),t.Bold&&(e.fontWeight=a.fontWeight.BOLD),t.Italic&&(e.fontStyle=a.fontStyle.ITALIC),t.Underline&&e.textDecoration.push(a.textDecoration.UNDERLINE),(r=t.Spacing)&&(e.letterSpacing=r+"px"),r=t.Alignment)switch(parseInt(r,10)){case 1:e.displayAlign=a.displayAlign.AFTER,e.textAlign=a.textAlign.START;break;case 2:e.displayAlign=a.displayAlign.AFTER,e.textAlign=a.textAlign.CENTER;break;case 3:e.displayAlign=a.displayAlign.AFTER,e.textAlign=a.textAlign.END;break;case 5:e.displayAlign=a.displayAlign.BEFORE,e.textAlign=a.textAlign.START;break;case 6:e.displayAlign=a.displayAlign.BEFORE,e.textAlign=a.textAlign.CENTER;break;case 7:e.displayAlign=a.displayAlign.BEFORE,e.textAlign=a.textAlign.END;break;case 9:e.displayAlign=a.displayAlign.CENTER,e.textAlign=a.textAlign.START;break;case 10:e.displayAlign=a.displayAlign.CENTER,e.textAlign=a.textAlign.CENTER;break;case 11:e.displayAlign=a.displayAlign.CENTER,e.textAlign=a.textAlign.END}(a=t.AlphaLevel)&&(e.opacity=parseFloat(a))},shaka.text.SsaTextParser.parseSsaColor_=function(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null},shaka.text.SsaTextParser.parseTime_=function(e){var t=shaka.text.SsaTextParser.timeFormat_.exec(e),a=(e=t[1]?parseInt(t[1].replace(":",""),10):0,parseInt(t[2],10));return 3600*e+60*a+(t=parseFloat(t[3]))},goog.exportSymbol("shaka.text.SsaTextParser",shaka.text.SsaTextParser),goog.exportProperty(shaka.text.SsaTextParser.prototype,"getWebVTTRangeLimits",shaka.text.SsaTextParser.prototype.getWebVTTRangeLimits),goog.exportProperty(shaka.text.SsaTextParser.prototype,"areRangesParsed",shaka.text.SsaTextParser.prototype.areRangesParsed),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseNextRangeMedia",shaka.text.SsaTextParser.prototype.parseNextRangeMedia),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parsePartialMedia",shaka.text.SsaTextParser.prototype.parsePartialMedia),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseMedia",shaka.text.SsaTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseInit",shaka.text.SsaTextParser.prototype.parseInit),shaka.text.SsaTextParser.ssaContent_=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,shaka.text.SsaTextParser.lineParts_=/^\s*([^:]+):\s*(.*)/,shaka.text.SsaTextParser.valuesFormat_=/\s*,\s*/,shaka.text.SsaTextParser.timeFormat_=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/,shaka.text.TextEngine.registerParser("text/x-ssa",function(){return new shaka.text.SsaTextParser}),function(){}),McEncryptionSchemePolyfill=(EmeEncryptionSchemePolyfill.install=function(){EmeEncryptionSchemePolyfill.originalRMKSA_?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(EmeEncryptionSchemePolyfill.originalRMKSA_=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.probeRMKSA_):console.debug("EmeEncryptionSchemePolyfill: EME not found")},EmeEncryptionSchemePolyfill.probeRMKSA_=function(t,a){var r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),e.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(n,t,a),2)):hasEncryptionScheme(r=e.yieldResult)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.originalRMKSA_,e.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.polyfillRMKSA_,e.return(EmeEncryptionSchemePolyfill.polyfillRMKSA_.call(n,t,a)))})},EmeEncryptionSchemePolyfill.polyfillRMKSA_=function(t,a){var r,n,i,o,s,l,u,c,d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1!=e.nextAddress)return c=e.yieldResult,e.return(new EmeEncryptionSchemePolyfillMediaKeySystemAccess(c,r));for(console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),r=guessSupportedScheme(t),n=[],i=$jscomp.makeIterator(a),o=i.next();!o.done;o=i.next())u=o.value,s=EmeEncryptionSchemePolyfill.filterCapabilities_(u.videoCapabilities,r),l=EmeEncryptionSchemePolyfill.filterCapabilities_(u.audioCapabilities,r),u.videoCapabilities&&u.videoCapabilities.length&&!s.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||((u=Object.assign({},u)).videoCapabilities=s,u.audioCapabilities=l,n.push(u));if(n.length)return e.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(d,t,n),2);throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c})},EmeEncryptionSchemePolyfill.filterCapabilities_=function(e,t){return e&&e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t})},goog.exportSymbol("EmeEncryptionSchemePolyfill",EmeEncryptionSchemePolyfill),goog.exportProperty(EmeEncryptionSchemePolyfill,"install",EmeEncryptionSchemePolyfill.install),function(){}),EmeEncryptionSchemePolyfillMediaKeySystemAccess=(McEncryptionSchemePolyfill.install=function(){McEncryptionSchemePolyfill.originalDecodingInfo_?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(McEncryptionSchemePolyfill.originalDecodingInfo_=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.probeDecodingInfo_):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")},McEncryptionSchemePolyfill.probeDecodingInfo_=function(t){var a,r,n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),e.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(n,t),2);case 2:if(a=e.yieldResult,!t.keySystemConfiguration)return e.return(a);if((r=a.keySystemAccess)&&hasEncryptionScheme(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.originalDecodingInfo_,e.return(a);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.polyfillDecodingInfo_,r){e.jumpTo(3);break}return r=a,e.yield(McEncryptionSchemePolyfill.getMediaKeySystemAccess_(t),4);case 4:return r.keySystemAccess=e.yieldResult,e.return(a);case 3:return e.return(McEncryptionSchemePolyfill.polyfillDecodingInfo_.call(n,t))}})},McEncryptionSchemePolyfill.polyfillDecodingInfo_=function(t){var a,r,n,i,o,s,l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),a=null,t.keySystemConfiguration&&(n=t.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,n=n.video&&n.video.encryptionScheme,a=guessSupportedScheme(i),i={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:t},r&&r!=a||n&&n!=a)?e.return(i):e.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(l,t),2);case 2:if((o=e.yieldResult).keySystemAccess)o.keySystemAccess=new EmeEncryptionSchemePolyfillMediaKeySystemAccess(o.keySystemAccess,a);else if(t.keySystemConfiguration)return s=o,e.yield(McEncryptionSchemePolyfill.getMediaKeySystemAccess_(t),5);e.jumpTo(3);break;case 5:s.keySystemAccess=e.yieldResult;case 3:return e.return(o)}})},McEncryptionSchemePolyfill.getMediaKeySystemAccess_=function(t){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=McEncryptionSchemePolyfill.convertToMediaKeySystemConfig_(t),e.yield(navigator.requestMediaKeySystemAccess(t.keySystemConfiguration.keySystem,[a]),2)):(a=e.yieldResult,e.return(a))})},McEncryptionSchemePolyfill.convertToMediaKeySystemConfig_=function(e){var t=e.keySystemConfiguration,a=[],r=[];return t.audio&&a.push({robustness:t.audio.robustness||"",contentType:e.audio.contentType}),t.video&&r.push({robustness:t.video.robustness||"",contentType:e.video.contentType}),e={initDataTypes:t.initDataType?[t.initDataType]:[],distinctiveIdentifier:t.distinctiveIdentifier,persistentState:t.persistentState,sessionTypes:t.sessionTypes},a.length&&(e.audioCapabilities=a),r.length&&(e.videoCapabilities=r),e},goog.exportSymbol("McEncryptionSchemePolyfill",McEncryptionSchemePolyfill),goog.exportProperty(McEncryptionSchemePolyfill,"install",McEncryptionSchemePolyfill.install),function(e,t){this.mksa_=e,this.scheme_=t,this.keySystem=e.keySystem});function guessSupportedScheme(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function hasEncryptionScheme(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}EmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.getConfiguration=function(){var e=this.mksa_.getConfiguration();if(e.videoCapabilities)for(var t=$jscomp.makeIterator(e.videoCapabilities),a=t.next();!a.done;a=t.next())a.value.encryptionScheme=this.scheme_;if(e.audioCapabilities)for(a=(t=$jscomp.makeIterator(e.audioCapabilities)).next();!a.done;a=t.next())a.value.encryptionScheme=this.scheme_;return e},EmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.createMediaKeys=function(){return this.mksa_.createMediaKeys()};var EncryptionSchemePolyfills=function(){};EncryptionSchemePolyfills.install=function(){EmeEncryptionSchemePolyfill.install(),McEncryptionSchemePolyfill.install()},goog.exportSymbol("EncryptionSchemePolyfills",EncryptionSchemePolyfills),goog.exportProperty(EncryptionSchemePolyfills,"install",EncryptionSchemePolyfills.install),void 0!==module&&module.exports&&(module.exports=EncryptionSchemePolyfills)}.call(exportTo,innerGlobal,innerGlobal,void 0),exportTo.shaka)exports[k]=exportTo.shaka[k]}()}.call(this,__webpack_require__(47))},function(e,t,a){"use strict";var i=a(14);e.exports=function(r,n,e){if(i(r),void 0===n)return r;switch(e){case 1:return function(e){return r.call(n,e)};case 2:return function(e,t){return r.call(n,e,t)};case 3:return function(e,t,a){return r.call(n,e,t,a)}}return function(){return r.apply(n,arguments)}}},function(e,t,a){"use strict";var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,a){"use strict";var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?n:r)(e)}},function(e,t,a){"use strict";var r=a(5);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,a){"use strict";var n=a(6);e.exports=function(e,t){if(!n(e))return e;var a,r;if(t&&"function"==typeof(a=e.toString)&&!n(r=a.call(e))||"function"==typeof(a=e.valueOf)&&!n(r=a.call(e))||!t&&"function"==typeof(a=e.toString)&&!n(r=a.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,a){"use strict";e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,a){"use strict";var n=a(0),i=a(16),o=a(5);e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],r={};r[e]=t(a),n(n.S+n.F*o(function(){a(1)}),"Object",r)}},function(e,t,a){"use strict";var _=a(30),k=a(66),b=a(12),S=a(9),r=a(124);e.exports=function(d,e){var h=1==d,p=2==d,f=3==d,m=4==d,g=6==d,y=5==d||g,v=e||r;return function(e,t,a){for(var r,n,i=b(e),o=k(i),s=_(t,a,3),l=S(o.length),u=0,c=h?v(e,l):p?v(e,0):void 0;u<l;u++)if((y||u in o)&&(n=s(r=o[u],u,i),d))if(h)c[u]=n;else if(n)switch(d){case 3:return!0;case 5:return r;case 6:return u;case 2:c.push(r)}else if(m)return!1;return g?-1:f||m?m:c}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*n},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))};var r=t.EPSILON=1e-6;t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random;var n=Math.PI/180},function(O,U,e){"use strict";var p,f,m,g,y,B,F,j,v,t,V,_,$,G,H,r,W,k,z,K,q,Y,b,X,Q,Z,a,n,J,ee,te,ae,re,ne,S,ie,E,oe,i,se,le,ue,T,x,ce,de,he,pe,fe,me,ge,ye,ve,_e,ke,be,Se,Ee,Te,xe,Ae,Pe,A,o,P,C,Ce,w,s,M,we,I,Me,Ie,Re,R,l,d,De,D,u,Ne,Le,Oe,Ue,Be,Fe,je,N,Ve,c,h,L,$e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e(10)?(p=e(42),f=e(3),m=e(5),g=e(0),y=e(85),s=e(134),B=e(30),F=e(55),j=e(48),v=e(19),t=e(57),V=e(32),_=e(9),$=e(179),G=e(51),H=e(34),r=e(23),W=e(60),k=e(6),z=e(12),K=e(121),q=e(52),Y=e(26),b=e(53).f,X=e(123),Q=e(49),Z=e(8),a=e(37),u=e(73),n=e(69),c=e(126),J=e(62),ee=e(80),te=e(54),ae=e(125),re=e(169),ne=e(11),e=e(25),S=ne.f,ie=e.f,E=f.RangeError,oe=f.TypeError,i=f.Uint8Array,le="Shared"+(se="ArrayBuffer"),ue="BYTES_PER_ELEMENT",T="prototype",h=Array[T],x=s.ArrayBuffer,ce=s.DataView,de=a(0),he=a(2),pe=a(3),fe=a(4),me=a(5),ge=a(6),ye=u(!0),ve=u(!1),_e=c.values,ke=c.keys,be=c.entries,Se=h.lastIndexOf,Ee=h.reduce,Te=h.reduceRight,xe=h.join,Ae=h.sort,Pe=h.slice,A=h.toString,o=h.toLocaleString,P=Z("iterator"),C=Z("toStringTag"),Ce=Q("typed_constructor"),w=Q("def_constructor"),s=y.CONSTR,M=y.TYPED,we=y.VIEW,I="Wrong length!",Me=a(1,function(e,t){return d(n(e,e[w]),t)}),Ie=m(function(){return 1===new i(new Uint16Array([1]).buffer)[0]}),Re=!!i&&!!i[T].set&&m(function(){new i(1).set({})}),R=function(e,t){e=V(e);if(e<0||e%t)throw E("Wrong offset!");return e},l=function(e){if(k(e)&&M in e)return e;throw oe(e+" is not a typed array!")},d=function(e,t){if(k(e)&&Ce in e)return new e(t);throw oe("It is not a typed array constructor!")},De=function(e,t){return D(n(e,e[w]),t)},D=function(e,t){for(var a=0,r=t.length,n=d(e,r);a<r;)n[a]=t[a++];return n},u=function(e,t,a){S(e,t,{get:function(){return this._d[a]}})},Ne=function(e){var t,a,r,n,i,o,s=z(e),e=arguments.length,l=1<e?arguments[1]:void 0,u=void 0!==l,c=X(s);if(null!=c&&!K(c)){for(o=c.call(s),r=[],t=0;!(i=o.next()).done;t++)r.push(i.value);s=r}for(u&&2<e&&(l=B(l,arguments[2],2)),t=0,a=_(s.length),n=d(this,a);t<a;t++)n[t]=u?l(s[t],t):s[t];return n},Le=function(){for(var e=0,t=arguments.length,a=d(this,t);e<t;)a[e]=arguments[e++];return a},Oe=!!i&&m(function(){o.call(new i(1))}),Ue=function(){return o.apply(Oe?Pe.call(l(this)):l(this),arguments)},Be={copyWithin:function(e,t){return re.call(l(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return fe(l(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return ae.apply(l(this),arguments)},filter:function(e){return De(this,he(l(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return me(l(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ge(l(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){de(l(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ve(l(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ye(l(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return xe.apply(l(this),arguments)},lastIndexOf:function(e){return Se.apply(l(this),arguments)},map:function(e){return Me(l(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return Ee.apply(l(this),arguments)},reduceRight:function(e){return Te.apply(l(this),arguments)},reverse:function(){for(var e,t=l(this).length,a=Math.floor(t/2),r=0;r<a;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return pe(l(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return Ae.call(l(this),e)},subarray:function(e,t){var a=l(this),r=a.length,e=G(e,r);return new(n(a,a[w]))(a.buffer,a.byteOffset+e*a.BYTES_PER_ELEMENT,_((void 0===t?r:G(t,r))-e))}},Fe=function(e,t){return De(this,Pe.call(l(this),e,t))},je=function(e){l(this);var t=R(arguments[1],1),a=this.length,r=z(e),n=_(r.length),i=0;if(a<n+t)throw E(I);for(;i<n;)this[t+i]=r[i++]},N={entries:function(){return be.call(l(this))},keys:function(){return ke.call(l(this))},values:function(){return _e.call(l(this))}},Ve=function(e,t){return k(e)&&e[M]&&"symbol"!=(void 0===t?"undefined":$e(t))&&t in e&&String(+t)==String(t)},c=function(e,t){return Ve(e,t=H(t,!0))?j(2,e[t]):ie(e,t)},h=function(e,t,a){return!(Ve(e,t=H(t,!0))&&k(a)&&r(a,"value"))||r(a,"get")||r(a,"set")||a.configurable||r(a,"writable")&&!a.writable||r(a,"enumerable")&&!a.enumerable?S(e,t,a):(e[t]=a.value,e)},s||(e.f=c,ne.f=h),g(g.S+g.F*!s,"Object",{getOwnPropertyDescriptor:c,defineProperty:h}),m(function(){A.call({})})&&(A=o=function(){return xe.call(this)}),L=t({},Be),t(L,N),v(L,P,N.values),t(L,{slice:Fe,set:je,constructor:function(){},toString:A,toLocaleString:Ue}),u(L,"buffer","b"),u(L,"byteOffset","o"),u(L,"byteLength","l"),u(L,"length","e"),S(L,C,{get:function(){return this[M]}}),O.exports=function(e,u,t,n){function c(e,r){S(e,r,{get:function(){var e=this,t=r;return(e=e._d).v[a](t*u+e.o,Ie)},set:function(e){var t=this,a=r;t=t._d,n&&(e=(e=Math.round(e))<0?0:255<e?255:255&e),t.v[i](a*u+t.o,e,Ie)},enumerable:!0})}var d=e+((n=!!n)?"Clamped":"")+"Array",a="get"+e,i="set"+e,h=f[d],o=h||{},e=h&&Y(h),r=!h||!y.ABV,s={},l=h&&h[T],r=(r?(h=t(function(e,t,a,r){F(e,h,d,"_d");var n,i,o=0,s=0;if(k(t)){if(!(t instanceof x||(l=W(t))==se||l==le))return M in t?D(h,t):Ne.call(h,t);var l=t,s=R(a,u),a=t.byteLength;if(void 0===r){if(a%u)throw E(I);if((n=a-s)<0)throw E(I)}else if(a<(n=_(r)*u)+s)throw E(I);i=n/u}else i=$(t),l=new x(n=i*u);for(v(e,"_d",{b:l,o:s,l:n,e:i,v:new ce(l)});o<i;)c(e,o++)}),l=h[T]=q(L),v(l,"constructor",h)):m(function(){h(1)})&&m(function(){new h(-1)})&&ee(function(e){new h,new h(null),new h(1.5),new h(e)},!0)||(h=t(function(e,t,a,r){return F(e,h,d),k(t)?t instanceof x||(e=W(t))==se||e==le?void 0!==r?new o(t,R(a,u),r):void 0!==a?new o(t,R(a,u)):new o(t):M in t?D(h,t):Ne.call(h,t):new o($(t))}),de(e!==Function.prototype?b(o).concat(b(e)):b(o),function(e){e in h||v(h,e,o[e])}),h[T]=l,p)||(l.constructor=h),l[P]),t=!!r&&("values"==r.name||null==r.name),e=N.values;v(h,Ce,!0),v(l,M,d),v(l,we,!0),v(l,w,h),(n?new h(1)[C]==d:C in l)||S(l,C,{get:function(){return d}}),s[d]=h,g(g.G+g.W+g.F*(h!=o),s),g(g.S,d,{BYTES_PER_ELEMENT:u}),g(g.S+g.F*m(function(){o.of.call(h,1)}),d,{from:Ne,of:Le}),ue in l||v(l,ue,u),g(g.P,d,Be),te(d),g(g.P+g.F*Re,d,{set:je}),g(g.P+g.F*!t,d,N),p||l.toString==A||(l.toString=A),g(g.P+g.F*m(function(){new h(1).slice()}),d,{slice:Fe}),g(g.P+g.F*(m(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!m(function(){l.toLocaleString.call([1,2])})),d,{toLocaleString:Ue}),J[d]=t?r:e,p||t||v(l,P,e)}):O.exports=function(){}},function(e,t,a){"use strict";function n(e,t,a){var r=l.get(e);if(!r){if(!a)return;l.set(e,r=new i)}if(!(e=r.get(t))){if(!a)return;r.set(t,e=new i)}return e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(132),o=a(0),s=a(65)("metadata"),l=s.store||(s.store=new(a(177)));e.exports={store:l,map:n,has:function(e,t,a){t=n(t,a,!1);return void 0!==t&&t.has(e)},get:function(e,t,a){t=n(t,a,!1);return void 0===t?void 0:t.get(e)},set:function(e,t,a,r){n(a,r,!0).set(e,t)},keys:function(e,t){var e=n(e,t,!1),a=[];return e&&e.forEach(function(e,t){a.push(t)}),a},key:function(e){return void 0===e||"symbol"==(void 0===e?"undefined":r(e))?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},function(e,t,a){"use strict";function r(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}Object.defineProperty(t,"__esModule",{value:!0});var n,i={PLAYING:"PLAYING",PAUSE:"PAUSE",LOADING:"LOADING",CLOSED:"CLOSED",ENDED:"ENDED",ERROR:"ERROR"},o={SLOW:"SLOW",NORMAL:"NORMAL",FAST:"FAST"},s={TINY:"TINY",MOBILE:"MOBILE",NORMAL:"NORMAL"};r(n={addRequestFilter:null,adsDelay:2e3,adsLoadTimeout:-1,adsMarkers:[],adsMode:"default",adsParamsToEncode:[],airPlayEnabled:!1,allAudios:[],allQuality:[],allSubtitles:[],autoplay:!0,bitrateConfig:null,callbackForLogger:null,callbackForReturn:null,callbackForSubtitles:null,callbacksWithPlayers:null,cast:null,chromeCastEnabled:!1,clientPosition:-1,configuration:null,currentAudioLanguage:null,currentPlaylistIndex:0,currentPlaylistItem:null,currentQuality:null,currentSpeed:o.NORMAL,currentSubtitleLanguage:null,currentTime:0,currentTimeBuffer:0,daiConfig:null,debug:!1,defaultLanguage:null,disableKeyEvents:!1,div:null,duration:null,dynamicThumbnails:!1,externalSubtitles:null,giantPreview:null,hideControlBarOnStart:!1,hideUITime:3e3,improveStartUp:!1,isAdPlaying:!1,isLive:!1,isSeeking:!1,key:null,marginSeekbarLeft:0,marginVideoLeft:0,mutedAtStart:!1,order:{currentOrder:null,seekTo:-1},pageUrl:null,playlist:[],preferredAudioCodec:[],reinitializeAfterAds:!1,resumePosition:null,seekbarWidth:0,showAdsUI:!1,showingFullUI:!0,showingLanguageUI:!1,ssaiMediaTailor:null,size:s.NORMAL,startFullScreen:!1,startingBufferLength:null,staticThumbnails:null,status:i.PAUSED,thumbnails:[],trailer:!1,type_360:null,unMuteCallback:null,useDefaultControls:!1,useNewRelicTracker:!1,VAST_URI:null,volume:1,watermarkURL:null},"bitrateConfig",null),r(n,"backupManifests",[]),r(n,"preferredVideoCodec",[]),r(n,"player",null),r(n,"enableVpaid",!0);t.STATUS=i,t.RATE=o,t.ORDER={PLAY:"PLAY",PAUSE:"PAUSE",SEEK:"SEEK",FULL_SCREEN:"FULL_SCREEN",SPEED:"SPEED",QUALITY:"QUALITY"},t.SIZE=s,t.initialStore=n},function(e,t,a){"use strict";e.exports=!1},function(e,t,a){"use strict";function r(e){l(e,i,{value:{i:"O"+ ++u,w:{}}})}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(49)("meta"),o=a(6),s=a(23),l=a(11).f,u=0,c=Object.isExtensible||function(){return!0},d=!a(5)(function(){return c(Object.preventExtensions({}))}),h=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==(void 0===e?"undefined":n(e))?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!c(e))return"F";if(!t)return"E";r(e)}return e[i].i},getWeak:function(e,t){if(!s(e,i)){if(!c(e))return!0;if(!t)return!1;r(e)}return e[i].w},onFreeze:function(e){return d&&h.NEED&&c(e)&&!s(e,i)&&r(e),e}}},function(e,t,a){"use strict";var r=a(8)("unscopables"),n=Array.prototype;null==n[r]&&a(19)(n,r,{}),e.exports=function(e){n[r][e]=!0}},function(e,t,a){"use strict";var r=function(e){return 9e4*e},n=function(e,t){return e*t},i=function(e){return e/9e4},o=function(e,t){return e/t};e.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:r,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:o,audioTsToVideoTs:function(e,t){return r(o(e,t))},videoTsToAudioTs:function(e,t){return n(i(e),t)},metadataTsToSeconds:function(e,t,a){return i(a?e:e-t)}}},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,n,i;return t=e.lib,n=t.Base,i=t.WordArray,(t=e.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,a=[],r=0;r<t;r++){var n=e[r];a.push(n.high),a.push(n.low)}return i.create(a,this.sigBytes)},clone:function(){for(var e,t=(e=n.clone.call(this)).words=this.words.slice(0),a=t.length,r=0;r<a;r++)t[r]=t[r].clone();return e}}),e},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,a){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,a){"use strict";var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,a){"use strict";var r=a(154),n=a(109);e.exports=Object.keys||function(e){return r(e,n)}},function(e,t,a){"use strict";var r=a(32),n=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?n(e+t,0):i(e,t)}},function(e,t,a){"use strict";function r(){}var n=a(2),i=a(155),o=a(109),s=a(108)("IE_PROTO"),l="prototype",u=function(){var e=a(106)("iframe"),t=o.length;for(e.style.display="none",a(110).appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;t--;)delete u[l][o[t]];return u()};e.exports=Object.create||function(e,t){var a;return null!==e?(r[l]=n(e),a=new r,r[l]=null,a[s]=e):a=u(),void 0===t?a:i(a,t)}},function(e,t,a){"use strict";var r=a(154),n=a(109).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},function(e,t,a){"use strict";var r=a(3),n=a(11),i=a(10),o=a(8)("species");e.exports=function(e){e=r[e];i&&e&&!e[o]&&n.f(e,o,{configurable:!0,get:function(){return this}})}},function(e,t,a){"use strict";e.exports=function(e,t,a,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(a+": incorrect invocation!");return e}},function(e,t,a){"use strict";var d=a(30),h=a(167),p=a(121),f=a(2),m=a(9),g=a(123),y={},v={},a=e.exports=function(e,t,a,r,n){var i,o,s,l,n=n?function(){return e}:g(e),u=d(a,r,t?2:1),c=0;if("function"!=typeof n)throw TypeError(e+" is not iterable!");if(p(n)){for(i=m(e.length);c<i;c++)if((l=t?u(f(o=e[c])[0],o[1]):u(e[c]))===y||l===v)return l}else for(s=n.call(e);!(o=s.next()).done;)if((l=h(s,u,o.value,t))===y||l===v)return l};a.BREAK=y,a.RETURN=v},function(e,t,a){"use strict";var n=a(20);e.exports=function(e,t,a){for(var r in t)n(e,r,t[r],a);return e}},function(e,t,a){"use strict";var r=a(6);e.exports=function(e,t){if(r(e)&&e._t===t)return e;throw TypeError("Incompatible receiver, "+t+" required!")}},function(e,t,a){"use strict";var r=a(11).f,n=a(23),i=a(8)("toStringTag");e.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,a){"use strict";var r=a(31),n=a(8)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),n))?t:i?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t}},function(e,t,a){"use strict";function r(e,t,a){var r={},n=o(function(){return!!s[e]()||""!=""[e]()}),t=r[e]=n?t(c):s[e];a&&(r[a]=t),i(i.P+i.F*n,"String",r)}var i=a(0),n=a(35),o=a(5),s=a(112),a="["+s+"]",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),c=r.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),e=2&t?e.replace(u,""):e};e.exports=r},function(e,t,a){"use strict";e.exports={}},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a,r,n,c;return a=(t=e).lib,r=a.WordArray,n=a.Hasher,a=t.algo,c=[],a=a.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=this._hash.words,r=a[0],n=a[1],i=a[2],o=a[3],s=a[4],l=0;l<80;l++){c[l]=l<16?0|e[t+l]:(u=c[l-3]^c[l-8]^c[l-14]^c[l-16])<<1|u>>>31;var u=(r<<5|r>>>27)+s+c[l];u+=l<20?1518500249+(n&i|~n&o):l<40?1859775393+(n^i^o):l<60?(n&i|n&o|i&o)-1894007588:(n^i^o)-899497514,s=o,o=i,i=n<<30|n>>>2,n=r,r=u}a[0]=a[0]+r|0,a[1]=a[1]+n|0,a[2]=a[2]+i|0,a[3]=a[3]+o|0,a[4]=a[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=Math.floor(a/4294967296),t[15+(64+r>>>9<<4)]=a,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e;return(e=n.clone.call(this))._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(a),t.HmacSHA1=n._createHmacHelper(a),e.SHA1},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));for(var a=e.blockSize,r=4*a,e=((t=t.sigBytes>r?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),n=e.words,i=t.words,o=0;o<a;o++)n[o]^=1549556828,i[o]^=909522486;e.sigBytes=t.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r=a(16),n=a(3),i="__core-js_shared__",o=n[i]||(n[i]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:a(42)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,a){"use strict";var r=a(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,a){"use strict";t.f={}.propertyIsEnumerable},function(e,t,a){"use strict";var r=a(2);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,a){"use strict";var r=a(2),n=a(14),i=a(8)("species");e.exports=function(e,t){var e=r(e).constructor;return void 0===e||null==(e=r(e)[i])?t:n(e)}},function(e,t,a){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=a(531)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){function r(e){return e=e<10?"0"+e:e}this.debugMode=(e||{}).debugMode||!1,this.debugMode&&console.log("%c---------NEXPLAYER LOG INIT---------","background: #000; color: #ff9900"),o=(new Date).getTime(),s=t,this.getTimestamp=function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),e=e.getSeconds();return t+":"+r(a)+":"+r(e)}}var o,s,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.prototype.printLog=function(e,t,a){try{var r=new XMLHttpRequest,n=(r.open("POST","https://apihtml5.azurewebsites.net/api/TEST_APILog?code=6beh8/R7/aIIgdJMaiQBeygPgQGV9j6/2a62lnmLwNa9cOh0nd/VxQ==",!0),r.setRequestHeader("Access-Control-Allow-Origin","*"),r.setRequestHeader("Content-type","application/json"),(new Date).getTime()),i=e+" ("+(n-o)/1e3+"): "+t;null!=s&&s(i),"object"==(void 0===t?"undefined":l(t))?(console.log("%c"+e+"("+(n-o)/1e3+"): ","background: #000; color: "+a),console.log(t)):console.log("%c"+i,"background: #000; color: "+a)}catch(e){}},r.prototype.debug=function(e,t){this.debugMode&&this.printLog("NexPlayer DEBUG",e,"#ffff19"),t&&this.printLog("NexPlayer DEBUG",t,"#ffff19")},r.prototype.error=function(e,t){this.debugMode&&this.printLog("NexPlayer ERROR",e,"#ff2d2d"),t&&this.printLog("NexPlayer ERROR",t,"#ff2d2d")},r.prototype.DRMerror=function(e){this.debugMode&&this.printLog("NexPlayer DRM ERROR "+e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ","#c55dbe")},r.prototype.DRMlog=function(e){this.debugMode&&this.printLog("NexPlayer DRM LOG "+e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ","#e773fe")},r.prototype.log=function(e,t){this.debugMode&&this.printLog("NexPlayer LOG",e,"#83ff4f"),t&&this.printLog("NexPlayer LOG",t,"#83ff4f")},r.prototype.info=function(e,t){this.debugMode&&this.printLog("NexPlayer INFO",e,"#569fff"),t&&this.printLog("NexPlayer INFO",t,"#569fff")},r.prototype.warn=function(e,t){this.debugMode&&this.printLog("NexPlayer WARN",e,"#f99111"),t&&this.printLog("NexPlayer WARN",t,"#f99111")},t.Logger=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Map;r.set(420,{array:[0],errorName:"EXTERNAL_SUBTITLES_TOO_LARGE"}),r.set(422,{array:[0],errorName:"UNSUPPORTED_FILE_TYPE"}),r.set(1e3,{array:[0],errorName:"UNSUPPORTED_SCHEME"}),r.set(1001,{array:[0,1,2,3],errorName:"BAD_HTTP_STATUS"}),r.set(1002,{array:[0,1],errorName:"HTTP_ERROR"}),r.set(1003,{array:[0],errorName:"TIMEOUT"}),r.set(1004,{array:[0],errorName:"MALFORMED_DATA_URI"}),r.set(1006,{array:[0],errorName:"REQUEST_FILTER_ERROR"}),r.set(1007,{array:[0],errorName:"RESPONSE_FILTER_ERROR"}),r.set(1008,{array:[],errorName:"MALFORMED_TEST_URI"}),r.set(1009,{array:[],errorName:"UNEXPECTED_TEST_REQUEST"}),r.set(1010,{array:[],errorName:"ATTEMPTS_EXHAUSTED"}),r.set(2e3,{array:[],errorName:"INVALID_TEXT_HEADER"}),r.set(2001,{array:[0],errorName:"INVALID_TEXT_CUE"}),r.set(2003,{array:[],errorName:"UNABLE_TO_DETECT_ENCODING"}),r.set(2004,{array:[],errorName:"BAD_ENCODING"}),r.set(2005,{array:[0],errorName:"INVALID_XML"}),r.set(2007,{array:[],errorName:"INVALID_MP4_TTML"}),r.set(2008,{array:[],errorName:"INVALID_MP4_VTT"}),r.set(2009,{array:[0],errorName:"UNABLE_TO_EXTRACT_CUE_START_TIME"}),r.set(2010,{array:[],errorName:"INVALID_MP4_CEA"}),r.set(2011,{array:[0],errorName:"TEXT_COULD_NOT_GUESS_MIME_TYPE"}),r.set(2012,{array:[],errorName:"CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS"}),r.set(2013,{array:[0],errorName:"TEXT_ONLY_WEBVTT_SRC_EQUALS"}),r.set(2014,{array:[0],errorName:"MISSING_TEXT_PLUGIN"}),r.set(3e3,{array:[],errorName:"BUFFER_READ_OUT_OF_BOUNDS"}),r.set(3001,{array:[],errorName:"JS_INTEGER_OVERFLOW"}),r.set(3002,{array:[],errorName:"EBML_OVERFLOW"}),r.set(3003,{array:[],errorName:"EBML_BAD_FLOATING_POINT_SIZE"}),r.set(3004,{array:[],errorName:"MP4_SIDX_WRONG_BOX_TYPE"}),r.set(3005,{array:[],errorName:"MP4_SIDX_INVALID_TIMESCALE"}),r.set(3006,{array:[],errorName:"MP4_SIDX_TYPE_NOT_SUPPORTED"}),r.set(3007,{array:[],errorName:"WEBM_CUES_ELEMENT_MISSING"}),r.set(3008,{array:[],errorName:"WEBM_EBML_HEADER_ELEMENT_MISSING"}),r.set(3009,{array:[],errorName:"WEBM_SEGMENT_ELEMENT_MISSING"}),r.set(3010,{array:[],errorName:"WEBM_INFO_ELEMENT_MISSING"}),r.set(3011,{array:[],errorName:"WEBM_DURATION_ELEMENT_MISSING"}),r.set(3012,{array:[],errorName:"WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING"}),r.set(3013,{array:[],errorName:"WEBM_CUE_TIME_ELEMENT_MISSING"}),r.set(3014,{array:[0],errorName:"MEDIA_SOURCE_OPERATION_FAILED"}),r.set(3015,{array:[0],errorName:"MEDIA_SOURCE_OPERATION_THREW"}),r.set(3016,{array:[0,1,2],errorName:"VIDEO_ERROR"}),r.set(3017,{array:[0],errorName:"QUOTA_EXCEEDED_ERROR"}),r.set(3018,{array:[],errorName:"TRANSMUXING_FAILED"}),r.set(3019,{array:[],errorName:"CONTENT_TRANSFORMATION_FAILED"}),r.set(4e3,{array:[0],errorName:"UNABLE_TO_GUESS_MANIFEST_TYPE"}),r.set(4001,{array:[0],errorName:"DASH_INVALID_XML"}),r.set(4002,{array:[],errorName:"DASH_NO_SEGMENT_INFO"}),r.set(4003,{array:[],errorName:"DASH_EMPTY_ADAPTATION_SET"}),r.set(4004,{array:[],errorName:"DASH_EMPTY_PERIOD"}),r.set(4005,{array:[],errorName:"DASH_WEBM_MISSING_INIT"}),r.set(4006,{array:[],errorName:"DASH_UNSUPPORTED_CONTAINER"}),r.set(4007,{array:[],errorName:"DASH_PSSH_BAD_ENCODING"}),r.set(4008,{array:[],errorName:"DASH_NO_COMMON_KEY_SYSTEM"}),r.set(4009,{array:[],errorName:"DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED"}),r.set(4010,{array:[],errorName:"DASH_CONFLICTING_KEY_IDS"}),r.set(4012,{array:[0],errorName:"RESTRICTIONS_CANNOT_BE_MET"}),r.set(4015,{array:[],errorName:"HLS_PLAYLIST_HEADER_MISSING"}),r.set(4016,{array:[0],errorName:"INVALID_HLS_TAG"}),r.set(4017,{array:[],errorName:"HLS_INVALID_PLAYLIST_HIERARCHY"}),r.set(4018,{array:[],errorName:"DASH_DUPLICATE_REPRESENTATION_ID"}),r.set(4020,{array:[],errorName:"HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND"}),r.set(4022,{array:[],errorName:"HLS_MASTER_PLAYLIST_NOT_PROVIDED"}),r.set(4023,{array:[0],errorName:"HLS_REQUIRED_ATTRIBUTE_MISSING"}),r.set(4024,{array:[0],errorName:"HLS_REQUIRED_TAG_MISSING"}),r.set(4025,{array:[0],errorName:"HLS_COULD_NOT_GUESS_CODECS"}),r.set(4026,{array:[],errorName:"HLS_KEYFORMATS_NOT_SUPPORTED"}),r.set(4027,{array:[],errorName:"DASH_UNSUPPORTED_XLINK_ACTUATE"}),r.set(4028,{array:[],errorName:"DASH_XLINK_DEPTH_LIMIT"}),r.set(4030,{array:[0,1],errorName:"HLS_COULD_NOT_PARSE_SEGMENT_START_TIME"}),r.set(4032,{array:[],errorName:"CONTENT_UNSUPPORTED_BY_BROWSER"}),r.set(4033,{array:[],errorName:"CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM"}),r.set(4034,{array:[],errorName:"HLS_AES_128_ENCRYPTION_NOT_SUPPORTED"}),r.set(4035,{array:[],errorName:"HLS_INTERNAL_SKIP_STREAM"}),r.set(4036,{array:[],errorName:"NO_VARIANTS"}),r.set(4037,{array:[],errorName:"PERIOD_FLATTENING_FAILED"}),r.set(4038,{array:[],errorName:"INCONSISTENT_DRM_ACROSS_PERIODS"}),r.set(4039,{array:[0],errorName:"HLS_VARIABLE_NOT_FOUND"}),r.set(5006,{array:[],errorName:"STREAMING_ENGINE_STARTUP_INVALID_STATE"}),r.set(6e3,{array:[],errorName:"NO_RECOGNIZED_KEY_SYSTEMS"}),r.set(6001,{array:[],errorName:"REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE"}),r.set(6002,{array:[0],errorName:"FAILED_TO_CREATE_CDM"}),r.set(6003,{array:[0],errorName:"FAILED_TO_ATTACH_TO_VIDEO"}),r.set(6004,{array:[0],errorName:"INVALID_SERVER_CERTIFICATE"}),r.set(6005,{array:[0],errorName:"FAILED_TO_CREATE_SESSION"}),r.set(6006,{array:[0,1,2],errorName:"FAILED_TO_GENERATE_LICENSE_REQUEST"}),r.set(6007,{array:[0],errorName:"LICENSE_REQUEST_FAILED"}),r.set(6008,{array:[0],errorName:"LICENSE_RESPONSE_REJECTED"}),r.set(6010,{array:[],errorName:"ENCRYPTED_CONTENT_WITHOUT_DRM_INFO"}),r.set(6012,{array:[0],errorName:"NO_LICENSE_SERVER_GIVEN"}),r.set(6013,{array:[],errorName:"OFFLINE_SESSION_REMOVED"}),r.set(6014,{array:[],errorName:"EXPIRED"}),r.set(6015,{array:[],errorName:"SERVER_CERTIFICATE_REQUIRED"}),r.set(6016,{array:[0],errorName:"INIT_DATA_TRANSFORM_ERROR"}),r.set(6017,{array:[],errorName:"SERVER_CERTIFICATE_REQUEST_FAILED"}),r.set(7e3,{array:[],errorName:"LOAD_INTERRUPTED"}),r.set(7001,{array:[],errorName:"OPERATION_ABORTED"}),r.set(7002,{array:[],errorName:"NO_VIDEO_ELEMENT"}),r.set(7003,{array:[],errorName:"OBJECT_DESTROYED"}),r.set(7004,{array:[],errorName:"CONTENT_NOT_LOADED"}),r.set(8e3,{array:[],errorName:"CAST_API_UNAVAILABLE"}),r.set(8001,{array:[],errorName:"NO_CAST_RECEIVERS"}),r.set(8002,{array:[],errorName:"ALREADY_CASTING"}),r.set(8003,{array:[0],errorName:"UNEXPECTED_CAST_ERROR"}),r.set(8004,{array:[0],errorName:"CAST_CANCELED_BY_USER"}),r.set(8005,{array:[0],errorName:"CAST_CONNECTION_TIMED_OUT"}),r.set(8006,{array:[0],errorName:"CAST_RECEIVER_APP_UNAVAILABLE"}),r.set(9e3,{array:[],errorName:"STORAGE_NOT_SUPPORTED"}),r.set(9001,{array:[0],errorName:"INDEXED_DB_ERROR"}),r.set(9002,{array:[0],errorName:"DEPRECATED_OPERATION_ABORTED"}),r.set(9003,{array:[0],errorName:"REQUESTED_ITEM_NOT_FOUND"}),r.set(9004,{array:[0],errorName:"MALFORMED_OFFLINE_URI"}),r.set(9005,{array:[0],errorName:"CANNOT_STORE_LIVE_OFFLINE"}),r.set(9007,{array:[0],errorName:"NO_INIT_DATA_FOR_OFFLINE"}),r.set(9008,{array:[],errorName:"LOCAL_PLAYER_INSTANCE_REQUIRED"}),r.set(9011,{array:[],errorName:"NEW_KEY_OPERATION_NOT_SUPPORTED"}),r.set(9012,{array:[],errorName:"KEY_NOT_FOUND"}),r.set(9013,{array:[],errorName:"MISSING_STORAGE_CELL"}),r.set(9014,{array:[],errorName:"STORAGE_LIMIT_REACHED"}),r.set(9015,{array:[],errorName:"DOWNLOAD_SIZE_CALLBACK_ERROR"}),r.set(9016,{array:[],errorName:"FILE_SIZE_TOO_LARGE"}),r.set(1e4,{array:[],errorName:"CS_IMA_SDK_MISSING"}),r.set(10001,{array:[],errorName:"CS_AD_MANAGER_NOT_INITIALIZED"}),r.set(10002,{array:[],errorName:"SS_IMA_SDK_MISSING"}),r.set(10003,{array:[],errorName:"SS_AD_MANAGER_NOT_INITIALIZED"}),r.set(10004,{array:[],errorName:"CURRENT_DAI_REQUEST_NOT_FINISHED"}),t.default=r},function(e,t,a){"use strict";var l=a(24),u=a(9),c=a(51);e.exports=function(s){return function(e,t,a){var r,n=l(e),i=u(n.length),o=c(a,i);if(s&&t!=t){for(;o<i;)if((r=n[o++])!=r)return!0}else for(;o<i;o++)if((s||o in n)&&n[o]===t)return s||o||0;return!s&&-1}}},function(e,t,a){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t,a){"use strict";var r=a(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,a){"use strict";var r=a(60),n={};n[a(8)("toStringTag")]="z",n+""!="[object z]"&&a(20)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,a){"use strict";var r=a(78)(!0);a(117)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(e=r(e,t),this._i+=e.length,{value:e,done:!1})})},function(e,t,a){"use strict";var i=a(32),o=a(35);e.exports=function(n){return function(e,t){var a,e=String(o(e)),t=i(t),r=e.length;return t<0||r<=t?n?"":void 0:(a=e.charCodeAt(t))<55296||56319<a||t+1===r||(r=e.charCodeAt(t+1))<56320||57343<r?n?e.charAt(t):a:n?e.slice(t,t+2):r-56320+(a-55296<<10)+65536}}},function(e,t,a){"use strict";var r=a(6),n=a(31),i=a(8)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},function(e,t,a){"use strict";var i=a(8)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var a=!1;try{var r=[7],n=r[i]();n.next=function(){return{done:a=!0}},r[i]=function(){return n},e(r)}catch(e){}return a}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(60),i=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"==typeof a){a=a.call(e,t);if("object"!==(void 0===a?"undefined":r(a)))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,a){"use strict";a(171);var r,l=a(20),u=a(19),c=a(5),d=a(35),h=a(8),p=a(127),f=h("species"),m=!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),g=(r=(a=/(?:)/).exec,a.exec=function(){return r.apply(this,arguments)},2===(a="ab".split(a)).length&&"a"===a[0]&&"b"===a[1]);e.exports=function(a,e,t){var i,r,n=h(a),o=!c(function(){var e={};return e[n]=function(){return 7},7!=""[a](e)}),s=o?!c(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===a&&(t.constructor={},t.constructor[f]=function(){return t}),t[n](""),!e}):void 0;o&&s&&("replace"!==a||m)&&("split"!==a||g)||(i=/./[n],t=(s=t(d,n,""[a],function(e,t,a,r,n){return t.exec===p?o&&!n?{done:!0,value:i.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}))[0],r=s[1],l(String.prototype,a,t),u(RegExp.prototype,n,2==e?function(e,t){return r.call(e,this,t)}:function(e){return r.call(e,this)}))}},function(e,t,a){"use strict";a=a(3).navigator;e.exports=a&&a.userAgent||""},function(e,t,a){"use strict";var y=a(3),v=a(0),_=a(20),k=a(57),b=a(43),S=a(56),E=a(55),T=a(6),x=a(5),A=a(80),P=a(59),C=a(113);e.exports=function(a,e,t,r,n,i){function o(e){var a=m[e];_(m,e,"delete"==e?function(e){return!(i&&!T(e))&&a.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!T(e))&&a.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!T(e)?void 0:a.call(this,0===e?0:e)}:"add"==e?function(e){return a.call(this,0===e?0:e),this}:function(e,t){return a.call(this,0===e?0:e,t),this})}var s,l,u,c,d,h=y[a],p=h,f=n?"set":"add",m=p&&p.prototype,g={};return"function"==typeof p&&(i||m.forEach&&!x(function(){(new p).entries().next()}))?(l=(s=new p)[f](i?{}:-0,1)!=s,u=x(function(){s.has(1)}),c=A(function(e){new p(e)}),d=!i&&x(function(){for(var e=new p,t=5;t--;)e[f](t,t);return!e.has(-0)}),c||(((p=e(function(e,t){E(e,p,a);e=C(new h,e,p);return null!=t&&S(t,n,e[f],e),e})).prototype=m).constructor=p),(u||d)&&(o("delete"),o("has"),n)&&o("get"),(d||l)&&o(f),i&&m.clear&&delete m.clear):(p=r.getConstructor(e,a,n,f),k(p.prototype,t),b.NEED=!0),P(p,a),g[a]=p,v(v.G+v.W+v.F*(p!=h),g),i||r.setStrong(p,a,n),p}},function(e,t,a){"use strict";for(var r,n=a(3),i=a(19),a=a(49),o=a("typed_array"),s=a("view"),a=!(!n.ArrayBuffer||!n.DataView),l=a,u=0,c="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(r=n[c[u++]])?(i(r.prototype,o,!0),i(r.prototype,s,!0)):l=!1;e.exports={ABV:a,CONSTR:l,TYPED:o,VIEW:s}},function(e,t,a){"use strict";e.exports=a(42)||!a(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete a(3)[e]})},function(e,t,a){"use strict";var r=a(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,a){"use strict";var r=a(0),o=a(14),s=a(30),l=a(56);e.exports=function(e){r(r.S,e,{from:function(e){var t,a,r,n,i=arguments[1];return o(this),(t=void 0!==i)&&o(i),null==e?new this:(a=[],t?(r=0,n=s(i,arguments[2],2),l(e,!1,function(e){a.push(n(e,r++))})):l(e,!1,a.push,a),new this(a))}})}},function(e,t,a){"use strict";for(var r=a(126),n=a(50),i=a(20),o=a(3),s=a(19),l=a(62),a=a(8),u=a("iterator"),c=a("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(h),f=0;f<p.length;f++){var m,g=p[f],y=h[g],v=o[g],_=v&&v.prototype;if(_&&(_[u]||s(_,u,d),_[c]||s(_,c,g),l[g]=d,y))for(m in r)_[m]||i(_,m,r[m],!0)}},function(e,t,a){"use strict";e.exports=a(468)()?globalThis:a(469)},function(e,t,a){"use strict";var o=a(192),i=a(471),s=a(475),l=a(483),u=a(484);(e.exports=function(e,t){var a,r,n,i;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],o(e)?(a=u.call(e,"c"),r=u.call(e,"e"),n=u.call(e,"w")):r=!(a=n=!0),e={value:t,configurable:a,enumerable:r,writable:n},i?s(l(i),e):e}).gs=function(e,t,a){var r,n;return"string"!=typeof e?(n=a,a=t,t=e,e=null):n=arguments[3],o(t)?i(t)?o(a)?i(a)||(n=a,a=void 0):a=void 0:(n=t,t=a=void 0):t=void 0,e=o(e)?(r=u.call(e,"c"),u.call(e,"e")):!(r=!0),t={get:t,set:a,configurable:r,enumerable:e},n?s(l(n),t):t}},function(e,t,a){"use strict";var r=a(22),c=a(45).ONE_SECOND_IN_TS,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=function(s){var l,u=0;n.prototype.init.call(this),this.push=function(e){var t,a,r,n,i,o=0;if(s||(u=0),"audio"===e.type)for(l?(r=l,(l=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),l.set(e.data,r.byteLength)):l=e.data;o+5<l.length;)if(255!==l[o]||240!=(246&l[o+1]))o++;else{if(t=2*(1&~l[o+1]),a=(3&l[o+3])<<11|l[o+4]<<3|(224&l[o+5])>>5,i=(n=1024*(1+(3&l[o+6])))*c/d[(60&l[o+2])>>>2],l.byteLength<(a=o+a))return;if(this.trigger("data",{pts:e.pts+u*i,dts:e.dts+u*i,sampleCount:n,audioobjecttype:1+(l[o+2]>>>6&3),channelcount:(1&l[o+2])<<2|(192&l[o+3])>>>6,samplerate:d[(60&l[o+2])>>>2],samplingfrequencyindex:(60&l[o+2])>>>2,samplesize:16,data:l.subarray(o+7+t,a)}),u++,l.byteLength===a)return void(l=void 0);l=l.subarray(a)}},this.flush=function(){u=0,this.trigger("done")},this.reset=function(){l=void 0,this.trigger("reset")},this.endTimeline=function(){l=void 0,this.trigger("endedtimeline")}};n.prototype=new r,e.exports=n},function(O,U,B){"use strict";var l,t,a,r,n,i,o,s,u,c,d,h,p,f,m,g,y,v,_,k,b,e,S,E,T,x,A,P,C,w,M,I,R,D,F,j,N,V,$,G=Math.pow(2,32)-1;if(b={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var L in b)b.hasOwnProperty(L)&&(b[L]=[L.charCodeAt(0),L.charCodeAt(1),L.charCodeAt(2),L.charCodeAt(3)]);e=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),S=new Uint8Array([0,0,0,1]),T=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:T,audio:x},w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),I=M,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),D=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}l=function(e){for(var t,a=[],r=0,n=1;n<arguments.length;n++)a.push(arguments[n]);for(n=a.length;n--;)r+=a[n].byteLength;for(t=new Uint8Array(r+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),n=0,r=8;n<a.length;n++)t.set(a[n],r),r+=a[n].byteLength;return t},t=function(){return l(b.dinf,l(b.dref,w))},a=function(e){return l(b.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},f=function(e){return l(b.hdlr,A[e])},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),l(b.mdhd,t)},h=function(e){return l(b.mdia,p(e),f(e.type),i(e))},n=function(e){return l(b.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},i=function(e){return l(b.minf,"video"===e.type?l(b.vmhd,P):l(b.smhd,C),t(),g(e))},s=function(e){for(var t=e.length,a=[];t--;)a[t]=_(e[t]);return l.apply(null,[b.mvex].concat(a))},u=function(e){e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(b.mvhd,e)},m=function(e){for(var t,a=e.samples||[],r=new Uint8Array(4+a.length),n=0;n<a.length;n++)t=a[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return l(b.sdtp,r)},g=function(e){return l(b.stbl,y(e),l(b.stts,D),l(b.stsc,I),l(b.stsz,R),l(b.stco,M))},y=function(e){return l(b.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?F:j)(e))},F=function(e){for(var t,a,r=e.sps||[],n=e.pps||[],i=[],o=[],s=0;s<r.length;s++)i.push((65280&r[s].byteLength)>>>8),i.push(255&r[s].byteLength),i=i.concat(Array.prototype.slice.call(r[s]));for(s=0;s<n.length;s++)o.push((65280&n[s].byteLength)>>>8),o.push(255&n[s].byteLength),o=o.concat(Array.prototype.slice.call(n[s]));return t=[b.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(b.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],i,[n.length],o))),l(b.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio&&(a=e.sarRatio[0],e=e.sarRatio[1],t.push(l(b.pasp,new Uint8Array([(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),l.apply(null,t)},j=function(e){return l(b.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))},d=function(e){e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return l(b.tkhd,e)},v=function(e){var t,a=l(b.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=Math.floor(e.baseMediaDecodeTime/(1+G)),n=Math.floor(e.baseMediaDecodeTime%(1+G)),r=l(b.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n]));return"audio"===e.type?(t=k(e,92),l(b.traf,a,r,t)):(n=m(e),t=k(e,n.length+92),l(b.traf,a,r,t,n))},c=function(e){return e.duration=e.duration||4294967295,l(b.trak,d(e),h(e))},_=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),l(b.trex,t)},N=function(e,t){var a=0,r=0,n=0,i=0;return e.length&&(void 0!==e[0].duration&&(a=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(n=4),void 0!==e[0].compositionTimeOffset)&&(i=8),[0,0,a|r|n|i,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},V=function(e,t){var a,r,n,i,o=e.samples||[];for(t+=20+16*o.length,e=N(o,t),(r=new Uint8Array(e.length+16*o.length)).set(e),a=e.length,i=0;i<o.length;i++)n=o[i],r[a++]=(4278190080&n.duration)>>>24,r[a++]=(16711680&n.duration)>>>16,r[a++]=(65280&n.duration)>>>8,r[a++]=255&n.duration,r[a++]=(4278190080&n.size)>>>24,r[a++]=(16711680&n.size)>>>16,r[a++]=(65280&n.size)>>>8,r[a++]=255&n.size,r[a++]=n.flags.isLeading<<2|n.flags.dependsOn,r[a++]=n.flags.isDependedOn<<6|n.flags.hasRedundancy<<4|n.flags.paddingValue<<1|n.flags.isNonSyncSample,r[a++]=61440&n.flags.degradationPriority,r[a++]=15&n.flags.degradationPriority,r[a++]=(4278190080&n.compositionTimeOffset)>>>24,r[a++]=(16711680&n.compositionTimeOffset)>>>16,r[a++]=(65280&n.compositionTimeOffset)>>>8,r[a++]=255&n.compositionTimeOffset;return l(b.trun,r)},$=function(e,t){var a,r,n,i,o=e.samples||[];for(t+=20+8*o.length,e=N(o,t),(a=new Uint8Array(e.length+8*o.length)).set(e),r=e.length,i=0;i<o.length;i++)n=o[i],a[r++]=(4278190080&n.duration)>>>24,a[r++]=(16711680&n.duration)>>>16,a[r++]=(65280&n.duration)>>>8,a[r++]=255&n.duration,a[r++]=(4278190080&n.size)>>>24,a[r++]=(16711680&n.size)>>>16,a[r++]=(65280&n.size)>>>8,a[r++]=255&n.size;return l(b.trun,a)},k=function(e,t){return("audio"===e.type?$:V)(e,t)},O.exports={ftyp:r=function(){return l(b.ftyp,e,S,e,E)},mdat:function(e){return l(b.mdat,e)},moof:function(e,t){for(var a=[],r=t.length;r--;)a[r]=v(t[r]);return l.apply(null,[b.moof,n(e)].concat(a))},moov:o=function(e){for(var t=e.length,a=[];t--;)a[t]=c(e[t]);return l.apply(null,[b.moov,u(4294967295)].concat(a).concat(s(e)))},initSegment:function(e){var t=r(),e=o(e),a=new Uint8Array(t.byteLength+e.byteLength);return a.set(t),a.set(e,t.byteLength),a}}},function(e,t,a){"use strict";e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},function(e,t,a){"use strict";var r=a(45).ONE_SECOND_IN_TS;e.exports={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var a=e.minSegmentDts;return t||(a-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=a,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/r,t=Math.floor(t)),t},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}}},function(e,t,a){"use strict";var s,c,r,n=a(22),i=a(197),d=a(97),o=a(199).TimestampRolloverStream,l=function(){var n=new Uint8Array(188),i=0;l.prototype.init.call(this),this.push=function(e){var t,a=0,r=188;for(i?((t=new Uint8Array(e.byteLength+i)).set(n.subarray(0,i)),t.set(e,i),i=0):t=e;r<t.byteLength;)71===t[a]&&71===t[r]?(this.trigger("data",t.subarray(a,r)),a+=188,r+=188):(a++,r++);a<t.byteLength&&(n.set(t.subarray(a),0),i=t.byteLength-a)},this.flush=function(){188===i&&71===n[0]&&(this.trigger("data",n),i=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){i=0,this.trigger("reset")}},u=(l.prototype=new n,(s=function(){var r,n,i,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,r=function(e,t){var a=0;t.payloadUnitStartIndicator&&(a+=e[a]+1),("pat"===t.type?n:i)(e.subarray(a),t)},n=function(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},i=function(e,t){var a,r;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},a=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<a;){var n=e[r],i=(31&e[r+1])<<8|e[r+2];n===d.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=i:n===d.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=i:n===d.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][i]=n),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},a=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(a+=e[a]+1),0===t.pid)t.type="pat",r(e.subarray(a),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",r(e.subarray(a),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,a,t]):this.processPes_(e,a,t)},this.processPes_=function(e,t,a){a.pid===this.programMapTable.video?a.streamType=d.H264_STREAM_TYPE:a.pid===this.programMapTable.audio?a.streamType=d.ADTS_STREAM_TYPE:a.streamType=this.programMapTable["timed-metadata"][a.pid],a.type="pes",a.data=e.subarray(t),this.trigger("data",a)}}).prototype=new n,s.STREAM_TYPES={h264:27,adts:15},(c=function(){function r(e,t,a){var r,n=new Uint8Array(e.size),i={type:t},o=0,s=0;if(e.data.length&&!(e.size<9)){for(i.trackId=e.data[0].pid,o=0;o<e.data.length;o++)r=e.data[o],n.set(r.data,s),s+=r.data.byteLength;u(n,i),t="video"===t||i.packetLength<=e.size,(a||t)&&(e.size=0,e.data.length=0),t&&l.trigger("data",i)}}var t,l=this,n={data:[],size:0},i={data:[],size:0},o={data:[],size:0},u=function(e,t){var a;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(a=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&a)&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1),t.data=e.subarray(9+e[8])};c.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case d.H264_STREAM_TYPE:e=n,t="video";break;case d.ADTS_STREAM_TYPE:e=i,t="audio";break;case d.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&r(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=a.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),l.trigger("data",e)}})[a.type]()},this.reset=function(){n.size=0,n.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){r(n,"video"),r(i,"audio"),r(o,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new n,{PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:l,TransportParseStream:s,ElementaryStream:c,TimestampRolloverStream:o,CaptionStream:i.CaptionStream,Cea608Stream:i.Cea608Stream,MetadataStream:a(498)});for(r in d)d.hasOwnProperty(r)&&(u[r]=d[r]);e.exports=u},function(e,t,a){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(e,t,a){"use strict";function r(e,t){var a=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+a:10+a}function s(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],l=function(e,t,a){for(var r="",n=t;n<a;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r};e.exports={isLikelyAacData:function(e){var t=0;return 10<e.length&&e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)&&(t=r(e,0)),e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:r,parseAdtsSize:function(e,t){var a=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|a},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return n[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,a=10;64&e[5]&&(a=(a+=4)+s(e.subarray(10,14)));do{if((t=s(e.subarray(a+4,a+8)))<1)return null;if("PRIV"===String.fromCharCode(e[a],e[a+1],e[a+2],e[a+3]))for(var r,n,i=e.subarray(a+10,a+t+10),o=0;o<i.byteLength;o++)if(0===i[o]){if("com.apple.streaming.transportStreamTimestamp"===unescape(l(i,0,o)))return n=(1&(r=i.subarray(o+1))[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2,(n*=4)+(3&r[7]);break}}while((a=a+10+t)<e.byteLength);return null}}},function(e,t,a){"use strict";e.exports=a(537)()},function(e,t,a){"use strict";e.exports=function(a){var o=[];return o.toString=function(){return this.map(function(e){var t=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa)return e=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),t=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}),[a].concat(t).concat([e]).join("\n");return[a].join("\n")}(e,a);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},o.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var n=this[r][0];"number"==typeof n&&(a[n]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&a[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),o.push(i))}},o}},function(e,t,a){var r,n,i,l={},u=(r=function(){return window&&document&&document.all&&!window.atob},function(){return n=void 0===n?r.apply(this,arguments):n}),o=(i={},function(e){if(void 0===i[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}i[e]=t}return i[e]}),s=null,c=0,d=[],h=a(568);function p(e,t){for(var a=0;a<e.length;a++){var r=e[a],n=l[r.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](r.parts[i]);for(;i<r.parts.length;i++)n.parts.push(_(r.parts[i],t))}else{for(var o=[],i=0;i<r.parts.length;i++)o.push(_(r.parts[i],t));l[r.id]={id:r.id,refs:1,parts:o}}}}function f(e,t){for(var a=[],r={},n=0;n<e.length;n++){var i=e[n],o=t.base?i[0]+t.base:i[0],i={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(i):a.push(r[o]={id:o,parts:[i]})}return a}function m(e,t){var a=o(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?a.insertBefore(t,r.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),d.push(t);else if("bottom"===e.insertAt)a.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");r=o(e.insertInto+" "+e.insertAt.before);a.insertBefore(t,r)}}function g(e){null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(e=d.indexOf(e)))&&d.splice(e,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),m(e,t),t}function v(t,a){Object.keys(a).forEach(function(e){t.setAttribute(e,a[e])})}function _(t,e){var a,r,n,i,o;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}return n=e.singleton?(i=c++,a=s=s||y(e),r=S.bind(null,a,i,!1),S.bind(null,a,i,!0)):t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=e,o=document.createElement("link"),i.attrs.type="text/css",i.attrs.rel="stylesheet",v(o,i.attrs),m(i,o),a=o,r=function(e,t,a){var r=a.css,a=a.sourceMap,n=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||n)&&(r=h(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");t=new Blob([r],{type:"text/css"}),n=e.href;e.href=URL.createObjectURL(t),n&&URL.revokeObjectURL(n)}.bind(null,a,e),function(){g(a),a.href&&URL.revokeObjectURL(a.href)}):(a=y(e),r=function(e,t){var a=t.css,t=t.media;t&&e.setAttribute("media",t);if(e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}.bind(null,a),function(){g(a)}),r(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||r(t=e):n()}}e.exports=function(e,o){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(o=o||{}).attrs="object"==typeof o.attrs?o.attrs:{},o.singleton||"boolean"==typeof o.singleton||(o.singleton=u()),o.insertInto||(o.insertInto="head"),o.insertAt||(o.insertAt="bottom");var s=f(e,o);return p(s,o),function(e){for(var t=[],a=0;a<s.length;a++){var r=s[a];(n=l[r.id]).refs--,t.push(n)}e&&p(f(e,o),o);for(var n,a=0;a<t.length;a++)if(0===(n=t[a]).refs){for(var i=0;i<n.parts.length;i++)n.parts[i]();delete l[n.id]}}};k=[];var k,b=function(e,t){return k[e]=t,k.filter(Boolean).join("\n")};function S(e,t,a,r){var a=a?"":r.css;e.styleSheet?e.styleSheet.cssText=b(t,a):(r=document.createTextNode(a),(a=e.childNodes)[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(7),o=(i=i)&&i.__esModule?i:{default:i};a(18),a(579);i=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(){var e=this,t=a;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"shouldComponentUpdate",value:function(e){return e.img!==this.props.img||e.extraCSSClass!==this.props.extraCSSClass}},{key:"render",value:function(){var e=this.props.extraCSSClass+" nexplayer_icon";return o.default.createElement("div",{className:e,style:{backgroundImage:"url("+this.props.img+")"}})}}]),a}(o.default.Component);t.default=i},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var n=Math,t=e,a=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,o=[],f=[];function s(e){return 4294967296*(e-(0|e))|0}for(var l=2,u=0;u<64;)!function(e){for(var t=n.sqrt(e),a=2;a<=t;a++)if(!(e%a))return;return 1}(l)||(u<8&&(o[u]=s(n.pow(l,.5))),f[u]=s(n.pow(l,1/3)),u++),l++;var m=[],i=i.SHA256=r.extend({_doReset:function(){this._hash=new a.init(o.slice(0))},_doProcessBlock:function(e,t){for(var a=this._hash.words,r=a[0],n=a[1],i=a[2],o=a[3],s=a[4],l=a[5],u=a[6],c=a[7],d=0;d<64;d++){m[d]=d<16?0|e[t+d]:(((h=m[d-15])<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+m[d-7]+(((h=m[d-2])<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+m[d-16];var h=r&n^r&i^n&i,p=c+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&u)+f[d]+m[d],c=u,u=l,l=s,s=o+p|0,o=i,i=n,n=r,r=p+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+h)|0}a[0]=a[0]+r|0,a[1]=a[1]+n|0,a[2]=a[2]+i|0,a[3]=a[3]+o|0,a[4]=a[4]+s|0,a[5]=a[5]+l|0,a[6]=a[6]+u|0,a[7]=a[7]+c|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=n.floor(a/4294967296),t[15+(64+r>>>9<<4)]=a,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e;return(e=r.clone.call(this))._hash=this._hash.clone(),e}});return t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i),e.SHA256},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t=e,a=t.lib.Hasher,r=(i=t.x64).Word,n=i.WordArray,i=t.algo;function o(){return r.create.apply(r,arguments)}for(var te=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],ae=[],s=0;s<80;s++)ae[s]=o();return i=i.SHA512=a.extend({_doReset:function(){this._hash=new n.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(O,U){for(var e=this._hash.words,t=e[0],a=e[1],r=e[2],n=e[3],i=e[4],o=e[5],s=e[6],e=e[7],B=t.high,l=t.low,F=a.high,u=a.low,j=r.high,c=r.low,V=n.high,d=n.low,$=i.high,h=i.low,G=o.high,p=o.low,H=s.high,f=s.low,W=e.high,m=e.low,g=B,y=l,v=F,_=u,k=j,b=c,z=V,S=d,E=$,T=h,K=G,x=p,q=H,Y=f,X=W,Q=m,A=0;A<80;A++)var P,C,w=ae[A],M=(A<16?(C=w.high=0|O[U+2*A],P=w.low=0|O[U+2*A+1]):(R=(N=ae[A-15]).high,N=N.low,I=(M=ae[A-2]).high,M=M.low,C=(C=(C=((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)+(D=ae[A-7]).high+((P=(N=(N>>>1|R<<31)^(N>>>8|R<<24)^(N>>>7|R<<25))+D.low)>>>0<N>>>0?1:0))+((I>>>19|M<<13)^(I<<3|M>>>29)^I>>>6)+((P=P+(R=(M>>>19|I<<13)^(M<<3|I>>>29)^(M>>>6|I<<26)))>>>0<R>>>0?1:0))+(D=ae[A-16]).high+((P=P+(N=D.low))>>>0<N>>>0?1:0),w.high=C,w.low=P),E&K^~E&q),I=T&x^~T&Y,R=g&v^g&k^v&k,D=(y>>>28|g<<4)^(y<<30|g>>>2)^(y<<25|g>>>7),N=te[A],w=N.high,Z=N.low,L=Q+((T>>>14|E<<18)^(T>>>18|E<<14)^(T<<23|E>>>9)),J=X+((E>>>14|T<<18)^(E>>>18|T<<14)^(E<<23|T>>>9))+(L>>>0<Q>>>0?1:0),ee=D+(y&_^y&b^_&b),X=q,Q=Y,q=K,Y=x,K=E,x=T,E=z+(J=J+M+((L=L+I)>>>0<I>>>0?1:0)+w+((L=L+Z)>>>0<Z>>>0?1:0)+C+((L=L+P)>>>0<P>>>0?1:0))+((T=S+L|0)>>>0<S>>>0?1:0)|0,z=k,S=b,k=v,b=_,v=g,_=y,g=J+(((g>>>28|y<<4)^(g<<30|y>>>2)^(g<<25|y>>>7))+R+(ee>>>0<D>>>0?1:0))+((y=L+ee|0)>>>0<L>>>0?1:0)|0;l=t.low=l+y,t.high=B+g+(l>>>0<y>>>0?1:0),u=a.low=u+_,a.high=F+v+(u>>>0<_>>>0?1:0),c=r.low=c+b,r.high=j+k+(c>>>0<b>>>0?1:0),d=n.low=d+S,n.high=V+z+(d>>>0<S>>>0?1:0),h=i.low=h+T,i.high=$+E+(h>>>0<T>>>0?1:0),p=o.low=p+x,o.high=G+K+(p>>>0<x>>>0?1:0),f=s.low=f+Y,s.high=H+q+(f>>>0<Y>>>0?1:0),m=e.low=m+Q,e.high=W+X+(m>>>0<Q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(128+r>>>10<<5)]=Math.floor(a/4294967296),t[31+(128+r>>>10<<5)]=a,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e;return(e=a.clone.call(this))._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=a._createHelper(i),t.HmacSHA512=a._createHmacHelper(i),e.SHA512},"object"===n(t)?e.exports=t=r(a(1),a(46)):(n=[a(1),a(46)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(n,null,[{key:"getKeyCode",value:function(e,t){return n.platformsKeyCodes[e][t]}},{key:"isTizen",value:function(){return navigator.userAgent.includes("Tizen")}},{key:"isWebOS",value:function(){return navigator.userAgent.includes("Web0S")}},{key:"isXbox",value:function(){return navigator.userAgent.includes("Xbox")}},{key:"isHisense",value:function(){return navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA")}},{key:"isPlayStation5",value:function(){return navigator.userAgent.includes("PlayStation 5")}},{key:"platformsKeyCodes",get:function(){return{Xbox:{bottomButton:"a",rightButton:"b",upButton:"y",leftButton:"x",downArrow:"dpadDown",rightArrow:"dpadRight",upArrow:"dpadUp",leftArrow:"dpadLeft",leftTrigger:"trigger",rightTrigger:"trigger",leftBumper:"leftShoulder",rightBumper:"rightShoulder",options:"menu"},PS5:{bottomButton:13,rightButton:27,upButton:112,leftButton:113,downArrow:40,rightArrow:39,upArrow:38,leftArrow:37,leftTrigger:118,rightTrigger:119,leftBumper:116,rightBumper:117,options:114},Tizen:{play:"MediaPlay",pause:"MediaPause",ff:"MediaFastForward",rewind:"MediaRewind"},WebOS:{play:415,pause:19,ff:417,rewind:412},Browser:{play:80,ff:70,rewind:82,pause:32},Hisense:{play:"VK_PLAY",pause:"VK_PAUSE",playPause:"VK_PLAY_PAUSE",ff:"VK_FAST_FWD",rewind:"VK_REWIND"}}}}]),t.default=n},function(e,t,a){"use strict";var r=a(6),n=a(3).document,i=r(n)&&r(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},function(e,t,a){"use strict";var r=a(3),n=a(16),i=a(42),o=a(153),s=a(11).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=!i&&r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,a){"use strict";var r=a(65)("keys"),n=a(49);e.exports=function(e){return r[e]||(r[e]=n(e))}},function(e,t,a){"use strict";e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,a){"use strict";a=a(3).document;e.exports=a&&a.documentElement},function(e,t,n){"use strict";function i(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var a=n(6),r=n(2);e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,a,r){try{(r=n(30)(Function.call,n(25).f(Object.prototype,"__proto__").set,2))(e,[]),a=!(e instanceof Array)}catch(e){a=!0}return function(e,t){return i(e,t),a?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:i}},function(e,t,a){"use strict";e.exports="\t\n\v\f\r   \u2028\u2029\ufeff"},function(e,t,a){"use strict";var r=a(6),n=a(111).set;e.exports=function(e,t,a){var t=t.constructor;return t!==a&&"function"==typeof t&&(t=t.prototype)!==a.prototype&&r(t)&&n&&n(e,t),e}},function(e,t,a){"use strict";var n=a(32),i=a(35);e.exports=function(e){var t=String(i(this)),a="",r=n(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(a+=t);return a}},function(e,t,a){"use strict";e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,a){"use strict";var r=Math.expm1;e.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,a){"use strict";function y(){return this}var v=a(42),_=a(0),k=a(20),b=a(19),S=a(62),E=a(118),T=a(59),x=a(26),A=a(8)("iterator"),P=!([].keys&&"next"in[].keys()),C="values";e.exports=function(e,t,a,r,n,i,o){E(a,t,r);function s(e){if(!P&&e in h)return h[e];switch(e){case"keys":case C:return function(){return new a(this,e)}}return function(){return new a(this,e)}}var l,u,r=t+" Iterator",c=n==C,d=!1,h=e.prototype,p=h[A]||h["@@iterator"]||n&&h[n],f=p||s(n),m=n?c?s("entries"):f:void 0,g="Array"==t&&h.entries||p;if(g&&(g=x(g.call(new e)))!==Object.prototype&&g.next&&(T(g,r,!0),v||"function"==typeof g[A]||b(g,A,y)),c&&p&&p.name!==C&&(d=!0,f=function(){return p.call(this)}),v&&!o||!P&&!d&&h[A]||b(h,A,f),S[t]=f,S[r]=y,n)if(l={values:c?f:s(C),keys:i?f:s("keys"),entries:m},o)for(u in l)u in h||k(h,u,l[u]);else _(_.P+_.F*(P||d),t,l);return l}},function(e,t,a){"use strict";var r=a(52),n=a(48),i=a(59),o={};a(19)(o,a(8)("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=r(o,{next:n(1,a)}),i(e,t+" Iterator")}},function(e,t,a){"use strict";var r=a(79),n=a(35);e.exports=function(e,t,a){if(r(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(e))}},function(e,t,a){"use strict";var r=a(8)("match");e.exports=function(t){var a=/./;try{"/./"[t](a)}catch(e){try{return a[r]=!1,!"/./"[t](a)}catch(e){}}return!0}},function(e,t,a){"use strict";var r=a(62),n=a(8)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[n]===e)}},function(e,t,a){"use strict";var r=a(11),n=a(48);e.exports=function(e,t,a){t in e?r.f(e,t,n(0,a)):e[t]=a}},function(e,t,a){"use strict";var r=a(60),n=a(8)("iterator"),i=a(62);e.exports=a(16).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[r(e)]}},function(e,t,a){"use strict";var r=a(349);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,a){"use strict";var o=a(12),s=a(51),l=a(9);e.exports=function(e){for(var t=o(this),a=l(t.length),r=arguments.length,n=s(1<r?arguments[1]:void 0,a),r=2<r?arguments[2]:void 0,i=void 0===r?a:s(r,a);n<i;)t[n++]=e;return t}},function(e,t,a){"use strict";var r=a(44),n=a(170),i=a(62),o=a(24);e.exports=a(117)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?a:"values"==t?e[a]:[a,e[a]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,a){"use strict";var r,n,i=a(68),o=RegExp.prototype.exec,s=String.prototype.replace,a=o,l="lastIndex",u=(r=/a/,n=/b*/g,o.call(r,"a"),o.call(n,"a"),0!==r[l]||0!==n[l]),c=void 0!==/()??/.exec("")[1];e.exports=a=u||c?function(e){var t,a,r,n;return c&&(a=new RegExp("^"+this.source+"$(?!\\s)",i.call(this))),u&&(t=this[l]),r=o.call(this,e),u&&r&&(this[l]=this.global?r.index+r[0].length:t),c&&r&&1<r.length&&s.call(r[0],a,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)}),r}:a},function(e,t,a){"use strict";var r=a(78)(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},function(e,t,a){"use strict";function r(){var e,t=+this;y.hasOwnProperty(t)&&(e=y[t],delete y[t],e())}function n(e){r.call(e.data)}var i,o=a(30),s=a(160),l=a(110),u=a(106),c=a(3),d=c.process,h=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,g=0,y={},v="onreadystatechange";h&&p||(h=function(e){for(var t=[],a=1;a<arguments.length;)t.push(arguments[a++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete y[e]},"process"==a(31)(d)?i=function(e){d.nextTick(o(r,e,1))}:m&&m.now?i=function(e){m.now(o(r,e,1))}:f?(f=(a=new f).port2,a.port1.onmessage=n,i=o(f.postMessage,f,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",n,!1)):i=v in u("script")?function(e){l.appendChild(u("script"))[v]=function(){l.removeChild(this),r.call(e)}}:function(e){setTimeout(o(r,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,a){"use strict";var s=a(3),l=a(129).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,d=s.Promise,h="process"==a(31)(c);e.exports=function(){function e(){var e,t;for(h&&(e=c.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(e){throw a?n():r=void 0,e}}r=void 0,e&&e.enter()}var a,r,t,n,i,o;return n=h?function(){c.nextTick(e)}:!u||s.navigator&&s.navigator.standalone?d&&d.resolve?(t=d.resolve(void 0),function(){t.then(e)}):function(){l.call(s,e)}:(i=!0,o=document.createTextNode(""),new u(e).observe(o,{characterData:!0}),function(){o.data=i=!i}),function(e){e={fn:e,next:void 0};r&&(r.next=e),a||(a=e,n()),r=e}}},function(e,t,a){"use strict";var n=a(14);function r(e){var a,r;this.promise=new e(function(e,t){if(void 0!==a||void 0!==r)throw TypeError("Bad Promise constructor");a=e,r=t}),this.resolve=n(a),this.reject=n(r)}e.exports.f=function(e){return new r(e)}},function(e,t,a){"use strict";var r=a(176),n=a(58);e.exports=a(84)("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){e=r.getEntry(n(this,"Map"),e);return e&&e.v},set:function(e,t){return r.def(n(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,a){"use strict";var r=a(176),n=a(58);e.exports=a(84)("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return r.def(n(this,"Set"),e=0===e?0:e,e)}},r)},function(O,e,t){"use strict";var a=t(3),r=t(10),U=t(42),n=t(85),i=t(19),o=t(57),s=t(5),l=t(55),B=t(32),F=t(9),c=t(179),u=t(53).f,j=t(11).f,V=t(125),t=t(59),d="ArrayBuffer",h="DataView",p="prototype",f="Wrong index!",m=a[d],g=a[h],y=a.Math,v=a.RangeError,_=a.Infinity,k=m,$=y.abs,b=y.pow,G=y.floor,H=y.log,W=y.LN2,a="byteLength",y="byteOffset",S=r?"_b":"buffer",E=r?"_l":a,T=r?"_o":y;function x(e,t,a){var r,n,i,o=new Array(a),s=8*a-t-1,a=(1<<s)-1,l=a>>1,u=23===t?b(2,-24)-b(2,-77):0,c=0,d=e<0||0===e&&1/e<0?1:0;for((e=$(e))!=e||e===_?(n=e!=e?1:0,r=a):(r=G(H(e)/W),e*(i=b(2,-r))<1&&(r--,i*=2),2<=(e+=1<=r+l?u/i:u*b(2,1-l))*i&&(r++,i/=2),a<=r+l?(n=0,r=a):1<=r+l?(n=(e*i-1)*b(2,t),r+=l):(n=e*b(2,l-1)*b(2,t),r=0));8<=t;o[c++]=255&n,n/=256,t-=8);for(r=r<<t|n,s+=t;0<s;o[c++]=255&r,r/=256,s-=8);return o[--c]|=128*d,o}function A(e,t,a){var r,n=8*a-t-1,i=(1<<n)-1,o=i>>1,s=n-7,l=a-1,n=e[l--],u=127&n;for(n>>=7;0<s;u=256*u+e[l],l--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=t;0<s;r=256*r+e[l],l--,s-=8);if(0===u)u=1-o;else{if(u===i)return r?NaN:n?-_:_;r+=b(2,t),u-=o}return(n?-1:1)*r*b(2,u-t)}function P(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function C(e){return[255&e]}function w(e){return[255&e,e>>8&255]}function M(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return x(e,52,8)}function K(e){return x(e,23,4)}function I(e,t,a){j(e[p],t,{get:function(){return this[a]}})}function R(e,t,a,r){a=c(+a);if(a+t>e[E])throw v(f);var n=e[S]._b,a=a+e[T],e=n.slice(a,a+t);return r?e:e.reverse()}function D(e,t,a,r,n,i){a=c(+a);if(a+t>e[E])throw v(f);for(var o=e[S]._b,s=a+e[T],l=r(+n),u=0;u<t;u++)o[s+u]=l[i?u:t-u-1]}if(n.ABV){if(!s(function(){m(1)})||!s(function(){new m(-1)})||s(function(){return new m,new m(1.5),new m(NaN),m.name!=d})){for(var N,s=(m=function(e){return l(this,m),new k(c(e))})[p]=k[p],L=u(k),q=0;L.length>q;)(N=L[q++])in m||i(m,N,k[N]);U||(s.constructor=m)}var u=new g(new m(2)),Y=g[p].setInt8;u.setInt8(0,2147483648),u.setInt8(1,2147483649),!u.getInt8(0)&&u.getInt8(1)||o(g[p],{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else m=function(e){l(this,m,d);e=c(e);this._b=V.call(new Array(e),0),this[E]=e},g=function(e,t,a){l(this,g,h),l(e,m,h);var r=e[E],t=B(t);if(t<0||r<t)throw v("Wrong offset!");if(r<t+(a=void 0===a?r-t:F(a)))throw v("Wrong length!");this[S]=e,this[T]=t,this[E]=a},r&&(I(m,a,"_l"),I(g,"buffer","_b"),I(g,a,"_l"),I(g,y,"_o")),o(g[p],{getInt8:function(e){return R(this,1,e)[0]<<24>>24},getUint8:function(e){return R(this,1,e)[0]},getInt16:function(e){e=R(this,2,e,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(e){e=R(this,2,e,arguments[1]);return e[1]<<8|e[0]},getInt32:function(e){return P(R(this,4,e,arguments[1]))},getUint32:function(e){return P(R(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return A(R(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return A(R(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){D(this,1,e,C,t)},setUint8:function(e,t){D(this,1,e,C,t)},setInt16:function(e,t){D(this,2,e,w,t,arguments[2])},setUint16:function(e,t){D(this,2,e,w,t,arguments[2])},setInt32:function(e,t){D(this,4,e,M,t,arguments[2])},setUint32:function(e,t){D(this,4,e,M,t,arguments[2])},setFloat32:function(e,t){D(this,4,e,K,t,arguments[2])},setFloat64:function(e,t){D(this,8,e,z,t,arguments[2])}});t(m,d),t(g,h),i(g[p],n.VIEW,!0),e[d]=m,e[h]=g},function(e,t,a){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";var r=a(481)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,a){"use strict";var l,y,r=a(22),v=a(493),u=function(){var r,n,i=0;u.prototype.init.call(this),this.push=function(e){for(var t,a=(n=n?((t=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),t.set(e.data,n.byteLength),t):e.data).byteLength;i<a-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<a;)switch(n[r]){case 0:if(0!==n[r-1])r+=2;else if(0!==n[r-2])r++;else{for(i+3!==r-2&&this.trigger("data",n.subarray(i+3,r-2));1!==n[++r]&&r<a;);i=r-2,r+=3}break;case 1:0!==n[r-1]||0!==n[r-2]?r+=3:(this.trigger("data",n.subarray(i+3,r-2)),i=r-2,r+=3);break;default:r+=3}n=n.subarray(i),r-=i,i=0},this.reset=function(){n=null,i=0,this.trigger("reset")},this.flush=function(){n&&3<n.byteLength&&this.trigger("data",n.subarray(i+3)),n=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};u.prototype=new r,y={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(l=function(){var a,r,n,i,o,s,g,t=new u;l.prototype.init.call(this),(a=this).push=function(e){"video"===e.type&&(r=e.trackId,n=e.pts,i=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:r,pts:n,dts:i,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=s(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",t)}),t.on("done",function(){a.trigger("done")}),t.on("partialdone",function(){a.trigger("partialdone")}),t.on("reset",function(){a.trigger("reset")}),t.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},g=function(e,t){for(var a=8,r=8,n=0;n<e;n++)a=0===(r=0!==r?(a+t.readExpGolomb()+256)%256:r)?a:r},o=function(e){for(var t=e.byteLength,a=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(a.push(r+2),r+=2):r++;if(0===a.length)return e;for(var n=t-a.length,i=new Uint8Array(n),o=0,r=0;r<n;o++,r++)o===a[0]&&(o++,a.shift()),i[r]=e[o];return i},s=function(e){var t,a,r,n,i,o,s,l=0,u=0,c=0,d=0,h=1,p=new v(e),e=p.readUnsignedByte(),f=p.readUnsignedByte(),m=p.readUnsignedByte();if(p.skipUnsignedExpGolomb(),y[e]&&(3===(a=p.readUnsignedExpGolomb())&&p.skipBits(1),p.skipUnsignedExpGolomb(),p.skipUnsignedExpGolomb(),p.skipBits(1),p.readBoolean()))for(i=3!==a?8:12,s=0;s<i;s++)p.readBoolean()&&g(s<6?16:64,p);if(p.skipUnsignedExpGolomb(),0===(a=p.readUnsignedExpGolomb()))p.readUnsignedExpGolomb();else if(1===a)for(p.skipBits(1),p.skipExpGolomb(),p.skipExpGolomb(),t=p.readUnsignedExpGolomb(),s=0;s<t;s++)p.skipExpGolomb();if(p.skipUnsignedExpGolomb(),p.skipBits(1),a=p.readUnsignedExpGolomb(),r=p.readUnsignedExpGolomb(),0===(n=p.readBits(1))&&p.skipBits(1),p.skipBits(1),p.readBoolean()&&(l=p.readUnsignedExpGolomb(),u=p.readUnsignedExpGolomb(),c=p.readUnsignedExpGolomb(),d=p.readUnsignedExpGolomb()),p.readBoolean()&&p.readBoolean()){switch(p.readUnsignedByte()){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:o=[p.readUnsignedByte()<<8|p.readUnsignedByte(),p.readUnsignedByte()<<8|p.readUnsignedByte()]}o&&(h=o[0]/o[1])}return{profileIdc:e,levelIdc:m,profileCompatibility:f,width:Math.ceil((16*(a+1)-2*l-2*u)*h),height:(2-n)*(r+1)*16-2*c-2*d,sarRatio:o}}}).prototype=new r,e.exports={H264Stream:l,NalByteStream:u}},function(e,t,a){"use strict";var s=a(94).toUnsigned,l=a(139);e.exports=function e(t,a){var r,n,i,o=[];if(!a.length)return null;for(r=0;r<t.byteLength;)n=s(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),i=l(t.subarray(r+4,r+8)),n=1<n?r+n:t.byteLength,i===a[0]&&(1===a.length?o.push(t.subarray(r+8,n)):(i=e(t.subarray(r+8,n),a.slice(1))).length&&(o=o.concat(i))),r=n;return o}},function(e,t,a){"use strict";e.exports=function(e){var t="";return(t+=String.fromCharCode(e[0]))+String.fromCharCode(e[1])+String.fromCharCode(e[2])+String.fromCharCode(e[3])}},function(e,t,a){"use strict";e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),e={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},a=1&e.flags[2],r=2&e.flags[2],n=8&e.flags[2],i=16&e.flags[2],o=32&e.flags[2],s=65536&e.flags[0],l=131072&e.flags[0],u=8;return a&&(u+=4,e.baseDataOffset=t.getUint32(12),u+=4),r&&(e.sampleDescriptionIndex=t.getUint32(u),u+=4),n&&(e.defaultSampleDuration=t.getUint32(u),u+=4),i&&(e.defaultSampleSize=t.getUint32(u),u+=4),o&&(e.defaultSampleFlags=t.getUint32(u)),s&&(e.durationIsEmpty=!0),!a&&l&&(e.baseDataOffsetIsMoof=!0),e}},function(e,t,a){"use strict";var h=a(496);e.exports=function(e){var t,a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=1&a.flags[2],i=4&a.flags[2],o=1&a.flags[1],s=2&a.flags[1],l=4&a.flags[1],u=8&a.flags[1],c=r.getUint32(4),d=8;for(n&&(a.dataOffset=r.getInt32(d),d+=4),i&&c&&(t={flags:h(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),u&&(t.compositionTimeOffset=1===a.version?r.getInt32(d):r.getUint32(d),d+=4),a.samples.push(t),c--);c--;)t={},o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),l&&(t.flags=h(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=1===a.version?r.getInt32(d):r.getUint32(d),d+=4),a.samples.push(t);return a}},function(e,t,a){"use strict";var r=a(94).toUnsigned;e.exports=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:r(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=r(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}},function(e,t,a){"use strict";function c(e,t){var a;if(e.length===t.length){for(a=0;a<e.length;a++)if(e[a]!==t[a])return;return 1}}function d(e,t,a,r,n,i){return{start:{dts:e,pts:e+(a-t)},end:{dts:e+(r-t),pts:e+(n-a)},prependedContentDuration:i,baseMediaDecodeTime:e}}var h,s,l,r=a(22),p=a(93),f=a(195),m=a(196),g=a(95),u=a(96),y=a(45),v=a(92),_=a(137).H264Stream,k=a(200),b=a(98).isLikelyAacData,S=a(45).ONE_SECOND_IN_TS,E=a(201),T=a(202),x=function(n,i){var o=[],s=0,l=0,u=0,c=1/0;i=i||{},x.prototype.init.call(this),this.push=function(t){g.collectDtsInfo(n,t),n&&E.forEach(function(e){n[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e},this.setVideoBaseMediaDecodeTime=function(e){c=e},this.setAudioAppendStart=function(e){u=e},this.flush=function(){var e,t,a,r;0!==o.length&&(e=m.trimAdtsFramesByEarliestDts(o,n,l),n.baseMediaDecodeTime=g.calculateTrackBaseMediaDecodeTime(n,i.keepOriginalTimestamps),m.prefixWithSilence(n,e,u,c),n.samples=m.generateSampleTable(e),r=p.mdat(m.concatenateFrameData(e)),o=[],t=p.moof(s,[n]),a=new Uint8Array(t.byteLength+r.byteLength),s++,a.set(t),a.set(r,t.byteLength),g.clearDtsInfo(n),r=Math.ceil(1024*S/n.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+e.length*r}),this.trigger("data",{track:n,boxes:a})),this.trigger("done","AudioSegmentStream")},this.reset=function(){g.clearDtsInfo(n),o=[],this.trigger("reset")}};x.prototype=new r,(h=function(o,i){var t,a,s=0,l=[],u=[];i=i||{},h.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){g.collectDtsInfo(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],T.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||a||(a=e.data,o.pps=[e.data]),l.push(e)},this.flush=function(){for(var e,t,a,r=0;l.length&&"access_unit_delimiter_rbsp"!==l[0].nalUnitType;)l.shift();if(0!==l.length){if(e=f.groupNalsIntoFrames(l),(e=f.groupFramesIntoGops(e))[0][0].keyFrame||((n=this.getGopForFusion_(l[0],o))?(r=n.duration,e.unshift(n),e.byteLength+=n.byteLength,e.nalCount+=n.nalCount,e.pts=n.pts,e.dts=n.dts,e.duration+=n.duration):e=f.extendFirstKeyFrame(e)),u.length){var n=i.alignGopsAtEnd?this.alignGopsAtEnd_(e):this.alignGopsAtStart_(e);if(!n)return this.gopCache_.unshift({gop:e.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),l=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");g.clearDtsInfo(o),e=n}g.collectDtsInfo(o,e),o.samples=f.generateSampleTable(e),n=p.mdat(f.concatenateNalData(e)),o.baseMediaDecodeTime=g.calculateTrackBaseMediaDecodeTime(o,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",e.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),t=e[0],a=e[e.length-1],this.trigger("segmentTimingInfo",d(o.baseMediaDecodeTime,t.dts,t.pts,a.dts+a.duration,a.pts+a.duration,r)),this.trigger("timingInfo",{start:e[0].pts,end:e[e.length-1].pts+e[e.length-1].duration}),this.gopCache_.unshift({gop:e.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),l=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),t=p.moof(s,[o]),a=new Uint8Array(t.byteLength+n.byteLength),s++,a.set(t),a.set(n,t.byteLength),this.trigger("data",{track:o,boxes:a})}this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),l=[],this.gopCache_.length=0,u.length=0,this.trigger("reset")},this.resetStream_=function(){g.clearDtsInfo(o),a=t=void 0},this.getGopForFusion_=function(e){for(var t,a,r,n=1/0,i=0;i<this.gopCache_.length;i++)a=(r=this.gopCache_[i]).gop,o.pps&&c(o.pps[0],r.pps[0])&&o.sps&&c(o.sps[0],r.sps[0])&&(a.dts<o.timelineStartInfo.dts||-1e4<=(a=e.dts-a.dts-a.duration)&&a<=45e3&&(!t||a<n)&&(t=r,n=a));return t?t.gop:null},this.alignGopsAtStart_=function(e){for(var t,a,r,n,i=e.byteLength,o=e.nalCount,s=e.duration,l=t=0;l<u.length&&t<e.length&&(a=u[l],r=e[t],a.pts!==r.pts);)r.pts>a.pts?l++:(t++,i-=r.byteLength,o-=r.nalCount,s-=r.duration);return 0===t?e:t===e.length?null:((n=e.slice(t)).byteLength=i,n.duration=s,n.nalCount=o,n.pts=n[0].pts,n.dts=n[0].dts,n)},this.alignGopsAtEnd_=function(e){for(var t,a,r,n,i=u.length-1,o=e.length-1,s=null,l=!1;0<=i&&0<=o;){if(t=u[i],a=e[o],t.pts===a.pts){l=!0;break}t.pts>a.pts?i--:(i===u.length-1&&(s=o),o--)}return l||null!==s?0===(r=l?o:s)?e:(n=(r=e.slice(r)).reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0}),r.byteLength=n.byteLength,r.duration=n.duration,r.nalCount=n.nalCount,r.pts=r[0].pts,r.dts=r[0].dts,r):null},this.alignGopsWith=function(e){u=e}}).prototype=new r,((l=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,l.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new r).flush=function(e){var t,a,r,n=0,i={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,T.forEach(function(e){i.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,E.forEach(function(e){i.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?i.type=this.pendingTracks[0].type:i.type="combined",this.emittedTracks+=this.pendingTracks.length,e=p.initSegment(this.pendingTracks),i.initSegment=new Uint8Array(e.byteLength),i.initSegment.set(e),i.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)i.data.set(this.pendingBoxes[r],n),n+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=y.metadataTsToSeconds(t.startPts,o,this.keepOriginalTimestamps),t.endTime=y.metadataTsToSeconds(t.endPts,o,this.keepOriginalTimestamps),i.captionStreams[t.stream]=!0,i.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(a=this.pendingMetadata[r]).cueTime=y.metadataTsToSeconds(a.pts,o,this.keepOriginalTimestamps),i.metadata.push(a);for(i.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",i),r=0;r<i.captions.length;r++)t=i.captions[r],this.trigger("caption",t);for(r=0;r<i.metadata.length;r++)a=i.metadata[r],this.trigger("id3Frame",a)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},l.prototype.setRemux=function(e){this.remuxTracks=e},(s=function(r){var n,i,o=this,a=!0;s.prototype.init.call(this),r=r||{},this.baseMediaDecodeTime=r.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new u.MetadataStream,t.aacStream=new k,t.audioTimestampRolloverStream=new u.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new u.TimestampRolloverStream("timed-metadata"),t.adtsStream=new v,t.coalesceStream=new l(r,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||t.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new x(i,r),t.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream),o.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!n}))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};(this.transmuxPipeline_=a).type="ts",a.metadataStream=new u.MetadataStream,a.packetStream=new u.TransportPacketStream,a.parseStream=new u.TransportParseStream,a.elementaryStream=new u.ElementaryStream,a.timestampRolloverStream=new u.TimestampRolloverStream,a.adtsStream=new v,a.h264Stream=new _,a.captionStream=new u.CaptionStream,a.coalesceStream=new l(r,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream).pipe(a.timestampRolloverStream),a.timestampRolloverStream.pipe(a.h264Stream),a.timestampRolloverStream.pipe(a.adtsStream),a.timestampRolloverStream.pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)n||"video"!==e.tracks[t].type?i||"audio"!==e.tracks[t].type||((i=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(n=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;n&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new h(n,r),a.videoSegmentStream.on("timelineStartInfo",function(e){i&&!r.keepOriginalTimestamps&&(i.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts-o.baseMediaDecodeTime))}),a.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),a.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),a.videoSegmentStream.on("timingInfo",o.trigger.bind(o,"videoTimingInfo")),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),i&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new x(i,r),a.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!n})}}),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("id3Frame",function(e){e.dispatchType=a.metadataStream.dispatchType,o.trigger("id3Frame",e)}),a.coalesceStream.on("caption",this.trigger.bind(this,"caption")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;r.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,g.clearDtsInfo(i),t.audioTimestampRolloverStream)&&t.audioTimestampRolloverStream.discontinuity(),n&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,g.clearDtsInfo(n),t.captionStream.reset()),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;r.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){n&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){var t;a&&((t=b(e))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),a=!1),this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){a=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new r,e.exports={Transmuxer:s,VideoSegmentStream:h,AudioSegmentStream:x,AUDIO_PROPERTIES:E,VIDEO_PROPERTIES:T,generateVideoSegmentTimingInfo:d}},function(e,t,a){"use strict";var u=function(e,a){function n(e,t){(t=e.position+t)<e.bytes.byteLength||((t=new Uint8Array(2*t)).set(e.bytes.subarray(0,e.position),0),e.bytes=t,e.view=new DataView(e.bytes.buffer))}var t,r=0,i=16384,o=u.widthBytes||new Uint8Array("width".length),s=u.heightBytes||new Uint8Array("height".length),l=u.videocodecidBytes||new Uint8Array("videocodecid".length);if(!u.widthBytes){for(t=0;t<"width".length;t++)o[t]="width".charCodeAt(t);for(t=0;t<"height".length;t++)s[t]="height".charCodeAt(t);for(t=0;t<"videocodecid".length;t++)l[t]="videocodecid".charCodeAt(t);u.widthBytes=o,u.heightBytes=s,u.videocodecidBytes=l}switch(this.keyFrame=!1,e){case u.VIDEO_TAG:this.length=16,i*=6;break;case u.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case u.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(i),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=a,this.pts=0,this.dts=0,this.writeBytes=function(e,t,a){var t=t||0,r=t+(a=a||e.byteLength);n(this,a),this.bytes.set(e.subarray(t,r),this.position),this.position+=a,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){n(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){n(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(0<r)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,a;this.length===r+4?this.length-=4:0<r&&(t=r+4,a=this.length-t,this.position=r,this.view.setUint32(this.position,a),this.position=this.length,e)&&e.push(this.bytes.subarray(t,t+a)),r=0},this.writeMetaDataDouble=function(e,t){var a;if(n(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(l,this.position),this.position+=12;else for(a=0;a<e.length;a++)this.bytes[this.position]=e.charCodeAt(a),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var a;for(n(this,2),this.view.setUint16(this.position,e.length),this.position+=2,a=0;a<e.length;a++)n(this,1),this.bytes[this.position]=e.charCodeAt(a),this.position++;n(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,t;switch(this.bytes[0]){case u.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||a?16:32),this.bytes[12]=a?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case u.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=a?0:1;break;case u.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return t=this.length-11,this.bytes[1]=(16711680&t)>>>16,this.bytes[2]=(65280&t)>>>8,this.bytes[3]=(255&t)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,n(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=u.frameTime(this.bytes),this}};u.AUDIO_TAG=8,u.VIDEO_TAG=9,u.METADATA_TAG=18,u.isAudioFrame=function(e){return u.AUDIO_TAG===e[0]},u.isVideoFrame=function(e){return u.VIDEO_TAG===e[0]},u.isMetaData=function(e){return u.METADATA_TAG===e[0]},u.isKeyFrame=function(e){return u.isVideoFrame(e)?23===e[11]:!!u.isAudioFrame(e)||!!u.isMetaData(e)},u.frameTime=function(e){var t=e[4]<<16;return(t|=e[5]<<8)|e[6]<<0|e[7]<<24},e.exports=u},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){for(var t=e,a=t.lib.BlockCipher,r=t.algo,u=[],n=[],i=[],o=[],s=[],l=[],c=[],d=[],h=[],p=[],f=[],m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(var g=0,y=0,m=0;m<256;m++){var v=y^y<<1^y<<2^y<<3^y<<4,_=f[n[u[g]=v=v>>>8^255&v^99]=g],k=f[_],b=f[k],S=257*f[v]^16843008*v;i[g]=S<<24|S>>>8,o[g]=S<<16|S>>>16,s[g]=S<<8|S>>>24,l[g]=S,c[v]=(S=16843009*b^65537*k^257*_^16843008*g)<<24|S>>>8,d[v]=S<<16|S>>>16,h[v]=S<<8|S>>>24,p[v]=S,g?(g=_^f[f[f[b^_]]],y^=f[f[y]]):g=y=1}var E=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=a.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,a=e.sigBytes/4,r=4*(1+(this._nRounds=6+a)),n=this._keySchedule=[],i=0;i<r;i++)i<a?n[i]=t[i]:(l=n[i-1],i%a?6<a&&i%a==4&&(l=u[l>>>24]<<24|u[l>>>16&255]<<16|u[l>>>8&255]<<8|u[255&l]):(l=u[(l=l<<8|l>>>24)>>>24]<<24|u[l>>>16&255]<<16|u[l>>>8&255]<<8|u[255&l],l^=E[i/a|0]<<24),n[i]=n[i-a]^l);for(var o=this._invKeySchedule=[],s=0;s<r;s++){var l,i=r-s;l=s%4?n[i]:n[i-4],o[s]=s<4||i<=4?l:c[u[l>>>24]]^d[u[l>>>16&255]]^h[u[l>>>8&255]]^p[u[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,o,s,l,u)},decryptBlock:function(e,t){var a=e[t+1],a=(e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,c,d,h,p,n),e[t+1]);e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,r,n,i,o,s){for(var l=this._nRounds,u=e[t]^a[0],c=e[t+1]^a[1],d=e[t+2]^a[2],h=e[t+3]^a[3],p=4,f=1;f<l;f++)var m=r[u>>>24]^n[c>>>16&255]^i[d>>>8&255]^o[255&h]^a[p++],g=r[c>>>24]^n[d>>>16&255]^i[h>>>8&255]^o[255&u]^a[p++],y=r[d>>>24]^n[h>>>16&255]^i[u>>>8&255]^o[255&c]^a[p++],v=r[h>>>24]^n[u>>>16&255]^i[c>>>8&255]^o[255&d]^a[p++],u=m,c=g,d=y,h=v;m=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^a[p++],g=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^a[p++],y=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^a[p++],v=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^a[p++];e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=v},keySize:8});return t.AES=a._createHelper(r),e.AES},"object"===n(t)?e.exports=t=r(a(1),a(27),a(28),a(17),a(4)):(n=[a(1),a(27),a(28),a(17),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,a){"use strict";function r(){return t.default=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],0<=t.indexOf(a)||(n[a]=e[a]);return n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=u(a(7));a(18);var o=u(a(224)),s=u(a(225)),l=u(a(102));function u(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(e){var t,a;if(this instanceof r)return(e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))).state={pause:!1},e.adsInfo=null,e.adControls=[],e.adSkip=!1,e.playpause=!1,e.adCurrentTime,1==e.props.useDefaultControls&&(t=0,a=e,document.addEventListener("keydown",function(e){switch(void 0===document.getElementsByClassName("rmp-ad-container-skip")[0]||a.adSkip||(a.adSkip=!0,a.adControls.push(document.getElementsByClassName("rmp-ad-container-skip")[0])),void 0===document.getElementsByClassName("videoAdUiSkipButton ")[0]||a.adSkip||"none"!==document.getElementsByClassName("videoAdUiSkipButton ")[0].style.display&&(a.adSkip=!0,a.adControls.push(document.getElementsByClassName("videoAdUiSkipButton ")[0])),void 0===document.getElementById("adplaypause")||a.playpause||(a.playpause=!0,a.adControls.push(document.getElementById("adplaypause"))),e.keyCode){case 13:void 0!==a.adControls[t]&&null!==a.adControls[t]&&a.adControls[t].click();break;case 37:void 0!==a.adControls[t]&&null!==a.adControls[t]&&(a.adControls[t].style.outline="",a.adControls[t].classList.remove("nexplayer_focused")),0===t?t=a.adControls.length-1:t--,void 0!==a.adControls[t]&&null!==a.adControls[t]&&(a.adControls[t].style.outline="2px solid #ff5e0e",a.adControls[t].classList.add("nexplayer_focused"));break;case 39:void 0!==a.adControls[t]&&null!==a.adControls[t]&&(a.adControls[t].style.outline="",a.adControls[t].classList.remove("nexplayer_focused")),t===a.adControls.length-1?t=0:t++,void 0!==a.adControls[t]&&null!==a.adControls[t]&&(a.adControls[t].style.outline="2px solid #ff5e0e",a.adControls[t].classList.add("nexplayer_focused"))}})),e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"getPlaybackPosition",value:function(e){if(this.adsInfo.getAdDuration())return 100*(e/=1e3)/(this.adsInfo.getAdDuration()/1e3)}},{key:"adPlayPause",value:function(){this.adsInfo.getAdPaused()?(this.state.pause=!1,this.adsInfo.play()):(this.state.pause=!0,this.adsInfo.pause())}},{key:"dynamicPhoneStyle",value:function(){var e=/Android/i.test(navigator.userAgent)?{height:"0.9rem",padding:"0rem 0rem 0rem 0rem"}:/iPhone|iPad|iPod/i.test(navigator.userAgent)?{height:"0.9rem",padding:"0.881rem 0rem 0rem 0rem"}:null;return e}},{key:"buildTimeString",value:function(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),e=Math.floor(e%60);return isNaN(t)||isNaN(a)||isNaN(e)?"-:-":(e=a+":"+(e=e<10?"0"+e:e),1<=t?t+":"+(e=a<10?"0"+e:e):e)}},{key:"shouldComponentUpdate",value:function(e,t){return!!(this.state.pause!==t.pause||this.props.adsInfo!==e.adsInfo||e.adsInfo&&this.adCurrentTime!==e.adsInfo.getAdCurrentTime())}},{key:"render",value:function(){var e=this,t=this.dynamicPhoneStyle();return this.props.adsInfo?(this.adCurrentTime=this.props.adsInfo.getAdCurrentTime(),this.adsInfo=this.props.adsInfo,i.default.createElement("div",null,i.default.createElement("div",{className:"nexplayerAd_flex_seekbar",style:t},i.default.createElement("div",{className:"nexplayerAd_base_seekbar"}),i.default.createElement("div",{className:"nexplayerAd_playback_position",style:{width:this.getPlaybackPosition(this.adsInfo.getAdCurrentTime())+"%"}})),i.default.createElement("div",{className:"nexplayer_bottom_bar"},i.default.createElement("div",{id:"adplaypause",tabIndex:"2",className:"nexplayer_button nexplayer_play_pause",onClick:function(){e.adPlayPause()},ref:"play_pause_div_ref"},i.default.createElement(l.default,{extraCSSClass:"nexplayerAd_IconPlay",img:(this.state.pause?o:s).default})),i.default.createElement("div",{tabIndex:"10",className:"nexplayer_button nexplayer_AdTime"},0<=this.adsInfo.getAdCurrentTime()?this.buildTimeString(this.adsInfo.getAdCurrentTime()/1e3)+"/"+this.buildTimeString(this.adsInfo.getAdDuration()/1e3):void 0)))):""}}]),r}(i.default.Component);t.default=a},function(O,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultFilterOptions=e.defaultClearRenderer=e.defaultArrowRenderer=e.defaultMenuRenderer=e.Option=e.Value=e.Creatable=e.AsyncCreatable=e.Async=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U=i(t(600)),_=i(t(601)),r=i(t(99)),n=t(7),k=i(n),l=t(70);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return e=e.onMouseDown,k.default.createElement("span",{className:"Select-arrow",onMouseDown:e})}function B(){return k.default.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}})}o.propTypes={onMouseDown:r.default.func};function s(e){for(var t=0;t<d.length;t++)e=e.replace(d[t].letters,d[t].base);return e}function F(e){return null!=e&&""!==e}function u(e,n,i,o){return o.ignoreAccents&&(n=s(n)),o.ignoreCase&&(n=n.toLowerCase()),o.trimFilter&&(n=n.replace(/^\s+|\s+$/g,"")),i=i&&i.map(function(e){return e[o.valueKey]}),e.filter(function(e){var t,a,r;return!(i&&-1<i.indexOf(e[o.valueKey]))&&(o.filterOption?o.filterOption.call(void 0,e,n):!n||(r=e[o.valueKey],e=e[o.labelKey],a=F(r),t=F(e),!(!a&&!t)&&(a=a?String(r):null,r=t?String(e):null,o.ignoreAccents&&(a&&"label"!==o.matchProp&&(a=s(a)),r)&&"value"!==o.matchProp&&(r=s(r)),o.ignoreCase&&(a&&"label"!==o.matchProp&&(a=a.toLowerCase()),r)&&"value"!==o.matchProp&&(r=r.toLowerCase()),"start"===o.matchPos?a&&"label"!==o.matchProp&&a.substr(0,n.length)===n||r&&"value"!==o.matchProp&&r.substr(0,n.length)===n:a&&"label"!==o.matchProp&&0<=a.indexOf(n)||r&&"value"!==o.matchProp&&0<=r.indexOf(n))))})}function c(e){var i=e.focusedOption,o=e.focusOption,s=e.inputValue,l=e.instancePrefix,u=e.onFocus,c=e.onOptionRef,d=e.onSelect,h=e.optionClassName,t=e.optionComponent,p=e.optionRenderer,a=e.options,f=e.removeValue,m=e.selectValue,g=e.valueArray,y=e.valueKey,v=t;return a.map(function(t,e){var a=g&&g.some(function(e){return e[y]===t[y]}),r=t===i,n=(0,_.default)(h,{"Select-option":!0,"is-selected":a,"is-focused":r,"is-disabled":t.disabled});return k.default.createElement(v,{className:n,focusOption:o,inputValue:s,instancePrefix:l,isDisabled:t.disabled,isFocused:r,isSelected:a,key:"option-"+e+"-"+t[y],onFocus:u,onSelect:d,option:t,optionIndex:e,ref:function(e){c(e,r)},removeValue:f,selectValue:m},p(t,e,s))})}function j(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}var d=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],h=(c.propTypes={focusOption:r.default.func,focusedOption:r.default.object,inputValue:r.default.string,instancePrefix:r.default.string,onFocus:r.default.func,onOptionRef:r.default.func,onSelect:r.default.func,optionClassName:r.default.string,optionComponent:r.default.func,optionRenderer:r.default.func,options:r.default.array,removeValue:r.default.func,selectValue:r.default.func,valueArray:r.default.array,valueKey:r.default.string},"function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)});function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t=function(e,t,a){return t&&V(e.prototype,t),a&&V(e,a),e};function V(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){var a,r={};for(a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function y(e,t){if(e)return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b=(b=k.default.Component,m(S,b),t(S,[{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.onFocus(e)}},{key:"handleMouseMove",value:function(e){this.onFocus(e)}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"onFocus",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"render",value:function(){var e=this.props,t=e.option,a=e.instancePrefix,e=e.optionIndex,r=(0,_.default)(this.props.className,t.className);return t.disabled?k.default.createElement("div",{className:r,onMouseDown:j,onClick:j},this.props.children):k.default.createElement("div",{className:r,style:t.style,role:"option","aria-label":t.label,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:a+"-option-"+e,title:t.title},this.props.children)}}]),S);function S(e){p(this,S);e=y(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,e));return e.handleMouseDown=e.handleMouseDown.bind(e),e.handleMouseEnter=e.handleMouseEnter.bind(e),e.handleMouseMove=e.handleMouseMove.bind(e),e.handleTouchStart=e.handleTouchStart.bind(e),e.handleTouchEnd=e.handleTouchEnd.bind(e),e.handleTouchMove=e.handleTouchMove.bind(e),e.onFocus=e.onFocus.bind(e),e}b.propTypes={children:r.default.node,className:r.default.string,instancePrefix:r.default.string.isRequired,isDisabled:r.default.bool,isFocused:r.default.bool,isSelected:r.default.bool,onFocus:r.default.func,onSelect:r.default.func,onUnfocus:r.default.func,option:r.default.object.isRequired,optionIndex:r.default.number};E=k.default.Component,m(T,E),t(T,[{key:"handleMouseDown",value:function(e){"mousedown"===e.type&&0!==e.button||(this.props.onClick?(e.stopPropagation(),this.props.onClick(this.props.value,e)):this.props.value.href&&e.stopPropagation())}},{key:"onRemove",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)}},{key:"handleTouchEndRemove",value:function(e){this.dragging||this.onRemove(e)}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"renderRemoveIcon",value:function(){if(!this.props.disabled&&this.props.onRemove)return k.default.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"")}},{key:"renderLabel",value:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?k.default.createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):k.default.createElement("span",{className:e,role:"option","aria-selected":"true",id:this.props.id},this.props.children)}},{key:"render",value:function(){return k.default.createElement("div",{className:(0,_.default)("Select-value",this.props.value.disabled?"Select-value-disabled":"",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}}]);var E=T;function T(e){p(this,T);e=y(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,e));return e.handleMouseDown=e.handleMouseDown.bind(e),e.onRemove=e.onRemove.bind(e),e.handleTouchEndRemove=e.handleTouchEndRemove.bind(e),e.handleTouchMove=e.handleTouchMove.bind(e),e.handleTouchStart=e.handleTouchStart.bind(e),e}E.propTypes={children:r.default.node,disabled:r.default.bool,id:r.default.string,onClick:r.default.func,onRemove:r.default.func,value:r.default.object.isRequired};function $(e){return"string"==typeof e?e:null!==e&&JSON.stringify(e)||""}function G(e,t){var a=void 0===e?"undefined":h(e);if("string"!==a&&"number"!==a&&"boolean"!==a)return e;var r=t.options,n=t.valueKey;if(r)for(var i=0;i<r.length;i++)if(String(r[i][n])===String(e))return r[i]}function x(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)}var A=r.default.oneOfType([r.default.string,r.default.node]),P=r.default.oneOfType([r.default.string,r.default.number]),H=1,C=(M=k.default.Component,m(w,M),t(w,[{key:"componentWillMount",value:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++H)+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:x(e[0],this.props.multi)})}},{key:"componentDidMount",value:function(){void 0!==this.props.autofocus&&"undefined"!=typeof console&&console.warn("Warning: The autofocus prop has changed to autoFocus, support will be removed after react-select@1.0"),(this.props.autoFocus||this.props.autofocus)&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.getValueArray(e.value,e);e.required?this.setState({required:x(t[0],e.multi)}):this.props.required&&this.setState({required:!1}),this.state.inputValue&&this.props.value!==e.value&&e.onSelectResetsInput&&this.setState({inputValue:this.handleInputValueChange("")})}},{key:"componentDidUpdate",value:function(e,t){var a,r,n,i,o,s;this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption?(s=(0,l.findDOMNode)(this.focused),n=(r=(o=(0,l.findDOMNode)(this.menu)).scrollTop)+o.offsetHeight,i=(a=s.offsetTop)+s.offsetHeight,(a<r||n<i)&&(o.scrollTop=s.offsetTop),this.hasScrolledToOption=!0):this.state.isOpen||(this.hasScrolledToOption=!1),this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu&&(a=(this._scrollToFocusedOptionOnUpdate=!1,l.findDOMNode)(this.focused),r=(0,l.findDOMNode)(this.menu),n=a.getBoundingClientRect(),i=r.getBoundingClientRect(),n.bottom>i.bottom?r.scrollTop=a.offsetTop+a.clientHeight-r.offsetHeight:n.top<i.top&&(r.scrollTop=a.offsetTop)),this.props.scrollMenuIntoView&&this.menuContainer&&(o=this.menuContainer.getBoundingClientRect(),window.innerHeight<o.bottom+this.props.menuBuffer)&&window.scrollBy(0,o.bottom+this.props.menuBuffer-window.innerHeight),e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu()),t.isOpen!==this.state.isOpen&&(this.toggleTouchOutsideEvent(this.state.isOpen),s=this.state.isOpen?this.props.onOpen:this.props.onClose)&&s()}},{key:"componentWillUnmount",value:function(){this.toggleTouchOutsideEvent(!1)}},{key:"toggleTouchOutsideEvent",value:function(e){var e=e?document.addEventListener?"addEventListener":"attachEvent":document.removeEventListener?"removeEventListener":"detachEvent",t=document.addEventListener?"":"on";document[e](t+"touchstart",this.handleTouchOutside),document[e](t+"mousedown",this.handleTouchOutside)}},{key:"handleTouchOutside",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&this.closeMenu()}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"handleTouchMove",value:function(){this.dragging=!0}},{key:"handleTouchStart",value:function(){this.dragging=!1}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchEndClearValue",value:function(e){this.dragging||this.clearValue(e)}},{key:"handleMouseDown",value:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button))if("INPUT"===e.target.tagName)this.state.isFocused?this.state.isOpen||this.setState({isOpen:!0,isPseudoFocused:!1,focusedOption:null}):(this._openAfterFocus=this.props.openOnClick,this.focus());else{if(e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen,focusedOption:null});var t;this.state.isFocused?(this.focus(),e=!0,(t="function"==typeof(t=this.input).getInput?t.getInput():t).value="",this._focusAfterClear&&(this._focusAfterClear=e=!1),this.setState({isOpen:e,isPseudoFocused:!1,focusedOption:null})):(this._openAfterFocus=this.props.openOnClick,this.focus(),this.setState({focusedOption:null}))}}},{key:"handleMouseDownOnArrow",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(this.state.isOpen?(e.stopPropagation(),e.preventDefault(),this.closeMenu()):this.setState({isOpen:!0}))}},{key:"handleMouseDownOnMenu",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())}},{key:"closeMenu",value:function(){this.props.onCloseResetsInput?this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}),this.hasScrolledToOption=!1}},{key:"handleInputFocus",value:function(e){var t;this.props.disabled||(t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus,t=!this._focusAfterClear&&t,this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:!!t}),this._focusAfterClear=!1,this._openAfterFocus=!1)}},{key:"handleInputBlur",value:function(e){this.menu&&(this.menu===document.activeElement||this.menu.contains(document.activeElement))?this.focus():(this.props.onBlur&&this.props.onBlur(e),e={isFocused:!1,isOpen:!1,isPseudoFocused:!1},this.props.onBlurResetsInput&&(e.inputValue=this.handleInputValueChange("")),this.setState(e))}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.state.inputValue!==e.target.value&&(t=this.handleInputValueChange(t)),this.setState({inputValue:t,isOpen:!0,isPseudoFocused:!1})}},{key:"setInputValue",value:function(e){var t;this.props.onInputChange&&null!=(t=this.props.onInputChange(e))&&"object"!==(void 0===t?"undefined":h(t))&&(e=""+t),this.setState({inputValue:e})}},{key:"handleInputValueChange",value:function(e){var t;return e=this.props.onInputChange&&null!=(t=this.props.onInputChange(e))&&"object"!==(void 0===t?"undefined":h(t))?""+t:e}},{key:"handleKeyDown",value:function(e){if(!(this.props.disabled||"function"==typeof this.props.onInputKeyDown&&(this.props.onInputKeyDown(e),e.defaultPrevented)))switch(e.keyCode){case 8:!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue());break;case 9:!e.shiftKey&&this.state.isOpen&&this.props.tabSelectsValue&&(e.preventDefault(),this.selectFocusedOption());break;case 13:e.preventDefault(),e.stopPropagation(),this.state.isOpen?this.selectFocusedOption():this.focusNextOption();break;case 27:e.preventDefault(),this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 32:this.props.searchable||(e.preventDefault(),this.state.isOpen?(e.stopPropagation(),this.selectFocusedOption()):this.focusNextOption());break;case 38:e.preventDefault(),this.focusPreviousOption();break;case 40:e.preventDefault(),this.focusNextOption();break;case 33:e.preventDefault(),this.focusPageUpOption();break;case 34:e.preventDefault(),this.focusPageDownOption();break;case 35:e.shiftKey||(e.preventDefault(),this.focusEndOption());break;case 36:e.shiftKey||(e.preventDefault(),this.focusStartOption());break;case 46:!this.state.inputValue&&this.props.deleteRemoves&&(e.preventDefault(),this.popValue())}}},{key:"handleValueClick",value:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)}},{key:"handleMenuScroll",value:function(e){this.props.onMenuScrollToBottom&&(e=e.target).scrollHeight>e.offsetHeight&&e.scrollHeight-e.offsetHeight-e.scrollTop<=0&&this.props.onMenuScrollToBottom()}},{key:"getOptionLabel",value:function(e){return e[this.props.labelKey]}},{key:"getValueArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,a="object"===(void 0===t?"undefined":h(t))?t:this.props;if(a.multi){if("string"==typeof e&&(e=e.split(a.delimiter)),!Array.isArray(e)){if(null==e)return[];e=[e]}return e.map(function(e){return G(e,a)}).filter(function(e){return e})}t=G(e,a);return t?[t]:[]}},{key:"setValue",value:function(e){var t,a=this;this.props.autoBlur&&this.blurInput(),this.props.required&&(t=x(e,this.props.multi),this.setState({required:t})),this.props.simpleValue&&(e=e&&(this.props.multi?e.map(function(e){return e[a.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey])),this.props.onChange&&this.props.onChange(e)}},{key:"selectValue",value:function(t){var a=this,e=(this.props.closeOnSelect&&(this.hasScrolledToOption=!1),this.props.onSelectResetsInput?"":this.state.inputValue);this.props.multi?this.setState({focusedIndex:null,inputValue:this.handleInputValueChange(e),isOpen:!this.props.closeOnSelect},function(){a.getValueArray(a.props.value).some(function(e){return e[a.props.valueKey]===t[a.props.valueKey]})?a.removeValue(t):a.addValue(t)}):this.setState({inputValue:this.handleInputValueChange(e),isOpen:!this.props.closeOnSelect,isPseudoFocused:this.state.isFocused},function(){a.setValue(t)})}},{key:"addValue",value:function(e){var t=this.getValueArray(this.props.value),a=this._visibleOptions.filter(function(e){return!e.disabled}),r=a.indexOf(e);this.setValue(t.concat(e)),this.props.closeOnSelect&&(a.length-1===r?this.focusOption(a[r-1]):a.length>r&&this.focusOption(a[r+1]))}},{key:"popValue",value:function(){var e=this.getValueArray(this.props.value);e.length&&!1!==e[e.length-1].clearableValue&&this.setValue(this.props.multi?e.slice(0,e.length-1):null)}},{key:"removeValue",value:function(t){var a=this,e=this.getValueArray(this.props.value);this.setValue(e.filter(function(e){return e[a.props.valueKey]!==t[a.props.valueKey]})),this.focus()}},{key:"clearValue",value:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.preventDefault(),this.setValue(this.getResetValue()),this.setState({inputValue:this.handleInputValueChange(""),isOpen:!1},this.focus),this._focusAfterClear=!0)}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"focusOption",value:function(e){this.setState({focusedOption:e})}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusPageUpOption",value:function(){this.focusAdjacentOption("page_up")}},{key:"focusPageDownOption",value:function(){this.focusAdjacentOption("page_down")}},{key:"focusStartOption",value:function(){this.focusAdjacentOption("start")}},{key:"focusEndOption",value:function(){this.focusAdjacentOption("end")}},{key:"focusAdjacentOption",value:function(e){var t=this._visibleOptions.map(function(e,t){return{option:e,index:t}}).filter(function(e){return!e.option.disabled});if(this._scrollToFocusedOptionOnUpdate=!0,this.state.isOpen){if(t.length){for(var a,r=-1,n=0;n<t.length;n++)if(this._focusedOption===t[n].option){r=n;break}"next"===e&&-1!==r?r=(r+1)%t.length:"previous"===e?0<r?r-=1:r=t.length-1:"start"===e?r=0:"end"===e?r=t.length-1:"page_up"===e?r=(a=r-this.props.pageSize)<0?0:a:"page_down"===e&&(r=(a=r+this.props.pageSize)>t.length-1?t.length-1:a),this.setState({focusedIndex:t[r=-1===r?0:r].index,focusedOption:t[r].option})}}else a={focusedOption:this._focusedOption||(t.length?t["next"===e?0:t.length-1].option:null),isOpen:!0},this.props.onSelectResetsInput&&(a.inputValue=""),this.setState(a)}},{key:"getFocusedOption",value:function(){return this._focusedOption}},{key:"selectFocusedOption",value:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)}},{key:"renderLoading",value:function(){if(this.props.isLoading)return k.default.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},k.default.createElement("span",{className:"Select-loading"}))}},{key:"renderValue",value:function(a,e){var r,t,n,i,o,s=this,l=this.props.valueRenderer||this.getOptionLabel,u=this.props.valueComponent;return a.length?(r=this.props.onValueClick?this.handleValueClick:null,this.props.multi?a.map(function(e,t){return k.default.createElement(u,{disabled:s.props.disabled||!1===e.clearableValue,id:s._instancePrefix+"-value-"+t,instancePrefix:s._instancePrefix,key:"value-"+t+"-"+e[s.props.valueKey],onClick:r,onRemove:s.removeValue,placeholder:s.props.placeholder,value:e,values:a},l(e,t),k.default.createElement("span",{className:"Select-aria-only"}," "))}):(t=this.state,n=this.props,i=t.inputValue,o=t.isPseudoFocused,t=t.isFocused,n=n.onSelectResetsInput,i&&(n||!t&&o||t&&!o)?void 0:(e&&(r=null),k.default.createElement(u,{disabled:this.props.disabled,id:this._instancePrefix+"-value-item",instancePrefix:this._instancePrefix,onClick:r,placeholder:this.props.placeholder,value:a[0]},l(a[0]))))):(i=this.state,n=this.props,t=e,o=i.inputValue,e=i.isPseudoFocused,i=i.isFocused,n=n.onSelectResetsInput,!o||!n&&!t&&!e&&!i?k.default.createElement("div",{className:"Select-placeholder"},this.props.placeholder):null)}},{key:"renderInput",value:function(e,t){var a,r=this,n=(0,_.default)("Select-input",this.props.inputProps.className),i=this.state.isOpen,o=(0,_.default)((f(o={},this._instancePrefix+"-list",i),f(o,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),o)),s=this.state.inputValue,o=(!s||this.props.onSelectResetsInput||this.state.isFocused||(s=""),v({},this.props.inputProps,{"aria-activedescendant":i?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-describedby":this.props["aria-describedby"],"aria-expanded":""+i,"aria-haspopup":""+i,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-owns":o,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},role:"combobox",required:this.state.required,tabIndex:this.props.tabIndex,value:s}));return this.props.inputRenderer?this.props.inputRenderer(o):this.props.disabled||!this.props.searchable?(s=g(this.props.inputProps,[]),a=(0,_.default)(f({},this._instancePrefix+"-list",i)),k.default.createElement("div",v({},s,{"aria-expanded":i,"aria-owns":a,"aria-activedescendant":i?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-disabled":""+this.props.disabled,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],className:n,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},role:"combobox",style:{border:0,width:1,display:"inline-block"},tabIndex:this.props.tabIndex||0}))):this.props.autosize?k.default.createElement(U.default,v({id:this.props.id},o,{className:n,minWidth:"5"})):k.default.createElement("div",{className:n,key:"input-wrap",style:{display:"inline-block"}},k.default.createElement("input",v({id:this.props.id},o)))}},{key:"renderClear",value:function(){var e,t=this.getValueArray(this.props.value);if(this.props.clearable&&t.length&&!this.props.disabled&&!this.props.isLoading)return t=this.props.multi?this.props.clearAllText:this.props.clearValueText,e=this.props.clearRenderer(),k.default.createElement("span",{"aria-label":t,className:"Select-clear-zone",onMouseDown:this.clearValue,onTouchEnd:this.handleTouchEndClearValue,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,title:t},e)}},{key:"renderArrow",value:function(){var e,t;if(this.props.arrowRenderer)return e=this.handleMouseDownOnArrow,t=this.state.isOpen,(t=this.props.arrowRenderer({onMouseDown:e,isOpen:t}))?k.default.createElement("span",{className:"Select-arrow-zone",onMouseDown:e},t):null}},{key:"filterOptions",value:function(e){var t=this.state.inputValue,a=this.props.options||[];return this.props.filterOptions?("function"==typeof this.props.filterOptions?this.props.filterOptions:u)(a,t,e,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,trimFilter:this.props.trimFilter,valueKey:this.props.valueKey}):a}},{key:"onOptionRef",value:function(e,t){t&&(this.focused=e)}},{key:"renderMenu",value:function(e,t,a){return e&&e.length?this.props.menuRenderer({focusedOption:a,focusOption:this.focusOption,inputValue:this.state.inputValue,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onOptionRef:this.onOptionRef,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:e,removeValue:this.removeValue,selectValue:this.selectValue,valueArray:t,valueKey:this.props.valueKey}):this.props.noResultsText?k.default.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null}},{key:"renderHiddenField",value:function(e){var t,a=this;if(this.props.name)return this.props.joinValues?(t=e.map(function(e){return $(e[a.props.valueKey])}).join(this.props.delimiter),k.default.createElement("input",{disabled:this.props.disabled,name:this.props.name,ref:function(e){return a.value=e},type:"hidden",value:t})):e.map(function(e,t){return k.default.createElement("input",{disabled:a.props.disabled,key:"hidden."+t,name:a.props.name,ref:"value"+t,type:"hidden",value:$(e[a.props.valueKey])})})}},{key:"getFocusableOptionIndex",value:function(e){var t=this._visibleOptions;if(t.length){var a=this.props.valueKey,r=this.state.focusedOption||e;if(r&&!r.disabled){var n=-1;if(t.some(function(e,t){e=e[a]===r[a];return e&&(n=t),e}),-1!==n)return n}for(var i=0;i<t.length;i++)if(!t[i].disabled)return i}return null}},{key:"renderOuter",value:function(e,t,a){var r=this,e=this.renderMenu(e,t,a);return e?k.default.createElement("div",{ref:function(e){return r.menuContainer=e},className:"Select-menu-outer",style:this.props.menuContainerStyle},k.default.createElement("div",{className:"Select-menu",id:this._instancePrefix+"-list",onMouseDown:this.handleMouseDownOnMenu,onScroll:this.handleMenuScroll,ref:function(e){return r.menu=e},role:"listbox",style:this.props.menuStyle,tabIndex:-1},e)):null}},{key:"render",value:function(){var t=this,e=this.getValueArray(this.props.value),a=this._visibleOptions=this.filterOptions(this.props.multi&&this.props.removeSelected?e:null),r=this.state.isOpen,n=(this.props.multi&&!a.length&&e.length&&!this.state.inputValue&&(r=!1),this.getFocusableOptionIndex(e[0])),i=null,i=this._focusedOption=null!==n?a[n]:null,o=(0,_.default)("Select",this.props.className,{"has-value":e.length,"is-clearable":this.props.clearable,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"Select--multi":this.props.multi,"Select--rtl":this.props.rtl,"Select--single":!this.props.multi}),s=null;return this.props.multi&&!this.props.disabled&&e.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(s=k.default.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",e[e.length-1][this.props.labelKey]))),k.default.createElement("div",{ref:function(e){return t.wrapper=e},className:o,style:this.props.wrapperStyle},this.renderHiddenField(e),k.default.createElement("div",{ref:function(e){return t.control=e},className:"Select-control",onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,style:this.props.style},k.default.createElement("div",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(e,r),this.renderInput(e,n)),s,this.renderLoading(),this.renderClear(),this.renderArrow()),r?this.renderOuter(a,e,i):null)}}]),w);function w(e){p(this,w);var t=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,e));return["clearValue","focusOption","getOptionLabel","handleInputBlur","handleInputChange","handleInputFocus","handleInputValueChange","handleKeyDown","handleMenuScroll","handleMouseDown","handleMouseDownOnArrow","handleMouseDownOnMenu","handleTouchEnd","handleTouchEndClearValue","handleTouchMove","handleTouchOutside","handleTouchStart","handleValueClick","onOptionRef","removeValue","selectValue"].forEach(function(e){return t[e]=t[e].bind(t)}),t.state={inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1},t}C.propTypes={"aria-describedby":r.default.string,"aria-label":r.default.string,"aria-labelledby":r.default.string,arrowRenderer:r.default.func,autoBlur:r.default.bool,autoFocus:r.default.bool,autofocus:r.default.bool,autosize:r.default.bool,backspaceRemoves:r.default.bool,backspaceToRemoveMessage:r.default.string,className:r.default.string,clearAllText:A,clearRenderer:r.default.func,clearValueText:A,clearable:r.default.bool,closeOnSelect:r.default.bool,deleteRemoves:r.default.bool,delimiter:r.default.string,disabled:r.default.bool,escapeClearsValue:r.default.bool,filterOption:r.default.func,filterOptions:r.default.any,id:r.default.string,ignoreAccents:r.default.bool,ignoreCase:r.default.bool,inputProps:r.default.object,inputRenderer:r.default.func,instanceId:r.default.string,isLoading:r.default.bool,joinValues:r.default.bool,labelKey:r.default.string,matchPos:r.default.string,matchProp:r.default.string,menuBuffer:r.default.number,menuContainerStyle:r.default.object,menuRenderer:r.default.func,menuStyle:r.default.object,multi:r.default.bool,name:r.default.string,noResultsText:A,onBlur:r.default.func,onBlurResetsInput:r.default.bool,onChange:r.default.func,onClose:r.default.func,onCloseResetsInput:r.default.bool,onFocus:r.default.func,onInputChange:r.default.func,onInputKeyDown:r.default.func,onMenuScrollToBottom:r.default.func,onOpen:r.default.func,onSelectResetsInput:r.default.bool,onValueClick:r.default.func,openOnClick:r.default.bool,openOnFocus:r.default.bool,optionClassName:r.default.string,optionComponent:r.default.func,optionRenderer:r.default.func,options:r.default.array,pageSize:r.default.number,placeholder:A,removeSelected:r.default.bool,required:r.default.bool,resetValue:r.default.any,rtl:r.default.bool,scrollMenuIntoView:r.default.bool,searchable:r.default.bool,simpleValue:r.default.bool,style:r.default.object,tabIndex:P,tabSelectsValue:r.default.bool,trimFilter:r.default.bool,value:r.default.any,valueComponent:r.default.func,valueKey:r.default.string,valueRenderer:r.default.func,wrapperStyle:r.default.object},C.defaultProps={arrowRenderer:o,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearRenderer:B,clearValueText:"Clear value",closeOnSelect:!0,deleteRemoves:!0,delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:u,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:c,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onCloseResetsInput:!0,onSelectResetsInput:!0,openOnClick:!0,optionComponent:b,pageSize:5,placeholder:"Select...",removeSelected:!0,required:!1,rtl:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,trimFilter:!0,valueComponent:E,valueKey:"value"};var M={autoload:r.default.bool.isRequired,cache:r.default.any,children:r.default.func.isRequired,ignoreAccents:r.default.bool,ignoreCase:r.default.bool,loadOptions:r.default.func.isRequired,loadingPlaceholder:r.default.oneOfType([r.default.string,r.default.node]),multi:r.default.bool,noResultsText:r.default.oneOfType([r.default.string,r.default.node]),onChange:r.default.func,onInputChange:r.default.func,options:r.default.array.isRequired,placeholder:r.default.oneOfType([r.default.string,r.default.node]),searchPromptText:r.default.oneOfType([r.default.string,r.default.node]),value:r.default.any},W={},A={autoload:!0,cache:W,children:function(e){return k.default.createElement(C,e)},ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",options:[],searchPromptText:"Type to search"},I=(P=n.Component,m(R,P),t(R,[{key:"componentDidMount",value:function(){this.props.autoload&&this.loadOptions("")}},{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&this.setState({options:e.options})}},{key:"componentWillUnmount",value:function(){this._callback=null}},{key:"loadOptions",value:function(r){var t,n=this,e=this.props.loadOptions,i=this._cache;i&&Object.prototype.hasOwnProperty.call(i,r)?(this._callback=null,this.setState({isLoading:!1,options:i[r]})):(this._callback=t=function e(t,a){a=a&&a.options||[];i&&(i[r]=a),e===n._callback&&(n._callback=null,n.setState({isLoading:!1,options:a}))},(e=e(r,t))&&e.then(function(e){return t(0,e)},function(e){return t()}),this._callback&&!this.state.isLoading&&this.setState({isLoading:!0}))}},{key:"onInputChange",value:function(e){var t=this.props,a=t.ignoreAccents,r=t.ignoreCase,t=e=(t=t.onInputChange)&&null!=(t=t(e))&&"object"!==(void 0===t?"undefined":h(t))?""+t:e;return a&&(t=s(t)),r&&(t=t.toLowerCase()),this.setState({inputValue:e}),this.loadOptions(t),e}},{key:"noResultsText",value:function(){var e=this.props,t=e.loadingPlaceholder,a=e.noResultsText,e=e.searchPromptText,r=this.state,n=r.inputValue;return r.isLoading?t:n&&a?a:e}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var t=this,e=this.props,a=e.children,r=e.loadingPlaceholder,e=e.placeholder,n=this.state,i=n.isLoading,n=n.options,e={noResultsText:this.noResultsText(),placeholder:i?r:e,options:i&&r?[]:n,ref:function(e){return t.select=e}};return a(v({},this.props,e,{isLoading:i,onInputChange:this.onInputChange}))}}]),R);function R(e,t){p(this,R);t=y(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,e,t));return t._cache=e.cache===W?{}:e.cache,t.state={inputValue:"",isLoading:!1,options:e.options},t.onInputChange=t.onInputChange.bind(t),t}I.propTypes=M,I.defaultProps=A;n=k.default.Component,m(N,n),t(N,[{key:"createNewOption",value:function(){var e=this.props,t=e.isValidNewOption,a=e.newOptionCreator,r=e.onNewOptionClick,e=e.options,e=void 0===e?[]:e;t({label:this.inputValue})&&(t=a({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),this.isOptionUnique({option:t,options:e}))&&(r?r(t):(e.unshift(t),this.select.selectValue(t)))}},{key:"filterOptions",value:function(){var e,t=this.props,a=t.filterOptions,r=t.isValidNewOption,n=t.promptTextCreator,t=t.showNewOptionAtTop,i=(arguments.length<=2?void 0:arguments[2])||[],a=a.apply(void 0,arguments)||[];return r({label:this.inputValue})&&(e=(r=this.props.newOptionCreator)({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),this.isOptionUnique({option:e,options:i.concat(a)}))&&(e=n(this.inputValue),this._createPlaceholderOption=r({label:e,labelKey:this.labelKey,valueKey:this.valueKey}),t?a.unshift(this._createPlaceholderOption):a.push(this._createPlaceholderOption)),a}},{key:"isOptionUnique",value:function(e){var t=e.option,e=e.options,a=this.props.isOptionUnique,e=e||this.props.options;return a({labelKey:this.labelKey,option:t,options:e,valueKey:this.valueKey})}},{key:"menuRenderer",value:function(e){return(0,this.props.menuRenderer)(v({},e,{onSelect:this.onOptionSelect,selectValue:this.onOptionSelect}))}},{key:"onInputChange",value:function(e){var t=this.props.onInputChange;return this.inputValue=e,t&&(this.inputValue=t(e)),this.inputValue}},{key:"onInputKeyDown",value:function(e){var t=this.props,a=t.shouldKeyDownEventCreateNewOption,t=t.onInputKeyDown,r=this.select.getFocusedOption();r&&r===this._createPlaceholderOption&&a(e)?(this.createNewOption(),e.preventDefault()):t&&t(e)}},{key:"onOptionSelect",value:function(e){e===this._createPlaceholderOption?this.createNewOption():this.select.selectValue(e)}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var t=this,e=this.props,a=e.ref,e=g(e,["ref"]);return(this.props.children||Q)(v({},e,{allowCreate:!0,filterOptions:this.filterOptions,menuRenderer:this.menuRenderer,onInputChange:this.onInputChange,onInputKeyDown:this.onInputKeyDown,ref:function(e){(t.select=e)&&(t.labelKey=e.props.labelKey,t.valueKey=e.props.valueKey),a&&a(e)}}))}}]);var D=N;function N(e,t){p(this,N);e=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,e,t));return e.filterOptions=e.filterOptions.bind(e),e.menuRenderer=e.menuRenderer.bind(e),e.onInputKeyDown=e.onInputKeyDown.bind(e),e.onInputChange=e.onInputChange.bind(e),e.onOptionSelect=e.onOptionSelect.bind(e),e}function z(e){var t=e.option,a=e.options,r=e.labelKey,n=e.valueKey;return!a||!a.length||0===a.filter(function(e){return e[r]===t[r]||e[n]===t[n]}).length}function K(e){return!!e.label}function q(e){var t=e.label,a=e.labelKey,r={};return r[e.valueKey]=t,r[a]=t,r.className="Select-create-option-placeholder",r}function Y(e){return'Create option "'+e+'"'}function X(e){switch(e.keyCode){case 9:case 13:case 188:return!0;default:return!1}}var Q=function(e){return k.default.createElement(C,e)},M=(D.isOptionUnique=z,D.isValidNewOption=K,D.newOptionCreator=q,D.promptTextCreator=Y,D.shouldKeyDownEventCreateNewOption=X,D.defaultProps={filterOptions:u,isOptionUnique:z,isValidNewOption:K,menuRenderer:c,newOptionCreator:q,promptTextCreator:Y,shouldKeyDownEventCreateNewOption:X,showNewOptionAtTop:!0},D.propTypes={children:r.default.func,filterOptions:r.default.any,isOptionUnique:r.default.func,isValidNewOption:r.default.func,menuRenderer:r.default.any,newOptionCreator:r.default.func,onInputChange:r.default.func,onInputKeyDown:r.default.func,onNewOptionClick:r.default.func,options:r.default.array,promptTextCreator:r.default.func,ref:r.default.func,shouldKeyDownEventCreateNewOption:r.default.func,showNewOptionAtTop:r.default.bool},P=k.default.Component,m(L,P),t(L,[{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var n=this;return k.default.createElement(I,this.props,function(e){var t=e.ref,e=g(e,["ref"]),r=t;return k.default.createElement(D,e,function(e){var t=e.ref,e=g(e,["ref"]),a=t;return n.props.children(v({},e,{ref:function(e){a(e),r(e),n.select=e}}))})})}}]),L);function L(){return p(this,L),y(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}M.propTypes={children:r.default.func.isRequired},M.defaultProps={children:function(e){return k.default.createElement(C,e)}},C.Async=I,C.AsyncCreatable=M,C.Creatable=D,C.Value=E,C.Option=b,e.Async=I,e.AsyncCreatable=M,e.Creatable=D,e.Value=E,e.Option=b,e.defaultMenuRenderer=c,e.defaultArrowRenderer=o,e.defaultClearRenderer=B,e.defaultFilterOptions=u,e.default=C},function(e,t,a){"use strict";!function(e){if(a(260),a(451),a(452),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,a){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:a})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}.call(this,a(47))},function(e,t,a){"use strict";e.exports=!a(10)&&!a(5)(function(){return 7!=Object.defineProperty(a(106)("div"),"a",{get:function(){return 7}}).a})},function(e,t,a){"use strict";t.f=a(8)},function(e,t,a){"use strict";var o=a(23),s=a(24),l=a(73)(!1),u=a(108)("IE_PROTO");e.exports=function(e,t){var a,r=s(e),n=0,i=[];for(a in r)a!=u&&o(r,a)&&i.push(a);for(;t.length>n;)!o(r,a=t[n++])||~l(i,a)||i.push(a);return i}},function(e,t,a){"use strict";var o=a(11),s=a(2),l=a(50);e.exports=a(10)?Object.defineProperties:function(e,t){s(e);for(var a,r=l(t),n=r.length,i=0;i<n;)o.f(e,a=r[i++],t[a]);return e}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(24),i=a(53).f,o={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!s||"[object Window]"!=o.call(e))return i(n(e));try{return i(e)}catch(e){return s.slice()}}},function(e,t,a){"use strict";var h=a(10),p=a(50),f=a(74),m=a(67),g=a(12),y=a(66),n=Object.assign;e.exports=!n||a(5)(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=n({},e)[a]||Object.keys(n({},t)).join("")!=r})?function(e,t){for(var a=g(e),r=arguments.length,n=1,i=f.f,o=m.f;n<r;)for(var s,l=y(arguments[n++]),u=i?p(l).concat(i(l)):p(l),c=u.length,d=0;d<c;)s=u[d++],h&&!o.call(l,s)||(a[s]=l[s]);return a}:n},function(e,t,a){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,a){"use strict";var r=a(14),n=a(6),c=a(160),d=[].slice,h={};e.exports=Function.bind||function(o){function s(){var e=u.concat(d.call(arguments));if(this instanceof s){var t=l,a=e.length,r=e;if(!(a in h)){for(var n=[],i=0;i<a;i++)n[i]="a["+i+"]";h[a]=Function("F,a","return new F("+n.join(",")+")")}return h[a](t,r)}return c(l,e,o)}var l=r(this),u=d.call(arguments,1);return n(l.prototype)&&(s.prototype=l.prototype),s}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=void 0===a;switch(t.length){case 0:return r?e():e.call(a);case 1:return r?e(t[0]):e.call(a,t[0]);case 2:return r?e(t[0],t[1]):e.call(a,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(a,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(a,t[0],t[1],t[2],t[3])}return e.apply(a,t)}},function(e,t,a){"use strict";var r=a(3).parseInt,n=a(61).trim,a=a(112),i=/^[-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){e=n(String(e),3);return r(e,t>>>0||(i.test(e)?16:10))}:r},function(e,t,a){"use strict";var r=a(3).parseFloat,n=a(61).trim;e.exports=1/r(a(112)+"-0")!=-1/0?function(e){var e=n(String(e),3),t=r(e);return 0===t&&"-"==e.charAt(0)?-0:t}:r},function(e,t,a){"use strict";var r=a(31);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,a){"use strict";var r=a(6),n=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&n(e)===e}},function(e,t,a){"use strict";e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,a){"use strict";var r=a(115),a=Math.pow,n=a(2,-52),i=a(2,-23),o=a(2,127)*(2-i),s=a(2,-126);e.exports=Math.fround||function(e){var t,a=Math.abs(e),e=r(e);return a<s?e*(a/s/i+1/n-1/n)*s*i:o<(t=(t=(1+i/n)*a)-(t-a))||t!=t?e*(1/0):e*t}},function(e,t,a){"use strict";var n=a(2);e.exports=function(t,e,a,r){try{return r?e(n(a)[0],a[1]):e(a)}catch(e){r=t.return;throw void 0!==r&&n(r.call(t)),e}}},function(e,t,a){"use strict";var c=a(14),d=a(12),h=a(66),p=a(9);e.exports=function(e,t,a,r,n){c(t);var i=d(e),o=h(i),s=p(i.length),l=n?s-1:0,u=n?-1:1;if(a<2)for(;;){if(l in o){r=o[l],l+=u;break}if(l+=u,n?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;n?0<=l:l<s;l+=u)l in o&&(r=t(r,o[l],l,i));return r}},function(e,t,a){"use strict";var l=a(12),u=a(51),c=a(9);e.exports=[].copyWithin||function(e,t){var a=l(this),r=c(a.length),n=u(e,r),i=u(t,r),e=2<arguments.length?arguments[2]:void 0,o=Math.min((void 0===e?r:u(e,r))-i,r-n),s=1;for(i<n&&n<i+o&&(s=-1,i+=o-1,n+=o-1);0<o--;)i in a?a[n]=a[i]:delete a[n],n+=s,i+=s;return a}},function(e,t,a){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,a){"use strict";var r=a(127);a(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,a){"use strict";a(10)&&"g"!=/./g.flags&&a(11).f(RegExp.prototype,"flags",{configurable:!0,get:a(68)})},function(O,U,a){"use strict";function r(){}function f(n){_.call(u,function(){var e,t,a=n._v,r=N(n);if(r&&(e=S(function(){M?P.emit("unhandledRejection",a,n):(t=u.onunhandledrejection)?t({promise:n,reason:a}):(t=u.console)&&t.error&&t.error("Unhandled promise rejection",a)}),n._h=M||N(n)?2:1),n._a=void 0,r&&e.e)throw e.v})}function m(t){_.call(u,function(){var e;M?P.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})}function n(e){var a,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw A("Promise can't be resolved itself");(a=R(e))?k(function(){var t={_w:r,_d:!1};try{a.call(e,c(n,t,1),c(L,t,1))}catch(e){L.call(t,e)}}):(r._v=e,r._s=1,D(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}}var t,i,o,s,l=a(42),u=a(3),c=a(30),e=a(60),d=a(0),h=a(6),p=a(14),g=a(55),y=a(56),v=a(69),_=a(129).set,k=a(130)(),b=a(131),S=a(174),E=a(83),T=a(175),x="Promise",A=u.TypeError,P=u.process,C=P&&P.versions,B=C&&C.v8||"",w=u[x],M="process"==e(P),I=i=b.f,C=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[a(8)("species")]=function(e){e(r,r)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(r)instanceof t&&0!==B.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(d,h){var p;d._n||(d._n=!0,p=d._c,k(function(){for(var e=d._v,t=1==d._s,a=0;p.length>a;){i=n=r=c=u=l=s=void 0;var r,n,i,o=p[a++],s=t?o.ok:o.fail,l=o.resolve,u=o.reject,c=o.domain;try{s?(t||(2==d._h&&m(d),d._h=1),!0===s?r=e:(c&&c.enter(),r=s(e),c&&(c.exit(),i=!0)),r===o.promise?u(A("Promise-chain cycle")):(n=R(r))?n.call(r,l,u):l(r)):u(e)}catch(e){c&&!i&&c.exit(),u(e)}}d._c=[],d._n=!1,h&&!d._h&&f(d)}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))};C||(w=function(e){g(this,w,x,"_h"),p(e),t.call(this);try{e(c(n,this,1),c(L,this,1))}catch(e){L.call(this,e)}},(t=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=a(57)(w.prototype,{then:function(e,t){var a=I(v(this,w));return a.ok="function"!=typeof e||e,a.fail="function"==typeof t&&t,a.domain=M?P.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&D(this,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new t;this.promise=e,this.resolve=c(n,e,1),this.reject=c(L,e,1)},b.f=I=function(e){return e===w||e===s?new o:i(e)}),d(d.G+d.W+d.F*!C,{Promise:w}),a(59)(w,x),a(54)(x),s=a(16)[x],d(d.S+d.F*!C,x,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(l||!C),x,{resolve:function(e){return T(l&&this===s?w:this,e)}}),d(d.S+d.F*!(C&&a(80)(function(e){w.all(e).catch(r)})),x,{all:function(e){var o=this,t=I(o),s=t.resolve,l=t.reject,a=S(function(){var r=[],n=0,i=1;y(e,!1,function(e){var t=n++,a=!1;r.push(void 0),i++,o.resolve(e).then(function(e){a||(a=!0,r[t]=e,--i)||s(r)},l)}),--i||s(r)});return a.e&&l(a.v),t.promise},race:function(e){var t=this,a=I(t),r=a.reject,n=S(function(){y(e,!1,function(e){t.resolve(e).then(a.resolve,r)})});return n.e&&r(n.v),a.promise}})},function(e,t,a){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,a){"use strict";var r=a(2),n=a(6),i=a(131);e.exports=function(e,t){return r(e),n(t)&&t.constructor===e?t:((0,(e=i.f(e)).resolve)(t),e.promise)}},function(e,t,a){"use strict";function o(e,t){var a,r=f(t);if("F"!==r)return e._i[r];for(a=e._f;a;a=a.n)if(a.k==t)return a}var s=a(11).f,l=a(52),u=a(57),c=a(30),d=a(55),h=a(56),r=a(117),n=a(170),i=a(54),p=a(10),f=a(43).fastKey,m=a(58),g=p?"_s":"size";e.exports={getConstructor:function(e,n,a,r){var i=e(function(e,t){d(e,i,n,"_i"),e._t=n,e._i=l(null),e._f=void 0,e._l=void 0,e[g]=0,null!=t&&h(t,a,e[r],e)});return u(i.prototype,{clear:function(){for(var e=m(this,n),t=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete t[a.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var t,a,r=m(this,n),e=o(r,e);return e&&(t=e.n,a=e.p,delete r._i[e.i],e.r=!0,a&&(a.n=t),t&&(t.p=a),r._f==e&&(r._f=t),r._l==e&&(r._l=a),r[g]--),!!e},forEach:function(e){m(this,n);for(var t,a=c(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(a(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!o(m(this,n),e)}}),p&&s(i.prototype,"size",{get:function(){return m(this,n)[g]}}),i},def:function(e,t,a){var r,n=o(e,t);return n?n.v=a:(e._l=n={i:r=f(t,!0),k:t,v:a,p:t=e._l,n:void 0,r:!1},e._f||(e._f=n),t&&(t.n=n),e[g]++,"F"!==r&&(e._i[r]=n)),e},getEntry:o,setStrong:function(e,a,t){r(e,a,function(e,t){this._t=m(e,a),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?n(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,n(1))},t?"entries":"values",!t,!0),i(a)}}},function(e,t,a){"use strict";function r(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}var i,n=a(3),o=a(37)(0),s=a(20),l=a(43),u=a(157),c=a(178),d=a(6),h=a(58),p=a(58),n=!n.ActiveXObject&&"ActiveXObject"in n,f="WeakMap",m=l.getWeak,g=Object.isExtensible,y=c.ufstore,v={get:function(e){var t;if(d(e))return!0===(t=m(e))?y(h(this,f)).get(e):t?t[this._i]:void 0},set:function(e,t){return c.def(h(this,f),e,t)}},_=e.exports=a(84)(f,r,v,c,!0,!0);p&&n&&(u((i=c.getConstructor(r,f)).prototype,v),l.NEED=!0,o(["delete","has","get","set"],function(r){var e=_.prototype,n=e[r];s(e,r,function(e,t){var a;return d(e)&&!g(e)?(this._f||(this._f=new i),a=this._f[r](e,t),"set"==r?this:a):n.call(this,e,t)})}))},function(e,t,a){"use strict";function o(e){return e._l||(e._l=new r)}function r(){this.a=[]}function n(e,t){return m(e.a,function(e){return e[0]===t})}var s=a(57),l=a(43).getWeak,i=a(2),u=a(6),c=a(55),d=a(56),h=a(37),p=a(23),f=a(58),m=h(5),g=h(6),y=0;r.prototype={get:function(e){e=n(this,e);if(e)return e[1]},has:function(e){return!!n(this,e)},set:function(e,t){var a=n(this,e);a?a[1]=t:this.a.push([e,t])},delete:function(t){var e=g(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(e,a,r,n){var i=e(function(e,t){c(e,i,a,"_i"),e._t=a,e._i=y++,e._l=void 0,null!=t&&d(t,r,e[n],e)});return s(i.prototype,{delete:function(e){var t;return!!u(e)&&(!0===(t=l(e))?o(f(this,a)).delete(e):t&&p(t,this._i)&&delete t[this._i])},has:function(e){var t;return!!u(e)&&(!0===(t=l(e))?o(f(this,a)).has(e):t&&p(t,this._i))}}),i},def:function(e,t,a){var r=l(i(t),!0);return!0===r?o(e).set(t,a):r[e._i]=a,e},ufstore:o}},function(e,t,a){"use strict";var r=a(32),n=a(9);e.exports=function(e){if(void 0===e)return 0;var e=r(e),t=n(e);if(e!==t)throw RangeError("Wrong length!");return t}},function(e,t,a){"use strict";var r=a(53),n=a(74),i=a(2),a=a(3).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),a=n.f;return a?t.concat(a(e)):t}},function(e,t,a){"use strict";var f=a(75),m=a(6),g=a(9),y=a(30),v=a(8)("isConcatSpreadable");e.exports=function e(t,a,r,n,i,o,s,l){for(var u,c,d=i,h=0,p=!!s&&y(s,l,3);h<n;){if(h in r){if(u=p?p(r[h],h,a):r[h],c=!1,(c=m(u)?void 0!==(c=u[v])?!!c:f(u):c)&&0<o)d=e(t,a,u,g(u.length),d,o-1)-1;else{if(9007199254740991<=d)throw TypeError();t[d]=u}d++}h++}return d}},function(e,t,a){"use strict";var i=a(9),o=a(114),s=a(35);e.exports=function(e,t,a,r){var e=String(s(e)),n=e.length,a=void 0===a?" ":String(a),t=i(t);return t<=n||""==a?e:(t=t-n,(n=o.call(a,Math.ceil(t/a.length))).length>t&&(n=n.slice(0,t)),r?n+e:e+n)}},function(e,t,a){"use strict";var l=a(10),u=a(50),c=a(24),d=a(67).f;e.exports=function(s){return function(e){for(var t,a=c(e),r=u(a),n=r.length,i=0,o=[];i<n;)t=r[i++],l&&!d.call(a,t)||o.push(s?[t,a[t]]:a[t]);return o}}},function(e,t,a){"use strict";var r=a(60),n=a(185);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,a){"use strict";var r=a(56);e.exports=function(e,t){var a=[];return r(e,!1,a.push,a,t),a}},function(e,t,a){"use strict";e.exports=Math.scale||function(e,t,a,r,n){return 0===arguments.length||e!=e||t!=t||a!=a||r!=r||n!=n?NaN:e===1/0||e===-1/0?e:(e-t)*(n-r)/(a-t)+r}},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(3),o=a(69),s=a(175);r(r.P+r.R,"Promise",{finally:function(t){var a=o(this,n.Promise||i.Promise),e="function"==typeof t;return this.then(e?function(e){return s(a,t()).then(function(){return e})}:t,e?function(e){return s(a,t()).then(function(){throw e})}:t)}})},function(e,t,a){"use strict";var r=a(0),n=a(131),i=a(174);r(r.S,"Promise",{try:function(e){var t=n.f(this),e=i(e);return(e.e?t.reject:t.resolve)(e.v),t.promise}})},function(k,G,e){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getVersion=G.decodeData=G.RemoveAdsEvents=G.IsReady=G.ChangeSource=G.AdInstance=G.AdsEvents=G.UnMount=G.Setup=G.NexFactory=G.Player=G.p360=void 0;var ie=e(71),H=t(e(190)),oe=(e(458),e(459),e(460)),se=e(461),b=e(191),i=(t(e(462)),t(e(105))),le=e(463);function t(e){return e&&e.__esModule?e:{default:e}}function S(e){return function(){var s=e.apply(this,arguments);return new H.default(function(i,o){return function t(e,a){try{var r=s[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return H.default.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}e(464),e(151),e(466),e(491);var D,a,E=e(492),ue=e(515),T=e(518),x=(e(145),e(519),G.p360=e(520)),r=null,W=[],z=[],K=!1,q=!1,Y=null,n=null,X=null,Q=null,Z=null,J=(window.Promise||(window.Promise=H.default),G.Player=function e(){this.player_=new o,this.div=null,this._contentType=e.CONTENT_TYPE.NONE;var t=this;this._adBlockStartHandler=function(){t._contentType=e.CONTENT_TYPE.AD},this._adBlockEndHandler=function(){t._contentType=e.CONTENT_TYPE.MAIN_CONTENT},X=this._adBlockStartHandler.bind(this),Q=this._adBlockEndHandler.bind(this)}),o=(J.NexProtocol={HLS:0,DASH:1,PROGRESSIVE_DOWNLOAD:2,UNKNOWN:3},J.NexEvent={Track_Change:0,Fragment_Loading_Completed:1,Buffering:2,Error:3,Manifest_Switched:4,Play:100,Pause:101,FF:102,Rewind:103,BottomButton:200,RightButton:201,UpButton:202,LeftButton:203,DownArrow:204,RightArrow:205,UpArrow:206,LeftArrow:207,RightTrigger:208,LeftTrigger:209,RightBumper:210,LeftBumper:211,Options:212},J.THUMB_TYPE={STATIC_THUMBNAILS:0,DYNAMIC_THUMBNAILS:1},J.NEX_STATE={NONE:0,READY:1,PLAYING:2,PAUSED:3},J.CONTENT_TYPE={NONE:"none",AD:"ad",MAIN_CONTENT:"mainContent"},J.prototype.getVersion=function(){return console.warn("The method getVersion() is deprecated, please use nexplayer.getVersion() instead"),o.MAJOR.toString()+"."+o.MINOR.toString()+"."+o.SUB_VERSION.toString()+("0"!==o.HOTFIX.toString()?"."+o.HOTFIX.toString():"")+"_"+o.RELEASE_DATE},J.prototype.Init=function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R){return this._contentType=J.CONTENT_TYPE.MAIN_CONTENT,this.player_.Init(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R)},J.prototype.getBandwidthEstimate=function(){if(this.player_)return this.player_.getBandwidthEstimate()},J.prototype.getTracks=function(){return this.player_.getTracks()},J.prototype.getCurrentTrack=function(){return this.player_.getCurrentTrack()},J.prototype.setCurrentTrack=function(e){return this.player_.setCurrentTrack(e)},J.prototype.enableABR=function(){this.player_.enableABR()},J.prototype.setBufferLength=function(e){this.player_.setBufferLength(e)},J.prototype.getAudioStreams=function(){return this.player_.getAudioStreams()},J.prototype.getState=function(){return this.player_.getState()},J.prototype.getCurrentAudioStream=function(){return this.player_.getCurrentAudioStream()},J.prototype.setAudioStream=function(e){this.player_.setAudioStream(e)},J.prototype.isLive=function(){return this.player_.isLive()},J.prototype.on=function(e,t){if(void 0!==this.player_&&null!==this.player_)return this.player_.on(e,t)},J.prototype.off=function(e,t){this.player_.off(e,t)},J.prototype._addEventListener=function(a,r){var n;"adblockstart"===a||"adblockend"===a||"adstarted"===a||"adcomplete"===a||"adpodsinfo"===a?null!==this.div&&void 0!==this.div&&this.div.addEventListener(a,r):void 0!==_()&&null!==_()?_().container.addEventListener(a,r):null!==this.div&&void 0!==this.div&&(n=this).div.addEventListener("adInstanceReady",function e(){if(null===_()||void 0===_()||null===_().container||void 0===_().container)console.error("Ad library couldn't be initialized");else for(var t=0;t<z.length;t++)_().container.addEventListener(a,r);n.div.removeEventListener("adInstanceReady",e)})},J.prototype._removeEventListener=function(a,r){"adblockstart"===a||"adblockend"===a||"adstarted"===a||"adcomplete"===a||"adpodsinfo"===a?null!==this.div&&void 0!==this.div&&this.div.removeEventListener(a,r):void 0!==_()&&null!==_()?_().container.removeEventListener(a,r):null!==this.div&&void 0!==this.div&&this.div.addEventListener("adInstanceReady",function e(){if(null===_()||void 0===_()||null===_().container||void 0===_().container)console.error("Ad library isn't initialized");else for(var t=0;t<z.length;t++)_().container.removeEventListener(a,r);this.div.removeEventListener("adInstanceReady",e)})},J.prototype.setThumbnailResources=function(e,t){null!=t&&this.player_.setThumbnailResources(t),this.player_.setThumbnailCallback(e)},J.prototype.addTrackerData=function(e,t){this.player_.addTrackerData(e,t)},J.prototype.removeTrackerData=function(e){this.player_.removeTrackerData(e)},J.prototype.getCurrentTime=function(){return this.player_.getTime()},J.prototype.getDuration=function(){return this.player_.getDuration()},J.prototype.getVolume=function(){return this.player_.getVolume()},J.prototype.seek=function(e){this.isCurrentAssetAd()||this.player_.seek(e)},J.prototype.seekLive=function(){this.isCurrentAssetAd()||this.player_.seekLive()},J.prototype.sendImpression=function(e,t,a,r,n,i){return this.player_.sendImpression(e,t,a,r,n,i)},J.prototype.getProtocol=function(){return this.player_.getProtocol()},J.prototype.getThumbnails=function(){return this.player_.getThumbnailController()?this.player_.getThumbnailController().getPreviewThumbnails():[]},J.prototype.getThumbnailAt=function(e){return this.player_.getThumbnailController()?this.player_.getThumbnailController().getThumbnailAt(e):null},J.prototype.getURL=function(){return this.player_.URL},J.prototype.getPlaybackRate=function(){return void 0!==this.player_.videoElement_&&null!==this.player_.videoElement_?this.player_.videoElement_.playbackRate:NaN},J.prototype.getDroppedFrames=function(){return null!==this.player_&&this.player_?this.player_.getDroppedFrames():NaN},J.prototype.getMediaElement=function(){return void 0!==this.player_.videoElement_&&null!==this.player_.videoElement_?this.player_.videoElement_:null},J.prototype.getCurrentSegmentContainer=function(){return this.player_.getCurrentSegmentContainer()},J.prototype.enablePreviewThumbnails=function(e){this.player_.enablePreviewThumbnails(e)},J.prototype.setSpeed=function(e){this.player_.setSpeed(e)},J.prototype.getQualityLevels=function(){return this.player_.getQualityLevels()},J.prototype.getCurrentSubtitle=function(){return this.player_.getCurrentSubtitle()},J.prototype.setTrack=function(e){this.player_.setTrack(e)},J.prototype.load=function(e,t,a){this.player_.load(e,t,a)},J.prototype.reload=function(){this.isCurrentAssetAd()?this.player_.logger.warn("It is not possible to use the reload method while an ad is playing"):this.player_.reload()},J.prototype.togglePlayPause=function(){return this.player_.togglePlayPause()},J.prototype.setSubtitle=function(e){return e>this.player_.getListSubtitle().length-1?"Index out of range":this.player_.setSubtitle(e)},J.prototype.setAudio=function(e){return this.player_.setAudio(e)},J.prototype.setVolume=function(e){return K&&Y._isAdBlockStarted?void console.warn("Could not change the volume of the video, the ad is playing."):this.player_.setVolume(e)},J.prototype.play=function(){var e;K?Y._isAdBlockStarted?console.warn("Could not play the video while an ad is playing"):null!==(e=document.getElementById("nexplayer_adcontroller_container"))&&"none"!==e.style.display||this.player_.play():this.isCurrentAssetAd()||this.player_.nexplayer_.isSeeking()||this.player_.play()},J.prototype.pause=function(){var e;K?Y._isAdBlockStarted?console.warn("Could not pause the video while an ad is playing."):null!==(e=document.getElementById("nexplayer_adcontroller_container"))&&"none"!==e.style.display||this.player_.pause():this.player_.pause()},J.prototype.toggleFullScreen=function(){return this.player_.toggleFullScreen()},J.prototype.toggleControlBar=function(){return this.player_.toggleControlBar()},J.prototype.isControlBarOpen=function(){return this.player_.isControlBarOpen()},J.prototype.isLanguageMenuOpen=function(){return this.player_.isLanguageMenuOpen()},J.prototype.toggleLanguagesMenu=function(){return this.player_.toggleLanguagesMenu()},J.prototype.upFocus=function(){return this.player_.upFocus()},J.prototype.downFocus=function(){return this.player_.downFocus()},J.prototype.buttonsNextFocus=function(){return this.player_.buttonsNextFocus()},J.prototype.buttonsPreviousFocus=function(){return this.player_.buttonsPreviousFocus()},J.prototype.focusOnPlaybackBar=function(){return this.player_.focusOnPlaybackBar()},J.prototype.focusOnButtonsBar=function(){return this.player_.focusOnButtonsBar()},J.prototype.seekRange=function(){return this.player_.seekRange()},J.prototype.getSubtitles=function(){return this.player_.getListSubtitle()},J.prototype.getCurrentContentType=function(){return this._contentType},J.prototype.isCurrentAssetAd=function(){return this._contentType===J.CONTENT_TYPE.AD},J.prototype.isCurrentAssetMuted=function(){return this.isCurrentAssetAd()?ne().getMute():!(null!==this.player_&void 0!==this.player_)||0===this.player_.videoElement_.volume},J.prototype.isPlayBackBarFocused=function(){return this.player_.isPlayBackBarFocused()},J.prototype.buttonsClickFocus=function(){return this.player_.buttonsClickFocus()},J.prototype.getState=function(){return this.player_.videoElement_.paused?this.player_.state=J.NEX_STATE.PAUSED:this.player_.state=J.NEX_STATE.PLAYING,this.player_.state},J.prototype.upSubtitle=function(e){return this.player_.upSubtitle(e)},J.prototype.downSubtitle=function(e){return this.player_.downSubtitle(e)},J.prototype.downLanguage=function(){return this.player_.downLanguage()},J.prototype.upLanguage=function(){return this.player_.upLanguage()},J.prototype.trickPlay=function(e){if(!this.isCurrentAssetAd())return this.player_.trickPlay(e);console.warn("TrickPlay is disabled whilst an AD is playing")},J.prototype.manualLoop=function(){return this.player_.manualLoop()},J.prototype.destroy=function(){r=void 0,this._contentType=J.CONTENT_TYPE.NONE;return q&&Z.removeAdsEvents(),v("adblockstart",X),v("adblockend",Q),this.player_.destroyThumbnailController(),this.player_.watermarkContext&&this.player_.watermarkContext.finish(this.player_.wmInfo),this.player_.destroy()},J.prototype.executeAd=function(e){return this.player_.executeAd(e)},function(){this.enableThumbs=!1,this.numExternalSubtitles=0,this.adsCues_=null,this.div=null}),ee=(Object.defineProperty(o,"MAJOR",{enumerable:!0,configurable:!1,writable:!1,value:4}),Object.defineProperty(o,"MINOR",{enumerable:!0,configurable:!1,writable:!1,value:4}),Object.defineProperty(o,"SUB_VERSION",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(o,"HOTFIX",{enumerable:!0,configurable:!1,writable:!1,value:4}),Object.defineProperty(o,"RELEASE_DATE",{enumerable:!0,configurable:!1,writable:!1,value:"20221216"}),o.prototype.setAdsCues=function(e){Array.isArray(e)&&(this.adsCues_=e)},o.prototype.play=function(){this.nexplayer_.play()},o.prototype.pause=function(){this.nexplayer_.pause()},o.prototype.trickPlay=function(e){this.nexplayer_.trickPlay(e)},o.prototype.manualLoop=function(){var e=this,t="";this.videoElement_.addEventListener("loadeddata",function(){t=e.getDuration()}),this.videoElement_.addEventListener("timeupdate",function(){t-.5<e.getTime()&&(e.seek(.1),jump=!0)})},o.prototype.destroy=function(){return this.nexplayer_.destroy()},o.prototype.executeAd=function(e){e=new CustomEvent("executeNewAd",{detail:{adUrl:e}});document.dispatchEvent(e)},o.prototype.sendImpression=function(e,t,a,r,n,i){},null),s=(o.prototype.Init=(D=S(regeneratorRuntime.mark(function e(O,s,t,l,u,c,d,U,h,p,f,m,g,y,a,r,v,_,k,b,S,E,B,n,F,j,i,V,$,o,T,x,A){var P,C,w,M,I,R,D,N,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((P=this).logger=new ie.Logger({debugMode:!0},h),P.newRelicTracker=E,ae=a,C=A.every(function(e){}),null===b&&(b={}),n&&(b.preferredAudioCodec=n),A&&C&&(b.preferredVideoCodecs=A),this.externalSubtitles=v,ce("ima"===o||"dai"===o?"adblockstart":"adtagstartloading",X),ce("adblockend",Q),this.state=J.NEX_STATE.NONE,ee=_,w=!1,p&&(s.addEventListener("seeked",function(e){w&&0==s.seeking&&(w=!1)}),document.addEventListener("keydown",function(e){if(!document.getElementById("nexAdUI"))switch(e.keyCode){case 13:P.buttonsClickFocus();break;case 37:P.isPlayBackBarFocused()?(P.seek(P.videoElement_.currentTime-10),0<=P.getCurrentSubtitle()&&P.videoElement_.seeking&&(P.getCurrentSubtitle(),w=!0),P.enableThumbs&&P.buttonsClickFocus()):P.isLanguageMenuOpen()?P.changeMenu():P.buttonsPreviousFocus();break;case 39:P.isPlayBackBarFocused()?(P.isControlBarOpen()||(P.toggleControlBar(),P.focusOnPlaybackBar()),P.seek(P.videoElement_.currentTime+10),0<=P.getCurrentSubtitle()&&P.videoElement_.seeking&&(P.getCurrentSubtitle(),w=!0),P.enableThumbs&&P.buttonsClickFocus()):P.isLanguageMenuOpen()?P.changeMenu():P.buttonsNextFocus();break;case 38:P.isLanguageMenuOpen()?0===te?P.upLanguage():P.upSubtitle():P.upFocus();break;case 40:P.isLanguageMenuOpen()?0===te?P.downLanguage():P.downSubtitle():P.downFocus()}})),""!==t&&null!=x)return q=!0,Z=new le.NexDAIController(s,W,z,m,x,k),e.next=18,Z.init().then(function(e){t=e,G.AdInstance=ne=function(){return Z._getAdsManager()}});e.next=20;break;case 18:m.addEventListener("adblockstart",function(){document.getElementsByClassName("nexplayer_bar")[0]&&(document.getElementsByClassName("nexplayer_bar")[0].style.display="none")}),m.addEventListener("adblockend",function(){document.getElementsByClassName("nexplayer_bar")[0]&&(document.getElementsByClassName("nexplayer_bar")[0].style.display="inherit")});case 20:if(""===t||null==i)e.next=36;else{if(M=!1,I="",void 0!==i)return P=this,(R=new oe.SSAIMediaTailorParser(i)).init(),e.next=29,R.getAdsTrackingInfo().then(function(e){D=e}).catch(function(e){P._logger.error(e)});e.next=32}break;case 29:t=R._manifestURL,I=R._adsTrackingURL,M=!0;case 32:M&&(this.logger.log("SSAIMediaTailorController ads tracking URL: ",I),K=!0,Y=new se.SSAIMediaTailorController(D,W,z,m,s,f)),null!==Y&&(Y.init("SSAI"),G.AdInstance=ne=function(){return Y._getAdsManager()}),m.addEventListener("adblockstart",function(){document.getElementsByClassName("nexplayer_bar")[0]&&(document.getElementsByClassName("nexplayer_bar")[0].style.display="none")}),m.addEventListener("adblockend",function(){-1!==Y._seekTime&&(player.seek(Y._seekTime),Y._seekTime=-1),document.getElementsByClassName("nexplayer_bar")[0]&&(document.getElementsByClassName("nexplayer_bar")[0].style.display="inherit")});case 36:return r||re(),this.URL=t,N=-1,L=function e(t,a,r){var n,i=new XMLHttpRequest,o=(P.URL=t,!1);0<P.URL.indexOf(".m3u8")||0<P.URL.indexOf(".mpd")||0<P.URL.indexOf(".pmpd")||0<P.URL.indexOf(".ism")?(n=new CustomEvent("manifestrequest"),s.dispatchEvent(n),i.open("GET",P.URL,!0)):(o=!0,i.open("GET","",!0)),i.onload=function(){200===i.status||o?(P.URL=t,null==window.tizen&&t.includes("(")&&(t=t.substring(0,t.indexOf("("))),P.protocolType=J.NexProtocol.UNKNOWN,void 0!==l&&(P.nexDRMInformation=l),void 0!==u&&(P.displayableInCanvas=u),void 0!==c&&(P.protocolType=c),void 0!==d&&(P.debugLog=d),P.protocolType===J.NexProtocol.UNKNOWN&&void 0!==P.URL&&(1==P.URL.includes(".ism")?0<P.URL.indexOf(".ism")&&(1==P.URL.includes("format=m3u8")||P.URL.includes("m3u8"))?P.protocolType=J.NexProtocol.HLS:0<P.URL.indexOf(".ism")&&(P.URL.includes("format=mpd")||P.URL.includes("mpd"))?P.protocolType=J.NexProtocol.DASH:P.protocolType=J.NexProtocol.MSS:0<P.URL.includes(".m3u8")||0<P.URL.indexOf(".flv")?P.protocolType=J.NexProtocol.HLS:0<P.URL.indexOf(".mpd")||0<P.URL.indexOf(".pmpd")?P.protocolType=J.NexProtocol.DASH:(0<P.URL.indexOf(".mp4")||0<P.URL.indexOf(".aac")||0<P.URL.indexOf(".mp3"))&&(P.protocolType=J.NexProtocol.PROGRESSIVE_DOWNLOAD)),P.nexplayer_=P.getPlayer(),P.videoElement_=s,P.state=J.NEX_STATE.READY,P.nexplayer_.Init(s,P.URL,P.nexDRMInformation,P.tempResolver_,P.tempReject_,void 0,d,h,p,P.resetPromise_,f,m,g,y,v,_,k,b,S,E,B,F,void 0,V,$,T),P.enableThumbs&&(null!==P.thumbVTTURL&&void 0!==P.thumbVTTURL?P.thumb_controller=new ue.ThumbController(J.THUMB_TYPE.STATIC_THUMBNAILS,P.thumbImageURL,P.thumbVTTURL,P.thumbDisplay,P.thumbError,P.thumbStep,P.isBrowserSafari(),P.URL,P.videoElement_,m,P.logger):P.thumb_controller=new ue.ThumbController(J.THUMB_TYPE.DYNAMIC_THUMBNAILS,P.nexplayer_,P.videoElement_,P.thumbDisplay,P.thumbError,P.thumbStep,P.isBrowserSafari(),P.URL,P.videoElement_,m,P.logger))):0<T.length&&N<T.length-1?e(T[++N],a,r):(P.logger.error("Failed to download video data."),r()),null!=y&&y&&setTimeout(function(){P.toggleFullScreen()},500),a(t),void 0!==document.getElementsByClassName("nexplayer_option_subtitles")[0]&&null!==document.getElementsByClassName("nexplayer_option_subtitles")[0]&&void 0!==document.getElementsByClassName("nexplayer_option_audios")[0]&&null!==document.getElementsByClassName("nexplayer_option_audios")[0]&&(document.getElementsByClassName("nexplayer_option_subtitles")[0].getElementsByTagName("h3")[0].style["border-bottom"]="0px solid red",document.getElementsByClassName("nexplayer_option_audios")[0].getElementsByTagName("h3")[0].style["border-bottom"]="2px solid red")},i.onerror=function(){P.logger.error("Failed to download video data."),r()},i.send()},e.next=42,new H.default(function(e,t){L(P.URL,e,t)});case 42:case"end":return e.stop()}},e,this)})),function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x,A,P,C,w,M,I,R){return D.apply(this,arguments)}),o.prototype.AddSrtSubtitles=function(e,t){var a=this,r=new XMLHttpRequest;null!=e&&(r.open("GET",e,!0),r.send(null),r.onload=function(e){null==r.response?a.logger.error("Fail to get response (.srt subtitles)"):(a.logger.log("Get petition finished fine (.srt subtitles)"),a.convertSubtittles(r.response," ",t))})},o.prototype.convertSubtittles=function(e,t,a){for(var r=document.createElement("track"),n=this.videoElement_.textTracks,i=!1,o=0;o<n.length;o++)n[o].language==a&&(this.logger.warn("Subtitle in "+n[o].label+" already created"),i=!0);e=this.srt2webvtt(e),e=new Blob([e],{type:"text/vtt"}),e=URL.createObjectURL(e);null!=e?(r.src=e,r.label=t,r.srclang=i?a+" 2":a,r.kind="captions",this.logger.warn(r),null!=r?(this.videoElement_.appendChild(r),this.numExternalSubtitles++,this.logger.log("New subtitles added"),this.logger.warn(this.videoElement_.textTracks)):this.logger.warn(".srt conversion failed")):this.logger.warn("Couldn't create a new URL for the converted subtitles")},o.prototype.srt2webvtt=function(e){var t=e.replace(/\r+/g,"").replace(/^\s+|\s+$/g,"").split("\n\n"),a="";if(0<t.length){a+="WEBVTT\n\n";for(var r=0;r<t.length;r+=1){var n=t[r].split(/\n/);n.length<=1?t[r-1].concat(n[r]):a+=this.convertSrtCue(t[r])}}return a},o.prototype.convertSrtCue=function(e){for(var t="",a=e.split(/\n/);3<a.length;){for(var r=3;r<a.length;r++)a[2]+="\n"+a[r];a.splice(3,a.length-3)}var n,e=0;return!a[0].match(/\d+:\d+:\d+/)&&a[1].match(/\d+:\d+:\d+/)&&(t+=a[0].match(/\w+/)+"\n",e+=1),a[e].match(/\d+:\d+:\d+/)&&(n=a[1].match(/(\d+):(\d+):(\d+)(?:,(\d+))?\s*--?>\s*(\d+):(\d+):(\d+)(?:,(\d+))?/))?(t+=n[1]+":"+n[2]+":"+n[3]+"."+n[4]+" --\x3e "+n[5]+":"+n[6]+":"+n[7]+"."+n[8]+"\n",a[e+=1]&&(t+=a[e]+"\n\n"),t):""},o.prototype.getPlayer=function(){var e;if(this.resetPromise_=null,this.protocolType===J.NexProtocol.PROGRESSIVE_DOWNLOAD||this.protocolType===J.NexProtocol.HLS||this.protocolType===J.NexProtocol.DASH)return this.destroyPreviousPlayer(),e=new E.NexShaka,r=e;this.logger.error("[NexPlayer] Error code 105: Content not supported.")},o.prototype.getErrorMessage=function(e){var t="";switch(e){case 0:t="Invalid domain";break;case 1:t="Invalid app id";break;case 2:t="Timelock expired";break;case 3:t="Max number of impressions reached";break;case 4:t="Invalid license key";break;case 5:t="Invalid Android app id";break;case 6:t="Bad request (malformed)";break;case 7:t="License is disabled";break;case 8:t="Forbidden";break;case 9:t="Too many requests";break;case 10:t="Internal server error"}return t},o.prototype.destroyPreviousPlayer=function(){null!=r&&void 0!==r.reset&&r.reset()},o.prototype.togglePlayPause=function(){this.videoElement_.paused?this.videoElement_.play():this.videoElement_.pause()},o.prototype.setSubtitle=function(e){if(e<this.getListSubtitle().length){-1<(e+=1)&&e<this.getListSubtitle().length+1?document.getElementsByClassName("nexplayer_option_subtitles")[0].querySelectorAll("p")[e].click():this.logger.warn("Out of range subtitle index");for(var t=this,a=0;a<t.videoElement_.textTracks.length;a++)t.videoElement_.textTracks[a].oncuechange=null;if(1<=e)if(e<this.videoElement_.textTracks.length)t.videoElement_.textTracks[e-1].oncuechange=function(){t.onchangecue(e)};else for(var r=0;r<t.videoElement_.textTracks.length;r++)"Shaka Player TextTrack"===t.videoElement_.textTracks[r]&&(t.videoElement_.textTracks[r].oncuechange=function(){t.onchangecue(r+1)})}},o.prototype.setAudio=function(e){-1<=e&&document.getElementsByClassName("nexplayer_option_audios")[0]?(e+=1,document.getElementsByClassName("nexplayer_option_audios")[0].querySelectorAll("p")[e].click()):this.logger.warn("Out of range audio index")},o.prototype.setVolume=function(e){e=new CustomEvent("changevolume",{detail:{value:e}});this.div.dispatchEvent(e)},null),l=(o.prototype.defineSubtitle=function(){if(document.getElementsByClassName("nexplayer_option_subtitles")[0]){for(var e=document.getElementsByClassName("nexplayer_option_subtitles")[0].querySelectorAll("p"),t=0;t<e.length;t++)"nexplayer_selected_element"===e[t].className&&(s=t);null===s&&(s=0)}},o.prototype.upSubtitle=function(){this.isControlBarOpen()?re():this.toggleControlBar(),null===s&&this.defineSubtitle(),document.getElementById("subOff")&&(0===s?(document.getElementById("subOff").className="nexplayer_selected_element",--s):(document.getElementById("subOff").className="",0<(s=-1===s?this.getListSubtitle().length:s)?--s:s=this.getListSubtitle().length),this.setSubtitle(s))},o.prototype.getCurrentSubtitle=function(){if(document.getElementsByClassName("nexplayer_option_subtitles")[0]){for(var e=document.getElementsByClassName("nexplayer_option_subtitles")[0].querySelectorAll("p"),t=0;t<e.length&&"nexplayer_selected_element"!=e[t].className;t++);return t<e.length?t-1:-1}return-1},o.prototype.getListSubtitle=function(){var e=[];if(document.getElementsByClassName("nexplayer_option_subtitles")[0]){var t=document.getElementsByClassName("nexplayer_option_subtitles")[0].querySelectorAll("p");0==t.length&&this.logger.debug("No subtitles availables");for(var a=1;a<t.length;a++)e.push({language:t[a].innerHTML.trim(),id:a-1})}return e},o.prototype.downSubtitle=function(){this.isControlBarOpen()?re():this.toggleControlBar(),null===s&&this.defineSubtitle(),s==this.getListSubtitle().length-1?(document.getElementById("subOff").className="nexplayer_selected_element",s=-1):(document.getElementById("subOff").className="",s<=this.getListSubtitle().length-1?(s+=1)==this.getListSubtitle().length&&(s+=2):s=0),this.setSubtitle(s)},0),te=0,ae=(o.prototype.upLanguage=function(){0<l?--l:l=this.getAudioStreams().length-1,this.setAudio(l-1)},o.prototype.downLanguage=function(){l+1<this.getAudioStreams().length?l+=1:l=0,this.setAudio(l-1)},o.prototype.onchangecue=function(e){if(null!=ee&&null!=this.videoElement_.textTracks[e-1].activeCues)if(0<this.videoElement_.textTracks[e-1].activeCues.length){for(var t=this.videoElement_.textTracks[e-1].activeCues[0].track.cues.length,a=0;a<t&&this.videoElement_.textTracks[e-1].activeCues[0]!==this.videoElement_.textTracks[e-1].activeCues[0].track.cues[a];a++);ee(e,this.videoElement_.currentTime,this.videoElement_.textTracks[e-1].activeCues[0].text,a)}else 0==this.videoElement_.textTracks[e-1].activeCues.length&&ee(e,this.videoElement_.currentTime,"",-1)},o.prototype.changeMenu=function(){var e;0===(e=document.getElementsByClassName("nexplayer_option_audios")?document.getElementsByClassName("nexplayer_option_audios"):e).length?te=-1:te<e.length?te++:te--,document.getElementsByClassName("nexplayer_option_subtitles")[0]&&document.getElementsByClassName("nexplayer_option_audios")[0]&&(0===te?(document.getElementsByClassName("nexplayer_option_subtitles")[0].getElementsByTagName("h3")[0].style["border-bottom"]="0px solid red",document.getElementsByClassName("nexplayer_option_audios")[0].getElementsByTagName("h3")[0].style["border-bottom"]="2px solid red"):1===te&&(document.getElementsByClassName("nexplayer_option_subtitles")[0].getElementsByTagName("h3")[0].style["border-bottom"]="2px solid red",document.getElementsByClassName("nexplayer_option_audios")[0].getElementsByTagName("h3")[0].style["border-bottom"]="0px solid red"))},o.prototype.toggleFullScreen=function(){document.getElementsByClassName("nexplayer_full_screen")[0]&&document.getElementsByClassName("nexplayer_full_screen")[0].click()},o.prototype.toggleControlBar=function(){var e=!1;(K||q)&&Y._isAdBlockStarted?(e=!1,console.warn("Could no active de control bar when the ad is playing")):e=!0,e&&document.getElementsByClassName("nexplayer_bar")[0]&&("none"===document.getElementsByClassName("nexplayer_bar")[0].style.display?(document.getElementsByClassName("nexplayer_bar")[0].style.display="inherit",re()):document.getElementsByClassName("nexplayer_bar")[0].style.display="none")},0),A=!1;function re(){(0<ae||A)&&document.getElementsByClassName("nexplayer_bar")[0]&&document.getElementsByClassName("nexplayer_return_container")[0]&&(clearTimeout(a),document.getElementsByClassName("nexplayer_bar")[0].style.display="inherit",document.getElementsByClassName("nexplayer_return_container")[0].style.display="inherit",a=setTimeout(function(){document.getElementsByClassName("nexplayer_option_ui")[0]&&document.getElementsByClassName("nexplayer_option_ui")[0].parentElement&&"inherit"!==document.getElementsByClassName("nexplayer_option_ui")[0].parentElement.style.display&&(document.getElementsByClassName("nexplayer_bar")[0].style.display="none",document.getElementsByClassName("nexplayer_return_container")[0].style.display="none")},ae))}o.prototype.isControlBarOpen=function(){return!!document.getElementsByClassName("nexplayer_bar")[0]&&"inherit"===document.getElementsByClassName("nexplayer_bar")[0].style.display},o.prototype.isLanguageMenuOpen=function(){return!!document.getElementsByClassName("nexplayer_option_ui")[0]&&"inherit"===document.getElementsByClassName("nexplayer_option_ui")[0].parentElement.style.display},o.prototype.toggleLanguagesMenu=function(){document.getElementsByClassName("nexplayer_language")[0]&&(this.isControlBarOpen()?re():this.toggleControlBar(),document.getElementsByClassName("nexplayer_language")[0].click(),"0"===document.getElementsByClassName("nexplayer_language")[0].style.height)&&this.toggleControlBar()};var u=-1,c=-1,d=!1;function h(e){document.getElementsByClassName("nexplayer_endedscreen")[0]&&document.getElementsByClassName("nexplayer_logo_replay")[0]&&e===document.getElementsByClassName("nexplayer_logo_replay")[0]&&(e=document.getElementsByClassName("nexplayer_endedscreen")[0]);e=window.getComputedStyle(e);return"none"===e.display||"hidden"==e.visibility}function p(e){d=!1,m.forEach(function(e){document.getElementsByClassName(e)[0]&&((e=document.getElementsByClassName(e)[0]).style.outline="0px solid #ff5e0e",e.classList.remove("nexplayer_focused"))}),g.forEach(function(e){document.getElementsByClassName(e)[0]&&((e=document.getElementsByClassName(e)[0]).style.outline="0px solid #ff5e0e",e.classList.remove("nexplayer_focused"))}),e.style.outline="2px solid #ff5e0e",e.classList.add("nexplayer_focused")}o.prototype.upFocus=function(){this.isControlBarOpen()?re():this.toggleControlBar(),u=-1,c>=m.length-1?c=0:c+=1,document.getElementsByClassName(m[c])[0]&&(h(document.getElementsByClassName(m[c])[0])?this.upFocus():p(document.getElementsByClassName(m[c])[0])),"nexplayer_container_seekbar"===m[c]&&(d=!0),0===c&&(u=0)},o.prototype.downFocus=function(){this.isControlBarOpen()?re():this.toggleControlBar(),u=-1,c<=0?c=m.length-1:--c,document.getElementsByClassName(m[c])[0]&&(h(document.getElementsByClassName(m[c])[0])?this.downFocus():p(document.getElementsByClassName(m[c])[0])),"nexplayer_container_seekbar"===m[c]&&(d=!0),0===c&&(u=0)},o.prototype.buttonsNextFocus=function(){c<=0&&(0===c&&u<=0&&(u=0),this.isControlBarOpen()?re():this.toggleControlBar(),this.isLanguageMenuOpen()&&this.toggleLanguagesMenu(),u>=g.length-1?u=0:u+=1,document.getElementsByClassName(g[u])[0])&&(h(document.getElementsByClassName(g[u])[0])?this.buttonsNextFocus():p(document.getElementsByClassName(g[u])[0]))},o.prototype.buttonsPreviousFocus=function(){c<=0&&(0===c&&u<=0&&(u=0),this.isControlBarOpen()?re():this.toggleControlBar(),this.isLanguageMenuOpen()&&this.toggleLanguagesMenu(),u<=0?u=g.length-1:--u,document.getElementsByClassName(g[u])[0])&&(h(document.getElementsByClassName(g[u])[0])?this.buttonsPreviousFocus():p(document.getElementsByClassName(g[u])[0]))},o.prototype.buttonsClickFocus=function(){if(this.isControlBarOpen()){if(re(),document.getElementsByClassName(m[c])[0]&&0<=c&&-1===u&&c<=m.length-1)if(document.getElementsByClassName(m[c])[0].click(),"nexplayer_container_seekbar"===m[c]){for(var e=document.getElementsByClassName(m[c])[0],t=0;t<e.childNodes.length;t++)if("nexplayer_flex_seekbar"===e.childNodes[t].className){e.childNodes[t].click();break}}else d||document.getElementsByClassName(m[c])[0].click();document.getElementsByClassName(g[u])[0]&&0<=u&&u<=g.length-1&&document.getElementsByClassName(g[u])[0].click()}else this.toggleControlBar(),document.getElementsByClassName(g[0])[0]&&-1===c&&(c=0,p(document.getElementsByClassName(g[0])[0]))},o.prototype.focusOnPlaybackBar=function(){document.getElementsByClassName(P)[0]&&(this.isControlBarOpen()?re():this.toggleControlBar(),c=1,p(document.getElementsByClassName(P)[0]),d=!0)},o.prototype.isPlayBackBarFocused=function(){return d},o.prototype.focusOnButtonsBar=function(){this.isControlBarOpen()?re():this.toggleControlBar(),d=!1,u=c=0,document.getElementsByClassName(g[u])[0]&&p(document.getElementsByClassName(g[u])[0])},o.prototype.getBandwidthEstimate=function(){if(this.nexplayer_)return this.nexplayer_.getBandwidthEstimate()},o.prototype.getTracks=function(){return this.nexplayer_.getTracks()},o.prototype.getCurrentTrack=function(){if(void 0!==this.nexplayer_&&null!==this._nexplayer)return this.nexplayer_.getCurrentTrack()},o.prototype.enableABR=function(){this.nexplayer_.enableABR()},o.prototype.getAudioStreams=function(){return this.nexplayer_.getAudioStreams()},o.prototype.setBufferLength=function(e){this.nexplayer_.setBufferLength(e)},o.prototype.getCurrentAudioStream=function(){return this.nexplayer_.getCurrentAudioStream()},o.prototype.setAudioStream=function(e){this.nexplayer_.setAudioStream(e)},o.prototype.setCurrentTrack=function(e){return this.nexplayer_.setCurrentTrack(e)},o.prototype.isLive=function(){return void 0!==this.nexplayer_&&this.nexplayer_.isLive()},o.prototype.create360View=function(e,t){return this.player360=new x.p360(this.videoElement_,null,e,t),this.player360},o.prototype.isIOSMobile=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},o.prototype.isBrowserSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},o.prototype.on=function(e,t){if(void 0!==this.nexplayer_&&null!==this.nexplayer_){if(!(100<=e))return this.nexplayer_.on(e,t);var a,r,n;switch(e){case J.NexEvent.Play:a="play";break;case J.NexEvent.Pause:a="pause";break;case J.NexEvent.FF:a="ff";break;case J.NexEvent.Rewind:a="rewind";break;case J.NexEvent.BottomButton:a="bottomButton";break;case J.NexEvent.RightButton:a="rightButton";break;case J.NexEvent.LeftButton:a="leftButton";break;case J.NexEvent.UpButton:a="upButton";break;case J.NexEvent.DownArrow:a="downArrow";break;case J.NexEvent.RightArrow:a="rightArrow";break;case J.NexEvent.UpArrow:a="upArrow";break;case J.NexEvent.LeftArrow:a="leftArrow";break;case J.NexEvent.LeftTrigger:a="leftTrigger";break;case J.NexEvent.RightTrigger:a="rightTrigger";break;case J.NexEvent.LeftBumper:a="leftBumper";break;case J.NexEvent.RightBumper:a="rightBumper";break;case J.NexEvent.Options:a="options"}void 0!==a&&(void 0!==(n=i.default.isTizen()?(tizen.tvinputdevice.registerKey(i.default.getKeyCode("Tizen",a)),r="Tizen",tizen.tvinputdevice.getKey(i.default.getKeyCode("Tizen",a)).code):i.default.isXbox()?(r="Xbox","rightTrigger"===a||"leftTrigger"===a?"trigger":Windows.Gaming.Input.GamepadButtons[i.default.getKeyCode("Xbox",a)]):(r=i.default.isWebOS()?"WebOS":i.default.isPlayStation5()?"PS5":"Browser",i.default.getKeyCode(r,a)))?"Xbox"===r?(this.logger.log("Assigned keyCode "+n+" for "+a),Windows.Gaming.Input.Gamepad.gamepads[0]||("trigger"!==n?setInterval(function(){var e=Windows.Gaming.Input.Gamepad.gamepads[0];e&&(e=e.getCurrentReading(),n==(n&e.buttons))&&t()},200):setInterval(function(){var e=Windows.Gaming.Input.Gamepad.gamepads[0];e&&.5<e.getCurrentReading()[a]&&t()},200))):document.addEventListener("keydown",function(e){e.keyCode===n&&t()}):this.logger.warn("Key '"+a+"' is not supported for this device."))}else console.warn("Player is not created yet! The event couldn't be subscribed.")},o.prototype.off=function(e,t){this.nexplayer_.off(e,t)},o.prototype.addTrackerData=function(e,t){null!==this.newRelicTracker?(this.newRelicTracker.customData[e]=t,this.logger.log("Custom data added",this.newRelicTracker)):this.logger.warn("New Relic tracker has not been defined")},o.prototype.removeTrackerData=function(e){null!==this.newRelicTracker?(delete this.newRelicTracker.customData[e],this.logger.log("Custom data removed",this.newRelicTracker)):this.logger.warn("New Relic tracker has not been defined")},o.prototype.attachSubtitleRendererDiv=function(e){if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild);void 0!==this.nexplayer_.attachSubtitleRendererDiv&&this.nexplayer_.attachSubtitleRendererDiv(e)},o.prototype.getTime=function(){if(void 0!==this.nexplayer_&&null!==this.nexplayer_)return void 0!==this.nexplayer_.getTime?this.nexplayer_.getTime():this.videoElement_.currentTime},o.prototype.getDuration=function(){if(void 0!==this.nexplayer_&&null!==this.nexplayer_)return void 0!==this.nexplayer_.getDuration?this.nexplayer_.getDuration():this.videoElement_.duration},o.prototype.getVolume=function(){if(void 0!==this.videoElement_.volume&&null!==this.videoElement_.volume)return this.videoElement_.volume},o.prototype.seek=function(e){if(Number.isFinite(e)&&null!=e&&(null==Y||!1===Y._isAdBlockStarted))if(this.isLive())0===e?this.logger.log("Value 0 won't do anything in live streams"):e+this.videoElement_.currentTime<=this.seekRange().end&&e+this.videoElement_.currentTime>=this.seekRange().start?this.videoElement_.currentTime+=e:e+this.videoElement_.currentTime<this.seekRange().start?this.videoElement_.currentTime=this.seekRange().start:e+this.videoElement_.currentTime>this.seekRange().end&&(this.videoElement_.currentTime=this.seekRange().end);else{var t=void 0;if(K){for(var a=0;a<Y._adBreaks.length;a++)Y._adBreaks[a].timeOffset<e&&Y._adBreaks[a].timeOffset>this.videoElement_.currentTime&&(t=Y._adBreaks[a].timeOffset);void 0!==t&&(Y._seekTime=e,e=Math.floor(t))}if(q)for(var r=e=0===e?.1:e,n=Z._adBlockPlayed.length,a=0,i=this;a<n;a++){if(0==Z._adBlockPlayed[a].played&&e>Z._adBlockPlayed[a].start&&e<(Z._adBlockPlayed[a+1]||Z._adBlockPlayed[a]).start){Z._currentAdBlock=a,Z._isAdSeeked=!0,(e<=Z._adBlockPlayed[a].start||e>=Z._adBlockPlayed[a].end)&&this.div.addEventListener("adblockend",function(){i.videoElement_.currentTime=r},{once:!0}),e=Z._adBlockPlayed[a].start;break}if(1==Z._adBlockPlayed[a].played&&e>Z._adBlockPlayed[a].start&&e<Z._adBlockPlayed[a].end){e=Z._adBlockPlayed[a].end+.5;break}}void 0!==this.nexplayer_.seek?this.nexplayer_.seek(e):this.videoElement_.currentTime=e,document.getElementsByClassName("nexplayer_current_time")&&null!==(o=document.getElementsByClassName("nexplayer_current_time"))[0].firstChild&&(e<0?e=0:e>this.videoElement_.duration&&(e=this.videoElement_.duration),o[0].firstChild.nodeValue=(o=e,s=Math.floor(o/3600),l=Math.floor(o/60%60),o=Math.floor(o%60),isNaN(s)||isNaN(l)||isNaN(o)?"-:-":(o=l+":"+(o=o<10?"0"+o:o),1<=s?s+":"+(o=l<10?"0"+o:o):o)))}var o,s,l},o.prototype.getProtocol=function(){return this.protocolType},o.prototype.getDroppedFrames=function(){return null!==this.nexplayer_&&this.nexplayer_?this.nexplayer_.getDroppedFrames():NaN},o.prototype.destroyThumbnailController=function(){this.thumb_controller&&(this.thumb_controller.destroy(),this.thumb_controller=null)},o.prototype.getThumbnailController=function(){return this.thumb_controller},o.prototype.getCurrentSegmentContainer=function(){var e;if(this.nexplayer_&&this.nexplayer_.shaka_)return e={audio:null,video:null},this.nexplayer_.shaka_.streamingEngine_.currentVariant_.video&&(e.video=this.nexplayer_.shaka_.streamingEngine_.currentVariant_.video.mimeType),this.nexplayer_.shaka_.streamingEngine_.currentVariant_.audio&&(e.audio=this.nexplayer_.shaka_.streamingEngine_.currentVariant_.audio.mimeType),e},o.prototype.setThumbnailResources=function(e){this.thumbVTTURL=e.src,this.thumbImageURL=e.img,this.thumbError=e.callback},o.prototype.seekLive=function(){this.isLive()&&(this.videoElement_.currentTime=Object.values(this.seekRange())[1])},o.prototype.setThumbnailCallback=function(e){this.thumbDisplay=e},o.prototype.setThumbnailStep=function(e){void 0===this.thumbStep||null===this.thumbStep?this.thumbStep=e:this.ThumbController.step=e},o.prototype.enablePreviewThumbnails=function(e){this.enableThumbs=e},o.prototype.setSpeed=function(e){this.nexplayer_.videoElement_.playbackRate=e},o.prototype.getQualityLevels=function(){return this.nexplayer_.getQualityLevels()},o.prototype.seekRange=function(){return this.nexplayer_.seekRange()},o.prototype.setTrack=function(e){this.nexplayer_.setTrack(e)},o.prototype.load=function(e,t,a){this.nexplayer_.load(e,t,a)},o.prototype.reload=function(){this.nexplayer_.reload()};G.NexFactory=new T.NexPlayerFactory(J);var f=!1,m=["nexplayer_play_pause","nexplayer_container_seekbar","nexplayer_logo_replay","nexplayer_return_container"],g=["nexplayer_play_pause","nexplayer_volume","nexplayer_language","nexplayer_full_screen"],P="nexplayer_container_seekbar",y=e(529),W=[],ce=function(e,t){"string"==typeof e&&"function"==typeof t&&("adblockstart"===e||"adblockend"===e||"adstarted"===e||"adpodsinfo"===e||"aderror"===e?n?n.addEventListener(e,t):W.push([e,t]):_()?_().container.addEventListener(e,t):z.push([e,t]))},v=function(e,t){"string"==typeof e&&"function"==typeof t&&("adblockstart"===e||"adblockend"===e||"adstarted"===e||"adpodsinfo"===e?n&&n.removeEventListener(e,t):_()&&_().container&&_().container.removeEventListener(e,t))},_=y.AdInstance,ne=y.GetRmpvast,T=y.ChangeSource;G.Setup=function(e){if(n=e.div,_()&&_().container)for(var t=0;t<z.length;t++)_().container.addEventListener(z[t][0],z[t][1]);else e.div.addEventListener("adInstanceReady",function(){if(_()&&_().container)for(var e=0;e<z.length;e++)_().container.addEventListener(z[e][0],z[e][1])});for(t=0;t<W.length;t++)e.div.addEventListener(W[t][0],W[t][1]);y.Setup(e);var a=new CustomEvent("mounted");e.div.dispatchEvent(a),f=!1},G.UnMount=function(e){null!=r&&(r=null),f=y.UnMount(e),s=null,a=void 0,d=!(u=-1),ae=0,W.forEach(function(e){v(e[0],e[1])});var t=new CustomEvent("unmounted");e.dispatchEvent(t)},G.AdsEvents=ce,G.AdInstance=ne,G.ChangeSource=T,G.IsReady=function(){return f},G.RemoveAdsEvents=v,G.decodeData=function(e){return e instanceof ArrayBuffer?(e=(new(window.TextDecoder?TextDecoder:b.textDecoder)).decode(e),-1!==(e=-1!==e.indexOf("")?e.split("").join("").trim():e).indexOf("\0")?e.split("\0").join("").trim():e):null},G.getVersion=function(){return o.MAJOR.toString()+"."+o.MINOR.toString()+"."+o.SUB_VERSION.toString()+("0"!==o.HOTFIX.toString()?"."+o.HOTFIX.toString():"")+"_"+o.RELEASE_DATE}},function(h,e,t){"use strict";!function(t){var e,a,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function n(a,r){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(r):(a._handled=!0,i._immediateFn(function(){var e,t=1===a._state?r.onFulfilled:r.onRejected;if(null===t)(1===a._state?o:s)(r.promise,a._value);else{try{e=t(a._value)}catch(e){return void s(r.promise,e)}o(r.promise,e)}}))}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":l(e))||"function"==typeof e)){var a=e.then;if(e instanceof i)return t._state=3,t._value=e,void u(t);if("function"==typeof a)return void d((r=a,n=e,function(){r.apply(n,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){s(t,e)}var r,n}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,a=e._deferreds.length;t<a;t++)n(e,e._deferreds[t]);e._deferreds=null}function c(e,t,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=a}function d(e,t){var a=!1;try{e(function(e){a||(a=!0,o(t,e))},function(e){a||(a=!0,s(t,e))})}catch(e){a||(a=!0,s(t,e))}}e=void 0,a=setTimeout,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var a=new this.constructor(r);return n(this,new c(e,t,a)),a},i.all=function(t){return new i(function(n,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return n([]);var s=o.length;for(var e=0;e<o.length;e++)!function t(a,e){try{if(e&&("object"===(void 0===e?"undefined":l(e))||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(a,e)},i)}o[a]=e,0==--s&&n(o)}catch(e){i(e)}}(e,o[e])})},i.resolve=function(t){return t&&"object"===(void 0===t?"undefined":l(t))&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(a){return new i(function(e,t){t(a)})},i.race=function(n){return new i(function(e,t){for(var a=0,r=n.length;a<r;a++)n[a].then(e,t)})},i._immediateFn="function"==typeof t?function(e){t(e)}:function(e){a(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},h.exports?h.exports=i:e.Promise||(e.Promise=i)}.call(this,t(455).setImmediate)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f={}.toString,m=f.call(window.SharedArrayBuffer),g=f(),y=f.call(ArrayBuffer.prototype),v=String.fromCharCode;t.textDecoder=(r(i,[{key:"decode",value:function(e){var t=e;if(!ArrayBuffer.isView(t)){if((e=f.call(t))!==y&&e!==m&&e!==g)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");t=new Uint8Array(t)}for(var a="",r="",n=0,i=0|t.length,o=i-32|0,s=0,l=0,u=0,c=0,d=0,h=0,p=-1;n<i;){for(s=n<=o?32:i-n|0;h<s;n=n+1|0,h=h+1|0){switch((l=255&t[n])>>4){case 15:if((d=255&t[n=n+1|0])>>6!=2||247<l){n=n-1|0;break}u=(7&l)<<6|63&d,c=5,l=256;case 14:u=u<<6|((15&l)<<6|63&(d=255&t[n=n+1|0])),c=d>>6==2?c+4|0:24,l=l+256&768;case 13:case 12:u=u<<6|((31&l)<<6|63&(d=255&t[n=n+1|0])),c=c+7|0,n<i&&d>>6==2&&u>>c&&u<1114112?0<=(u=(l=u)-65536|0)?(p=55296+(u>>10)|0,l=56320+(1023&u)|0,h<31?(this._tmpBufferU16[h]=p,h=h+1|0,p=-1):(d=p,p=l,l=d)):s=s+1|0:(n=n-(l>>=8)-1|0,l=65533),u=c=0,s=n<=o?32:i-n|0;default:this._tmpBufferU16[h]=l;continue;case 11:case 10:case 9:case 8:}this._tmpBufferU16[h]=65533}if(r+=v(this._tmpBufferU16[0],this._tmpBufferU16[1],this._tmpBufferU16[2],this._tmpBufferU16[3],this._tmpBufferU16[4],this._tmpBufferU16[5],this._tmpBufferU16[6],this._tmpBufferU16[7],this._tmpBufferU16[8],this._tmpBufferU16[9],this._tmpBufferU16[10],this._tmpBufferU16[11],this._tmpBufferU16[12],this._tmpBufferU16[13],this._tmpBufferU16[14],this._tmpBufferU16[15],this._tmpBufferU16[16],this._tmpBufferU16[17],this._tmpBufferU16[18],this._tmpBufferU16[19],this._tmpBufferU16[20],this._tmpBufferU16[21],this._tmpBufferU16[22],this._tmpBufferU16[23],this._tmpBufferU16[24],this._tmpBufferU16[25],this._tmpBufferU16[26],this._tmpBufferU16[27],this._tmpBufferU16[28],this._tmpBufferU16[29],this._tmpBufferU16[30],this._tmpBufferU16[31]),h<32&&(r=r.slice(0,h-32|0)),n<i){if(h=~(this._tmpBufferU16[0]=p)>>>31,p=-1,r.length<a.length)continue}else-1!==p&&(r+=v(p));a+=r,r=""}return a}}]),i);function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._tmpBufferU16=new Uint16Array(32)}},function(e,t,a){"use strict";e.exports=function(e){return null!=e}},function(e,t,a){"use strict";var r=a(487);e.exports=function(e){if(r(e))return e;throw new TypeError(e+" is not a symbol")}},function(e,t,a){"use strict";e.exports={Adts:a(92),h264:a(137)}},function(e,t,a){"use strict";function l(e,t){var a=r();return a.dataOffset=t,a.compositionTimeOffset=e.pts-e.dts,a.duration=e.duration,a.size=4*e.length,a.size+=e.byteLength,e.keyFrame&&(a.flags.dependsOn=2,a.flags.isNonSyncSample=0),a}var r=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};e.exports={groupNalsIntoFrames:function(e){var t,a,r=[],n=[];for(n.byteLength=0,n.nalCount=0,t=r.byteLength=n.duration=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(a=e[t]).nalUnitType?(r.length&&(r.duration=a.dts-r.dts,n.byteLength+=r.byteLength,n.nalCount+=r.length,n.duration+=r.duration,n.push(r)),(r=[a]).byteLength=a.data.byteLength,r.pts=a.pts,r.dts=a.dts):("slice_layer_without_partitioning_rbsp_idr"===a.nalUnitType&&(r.keyFrame=!0),r.duration=a.dts-r.dts,r.byteLength+=a.data.byteLength,r.push(a));return n.length&&(!r.duration||r.duration<=0)&&(r.duration=n[n.length-1].duration),n.byteLength+=r.byteLength,n.nalCount+=r.length,n.duration+=r.duration,n.push(r),n},groupFramesIntoGops:function(e){var t,a,r=[],n=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,t=0;t<e.length;t++)(a=e[t]).keyFrame?(r.length&&(n.push(r),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration),(r=[a]).nalCount=a.length,r.byteLength=a.byteLength,r.pts=a.pts,r.dts=a.dts,r.duration=a.duration):(r.duration+=a.duration,r.nalCount+=a.length,r.byteLength+=a.byteLength,r.push(a));return n.length&&r.duration<=0&&(r.duration=n[n.length-1].duration),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration,n.push(r),n},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){for(var a,r,n,i=t||0,o=[],s=0;s<e.length;s++)for(r=e[s],a=0;a<r.length;a++)n=r[a],i+=(n=l(n,i)).size,o.push(n);return o},concatenateNalData:function(e){for(var t,a,r,n,i,o=0,s=e.byteLength,l=e.nalCount,u=new Uint8Array(s+4*l),c=new DataView(u.buffer),d=0;d<e.length;d++)for(r=e[d],t=0;t<r.length;t++)for(n=r[t],a=0;a<n.length;a++)i=n[a],c.setUint32(o,i.data.byteLength),u.set(i.data,o+=4),o+=i.data.byteLength;return u},generateSampleTableForFrame:function(e,t){var a=[],e=l(e,t||0);return a.push(e),a},concatenateNalDataForFrame:function(e){for(var t,a=0,r=e.byteLength,n=e.length,i=new Uint8Array(r+4*n),o=new DataView(i.buffer),s=0;s<e.length;s++)t=e[s],o.setUint32(a,t.data.byteLength),i.set(t.data,a+=4),a+=t.data.byteLength;return i}}},function(e,t,a){"use strict";var d=a(497),h=a(45);e.exports={prefixWithSilence:function(e,t,a,r){var n,i,o,s,l,u=0,c=0;if(t.length&&(i=h.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(h.ONE_SECOND_IN_TS/(e.samplerate/1024)),a&&r&&(i=i-Math.max(a,r),c=(u=Math.floor(i/n))*n),!(u<1||c>h.ONE_SECOND_IN_TS/2))){for(o=(o=d()[e.samplerate])||t[0].data,s=0;s<u;s++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-n,pts:l.pts-n});e.baseMediaDecodeTime-=Math.floor(h.videoTsToAudioTs(c,e.samplerate))}},trimAdtsFramesByEarliestDts:function(e,t,a){return t.minSegmentDts>=a?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=a&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){for(var t,a=[],r=0;r<e.length;r++)t=e[r],a.push({size:t.data.byteLength,duration:1024});return a},concatenateFrameData:function(e){for(var t,a=0,r=new Uint8Array(function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a].data.byteLength;return t}(e)),n=0;n<e.length;n++)t=e[n],r.set(t.data,a),a+=t.data.byteLength;return r}}},function(e,t,a){"use strict";function r(){r.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new d(0,0),new d(0,1),new d(1,0),new d(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}function o(e){return null===e?"":(e=l[e]||e,String.fromCharCode(e))}function s(){for(var e=[],t=u+1;t--;)e.push("");return e}var n=a(22),i=a(198),l=((r.prototype=new n).push=function(e){var t;"sei_rbsp"===e.nalUnitType&&(t=i.parseSei(e.escapedRBSP)).payloadType===i.USER_DATA_REGISTERED_ITU_T_T35&&(t=i.parseUserData(t))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(t=i.parseCaptionPackets(e.pts,t),this.captionPackets_=this.captionPackets_.concat(t),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts))},r.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},r.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},r.prototype.flush=function(){return this.flushStream("flush")},r.prototype.partialFlush=function(){return this.flushStream("partialFlush")},r.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},r.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},r.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},r.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},r.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496}),u=14,c=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],d=function e(t,a){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=a||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,a,r,n,i=32639&e.ccData;i===this.lastControlCode_?this.lastControlCode_=null:(4096==(61440&i)?this.lastControlCode_=i:i!==this.PADDING_&&(this.lastControlCode_=null),t=i>>>8,a=255&i,i!==this.PADDING_&&(i===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":i===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts):i===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):i===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):i===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):i===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):i===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):i===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=s()):i===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=s():i===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=s()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,a)?(r=o((t=(3&t)<<8)|a),this[this.mode_](e.pts,r),this.column_++):this.isExtCharacter(t,a)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=o((t=(3&t)<<8)|a),this[this.mode_](e.pts,r),this.column_++):this.isMidRowCode(t,a)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&a)&&this.addFormatting(e.pts,["i"]),1==(1&a)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,a)?this.column_+=3&a:this.isPAC(t,a)?(n=c.indexOf(7968&i),"rollUp"===this.mode_&&(n-this.rollUpRows_+1<0&&(n=this.rollUpRows_-1),this.setRollUp(e.pts,n)),n!==this.row_&&(this.clearFormatting(e.pts),this.row_=n),1&a&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&i)&&(this.column_=4*((14&i)>>1)),this.isColorPAC(a)&&14==(14&a)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===a&&(a=null),r=o(t),r+=o(a),this[this.mode_](e.pts,r),this.column_+=r.length)))}};d.prototype=new n,d.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},d.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=s(),this.nonDisplayed_=s(),this.lastControlCode_=null,this.column_=0,this.row_=u,this.rollUpRows_=2,this.formatting_=[]},d.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},d.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},d.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},d.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},d.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},d.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},d.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},d.prototype.isNormalChar=function(e){return 32<=e&&e<=127},d.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=u,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=s(),this.displayed_=s()),void 0!==t&&t!==this.row_)for(var a=0;a<this.rollUpRows_;a++)this.displayed_[t-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},d.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);t=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,t)},d.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},d.prototype.popOn=function(e,t){var a=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=a+=t},d.prototype.rollUp=function(e,t){var a=this.displayed_[this.row_];this.displayed_[this.row_]=a+=t},d.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<u+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},d.prototype.paintOn=function(e,t){var a=this.displayed_[this.row_];this.displayed_[this.row_]=a+=t},e.exports={CaptionStream:r,Cea608Stream:d}},function(e,t,a){"use strict";e.exports={parseSei:function(e){for(var t=0,a={payloadType:-1,payloadSize:0},r=0,n=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)n+=255,t++;if(n+=e[t++],!a.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){a.payloadType=r,a.payloadSize=n,a.payload=e.subarray(t,t+n);break}a.payload=void 0}t+=n,n=r=0}return a},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var a,r,n,i,o=[];if(64&t[0])for(r=31&t[0],a=0;a<r;a++)i={type:3&t[2+(n=3*a)],pts:e},4&t[2+n]&&(i.ccData=t[3+n]<<8|t[4+n],o.push(i));return o},discardEmulationPreventionBytes:function(e){for(var t=e.byteLength,a=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(a.push(r+2),r+=2):r++;if(0===a.length)return e;for(var n=t-a.length,i=new Uint8Array(n),o=0,r=0;r<n;o++,r++)o===a[0]&&(o++,a.shift()),i[r]=e[o];return i},USER_DATA_REGISTERED_ITU_T_T35:4}},function(e,t,a){"use strict";function r(e,t){var a=1;for(t<e&&(a=-1);Math.abs(t-e)>o;)e+=a*i;return e}function n(e){var t,a;n.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===a&&(a=e.dts),e.dts=r(e.dts,a),e.pts=r(e.pts,a),t=e.dts,this.trigger("data",e))},this.flush=function(){a=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=a=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}var a=a(22),i=8589934592,o=4294967296;n.prototype=new a,e.exports={TimestampRolloverStream:n,handleRollover:r}},function(e,t,a){"use strict";var r=a(22),s=a(98),n=function(){var i=new Uint8Array,o=0;n.prototype.init.call(this),this.setTimestamp=function(e){o=e},this.push=function(e){var t,a,r=0,n=0;for(i.length?(a=i.length,(i=new Uint8Array(e.byteLength+a)).set(i.subarray(0,a)),i.set(e,a)):i=e;3<=i.length-n;)if(i[n]==="I".charCodeAt(0)&&i[n+1]==="D".charCodeAt(0)&&i[n+2]==="3".charCodeAt(0)){if(i.length-n<10)break;if(n+(r=s.parseId3TagSize(i,n))>i.length)break;t={type:"timed-metadata",data:i.subarray(n,n+r)},this.trigger("data",t),n+=r}else if(255==(255&i[n])&&240==(240&i[n+1])){if(i.length-n<7)break;if(n+(r=s.parseAdtsSize(i,n))>i.length)break;t={type:"audio",data:i.subarray(n,n+r),pts:o,dts:o},this.trigger("data",t),n+=r}else n++;a=i.length-n,i=0<a?i.subarray(n):new Uint8Array},this.reset=function(){i=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){i=new Uint8Array,this.trigger("endedtimeline")}};n.prototype=new r,e.exports=n},function(e,t,a){"use strict";e.exports=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"]},function(e,t,a){"use strict";e.exports=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,a,r,n){this.thumbnail=e,this.width=t,this.height=a,this.startTime=r,this.finishTime=n}r.prototype.getframe=function(){return this.thumbnail},r.prototype.getwidth=function(){return this.weidth},r.prototype.getheight=function(){return this.height},r.prototype.getstartTime=function(){return this.startTime},r.prototype.getfinishTime=function(){return this.finishTime},r.prototype.setframe=function(e){e!==this.thumbnail&&(this.thumbnail=e)},r.prototype.setwidth=function(e){e!==this.width&&(this.width=e)},r.prototype.setheight=function(e){e!==this.height&&(this.height=e)},r.prototype.setstartTime=function(e){e!==this.startTime&&(this.startTtime=e)},r.prototype.setfinishTime=function(e){e!==this.finishTime&&(this.finishTime=e)},t.Frame=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new v.ARRAY_TYPE(9);v.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0);return e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new v.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,a,r,n,i,o,s,l){var u=new v.ARRAY_TYPE(9);return u[0]=e,u[1]=t,u[2]=a,u[3]=r,u[4]=n,u[5]=i,u[6]=o,u[7]=s,u[8]=l,u},t.set=function(e,t,a,r,n,i,o,s,l,u){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){{var a,r,n;e===t?(a=t[1],r=t[2],n=t[5],e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=r,e[7]=n):(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8])}return e},t.invert=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],t=t[8],c=t*o-s*u,d=-t*i+s*l,h=u*i-o*l,p=a*c+r*d+n*h;return p?(p=1/p,e[0]=c*p,e[1]=(-t*r+n*u)*p,e[2]=(s*r-n*o)*p,e[3]=d*p,e[4]=(t*a-n*l)*p,e[5]=(-s*a+n*i)*p,e[6]=h*p,e[7]=(-u*a+r*l)*p,e[8]=(o*a-r*i)*p,e):null},t.adjoint=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],t=t[8];return e[0]=o*t-s*u,e[1]=n*u-r*t,e[2]=r*s-n*o,e[3]=s*l-i*t,e[4]=a*t-n*l,e[5]=n*i-a*s,e[6]=i*u-o*l,e[7]=r*l-a*u,e[8]=a*o-r*i,e},t.determinant=function(e){var t=e[0],a=e[1],r=e[2],n=e[3],i=e[4],o=e[5],s=e[6],l=e[7],e=e[8];return t*(e*i-o*l)+a*(-e*n+o*s)+r*(l*n-i*s)},t.multiply=r,t.translate=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],t=t[8],d=a[0],a=a[1];return e[0]=r,e[1]=n,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=d*r+a*o+u,e[7]=d*n+a*s+c,e[8]=d*i+a*l+t,e},t.rotate=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],t=t[8],d=Math.sin(a),a=Math.cos(a);return e[0]=a*r+d*o,e[1]=a*n+d*s,e[2]=a*i+d*l,e[3]=a*o-d*r,e[4]=a*s-d*n,e[5]=a*l-d*i,e[6]=u,e[7]=c,e[8]=t,e},t.scale=function(e,t,a){var r=a[0],a=a[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=0,e[3]=-a,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var a=t[0],r=t[1],n=t[2],t=t[3],i=a+a,o=r+r,s=n+n,a=a*i,l=r*i,r=r*o,u=n*i,c=n*o,n=n*s,i=t*i,o=t*o,t=t*s;return e[0]=1-r-n,e[3]=l-t,e[6]=u+o,e[1]=l+t,e[4]=1-a-n,e[7]=c-i,e[2]=u-o,e[5]=c+i,e[8]=1-a-r,e},t.normalFromMat4=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],t=t[15],y=a*s-r*o,v=a*l-n*o,_=a*u-i*o,k=r*l-n*s,b=r*u-i*s,S=n*u-i*l,E=c*m-d*f,T=c*g-h*f,c=c*t-p*f,x=d*g-h*m,d=d*t-p*m,h=h*t-p*g,p=y*h-v*d+_*x+k*c-b*T+S*E;return p?(p=1/p,e[0]=(s*h-l*d+u*x)*p,e[1]=(l*c-o*h-u*T)*p,e[2]=(o*d-s*c+u*E)*p,e[3]=(n*d-r*h-i*x)*p,e[4]=(a*h-n*c+i*T)*p,e[5]=(r*c-a*d-i*E)*p,e[6]=(m*S-g*b+t*k)*p,e[7]=(g*_-f*S-t*v)*p,e[8]=(f*b-m*_+t*y)*p,e):null},t.projection=function(e,t,a){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/a,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e},t.subtract=n,t.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e},t.multiplyScalarAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e[4]=t[4]+a[4]*r,e[5]=t[5]+a[5]*r,e[6]=t[6]+a[6]*r,e[7]=t[7]+a[7]*r,e[8]=t[8]+a[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],l=e[6],u=e[7],e=e[8],c=t[0],d=t[1],h=t[2],p=t[3],f=t[4],m=t[5],g=t[6],y=t[7],t=t[8];return Math.abs(a-c)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(r-d)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=v.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-f)<=v.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-m)<=v.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=v.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-y)<=v.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(e-t)<=v.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],t=t[8],d=a[0],h=a[1],p=a[2],f=a[3],m=a[4],g=a[5],y=a[6],v=a[7],a=a[8];return e[0]=d*r+h*o+p*u,e[1]=d*n+h*s+p*c,e[2]=d*i+h*l+p*t,e[3]=f*r+m*o+g*u,e[4]=f*n+m*s+g*c,e[5]=f*i+m*l+g*t,e[6]=y*r+v*o+a*u,e[7]=y*n+v*s+a*c,e[8]=y*i+v*l+a*t,e}function n(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e}t.mul=r,t.sub=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new R.ARRAY_TYPE(16);R.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new R.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m){var g=new R.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=a,g[3]=r,g[4]=n,g[5]=i,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=d,g[12]=h,g[13]=p,g[14]=f,g[15]=m,g},t.set=function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=h,e[12]=p,e[13]=f,e[14]=m,e[15]=g,e},t.identity=k,t.transpose=function(e,t){{var a,r,n,i,o,s;e===t?(a=t[1],r=t[2],n=t[3],i=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e},t.invert=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],t=t[15],y=a*s-r*o,v=a*l-n*o,_=a*u-i*o,k=r*l-n*s,b=r*u-i*s,S=n*u-i*l,E=c*m-d*f,T=c*g-h*f,x=c*t-p*f,A=d*g-h*m,P=d*t-p*m,C=h*t-p*g,w=y*C-v*P+_*A+k*x-b*T+S*E;return w?(w=1/w,e[0]=(s*C-l*P+u*A)*w,e[1]=(n*P-r*C-i*A)*w,e[2]=(m*S-g*b+t*k)*w,e[3]=(h*b-d*S-p*k)*w,e[4]=(l*x-o*C-u*T)*w,e[5]=(a*C-n*x+i*T)*w,e[6]=(g*_-f*S-t*v)*w,e[7]=(c*S-h*_+p*v)*w,e[8]=(o*P-s*x+u*E)*w,e[9]=(r*x-a*P-i*E)*w,e[10]=(f*b-m*_+t*y)*w,e[11]=(d*_-c*b-p*y)*w,e[12]=(s*T-o*A-l*E)*w,e[13]=(a*A-r*T+n*E)*w,e[14]=(m*v-f*k-g*y)*w,e[15]=(c*k-d*v+h*y)*w,e):null},t.adjoint=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(h*t-p*g)-d*(l*t-u*g)+m*(l*p-u*h),e[1]=-(r*(h*t-p*g)-d*(n*t-i*g)+m*(n*p-i*h)),e[2]=r*(l*t-u*g)-s*(n*t-i*g)+m*(n*u-i*l),e[3]=-(r*(l*p-u*h)-s*(n*p-i*h)+d*(n*u-i*l)),e[4]=-(o*(h*t-p*g)-c*(l*t-u*g)+f*(l*p-u*h)),e[5]=a*(h*t-p*g)-c*(n*t-i*g)+f*(n*p-i*h),e[6]=-(a*(l*t-u*g)-o*(n*t-i*g)+f*(n*u-i*l)),e[7]=a*(l*p-u*h)-o*(n*p-i*h)+c*(n*u-i*l),e[8]=o*(d*t-p*m)-c*(s*t-u*m)+f*(s*p-u*d),e[9]=-(a*(d*t-p*m)-c*(r*t-i*m)+f*(r*p-i*d)),e[10]=a*(s*t-u*m)-o*(r*t-i*m)+f*(r*u-i*s),e[11]=-(a*(s*p-u*d)-o*(r*p-i*d)+c*(r*u-i*s)),e[12]=-(o*(d*g-h*m)-c*(s*g-l*m)+f*(s*h-l*d)),e[13]=a*(d*g-h*m)-c*(r*g-n*m)+f*(r*h-n*d),e[14]=-(a*(s*g-l*m)-o*(r*g-n*m)+f*(r*l-n*s)),e[15]=a*(s*h-l*d)-o*(r*h-n*d)+c*(r*l-n*s),e},t.determinant=function(e){var t=e[0],a=e[1],r=e[2],n=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],e=e[15];return(t*o-a*i)*(d*e-h*m)-(t*s-r*i)*(c*e-h*f)+(t*l-n*i)*(c*m-d*f)+(a*s-r*o)*(u*e-h*p)-(a*l-n*o)*(u*m-d*p)+(r*l-n*s)*(u*f-c*p)},t.multiply=r,t.translate=function(e,t,a){var r=a[0],n=a[1],a=a[2],i=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0,g=void 0;t===e?(e[12]=t[0]*r+t[4]*n+t[8]*a+t[12],e[13]=t[1]*r+t[5]*n+t[9]*a+t[13],e[14]=t[2]*r+t[6]*n+t[10]*a+t[14],e[15]=t[3]*r+t[7]*n+t[11]*a+t[15]):(i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],h=t[7],p=t[8],f=t[9],m=t[10],g=t[11],e[0]=i,e[1]=o,e[2]=s,e[3]=l,e[4]=u,e[5]=c,e[6]=d,e[7]=h,e[8]=p,e[9]=f,e[10]=m,e[11]=g,e[12]=i*r+u*n+p*a+t[12],e[13]=o*r+c*n+f*a+t[13],e[14]=s*r+d*n+m*a+t[14],e[15]=l*r+h*n+g*a+t[15]);return e},t.scale=function(e,t,a){var r=a[0],n=a[1],a=a[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,a,r){var n=r[0],i=r[1],r=r[2],o=Math.sqrt(n*n+i*i+r*r),s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0,g=void 0,y=void 0,v=void 0,_=void 0,k=void 0,b=void 0,S=void 0,E=void 0,T=void 0,x=void 0,A=void 0,P=void 0,C=void 0,w=void 0,M=void 0;if(o<R.EPSILON)return null;n*=o=1/o,i*=o,r*=o,s=Math.sin(a),l=Math.cos(a),u=1-l,c=t[0],d=t[1],h=t[2],p=t[3],f=t[4],m=t[5],g=t[6],y=t[7],v=t[8],_=t[9],k=t[10],b=t[11],S=n*n*u+l,E=i*n*u+r*s,T=r*n*u-i*s,x=n*i*u-r*s,A=i*i*u+l,P=r*i*u+n*s,C=n*r*u+i*s,w=i*r*u-n*s,M=r*r*u+l,e[0]=c*S+f*E+v*T,e[1]=d*S+m*E+_*T,e[2]=h*S+g*E+k*T,e[3]=p*S+y*E+b*T,e[4]=c*x+f*A+v*P,e[5]=d*x+m*A+_*P,e[6]=h*x+g*A+k*P,e[7]=p*x+y*A+b*P,e[8]=c*C+f*w+v*M,e[9]=d*C+m*w+_*M,e[10]=h*C+g*w+k*M,e[11]=p*C+y*w+b*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},t.rotateX=function(e,t,a){var r=Math.sin(a),a=Math.cos(a),n=t[4],i=t[5],o=t[6],s=t[7],l=t[8],u=t[9],c=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=n*a+l*r,e[5]=i*a+u*r,e[6]=o*a+c*r,e[7]=s*a+d*r,e[8]=l*a-n*r,e[9]=u*a-i*r,e[10]=c*a-o*r,e[11]=d*a-s*r,e},t.rotateY=function(e,t,a){var r=Math.sin(a),a=Math.cos(a),n=t[0],i=t[1],o=t[2],s=t[3],l=t[8],u=t[9],c=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=n*a-l*r,e[1]=i*a-u*r,e[2]=o*a-c*r,e[3]=s*a-d*r,e[8]=n*r+l*a,e[9]=i*r+u*a,e[10]=o*r+c*a,e[11]=s*r+d*a,e},t.rotateZ=function(e,t,a){var r=Math.sin(a),a=Math.cos(a),n=t[0],i=t[1],o=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=n*a+l*r,e[1]=i*a+u*r,e[2]=o*a+c*r,e[3]=s*a+d*r,e[4]=l*a-n*r,e[5]=u*a-i*r,e[6]=c*a-o*r,e[7]=d*a-s*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,a){var r=a[0],n=a[1],a=a[2],i=Math.sqrt(r*r+n*n+a*a),o=void 0,s=void 0,l=void 0;if(i<R.EPSILON)return null;return r*=i=1/i,n*=i,a*=i,o=Math.sin(t),s=Math.cos(t),l=1-s,e[0]=r*r*l+s,e[1]=n*r*l+a*o,e[2]=a*r*l-n*o,e[3]=0,e[4]=r*n*l-a*o,e[5]=n*n*l+s,e[6]=a*n*l+r*o,e[7]=0,e[8]=r*a*l+n*o,e[9]=n*a*l-r*o,e[10]=a*a*l+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromXRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=h,t.fromQuat2=function(e,t){var a=new R.ARRAY_TYPE(3),r=-t[0],n=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=r*r+n*n+i*i+o*o;0<d?(a[0]=2*(s*o+c*r+l*i-u*n)/d,a[1]=2*(l*o+c*n+u*r-s*i)/d,a[2]=2*(u*o+c*i+s*n-l*r)/d):(a[0]=2*(s*o+c*r+l*i-u*n),a[1]=2*(l*o+c*n+u*r-s*i),a[2]=2*(u*o+c*i+s*n-l*r));return h(e,t,a),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[4],o=t[5],s=t[6],l=t[8],u=t[9],t=t[10];return e[0]=Math.sqrt(a*a+r*r+n*n),e[1]=Math.sqrt(i*i+o*o+s*s),e[2]=Math.sqrt(l*l+u*u+t*t),e},t.getRotation=function(e,t){var a=t[0]+t[5]+t[10],r=0;0<a?(r=2*Math.sqrt(a+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r);return e},t.fromRotationTranslationScale=function(e,t,a,r){var n=t[0],i=t[1],o=t[2],t=t[3],s=n+n,l=i+i,u=o+o,c=n*s,d=n*l,n=n*u,h=i*l,i=i*u,o=o*u,s=t*s,l=t*l,t=t*u,u=r[0],p=r[1],r=r[2];return e[0]=(1-(h+o))*u,e[1]=(d+t)*u,e[2]=(n-l)*u,e[3]=0,e[4]=(d-t)*p,e[5]=(1-(c+o))*p,e[6]=(i+s)*p,e[7]=0,e[8]=(n+l)*r,e[9]=(i-s)*r,e[10]=(1-(c+h))*r,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,a,r,n){var i=t[0],o=t[1],s=t[2],t=t[3],l=i+i,u=o+o,c=s+s,d=i*l,h=i*u,i=i*c,p=o*u,o=o*c,s=s*c,l=t*l,u=t*u,t=t*c,c=r[0],f=r[1],r=r[2],m=n[0],g=n[1],n=n[2],y=(1-(p+s))*c,v=(h+t)*c,c=(i-u)*c,h=(h-t)*f,t=(1-(d+s))*f,s=(o+l)*f,f=(i+u)*r,i=(o-l)*r,u=(1-(d+p))*r;return e[0]=y,e[1]=v,e[2]=c,e[3]=0,e[4]=h,e[5]=t,e[6]=s,e[7]=0,e[8]=f,e[9]=i,e[10]=u,e[11]=0,e[12]=a[0]+m-(y*m+h*g+f*n),e[13]=a[1]+g-(v*m+t*g+i*n),e[14]=a[2]+n-(c*m+s*g+u*n),e[15]=1,e},t.fromQuat=function(e,t){var a=t[0],r=t[1],n=t[2],t=t[3],i=a+a,o=r+r,s=n+n,a=a*i,l=r*i,r=r*o,u=n*i,c=n*o,n=n*s,i=t*i,o=t*o,t=t*s;return e[0]=1-r-n,e[1]=l+t,e[2]=u-o,e[3]=0,e[4]=l-t,e[5]=1-a-n,e[6]=c+i,e[7]=0,e[8]=u+o,e[9]=c-i,e[10]=1-a-r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,a,r,n,i,o){var s=1/(a-t),l=1/(n-r),u=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(a+t)*s,e[9]=(n+r)*l,e[10]=(o+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*u,e[15]=0,e},t.perspective=function(e,t,a,r,n){var t=1/Math.tan(t/2),i=void 0;e[0]=t/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(i=1/(r-n),e[10]=(n+r)*i,e[14]=2*n*r*i):(e[10]=-1,e[14]=-2*r);return e},t.perspectiveFromFieldOfView=function(e,t,a,r){var n=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),t=Math.tan(t.rightDegrees*Math.PI/180),s=2/(o+t),l=2/(n+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-t)*s*.5,e[9]=(n-i)*l*.5,e[10]=r/(a-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*a/(a-r),e[15]=0,e},t.ortho=function(e,t,a,r,n,i,o){var s=1/(t-a),l=1/(r-n),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+a)*s,e[13]=(n+r)*l,e[14]=(o+i)*u,e[15]=1,e},t.lookAt=function(e,t,a,r){var n=void 0,i=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=t[0],m=t[1],t=t[2],g=r[0],y=r[1],r=r[2],v=a[0],_=a[1],a=a[2];if(Math.abs(f-v)<R.EPSILON&&Math.abs(m-_)<R.EPSILON&&Math.abs(t-a)<R.EPSILON)return k(e);c=f-v,d=m-_,h=t-a,p=1/Math.sqrt(c*c+d*d+h*h),n=y*(h*=p)-r*(d*=p),i=r*(c*=p)-g*h,o=g*d-y*c,(p=Math.sqrt(n*n+i*i+o*o))?(n*=p=1/p,i*=p,o*=p):o=i=n=0;s=d*o-h*i,l=h*n-c*o,u=c*i-d*n,(p=Math.sqrt(s*s+l*l+u*u))?(s*=p=1/p,l*=p,u*=p):u=l=s=0;return e[0]=n,e[1]=s,e[2]=c,e[3]=0,e[4]=i,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=u,e[10]=h,e[11]=0,e[12]=-(n*f+i*m+o*t),e[13]=-(s*f+l*m+u*t),e[14]=-(c*f+d*m+h*t),e[15]=1,e},t.targetTo=function(e,t,a,r){var n=t[0],i=t[1],t=t[2],o=r[0],s=r[1],r=r[2],l=n-a[0],u=i-a[1],a=t-a[2],c=l*l+u*u+a*a;0<c&&(c=1/Math.sqrt(c),l*=c,u*=c,a*=c);var d=s*a-r*u,r=r*l-o*a,o=o*u-s*l;0<(c=d*d+r*r+o*o)&&(c=1/Math.sqrt(c),d*=c,r*=c,o*=c);return e[0]=d,e[1]=r,e[2]=o,e[3]=0,e[4]=u*o-a*r,e[5]=a*d-l*o,e[6]=l*r-u*d,e[7]=0,e[8]=l,e[9]=u,e[10]=a,e[11]=0,e[12]=n,e[13]=i,e[14]=t,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e},t.subtract=n,t.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e},t.multiplyScalarAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e[4]=t[4]+a[4]*r,e[5]=t[5]+a[5]*r,e[6]=t[6]+a[6]*r,e[7]=t[7]+a[7]*r,e[8]=t[8]+a[8]*r,e[9]=t[9]+a[9]*r,e[10]=t[10]+a[10]*r,e[11]=t[11]+a[11]*r,e[12]=t[12]+a[12]*r,e[13]=t[13]+a[13]*r,e[14]=t[14]+a[14]*r,e[15]=t[15]+a[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],g=e[14],e=e[15],y=t[0],v=t[1],_=t[2],k=t[3],b=t[4],S=t[5],E=t[6],T=t[7],x=t[8],A=t[9],P=t[10],C=t[11],w=t[12],M=t[13],I=t[14],t=t[15];return Math.abs(a-y)<=R.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(r-v)<=R.EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-_)<=R.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-k)<=R.EPSILON*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(o-b)<=R.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-S)<=R.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=R.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-T)<=R.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-x)<=R.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-A)<=R.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-P)<=R.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-C)<=R.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(f-w)<=R.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(m-M)<=R.EPSILON*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(g-I)<=R.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(e-t)<=R.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var R=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function k(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],t=t[15],v=a[0],_=a[1],k=a[2],b=a[3];return e[0]=v*r+_*s+k*d+b*m,e[1]=v*n+_*l+k*h+b*g,e[2]=v*i+_*u+k*p+b*y,e[3]=v*o+_*c+k*f+b*t,v=a[4],_=a[5],k=a[6],b=a[7],e[4]=v*r+_*s+k*d+b*m,e[5]=v*n+_*l+k*h+b*g,e[6]=v*i+_*u+k*p+b*y,e[7]=v*o+_*c+k*f+b*t,v=a[8],_=a[9],k=a[10],b=a[11],e[8]=v*r+_*s+k*d+b*m,e[9]=v*n+_*l+k*h+b*g,e[10]=v*i+_*u+k*p+b*y,e[11]=v*o+_*c+k*f+b*t,v=a[12],_=a[13],k=a[14],b=a[15],e[12]=v*r+_*s+k*d+b*m,e[13]=v*n+_*l+k*h+b*g,e[14]=v*i+_*u+k*p+b*y,e[15]=v*o+_*c+k*f+b*t,e}function h(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=r+r,s=n+n,l=i+i,u=r*o,c=r*s,r=r*l,d=n*s,n=n*l,i=i*l,o=t*o,s=t*s,t=t*l;return e[0]=1-(d+i),e[1]=c+t,e[2]=r-s,e[3]=0,e[4]=c-t,e[5]=1-(u+i),e[6]=n+o,e[7]=0,e[8]=r+s,e[9]=n-o,e[10]=1-(u+d),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function n(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e}t.mul=r,t.sub=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=o,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=s,t.getAxisAngle=function(e,t){var a=2*Math.acos(t[3]),r=Math.sin(a/2);r>f.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0);return a},t.multiply=l,t.rotateX=function(e,t,a){a*=.5;var r=t[0],n=t[1],i=t[2],t=t[3],o=Math.sin(a),a=Math.cos(a);return e[0]=r*a+t*o,e[1]=n*a+i*o,e[2]=i*a-n*o,e[3]=t*a-r*o,e},t.rotateY=function(e,t,a){a*=.5;var r=t[0],n=t[1],i=t[2],t=t[3],o=Math.sin(a),a=Math.cos(a);return e[0]=r*a-i*o,e[1]=n*a+t*o,e[2]=i*a+r*o,e[3]=t*a-n*o,e},t.rotateZ=function(e,t,a){a*=.5;var r=t[0],n=t[1],i=t[2],t=t[3],o=Math.sin(a),a=Math.cos(a);return e[0]=r*a+n*o,e[1]=n*a-r*o,e[2]=i*a+t*o,e[3]=t*a-i*o,e},t.calculateW=function(e,t){var a=t[0],r=t[1],t=t[2];return e[0]=a,e[1]=r,e[2]=t,e[3]=Math.sqrt(Math.abs(1-a*a-r*r-t*t)),e},t.slerp=u,t.random=function(e){var t=f.RANDOM(),a=f.RANDOM(),r=f.RANDOM(),n=Math.sqrt(1-t),t=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*a),e[1]=n*Math.cos(2*Math.PI*a),e[2]=t*Math.sin(2*Math.PI*r),e[3]=t*Math.cos(2*Math.PI*r),e},t.invert=function(e,t){var a=t[0],r=t[1],n=t[2],t=t[3],i=a*a+r*r+n*n+t*t,i=i?1/i:0;return e[0]=-a*i,e[1]=-r*i,e[2]=-n*i,e[3]=t*i,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=c,t.fromEuler=function(e,t,a,r){var n=.5*Math.PI/180,n=(t*=n,a*=n,r*=n,Math.sin(t)),t=Math.cos(t),i=Math.sin(a),a=Math.cos(a),o=Math.sin(r),r=Math.cos(r);return e[0]=n*a*r-t*i*o,e[1]=t*i*r+n*a*o,e[2]=t*a*o-n*i*r,e[3]=t*a*r+n*i*o,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var f=i(a(38)),r=i(a(204)),n=i(a(207)),a=i(a(208));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(){var e=new f.ARRAY_TYPE(4);return f.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function s(e,t,a){a*=.5;var r=Math.sin(a);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(a),e}function l(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=a[0],s=a[1],l=a[2],a=a[3];return e[0]=r*a+t*o+n*l-i*s,e[1]=n*a+t*s+i*o-r*l,e[2]=i*a+t*l+r*s-n*o,e[3]=t*a-r*o-n*s-i*l,e}function u(e,t,a,r){var n,i=t[0],o=t[1],s=t[2],t=t[3],l=a[0],u=a[1],c=a[2],a=a[3],d=void 0,h=void 0,p=void 0;return(d=i*l+o*u+s*c+t*a)<0&&(d=-d,l=-l,u=-u,c=-c,a=-a),p=1-d>f.EPSILON?(d=Math.acos(d),n=Math.sin(d),h=Math.sin((1-r)*d)/n,Math.sin(r*d)/n):(h=1-r,r),e[0]=h*i+p*l,e[1]=h*o+p*u,e[2]=h*s+p*c,e[3]=h*t+p*a,e}function c(e,t){var a,r,n=t[0]+t[4]+t[8],i=void 0;return 0<n?(i=Math.sqrt(n+1),e[3]=.5*i,e[0]=(t[5]-t[7])*(i=.5/i),e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i):(t[4]>t[n=0]&&(n=1),a=((n=t[8]>t[3*n+n]?2:n)+1)%3,r=(n+2)%3,i=Math.sqrt(t[3*n+n]-t[3*a+a]-t[3*r+r]+1),e[n]=.5*i,e[3]=(t[3*a+r]-t[3*r+a])*(i=.5/i),e[a]=(t[3*a+n]+t[3*n+a])*i,e[r]=(t[3*r+n]+t[3*n+r])*i),e}t.clone=a.clone,t.fromValues=a.fromValues,t.copy=a.copy,t.set=a.set,t.add=a.add,t.mul=l,t.scale=a.scale,t.dot=a.dot,t.lerp=a.lerp;var d,h,p,m,g,y,v=t.length=a.length,v=(t.len=v,t.squaredLength=a.squaredLength),_=(t.sqrLen=v,t.normalize=a.normalize);t.exactEquals=a.exactEquals,t.equals=a.equals,t.rotationTo=(d=n.create(),h=n.fromValues(1,0,0),p=n.fromValues(0,1,0),function(e,t,a){var r=n.dot(t,a);return r<-.999999?(n.cross(d,h,t),n.len(d)<1e-6&&n.cross(d,p,t),n.normalize(d,d),s(e,d,Math.PI),e):.999999<r?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(n.cross(d,t,a),e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=1+r,_(e,e))}),t.sqlerp=(m=o(),g=o(),function(e,t,a,r,n,i){return u(m,t,n,i),u(g,a,r,i),u(e,m,g,2*i*(1-i)),e}),t.setAxes=(y=r.create(),function(e,t,a,r){return y[0]=a[0],y[3]=a[1],y[6]=a[2],y[1]=r[0],y[4]=r[1],y[7]=r[2],y[2]=-t[0],y[5]=-t[1],y[8]=-t[2],_(e,c(e,y))})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new o.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=n,t.fromValues=i,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,a,r){return e[0]=t,e[1]=a,e[2]=r,e},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e},t.subtract=s,t.multiply=l,t.divide=u,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e},t.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},t.scaleAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e},t.distance=c,t.squaredDistance=d,t.squaredLength=h,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=p,t.dot=f,t.cross=function(e,t,a){var r=t[0],n=t[1],t=t[2],i=a[0],o=a[1],a=a[2];return e[0]=n*a-t*o,e[1]=t*i-r*a,e[2]=r*o-n*i,e},t.lerp=function(e,t,a,r){var n=t[0],i=t[1],t=t[2];return e[0]=n+r*(a[0]-n),e[1]=i+r*(a[1]-i),e[2]=t+r*(a[2]-t),e},t.hermite=function(e,t,a,r,n,i){var o=i*i,s=o*(2*i-3)+1,l=o*(i-2)+i,u=o*(i-1),o=o*(3-2*i);return e[0]=t[0]*s+a[0]*l+r[0]*u+n[0]*o,e[1]=t[1]*s+a[1]*l+r[1]*u+n[1]*o,e[2]=t[2]*s+a[2]*l+r[2]*u+n[2]*o,e},t.bezier=function(e,t,a,r,n,i){var o=1-i,s=o*o,l=i*i,u=s*o,s=3*i*s,o=3*l*o,l=l*i;return e[0]=t[0]*u+a[0]*s+r[0]*o+n[0]*l,e[1]=t[1]*u+a[1]*s+r[1]*o+n[1]*l,e[2]=t[2]*u+a[2]*s+r[2]*o+n[2]*l,e},t.random=function(e,t){t=t||1;var a=2*o.RANDOM()*Math.PI,r=2*o.RANDOM()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(a)*n,e[1]=Math.sin(a)*n,e[2]=r*t,e},t.transformMat4=function(e,t,a){var r,n=t[0],i=t[1],t=t[2];return r=(r=a[3]*n+a[7]*i+a[11]*t+a[15])||1,e[0]=(a[0]*n+a[4]*i+a[8]*t+a[12])/r,e[1]=(a[1]*n+a[5]*i+a[9]*t+a[13])/r,e[2]=(a[2]*n+a[6]*i+a[10]*t+a[14])/r,e},t.transformMat3=function(e,t,a){var r=t[0],n=t[1],t=t[2];return e[0]=r*a[0]+n*a[3]+t*a[6],e[1]=r*a[1]+n*a[4]+t*a[7],e[2]=r*a[2]+n*a[5]+t*a[8],e},t.transformQuat=function(e,t,a){var r=a[0],n=a[1],i=a[2],a=a[3],o=t[0],s=t[1],t=t[2],l=n*t-i*s,u=i*o-r*t,c=r*s-n*o,d=n*c-i*u,i=i*l-r*c,r=r*u-n*l,n=2*a;return l*=n,u*=n,c*=n,d*=2,i*=2,r*=2,e[0]=o+l+d,e[1]=s+u+i,e[2]=t+c+r,e},t.rotateX=function(e,t,a,r){var n=[],i=[];return n[0]=t[0]-a[0],n[1]=t[1]-a[1],n[2]=t[2]-a[2],i[0]=n[0],i[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),i[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=i[0]+a[0],e[1]=i[1]+a[1],e[2]=i[2]+a[2],e},t.rotateY=function(e,t,a,r){var n=[],i=[];return n[0]=t[0]-a[0],n[1]=t[1]-a[1],n[2]=t[2]-a[2],i[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),i[1]=n[1],i[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=i[0]+a[0],e[1]=i[1]+a[1],e[2]=i[2]+a[2],e},t.rotateZ=function(e,t,a,r){var n=[],i=[];return n[0]=t[0]-a[0],n[1]=t[1]-a[1],n[2]=t[2]-a[2],i[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),i[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),i[2]=n[2],e[0]=i[0]+a[0],e[1]=i[1]+a[1],e[2]=i[2]+a[2],e},t.angle=function(e,t){e=i(e[0],e[1],e[2]),t=i(t[0],t[1],t[2]),p(e,e),p(t,t),e=f(e,t);return 1<e?0:e<-1?Math.PI:Math.acos(e)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var a=e[0],r=e[1],e=e[2],n=t[0],i=t[1],t=t[2];return Math.abs(a-n)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))&&Math.abs(r-i)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-t)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(){var e=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function n(e){var t=e[0],a=e[1],e=e[2];return Math.sqrt(t*t+a*a+e*e)}function i(e,t,a){var r=new o.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=a,r}function s(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e}function l(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e}function u(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e}function c(e,t){var a=t[0]-e[0],r=t[1]-e[1],t=t[2]-e[2];return Math.sqrt(a*a+r*r+t*t)}function d(e,t){var a=t[0]-e[0],r=t[1]-e[1],t=t[2]-e[2];return a*a+r*r+t*t}function h(e){var t=e[0],a=e[1],e=e[2];return t*t+a*a+e*e}function p(e,t){var a=t[0],r=t[1],n=t[2],a=a*a+r*r+n*n;return 0<a&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}var m;t.sub=s,t.mul=l,t.div=u,t.dist=c,t.sqrDist=d,t.len=n,t.sqrLen=h,t.forEach=(m=r(),function(e,t,a,r,n,i){var o=void 0,s=void 0;for(t=t||3,a=a||0,s=r?Math.min(r*t+a,e.length):e.length,o=a;o<s;o+=t)m[0]=e[o],m[1]=e[o+1],m[2]=e[o+2],n(m,m,i),e[o]=m[0],e[o+1]=m[1],e[o+2]=m[2];return e})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,a,r){var n=new u.ARRAY_TYPE(4);return n[0]=e,n[1]=t,n[2]=a,n[3]=r,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,a,r,n){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},t.subtract=n,t.multiply=i,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e[3]=Math.min(t[3],a[3]),e},t.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e[3]=Math.max(t[3],a[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},t.scaleAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e},t.distance=s,t.squaredDistance=l,t.length=c,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var a=t[0],r=t[1],n=t[2],t=t[3],i=a*a+r*r+n*n+t*t;0<i&&(i=1/Math.sqrt(i),e[0]=a*i,e[1]=r*i,e[2]=n*i,e[3]=t*i);return e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,a,r){var n=t[0],i=t[1],o=t[2],t=t[3];return e[0]=n+r*(a[0]-n),e[1]=i+r*(a[1]-i),e[2]=o+r*(a[2]-o),e[3]=t+r*(a[3]-t),e},t.random=function(e,t){var a,r,n,i,o,s;t=t||1;for(;a=2*u.RANDOM()-1,r=2*u.RANDOM()-1,o=a*a+r*r,1<=o;);for(;n=2*u.RANDOM()-1,i=2*u.RANDOM()-1,s=n*n+i*i,1<=s;);var l=Math.sqrt((1-o)/s);return e[0]=t*a,e[1]=t*r,e[2]=t*n*l,e[3]=t*i*l,e},t.transformMat4=function(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3];return e[0]=a[0]*r+a[4]*n+a[8]*i+a[12]*t,e[1]=a[1]*r+a[5]*n+a[9]*i+a[13]*t,e[2]=a[2]*r+a[6]*n+a[10]*i+a[14]*t,e[3]=a[3]*r+a[7]*n+a[11]*i+a[15]*t,e},t.transformQuat=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=a[0],s=a[1],l=a[2],a=a[3],u=a*r+s*i-l*n,c=a*n+l*r-o*i,d=a*i+o*n-s*r,r=-o*r-s*n-l*i;return e[0]=u*a+r*-o+c*-l-d*-s,e[1]=c*a+r*-s+d*-o-u*-l,e[2]=d*a+r*-l+u*-s-c*-o,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],e=e[3],i=t[0],o=t[1],s=t[2],t=t[3];return Math.abs(a-i)<=u.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-o)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(e-t)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(){var e=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function n(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}function i(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e}function o(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e}function s(e,t){var a=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],t=t[3]-e[3];return Math.sqrt(a*a+r*r+n*n+t*t)}function l(e,t){var a=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],t=t[3]-e[3];return a*a+r*r+n*n+t*t}function c(e){var t=e[0],a=e[1],r=e[2],e=e[3];return Math.sqrt(t*t+a*a+r*r+e*e)}function d(e){var t=e[0],a=e[1],r=e[2],e=e[3];return t*t+a*a+r*r+e*e}var h;t.sub=n,t.mul=i,t.div=o,t.dist=s,t.sqrDist=l,t.len=c,t.sqrLen=d,t.forEach=(h=r(),function(e,t,a,r,n,i){var o=void 0,s=void 0;for(t=t||4,a=a||0,s=r?Math.min(r*t+a,e.length):e.length,o=a;o<s;o+=t)h[0]=e[o],h[1]=e[o+1],h[2]=e[o+2],h[3]=e[o+3],n(h,h,i),e[o]=h[0],e[o+1]=h[1],e[o+2]=h[2],e[o+3]=h[3];return e})},function(e,t,a){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;var r,n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===n.join(""))return r={},"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var a,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),n=1;n<arguments.length;n++){for(var i in a=Object(arguments[n]))u.call(a,i)&&(r[i]=a[i]);if(l)for(var o=l(a),s=0;s<o.length;s++)c.call(a,o[s])&&(r[o[s]]=a[o[s]])}return r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.default)(e,t)};var t=a(536),r=(a=t)&&a.__esModule?a:{default:a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeShape=t.subscriptionShape=void 0;var a=a(99),a=(a=a)&&a.__esModule?a:{default:a};t.subscriptionShape=a.default.shape({trySubscribe:a.default.func.isRequired,tryUnsubscribe:a.default.func.isRequired,notifyNestedSubs:a.default.func.isRequired,isSubscribed:a.default.func.isRequired}),t.storeShape=a.default.shape({subscribe:a.default.func.isRequired,dispatch:a.default.func.isRequired,getState:a.default.func.isRequired})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(o,e){void 0===e&&(e={});var t=e.getDisplayName,r=void 0===t?function(e){return"ConnectAdvanced("+e+")"}:t,t=e.methodName,s=void 0===t?"connectAdvanced":t,t=e.renderCountProp,l=void 0===t?void 0:t,t=e.shouldHandleStateChanges,u=void 0===t||t,t=e.storeKey,c=void 0===t?"store":t,t=e.withRef,d=void 0!==t&&t,h=(0,n.default)(e,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),p=c+"Subscription",f=A++,m=((t={})[c]=i.storeShape,t[p]=i.subscriptionShape,t),g=((e={})[p]=i.subscriptionShape,e);return function(a){(0,b.default)((0,E.isValidElementType)(a),"You must pass a component to the function returned by "+s+". Instead received "+JSON.stringify(a));var e=a.displayName||a.name||"Component",n=r(e),i=(0,_.default)({},h,{getDisplayName:r,methodName:s,renderCountProp:l,shouldHandleStateChanges:u,storeKey:c,withRef:d,displayName:n,wrappedComponentName:e,WrappedComponent:a}),e=function(r){function e(e,t){var a=r.call(this,e,t)||this;return a.version=f,a.state={},a.renderCount=0,a.store=e[c]||t[c],a.propsMode=Boolean(e[c]),a.setWrappedInstance=a.setWrappedInstance.bind((0,v.default)((0,v.default)(a))),(0,b.default)(a.store,'Could not find "'+c+'" in either the context or props of "'+n+'". Either wrap the root component in a <Provider>, or explicitly pass "'+c+'" as a prop to "'+n+'".'),a.initSelector(),a.initSubscription(),a}(0,y.default)(e,r);var t=e.prototype;return t.getChildContext=function(){var e=this.propsMode?null:this.subscription,t={};return t[p]=e||this.context[p],t},t.componentDidMount=function(){u&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate)&&this.forceUpdate()},t.componentWillReceiveProps=function(e){this.selector.run(e)},t.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},t.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=C,this.store=null,this.selector.run=C,this.selector.shouldComponentUpdate=!1},t.getWrappedInstance=function(){return(0,b.default)(d,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+s+"() call."),this.wrappedInstance},t.setWrappedInstance=function(e){this.wrappedInstance=e},t.initSelector=function(){var a,r,n,e=o(this.store.dispatch,i);this.selector=(a=e,r=this.store,n={run:function(e){try{var t=a(r.getState(),e);t===n.props&&!n.error||(n.shouldComponentUpdate=!0,n.props=t,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}}),this.selector.run(this.props)},t.initSubscription=function(){var e;u&&(e=(this.propsMode?this.props:this.context)[p],this.subscription=new T.default(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription))},t.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(P)):this.notifyNestedSubs()},t.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},t.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},t.addExtraProps=function(e){var t;return d||l||this.propsMode&&this.subscription?(t=(0,_.default)({},e),d&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[p]=this.subscription),t):e},t.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return(0,S.createElement)(a,this.addExtraProps(e.props))},e}(S.Component);return x&&(e.prototype.UNSAFE_componentWillReceiveProps=e.prototype.componentWillReceiveProps,delete e.prototype.componentWillReceiveProps),e.WrappedComponent=a,e.displayName=n,e.childContextTypes=g,e.contextTypes=m,e.propTypes=m,(0,k.default)(e,a)}};var y=r(a(210)),v=r(a(539)),_=r(a(147)),n=r(a(148)),k=r(a(540)),b=r(a(542)),S=a(7),t=r(S),E=a(213),T=r(a(543)),i=a(211);function r(e){return e&&e.__esModule?e:{default:e}}var x=void 0!==t.default.forwardRef,A=0,P={};function C(){}},function(e,t,a){"use strict";e.exports=a(541)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var r=l(a(215)),n=l(a(557)),i=l(a(558)),o=l(a(559)),s=l(a(219));l(a(218));function l(e){return e&&e.__esModule?e:{default:e}}t.createStore=r.default,t.combineReducers=n.default,t.bindActionCreators=i.default,t.applyMiddleware=o.default,t.compose=s.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,a,r){"function"==typeof a&&void 0===r&&(r=a,a=void 0);if(void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(e)(t,a)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var n=t;var i=a;var o=[];var s=o;var l=!1;function u(){s===o&&(s=o.slice())}function c(){return i}function d(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var a=!0;return u(),s.push(t),function(){var e;a&&(a=!1,u(),e=s.indexOf(t),s.splice(e,1))}}function h(e){if(!(0,g.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,i=n(i,e)}finally{l=!1}for(var t=o=s,a=0;a<t.length;a++){var r=t[a];r()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");n=e,h({type:v.INIT})}function f(){var e,r=d;return(e={subscribe:function(e){if("object"!==(void 0===e?"undefined":m(e)))throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(i)}t();var a=r(t);return{unsubscribe:a}}})[y.default]=function(){return this},e}h({type:v.INIT});return r={dispatch:h,subscribe:d,getState:c,replaceReducer:p},r[y.default]=f,r};var g=r(a(216)),y=r(a(555));function r(e){return e&&e.__esModule?e:{default:e}}var v=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(a(547)),n=o(a(552)),i=o(a(554));function o(e){return e&&e.__esModule?e:{default:e}}var a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);t.default=function(e){return!(!(0,i.default)(e)||"[object Object]"!=(0,r.default)(e))&&(null===(e=(0,n.default)(e))||"function"==typeof(e=u.call(e,"constructor")&&e.constructor)&&e instanceof e&&l.call(e)==c)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=a(548);a=((a=a)&&a.__esModule?a:{default:a}).default.Symbol;t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0!==t.length?1!==t.length?t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}}):t[0]:function(e){return e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapMapToPropsConstant=function(n){return function(e,t){var a=n(e,t);function r(){return a}return r.dependsOnOwnProps=!1,r}},t.getDependsOnOwnProps=i,t.wrapMapToPropsFunc=function(n,e){return function(e,t){t.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,t){r.mapToProps=n,r.dependsOnOwnProps=i(n);var a=r(e,t);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=i(a),a=r(e,t)),a},r}};t=a(221);(a=t)&&a.__esModule;function i(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){(0,r.default)(e)||(0,n.default)(a+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=i(a(560)),n=i(a(146));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";var r=a(567),n=("string"==typeof r&&(r=[[e.i,r,""]]),{hmr:!0});n.transform=void 0,a(101)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(e){e=e&&e.childNodes&&[].concat(r(e.childNodes));if(!e)return{};var t=e.filter(function(e){return"#cdata-section"===e.nodeName});if(t&&0<t.length)try{return JSON.parse(t[0].data)}catch(e){}return e.reduce(function(e,t){var a="";switch(t.nodeName){case"#text":a=t.textContent.trim();break;case"#cdata-section":a=t.data}return e+a},"")}Object.defineProperty(t,"__esModule",{value:!0}),t.childrenByName=function(e,t){return[].concat(r(e.childNodes)).filter(function(e){return e.nodeName===t||t==="vmap:"+e.nodeName||e.nodeName==="vmap:"+t})},t.parseNodeValue=n,t.parseXMLNode=function t(e){var a={attributes:{},children:{},value:{}};return a.value=n(e),e.attributes&&[].concat(r(e.attributes)).forEach(function(e){e.nodeName&&void 0!==e.nodeValue&&null!==e.nodeValue&&(a.attributes[e.nodeName]=e.nodeValue)}),e.childNodes&&[].concat(r(e.childNodes)).filter(function(e){return"#"!==e.nodeName.substring(0,1)}).forEach(function(e){a.children[e.nodeName]=t(e)}),a}},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNOCA1djE0bDExLTd6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNNiAxOWg0VjVINnYxNHptOC0xNHYxNGg0VjVoLTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";var i,r,n,o,s,l;i="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,r=t.length,n={};a<r;a++)if((e=t[a])&&e[1]in i){for(a=0;a<e.length;a++)n[t[0][a]]=e[a];return n}return!1}(),s={change:o.fullscreenchange,error:o.fullscreenerror},l={request:function(e){var t=o.requestFullscreen;e=e||i.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[t]():e[t](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){i[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){e=s[e];e&&i.addEventListener(e,t,!1)},off:function(e,t){e=s[e];e&&i.removeEventListener(e,t,!1)},raw:o},o?(Object.defineProperties(l,{isFullscreen:{get:function(){return Boolean(i[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return i[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(i[o.fullscreenEnabled])}}}),r?e.exports=l:window.screenfull=l):r?e.exports=!1:window.screenfull=!1},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTIgNVYxTDcgNmw1IDVWN2MzLjMxIDAgNiAyLjY5IDYgNnMtMi42OSA2LTYgNi02LTIuNjktNi02SDRjMCA0LjQyIDMuNTggOCA4IDhzOC0zLjU4IDgtOC0zLjU4LTgtOC04eiIvPgo8L3N2Zz4="},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=u(a(7)),o=(u(a(70)),a(18),a(13)),s=a(15),l=u(a(594));a(595),a(596);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,o){return function t(e,a){try{var r=s[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){var u,c=this;if(this instanceof a)return(u=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).clientPosition=null,u.seeking=!1,u.notChangeThumbnail=!1,u.cuesKey=0,e.callBackSeek(0),e.cues&&d(regeneratorRuntime.mark(function e(){var l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===document.getElementById("nexplayer_video"))return e.next=3,new Promise(function(e){return setTimeout(e,500)});e.next=5;break;case 3:e.next=0;break;case 5:l=document.getElementById("nexplayer_video"),d(regeneratorRuntime.mark(function e(){var t,a,r,n,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===document.getElementsByClassName("nexplayer_thumb_container")[0])return e.next=3,new Promise(function(e){return setTimeout(e,500)});e.next=5;break;case 3:e.next=0;break;case 5:t=u,a=document.getElementsByClassName("nexplayer_thumb_container")[0],r=document.getElementsByClassName("nexplayer_thumb_text")[0],n=document.getElementsByClassName("nexplayer_thumb_image")[0],i=document.getElementsByClassName("nexplayer_thumb_triangle_bottom")[0],o=document.getElementsByClassName("nexplayer_bar")[0],s=!1,u.props.div.addEventListener("updatethumbnailposition",function e(){t.props.div.removeEventListener("updatethumbnailposition",e),s=!0,a.style.height=null,a.style.width=null,r.style["background-color"]=null,n.style["background-color"]=null,a.style.bottom=null,r.style["text-shadow"]=null}),a.style.height=parseFloat(window.getComputedStyle(r).height)+5+"px",a.style.width=parseFloat(window.getComputedStyle(i).width)+5+"px",n.style["background-color"]=window.getComputedStyle(r)["background-color"].toString(),l.addEventListener("trickPlayTimeUpdate",function(e){void 0!==u.refs.baseBar&&void 0!==u.refs.playbackBar&&void 0!==u.refs.circleRef&&((e=(e=e.detail/l.duration*100)<0?0:e)>=u.refs.baseBar.clientWidth&&(e=u.refs.baseBar.clientWidth),u.refs.playbackBar.style.width=e+"%",u.refs.circleRef.style.marginLeft=e-.5+"%",u.onShowThumb(e*u.refs.baseBar.clientWidth/100,u.refs.baseBar.getBoundingClientRect().left,u.refs.baseBar.clientWidth),u.refs.baseBar.dispatchEvent(new CustomEvent("hovering",{detail:e/100})),s||"none"===o.style.display||(a.style.height=parseFloat(window.getComputedStyle(r).height)+5+"px",a.style.width=parseFloat(window.getComputedStyle(i).width)+"px",a.style.bottom=parseFloat(window.getComputedStyle(o).height)+5+"px",r.style["background-color"]="transparent",r.style["text-shadow"]="black 0px 0px 10px, black 1px 1px 1px",n.style["background-color"]="transparent",a.style["background-color"]="transparent",a.parentElement.style.opacity=1,i.style.opacity=0))}),l.addEventListener("trickPlayEnded",function(e){a.parentElement.style.opacity=0,u.onMouseUp()});case 18:case"end":return e.stop()}},e,c)}))();case 7:case"end":return e.stop()}},e,c)}))(),u;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"onHoverSeekbar",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];void 0!==this.refs.baseBar&&void 0!==this.refs.circleRef&&void 0!==this.refs.bufferBar&&void 0!==this.refs.playbackBar&&void 0!==this.refs.flexBar&&(this.refs.circleRef.style.display="inline",this.refs.baseBar.style.height="0.69259259259rem",this.refs.bufferBar.style.height="0.69259259259rem",this.refs.playbackBar.style.height="0.69259259259rem",this.updateHeightAdMarkers("0.69259259259rem"),this.refs.flexBar.style.marginTop="-0.12592612963rem",(e=(e=(e=e||window.event).clientX-this.refs.baseBar.getBoundingClientRect().left)<0?0:e)>=this.refs.baseBar.clientWidth&&(e=this.refs.baseBar.clientWidth),!isNaN(e)&&this.props.showThumb&&this.onShowThumb(e,this.refs.baseBar.getBoundingClientRect().left,this.refs.baseBar.clientWidth),t)&&this.refs.baseBar.dispatchEvent(new CustomEvent("hovering",{detail:e/this.refs.baseBar.clientWidth}))}},{key:"onMouseOutSeekbar",value:function(){!this.seeking&&this.refs.circleRef&&this.refs.baseBar&&this.refs.bufferBar&&this.refs.playbackBar&&this.refs.flexBar&&(this.refs.circleRef.style.display="none",this.refs.baseBar.style.height="0.44074074074rem",this.refs.bufferBar.style.height="0.44074074074rem",this.refs.playbackBar.style.height="0.44074074074rem",this.updateHeightAdMarkers("0.44074074074rem"),this.refs.flexBar.style.marginTop="0rem")}},{key:"updateHeightAdMarkers",value:function(t){var a;this.props.cues&&this.refs&&(a=this).props.cues.forEach(function(e){void 0!==a.refs[a.cueRefName(e)]&&(a.refs[a.cueRefName(e)].refs.nexplayer_ad_marker.style.height=t)})}},{key:"onMouseUp",value:function(){void 0!==this.refs.baseBar&&(this.props.showThumb&&this.props.onShowThumb(-1,this.refs.baseBar.getBoundingClientRect().left,this.refs.baseBar.clientWidth),this.updateSeeking())}},{key:"updateSeeking",value:function(){this.seeking=!1,this.onMouseOutSeekbar()}},{key:"onSeek",value:function(e){var t,a,r=this;0===e.clientX?void 0!==this.refs.baseBar&&void 0!==this.refs.playbackBar&&void 0!==this.refs.circleRef&&(t=this.refs.playbackBar.style.width,t=parseFloat(t.replace(/,/,"."))*this.refs.baseBar.clientWidth/100,!this.seeking&&"click"!==e.type||(a=(t=(t=t<0?0:t)>=this.refs.baseBar.clientWidth?this.refs.baseBar.clientWidth:t)/this.refs.baseBar.clientWidth*100,this.refs.playbackBar.style.width=this.props.primaryProgress+"%",this.refs.circleRef.style.marginLeft=this.props.primaryProgress-.5+"%",this.props.showThumb&&this.onShowThumb(t,this.refs.baseBar.getBoundingClientRect().left,this.refs.baseBar.clientWidth),this.props.callBackSeek(a),this.notChangeThumbnail)||(this.notChangeThumbnail=!0,setTimeout(function(){r.onSeekStop(),r.props.showThumb&&r.onShowThumb(-1,r.refs.baseBar.getBoundingClientRect().left,r.refs.baseBar.clientWidth),r.notChangeThumbnail=!1},5e3))):void 0!==this.refs.baseBar&&void 0!==this.refs.playbackBar&&void 0!==this.refs.circleRef&&(t=0,"click"===e.type||"mousemove"===e.type?t=e.clientX-this.refs.baseBar.getBoundingClientRect().left:void 0!==e.touches&&(t=e.touches[0].pageX-this.refs.baseBar.getBoundingClientRect().left),!this.seeking&&"click"!==e.type||(a=(t=(t=t<0?0:t)>=this.refs.baseBar.clientWidth?this.refs.baseBar.clientWidth:t)/this.refs.baseBar.clientWidth*100,this.refs.playbackBar.style.width=this.props.primaryProgress+"%",this.refs.circleRef.style.marginLeft=this.props.primaryProgress-.5+"%",this.props.showThumb&&this.onShowThumb(t,this.refs.baseBar.getBoundingClientRect().left,this.refs.baseBar.clientWidth),this.props.callBackSeek(a)))}},{key:"onSeekStop",value:function(e){this.seeking=!1}},{key:"onShowThumb",value:function(e){!isNaN(e)&&this.props.showThumb&&void 0!==this.refs.baseBar&&this.props.onShowThumb(e,this.refs.baseBar.getBoundingClientRect().left,this.refs.baseBar.clientWidth)}},{key:"cueRefName",value:function(e){return"nexplayer_ad_marker_"+e}},{key:"dynamicPhoneStyle",value:function(){var e=/Android/i.test(navigator.userAgent)?{height:"0.9rem",padding:"0rem 0rem 0rem 0rem"}:/iPhone|iPad|iPod/i.test(navigator.userAgent)?{height:"0.9rem",padding:"0.881rem 0rem 0rem 0rem"}:null;return e}},{key:"shouldComponentUpdate",value:function(e,t){return e.shouldConsiderMouseUp!==this.props.shouldConsiderMouseUp||e.totalTime!==this.props.totalTime||e.cues!==this.props.cues||e.showThumb!==this.props.showThumb||e.primaryProgress!==this.props.primaryProgress||e.secondaryProgress!==this.props.secondaryProgress||e.marginThumbRightPercentage!==this.props.marginThumbRightPercentage}},{key:"render",value:function(){var t=this,a=(this.props.shouldConsiderMouseUp&&this.updateSeeking(),this.props.totalTime),e=[],r=(this.props.cues&&a&&(e=this.props.cues.map(function(e){return i.default.createElement(l.default,{key:t.cuesKey++,cue:e,duration:a,ref:t.cueRefName(e),onClick:function(e){return t.onSeek(e)},onMouseDown:function(){return t.seeking=!0},onMouseOver:function(e){return t.onHoverSeekbar(e)},onMouseOut:function(){return t.onMouseOutSeekbar()}})})),this.dynamicPhoneStyle());return i.default.createElement("div",{className:"nexplayer_flex_seekbar",style:r,ref:"flexBar",onClick:function(e){return t.onSeek(e)},onMouseUp:function(e){return t.onSeekStop(e)},onMouseDown:function(){return t.seeking=!0},onMouseOver:function(e){return t.onHoverSeekbar(e,!0)},onMouseMove:function(e){return t.onHoverSeekbar(e,!0)},onMouseOut:function(){t.onMouseOutSeekbar(),!t.seeking&&t.props.showThumb&&void 0!==t.refs.baseBar&&t.props.onShowThumb(-1,t.refs.baseBar.getBoundingClientRect().left,t.refs.baseBar.clientWidth)},onTouchStart:function(e){t.seeking=!0,/iPhone|iPad|iPod/i.test(navigator.userAgent)&&t.onSeek(e)},onTouchMove:function(e){t.onHoverSeekbar(e),t.onSeek(e)},onTouchEnd:function(){t.onMouseOutSeekbar()}},i.default.createElement("div",{className:"nexplayer_base_seekbar",ref:"baseBar",onClick:function(e){return t.onSeek(e)},onMouseDown:function(){return t.seeking=!0},onMouseOver:function(e){return t.onHoverSeekbar(e)},onMouseMove:function(e){return t.onHoverSeekbar(e)},onMouseOut:function(){t.onMouseOutSeekbar(),!t.seeking&&t.props.showThumb&&void 0!==t.refs.baseBar&&t.props.onShowThumb(-1,t.refs.baseBar.getBoundingClientRect().left,t.refs.baseBar.clientWidth)}}),i.default.createElement("div",{className:"nexplayer_bufferlevel_position",style:{width:this.props.secondaryProgress+"%"},ref:"bufferBar",onClick:function(e){return t.onSeek(e)},onMouseDown:function(){return t.seeking=!0},onMouseOver:function(e){return t.onHoverSeekbar(e)},onMouseMove:function(e){return t.onHoverSeekbar(e)},onMouseOut:function(){t.onMouseOutSeekbar(),!t.seeking&&t.props.showThumb&&void 0!==t.this.refs.baseBar&&t.props.onShowThumb(-1,t.refs.baseBar.getBoundingClientRect().left,t.refs.baseBar.clientWidth)}}),i.default.createElement("div",{className:"nexplayer_playback_position",style:{width:this.props.primaryProgress+"%"},ref:"playbackBar",onClick:function(e){return t.onSeek(e)},onMouseUp:function(e){return t.onSeekStop(e)},onMouseDown:function(){return t.seeking=!0},onMouseOver:function(e){return t.onHoverSeekbar(e)},onMouseMove:function(e){return t.onHoverSeekbar(e)},onMouseOut:function(){t.onMouseOutSeekbar(),!t.seeking&&t.props.showThumb&&void 0!==t.this.refs.baseBar&&t.props.onShowThumb(-1,t.refs.baseBar.getBoundingClientRect().left,t.refs.baseBar.clientWidth)}}),e,i.default.createElement("div",{className:"nexplayer_circleBase",style:{marginLeft:this.props.primaryProgress-this.props.marginThumbRightPercentage+"%"},ref:"circleRef"}))}}]),a}(i.default.Component),s={onShowThumb:s.ActionShowThumb,onSubtitle:s.ActionUpdateSelectedSubtitle},o=(0,o.connect)(function(e){return{currentTime:e.NexPlayerReducer.currentTime,totalTime:e.NexPlayerReducer.duration,isSeeking:e.NexPlayerReducer.isSeeking,currentSubtitle:e.NexPlayerReducer.currentSubtitleLanguage,div:e.NexPlayerReducer.div}},s)(a);t.default=o},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,n;return"function"==typeof ArrayBuffer&&(t=e.lib.WordArray,n=t.init,(t.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,a=[],r=0;r<t;r++)a[r>>>2]|=e[r]<<24-r%4*8;n.call(this,a,t)}else n.apply(this,arguments)}).prototype=t),e.lib.WordArray},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var n=e.lib.WordArray,t=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}return t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n+=2){var i=t[n>>>2]>>>16-n%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return n.create(a,2*t)}},t.Utf16LE={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n+=2){var i=o(t[n>>>2]>>>16-n%4*8&65535);r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>1]|=o(e.charCodeAt(r)<<16-r%2*16);return n.create(a,2*t)}},e.enc.Utf16},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a,r,n;return a=(t=e).lib.WordArray,r=t.algo,n=r.SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r),e.SHA224},"object"===n(t)?e.exports=t=r(a(1),a(103)):(n=[a(1),a(103)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a,r,n,i;return a=(t=e).x64,r=a.Word,n=a.WordArray,a=t.algo,i=a.SHA512,a=a.SHA384=i.extend({_doReset:function(){this._hash=new n.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=i._createHelper(a),t.HmacSHA384=i._createHmacHelper(a),e.SHA384},"object"===n(t)?e.exports=t=r(a(1),a(46),a(104)):(n=[a(1),a(46),a(104)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){for(var c=Math,t=e,d=(n=t.lib).WordArray,r=n.Hasher,a=t.x64.Word,n=t.algo,A=[],P=[],C=[],i=1,o=0,s=0;s<24;s++){A[i+5*o]=(s+1)*(s+2)/2%64;var l=(2*i+3*o)%5;i=o%5,o=l}for(i=0;i<5;i++)for(o=0;o<5;o++)P[i+5*o]=o+(2*i+3*o)%5*5;for(var u=1,h=0;h<24;h++){for(var p,f=0,m=0,g=0;g<7;g++)1&u&&((p=(1<<g)-1)<32?m^=1<<p:f^=1<<p-32),128&u?u=u<<1^113:u<<=1;C[h]=a.create(f,m)}for(var w=[],y=0;y<25;y++)w[y]=a.create();return n=n.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var a=this._state,r=this.blockSize/2,n=0;n<r;n++){var i=e[t+2*n],o=e[t+2*n+1],i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);(S=a[n]).high^=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),S.low^=i}for(var s=0;s<24;s++){for(var l=0;l<5;l++){for(var u=0,c=0,d=0;d<5;d++)u^=(S=a[l+5*d]).high,c^=S.low;var h=w[l];h.high=u,h.low=c}for(l=0;l<5;l++)for(var p=w[(l+4)%5],f=w[(l+1)%5],m=f.high,f=f.low,u=p.high^(m<<1|f>>>31),c=p.low^(f<<1|m>>>31),d=0;d<5;d++)(S=a[l+5*d]).high^=u,S.low^=c;for(var g=1;g<25;g++){var y=(S=a[g]).high,v=S.low,_=A[g],y=(c=_<32?(u=y<<_|v>>>32-_,v<<_|y>>>32-_):(u=v<<_-32|y>>>64-_,y<<_-32|v>>>64-_),w[P[g]]);y.high=u,y.low=c}var k=w[0],b=a[0];k.high=b.high,k.low=b.low;for(l=0;l<5;l++)for(d=0;d<5;d++){var S=a[g=l+5*d],E=w[g],T=w[(l+1)%5+5*d],x=w[(l+2)%5+5*d];S.high=E.high^~T.high&x.high,S.low=E.low^~T.low&x.low}S=a[0],k=C[s];S.high^=k.high,S.low^=k.low}},_doFinalize:function(){for(var e=this._data,t=e.words,a=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize,n=(t[a>>>5]|=1<<24-a%32,t[(c.ceil((1+a)/r)*r>>>5)-1]|=128,e.sigBytes=4*t.length,this._process(),this._state),a=this.cfg.outputLength/8,i=a/8,o=[],s=0;s<i;s++){var l=n[s],u=l.high,l=l.low,u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8);o.push(16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)),o.push(u)}return new d.init(o,a)},clone:function(){for(var e,t=(e=r.clone.call(this))._state=this._state.slice(0),a=0;a<25;a++)t[a]=t[a].clone();return e}}),t.SHA3=r._createHelper(n),t.HmacSHA3=r._createHmacHelper(n),e.SHA3},"object"===n(t)?e.exports=t=r(a(1),a(46)):(n=[a(1),a(46)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function E(e,t,a){return e&t|~e&a}function T(e,t,a){return e&a|t&~a}function x(e,t){return e<<t|e>>>32-t}var t,a,r,n,A,P,C,w,M,I;return Math,a=(t=e).lib,r=a.WordArray,n=a.Hasher,a=t.algo,A=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),P=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),C=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),w=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),M=r.create([0,1518500249,1859775393,2400959708,2840853838]),I=r.create([1352829926,1548603684,1836072691,2053994217,0]),a=a.RIPEMD160=n.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var r=t+a,n=e[r];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}for(var i,o,s,l,u,c,d=this._hash.words,h=M.words,p=I.words,f=A.words,m=P.words,g=C.words,y=w.words,v=i=d[0],_=o=d[1],k=s=d[2],b=l=d[3],S=u=d[4],a=0;a<80;a+=1)c=(c=x(c=(c=i+e[t+f[a]]|0)+(a<16?(o^s^l)+h[0]:a<32?E(o,s,l)+h[1]:a<48?((o|~s)^l)+h[2]:a<64?T(o,s,l)+h[3]:(o^(s|~l))+h[4])|0,g[a]))+u|0,i=u,u=l,l=x(s,10),s=o,o=c,c=(c=x(c=(c=v+e[t+m[a]]|0)+(a<16?(_^(k|~b))+p[0]:a<32?T(_,k,b)+p[1]:a<48?((_|~k)^b)+p[2]:a<64?E(_,k,b)+p[3]:(_^k^b)+p[4])|0,y[a]))+S|0,v=S,S=b,b=x(k,10),k=_,_=c;c=d[1]+s+b|0,d[1]=d[2]+l+S|0,d[2]=d[3]+u+v|0,d[3]=d[4]+i+_|0,d[4]=d[0]+o+k|0,d[0]=c},_doFinalize:function(){for(var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes,r=(t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(t.length+1),this._process(),this._hash),n=r.words,i=0;i<5;i++){var o=n[i];n[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return r},clone:function(){var e;return(e=n.clone.call(this))._hash=this._hash.clone(),e}}),t.RIPEMD160=n._createHelper(a),t.HmacRIPEMD160=n._createHmacHelper(a),e.RIPEMD160},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a,r,y,n,v,i;return a=(t=e).lib,r=a.Base,y=a.WordArray,a=t.algo,n=a.SHA1,v=a.HMAC,i=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:n,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=v.create(a.hasher,e),n=y.create(),i=y.create([1]),o=n.words,s=i.words,l=a.keySize,u=a.iterations;o.length<l;){for(var c=r.update(t).finalize(i),d=(r.reset(),c.words),h=d.length,p=c,f=1;f<u;f++){p=r.finalize(p),r.reset();for(var m=p.words,g=0;g<h;g++)d[g]^=m[g]}n.concat(c),s[0]++}return n.sigBytes=4*l,n}}),t.PBKDF2=function(e,t,a){return i.create(a).compute(e,t)},e.PBKDF2},"object"===n(t)?e.exports=t=r(a(1),a(63),a(64)):(n=[a(1),a(63),a(64)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function i(e,t,a,r){var n,i=this._iv;i?(n=i.slice(0),this._iv=void 0):n=this._prevBlock,r.encryptBlock(n,0);for(var o=0;o<a;o++)e[t+o]^=n[o]}var t;return e.mode.CFB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize;i.call(this,e,t,r,a),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=e.slice(t,t+r);i.call(this,e,t,r,a),this._prevBlock=n}}),t),e.mode.CFB},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a;return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),a=t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=this._iv,i=this._counter,o=(n&&(i=this._counter=n.slice(0),this._iv=void 0),i.slice(0));a.encryptBlock(o,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=o[s]}}),t.Decryptor=a,t),e.mode.CTR},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function l(e){var t,a,r;return 255==(e>>24&255)?(a=e>>8&255,r=255&e,255===(t=e>>16&255)?(t=0,255===a?(a=0,255===r?r=0:++r):++a):++t,e=0,e=(e+=t<<16)+(a<<8)+r):e+=1<<24,e}var t,a;return e.mode.CTRGladman=(t=e.lib.BlockCipherMode.extend(),a=t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=this._iv,i=this._counter,o=(n&&(i=this._counter=n.slice(0),this._iv=void 0),0===((n=i)[0]=l(n[0]))&&(n[1]=l(n[1])),i.slice(0));a.encryptBlock(o,0);for(var s=0;s<r;s++)e[t+s]^=o[s]}}),t.Decryptor=a,t),e.mode.CTRGladman},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a;return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),a=t.Encryptor=t.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=this._iv,i=this._keystream;n&&(i=this._keystream=n.slice(0),this._iv=void 0),a.encryptBlock(i,0);for(var o=0;o<r;o++)e[t+o]^=i[o]}}),t.Decryptor=a,t),e.mode.OFB},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){return e.pad.AnsiX923={pad:function(e,t){var a=e.sigBytes,t=4*t,t=t-a%t,a=a+t-1;e.clamp(),e.words[a>>>2]|=t<<24-a%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(a){return a.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(a.lib.WordArray.random(t-1)).concat(a.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.pad.Iso10126},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(a){return a.pad.Iso97971={pad:function(e,t){e.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(e,t)},unpad:function(e){a.pad.ZeroPadding.unpad(e),e.sigBytes--}},a.pad.Iso97971},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){return e.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,a=e.sigBytes-1;!(t[a>>>2]>>>24-a%4*8&255);)a--;e.sigBytes=a+1}},e.pad.ZeroPadding},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t,a;return t=e.lib.CipherParams,a=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){e=a.parse(e);return t.create({ciphertext:e})}},e.format.Hex},"object"===n(t)?e.exports=t=r(a(1),a(4)):(n=[a(1),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t=e,a=(r=t.lib).WordArray,r=r.BlockCipher,n=t.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=n.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],a=0;a<56;a++){var r=u[a]-1;t[a]=e[r>>>5]>>>31-r%32&1}for(var n=this._subKeys=[],i=0;i<16;i++){for(var o=n[i]=[],s=d[i],a=0;a<24;a++)o[a/6|0]|=t[(c[a]-1+s)%28]<<31-a%6,o[4+(a/6|0)]|=t[28+(c[a+24]-1+s)%28]<<31-a%6;o[0]=o[0]<<1|o[0]>>>31;for(a=1;a<7;a++)o[a]=o[a]>>>4*(a-1)+3;o[7]=o[7]<<5|o[7]>>>27}for(var l=this._invSubKeys=[],a=0;a<16;a++)l[a]=n[15-a]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,a){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),f.call(this,1,1431655765);for(var r=0;r<16;r++){for(var n=a[r],i=this._lBlock,o=this._rBlock,s=0,l=0;l<8;l++)s|=h[l][((o^n[l])&p[l])>>>0];this._lBlock=o,this._rBlock=i^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,f.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function m(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}return t.DES=r._createHelper(i),n=n.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=i.createEncryptor(a.create(e.slice(0,2))),this._des2=i.createEncryptor(a.create(e.slice(2,4))),this._des3=i.createEncryptor(a.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),t.TripleDES=r._createHelper(n),e.TripleDES},"object"===n(t)?e.exports=t=r(a(1),a(27),a(28),a(17),a(4)):(n=[a(1),a(27),a(28),a(17),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t=e,a=t.lib.StreamCipher,r=t.algo,n=r.RC4=a.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes,r=this._S=[],n=0;n<256;n++)r[n]=n;for(var n=0,i=0;n<256;n++){var o=n%a,o=t[o>>>2]>>>24-o%4*8&255,i=(i+r[n]+o)%256,o=r[n];r[n]=r[i],r[i]=o}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,a=this._j,r=0,n=0;n<4;n++){var a=(a+e[t=(t+1)%256])%256,i=e[t];e[t]=e[a],e[a]=i,r|=e[(e[t]+e[a])%256]<<24-8*n}return this._i=t,this._j=a,r}return t.RC4=a._createHelper(n),r=r.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)i.call(this)}}),t.RC4Drop=a._createHelper(r),e.RC4},"object"===n(t)?e.exports=t=r(a(1),a(27),a(28),a(17),a(4)):(n=[a(1),a(27),a(28),a(17),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function l(){for(var e=this._X,t=this._C,a=0;a<8;a++)o[a]=t[a];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(a=0;a<8;a++){var r=e[a]+t[a],n=65535&r,i=r>>>16;s[a]=((n*n>>>17)+n*i>>>15)+i*i^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var t,a,r,n,o,s;return a=(t=e).lib.StreamCipher,r=t.algo,n=[],o=[],s=[],r=r.Rabbit=a.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,a=0;a<4;a++)e[a]=16711935&(e[a]<<8|e[a]>>>24)|4278255360&(e[a]<<24|e[a]>>>8);for(var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],a=this._b=0;a<4;a++)l.call(this);for(a=0;a<8;a++)n[a]^=r[a+4&7];if(t){var t=t.words,i=t[0],t=t[1],i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),o=i>>>16|4294901760&t,s=t<<16|65535&i;n[0]^=i,n[1]^=o,n[2]^=t,n[3]^=s,n[4]^=i,n[5]^=o,n[6]^=t,n[7]^=s;for(a=0;a<4;a++)l.call(this)}},_doProcessBlock:function(e,t){var a=this._X;l.call(this),n[0]=a[0]^a[5]>>>16^a[3]<<16,n[1]=a[2]^a[7]>>>16^a[5]<<16,n[2]=a[4]^a[1]>>>16^a[7]<<16,n[3]=a[6]^a[3]>>>16^a[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2}),t.Rabbit=a._createHelper(r),e.Rabbit},"object"===n(t)?e.exports=t=r(a(1),a(27),a(28),a(17),a(4)):(n=[a(1),a(27),a(28),a(17),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){function s(){for(var e=this._X,t=this._C,a=0;a<8;a++)o[a]=t[a];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0;for(a=0;a<8;a++){var r=e[a]+t[a],n=65535&r,i=r>>>16;l[a]=((n*n>>>17)+n*i>>>15)+i*i^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var t,a,r,n,o,l;return a=(t=e).lib.StreamCipher,r=t.algo,n=[],o=[],l=[],r=r.RabbitLegacy=a.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)s.call(this);for(n=0;n<8;n++)r[n]^=a[n+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),i=t>>>16|4294901760&e,o=e<<16|65535&t;r[0]^=t,r[1]^=i,r[2]^=e,r[3]^=o,r[4]^=t,r[5]^=i,r[6]^=e,r[7]^=o;for(n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(e,t){var a=this._X;s.call(this),n[0]=a[0]^a[5]>>>16^a[3]<<16,n[1]=a[2]^a[7]>>>16^a[5]<<16,n[2]=a[4]^a[1]>>>16^a[7]<<16,n[3]=a[6]^a[3]>>>16^a[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2}),t.RabbitLegacy=a._createHelper(r),e.RabbitLegacy},"object"===n(t)?e.exports=t=r(a(1),a(27),a(28),a(17),a(4)):(n=[a(1),a(27),a(28),a(17),a(4)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";var r;r=function(){var u,n,i=document,o=i.getElementsByTagName("head")[0],s=!1,l="readyState",c="onreadystatechange",d={},h={},p={};function f(e,t){for(var a=0,r=e.length;a<r;++a)if(!t(e[a]))return s;return 1}function m(e,t){f(e,function(e){return t(e),1})}function g(e,t,a){e=e.push?e:[e];var r=t&&t.call,n=r?t:a,i=r?e.join(""):t,o=e.length;function s(e){return e.call?e():d[e]}function l(){if(!--o)for(var e in d[i]=1,n&&n(),h)f(e.split("|"),s)&&(m(h[e],s),h[e]=[])}return setTimeout(function(){m(e,function e(t,a){return null===t?l():(a||/^https?:\/\//.test(t)||!u||(t=-1===t.indexOf(".js")?u+t+".js":u+t),p[t]?(i&&(i,0),2==p[t]?l():setTimeout(function(){e(t,!0)},0)):(p[t]=1,i&&(i,0),void y(t,l)))})},0),g}function y(e,t){var a,r=i.createElement("script");r.onload=r.onerror=r[c]=function(){r[l]&&!/^c|loade/.test(r[l])||a||(r.onload=r[c]=null,a=1,p[e]=2,t())},r.async=1,r.src=n?e+(-1===e.indexOf("?")?"?":"&")+n:e,o.insertBefore(r,o.lastChild)}return g.get=y,g.order=function(a,r,n){!function e(t){t=a.shift(),a.length?g(t,e):g(t,r,n)}()},g.path=function(e){u=e},g.urlArgs=function(e){n=e},g.ready=function(e,t,a){e=e.push?e:[e];var r=[];return m(e,function(e){d[e]||r.push(e)}),f(e,function(e){return d[e]})?t():(e=e.join("|"),h[e]=h[e]||[],h[e].push(t),a&&a(r)),g},g.done=function(e){g([null],e)},g},e.exports?e.exports=r():void 0!==(a="function"==typeof(r=r)?r.call(t,a,t,e):r)&&(e.exports=a)},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgY2xhc3M9InN2Zy10cmlhbmdsZSIgdmlld0JveCA9IjAgMCAxMDAgMTAwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIj4KICA8cGF0aCBkPSJNIDUwLDAgMTAwLDEwMCAwLDEwMCB6IiBvcGFjaXR5PSIwLjUwIi8+Cjwvc3ZnPgo="},function(t,e){!function(e){t.exports=e}.call(this,{})},function(e,t,a){"use strict";e.exports={forEach:function(e,t){for(var a=0;a<e.length;a++){var r=t(e[a]);if(r)return r}}}},function(e,t,a){"use strict";e=e.exports={};e.isIE=function(e){var t;return!(-1===(t=navigator.userAgent.toLowerCase()).indexOf("msie")&&-1===t.indexOf("trident")&&-1===t.indexOf(" edge/")||e&&e!==function(){for(var e=3,t=document.createElement("div"),a=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",a[0];);return 4<e?e:void 0}())},e.isLegacyOpera=function(){return!!window.opera}},function(e,t,a){"use strict";var r={codecs:a(194),mp4:a(494),flv:a(500),mp2t:a(505),partial:a(506)};r.mp4.tools=a(510),r.flv.tools=a(512),r.mp2t.tools=a(513),e.exports=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getID3Frames=t.utf8ArrayToStr=t.isFooter=t.decodeFrame=t.isHeader=void 0;function l(e,t){var a=(127&e[t])<<21;return(a|=(127&e[t+1])<<14)|(127&e[t+2])<<7|127&e[t+3]}var c,d=a(191),u=t.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},h=t.decodeFrame=function(e){return("PRIV"===e.type?r:"W"===e.type[0]?n:o)(e)},p=t.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},r=function(e){var t,a;if(!(e.size<2))return t=i(e.data,!0),a=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:a.buffer}},n=function(e){var t,a;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(a=i(e.data.subarray(1),!0)).length+1,t=i(e.data.subarray(t)),{key:e.type,info:a,data:t}):(a=i(e.data),{key:e.type,data:a})};var i=t.utf8ArrayToStr=function(e){var t,a,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];c=c||(void 0!==self.TextDecoder?new self.TextDecoder("utf-8"):new d.textDecoder);if(c)return t=c.decode(e),r?-1!==(a=t.indexOf("\0"))?t.substring(0,a):t:t.replace(/\0/g,"");for(var n,i,o,s=e.length,l="",u=0;u<s;){if(0===(n=e[u++])&&r)return l;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:i=e[u++],l+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[u++],o=e[u++],l+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&o)<<0)}}return l},o=function(e){var t,a;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(a=i(e.data.subarray(1),!0)).length+1,t=i(e.data.subarray(t)),{key:e.type,info:a,data:t}):(a=i(e.data.subarray(1)),{key:e.type,data:a})};t.getID3Frames=function(e){for(var t,a=0,r=[];u(e,a);){for(var n=l(e,a+6),i=(a+=10)+n;a+8<i;){s=e.subarray(a),t=o=void 0,o=String.fromCharCode(s[0],s[1],s[2],s[3]),t=l(s,4);var o={type:o,size:t,data:s.subarray(10,10+t)},s=h(o);s&&r.push(s),a+=o.size+10}p(e,a)&&(a+=10)}return r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.textEncoder=(r(i,[{key:"encode",value:function(e){for(var t,a=void 0===e?"":""+String(e),r=0|a.length,n=new Uint8Array(8+(r<<1)|0),i=0,o=0,s=0,l=!Uint8Array,i=0;i<r;i=i+1|0,o=o+1|0)if((s=0|a.charCodeAt(i))<=127)n[o]=s;else{if(s<=2047)n[o]=192|s>>6;else{for(var u=!0;u;){if(55296<=s)if(s<=56319){if(56320<=(t=0|a.charCodeAt(i=i+1|0))&&t<=57343){if(65535<(s=(s<<10)+t-56613888|0)){n[o]=240|s>>18,n[o=o+1|0]=128|s>>12&63,n[o=o+1|0]=128|s>>6&63,n[o=o+1|0]=128|63&s;continue}u=!1;break}s=65533}else s<=57343&&(s=65533);!l&&i<<1<o&&i<<1<(o-7|0)&&(l=!0,(t=new Uint8Array(3*r)).set(n),n=t)}n[o]=224|s>>12,n[o=o+1|0]=128|s>>6&63}n[o=o+1|0]=128|63&s}e=n.subarray(0,o);return null===e?new Uint8Array(0):e}}]),i);function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}},function(e,t,a){a(151),e.exports=a(189)},function(e,t,a){"use strict";a(261),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(76),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(310),a(311),a(312),a(313),a(314),a(315),a(316),a(77),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(339),a(340),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(350),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(126),a(363),a(171),a(364),a(172),a(365),a(366),a(367),a(368),a(173),a(132),a(133),a(177),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(187),a(188),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(89),e.exports=a(16)},function(O,U,e){"use strict";function t(e){var t=C[e]=_(S[x]);return t._k=e,t}function a(e,t){m(e);for(var a,r=H(t=g(t)),n=0,i=r.length;n<i;)L(e,a=r[n++],t[a]);return e}function r(e){var t=te.call(this,e=y(e,!0));return!(this===M&&l(C,e)&&!l(w,e))&&(!(t||!l(this,e)||!l(C,e)||l(this,A)&&this[A][e])||t)}function n(e,t){var a;if(e=g(e),t=y(t,!0),e!==M||!l(C,t)||l(w,t))return!(a=Z(e,t))||!l(C,t)||l(e,A)&&e[A][t]||(a.enumerable=!0),a}function i(e){for(var t,a=J(g(e)),r=[],n=0;a.length>n;)l(C,t=a[n++])||t==A||t==j||r.push(t);return r}function o(e){for(var t,a=e===M,r=J(a?w:g(e)),n=[],i=0;r.length>i;)!l(C,t=r[i++])||a&&!l(M,t)||n.push(C[t]);return n}var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e(3),l=e(23),u=e(10),c=e(0),F=e(20),j=e(43).KEY,d=e(5),h=e(65),p=e(59),V=e(49),f=e(8),$=e(153),G=e(107),H=e(263),W=e(75),m=e(2),z=e(6),K=e(12),g=e(24),y=e(34),v=e(48),_=e(52),q=e(156),Y=e(25),k=e(74),X=e(11),Q=e(50),Z=Y.f,b=X.f,J=q.f,S=s.Symbol,E=s.JSON,T=E&&E.stringify,x="prototype",A=f("_hidden"),ee=f("toPrimitive"),te={}.propertyIsEnumerable,P=h("symbol-registry"),C=h("symbols"),w=h("op-symbols"),M=Object[x],h="function"==typeof S&&!!k.f,I=s.QObject,R=!I||!I[x]||!I[x].findChild,D=u&&d(function(){return 7!=_(b({},"a",{get:function(){return b(this,"a",{value:7}).a}})).a})?function(e,t,a){var r=Z(M,t);r&&delete M[t],b(e,t,a),r&&e!==M&&b(M,t,r)}:b,N=h&&"symbol"==B(S.iterator)?function(e){return"symbol"==(void 0===e?"undefined":B(e))}:function(e){return e instanceof S},L=function(e,t,a){return e===M&&L(w,t,a),m(e),t=y(t,!0),m(a),(l(C,t)?(a.enumerable?(l(e,A)&&e[A][t]&&(e[A][t]=!1),a=_(a,{enumerable:v(0,!1)})):(l(e,A)||b(e,A,v(1,{})),e[A][t]=!0),D):b)(e,t,a)};h||(F((S=function(){if(this instanceof S)throw TypeError("Symbol is not a constructor!");var a=V(0<arguments.length?arguments[0]:void 0);return u&&R&&D(M,a,{configurable:!0,set:function e(t){this===M&&e.call(w,t),l(this,A)&&l(this[A],a)&&(this[A][a]=!1),D(this,a,v(1,t))}}),t(a)})[x],"toString",function(){return this._k}),Y.f=n,X.f=L,e(53).f=q.f=i,e(67).f=r,k.f=o,u&&!e(42)&&F(M,"propertyIsEnumerable",r,!0),$.f=function(e){return t(f(e))}),c(c.G+c.W+c.F*!h,{Symbol:S});for(var ae="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ae.length>re;)f(ae[re++]);for(var ne=Q(f.store),ie=0;ne.length>ie;)G(ne[ie++]);c(c.S+c.F*!h,"Symbol",{for:function(e){return l(P,e+="")?P[e]:P[e]=S(e)},keyFor:function(e){if(!N(e))throw TypeError(e+" is not a symbol!");for(var t in P)if(P[t]===e)return t},useSetter:function(){R=!0},useSimple:function(){R=!1}}),c(c.S+c.F*!h,"Object",{create:function(e,t){return void 0===t?_(e):a(_(e),t)},defineProperty:L,defineProperties:a,getOwnPropertyDescriptor:n,getOwnPropertyNames:i,getOwnPropertySymbols:o});I=d(function(){k.f(1)});c(c.S+c.F*I,"Object",{getOwnPropertySymbols:function(e){return k.f(K(e))}}),E&&c(c.S+c.F*(!h||d(function(){var e=S();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){for(var t,a,r=[e],n=1;n<arguments.length;)r.push(arguments[n++]);if(a=t=r[1],(z(t)||void 0!==e)&&!N(e))return W(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!N(t))return t}),r[1]=t,T.apply(E,r)}}),S[x][ee]||e(19)(S[x],ee,S[x].valueOf),p(S,"Symbol"),p(Math,"Math",!0),p(s.JSON,"JSON",!0)},function(e,t,a){"use strict";e.exports=a(65)("native-function-to-string",Function.toString)},function(e,t,a){"use strict";var s=a(50),l=a(74),u=a(67);e.exports=function(e){var t=s(e),a=l.f;if(a)for(var r,n=a(e),i=u.f,o=0;n.length>o;)i.call(e,r=n[o++])&&t.push(r);return t}},function(e,t,a){"use strict";var r=a(0);r(r.S,"Object",{create:a(52)})},function(e,t,a){"use strict";var r=a(0);r(r.S+r.F*!a(10),"Object",{defineProperty:a(11).f})},function(e,t,a){"use strict";var r=a(0);r(r.S+r.F*!a(10),"Object",{defineProperties:a(155)})},function(e,t,a){"use strict";var r=a(24),n=a(25).f;a(36)("getOwnPropertyDescriptor",function(){return function(e,t){return n(r(e),t)}})},function(e,t,a){"use strict";var r=a(12),n=a(26);a(36)("getPrototypeOf",function(){return function(e){return n(r(e))}})},function(e,t,a){"use strict";var r=a(12),n=a(50);a(36)("keys",function(){return function(e){return n(r(e))}})},function(e,t,a){"use strict";a(36)("getOwnPropertyNames",function(){return a(156).f})},function(e,t,a){"use strict";var r=a(6),n=a(43).onFreeze;a(36)("freeze",function(t){return function(e){return t&&r(e)?t(n(e)):e}})},function(e,t,a){"use strict";var r=a(6),n=a(43).onFreeze;a(36)("seal",function(t){return function(e){return t&&r(e)?t(n(e)):e}})},function(e,t,a){"use strict";var r=a(6),n=a(43).onFreeze;a(36)("preventExtensions",function(t){return function(e){return t&&r(e)?t(n(e)):e}})},function(e,t,a){"use strict";var r=a(6);a(36)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(e,t,a){"use strict";var r=a(6);a(36)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(e,t,a){"use strict";var r=a(6);a(36)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(e,t,a){"use strict";var r=a(0);r(r.S+r.F,"Object",{assign:a(157)})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Object",{is:a(158)})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Object",{setPrototypeOf:a(111).set})},function(e,t,a){"use strict";var r=a(0);r(r.P,"Function",{bind:a(159)})},function(e,t,a){"use strict";var r=a(11).f,n=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in n||a(10)&&r(n,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,a){"use strict";var r=a(6),n=a(26),i=a(8)("hasInstance"),o=Function.prototype;i in o||a(11).f(o,i,{value:function(e){if("function"==typeof this&&r(e)){if(!r(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0}return!1}})},function(e,t,a){"use strict";var r=a(0),a=a(161);r(r.G+r.F*(parseInt!=a),{parseInt:a})},function(e,t,a){"use strict";var r=a(0),a=a(162);r(r.G+r.F*(parseFloat!=a),{parseFloat:a})},function(e,t,a){"use strict";function r(e){if("string"==typeof(t=u(e,!1))&&2<t.length){var t,a,r,n,e=(t=v?t.trim():p(t,3)).charCodeAt(0);if(43===e||45===e){if(88===(a=t.charCodeAt(2))||120===a)return NaN}else if(48===e){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var i,o=t.slice(2),s=0,l=o.length;s<l;s++)if((i=o.charCodeAt(s))<48||n<i)return NaN;return parseInt(o,r)}}return+t}var n=a(3),i=a(23),o=a(31),s=a(113),u=a(34),l=a(5),c=a(53).f,d=a(25).f,h=a(11).f,p=a(61).trim,f="Number",m=k=n[f],g=k.prototype,y=o(a(52)(g))==f,v="trim"in String.prototype;if(!k(" 0o1")||!k("0b1")||k("+0x1")){for(var _,k=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof k&&(y?l(function(){g.valueOf.call(t)}):o(t)!=f)?s(new m(r(e)),t,k):r(e)},b=a(10)?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;b.length>S;S++)i(m,_=b[S])&&!i(k,_)&&h(k,_,d(m,_));(k.prototype=g).constructor=k,a(20)(n,f,k)}},function(e,t,a){"use strict";function o(e,t){for(var a=-1,r=t;++a<6;)p[a]=(r+=e*p[a])%1e7,r=i(r/1e7)}function s(e){for(var t=6,a=0;0<=--t;)p[t]=i((a+=p[t])/e),a=a%e*1e7}function l(){for(var e,t=6,a="";0<=--t;)""===a&&0!==t&&0===p[t]||(e=String(p[t]),a=""===a?e:a+h.call("0",7-e.length)+e);return a}function u(e,t,a){return 0===t?a:t%2==1?u(e,t-1,a*e):u(e*e,t/2,a)}var r=a(0),c=a(32),d=a(163),h=a(114),n=1..toFixed,i=Math.floor,p=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!";r(r.P+r.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!a(5)(function(){n.call({})})),"Number",{toFixed:function(e){var t,a,r=d(this,f),e=c(e),n="",i="0";if(e<0||20<e)throw RangeError(f);if(r!=r)return"NaN";if(r<=-1e21||1e21<=r)return String(r);if(r<0&&(n="-",r=-r),1e-21<r)if(r=(t=function(e){for(var t=0,a=e;4096<=a;)t+=12,a/=4096;for(;2<=a;)t+=1,a/=2;return t}(r*u(2,69,1))-69)<0?r*u(2,-t,1):r/u(2,t,1),r*=4503599627370496,0<(t=52-t)){for(o(0,r),a=e;7<=a;)o(1e7,0),a-=7;for(o(u(10,a,1),0),a=t-1;23<=a;)s(1<<23),a-=23;s(1<<a),o(1,1),s(2),i=l()}else o(0,r),o(1<<-t,0),i=l()+h.call("0",e);return i=0<e?n+((r=i.length)<=e?"0."+h.call("0",e-r)+i:i.slice(0,r-e)+"."+i.slice(r-e)):n+i}})},function(e,t,a){"use strict";var r=a(0),n=a(5),i=a(163),o=1..toPrecision;r(r.P+r.F*(n(function(){return"1"!==o.call(1,void 0)})||!n(function(){o.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,a){"use strict";var r=a(0),n=a(3).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Number",{isInteger:a(164)})},function(e,t,a){"use strict";a=a(0);a(a.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,a){"use strict";var r=a(0),n=a(164),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return n(e)&&i(e)<=9007199254740991}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,a){"use strict";a=a(0);a(a.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,a){"use strict";var r=a(0),a=a(162);r(r.S+r.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(e,t,a){"use strict";var r=a(0),a=a(161);r(r.S+r.F*(Number.parseInt!=a),"Number",{parseInt:a})},function(e,t,a){"use strict";var r=a(0),n=a(165),i=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:n(e-1+i(e-1)*i(e+1))}})},function(e,t,a){"use strict";var a=a(0),r=Math.asinh;a(a.S+a.F*!(r&&0<1/r(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,a){"use strict";var a=a(0),r=Math.atanh;a(a.S+a.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,a){"use strict";var r=a(0),n=a(115);r(r.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,a){"use strict";var a=a(0),r=Math.exp;a(a.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,a){"use strict";var r=a(0),a=a(116);r(r.S+r.F*(a!=Math.expm1),"Math",{expm1:a})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Math",{fround:a(166)})},function(e,t,a){"use strict";var a=a(0),l=Math.abs;a(a.S,"Math",{hypot:function(e,t){for(var a,r,n=0,i=0,o=arguments.length,s=0;i<o;)s<(a=l(arguments[i++]))?(n=n*(r=s/a)*r+1,s=a):n+=0<a?(r=a/s)*r:a;return s===1/0?1/0:s*Math.sqrt(n)}})},function(e,t,a){"use strict";var r=a(0),n=Math.imul;r(r.S+r.F*a(5)(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(e,t){var e=+e,t=+t,a=65535&e,r=65535&t;return 0|a*r+((65535&e>>>16)*r+a*(65535&t>>>16)<<16>>>0)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Math",{log1p:a(165)})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Math",{sign:a(115)})},function(e,t,a){"use strict";var r=a(0),n=a(116),i=Math.exp;r(r.S+r.F*a(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,a){"use strict";var r=a(0),n=a(116),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=n(e=+e),a=n(-e);return t==1/0?1:a==1/0?-1:(t-a)/(i(e)+i(-e))}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,a){"use strict";var r=a(0),i=a(51),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,a=[],r=arguments.length,n=0;n<r;){if(t=+arguments[n++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");a.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return a.join("")}})},function(e,t,a){"use strict";var r=a(0),o=a(24),s=a(9);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),a=s(t.length),r=arguments.length,n=[],i=0;i<a;)n.push(String(t[i++])),i<r&&n.push(String(arguments[i]));return n.join("")}})},function(e,t,a){"use strict";a(61)("trim",function(e){return function(){return e(this,3)}})},function(e,t,a){"use strict";var r=a(0),n=a(78)(!1);r(r.P,"String",{codePointAt:function(e){return n(this,e)}})},function(e,t,a){"use strict";var r=a(0),n=a(9),i=a(119),o="endsWith",s=""[o];r(r.P+r.F*a(120)(o),"String",{endsWith:function(e){var t=i(this,e,o),a=1<arguments.length?arguments[1]:void 0,r=n(t.length),a=void 0===a?r:Math.min(n(a),r),r=String(e);return s?s.call(t,r,a):t.slice(a-r.length,a)===r}})},function(e,t,a){"use strict";var r=a(0),n=a(119);r(r.P+r.F*a(120)("includes"),"String",{includes:function(e){return!!~n(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,a){"use strict";var r=a(0);r(r.P,"String",{repeat:a(114)})},function(e,t,a){"use strict";var r=a(0),n=a(9),i=a(119),o="startsWith",s=""[o];r(r.P+r.F*a(120)(o),"String",{startsWith:function(e){var t=i(this,e,o),a=n(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),e=String(e);return s?s.call(t,e,a):t.slice(a,a+e.length)===e}})},function(e,t,a){"use strict";a(21)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(e,t,a){"use strict";a(21)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,a){"use strict";a(21)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,a){"use strict";a(21)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,a){"use strict";a(21)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,a){"use strict";a(21)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(e,t,a){"use strict";a(21)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(e,t,a){"use strict";a(21)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,a){"use strict";a(21)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(e,t,a){"use strict";a(21)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,a){"use strict";a(21)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,a){"use strict";a(21)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,a){"use strict";a(21)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,a){"use strict";var r=a(0),n=a(12),i=a(34);r(r.P+r.F*a(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=n(this),a=i(t);return"number"!=typeof a||isFinite(a)?t.toISOString():null}})},function(e,t,a){"use strict";var r=a(0),a=a(338);r(r.P+r.F*(Date.prototype.toISOString!==a),"Date",{toISOString:a})},function(e,t,a){"use strict";function r(e){return 9<e?e:"0"+e}var a=a(5),n=Date.prototype.getTime,i=Date.prototype.toISOString;e.exports=a(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!a(function(){i.call(new Date(NaN))})?function(){var e,t,a;if(isFinite(n.call(this)))return e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),(a=e<0?"-":9999<e?"+":"")+("00000"+Math.abs(e)).slice(a?-6:-4)+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+(99<t?t:"0"+r(t))+"Z";throw RangeError("Invalid time value")}:i},function(e,t,a){"use strict";var r=Date.prototype,n="Invalid Date",i=r.toString,o=r.getTime;new Date(NaN)+""!=n&&a(20)(r,"toString",function(){var e=o.call(this);return e==e?i.call(this):n})},function(e,t,a){"use strict";var r=a(8)("toPrimitive"),n=Date.prototype;r in n||a(19)(n,r,a(341))},function(e,t,a){"use strict";var r=a(2),n=a(34);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return n(r(this),"number"!=e)}},function(e,t,a){"use strict";var r=a(0);r(r.S,"Array",{isArray:a(75)})},function(e,t,a){"use strict";var d=a(30),r=a(0),h=a(12),p=a(167),f=a(121),m=a(9),g=a(122),y=a(123);r(r.S+r.F*!a(80)(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,r,n,i=h(e),e="function"==typeof this?this:Array,o=arguments.length,s=1<o?arguments[1]:void 0,l=void 0!==s,u=0,c=y(i);if(l&&(s=d(s,2<o?arguments[2]:void 0,2)),null==c||e==Array&&f(c))for(a=new e(t=m(i.length));u<t;u++)g(a,u,l?s(i[u],u):i[u]);else for(n=c.call(i),a=new e;!(r=n.next()).done;u++)g(a,u,l?p(n,s,[r.value,u],!0):r.value);return a.length=u,a}})},function(e,t,a){"use strict";var r=a(0),n=a(122);r(r.S+r.F*a(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,a=new("function"==typeof this?this:Array)(t);e<t;)n(a,e,arguments[e++]);return a.length=t,a}})},function(e,t,a){"use strict";var r=a(0),n=a(24),i=[].join;r(r.P+r.F*(a(66)!=Object||!a(33)(i)),"Array",{join:function(e){return i.call(n(this),void 0===e?",":e)}})},function(e,t,a){"use strict";var r=a(0),n=a(110),l=a(31),u=a(51),c=a(9),d=[].slice;r(r.P+r.F*a(5)(function(){n&&d.call(n)}),"Array",{slice:function(e,t){var a=c(this.length),r=l(this);if(t=void 0===t?a:t,"Array"==r)return d.call(this,e,t);for(var n=u(e,a),e=u(t,a),i=c(e-n),o=new Array(i),s=0;s<i;s++)o[s]="String"==r?this.charAt(n+s):this[n+s];return o}})},function(e,t,a){"use strict";var r=a(0),n=a(14),i=a(12),o=a(5),s=[].sort,l=[1,2,3];r(r.P+r.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a(33)(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),n(e))}})},function(e,t,a){"use strict";var r=a(0),n=a(37)(0),a=a(33)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(6),n=a(75),i=a(8)("species");e.exports=function(e){var t;return void 0===(t=n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),r(t))&&null===(t=t[i])?void 0:t)?Array:t}},function(e,t,a){"use strict";var r=a(0),n=a(37)(1);r(r.P+r.F*!a(33)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(37)(2);r(r.P+r.F*!a(33)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(37)(3);r(r.P+r.F*!a(33)([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(37)(4);r(r.P+r.F*!a(33)([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(168);r(r.P+r.F*!a(33)([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},function(e,t,a){"use strict";var r=a(0),n=a(168);r(r.P+r.F*!a(33)([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},function(e,t,a){"use strict";var r=a(0),n=a(73)(!1),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!a(33)(i)),"Array",{indexOf:function(e){return o?i.apply(this,arguments)||0:n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(24),i=a(32),o=a(9),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!a(33)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=n(this),a=o(t.length),r=a-1;for((r=1<arguments.length?Math.min(r,i(arguments[1])):r)<0&&(r=a+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,a){"use strict";var r=a(0);r(r.P,"Array",{copyWithin:a(169)}),a(44)("copyWithin")},function(e,t,a){"use strict";var r=a(0);r(r.P,"Array",{fill:a(125)}),a(44)("fill")},function(e,t,a){"use strict";var r=a(0),n=a(37)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),a(44)("find")},function(e,t,a){"use strict";var r=a(0),n=a(37)(6),i="findIndex",o=!0;i in[]&&Array(1)[i](function(){o=!1}),r(r.P+r.F*o,"Array",{findIndex:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),a(44)(i)},function(e,t,a){"use strict";a(54)("Array")},function(e,t,a){"use strict";var r=a(3),i=a(113),n=a(11).f,o=a(53).f,s=a(79),l=a(68),u=f=r.RegExp,c=f.prototype,d=/a/g,h=/a/g,p=new f(d)!==d;if(a(10)&&(!p||a(5)(function(){return h[a(8)("match")]=!1,f(d)!=d||f(h)==h||"/a/i"!=f(d,"i")}))){for(var f=function(e,t){var a=this instanceof f,r=s(e),n=void 0===t;return!a&&r&&e.constructor===f&&n?e:i(p?new u(r&&!n?e.source:e,t):u((r=e instanceof f)?e.source:e,r&&n?l.call(e):t),a?this:c,f)},m=o(u),g=0;m.length>g;)!function(t){t in f||n(f,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})}(m[g++]);(c.constructor=f).prototype=c,a(20)(r,"RegExp",f)}a(54)("RegExp")},function(e,t,a){"use strict";a(172);function r(e){a(20)(RegExp.prototype,s,e,!0)}var n=a(2),i=a(68),o=a(10),s="toString",l=/./[s];a(5)(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?r(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):l.name!=s&&r(function(){return l.call(this)})},function(e,t,a){"use strict";var c=a(2),d=a(9),h=a(128),p=a(81);a(82)("match",1,function(r,n,l,u){return[function(e){var t=r(this),a=null==e?void 0:e[n];return void 0!==a?a.call(e,t):new RegExp(e)[n](String(t))},function(e){var t=u(l,e,this);if(t.done)return t.value;var a=c(e),r=String(this);if(!a.global)return p(a,r);for(var n=a.unicode,i=[],o=a.lastIndex=0;null!==(s=p(a,r));){var s=String(s[0]);""===(i[o]=s)&&(a.lastIndex=h(r,d(a.lastIndex),n)),o++}return 0===o?null:i}]})},function(e,t,a){"use strict";var S=a(2),E=a(12),T=a(9),x=a(32),A=a(128),P=a(81),C=Math.max,w=Math.min,M=Math.floor,I=/\$([$&`']|\d\d?|<[^>]*>)/g,R=/\$([$&`']|\d\d?)/g;a(82)("replace",2,function(n,i,k,b){return[function(e,t){var a=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,a,t):k.call(String(a),e,t)},function(e,t){var a=b(k,e,this,t);if(a.done)return a.value;for(var r,n=S(e),i=String(this),o="function"==typeof t,s=(o||(t=String(t)),n.global),l=(s&&(r=n.unicode,n.lastIndex=0),[]);null!==(p=P(n,i))&&(l.push(p),s);)""===String(p[0])&&(n.lastIndex=A(i,T(n.lastIndex),r));for(var u,c="",d=0,h=0;h<l.length;h++){for(var p=l[h],f=String(p[0]),m=C(w(x(p.index),i.length),0),g=[],y=1;y<p.length;y++)g.push(void 0===(u=p[y])?u:String(u));var v=p.groups,_=o?(_=[f].concat(g,m,i),void 0!==v&&_.push(v),String(t.apply(void 0,_))):function(i,o,s,l,u,e){var c=s+i.length,d=l.length,t=R;void 0!==u&&(u=E(u),t=I);return k.call(e,t,function(e,t){var a;switch(t.charAt(0)){case"$":return"$";case"&":return i;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":a=u[t.slice(1,-1)];break;default:var r,n=+t;if(0==n)return e;if(d<n)return 0!==(r=M(n/10))&&r<=d?void 0===l[r-1]?t.charAt(1):l[r-1]+t.charAt(1):e;a=l[n-1]}return void 0===a?"":a})}(f,i,m,g,v,t);d<=m&&(c+=i.slice(d,m)+_,d=m+f.length)}return c+i.slice(d)}]})},function(e,t,a){"use strict";var s=a(2),l=a(158),u=a(81);a(82)("search",1,function(r,n,i,o){return[function(e){var t=r(this),a=null==e?void 0:e[n];return void 0!==a?a.call(e,t):new RegExp(e)[n](String(t))},function(e){var t,a=o(i,e,this);return a.done?a.value:(a=s(e),e=String(this),t=a.lastIndex,l(t,0)||(a.lastIndex=0),e=u(a,e),l(a.lastIndex,t)||(a.lastIndex=t),null===e?-1:e.index)}]})},function(e,t,a){"use strict";var d=a(79),y=a(2),v=a(69),_=a(128),k=a(9),b=a(81),h=a(127),r=a(5),S=Math.min,p=[].push,o="split",E="length",T="lastIndex",x=4294967295,A=!r(function(){RegExp(x,"y")});a(82)("split",2,function(n,i,f,m){var g="c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[E]||2!="ab"[o](/(?:ab)*/)[E]||4!="."[o](/(.?)(.?)/)[E]||1<"."[o](/()()/)[E]||""[o](/.?/)[E]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!d(e))return f.call(a,e,t);for(var r,n,i,o=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,u=void 0===t?x:t>>>0,c=new RegExp(e.source,s+"g");(r=h.call(c,a))&&!(l<(n=c[T])&&(o.push(a.slice(l,r.index)),1<r[E]&&r.index<a[E]&&p.apply(o,r.slice(1)),i=r[0][E],l=n,u<=o[E]));)c[T]===r.index&&c[T]++;return l===a[E]?!i&&c.test("")||o.push(""):o.push(a.slice(l)),u<o[E]?o.slice(0,u):o}:"0"[o](void 0,0)[E]?function(e,t){return void 0===e&&0===t?[]:f.call(this,e,t)}:f;return[function(e,t){var a=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,a,t):g.call(String(a),e,t)},function(e,t){var a=m(g,e,this,t,g!==f);if(a.done)return a.value;var a=y(e),r=String(this),e=v(a,RegExp),n=a.unicode,i=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(A?"y":"g"),o=new e(A?a:"^(?:"+a.source+")",i),s=void 0===t?x:t>>>0;if(0==s)return[];if(0===r.length)return null===b(o,r)?[r]:[];for(var l=0,u=0,c=[];u<r.length;){o.lastIndex=A?u:0;var d,h=b(o,A?r:r.slice(u));if(null===h||(d=S(k(o.lastIndex+(A?0:u)),r.length))===l)u=_(r,u,n);else{if(c.push(r.slice(l,u)),c.length===s)return c;for(var p=1;p<=h.length-1;p++)if(c.push(h[p]),c.length===s)return c;u=l=d}}return c.push(r.slice(l)),c}]})},function(e,t,a){"use strict";var r=a(178),n=a(58);a(84)("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return r.def(n(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,a){"use strict";var r=a(0),n=a(85),i=a(134),l=a(2),u=a(51),c=a(9),o=a(6),s=a(3).ArrayBuffer,d=a(69),h=i.ArrayBuffer,p=i.DataView,f=n.ABV&&s.isView,m=h.prototype.slice,g=n.VIEW,i="ArrayBuffer";r(r.G+r.W+r.F*(s!==h),{ArrayBuffer:h}),r(r.S+r.F*!n.CONSTR,i,{isView:function(e){return f&&f(e)||o(e)&&g in e}}),r(r.P+r.U+r.F*a(5)(function(){return!new h(2).slice(1,void 0).byteLength}),i,{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(l(this),e);for(var a=l(this).byteLength,r=u(e,a),n=u(void 0===t?a:t,a),e=new(d(this,h))(c(n-r)),i=new p(this),o=new p(e),s=0;r<n;)o.setUint8(s++,i.getUint8(r++));return e}}),a(54)(i)},function(e,t,a){"use strict";var r=a(0);r(r.G+r.W+r.F*!a(85).ABV,{DataView:a(134).DataView})},function(e,t,a){"use strict";a(39)("Int8",1,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Uint8",1,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Uint8",1,function(r){return function(e,t,a){return r(this,e,t,a)}},!0)},function(e,t,a){"use strict";a(39)("Int16",2,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Uint16",2,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Int32",4,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Uint32",4,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Float32",4,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";a(39)("Float64",8,function(r){return function(e,t,a){return r(this,e,t,a)}})},function(e,t,a){"use strict";var r=a(0),n=a(14),i=a(2),o=(a(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!a(5)(function(){o(function(){})}),"Reflect",{apply:function(e,t,a){e=n(e),a=i(a);return o?o(e,t,a):s.call(e,t,a)}})},function(e,t,a){"use strict";var r=a(0),n=a(52),i=a(14),o=a(2),s=a(6),l=a(5),u=a(159),c=(a(3).Reflect||{}).construct,d=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!l(function(){c(function(){})});r(r.S+r.F*(d||h),"Reflect",{construct:function(e,t){i(e),o(t);var a=arguments.length<3?e:i(arguments[2]);if(h&&!d)return c(e,t,a);if(e==a){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}r=a.prototype,a=n(s(r)?r:Object.prototype),r=Function.apply.call(e,a,t);return s(r)?r:a}})},function(e,t,a){"use strict";var r=a(11),n=a(0),i=a(2),o=a(34);n(n.S+n.F*a(5)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,a){i(e),t=o(t,!0),i(a);try{return r.f(e,t,a),!0}catch(e){return!1}}})},function(e,t,a){"use strict";var r=a(0),n=a(25).f,i=a(2);r(r.S,"Reflect",{deleteProperty:function(e,t){var a=n(i(e),t);return!(a&&!a.configurable)&&delete e[t]}})},function(e,t,a){"use strict";function r(e){this._t=i(e),this._i=0;var t,a=this._k=[];for(t in e)a.push(t)}var n=a(0),i=a(2);a(118)(r,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new r(e)}})},function(e,t,a){"use strict";var i=a(25),o=a(26),s=a(23),r=a(0),l=a(6),u=a(2);r(r.S,"Reflect",{get:function e(t,a){var r,n=arguments.length<3?t:arguments[2];return u(t)===n?t[a]:(r=i.f(t,a))?s(r,"value")?r.value:void 0!==r.get?r.get.call(n):void 0:l(r=o(t))?e(r,a,n):void 0}})},function(e,t,a){"use strict";var r=a(25),n=a(0),i=a(2);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,a){"use strict";var r=a(0),n=a(26),i=a(2);r(r.S,"Reflect",{getPrototypeOf:function(e){return n(i(e))}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,a){"use strict";var r=a(0),n=a(2),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return n(e),!i||i(e)}})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Reflect",{ownKeys:a(180)})},function(e,t,a){"use strict";var r=a(0),n=a(2),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){n(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,a){"use strict";var o=a(11),s=a(25),l=a(26),u=a(23),r=a(0),c=a(48),d=a(2),h=a(6);r(r.S,"Reflect",{set:function e(t,a,r){var n=arguments.length<4?t:arguments[3],i=s.f(d(t),a);if(!i){if(h(t=l(t)))return e(t,a,r,n);i=c(0)}if(u(i,"value")){if(!1===i.writable||!h(n))return!1;if(t=s.f(n,a)){if(t.get||t.set||!1===t.writable)return!1;t.value=r,o.f(n,a,t)}else o.f(n,a,c(0,r));return!0}return void 0!==i.set&&(i.set.call(n,r),!0)}})},function(e,t,a){"use strict";var r=a(0),n=a(111);n&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(e){return!1}}})},function(e,t,a){"use strict";var r=a(0),n=a(73)(!0);r(r.P,"Array",{includes:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),a(44)("includes")},function(e,t,a){"use strict";var r=a(0),n=a(181),i=a(12),o=a(9),s=a(14),l=a(124);r(r.P,"Array",{flatMap:function(e){var t,a,r=i(this);return s(e),t=o(r.length),a=l(r,0),n(a,r,r,t,0,1,e,arguments[1]),a}}),a(44)("flatMap")},function(e,t,a){"use strict";var r=a(0),n=a(181),i=a(12),o=a(9),s=a(32),l=a(124);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),a=o(t.length),r=l(t,0);return n(r,t,t,a,0,void 0===e?1:s(e)),r}}),a(44)("flatten")},function(e,t,a){"use strict";var r=a(0),n=a(78)(!0),a=a(5)(function(){return" "!==" ".at(0)});r(r.P+r.F*a,"String",{at:function(e){return n(this,e)}})},function(e,t,a){"use strict";var r=a(0),n=a(182),a=a(83),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*a,"String",{padStart:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,a){"use strict";var r=a(0),n=a(182),a=a(83),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*a,"String",{padEnd:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,a){"use strict";a(61)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,a){"use strict";a(61)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,a){"use strict";function r(e,t){this._r=e,this._s=t}var n=a(0),i=a(35),o=a(9),s=a(79),l=a(68),u=RegExp.prototype;a(118)(r,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){var t,a;if(i(this),s(e))return t=String(this),a="flags"in u?String(e.flags):l.call(e),(a=new RegExp(e.source,~a.indexOf("g")?a:"g"+a)).lastIndex=o(e.lastIndex),new r(a,t);throw TypeError(e+" is not a regexp!")}})},function(e,t,a){"use strict";a(107)("asyncIterator")},function(e,t,a){"use strict";a(107)("observable")},function(e,t,a){"use strict";var r=a(0),l=a(180),u=a(24),c=a(25),d=a(122);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,a,r=u(e),n=c.f,i=l(r),o={},s=0;i.length>s;)void 0!==(a=n(r,t=i[s++]))&&d(o,t,a);return o}})},function(e,t,a){"use strict";var r=a(0),n=a(183)(!1);r(r.S,"Object",{values:function(e){return n(e)}})},function(e,t,a){"use strict";var r=a(0),n=a(183)(!0);r(r.S,"Object",{entries:function(e){return n(e)}})},function(e,t,a){"use strict";var r=a(0),n=a(12),i=a(14),o=a(11);a(10)&&r(r.P+a(86),"Object",{__defineGetter__:function(e,t){o.f(n(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,a){"use strict";var r=a(0),n=a(12),i=a(14),o=a(11);a(10)&&r(r.P+a(86),"Object",{__defineSetter__:function(e,t){o.f(n(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,a){"use strict";var r=a(0),n=a(12),i=a(34),o=a(26),s=a(25).f;a(10)&&r(r.P+a(86),"Object",{__lookupGetter__:function(e){var t,a=n(this),r=i(e,!0);do{if(t=s(a,r))return t.get}while(a=o(a))}})},function(e,t,a){"use strict";var r=a(0),n=a(12),i=a(34),o=a(26),s=a(25).f;a(10)&&r(r.P+a(86),"Object",{__lookupSetter__:function(e){var t,a=n(this),r=i(e,!0);do{if(t=s(a,r))return t.set}while(a=o(a))}})},function(e,t,a){"use strict";var r=a(0);r(r.P+r.R,"Map",{toJSON:a(184)("Map")})},function(e,t,a){"use strict";var r=a(0);r(r.P+r.R,"Set",{toJSON:a(184)("Set")})},function(e,t,a){"use strict";a(87)("Map")},function(e,t,a){"use strict";a(87)("Set")},function(e,t,a){"use strict";a(87)("WeakMap")},function(e,t,a){"use strict";a(87)("WeakSet")},function(e,t,a){"use strict";a(88)("Map")},function(e,t,a){"use strict";a(88)("Set")},function(e,t,a){"use strict";a(88)("WeakMap")},function(e,t,a){"use strict";a(88)("WeakSet")},function(e,t,a){"use strict";var r=a(0);r(r.G,{global:a(3)})},function(e,t,a){"use strict";var r=a(0);r(r.S,"System",{global:a(3)})},function(e,t,a){"use strict";var r=a(0),n=a(31);r(r.S,"Error",{isError:function(e){return"Error"===n(e)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{clamp:function(e,t,a){return Math.min(a,Math.max(t,e))}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,a){"use strict";var a=a(0),r=180/Math.PI;a(a.S,"Math",{degrees:function(e){return e*r}})},function(e,t,a){"use strict";var r=a(0),i=a(186),o=a(166);r(r.S,"Math",{fscale:function(e,t,a,r,n){return o(i(e,t,a,r,n))}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{iaddh:function(e,t,a,r){e>>>=0,a>>>=0;return(t>>>0)+(r>>>0)+((e&a|(e|a)&~(e+a>>>0))>>>31)|0}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{isubh:function(e,t,a,r){e>>>=0,a>>>=0;return(t>>>0)-(r>>>0)-((~e&a|~(e^a)&e-a>>>0)>>>31)|0}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{imulh:function(e,t){var e=+e,t=+t,a=65535&e,r=65535&t,e=e>>16,t=t>>16,r=(e*r>>>0)+(a*r>>>16);return e*t+(r>>16)+((a*t>>>0)+(65535&r)>>16)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,a){"use strict";var a=a(0),r=Math.PI/180;a(a.S,"Math",{radians:function(e){return e*r}})},function(e,t,a){"use strict";var r=a(0);r(r.S,"Math",{scale:a(186)})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{umulh:function(e,t){var e=+e,t=+t,a=65535&e,r=65535&t,e=e>>>16,t=t>>>16,r=(e*r>>>0)+(a*r>>>16);return e*t+(r>>>16)+((a*t>>>0)+(65535&r)>>>16)}})},function(e,t,a){"use strict";a=a(0);a(a.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=r.key,o=r.set;r.exp({defineMetadata:function(e,t,a,r){o(e,t,n(a),i(r))}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=r.key,o=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var a=arguments.length<3?void 0:i(arguments[2]),r=o(n(t),a,!1);return!(void 0===r||!r.delete(e))&&(!!r.size||((e=s.get(t)).delete(a),!!e.size)||s.delete(t))}})},function(e,t,a){"use strict";function r(e,t,a){return s(e,t,a)?l(e,t,a):null!==(t=o(t))?r(e,t,a):void 0}var n=a(40),i=a(2),o=a(26),s=n.has,l=n.get,u=n.key;n.exp({getMetadata:function(e,t){return r(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,a){"use strict";function r(e,t){var a=u(e,t);return null!==(e=l(e))&&(e=r(e,t)).length?a.length?i(new n(a.concat(e))):e:a}var n=a(133),i=a(185),o=a(40),s=a(2),l=a(26),u=o.keys,c=o.key;o.exp({getMetadataKeys:function(e){return r(s(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=r.get,o=r.key;r.exp({getOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=r.keys,o=r.key;r.exp({getOwnMetadataKeys:function(e){return i(n(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,a){"use strict";function r(e,t,a){return!!s(e,t,a)||null!==(t=o(t))&&r(e,t,a)}var n=a(40),i=a(2),o=a(26),s=n.has,l=n.key;n.exp({hasMetadata:function(e,t){return r(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=r.has,o=r.key;r.exp({hasOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,a){"use strict";var r=a(40),n=a(2),i=a(14),o=r.key,s=r.set;r.exp({metadata:function(a,r){return function(e,t){s(a,r,(void 0!==t?n:i)(e),o(t))}}})},function(e,t,a){"use strict";var r=a(0),n=a(130)(),i=a(3).process,o="process"==a(31)(i);r(r.G,{asap:function(e){var t=o&&i.domain;n(t?t.bind(e):e)}})},function(e,t,a){"use strict";function n(e){return null==e?void 0:p(e)}function i(e){var t=e._c;t&&(e._c=void 0,t())}function o(e){return void 0===e._o}function s(e){o(e)||(e._o=void 0,i(e))}function r(t,e){f(t),this._c=void 0,this._o=t,t=new k(this);try{var a=e(t),r=a;null!=a&&("function"==typeof a.unsubscribe?a=function(){r.unsubscribe()}:p(a),this._c=a)}catch(e){return void t.error(e)}o(this)&&i(this)}var l=a(0),u=a(3),c=a(16),d=a(130)(),h=a(8)("observable"),p=a(14),f=a(2),m=a(55),g=a(57),y=a(19),v=a(56),_=v.RETURN,k=(r.prototype=g({},{unsubscribe:function(){s(this)}}),function(e){this._s=e}),b=(k.prototype=g({},{next:function(e){var t=this._s;if(!o(t)){var a=t._o;try{var r=n(a.next);if(r)return r.call(a,e)}catch(e){try{s(t)}finally{throw e}}}},error:function(e){var t=this._s;if(o(t))throw e;var a=t._o;t._o=void 0;try{var r=n(a.error);if(!r)throw e;e=r.call(a,e)}catch(e){try{i(t)}finally{throw e}}return i(t),e},complete:function(e){var t=this._s;if(!o(t)){var a=t._o;t._o=void 0;try{var r=n(a.complete);e=r?r.call(a,e):void 0}catch(e){try{i(t)}finally{throw e}}return i(t),e}}}),function(e){m(this,b,"Observable","_f")._f=p(e)});g(b.prototype,{subscribe:function(e){return new r(e,this._f)},forEach:function(r){var n=this;return new(c.Promise||u.Promise)(function(e,t){p(r);var a=n.subscribe({next:function(e){try{return r(e)}catch(e){t(e),a.unsubscribe()}},error:t,complete:e})})}}),g(b,{from:function(e){var t,a="function"==typeof this?this:b,r=n(f(e)[h]);return r?(t=f(r.call(e))).constructor===a?t:new a(function(e){return t.subscribe(e)}):new a(function(t){var a=!1;return d(function(){if(!a){try{if(v(e,!1,function(e){if(t.next(e),a)return _})===_)return}catch(e){if(a)throw e;return void t.error(e)}t.complete()}}),function(){a=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:b)(function(t){var a=!1;return d(function(){if(!a){for(var e=0;e<r.length;++e)if(t.next(r[e]),a)return;t.complete()}}),function(){a=!0}})}}),y(b.prototype,h,function(){return this}),l(l.G,{Observable:b}),a(54)("Observable")},function(e,t,a){"use strict";function r(n){return function(e,t){var a=2<arguments.length,r=a&&o.call(arguments,2);return n(a?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,t)}}var n=a(3),i=a(0),a=a(83),o=[].slice,a=/MSIE .\./.test(a);i(i.G+i.B+i.F*a,{setTimeout:r(n.setTimeout),setInterval:r(n.setInterval)})},function(e,t,a){"use strict";var r=a(0),a=a(129);r(r.G+r.B,{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,a){"use strict";!function(e,t){var a,l,u,c,d,h,p,r,f,n,i,o,s,m,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function y(e,t,a,r){var n,i,o,s,t=t&&t.prototype instanceof _?t:_,t=Object.create(t.prototype),r=new A(r||[]);return t._invoke=(n=e,i=a,o=r,s=u,function(e,t){if(s===d)throw new Error("Generator is already running");if(s===h){if("throw"===e)throw t;return C()}for(o.method=e,o.arg=t;;){var a=o.delegate;if(a){a=function e(t,a){var r=t.iterator[a.method];if(r===l){if(a.delegate=null,"throw"===a.method){if(t.iterator.return&&(a.method="return",a.arg=l,e(t,a),"throw"===a.method))return p;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}r=v(r,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,p;r=r.arg;if(!r)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,p;{if(!r.done)return r;a[t.resultName]=r.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=l)}a.delegate=null;return p}(a,o);if(a){if(a===p)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===u)throw s=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;a=v(n,i,o);if("normal"===a.type){if(s=o.done?h:c,a.arg!==p)return{value:a.arg,done:o.done}}else"throw"===a.type&&(s=h,o.method="throw",o.arg=a.arg)}}),t}function v(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}function _(){}function k(){}function b(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(i){function o(e,t,a,r){var n,e=v(i[e],i,t);if("throw"!==e.type)return(t=(n=e.arg).value)&&"object"===(void 0===t?"undefined":g(t))&&f.call(t,"__await")?Promise.resolve(t.__await).then(function(e){o("next",e,a,r)},function(e){o("throw",e,a,r)}):Promise.resolve(t).then(function(e){n.value=e,a(n)},r);r(e.arg)}var t;"object"===g(a.process)&&a.process.domain&&(o=a.process.domain.bind(o)),this._invoke=function(a,r){function e(){return new Promise(function(e,t){o(a,r,e,t)})}return t=t?t.then(e,e):e()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t){var a,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return a=-1,(e=function e(){for(;++a<t.length;)if(f.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}return{next:C}}function C(){return{value:l,done:!0}}a="object"===(void 0===e?"undefined":g(e))?e:"object"===("undefined"==typeof window?"undefined":g(window))?window:"object"===("undefined"==typeof self?"undefined":g(self))?self:void 0,e=Object.prototype,f=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag",n="object"===g(t),(m=a.regeneratorRuntime)?n&&(t.exports=m):((m=a.regeneratorRuntime=n?t.exports:{}).wrap=y,u="suspendedStart",c="suspendedYield",d="executing",h="completed",p={},(n={})[i]=function(){return this},(t=(t=Object.getPrototypeOf)&&t(t(P([]))))&&t!==e&&f.call(t,i)&&(n=t),r=b.prototype=_.prototype=Object.create(n),(k.prototype=r.constructor=b).constructor=k,b[s]=k.displayName="GeneratorFunction",m.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},m.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(r),e},m.awrap=function(e){return{__await:e}},S(E.prototype),E.prototype[o]=function(){return this},m.AsyncIterator=E,m.async=function(e,t,a,r){var n=new E(y(e,t,a,r));return m.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},S(r),r[s]="Generator",r[i]=function(){return this},r.toString=function(){return"[object Generator]"},m.keys=function(a){var e,r=[];for(e in a)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in a)return e.value=t,e.done=!1,e}return e.done=!0,e}},m.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&f.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var r=this;function e(e,t){return i.type="throw",i.arg=a,r.next=e,t&&(r.method="next",r.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],i=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var o=f.call(n,"catchLoc"),s=f.call(n,"finallyLoc");if(o&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;0<=a;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&f.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var i=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var a,r,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(a=n.completion).type&&(r=a.arg,x(n)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:P(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=l),p}})}.call(this,a(47),a(135)(e))},function(e,t,a){"use strict";a(453),e.exports=a(16).RegExp.escape},function(e,t,a){"use strict";var r=a(0),n=a(454)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return n(e)}})},function(e,t,a){"use strict";e.exports=function(t,a){var r=a===Object(a)?function(e){return a[e]}:a;return function(e){return String(e).replace(t,r)}}},function(e,n,i){"use strict";!function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new r(a.call(setTimeout,t,arguments),clearTimeout)},n.setInterval=function(){return new r(a.call(setInterval,t,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(t,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(456),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}.call(this,i(47))},function(e,t,a){"use strict";!function(e,t){function i(e){delete l[e]}function o(e){if(u)setTimeout(o,0,e);else{var t=l[e];if(t){u=!0;try{var a=t,r=a.callback,n=a.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(s,n)}}finally{i(e),u=!1}}}}function a(){function e(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(t)&&o(+e.data.slice(t.length))}var t="setImmediate$"+Math.random()+"$";r.addEventListener?r.addEventListener("message",e,!1):r.attachEvent("onmessage",e),d=function(e){r.postMessage(t+e,"*")}}var r,s,n,l,u,c,d,h,p;(r="undefined"==typeof self?void 0===e?void 0:e:self).setImmediate||(n=1,u=!(l={}),c=r.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&e.setTimeout?e:r,"[object process]"==={}.toString.call(r.process)?d=function(e){t.nextTick(function(){o(e)})}:!function(){var e,t;if(r.postMessage&&!r.importScripts)return e=!0,t=r.onmessage,r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}()?d=r.MessageChannel?((p=new MessageChannel).port1.onmessage=function(e){o(e.data)},function(e){p.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(h=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){o(e),t.onreadystatechange=null,h.removeChild(t),t=null},h.appendChild(t)}):function(e){setTimeout(o,0,e)}:a(),e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];return l[n]={callback:e,args:t},d(n),n++},e.clearImmediate=i)}.call(this,a(47),a(457))},function(e,t,a){"use strict";var r,n,e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length)&&p()}function p(){if(!c){for(var e=s(h),t=(c=!0,u.length);t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,a){"use strict";a(76),a(77),a(89),a(132),e.exports=a(16).Map},function(e,t,a){"use strict";a(76),a(77),a(89),a(133),e.exports=a(16).Set},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SSAIMediaTailorParser=void 0;var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(71);function o(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,o){return function t(e,a){try{var r=s[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}var s,l;t.SSAIMediaTailorParser=(r(u,[{key:"_getSessionInfo",value:(l=o(regeneratorRuntime.mark(function e(n,i,o){var s,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=this,e.abrupt("return",new Promise(function(a,r){var e=JSON.stringify({adsParam:o}),t=new XMLHttpRequest;t.open("POST",n+i),l._logger.log("Making XMLHttpRequest POST request for ",n+i),t.setRequestHeader("Content-Type","application/json"),t.onloadend=function(e){var t,e=JSON.parse(e.target.responseText);s._logger.log("[TEST] XMLHttpRequest response",e),void 0!==e.manifestUrl?(s._manifestURL=n+e.manifestUrl,s._logger.log("XMLHttpRequest new manifestURL: ",s._manifestURL),(t=new XMLHttpRequest).open("GET",s._manifestURL),t.onloadend=function(){s._logger.log("[TEST] FETCHED MEDIA TAILOR MPD"),a()},t.onerror=function(e){s._logger.error("[TEST] XMLHttpRequest onerror",e),r()},t.send()):s._logger.error("response.manifestUrl is undefined"),void 0!==e.trackingUrl?(s._adsTrackingURL=n+e.trackingUrl,s._logger.log("Fetched ads tracking URL from MediaTailor: ",s._adsTrackingURL)):s._logger.error("The ads tracking URL retrieved by MediaTailor is undefined.")},t.onerror=function(e){s._logger.error("Error while doing the request to MediaTailor. Data: ",e),r()},t.send(e)}));case 2:case"end":return e.stop()}},e,this)})),function(e,t,a){return l.apply(this,arguments)})},{key:"getManifestUrl",value:function(){return this._manifestURL}},{key:"getAdsTrackingURL",value:function(){return this._adsTrackingURL}},{key:"init",value:(s=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this._getSessionInfo(this._ssaiMediaTailor.baseURL,this._ssaiMediaTailor.playbackURL,this._ssaiMediaTailor.adsParams).then(function(){}).catch(function(){t._logger.log("Couldn't initialize session with AWS Media Tailor")});case 3:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getAdsTrackingInfo",value:function(){var r;if(""!==this._adsTrackingURL)return r=this,new Promise(function(t,a){r._logger.log("Making the request for the ads tracking URL.");var e=new XMLHttpRequest;e.open("GET",r._adsTrackingURL),e.onloadend=function(e){e=JSON.parse(e.target.responseText);r._logger.log("Received XMLHttpRequest response",e),0<e.avails.length||0<e.nonLinearAvails.length||null!==e.nextToken?t(e):a("Missing ads information in the response")},e.onerror=function(e){r._logger.error("Error while doing the request to the ads tracking URL. Data: ",e),a()},e.send()})}}]),u);function u(e){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._manifestURL="",this._adsTrackingURL="",this._ssaiMediaTailor=e,this._logger=new i.Logger}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SSAIMediaTailorController=void 0;var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=a(71);t.SSAIMediaTailorController=(r(d,[{key:"_listenForEvents",value:function(e){for(var t=0;t<e.length;t++)this._div.addEventListener(e[t][0],e[t][1]);var a=new CustomEvent("adpodsinfo",{adPodsInfo:this._adBreaks});this._div.dispatchEvent(a),setInterval(function(){for(var e,t=0;t<this._adBreaks.length;t++)Math.round(this._adBreaks[t].timeOffset)<=Math.round(this._videoElement.currentTime)&&Math.round(this._videoElement.currentTime)<=Math.round(this._adBreaks[t].timeOffset+this._adsTrackingInfo.avails[t].durationInSeconds-1)&&1==this._adBreaks[t].executed&&this._adsSeek(Math.round(this._adsTrackingInfo.avails[t].durationInSeconds+this._adBreaks[t].timeOffset+1));this._isAdOnStage&&this._sendAdImpression&&(this._isAdPlaying=!0,this._sendAdImpression=!1,this._makeBeaconsRequests("impression"),e=new CustomEvent("adimpression",{}),this._div.dispatchEvent(e)),this._isAdOnStage&&(this._firstQuartile=this._trackingEvents[this._adBreakIndex][this._currentAdPod].get("firstQuartile"),this._midpoint=this._trackingEvents[this._adBreakIndex][this._currentAdPod].get("midpoint"),this._thirdQuartile=this._trackingEvents[this._adBreakIndex][this._currentAdPod].get("thirdQuartile"),null!==this._firstQuartile&&!this._areQuartilesSent[0]&&void 0!==this._firstQuartile.startTimeInSeconds&&this._videoElement.currentTime>=this._firstQuartile.startTimeInSeconds&&(this._areQuartilesSent[0]=!0,e=new CustomEvent("adfirstquartile",{quartileTime:this._firstQuartile.startTimeInSeconds}),this._div.dispatchEvent(e),this._makeBeaconsRequests("firstQuartile")),null!==this._midpoint&&!this._areQuartilesSent[1]&&void 0!==this._midpoint.startTimeInSeconds&&this._videoElement.currentTime>=this._midpoint.startTimeInSeconds&&(this._areQuartilesSent[1]=!0,e=new CustomEvent("admidpoint",{quartileTime:this._midpoint.startTimeInSeconds}),this._div.dispatchEvent(e),this._makeBeaconsRequests("midpoint")),null!==this._thirdQuartile)&&!this._areQuartilesSent[2]&&void 0!==this._thirdQuartile.startTimeInSeconds&&this._videoElement.currentTime>=this._thirdQuartile.startTimeInSeconds&&(this._areQuartilesSent[2]=!0,e=new CustomEvent("adthirdquartile",{quartileTime:this._thirdQuartile.startTimeInSeconds}),this._div.dispatchEvent(e),this._makeBeaconsRequests("thirdQuartile")),this._isAdBlockStarted&&void 0!==this._adsTrackingInfo.avails[this._adBreakIndex]&&this._currentAdPod===this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&(this._setVolume(this._stateVolume),this._isAdBlockStarted=!1,this._adBreaks[this._adBreakIndex].executed=!0,this._adBreakIndex++,e=new CustomEvent("adblockend",{}),this._div.dispatchEvent(e)),this._manageAdBreaks(this._videoElement.currentTime)},500),this._videoElement.addEventListener("play",function(e){this._isAdOnStage&&!this._isAdPlaying&&(e=new CustomEvent("adresumed",{}),this._div.dispatchEvent(e),this._makeBeaconsRequests("resume")),this._isAdPlaying=!0}),this._videoElement.addEventListener("pause",function(e){this._isAdOnStage&&this._isAdPlaying&&(e=new CustomEvent("adpaused",{}),this._div.dispatchEvent(e),this._makeBeaconsRequests("pause")),this._isAdPlaying=!1})}},{key:"_executeCallbacks",value:function(t){var e;this._callbacks.has(t.type)&&void 0!==(e=this._callbacks.get(t.type))&&e.forEach(function(e){e(t)})}},{key:"_replaceMacros",value:function(e,t,a){var r=/\[CACHEBUSTING\]/gi,r=(r.test(e)&&(e=e.replace(r,generateCacheBusting())),/\[ERRORCODE\]/gi),r=(void 0!==t&&r.test(e)&&0<t&&t<1e3&&(e=e.replace(r,t.toString())),/\[CONTENTPLAYHEAD\]/gi),r=(r.test(e)&&-1<this._contentCurrentTime&&(t=vastReadableTime(this._contentCurrentTime),e=e.replace(r,RFC3986EncodeURIComponent(t))),/\[ASSETURI\]/gi);return e=r.test(e)&&"string"==typeof a&&""!==a?e.replace(r,RFC3986EncodeURIComponent(a)):e}},{key:"_makeTrackingRequest",value:function(e,t){this._logger.log("Making the request for the tracking URL ",e);var a=this._replaceMacros(e,t),r=this,n=new Image;n.addEventListener("load",function(){r._logger.log("Ads tracker successfully loaded "+a),n=null}),n.addEventListener("error",function(e){r._logger.warn("Ads tracker failed loading "+a),n=null}),n.src=a}},{key:"_manageAdBreaks",value:function(e){this._adBreakIndex<this._adBreaks.length&&Math.floor(e)>=Math.floor(this._adBreaks[this._adBreakIndex].timeOffset)&&!this._adBreaks[this._adBreakIndex].executed&&(this._isAdBlockStarted?this._isAdOnStage?this._isAdPodCompleted(this._videoElement.currentTime):this._isAdPodStarted(this._videoElement.currentTime):(this._currentAdPod=0,this._stateVolume=this._videoElement.volume,e=new CustomEvent("adblockstart",{adPodsNumber:this._adsTrackingInfo.avails[this._adBreakIndex].ads.length}),this._div.dispatchEvent(e),this._isAdBlockStarted=!0))}},{key:"_isAdPodStarted",value:function(e){var t;null!=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod]&&(t=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds,this._adBreakIndex<this._adsTrackingInfo.avails.length)&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&t<=e&&(this._isAdOnStage=!0,this._isAdPlaying=!0,this._sendAdImpression=!0,t=new CustomEvent("adstarted",{currentAdPod:this._currentAdPod}),this._div.dispatchEvent(t),this._makeBeaconsRequests("start"))}},{key:"_isAdPodCompleted",value:function(e){var t=this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds+this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds;this._adBreakIndex<this._adsTrackingInfo.avails.length&&this._currentAdPod<this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&t<=e&&(this._logger.log("The current ad pod "+this._currentAdPod+" is finished."),this._areQuartilesSent.fill(!1),this._currentAdPod++,this._isAdOnStage=!1,this._currentAdPod===this._adsTrackingInfo.avails[this._adBreakIndex].ads.length&&(this._isAdPlaying=!1),t=new CustomEvent("adcomplete",{}),this._div.dispatchEvent(t),e=new CustomEvent("addestroyed",{}),this._div.dispatchEvent(e),this._makeBeaconsRequests("complete"))}},{key:"_findTrackingEvent",value:function(e){var t=void 0;return null!=this._trackingEvents[this._adBreakIndex][this._currentAdPod]&&(t=this._trackingEvents[this._adBreakIndex][this._currentAdPod].get(e)),this._logger.log("Found tracking event for "+e+"."),this._logger.log("Data for the tracking event is ",t),void 0!==t?t:null}},{key:"_makeBeaconsRequests",value:function(e){var t=this._findTrackingEvent(e);if(null!==t)for(var a=0;a<t.beaconUrls.length;)this._makeTrackingRequest(t.beaconUrls[a]),a++;else this._logger.warn("There is no tracking event object for the event type ",e)}},{key:"init",value:function(e){"SSAI"===e&&(e=new CustomEvent("initSSAI",{}),this._div.dispatchEvent(e));var t=this;this._div.addEventListener("playerinitialized",function(){t._checkSkippedAdsByResumedPosition(t._videoElement.currentTime)}),this._isPlayerInitialized=!0,void 0!==this._initEvent&&this._listenForEvents(this._initEvent),this._setAdsManager()}},{key:"_adsSeek",value:function(e){this._videoElement.currentTime=e}},{key:"_checkSkippedAdsByResumedPosition",value:function(e){if(this._logger.log("Checking whether there are skipped ads by the selected resume position ",e),void 0!==e&&0<e&&0<this._numAdBreaks)for(var t=!1,a=0;!t&&a<this._numAdBreaks;)e<this._adsTrackingInfo.avails[a].startTimeInSeconds?t=!0:this._adBreaks[a].executed||(this._adBreaks[a].executed=!0,this._adBreakIndex++,this._logger.log("Skipped ad at ",this._adBreaks[a].timeOffset)),a++}},{key:"_getAdCurrentTime",value:function(){var e,t;return this._isAdBlockStarted&&this._adsTrackingInfo.avails[this._adBreakIndex]&&this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod]&&0<=(t=(e=1e3*this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds)<(t=Math.floor(1e3*this._videoElement.currentTime-1e3*this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].startTimeInSeconds))?e:t)?t:void 0}},{key:"_getAdDescription",value:function(){return""}},{key:"_getAdDuration",value:function(){if(this._isAdBlockStarted&&this._adsTrackingInfo.avails[this._adBreakIndex]&&this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod])return 1e3*this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].durationInSeconds}},{key:"_getAdPaused",value:function(){return this._isAdBlockStarted?!this._isAdPlaying:void 0}},{key:"_getAdRemainingTime",value:function(){return this._isAdBlockStarted?this._getAdDuration()-this._getAdCurrentTime():void 0}},{key:"_getAdTitle",value:function(){if(this._isAdBlockStarted&&this._adsTrackingInfo.avails[this._adBreakIndex]&&this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod])return this._adsTrackingInfo.avails[this._adBreakIndex].ads[this._currentAdPod].adTitle}},{key:"_getIsSkippableAd",value:function(){return!1}},{key:"_getMute",value:function(){return 0===this._videoElement.volume}},{key:"_getVolume",value:function(){return this._videoElement.volume}},{key:"_setMute",value:function(){var e;this._isAdBlockStarted?(this._setVolume(0),e=new CustomEvent("advolumemuted",{}),this._div.dispatchEvent(e)):console.warn("No ad is playing")}},{key:"_setVolume",value:function(e){var t;this._isAdBlockStarted?(e=new CustomEvent("changevolume",{detail:{value:e}}),this._div.dispatchEvent(e),0==this._getVolume()?(t=new CustomEvent("advolumechanged",{}),this._div.dispatchEvent(t),this._makeBeaconsRequests("mute")):this._getVolume()<=1&&0<=this._getVolume&&(t=new CustomEvent("advolumechanged",{}),this._div.dispatchEvent(t),this._makeBeaconsRequests("unmute"))):console.warn("No ad is playing")}},{key:"skip",value:function(){this._logger.warn("Method not implemented.")}},{key:"checkInitialAds",value:function(){this._logger.warn("Method not implemented.")}},{key:"_setAdsManager",value:function(){var t=this;this._adsManager.getAdCurrentTime=function(){return t._getAdCurrentTime()},this._adsManager.getAdDescription=function(){return t._getAdDescription()},this._adsManager.getAdDuration=function(){return t._getAdDuration()},this._adsManager.getAdPaused=function(){return t._getAdPaused()},this._adsManager.getAdRemainingTime=function(){return t._getAdRemainingTime()},this._adsManager.getAdTitle=function(){return t._getAdTitle()},this._adsManager.getIsSkippableAd=function(){return t._getIsSkippableAd()},this._adsManager.getMute=function(){return t._getMute()},this._adsManager.getVolume=function(){return t._getVolume()},this._adsManager.setMute=function(){return t._setMute()},this._adsManager.setVolume=function(e){return t._setVolume(e)},this._adsManager.destroy=function(){return t.destroy()},this._adsManager.pause=function(){if(t._isAdBlockStarted)return t._videoElement.pause();console.error("This method cannot be used because no ads are being played.")},this._adsManager.play=function(){if(t._isAdBlockStarted)return t._videoElement.play();console.error("This method cannot be used because no ads are being played.")}}},{key:"_getAdsManager",value:function(){return this._adsManager}},{key:"destroy",value:function(){_adsTrackingInfo=void 0,_adBreaks=[],_trackingEvents=[],_numAdBreaks=void 0,_firstQuartile=null,_midpoint=null,_thirdQuartile=null,_contentCurrentTime=0,_adBreakIndex=0,_currentAdPod=0,_seekTime=-1,_isPlayerInitialized=!1,_isAdBlockStarted=!1,_isAdOnStage=!1,_isAdPlaying=!1,_sendAdImpression=!1,_areQuartilesSent=void 0,_videoEngine=null,_div=void 0,_videoElement=void 0,_initEvent=void 0,_arrayFirstQuartile=[],_arrayMidpoint=[],_cuePoints=[],_adsManager={},_stateVolume=0,_mutedAtStart=!1,_mutedAd=!1,_logger=new c.Logger}}]),d);function d(e,t,a,r,n,i){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._adsTrackingInfo=void 0,this._adBreaks=[],this._trackingEvents=[],this._numAdBreaks=void 0,this._firstQuartile=null,this._midpoint=null,this._thirdQuartile=null,this._contentCurrentTime=0,this._adBreakIndex=0,this._currentAdPod=0,this._seekTime=-1,this._isPlayerInitialized=!1,this._isAdBlockStarted=!1,this._isAdOnStage=!1,this._isAdPlaying=!1,this._sendAdImpression=!1,this._areQuartilesSent=void 0,this._videoEngine=null,this._div=void 0,this._videoElement=void 0,this._initEvent=void 0,this._arrayFirstQuartile=[],this._arrayMidpoint=[],this._cuePoints=[],this._adsManager={},this._stateVolume=0,this._mutedAtStart=!1,this._mutedAd=!1,this._logger=new c.Logger,this._adsTrackingInfo=e,this._numAdBreaks=this._adsTrackingInfo.avails.length,this._areQuartilesSent=new Array(3).fill(!1),this._div=r,this._videoElement=n,this._initEvent=t.concat(a),this._mutedAtStart=i;for(var o=0;o<this._numAdBreaks;o++){var s={executed:!1};s.timeOffset=this._adsTrackingInfo.avails[o].startTimeInSeconds,s.allowMultipleAds="true",s.uri="",s.vastAdData=null,this._adBreaks.push(s),this._trackingEvents.push([]);for(var l=0;l<this._adsTrackingInfo.avails[o].ads.length;l++){var u=this;this._trackingEvents[o].push(this._adsTrackingInfo.avails[o].ads[l].trackingEvents.reduce(function(e,t){return e.has(t.eventType)&&u._logger.log("[TEST] repeated tracking event for this ad pod: ",t.eventType),e.set(t.eventType,t),e},new Map))}}this._logger.log("The ads tracking events from MediaTailor are ",this._trackingEvents);this._adsTrackingInfo.avails.sort(function(e,t){return e.startTimeInSeconds<t.startTimeInSeconds?-1:e.startTimeInSeconds>t.startTimeInSeconds?1:0}),this._logger.log("Array of avails sortered: ",this._adsTrackingInfo.avails);for(o=0;o<this._adsTrackingInfo.avails.length;o++)this._cuePoints[o]=this._adsTrackingInfo.avails[o].startTimeInSeconds;e=new CustomEvent("cuePointsReady",{detail:this._cuePoints});this._div.dispatchEvent(e),this._callbacks=new Map}},function(e,t,a){"use strict";var r,n,x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,i),t.l=!0,t)).exports}window.webOS=(r=[function(e){e.exports=JSON.parse('{"name":"webostv-js","version":"1.2.4","description":"","main":"index.js","scripts":{"belazy":"npm run lint && npm run docs && npm run release","build":"node scripts/build.js","build:dev":"node scripts/build.js develop","clean":"git clean -xdf","docs":"jsdoc -c jsdoc.json","lint":"eslint . --cache","release":"node scripts/release.js","test":"node scripts/test.js app","test:mocha":"node scripts/test.js mocha"},"repository":{"type":"git","url":"http://mod.lge.com/hub/tvsdk/webostv-js.git"},"keywords":[],"author":"LGE TV Lab","license":"Apache-2.0","dependencies":{"address":"^1.0.3","archiver":"^4.0.1","chalk":"^2.4.1","command-exists":"^1.2.7","fs-extra":"^8.1.0","jsdoc":"^3.5.5","webpack":"^4.10.1","webpack-dev-server":"^3.1.4","webpack-merge":"^4.1.2"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.2","@babel/polyfill":"^7.10.1","@babel/preset-env":"^7.10.2","babel-loader":"^8.1.0","eslint":"^4.19.1","eslint-config-airbnb-base":"^12.1.0","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.12.0","html-webpack-plugin":"^4.3.0","mocha":"^5.2.0","mocha-loader":"^1.1.3"}}')},function(e,t,a){a.r(t),a.d(t,"deviceInfo",function(){return b}),a.d(t,"fetchAppId",function(){return n}),a.d(t,"fetchAppInfo",function(){return r}),a.d(t,"fetchAppRootPath",function(){return o}),a.d(t,"keyboard",function(){return S}),a.d(t,"libVersion",function(){return T}),a.d(t,"platformBack",function(){return s}),a.d(t,"platform",function(){return _}),a.d(t,"service",function(){return p}),a.d(t,"systemInfo",function(){return E});var n=function(){return window.PalmSystem&&window.PalmSystem.identifier?window.PalmSystem.identifier.split(" ")[0]:""},i={},r=function(a,e){if(0===Object.keys(i).length){var t,r=function(e,t){if(!e&&t)try{i=JSON.parse(t),a&&a(i)}catch(e){console.error("Unable to parse appinfo.json file for",n()),a&&a()}else a&&a()};(t=new window.XMLHttpRequest).onreadystatechange=function(){4===t.readyState&&(200<=t.status&&t.status<300||0===t.status?r(null,t.responseText):r({status:404}))};try{t.open("GET",e||"appinfo.json",!0),t.send(null)}catch(a){r({status:404})}}else a&&a(i)},o=function(){var e=window.location.href,t=("baseURI"in window.document?e=window.document.baseURI:0<(t=window.document.getElementsByTagName("base")).length&&(e=t[0].href),e.match(new RegExp(".*://[^#]*/")));return t?t[0]:""},s=function(){if(window.PalmSystem&&window.PalmSystem.platformBack)return window.PalmSystem.platformBack()};function l(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function u(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){var t,a;t=r,a=n[e=e],e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function c(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d={},h=(c(f.prototype,[{key:"send",value:function(e){var t=e.service,t=void 0===t?"":t,a=e.method,a=void 0===a?"":a,r=e.parameters,r=void 0===r?{}:r,n=e.onSuccess,n=void 0===n?function(){}:n,i=e.onFailure,i=void 0===i?function(){}:i,o=e.onComplete,o=void 0===o?function(){}:o,e=e.subscribe,e=void 0!==e&&e;return window.PalmServiceBridge?(this.ts&&d[this.ts]&&delete d[this.ts],r=u({},r),this.subscribe=e,this.subscribe&&(r.subscribe=this.subscribe),r.subscribe&&(this.subscribe=r.subscribe),this.ts=Date.now(),(d[this.ts]=this).bridge=new PalmServiceBridge,this.bridge.onservicecallback=this.callback.bind(this,n,i,o),this.bridge.call(("/"!==(e=t).slice(-1)&&(e+="/"),e+a),JSON.stringify(r))):(i(n={errorCode:-1,errorText:"PalmServiceBridge is not found.",returnValue:!1}),o(n),console.error("PalmServiceBridge is not found.")),this}},{key:"callback",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";if(!this.cancelled){var n={};try{n=JSON.parse(r)}catch(e){n={errorCode:-1,errorText:r,returnValue:!1}}var r=n,i=r.errorCode,r=r.returnValue;(i||!1===r?(n.returnValue=!1,t):(n.returnValue=!0,e))(n),a(n),this.subscribe||this.cancel()}}},{key:"cancel",value:function(){this.cancelled=!0,null!==this.bridge&&(this.bridge.cancel(),this.bridge=null),this.ts&&d[this.ts]&&delete d[this.ts]}}]),f),p={request:function(){var e=u({service:0<arguments.length&&void 0!==arguments[0]?arguments[0]:""},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return(new h).send(e)}};function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.bridge=null,this.cancelled=!1,this.subscribe=!1}function m(e){return(m="function"==typeof Symbol&&"symbol"==x(Symbol.iterator)?function(e){return void 0===e?"undefined":x(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":x(e)})(e)}t={};if("object"===("undefined"==typeof window?"undefined":m(window))&&window.PalmSystem){if(-1<window.navigator.userAgent.indexOf("SmartWatch"))t.watch=!0;else if(-1<window.navigator.userAgent.indexOf("SmartTV")||-1<window.navigator.userAgent.indexOf("Large Screen"))t.tv=!0;else{try{var g,y,v=JSON.parse(window.PalmSystem.deviceInfo||"{}");v.platformVersionMajor&&v.platformVersionMinor&&(g=Number(v.platformVersionMajor),y=Number(v.platformVersionMinor),g<3||3===g&&y<=0?t.legacy=!0:t.open=!0)}catch(e){t.open=!0}window.Mojo=window.Mojo||{relaunch:function(){}},window.PalmSystem.stageReady&&window.PalmSystem.stageReady()}-1<window.navigator.userAgent.indexOf("Chr0me")||-1<window.navigator.userAgent.indexOf("Chrome")?(v=-1<window.navigator.userAgent.indexOf("Chr0me")?window.navigator.userAgent.indexOf("Chr0me"):window.navigator.userAgent.indexOf("Chrome"),g=window.navigator.userAgent.slice(v).indexOf(" "),y=window.navigator.userAgent.slice(v+7,v+g).split("."),t.chrome=Number(y[0])):t.chrome=0}else t.unknown=!0;var _=t,k={},b=function(n){if(0===Object.keys(k).length){try{var e=JSON.parse(window.PalmSystem.deviceInfo);k.modelName=e.modelName,k.version=e.platformVersion,k.versionMajor=e.platformVersionMajor,k.versionMinor=e.platformVersionMinor,k.versionDot=e.platformVersionDot,k.sdkVersion=e.platformVersion,k.screenWidth=e.screenWidth,k.screenHeight=e.screenHeight}catch(n){k.modelName="webOS Device"}k.screenHeight=k.screenHeight||window.screen.height,k.screenWidth=k.screenWidth||window.screen.width,_.tv&&(k.uhd=!1,k.uhd8K=!1,k.hdr10=!1,k.dolbyVision=!1,k.dolbyAtmos=!1,(new h).send({service:"luna://com.webos.service.config",method:"getConfigs",parameters:{configNames:["tv.model.modelname","tv.nyx.platformVersion","tv.nyx.firmwareVersion","tv.hw.panelResolution","tv.hw.displayType","tv.hw.ddrSize","tv.model.supportHDR","tv.config.supportDolbyHDRContents","tv.config.supportDolbyTVATMOS","tv.model.supportTemp8K"]},onComplete:function(e){if(e.configs&&(k.modelName=e.configs["tv.model.modelname"]||k.modelName,k.sdkVersion=e.configs["tv.nyx.platformVersion"]||k.sdkVersion,k.uhd="UD"===e.configs["tv.hw.panelResolution"]||"8K"===e.configs["tv.hw.panelResolution"],k.uhd8K="8K"===e.configs["tv.hw.panelResolution"]||!0===e.configs["tv.model.supportTemp8K"],k.oled="OLED"===e.configs["tv.hw.displayType"],k.ddrSize=e.configs["tv.hw.ddrSize"],k.hdr10=!0===e.configs["tv.model.supportHDR"],k.dolbyVision=!0===e.configs["tv.config.supportDolbyHDRContents"],k.dolbyAtmos=!0===e.configs["tv.config.supportDolbyTVATMOS"],e.configs["tv.nyx.firmwareVersion"]&&"0.0.0"!==e.configs["tv.nyx.firmwareVersion"]||(e.configs["tv.nyx.firmwareVersion"]=e.configs["tv.nyx.platformVersion"]),e.configs["tv.nyx.firmwareVersion"])){k.version=e.configs["tv.nyx.firmwareVersion"];for(var t=k.version.split("."),a=["versionMajor","versionMinor","versionDot"],r=0;r<a.length;r+=1)try{k[a[r]]=parseInt(t[r],10)}catch(e){k[a[r]]=t[r]}}e.returnValue&&!e.missingConfigs||e.missingConfigs&&1===e.missingConfigs.length&&"tv.model.supportTemp8K"===e.missingConfigs[0]?n(k):(new h).send({service:"luna://com.webos.service.tv.systemproperty",method:"getSystemInfo",parameters:{keys:["firmwareVersion","modelName","sdkVersion","UHD","OLED","ddrSize"]},onComplete:function(e){if(k.modelName=e.modelName||k.modelName,k.sdkVersion=e.sdkVersion||k.sdkVersion,k.uhd=e.UHD?"true"===e.UHD:k.uhd,k.oled=e.OLED?"true"===e.OLED:k.oled,k.ddrSize=e.ddrSize||k.ddrSize,e.firmwareVersion&&"0.0.0"!==e.firmwareVersion||(e.firmwareVersion=e.sdkVersion),e.firmwareVersion){k.version=e.firmwareVersion;for(var t=k.version.split("."),a=["versionMajor","versionMinor","versionDot"],r=0;r<a.length;r+=1)try{k[a[r]]=parseInt(t[r],10)}catch(e){k[a[r]]=t[r]}}n(k)}})}}))}else n(k)},S={isShowing:function(){return PalmSystem&&PalmSystem.isKeyboardVisible}},E=function(){var e,t={};return window.PalmSystem&&(window.PalmSystem.country&&(e=JSON.parse(window.PalmSystem.country),t.country=e.country,t.smartServiceCountry=e.smartServiceCountry),window.PalmSystem.timeZone)&&(t.timezone=window.PalmSystem.timeZone),t},T=a(0).version}],n={},i.m=r,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":x(t))&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1))},function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e};function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.NexDAIController=(n(s,[{key:"init",value:function(){var e=this,a=this;return this._videoElement.addEventListener("canplay",function(){var e=0;if(a._resumePosition)for(;e<a._cuePoints.length;e++)a._resumePosition>=Math.round(a._cuePoints[e].start)&&a._resumePosition<=Math.round(a._cuePoints[e].end)&&(a._currentAdBlock=e,a._videoElement.currentTime=a._cuePoints[e].start-1)},{once:!0}),this._videoElement.addEventListener("timeupdate",function(){var e=a._adBlockPlayed.find(function(e){return Math.round(e.start)===Math.round(a._videoElement.currentTime)});null!=a._adBlockPlayed&&null!=a._adBlockPlayed&&null!=e&&e.played&&a._videoElement.currentTime.toFixed(2)>(e.start-.5).toFixed(2)&&a._videoElement.currentTime.toFixed(2)<e.end.toFixed(2)&&(a._videoElement.currentTime=e.end)}),new Promise(function(t){e._streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED],function(e){this._url=e.getStreamData().url,this._url.includes(".m3u8")&&this._videoElement?this._videoElement.textTracks.addEventListener("addtrack",function(e){e=e.track;"metadata"===e.kind&&(e.mode="hidden",e.oncuechange=function(e){({})[e.detail.payload.key]=e.detail.payload.data,a._streamManager.processMetadata("ID3",e.detail.payload.data,e.detail.startTime)})}):this._url.includes(".mpd")&&this._div&&this._div.addEventListener("metadatas",function(e){a._streamManager.processMetadata("urn:google:dai:2018",e.detail.mediaId,e.detail.pts)}),t(this._url)},!1,e),e._getCurrentAd(),e._getCurrentAdBreak(),e._streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.SKIPPED,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED],e._onStreamEvent,!1,e),e._setAdsManager(),e._daiConfig.ASSET_KEY?(e._requestLiveStream(e._daiConfig.ASSET_KEY,void 0),e._islive=!0):(e._requestVODStream(e._daiConfig.CONTENT_SOURCE_ID,e._daiConfig.VIDEO_ID,null),e._islive=!1)})}},{key:"_requestLiveStream",value:function(e,t){var a=new google.ima.dai.api.LiveStreamRequest;a.assetKey=e,a.apiKey=t||null,this._streamManager.requestStream(a)}},{key:"_requestVODStream",value:function(e,t,a){var r=new google.ima.dai.api.VODStreamRequest;r.contentSourceId=e,r.videoId=t,r.apiKey=a,this._streamManager.requestStream(r)}},{key:"_onStreamEvent",value:function(t){switch(t.type){case google.ima.dai.api.StreamEvent.Type.AD_PROGRESS:case google.ima.dai.api.StreamEvent.Type.LOADED:break;case google.ima.dai.api.StreamEvent.Type.ERROR:console.log("Error loading stream, playing backup stream."+e);break;case google.ima.dai.api.StreamEvent.Type.STARTED:1===t.getAd().getAdPodInfo().getAdPosition()&&(this._currentAdBlock++,this._div.dispatchEvent(new CustomEvent("adblockstart",{detail:t.getAd().getAdPodInfo().getTotalAds()}))),this._div.dispatchEvent(new CustomEvent("adstarted",{detail:t.getAd().getAdPodInfo().getAdPosition()-1})),this._currentAdDuration=t.getAd().getAdPodInfo().getMaxDuration(),this._adDescription=t.getAd().getDescription(),this._adTitle=t.getAd().getTitle(),this._isAdSkippAble=t.getAd().isSkippable(),this._adStarted=!0,this._isAdPlaying=!0;break;case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this._div.dispatchEvent(new CustomEvent("adfirstquartile"));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this._div.dispatchEvent(new CustomEvent("admidpoint"));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this._div.dispatchEvent(new CustomEvent("adthirdquartile"));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:if(this._div.dispatchEvent(new CustomEvent("adcomplete")),this._div.dispatchEvent(new CustomEvent("addestroyed")),this._adStarted=!1,this._isAdPlaying=!1,t.getAd().getAdPodInfo().getAdPosition()===t.getAd().getAdPodInfo().getTotalAds()){if(null!=this._adBlockPlayed)for(var a=0;a<this._currentAdBlock;a++)this._adBlockPlayed[a].played=!0;this._div.dispatchEvent(new CustomEvent("adblockend"))}break;case google.ima.dai.api.StreamEvent.Type.SKIPPED:this._div.dispatchEvent(new CustomEvent("adskipped")),this._div.dispatchEvent(new CustomEvent("adcomplete")),this._div.dispatchEvent(new CustomEvent("addestroyed")),this._div.dispatchEvent(new CustomEvent("adblockend")),this._adStarted=!1,this._isAdPlaying=!1;break;case google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED:for(a=0;a<t.getStreamData().cuepoints.length;a++)this._cuePointsStart[a]=t.getStreamData().cuepoints[a].start,this._cuePoints[a]=t.getStreamData().cuepoints[a];if(0==this._adBlockPlayed.length&&null!=this._cuePoints&&null!=this._cuePoints)for(a=0;a<this._cuePoints.length;a++)this._resumePosition&&this._resumePosition>this._cuePoints[a].end?this._adBlockPlayed[a]={start:this._cuePoints[a].start,end:this._cuePoints[a].end,played:!0}:this._adBlockPlayed[a]={start:this._cuePoints[a].start,end:this._cuePoints[a].end,played:!1};var r=new CustomEvent("cuePointsReady",{detail:this._cuePointsStart});this._div.dispatchEvent(r)}}},{key:"_setAdsManager",value:function(){var t=this;this._adsManager.getAdCurrentTime=function(){return Math.round(t._getAdCurrentTime())},this._adsManager.getAdDuration=function(){return t._adStarted?this._currentAdDuration:-1},this._adsManager.getAdPaused=function(){return!(!this._isAdPlaying||!this._videoElement.paused)},this._adsManager.getAdDescription=function(){return t._isAdPlaying?t._adDescription:""},this._adsManager.getAdRemainingTime=function(){return this._adStarted?Math.round(this._currentAdDuration-this._getAdCurrentTime()):void 0},this._adsManager.getAdTitle=function(){return t._isAdPlaying?t._adTitle:""},this._adsManager.getIsSkippableAd=function(){return t._isAdPlaying?t._isAdSkippAble:void 0},this._adsManager.getMute=function(){if(this._isAdPlaying)return 0===t._videoElement.volume},this._adsManager.getMute=function(){if(this._isAdPlaying)return 0===t._videoElement.volume},this._adsManager.getVolume=function(){if(this._isAdPlaying)return t._isAdPlaying?t._videoElement.volume:-1},this._adsManager.setMute=function(){t._setVolume(0)},this._adsManager.setVolume=function(e){t._setVolume(e)},this._adsManager.pause=function(){if(t._isAdPlaying)return t._videoElement.pause();console.warn("This method cannot be used because no ads are being played.")},this._adsManager.play=function(){if(t._isAdPlaying)return t._videoElement.play();console.warn("This method cannot be used because no ads are being played.")}}},{key:"_getAdsManager",value:function(){return this._adsManager}},{key:"_getCurrentAdBreak",value:function(){var t=this,a=null;return this._adBreaks.forEach(function(e){if(t._videoElement.currentTime>=e.start&&t._videoElement.currentTime<e.start+e.duration)return a=e}),a}},{key:"_getCurrentAd",value:function(){var a=null,e=this._getCurrentAdBreak();if(null==e)return null;e.ads.sort(function(e,t){return e.seq-t.seq});var r=e.start;return e.ads.forEach(function(e,t){if(r+=ad.duration,this._videoElement.currentTime<r)return a=ad}),a}},{key:"_parseMetadata",value:function(e){e&&e.samples.forEach(function(e){var t=new TextDecoder("utf-8").decode(e.data),t=t.slice(t.indexOf("google_"),t.length);mediaIdsQueue.push({mediaId:t,timestamp:e.pts})})}},{key:"_checkVerifyMedia",value:function(){var e,t;0<mediaIdsQueue.length&&mediaIdsQueue[0].timestamp<=this._videoElement.currentTime&&(e=mediaIdsQueue.shift().mediaId,(t=new XMLHttpRequest).open("GET",verificationUrl+e,!0),t.onreadystatechange=function(){switch(t.status){case 204:break;case 404:console.error("Media verification not found, wrong media id?");break;default:console.error("Unknown status code from media verification: "+t.status)}},t.send())}},{key:"_getAdCurrentTime",value:function(){return this._adStarted?(this._adCurrentTime=this._videoElement.currentTime,this._adCurrentTime):-1}},{key:"_setVolume",value:function(e){this._isAdPlaying?(e=new CustomEvent("changevolume",{detail:{value:e}}),this._div.dispatchEvent(e)):console.warn("No ad is playing")}},{key:"removeAdsEvents",value:function(){for(var e=0;e<this._initEvent.length;e++)this._div.removeEventListener(this._initEvent[e][0],this._initEvent[e][1])}},{key:"destroy",value:function(){this._adBreaks=[],this._adBlockPlayed=[],this._adCurrentTime=0,this._adsManager={},this._adStarted=!1,this._adTitle=void 0,this._cuePoints=[],this._cuePointsStart=[],this._currentAdDuration=0,this._currentAdBlock=0,this._adDescription=void 0,this._div=void 0,this._initEvent=void 0,this._isAdPlaying=!1,this._isAdSeeked=!1,this._isAdSkippAble=void 0,this._streamManager=void 0,this._url=void 0,this._islive=!1,this._videoElement=void 0,this._daiConfig=void 0,this._promise=void 0}}]),s);function s(e,t,a,r,n,i){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._adBreaks=[],this._adBlockPlayed=[],this._adCurrentTime=0,this._adsManager={},this._adStarted=!1,this._adTitle=void 0,this._cuePoints=[],this._cuePointsStart=[],this._currentAdDuration=0,this._currentAdBlock=0,this._adDescription=void 0,this._div=void 0,this._initEvent=void 0,this._isAdPlaying=!1,this._isAdSeeked=!1,this._isAdSkippAble=void 0,this._streamManager=void 0,this._url=void 0,this._islive=!1,this._videoEnd=!1,this._videoElement=void 0,this._daiConfig=void 0,this._promise=void 0,this._resumePosition=i,this._daiConfig=n,this._div=r,this._initEvent=t.concat(a),this._videoElement=e,this._streamManager=new google.ima.dai.api.StreamManager(e);for(var o=0;o<this._initEvent.length;o++)this._div&&this._div.addEventListener(this._initEvent[o][0],this._initEvent[o][1])}},function(e,t,a){"use strict";e.exports=a(465)},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(){},e.exports=t.default},function(e,t,a){"use strict";a(467)()||Object.defineProperty(a(90),"Symbol",{value:a(470),configurable:!0,enumerable:!1,writable:!0})},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(90),i={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[r(t.iterator)]&&!!i[r(t.toPrimitive)]&&!!i[r(t.toStringTag)]}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(){return"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))&&!!globalThis&&globalThis.Array===Array}},function(e,t,a){"use strict";function r(){if("object"===("undefined"==typeof self?"undefined":n(self))&&self)return self;if("object"===("undefined"==typeof window?"undefined":n(window))&&window)return window;throw new Error("Unable to resolve global `this`")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__?__global__:r()}finally{delete Object.prototype.__global__}}()},function(e,t,a){"use strict";var r,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=a(91),l=a(193),u=a(90).Symbol,c=a(488),d=a(489),a=a(490),h=Object.create,p=Object.defineProperties,f=Object.defineProperty;if("function"==typeof u)try{String(u()),i=!0}catch(e){}else u=null;n=function(e){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return r(e)},e.exports=r=function e(t){var a;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?u(t):(a=h(n.prototype),t=void 0===t?"":String(t),p(a,{__description__:s("",t),__name__:s("",c(t))}))},d(r),a(r),p(n.prototype,{constructor:s(r),toString:s("",function(){return this.__name__})}),p(r.prototype,{toString:s(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:s(function(){return l(this)})}),f(r.prototype,r.toPrimitive,s("",function(){var e=l(this);return"symbol"===(void 0===e?"undefined":o(e))?e:e.toString()})),f(r.prototype,r.toStringTag,s("c","Symbol")),f(n.prototype,r.toStringTag,s("c",r.prototype[r.toStringTag])),f(n.prototype,r.toPrimitive,s("c",r.prototype[r.toPrimitive]))},function(e,t,a){"use strict";var r=a(472),n=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!r(e)&&!n.test(i.call(e))}},function(e,t,a){"use strict";var r=a(473);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},function(e,t,a){"use strict";var r=a(474);e.exports=function(e){if(!r(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(e){return!1}}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(192),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(i,void 0===e?"undefined":r(e))}},function(e,t,a){"use strict";e.exports=a(476)()?Object.assign:a(477)},function(e,t,a){"use strict";e.exports=function(){var e=Object.assign;return"function"==typeof e&&(e(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,a){"use strict";var o=a(478),s=a(482),l=Math.max;e.exports=function(t,a){var r,e,n,i=l(arguments.length,2);for(t=Object(s(t)),n=function(e){try{t[e]=a[e]}catch(e){r=r||e}},e=1;e<i;++e)o(a=arguments[e]).forEach(n);if(void 0!==r)throw r;return t}},function(e,t,a){"use strict";e.exports=a(479)()?Object.keys:a(480)},function(e,t,a){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,a){"use strict";var r=a(136),n=Object.keys;e.exports=function(e){return n(r(e)?Object(e):e)}},function(e,t,a){"use strict";e.exports=function(){}},function(e,t,a){"use strict";var r=a(136);e.exports=function(e){if(r(e))return e;throw new TypeError("Cannot use null or undefined")}},function(e,t,a){"use strict";var i=a(136),r=Array.prototype.forEach,o=Object.create;e.exports=function(e){var n=o(null);return r.call(arguments,function(e){if(i(e)){var t,a=Object(e),r=n;for(t in a)r[t]=a[t]}}),n}},function(e,t,a){"use strict";e.exports=a(485)()?String.prototype.contains:a(486)},function(e,t,a){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(e,t,a){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return-1<r.call(this,e,arguments[1])}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return!!e&&("symbol"===(void 0===e?"undefined":r(e))||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,a){"use strict";var n=a(91),a=Object.create,i=Object.defineProperty,o=Object.prototype,s=a(null);e.exports=function(e){for(var t,a,r=0;s[e+(r||"")];)++r;return s[e+=r||""]=!0,i(o,t="@@"+e,n.gs(null,function(e){a||(a=!0,i(this,t,n(e)),a=!1)})),t}},function(e,t,a){"use strict";var r=a(91),n=a(90).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",n&&n.hasInstance||e("hasInstance")),isConcatSpreadable:r("",n&&n.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",n&&n.iterator||e("iterator")),match:r("",n&&n.match||e("match")),replace:r("",n&&n.replace||e("replace")),search:r("",n&&n.search||e("search")),species:r("",n&&n.species||e("species")),split:r("",n&&n.split||e("split")),toPrimitive:r("",n&&n.toPrimitive||e("toPrimitive")),toStringTag:r("",n&&n.toStringTag||e("toStringTag")),unscopables:r("",n&&n.unscopables||e("unscopables"))})}},function(e,t,a){"use strict";var r=a(91),n=a(193),i=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:r(function(e){return i[e]||(i[e]=t(String(e)))}),keyFor:r(function(e){for(var t in n(e),i)if(i[t]===e)return t})})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(t.Headers=d,t.Request=v,t.Response=k,t.fetch=E,"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==l&&l),u={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return e="string"!=typeof e?String(e):e}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return u.iterable&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(a){return new Promise(function(e,t){a.onload=function(){e(a.result)},a.onerror=function(){t(a.error)}})}function f(e){var t=new FileReader,a=p(t);return t.readAsArrayBuffer(e),a}function m(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:u.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u.arrayBuffer&&u.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||n(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(f)}),this.text=function(){var e,t,a=h(this);if(a)return a;if(this._bodyBlob)return a=this._bodyBlob,e=new FileReader,t=p(e),e.readAsText(a),t;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),a=new Array(t.length),r=0;r<t.length;r++)a[r]=String.fromCharCode(t[r]);return a.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}u.arrayBuffer&&(r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(e){return e&&-1<r.indexOf(Object.prototype.toString.call(e))}),d.prototype.append=function(e,t){e=i(e),t=c(t);var a=this.map[e];this.map[e]=a?a+", "+t:t},d.prototype.delete=function(e){delete this.map[i(e)]},d.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},d.prototype.set=function(e,t){this.map[i(e)]=c(t)},d.prototype.forEach=function(e,t){for(var a in this.map)this.map.hasOwnProperty(a)&&e.call(t,this.map[a],a,this)},d.prototype.keys=function(){var a=[];return this.forEach(function(e,t){a.push(t)}),o(a)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},d.prototype.entries=function(){var a=[];return this.forEach(function(e,t){a.push([t,e])}),o(a)},u.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var a,r=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(e=t.method||this.method||"GET",a=e.toUpperCase(),-1<y.indexOf(a)?a:e),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((a=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function _(e){var a=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(t=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),a.append(decodeURIComponent(t),decodeURIComponent(e)))}),a}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308],S=(k.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},t.DOMException=l.DOMException);try{new S}catch(e){t.DOMException=S=function(e,t){this.message=e,this.name=t;t=Error(e);this.stack=t.stack},S.prototype=Object.create(Error.prototype),S.prototype.constructor=S}function E(r,o){return new Promise(function(n,e){var t=new v(r,o);if(t.signal&&t.signal.aborted)return e(new S("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var e,a,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",a=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var e=e.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),a.append(t,e))}),a)},r=(t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL"),"response"in i?i.response:i.responseText);setTimeout(function(){n(new k(r,t))},0)},i.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){e(new S("Aborted","AbortError"))},0)},i.open(t.method,function(t){try{return""===t&&l.location.href?l.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&(u.blob?i.responseType="blob":u.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!o||"object"!==s(o.headers)||o.headers instanceof d?t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}):Object.getOwnPropertyNames(o.headers).forEach(function(e){i.setRequestHeader(e,c(o.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&t.signal.removeEventListener("abort",a)}),i.send(void 0===t._bodyInit?null:t._bodyInit)})}E.polyfill=!0,l.fetch||(l.fetch=E,l.Headers=d,l.Request=v,l.Response=k)},function(e,t,a){"use strict";a.r(t),a.d(t,"NexShaka",function(){return o});var t=a(29),b=a.n(t),A=a(71),t=a(256),t=a.n(t),r=a(72),s=a.n(r),S=a(257),n=a(258),r=a(105),i=a.n(r),o=(window.muxjs=t.a,function(){this.shaka_=null,this.shakaThumb_=null,this.languageSelected_=null,this.audioList_=null,this._resumePosition=null,this._configuration=null,this._externalSubtitles=void 0,this._videoElement=null,this.isSeeking_=!1,this.callBack_=new Map,this.eventId_=0,this.isdocumentHidden_=document.hidden,this._firstMetadataEvent=!1,this._metadataTextTrackIdx=-1,this._userActionDestroy=!1,this.dispatchSubsBuffer=!0,this._switched=!1,this._backupManifestsIndex=0,this._startingBufferInterval=void 0,this._initialized=!1,window.TextEncoder?this._encoder=new TextEncoder:this._encoder=new n.textEncoder,this.PLAYER_STATES={NONE:"None",READY:"Ready",BUFFERING:"Buffering",PLAYING:"Playing",PAUSED:"Paused",ENDED:"Ended"},this.BUFFER_TYPE={CONNECTION:"Connection",INITIAL:"Initial",SEEK:"Seek",PAUSE:"Pause",BACKGROUND:"Background"},this.currentState_=null,this.lastState_=null,this.EVENT_MANAGER=null});function E(e,t,a,r){var n=this;this.shaka_.load(e,t).then(function(){var t;n._userActionDestroy=!1,n._initialized=!0,n.setState_(n.PLAYER_STATES.READY),!1===n._videoElement.autoplay&&n.setState_(n.PLAYER_STATES.PAUSED),void 0!==n.autoplay&&n._videoElement.play(),r&&n.setAudioStream(0),n.shaka_.isLive()?n.shaka_.isLive()&&Array.isArray(a)&&console.warn("External subtitles are not supported with live videos."):Array.isArray(a)?i.a.isWebOS()||i.a.isTizen()?(t=[],a.forEach(function(e){n.checkSubtitleLength(e).then(function(){n.addSubtitle(e).then(function(){t.push(e),n._externalSubtitles=t}).catch(function(){})}).catch(function(){})})):a.forEach(function(e){n.addSubtitle(e)}):a&&console.warn("The property externalSubtitles must be an array of objects containing 'src', 'language' and 'callback'"),n.languageSelected_=0,n.audioList_=n.shaka_.getAudioLanguages(),n.firstList=n.getTracksAux(),void 0!==n.resolverPromise&&n.resolverPromise(),n.logger.log("The stream has been loaded")}).catch(n.onError_.bind(n))}o.prototype.Init=function(e,t,a,r,n,i,o,s,l,u,c,d,h,p,f,m,g,y,v,_,k,b,S,E,T,x){this._div=d,this._nexDRMInformation=a,this._configuration=y,this._resumePosition=g,this._externalSubtitles=f,this._videoElement=e,this._addRequestFilter=v,this._startingBufferLength=k,this._improveStartUp=b,this._autoplay=S,this._bitrateConfig=E,this._backupManifests=x,this._retryParameters=T,this.setState_(this.PLAYER_STATES.NONE),this._resumePosition<0&&null!==this._resumePosition&&(this._resumePosition=0),this.logger=new A.Logger({debugMode:o}),this.initPlayer(t,a,r,n,o,v,k)},o.prototype.initPlayer=function(e,t,a,r,n,i,o){var s,l=this,u=(this.visibilityHandler_=function(){l.isdocumentHidden_=document.hidden},document.addEventListener("visibilitychange",this.visibilityHandler_.bind(this)),n?(b.a.polyfill.installAll(),this.EVENT_MANAGER=new b.a.util.EventManager,this.shaka_=new b.a.Player(this._videoElement),this.shaka_.setLogLevel(6)):(b.a.polyfill.installAll(),this.EVENT_MANAGER=new b.a.util.EventManager,this.shaka_=new b.a.Player(this._videoElement),this.shaka_.setLogLevel(0)),null!==this._configuration&&this.shaka_.configure(this._configuration),"object"==typeof this._retryParameters&&0<Object.keys(this._retryParameters).length&&Object.keys(this._retryParameters).forEach(function(e){switch(s={},0<Object.keys(l._retryParameters[e]).length&&(l._retryParameters[e].timeout&&(s.timeout=l._retryParameters[e].timeout),l._retryParameters[e].stallTimeout&&(s.stallTimeout=l._retryParameters[e].stallTimeout),l._retryParameters[e].connectionTimeout&&(s.connectionTimeout=l._retryParameters[e].connectionTimeout),l._retryParameters[e].maxTries&&(s.maxAttempts=l._retryParameters[e].maxTries),l._retryParameters[e].retryDelay)&&(s.baseDelay=l._retryParameters[e].retryDelay),e){case"drm":l.shaka_.configure({drm:{retryParameters:s}});break;case"streaming":l.shaka_.configure({streaming:{retryParameters:s}});break;case"manifest":l.shaka_.configure({manifest:{retryParameters:s}})}}),this.isLive&&(0<e.indexOf(".m3u8")||0<e.indexOf(".ism")&&e.includes("format=m3u8"))&&l.shaka_.configure({manifest:{availabilityWindowOverride:1/0}}),this.shaka_.configure({streaming:{bufferingGoal:20,rebufferingGoal:6,lowLatencyMode:!1}}),this.EVENT_MANAGER.listen(this.shaka_,"error",function(e){(1001===e.detail.code||1002===e.detail.code)&&!l._switched&&0<l._backupManifests.length&&l._backupManifestsIndex<l._backupManifests.length&&(e=l.shaka_.makeEvent_(b.a.Player.EventName.ManifestChanged,{detail:{contentType:"main",requestType:"segment",failingUrl:e.detail.data[0]}}),l.shaka_.dispatchEvent(e),l._switched=!0,-1!==(e=l.shaka_.parser_.manifestUris_.indexOf(l._backupManifests[l._backupManifestsIndex]))&&l.shaka_.parser_.manifestUris_.splice(e,1),l.shaka_.parser_.manifestUris_.unshift(l._backupManifests[l._backupManifestsIndex]),l._backupManifestsIndex++,l.shaka_.parser_.onUpdate_())}),this.EVENT_MANAGER.listen(this.shaka_,"manifestparsed",function(e){var t=0<e.target.assetUri_.indexOf(".m3u8");if(null!=l._bitrateConfig){var a,e=e.target.manifest_.variants,r=[];e.forEach(function(e){r.push((t?e:e.video).bandwidth),0});for(var n=r.length,i=1;i<n;i++)for(var o=0;o<n-i;o++)r[o+1]<r[o]&&(a=r[o],r[o]=r[o+1],r[o+1]=a);e=r.reduce(function(e,t){return Math.abs(t-l._bitrateConfig.startingBitrate)<Math.abs(e-l._bitrateConfig.startingBitrate)?t:e}),"number"==typeof l._bitrateConfig.startingBitrate||"number"==typeof l._bitrateConfig.maxBitrate||"number"==typeof l._bitrateConfig.minBitrate?(l.shaka_.configure({abr:{defaultBandwidthEstimate:e,enabled:!1,restrictions:{maxBandwidth:e+7e4,minBandwidth:e-7e4}}}),l._bitrateConfig.maxBitrate<l._bitrateConfig.minBitrate&&(l._bitrateConfig.maxBitrate=1/0,l._bitrateConfig.minBitrate=0),l._videoElement.addEventListener("loadeddata",function e(){l.shaka_.configure({abr:{restrictions:{maxBandwidth:isNaN(l._bitrateConfig.maxBitrate+7e4)?1/0:l._bitrateConfig.maxBitrate+7e4,minBandwidth:isNaN(l._bitrateConfig.minBitrate-7e4)?0:l._bitrateConfig.minBitrate-7e4}}}),l._videoElement.removeEventListener("loadeddata",e)})):console.warn("The data provided for bitrateConfig is not valid, make sure all the values are numbers.")}}),this.loadingsubtilesHandler=function(t){var a,e,r=l.shaka_.getTextTracks().filter(function(e){return e.active});t.detail&&this.dispatchSubsBuffer&&Array.isArray(l._externalSubtitles)?l._externalSubtitles.forEach(function(e){if(l.shaka_.getTextTracks()[t.detail.idShaka].language===e.language&&(0===r.length||r[0].language!==e.language))return l.dispatchSubsBuffer=!1,e=new CustomEvent("loadingsubtitles"),l._videoElement.dispatchEvent(e),!0}):!this.dispatchSubsBuffer&&Array.isArray(l._externalSubtitles)&&(a=!0,l._externalSubtitles.forEach(function(e){if(t.detail&&l.shaka_.getTextTracks()[t.detail.idShaka].language===e.language)return!(a=!1)}),t.detail&&!a||(this.dispatchSubsBuffer=!0,e=new CustomEvent("subtitlesloaded"),l._videoElement.dispatchEvent(e)))},this.loadingsubtilesBind=this.loadingsubtilesHandler.bind(this),l._div.addEventListener("loadingsubtiles",this.loadingsubtilesBind),this.loadedsubtitlesHandler=function(){var e;this.dispatchSubsBuffer||(this.dispatchSubsBuffer=!0,e=new CustomEvent("subtitlesloaded"),l._videoElement.dispatchEvent(e))},this.loadedsubtitlesBind=this.loadedsubtitlesHandler.bind(this),l._videoElement.addEventListener("loadedsubtitles",this.loadedsubtitlesBind),this._improveStartUp&&l.shaka_.configure({abr:{defaultBandwidthEstimate:1e3,enabled:!0}}),this.shaka_.addEventListener("timelineregionenter",function(e){var t=e.detail.eventElement.attributes.messageData.value,e=e.detail.startTime;l.div.dispatchEvent(new CustomEvent("metadatas",{detail:{mediaId:t,pts:e}}))},!1),this.PLAYER_STATES.NONE,this.PLAYER_STATES.NONE),c=(this.EVENT_MANAGER.listen(this.shaka_,"metadata",function(e){for(var t=new CustomEvent("cuechange",{detail:e}),a=0;a<l._videoElement.textTracks.length;a++)"metadata"===l._videoElement.textTracks[a].kind&&l._videoElement.textTracks[a].dispatchEvent(t)}),this.EVENT_MANAGER.listen(this.shaka_,"buffering",function(e){if(!1===e.buffering)!!1!==l._initialized||u!==l.PLAYER_STATES.PAUSED&&u!==l.PLAYER_STATES.ENDED||l.setState_(l.PLAYER_STATES.PAUSED);else{u=l.currentState_;var t="";if(l.isdocumentHidden_)t=l.shaka_.isLive()&&l.isSeeking_?l.BUFFER_TYPE.SEEK:l.BUFFER_TYPE.BACKGROUND;else switch(u){case l.PLAYER_STATES.NONE:t=l.BUFFER_TYPE.INITIAL;break;case l.PLAYER_STATES.PAUSED:case l.PLAYER_STATES.PLAYING:case l.PLAYER_STATES.BUFFERING:t=l.isSeeking_?l.BUFFER_TYPE.SEEK:l.BUFFER_TYPE.CONNECTION}e=new CustomEvent("bufferType",{detail:t});l._videoElement.dispatchEvent(e),l.setState_(l.PLAYER_STATES.BUFFERING)}}),this.shaka_.configure({streaming:{dispatchAllEmsgBoxes:!0,jumpLargeGaps:!0}}),this.EVENT_MANAGER.listen(this._videoElement,"pause",function(){!0===l._initialized&&l.setState_(l.PLAYER_STATES.PAUSED)}),this.EVENT_MANAGER.listen(this._videoElement,"seeking",function(){1!==l.trickPlayValue&&(l.trickPlayValue<0&&0===l._videoElement.currentTime?(l.trickPlay(1),l._videoElement.pause()):0<l.trickPlayValue&&l._videoElement.currentTime>=l._videoElement.duration-4&&(l.trickPlay(1),l._videoElement.play())),!1===l.isSeeking_&&(l.isSeeking_=!0,l.currentState_!==l.PLAYER_STATES.BUFFERING)&&l.currentState_,null!==o&&(o=null,l.shaka_.configure({streaming:{bufferingGoal:void 0}}))}),this.EVENT_MANAGER.listen(this.shaka_,"emsg",function(e){l._firstMetadataEvent||(l._metadataTextTrackIdx=l._videoElement.textTracks.length,l._videoElement.addTextTrack("metadata","id3"),l._firstMetadataEvent=!0);var t=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=Object(S.getID3Frames)(e.detail.messageData),r=e.detail.startTime;e.detail.endTime;for(var n=0;n<a.length;n++){var i=new t(e.detail.startTime,e.detail.endTime,"");"string"==typeof a[n].data&&l._encoder&&(a[n].data=l._encoder.encode(a[n].data).buffer),i.value=a[n],l._videoElement.textTracks[l._metadataTextTrackIdx].addCue(i)}}),this.EVENT_MANAGER.listen(this._videoElement,"ended",function(){l.setState_(l.PLAYER_STATES.ENDED)}),this.EVENT_MANAGER.listen(this._videoElement,"playing",function(){!0===l._initialized&&l.setState_(l.PLAYER_STATES.PLAYING)}),this.EVENT_MANAGER.listen(this._videoElement,"seeked",function(){l.isSeeking_=!1;function e(){l.seekOnSeeked=void 0,l.playOnSeeked=void 0,l.pauseOnSeeked=void 0}1!==l.trickPlayValue&&l._videoElement.currentTime>=l._videoElement.duration-4?(l.trickPlay(1),e(),l._videoElement.play()):l.pauseOnSeeked?(l.trickPlayValue=1,l._videoElement.playbackRate=1,l._videoElement.pause(),e()):l.playOnSeeked&&(l.trickPlayValue=1,l._videoElement.playbackRate=1,l._videoElement.play(),e())}),function(){l._startingBufferInterval=setInterval(function(){var e=l.shaka_.getBufferedInfo().total[0];void 0!==e&&o&&e.end>=o&&(o=null,l.shaka_.configure({streaming:{bufferingGoal:10}}),l.EVENT_MANAGER.unlisten(l._videoElement,"timeupdate",c),clearInterval(l._startingBufferInterval))},200)});if(this.EVENT_MANAGER.listenOnce(this._videoElement,"timeupdate",c),this.shaka_.setVideoContainer(document.getElementsByClassName("nexplayer_video")[0]),this._configuration&&this.shaka_.configure(this._configuration),null!==o&&this.shaka_.configure({streaming:{bufferingGoal:o}}),this.debug=n,this._nexDRMInformation=t,this.URL_=e,this.currentTrack=void 0,this.resolverPromise=a,this.rejectPromise=r,this.shaka_.addEventListener("error",l.onErrorEvent_.bind(l)),void 0!==t){for(var d,h={},p={},f=!1,m=0;m<t.length;m++){var g=t[m].NexDRMType,y=t[m].NexDRMKey;if(h[g]=y,void 0!==t[m].NexHeaders)for(var f=!0,v=0;v<t[m].NexHeaders.length;v++){var _,k=t[m].NexHeaders[v].FieldName;t[m].NexHeaders[v].FiledValue?(console.warn("The property 'FiledValue' is deprecated, please use 'FieldValue'."),_=t[m].NexHeaders[v].FiledValue):t[m].NexHeaders[v].FieldValue&&(_=t[m].NexHeaders[v].FieldValue),p[k]=_}}this.shaka_.configure({drm:{servers:h}},{manifest:{hls:{useFullSegmentsForStartTime:!0}}}),i&&this.shaka_.getNetworkingEngine().registerRequestFilter(function(e,t){e==b.a.net.NetworkingEngine.RequestType.LICENSE&&i(t)}),0!=f&&(n=this.shaka_.getNetworkingEngine(),i||(n.clearAllRequestFilters(),n.clearAllResponseFilters()),"com.widevine.alpha"==this._nexDRMInformation[0].NexDRMType?(this.logger.DRMlog("Using Widevine"),d=this.addLicenseRequestHeaders_.bind(null,p),e=this.registerResponseFilter_.bind(null),n.registerRequestFilter(d),n.registerResponseFilter(e)):(this.logger.DRMlog("Using PlayReady"),d=this.addLicenseRequestHeaders_.bind(null,p),n.registerRequestFilter(d)))}this._backupManifests&&0<this._backupManifests.length&&this.shaka_.configure({manifest:{backupManifests:this._backupManifests}}),E.bind(this)(this.URL_,this._resumePosition,this._externalSubtitles,!1)},o.prototype.load=function(e,t,a){E.bind(this)(e,t,a,!0)},o.prototype.reload=function(){var t=this,e=this.isLive()?void 0:this._videoElement.currentTime,a=this.getCurrentAudioStream(),r=t.shaka_.getTextTracks().filter(function(e){return e.active});this.shaka_.load(this.URL_,e).then(function(){t.setAudioStream(a.id),t.shaka_.isLive()?t.shaka_.isLive()&&Array.isArray(t.externalSubtitles)&&console.warn("External subtitles are not supported with live videos."):Array.isArray(t._externalSubtitles)?t._externalSubtitles.forEach(function(e){t.addSubtitle(e).then(function(){0<r.length&&(t.shaka_.selectTextLanguage(r[0].language),t.shaka_.setTextTrackVisibility(!0))}).catch(function(){})}):console.warn("The property externalSubtitles must be an array of objects containing 'src', 'language' and 'callback'"),0<r.length&&(t.shaka_.selectTextLanguage(r[0].language),t.shaka_.setTextTrackVisibility(!0))})},o.prototype.addSubtitle=function(r){var n=this;return new Promise(function(e,t){var a;"string"==typeof r.src?(r.language||(r.language="und"),(r.src.includes("blob")?n.shaka_.addTextTrackAsync(r.src,r.language,"subtitles","text/vtt"):n.shaka_.addTextTrackAsync(r.src,r.language,"subtitles")).then(function(){e()}).catch(function(){t()})):(a={code:422,error:"Unsupported file type",src:r.src},n.logger.error(a.error),"function"==typeof r.callback&&r.callback(a))})},o.prototype.checkSubtitleLength=function(i){var o=this;return new Promise(function(r,n){var e=new XMLHttpRequest;e.open("HEAD",i.src),e.onreadystatechange=function(){var e,t,a;this.readyState==this.DONE&&(e=this.getResponseHeader("content-length"),t={code:420,error:s.a.get(420).errorName,src:i.src},200===this.status&&e?(1e6<=Number(e)?(o.logger.warn(t.error),i.callback&&"function"==typeof i.callback&&i.callback(t),n):r)():((a=new XMLHttpRequest).open("GET",i.src),a.onreadystatechange=function(){this.readyState==this.DONE&&((e=this.responseText.length)&&1e6<=Number(e)?(o.logger.warn(t.error),i.callback&&i.callback(t),n):r)()},a.send()))},e.send()})},o.prototype.onErrorEvent_=function(e){if(this.onError_(e.detail),e.detail.data[0]===this._externalSubtitles.src){var t=e.detail.data;try{t=JSON.parse(t[2])}catch(e){t=t[2]}t={code:e.detail.data[1],error:t,src:e.detail.data[0]};null!==this._externalSubtitles.callback&&void 0!==this._externalSubtitles.callback&&this._externalSubtitles.callback(t)}},o.prototype.onError_=function(e){if(e.code&&7e3===e.code&&this._userActionDestroy)console.log("User canceled the load of the player!");else{var t=this;if(this.callBack_.has("error")){var a={},r=[];if(void 0!==e.code&&"number"==typeof e.code){for(var n=0;n<s.a.get(e.code).array.length;n++)r[n.toString()]=e.data[s.a.get(e.code).array[n]];a={dataError:r,errorMessage:s.a.get(e.code).errorName}}else e.code=-1,a={dataError:r,errorMessage:e.message};for(n=0;n<t.callBack_.get("error").length;n++)t.callBack_.get("error")[n].functionEvent(a)}console.error("Error code",e.code,"object",e)}},o.prototype.setState_=function(e){this.lastState_=this.currentState_,this.currentState_=e,this.lastState_!==this.currentState_&&(e=new CustomEvent("onstatechange",{detail:this.currentState_}),this._videoElement.dispatchEvent(e))},o.prototype.isSeeking=function(){return this.isSeeking_},o.prototype.getBandwidthEstimate=function(){if(this.shaka_)return this.shaka_.abrManager_.bandwidthEstimator_.getBandwidthEstimate(this.shaka_.abrManager_.getDefaultBandwidth_())},o.prototype.getTextTracks=function(){return this.shaka_.getTextTracks()},o.prototype.setTextTrack=function(e){0<=e&&e<this.shaka_.getTextTracks().length&&(this.shaka_.selectTextTrack(this.shaka_.getTextTracks()[e]),this.shaka_.setTextTrackVisibility(!0))},o.prototype.hideSubtitles=function(){this.shaka_.setTextTrackVisibility(!1)},o.prototype.enableABR=function(){this.shaka_.configure({abr:{enabled:!0}})},o.prototype.setBufferLength=function(e){this.shaka_.configure({streaming:{bufferingGoal:e}})},o.prototype.getTracks=function(){var e=this.shaka_.getVariantTracks(),t=[],a=0,r=[],n=0<this.URL_.indexOf(".m3u8");return e.forEach(function(e){r.includes(e.videoId)||(t.push({width:e.width,height:e.height,bitrate:n?e.bandwidth:e.videoBandwidth,id:a}),r.push(e.videoId),a+=1)}),t},o.prototype.getTracksAux=function(){var e=this.shaka_.getVariantTracks(),a=[],r=0,n=[];return e.forEach(function(e){var t;n.includes(e.videoId)||(t=null!==e.videoBandwidth?e.videoBandwidth:e.bandwidth,a.push({width:e.width,height:e.height,bitrate:t,id:r,auxId:e.videoId}),n.push(e.videoId),r+=1)}),a},o.prototype.getQualityLevels=function(){for(var e=this.shaka_.getVariantTracks(),t=[],a=0;a<e.length;a++){var r={bitrate:e[a].bandwidth,width:e[a].width,height:e[a].height,index:a};t.push(r)}return t},o.prototype.updateTrackOptions_=function(e,t){e=e.filter(function(e){return e.language==t});var a=[],r=0;return e.forEach(function(e){a.push({width:e.width,height:e.height,bitrate:e.bandwidth,id:e.id,isActive:e.active,number:r}),r++}),a},o.prototype.getCurrentTrack=function(){for(var e,t,a,r=this.shaka_.getVariantTracks(),n=0;n<r.length&&!r[n].active;)n++;return n<r.length&&(a=r[n].videoId,this.getTracksAux().forEach(function(e){a==e.auxId&&(t=e)}),(e={}).bitrate=t.bitrate,e.id=t.id,e.height=t.height,e.width=t.width),e},o.prototype.getCurrentTrackAux=function(){for(var t,a,e=this.shaka_.getVariantTracks(),r=0;r<e.length&&!e[r].active;)r++;return r<e.length&&(t=e[r].videoId,this.getTracksAux().forEach(function(e){t==e.auxId&&(a=e)})),a},o.prototype.getTrackByID=function(e){for(var t,a=this.shaka_.getVariantTracks(),r=0;r<a.length&&a[r].id!==e;)r++;return t=r<a.length?a[r]:t},o.prototype.setTrack=function(e){this.setCurrentTrack(e)},o.prototype.setCurrentTrack=function(e){var t,a,r=this;-1===e?this.enableABR():e<this.getTracksAux().length?(this.shaka_.configure({abr:{enabled:!1}}),t=this.getTracksAux()[e].auxId,a=this.getCurrentAudioTrack().auxId,this.shaka_.getVariantTracks().forEach(function(e){e.videoId===t&&e.audioId===a&&r.shaka_.selectVariantTrack(e)})):this.logger.warn("Parameter value out of range")},o.prototype.getAudioStreams=function(){var e=this.shaka_.getVariantTracks(),t=[],a=0,r=[];return e.forEach(function(e){r.includes(e.audioId)||(t.push({id:a,language:e.language,name:e.language,label:e.label||""}),r.push(e.audioId),a+=1)}),t},o.prototype.getAudioTracks=function(){var e=this.shaka_.getVariantTracks(),t=[],a=0,r=[];return e.forEach(function(e){r.includes(e.audioId)||(t.push({id:a,language:e.language,name:e.language,auxId:e.audioId,label:e.label||""}),r.push(e.audioId),a+=1)}),t},o.prototype.getCurrentAudioStream=function(){var a,e,r=this;return this.shaka_.getVariantTracks().forEach(function(t){t.active&&r.getAudioTracks().forEach(function(e){t.audioId==e.auxId&&(a=e)})}),a&&((e={}).id=a.id,e.language=a.language,e.name=a.name,e.label=a.label),e},o.prototype.getCurrentAudioTrack=function(){var a,e=this;return this.shaka_.getVariantTracks().forEach(function(t){t.active&&e.getAudioTracks().forEach(function(e){t.audioId==e.auxId&&(a=e)})}),a},o.prototype.setAudioStream=function(e){var t,a,r;0<=e&&e<this.getAudioStreams().length?(this.shaka_.configure({abr:{enabled:!1}}),void 0!==this.getCurrentTrackAux()&&(a=(t=this).getCurrentTrackAux().auxId,r=this.getAudioTracks()[e].auxId,this.shaka_.getVariantTracks().forEach(function(e){e.videoId===a&&e.audioId===r&&t.shaka_.selectVariantTrack(e,!0)}),this.enableABR())):this.logger.warn("Parameter value out of range")},o.prototype.attachSubtitleRendererDiv=function(e){},o.prototype.getTrackByNumber=function(e){return this.getTracks()[e]},o.prototype.getActiveTrackNumber=function(){for(var e=this.getTracks(),t=0;t<e.length&&!e[t].isActive;)t++;return t<e.length?t:-1},o.prototype.on=function(e,a){var r=null;switch(e){case 0:r="adaptation";break;case 2:r="buffering";break;case 3:r="error";break;case 4:r="manifestchanged";break;default:this.logger.log("[NexPlayer] Error code 22: Event not available for this stream: "+this.URL_)}try{var t=function(e){var t;"buffering"===r?(t={state:e.buffering,type:"Buffering"},a(t)):a(e)};"error"===r?this.callBack_.has(r)?this.callBack_.get(r).push({eventId:this.eventId_,functionEvent:t,functionBeCalled:a}):this.callBack_.set(r,[{eventId:this.eventId_,functionEvent:t,functionBeCalled:a}]):this.shaka_.addEventListener(r,t,!1)}catch(e){console.log(e)}},o.prototype.off=function(e,t){var a=null,r=!1;if("number"==typeof e&&"function"==typeof t){switch(e){case 0:a="adaptation";break;case 2:a="buffering";break;case 3:a="error";break;default:this.logger.log("[NexPlayer] Error code 22: Event not available for this stream: "+this.URL_)}if(null==this.callBack_.get(a)||null==this.callBack_.get(a))console.warn("The event provided is not found");else{for(var n=0;n<this.callBack_.get(a).length;n++)this.callBack_.get(a)[n].functionBeCalled.toString()===t.toString()&&(this.callBack_.get(a).splice(n,1),this.shaka_.removeEventListener(a,t,!1),r=!0);0===this.callBack_.get(a).length&&this.callBack_.delete(a)}r||console.warn("The function provided does not exist for this event")}else console.warn("The values provided are not valid, it should be a number and a function. ")},o.prototype.checkTracks=function(e,t){void 0===this.currentTrack?this.currentTrack=this.getCurrentTrackAux():this.getCurrentTrackAux()!==this.currentTrack&&(this.currentTrack=this.getCurrentTrackAux(),t())},o.prototype.isLive=function(){return this.shaka_.isLive()},o.prototype.seekRange=function(){return this.shaka_.seekRange()},o.prototype.getTime=function(){return this._videoElement.currentTime},o.prototype.getDuration=function(){return this._videoElement.duration},o.prototype.seek=function(e){1!==this.trickPlayValue&&(this.trickPlay(1,!0),this.play()),Number.isFinite(e)&&null!=e&&0<=e&&e<=this._videoElement.duration?this._videoElement.currentTime=e:Number.isFinite(e)&&null!=e&&e<0?this._videoElement.currentTime=0:Number.isFinite(e)&&null!=e&&e>this._videoElement.duration&&(this._videoElement.currentTime=this._videoElement.duration)},o.prototype.getDroppedFrames=function(){var e;return null===this.shaka_||!this.shaka_||NaN===(e=this.shaka_.getStats().droppedFrames)?0:e},o.prototype.reset=function(){return this.shaka_.unload()},o.prototype.registerResponseFilter_=function(e,t){if(e==b.a.net.NetworkingEngine.RequestType.LICENSE){e=new Uint8Array(t.data);try{var a=JSON.parse(String.fromCharCode.apply(null,e));if(a&&a.status&&a.license&&"OK"===a.status){for(var r=window.atob(a.license),n=new Uint8Array(new ArrayBuffer(r.length)),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);t.data=n}}catch(e){}}},o.prototype.addLicenseRequestHeaders_=function(e,t,a){if(t==b.a.net.NetworkingEngine.RequestType.LICENSE)for(var r in e)a.headers[r]=e[r]},o.prototype.getThumbsElements=function(){return{player:this.shakaThumb_,video:this.thumbVideo_}},o.prototype.setThumbTracks=function(t){for(var e=this.getTracksAux(),a=0,r=-1,n=0;n<e.length;n++)(-1===r||r>e[n].bitrate)&&(r=e[n].bitrate,a=e[n].id);this.shakaThumb_.addEventListener("trackschanged",function(e){t()},!1);for(var i=this.audioList_[this.languageSelected_],o=this.shaka_.getVariantTracks(),s=(o.sort(function(e,t){return e.bandwidth-t.bandwidth}),this.updateTrackOptions_(o,i)),l=0;!s[l].isActive;)l++;s[l].number!==a?(n=this.findNumberInsideList(a),this.shakaThumb_.selectVariantTrack(this.shakaThumb_.getVariantTracks()[n],!1)):t()},o.prototype.findNumberInsideList=function(e){for(var t=0;this.firstList[t].id!==parseInt(e);)t++;return this.firstList[t].id},o.prototype.getLowerTrackPlayer=function(e,t){this.thumbVideo_=t,this.thumbVideo_.muted=!0,this.thumbVideo_.autoplay=!1,this.shakaThumb_=new b.a.Player(this.thumbVideo_),this.currentTrack=void 0;this.shakaThumb_.addEventListener("error",this.onErrorEvent_),this.shakaThumb_.load(this.URL_).then(function(){e()}).catch(this.onError_.bind(this))},o.prototype.trickPlay=function(e,t){var a,r;this.isLive()?this.logger.warn("Trick Play not available for live video."):(t&&(this._videoElement.playbackRate=1,this.interval&&(clearInterval(this.interval),this.interval=void 0,this.seekOnSeeked=void 0,this.playOnSeeked=void 0,r=new CustomEvent("trickPlayEnded",{detail:this.trickPlayTime}),this._videoElement.dispatchEvent(r),this.trickPlayTime=void 0),this.trickPlayTime=void 0),null==e?this.logger.error("Missing parameter value"):e<1&&-1<e?this.logger.warn("Trick Play value between -1 and 1 is not supported."):Number.isFinite(e)?1===(this.trickPlayValue=e)?(this._videoElement.playbackRate=1,this.seekOnSeeked=void 0,this.playOnSeeked=void 0,this.interval&&(clearInterval(this.interval),this.interval=void 0,this.seek(this.trickPlayTime),r=new CustomEvent("trickPlayEnded",{detail:this.trickPlayTime}),this._videoElement.dispatchEvent(r),this.lastState_==this.PLAYER_STATES.PLAYING&&this.play(),this.trickPlayTime=void 0)):(this.interval&&clearInterval(this.interval),this.isSeeking_?this.pauseOnSeeked=!0:this._videoElement.pause(),this.lastState_=this.currentState_,this._videoElement.playbackRate=0,(a=this).trickPlayTime||(this.trickPlayTime=this._videoElement.currentTime),this.interval=setInterval(function(){var e;(1<a.trickPlayValue&&a.trickPlayTime<a._videoElement.duration||a.trickPlayValue<1&&0<a.trickPlayTime)&&(0<a.trickPlayValue?a.trickPlayTime++:a.trickPlayTime--,e=new CustomEvent("trickPlayTimeUpdate",{detail:a.trickPlayTime}),a._videoElement.dispatchEvent(e))},1e3/Math.abs(a.trickPlayValue)),r=new CustomEvent("trickPlayStarted",{detail:a.trickPlayTime}),this._videoElement.dispatchEvent(r)):this.logger.error("Trick Play value must be finite."))},o.prototype.play=function(){1!==this.trickPlayValue&&this.trickPlay(1),this.isSeeking_?this.playOnSeeked=!0:this._videoElement.play()},o.prototype.pause=function(){1!==this.trickPlayValue&&this.trickPlay(1),this.isSeeking_?this.pauseOnSeeked=!0:this._videoElement.pause()},o.prototype.destroy=function(){this._startingBufferInterval&&clearInterval(this._startingBufferInterval),this.shaka_.unload(),this._userActionDestroy=!0,this._encoder&&(this._encoder=null),this.EVENT_MANAGER.removeAll(),document.removeEventListener("visibilitychange",this.visibilityHandler_),this._div&&this.loadingsubtilesBind&&this._div.removeEventListener("loadingsubtiles",this.loadingsubtilesBind,!1),this._videoElement&&this.loadedsubtitlesBind&&this._videoElement.removeEventListener("loadedsubtitles",this.loadedsubtitlesBind,!1);var a=this;return new Promise(function(e,t){a.shaka_.destroy().then(function(){a.logger.info("Player destroyed!"),e()}).catch(function(e){a.logger.error("Exception caught while trying to destroy the player",e),t(e)})})}},function(e,t,a){"use strict";e.exports=function(r){var n=r.byteLength,i=0,o=0;this.length=function(){return 8*n},this.bitsAvailable=function(){return 8*n+o},this.loadWord=function(){var e=r.byteLength-n,t=new Uint8Array(4),a=Math.min(4,n);if(0===a)throw new Error("no bytes available");t.set(r.subarray(e,e+a)),i=new DataView(t.buffer).getUint32(0),o=8*a,n-=a},this.skipBits=function(e){var t;e<o||(e=(e-=o)-8*(t=Math.floor(e/8)),n-=t,this.loadWord()),i<<=e,o-=e},this.readBits=function(e){var t=Math.min(o,e),a=i>>>32-t;return 0<(o-=t)?i<<=t:0<n&&this.loadWord(),0<(t=e-t)?a<<t|this.readBits(t):a},this.skipLeadingZeros=function(){for(var e=0;e<o;++e)if(0!=(i&2147483648>>>e))return i<<=e,o-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}},function(e,t,a){"use strict";e.exports={generator:a(93),probe:a(495),Transmuxer:a(143).Transmuxer,AudioSegmentStream:a(143).AudioSegmentStream,VideoSegmentStream:a(143).VideoSegmentStream,CaptionParser:a(499)}},function(e,t,a){"use strict";var i=a(94).toUnsigned,o=a(94).toHexString,s=a(138),l=a(139),u=a(140),c=a(141),d=a(142),h=function(e){var t=0===e[0]?12:20;return i(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])};e.exports={findBox:s,parseType:l,timescale:function(e){return s(e,["moov","trak"]).reduce(function(e,t){var a,r,n=s(t,["tkhd"])[0];return n&&(a=n[0],n=i(n[r=0===a?12:20]<<24|n[1+r]<<16|n[2+r]<<8|n[3+r]),t=s(t,["mdia","mdhd"])[0])?(a=t[0],e[n]=i(t[r=0===a?12:20]<<24|t[1+r]<<16|t[2+r]<<8|t[3+r]),e):null},{})},startTime:function(r,e){e=s(e,["moof","traf"]),e=[].concat.apply([],e.map(function(a){return s(a,["tfhd"]).map(function(e){var e=i(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),e=r[e]||9e4,t=s(a,["tfdt"]).map(function(e){var t=e[0],a=i(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return a=1===t?(a*=Math.pow(2,32))+i(e[8]<<24|e[9]<<16|e[10]<<8|e[11]):a})[0];return(t||1/0)/e})})),e=Math.min.apply(null,e);return isFinite(e)?e:0},compositionStartTime:function(e,t){var a,r,n,t=s(t,["moof","traf"]),i=0,o=0,t=(t&&t.length&&(n=s(t[0],["tfhd"])[0],a=s(t[0],["trun"])[0],t=s(t[0],["tfdt"])[0],n&&(r=u(n).trackId),t&&(i=d(t).baseMediaDecodeTime),a)&&(n=c(a)).samples&&n.samples.length&&(o=n.samples[0].compositionTimeOffset||0),e[r]||9e4);return(i+o)/t},videoTrackIds:function(e){var e=s(e,["moov","trak"]),r=[];return e.forEach(function(e){var t=s(e,["mdia","hdlr"]),a=s(e,["tkhd"]);t.forEach(function(e,t){var e=l(e.subarray(8,12)),t=a[t];"vide"===e&&(t=0===(e=new DataView(t.buffer,t.byteOffset,t.byteLength)).getUint8(0)?e.getUint32(12):e.getUint32(20),r.push(t))})}),r},tracks:function(e){var e=s(e,["moov","trak"]),i=[];return e.forEach(function(e){var t,a={},r=s(e,["tkhd"])[0],n=(r&&(n=(r=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),a.id=0===n?r.getUint32(12):r.getUint32(20)),s(e,["mdia","hdlr"])[0]),n=(n&&(r=l(n.subarray(8,12)),a.type="vide"===r?"video":"soun"===r?"audio":r),s(e,["mdia","minf","stbl","stsd"])[0]),r=(n&&(r=n.subarray(8),a.codec=l(r.subarray(4,8)),n=s(r,[a.codec])[0])&&(/^[a-z]vc[1-9]$/i.test(a.codec)?(t=n.subarray(78),"avcC"===l(t.subarray(4,8))&&11<t.length?(a.codec+=".",a.codec+=o(t[9]),a.codec+=o(t[10]),a.codec+=o(t[11])):a.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(a.codec)&&(t=n.subarray(28),"esds"===l(t.subarray(4,8))&&20<t.length&&0!==t[19]?(a.codec+="."+o(t[19]),a.codec+="."+o(t[20]>>>2&63).replace(/^0/,"")):a.codec="mp4a.40.2")),s(e,["mdia","mdhd"])[0]);r&&(a.timescale=h(r)),i.push(a)}),i},getTimescaleFromMediaHeader:h}},function(e,t,a){"use strict";e.exports=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},function(e,t,a){"use strict";function r(e){for(var t=[];e--;)t.push(0);return t}var n,i=[33,16,5,32,164,27],o=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];e.exports=function(){var e,a;return n||(e={96e3:[i,[227,64],r(154),[56]],88200:[i,[231],r(170),[56]],64e3:[i,[248,192],r(240),[56]],48e3:[i,[255,192],r(268),[55,148,128],r(54),[112]],44100:[i,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[i,[255,192],r(268),[55,234],r(226),[112]],24e3:[i,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[i,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[o,r(268),[3,121,16],r(47),[7]]},a=e,n=Object.keys(a).reduce(function(e,t){return e[t]=new Uint8Array(a[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),n}},function(e,t,a){"use strict";function r(e,t,a){for(var r="",n=t;n<a;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}function n(e,t,a){return decodeURIComponent(r(e,t,a))}function h(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var i=a(22),o=a(97),p={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=n(e.data,1,t),e.value=n(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=n(e.data,1,t),e.url=n(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,a=0;a<e.data.length;a++)if(0===e.data[a]){e.owner=(t=e.data,unescape(r(t,0,a)));break}e.privateData=e.data.subarray(a+1),e.data=e.privateData}},s=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(s.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,a,r,n,i,o,s;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=h(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},n=0;n<u;)t.data.set(c[0].data.subarray(0,u-n),n),n+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();a=10,64&t.data[5]&&(a=(a+=4)+h(t.data.subarray(10,14)),u-=h(t.data.subarray(16,20)));do{if((r=h(t.data.subarray(a+4,a+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}while((s={id:String.fromCharCode(t.data[a],t.data[a+1],t.data[a+2],t.data[a+3]),data:t.data.subarray(a+10,a+r+10)}).key=s.id,p[s.id]&&(p[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)&&(o=(1&(i=s.data)[3])<<30|i[4]<<22|i[5]<<14|i[6]<<6|i[7]>>>2,o=(o*=4)+(3&i[7]),s.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)),t.frames.push(s),(a=a+10+r)<u);this.trigger("data",t)}}};s.prototype=new i,e.exports=s},function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=a(198).discardEmulationPreventionBytes,i=a(197).CaptionStream,p=a(138),f=a(142),m=a(141),g=a(140),c=function(e,c){var a=p(e,["moof","traf"]),e=p(e,["mdat"]),d={},r=[];return e.forEach(function(e,t){t=a[t];r.push({mdat:e,traf:t})}),r.forEach(function(e){var t,a,r,n,i,o=e.mdat,e=e.traf,s=p(e,["tfhd"]),s=g(s[0]),l=s.trackId,u=p(e,["tfdt"]),u=0<u.length?f(u[0]).baseMediaDecodeTime:0,e=p(e,["trun"]);c===l&&0<e.length&&(t=u,a=s.defaultSampleDuration||0,r=s.defaultSampleSize||0,n=s.trackId,i=[],e.forEach(function(e){e=m(e).samples;e.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=r),e.trackId=n,e.dts=t,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=t+e.compositionTimeOffset,t+=e.duration}),i=i.concat(e)}),u=function(e,t,a){for(var r,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),o=[],s=0;s+4<e.length;s+=r)if(r=i.getUint32(s),s+=4,!(r<=0))switch(31&e[s]){case 6:var l=e.subarray(s+1,s+1+r),u=function(e,t){for(var a=e,r=0;r<t.length;r++){var n=t[r];if(a<n.size)return n;a-=n.size}return null}(s,t),l={nalUnitType:"sei_rbsp",size:r,data:l,escapedRBSP:h(l),trackId:a};if(u)l.pts=u.pts,l.dts=u.dts,n=u;else{if(!n){console.log("We've encountered a nal unit without data. See mux.js#233.");break}l.pts=n.pts,l.dts=n.dts}o.push(l)}return o}(o,i,l),d[l]||(d[l]=[]),d[l]=d[l].concat(u))}),d};e.exports=function(){var t,o,s,l,u,a,r=!1;this.isInitialized=function(){return r},this.init=function(e){t=new i,r=!0,a=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/l,e.endTime=e.endPts/l,u.captions.push(e),u.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===(void 0===t?"undefined":n(t))&&0===Object.keys(t).length||s===e[0]&&l===t[s])},this.parse=function(e,t,a){var r,n;if(!this.isInitialized())return null;if(!t||!a)return null;if(this.isNewInit(t,a))s=t[0],l=a[s];else if(null===s||!l)return o.push(e),null;for(;0<o.length;){var i=o.shift();this.parse(i,t,a)}return e=e,n=l,null!==(e=null===(r=s)?null:{seiNals:c(e,r)[r],timescale:n})&&e.seiNals?(this.pushNals(e.seiNals),this.flushStream(),u):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;a?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){o=[],l=s=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},function(e,t,a){"use strict";e.exports={tag:a(144),Transmuxer:a(501),getFlvHeader:a(504)}},function(e,t,a){"use strict";var f,m,r=a(22),l=a(144),g=a(96),y=a(92),v=a(137).H264Stream,_=a(502),u=a(503),c=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},s=function(e,t){var a=new l(l.METADATA_TAG);return a.dts=t,a.pts=t,a.writeMetaDataDouble("videocodecid",7),a.writeMetaDataDouble("width",e.width),a.writeMetaDataDouble("height",e.height),a},d=function(e,t){var a,r=new l(l.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),a=0;a<e.pps.length;++a)r.writeShort(e.pps[a].length),r.writeBytes(e.pps[a]);return r},k=function(n){var i,o=[],s=[];k.prototype.init.call(this),this.push=function(e){c(n,e),n&&(n.audioobjecttype=e.audioobjecttype,n.channelcount=e.channelcount,n.samplerate=e.samplerate,n.samplingfrequencyindex=e.samplingfrequencyindex,n.samplesize=e.samplesize,n.extraData=n.audioobjecttype<<11|n.samplingfrequencyindex<<7|n.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),o.push(e)},this.flush=function(){var e,t,a,r=new u;if(0!==o.length){for(a=-1/0;o.length;)e=o.shift(),s.length&&e.pts>=s[0]&&(a=s.shift(),this.writeMetaDataTags(r,a)),(n.extraData!==i||1e3<=e.pts-a)&&(this.writeMetaDataTags(r,e.pts),i=n.extraData,a=e.pts),(t=new l(l.AUDIO_TAG)).pts=e.pts,t.dts=e.dts,t.writeBytes(e.data),r.push(t.finalize());s.length=0,i=null,this.trigger("data",{track:n,tags:r.list})}this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,t){var a=new l(l.METADATA_TAG);a.pts=t,a.dts=t,a.writeMetaDataDouble("audiocodecid",10),a.writeMetaDataBoolean("stereo",2===n.channelcount),a.writeMetaDataDouble("audiosamplerate",n.samplerate),a.writeMetaDataDouble("audiosamplesize",16),e.push(a.finalize()),(a=new l(l.AUDIO_TAG,!0)).pts=t,a.dts=t,a.view.setUint16(a.position,n.extraData),a.position+=2,a.length=Math.max(a.length,a.position),e.push(a.finalize())},this.onVideoKeyFrame=function(e){s.push(e)}};k.prototype=new r,(m=function(n){var i,o,a=[];m.prototype.init.call(this),this.finishFrame=function(e,t){var a,r;t&&(i&&n&&n.newMetadata&&(t.keyFrame||0===e.length)&&(a=s(i,t.dts).finalize(),r=d(n,t.dts).finalize(),a.metaDataTag=r.metaDataTag=!0,e.push(a),e.push(r),n.newMetadata=!1,this.trigger("keyframe",t.dts)),t.endNalUnit(),e.push(t.finalize()),o=null)},this.push=function(e){c(n,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),a.push(e)},this.flush=function(){for(var e,t=new u;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){for(;a.length;)"seq_parameter_set_rbsp"===(e=a.shift()).nalUnitType?(n.newMetadata=!0,i=e.config,n.width=i.width,n.height=i.height,n.sps=[e.data],n.profileIdc=i.profileIdc,n.levelIdc=i.levelIdc,n.profileCompatibility=i.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===e.nalUnitType?(n.newMetadata=!0,n.pps=[e.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===e.nalUnitType?(o&&this.finishFrame(t,o),(o=new l(l.VIDEO_TAG)).pts=e.pts,o.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(e.data);o&&this.finishFrame(t,o),this.trigger("data",{track:n,tags:t.list})}this.trigger("done","VideoSegmentStream")}}).prototype=new r,(f=function(e){var t,a,r,n,i,o,s,l,u,c,d,h,p=this;f.prototype.init.call(this),e=e||{},this.metadataStream=new g.MetadataStream,e.metadataStream=this.metadataStream,t=new g.TransportPacketStream,a=new g.TransportParseStream,r=new g.ElementaryStream,n=new g.TimestampRolloverStream("video"),i=new g.TimestampRolloverStream("audio"),o=new g.TimestampRolloverStream("timed-metadata"),s=new y,l=new v,h=new _(e),t.pipe(a).pipe(r),r.pipe(n).pipe(l),r.pipe(i).pipe(s),r.pipe(o).pipe(this.metadataStream).pipe(h),d=new g.CaptionStream,l.pipe(d).pipe(h),r.on("data",function(e){var t,a,r;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?a=e.tracks[t]:"audio"===e.tracks[t].type&&(r=e.tracks[t]);a&&!u&&(h.numberOfTracks++,u=new m(a),l.pipe(u).pipe(h)),r&&!c&&(h.numberOfTracks++,c=new k(r),s.pipe(c).pipe(h),u)&&u.on("keyframe",c.onVideoKeyFrame)}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){d.reset()},h.on("data",function(e){p.trigger("data",e)}),h.on("done",function(){p.trigger("done")})}).prototype=new r,e.exports=f},function(e,t,a){"use strict";function r(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,r.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}}a=a(22);(r.prototype=new a).flush=function(e){var t,a,r,n,i={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?n=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(n=this.audioTrack.timelineStartInfo.pts),i.tags.videoTags=this.videoTags,i.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(a=this.pendingCaptions[r]).startTime=a.startPts-n,a.startTime/=9e4,a.endTime=a.endPts-n,a.endTime/=9e4,i.captionStreams[a.stream]=!0,i.captions.push(a);for(r=0;r<this.pendingMetadata.length;r++)(t=this.pendingMetadata[r]).cueTime=t.pts-n,t.cueTime/=9e4,i.metadata.push(t);i.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",i),this.trigger("done")}},e.exports=r},function(e,t,a){"use strict";e.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},function(e,t,a){"use strict";var o=a(144);e.exports=function(e,t,a){var r,n=new Uint8Array(9),i=new DataView(n.buffer);return e=e||0,t=void 0===t||t,a=void 0===a||a,i.setUint8(0,70),i.setUint8(1,76),i.setUint8(2,86),i.setUint8(3,1),i.setUint8(4,(t?4:0)|(a?1:0)),i.setUint32(5,n.byteLength),e<=0?((r=new Uint8Array(n.byteLength+4)).set(n),r.set([0,0,0,0],n.byteLength)):((t=new o(o.METADATA_TAG)).pts=t.dts=0,t.writeMetaDataDouble("duration",e),a=t.finalize().length,(r=new Uint8Array(n.byteLength+a)).set(n),r.set(i.byteLength,a)),r}},function(e,t,a){"use strict";e.exports=a(96)},function(e,t,a){"use strict";e.exports={Transmuxer:a(507)}},function(e,t,a){"use strict";function u(t,a){t.on("data",a.trigger.bind(a,"data")),t.on("done",a.trigger.bind(a,"done")),t.on("partialdone",a.trigger.bind(a,"partialdone")),t.on("endedtimeline",a.trigger.bind(a,"endedtimeline")),t.on("audioTimingInfo",a.trigger.bind(a,"audioTimingInfo")),t.on("videoTimingInfo",a.trigger.bind(a,"videoTimingInfo")),t.on("trackinfo",a.trigger.bind(a,"trackinfo")),t.on("id3Frame",function(e){e.dispatchType=t.metadataStream.dispatchType,e.cueTime=y.videoTsToSeconds(e.pts),a.trigger("id3Frame",e)}),t.on("caption",function(e){a.trigger("caption",e)})}function r(o){var s=null,l=!0;o=o||{},r.prototype.init.call(this),o.baseMediaDecodeTime=o.baseMediaDecodeTime||0,this.push=function(e){var t,a,r,n,i;l&&(!(t=f(e))||s&&"aac"===s.type?t||s&&"ts"===s.type||(a=o,(r={type:"ts",tracks:{audio:null,video:null},packet:new c.TransportPacketStream,parse:new c.TransportParseStream,elementary:new c.ElementaryStream,timestampRollover:new c.TimestampRolloverStream,adts:new d.Adts,h264:new d.h264.H264Stream,captionStream:new c.CaptionStream,metadataStream:new c.MetadataStream}).headOfPipeline=r.packet,r.packet.pipe(r.parse).pipe(r.elementary).pipe(r.timestampRollover),r.timestampRollover.pipe(r.h264),r.h264.pipe(r.captionStream),r.timestampRollover.pipe(r.metadataStream),r.timestampRollover.pipe(r.adts),r.elementary.on("data",function(e){if("metadata"===e.type){for(var t=0;t<e.tracks.length;t++)r.tracks[e.tracks[t].type]||(r.tracks[e.tracks[t].type]=e.tracks[t],r.tracks[e.tracks[t].type].timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime);r.tracks.video&&!r.videoSegmentStream&&(r.videoSegmentStream=new p(r.tracks.video,a),r.videoSegmentStream.on("timelineStartInfo",function(e){r.tracks.audio&&!a.keepOriginalTimestamps&&r.audioSegmentStream.setEarliestDts(e.dts-a.baseMediaDecodeTime)}),r.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),r.videoSegmentStream.on("data",function(e){r.trigger("data",{type:"video",data:e})}),r.videoSegmentStream.on("done",r.trigger.bind(r,"done")),r.videoSegmentStream.on("partialdone",r.trigger.bind(r,"partialdone")),r.videoSegmentStream.on("endedtimeline",r.trigger.bind(r,"endedtimeline")),r.h264.pipe(r.videoSegmentStream)),r.tracks.audio&&!r.audioSegmentStream&&(r.audioSegmentStream=new h(r.tracks.audio,a),r.audioSegmentStream.on("data",function(e){r.trigger("data",{type:"audio",data:e})}),r.audioSegmentStream.on("done",r.trigger.bind(r,"done")),r.audioSegmentStream.on("partialdone",r.trigger.bind(r,"partialdone")),r.audioSegmentStream.on("endedtimeline",r.trigger.bind(r,"endedtimeline")),r.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),r.adts.pipe(r.audioSegmentStream)),r.trigger("trackinfo",{hasAudio:!!r.tracks.audio,hasVideo:!!r.tracks.video})}}),r.captionStream.on("data",function(e){var t=r.tracks.video&&r.tracks.video.timelineStartInfo.pts||0;e.startTime=y.metadataTsToSeconds(e.startPts,t,a.keepOriginalTimestamps),e.endTime=y.metadataTsToSeconds(e.endPts,t,a.keepOriginalTimestamps),r.trigger("caption",e)}),(r=v(r)).metadataStream.on("data",r.trigger.bind(r,"id3Frame")),u(s=r,this)):(n=o,(i={type:"aac",tracks:{audio:null},metadataStream:new c.MetadataStream,aacStream:new g,audioRollover:new c.TimestampRolloverStream("audio"),timedMetadataRollover:new c.TimestampRolloverStream("timed-metadata"),adtsStream:new m(!0)}).headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioRollover).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataRollover).pipe(i.metadataStream),i.metadataStream.on("timestamp",function(e){i.aacStream.setTimestamp(e.timeStamp)}),i.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||i.audioSegmentStream||(i.tracks.audio=i.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},i.audioSegmentStream=new h(i.tracks.audio,n),i.audioSegmentStream.on("data",function(e){i.trigger("data",{type:"audio",data:e})}),i.audioSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone")),i.audioSegmentStream.on("done",i.trigger.bind(i,"done")),i.audioSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline")),i.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream),i.trigger("trackinfo",{hasAudio:!!i.tracks.audio,hasVideo:!!i.tracks.video}))}),(i=v(i)).metadataStream.on("data",i.trigger.bind(i,"id3Frame")),u(s=i,this)),l=!1),s.headOfPipeline.push(e)},this.flush=function(){s&&(l=!0,s.headOfPipeline.flush())},this.partialFlush=function(){s&&s.headOfPipeline.partialFlush()},this.endTimeline=function(){s&&s.headOfPipeline.endTimeline()},this.reset=function(){s&&s.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){o.keepOriginalTimestamps||(o.baseMediaDecodeTime=e),s&&(s.tracks.audio&&(s.tracks.audio.timelineStartInfo.dts=void 0,s.tracks.audio.timelineStartInfo.pts=void 0,i.clearDtsInfo(s.tracks.audio),s.audioRollover)&&s.audioRollover.discontinuity(),s.tracks.video&&(s.videoSegmentStream&&(s.videoSegmentStream.gopCache_=[]),s.tracks.video.timelineStartInfo.dts=void 0,s.tracks.video.timelineStartInfo.pts=void 0,i.clearDtsInfo(s.tracks.video)),s.timestampRollover)&&s.timestampRollover.discontinuity()},this.setRemux=function(e){o.remux=e,s&&s.coalesceStream&&s.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){s&&s.tracks.audio&&s.audioSegmentStream&&s.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}}var n=a(22),c=a(96),d=a(194),h=a(508),p=a(509),i=a(95),f=a(98).isLikelyAacData,m=a(92),g=a(200),y=a(45),v=function(e){return e.prototype=new n,e.prototype.init.call(e),e};r.prototype=new n,e.exports=r},function(e,t,a){"use strict";function r(n,i){var o=[],s=0,l=0,u=0,c=1/0,d=null,h=null;i=i||{},r.prototype.init.call(this),this.push=function(t){m.collectDtsInfo(n,t),n&&y.forEach(function(e){n[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e},this.setVideoBaseMediaDecodeTime=function(e){c=e},this.setAudioAppendStart=function(e){u=e},this.processFrames_=function(){var e,t,a,r;0!==o.length&&0!==(e=f.trimAdtsFramesByEarliestDts(o,n,l)).length&&(n.baseMediaDecodeTime=m.calculateTrackBaseMediaDecodeTime(n,i.keepOriginalTimestamps),f.prefixWithSilence(n,e,u,c),n.samples=f.generateSampleTable(e),r=p.mdat(f.concatenateFrameData(e)),o=[],t=p.moof(s,[n]),s++,n.initSegment=p.initSegment([n]),(a=new Uint8Array(t.byteLength+r.byteLength)).set(t),a.set(r,t.byteLength),m.clearDtsInfo(n),null===d&&(h=d=e[0].pts),h+=e.length*(1024*g/n.samplerate),r={start:d},this.trigger("timingInfo",r),this.trigger("data",{track:n,boxes:a}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:d,end:h}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){m.clearDtsInfo(n),h=d=null},this.reset=function(){this.resetTiming_(),o=[],this.trigger("reset")}}var n=a(22),p=a(93),f=a(196),m=a(95),g=a(45).ONE_SECOND_IN_TS,y=a(201);r.prototype=new n,e.exports=r},function(e,t,a){"use strict";function r(s,l){var t,a,u,c=0,d=[],h=[],p=null,f=null,m=!0;l=l||{},r.prototype.init.call(this),this.push=function(e){y.collectDtsInfo(s,e),void 0===s.timelineStartInfo.dts&&(s.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],i.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||a||(a=e.data,s.pps=[e.data]),d.push(e)},this.processNals_=function(e){var t;for(d=h.concat(d);d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0!==d.length){var a=v.groupNalsIntoFrames(d);if(a.length){if(h=a[a.length-1],e&&(a.pop(),a.duration-=h.duration,a.nalCount-=h.length,a.byteLength-=h.byteLength),a.length){if(this.trigger("timelineStartInfo",s.timelineStartInfo),m){if(!(u=v.groupFramesIntoGops(a))[0][0].keyFrame){if(!(u=v.extendFirstKeyFrame(u))[0][0].keyFrame)return d=[].concat.apply([],a).concat(h),void(h=[]);(a=[].concat.apply([],u)).duration=u.duration}m=!1}for(null===p&&(p=a[0].pts,f=p),f+=a.duration,this.trigger("timingInfo",{start:p,end:f}),t=0;t<a.length;t++){var r=a[t],n=(s.samples=v.generateSampleTableForFrame(r),g.mdat(v.concatenateNalDataForFrame(r))),i=(y.clearDtsInfo(s),y.collectDtsInfo(s,r),s.baseMediaDecodeTime=y.calculateTrackBaseMediaDecodeTime(s,l.keepOriginalTimestamps),g.moof(c,[s])),o=(c++,s.initSegment=g.initSegment([s]),new Uint8Array(i.byteLength+n.byteLength));o.set(i),o.set(n,i.byteLength),this.trigger("data",{track:s,boxes:o,sequence:c,videoFrameDts:r.dts,videoFramePts:r.pts})}}d=[]}}},this.resetTimingAndConfig_=function(){a=t=void 0,f=p=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),h=[],d=[],m=!0,this.trigger("reset")}}var n=a(22),g=a(93),y=a(95),v=a(195),i=a(202);r.prototype=new n,e.exports=r},function(e,t,a){"use strict";function n(e){return new Date(1e3*e-20828448e5)}var d=a(139),r=a(138),h={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:i(e.subarray(78,e.byteLength))}},avcC:function(e){for(var t,a,r=new DataView(e.buffer,e.byteOffset,e.byteLength),n={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},i=31&e[5],o=6,s=0;s<i;s++)a=r.getUint16(o),o+=2,n.sps.push(new Uint8Array(e.subarray(o,o+a))),o+=a;for(t=e[o],o++,s=0;s<t;s++)a=r.getUint16(o),o+=2,n.pps.push(new Uint8Array(e.subarray(o,o+a))),o+=a;return n},btrt:function(e){e=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={majorBrand:d(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)a.compatibleBrands.push(d(e.subarray(r,r+4))),r+=4;return a},dinf:function(e){return{boxes:i(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:i(e.subarray(8))}},hdlr:function(e){for(var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:d(e.subarray(8,12)),name:""},a=8,a=24;a<e.byteLength;a++){if(0===e[a]){a++;break}t.name+=String.fromCharCode(e[a])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){for(var t,a=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[],n=0;n+4<e.length;n+=t)if(t=a.getUint32(n),n+=4,t<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[n]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[n]&31)}return r}(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,e={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===e.version?(e.creationTime=n(t.getUint32(a+=4)),e.modificationTime=n(t.getUint32(a+=8)),e.timescale=t.getUint32(a+=4),e.duration=t.getUint32(a+=8)):(e.creationTime=n(t.getUint32(a)),e.modificationTime=n(t.getUint32(a+=4)),e.timescale=t.getUint32(a+=4),e.duration=t.getUint32(a+=4)),t=t.getUint16(a+=4),e.language+=String.fromCharCode(96+(t>>10)),e.language+=String.fromCharCode(96+((992&t)>>5)),e.language+=String.fromCharCode(96+(31&t)),e},mdia:function(e){return{boxes:i(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:i(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),t={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(t.streamDescriptor=i(e.subarray(28))[0]),t},moof:function(e){return{boxes:i(e)}},moov:function(e){return{boxes:i(e)}},mvex:function(e){return{boxes:i(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(r.creationTime=n(t.getUint32(a+=4)),r.modificationTime=n(t.getUint32(a+=8)),r.timescale=t.getUint32(a+=4),r.duration=t.getUint32(a+=8)):(r.creationTime=n(t.getUint32(a)),r.modificationTime=n(t.getUint32(a+=4)),r.timescale=t.getUint32(a+=4),r.duration=t.getUint32(a+=4)),r.rate=t.getUint16(a+=4)+t.getUint16(a+2)/16,r.volume=t.getUint8(a+=4)+t.getUint8(a+1)/8,a=(a+=2)+2+8,r.matrix=new Uint32Array(e.subarray(a,a+36)),r.nextTrackId=t.getUint32(a=a+36+24),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){for(var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},a=4;a<e.byteLength;a++)t.samples.push({dependsOn:(48&e[a])>>4,isDependedOn:(12&e[a])>>2,hasRedundancy:3&e[a]});return t},sidx:a(511),smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:i(e)}},stco:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=t.getUint32(4),n=8;r;n+=4,r--)a.chunkOffsets.push(t.getUint32(n));return a},stsc:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=t.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},n=8;a;n+=12,a--)r.sampleToChunks.push({firstChunk:t.getUint32(n),samplesPerChunk:t.getUint32(n+4),sampleDescriptionIndex:t.getUint32(n+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:i(e.subarray(8))}},stsz:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},r=12;r<e.byteLength;r+=4)a.entries.push(t.getUint32(r));return a},stts:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=t.getUint32(4),n=8;r;n+=8,r--)a.timeToSamples.push({sampleCount:t.getUint32(n),sampleDelta:t.getUint32(n+4)});return a},styp:function(e){return h.ftyp(e)},tfdt:a(142),tfhd:a(140),tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(r.creationTime=n(t.getUint32(a+=4)),r.modificationTime=n(t.getUint32(a+=8)),r.trackId=t.getUint32(a+=4),r.duration=t.getUint32(a=a+4+8)):(r.creationTime=n(t.getUint32(a)),r.modificationTime=n(t.getUint32(a+=4)),r.trackId=t.getUint32(a+=4),r.duration=t.getUint32(a=a+4+4)),r.layer=t.getUint16(a=a+4+8),r.alternateGroup=t.getUint16(a+=2),r.volume=t.getUint8(a+=2)+t.getUint8(a+1)/8,a=a+2+2,r.matrix=new Uint32Array(e.subarray(a,a+36)),r.width=t.getUint16(a+=36)+t.getUint16(a+2)/65536,r.height=t.getUint16(a+=4)+t.getUint16(a+2)/65536,r},traf:function(e){return{boxes:i(e)}},trak:function(e){return{boxes:i(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:a(141),"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},i=function(e){for(var t,a,r,n,i,o=0,s=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);o<e.byteLength;)a=t.getUint32(o),r=d(e.subarray(o+4,o+8)),n=1<a?o+a:e.byteLength,(i=(h[r]||function(e){return{data:e}})(e.subarray(o+8,n))).size=a,i.type=r,s.push(i),o=n;return s},o=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(r,e){return n+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t,a=n+"  "+e+": ",e=r[e];return e instanceof Uint8Array||e instanceof Uint32Array?(t=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===t.length?a+"<"+t.join("").slice(1)+">":a+"<\n"+t.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":a+"<>":a+JSON.stringify(e,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+o(r.boxes,t+1):"")}).join("\n")};e.exports={inspect:i,textify:o,parseType:d,findBox:r,parseTraf:h.traf,parseTfdt:h.tfdt,parseHdlr:h.hdlr,parseTfhd:h.tfhd,parseTrun:h.trun,parseSidx:h.sidx}},function(e,t,a){"use strict";e.exports=function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},r=t.getUint16(22),n=24;r;n+=12,r--)a.references.push({referenceType:(128&e[n])>>>7,referencedSize:2147483647&t.getUint32(n),subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(128&e[n+8]),sapType:(112&e[n+8])>>>4,sapDeltaTime:268435455&t.getUint32(n+8)});return a}},function(e,t,a){"use strict";function r(e){for(var t,a=[];0<e.byteLength;)t=0,a.push("0x"+("00"+e[+t].toString(16)).slice(-2).toUpperCase()),e=e.subarray(1);return a.join(" ")}function i(e){var t,a,r,n={tagType:o[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]};switch(e[0]){case 8:t=e.subarray(11),a=n,r=(t[0]&parseInt("11110000",2))>>>4,(a=a||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][r],a.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(t[0]&parseInt("00001100",2))>>>2],a.soundSize=(t[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",a.soundType=t[0]&parseInt("00000001",2)?"Stereo":"Mono",10==r&&l(t.subarray(1),a);break;case 9:r=e.subarray(11),t=n,a=r[0]&parseInt("00001111",2),(t=t||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(r[0]&parseInt("11110000",2))>>>4],7==(t.codecID=a)&&s(r.subarray(1),t)}return n}var o={8:"audio",9:"video",18:"metadata"},s=function(e,t){var a=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return(t=t||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-a:a,1===e[0]?t.nalUnitTypeRaw=r(e.subarray(4,100)):t.data=r(e.subarray(4)),t},l=function(e,t){return(t=t||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][e[0]],t.data=r(e.subarray(1)),t};e.exports={inspectTag:i,inspect:function(e){var t,a,r=9,n=[];for(r+=4;r<e.byteLength;)t=e[r+1]<<16,t=11+((t|=e[r+2]<<8)|e[r+3]),a=e.subarray(r,r+t),n.push(i(a)),r+=4+t;return n},textify:function(e){return JSON.stringify(e,null,2)}}},function(e,t,a){"use strict";var i=a(97),o=a(199).handleRollover,m={},u=(m.ts=a(514),m.aac=a(98),a(45).ONE_SECOND_IN_TS),s=function(e,t){for(var a,r=0,n=188;n<e.byteLength;)if(71===e[r]&&71===e[n]){switch(a=e.subarray(r,n),m.ts.parseType(a,t.pid)){case"pat":t.pid||(t.pid=m.ts.parsePat(a));break;case"pmt":t.table||(t.table=m.ts.parsePmt(a))}if(t.pid&&t.table)return;r+=188,n+=188}else r++,n++},l=function(e,t,a){for(var r,n,i,o,s=0,l=188,u=!1;l<=e.byteLength;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s++,l++;else{if(r=e.subarray(s,l),"pes"===m.ts.parseType(r,t.pid)&&(n=m.ts.parsePesType(r,t.table),i=m.ts.parsePayloadUnitStartIndicator(r),"audio"===n)&&i&&(o=m.ts.parsePesTime(r))&&(o.type="audio",a.audio.push(o),u=!0),u)break;s+=188,l+=188}for(s=(l=e.byteLength)-188,u=!1;0<=s;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s--,l--;else{if(r=e.subarray(s,l),"pes"===m.ts.parseType(r,t.pid)&&(n=m.ts.parsePesType(r,t.table),i=m.ts.parsePayloadUnitStartIndicator(r),"audio"===n)&&i&&(o=m.ts.parsePesTime(r))&&(o.type="audio",a.audio.push(o),u=!0),u)break;s-=188,l-=188}},c=function(e,t,a){for(var r,n,i,o,s,l,u,c,d=0,h=188,p=!1,f={data:[],size:0};h<e.byteLength;)if(71===e[d]&&71===e[h]){if(r=e.subarray(d,h),"pes"===m.ts.parseType(r,t.pid))if(n=m.ts.parsePesType(r,t.table),i=m.ts.parsePayloadUnitStartIndicator(r),"video"===n&&(i&&!p&&(o=m.ts.parsePesTime(r))&&(o.type="video",a.video.push(o),p=!0),!a.firstKeyFrame)){if(i&&0!==f.size){for(s=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),s.set(u,l),l+=u.byteLength;m.ts.videoPacketContainsKeyFrame(s)&&((c=m.ts.parsePesTime(s))?(a.firstKeyFrame=c,a.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")),f.size=0}f.data.push(r),f.size+=r.byteLength}if(p&&a.firstKeyFrame)break;d+=188,h+=188}else d++,h++;for(d=(h=e.byteLength)-188,p=!1;0<=d;)if(71===e[d]&&71===e[h]){if(r=e.subarray(d,h),"pes"===m.ts.parseType(r,t.pid)&&(n=m.ts.parsePesType(r,t.table),i=m.ts.parsePayloadUnitStartIndicator(r),"video"===n)&&i&&(o=m.ts.parsePesTime(r))&&(o.type="video",a.video.push(o),p=!0),p)break;d-=188,h-=188}else d--,h--};e.exports={inspect:function(e,t){var a,r,n,e=(m.aac.isLikelyAacData(e)?function(e){for(var t,a,r=!1,n=0,i=null,o=null,s=0,l=0;3<=e.length-l;){switch(m.aac.parseType(e,l)){case"timed-metadata":e.length-l<10?r=!0:(s=m.aac.parseId3TagSize(e,l))>e.length?r=!0:(null===o&&(t=e.subarray(l,l+s),o=m.aac.parseAacTimestamp(t)),l+=s);break;case"audio":e.length-l<7?r=!0:(s=m.aac.parseAdtsSize(e,l))>e.length?r=!0:(null===i&&(t=e.subarray(l,l+s),i=m.aac.parseSampleRate(t)),n++,l+=s);break;default:l++}if(r)return null}return null===i||null===o?null:{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*n*(a=u/i),pts:o+1024*n*a}]}}:function(e){var t,a={pid:null,table:null},r={};for(t in s(e,a),a.table)if(a.table.hasOwnProperty(t))switch(a.table[t]){case i.H264_STREAM_TYPE:r.video=[],c(e,a,r),0===r.video.length&&delete r.video;break;case i.ADTS_STREAM_TYPE:r.audio=[],l(e,a,r),0===r.audio.length&&delete r.audio}return r})(e);return e&&(e.audio||e.video)?(t=t,(a=e).audio&&a.audio.length&&(void 0===(r=t)&&(r=a.audio[0].dts),a.audio.forEach(function(e){e.dts=o(e.dts,r),e.pts=o(e.pts,r),e.dtsTime=e.dts/u,e.ptsTime=e.pts/u})),a.video&&a.video.length&&(void 0===(n=t)&&(n=a.video[0].dts),a.video.forEach(function(e){e.dts=o(e.dts,n),e.pts=o(e.pts,n),e.dtsTime=e.dts/u,e.ptsTime=e.pts/u}),a.firstKeyFrame)&&((t=a.firstKeyFrame).dts=o(t.dts,n),t.pts=o(t.pts,n),t.dtsTime=t.dts/u,t.ptsTime=t.dts/u),e):null},parseAudioPes_:l}},function(e,t,a){"use strict";function r(e){var t=31&e[1];return t<<8|e[2]}function s(e){return!!(64&e[1])}function l(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function o(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var n=a(97);e.exports={parseType:function(e,t){e=r(e);return 0===e?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=s(e),a=4+l(e);return t&&(a+=e[a]+1),(31&e[a+10])<<8|e[a+11]},parsePmt:function(e){var t={},a=s(e),r=4+l(e);if(a&&(r+=e[r]+1),1&e[r+5]){for(var n=3+((15&e[r+1])<<8|e[r+2])-4,i=12+((15&e[r+10])<<8|e[r+11]);i<n;){var o=r+i;t[(31&e[o+1])<<8|e[o+2]]=e[o],i+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:s,parsePesType:function(e,t){switch(t[r(e)]){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){var t,a,r;return!s(e)||(t=4+l(e))>=e.byteLength?null:(a=null,192&(r=e[t+7])&&((a={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,a.pts*=4,a.pts+=(6&e[t+13])>>>1,a.dts=a.pts,64&r)&&(a.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,a.dts*=4,a.dts+=(6&e[t+18])>>>1),a)},videoPacketContainsKeyFrame:function(e){for(var t=4+l(e),a=e.subarray(t),r=0,n=0,i=!1;n<a.byteLength-3;n++)if(1===a[n+2]){r=n+5;break}for(;r<a.byteLength;)switch(a[r]){case 0:if(0!==a[r-1])r+=2;else if(0!==a[r-2])r++;else{for(n+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&a[n+3])&&(i=!0);1!==a[++r]&&r<a.length;);n=r-2,r+=3}break;case 1:0!==a[r-1]||0!==a[r-2]?r+=3:("slice_layer_without_partitioning_rbsp_idr"===o(31&a[n+3])&&(i=!0),n=r-2,r+=3);break;default:r+=3}return a=a.subarray(n),r-=n,n=0,i=a&&3<a.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===o(31&a[n+3])?!0:i}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,a,r,n,i,o,s,l,u,c,d){var h=0;this.thumbnails=null,this._step=null==i?1:i,this.thumbnails=e===h?new f.StaticThumbnails(t,a,r,n,l,c,d):new p.DynamicThumbnails(t,a,r,this._step,o,s,u),this.option=e}var p=a(516),f=a(517);r.prototype.destroy=function(){this.thumbnails.destroy(),this.thumbnails=null},r.prototype.getPreviewThumbnails=function(){return this.thumbnails.getPreviewThumbnails()},r.prototype.getThumbnailAt=function(e){return this.thumbnails.getThumbnailAt(e)},r.prototype.requestThumbnails=function(){},r.prototype.setstep=function(e){void 0===this._step&&(this._step=e),e!==this._step&&(this._step=e,this.thumbnails.resetWithNewStep)&&this.thumbnails.resetWithNewStep(this._step)},t.ThumbController=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,a,r,n,i,o){var s;this.player=e,this.video=t,this.callback=a,this.url=i,this.thumbPlayerCalled=!1,(-1<navigator.platform.toLowerCase().indexOf("android")||-1<navigator.userAgent.toLowerCase().indexOf("android"))&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")||/iPhone|iPad|iPod/i.test(navigator.userAgent)||(this.video.addEventListener("loadedmetadata",this.prepareThumbPlayer.bind(this)),this.video_=document.createElement("video"),this.video_.muted=!0,this.video_.autoplay=!0,this.video_.crossOrigin&&(this.video_.crossOrigin="anonymous"),this.video_.setAttribute("playsinline",""),this.isSafari=n,this.currentTime=0,this.lastCurrentTime=0,this.nextTimeToAdd=0,this.lastTimeBeforeMove=0,this.lastSeeked=0,this.nextLastSeeked=0,this.captureFrame=!1,this.step=r,this.thumbnails_=[],window.setTimeout(function(){this.video_.paused&&!this.thumbPlayerCalled&&this.prepareThumbPlayer()}.bind(this),3e3),(s=this).video.addEventListener("seeked",function(){s.nextTimeToAdd=s.video.currentTime,s.currentTime=s.video.currentTime,s.video_.currentTime=s.video.currentTime}),this.positionInBar=0,o.addEventListener("updatethumbnailposition",function(e){console.log("UPDATE THUMB POS",e.detail),s.positionInBar=e.detail}))}var n=a(203);r.prototype.destroy=function(){this.thumbnails_=[]},r.prototype.getLastThumbnail=function(){return 0!==this.thumbnails_.length?this.thumbnails_[this.thumbnails_.length-1]:null},r.prototype.getPreviewThumbnails=function(){return this.thumbnails_},r.prototype.prepareThumbPlayer=function(){this.thumbPlayerCalled=!0,this.video_.addEventListener("loadeddata",this.loadedThumbData.bind(this)),this.video_.addEventListener("seeked",function(){setTimeout(this.onPlayerSeeks.bind(this),50)}.bind(this)),this.video_.addEventListener("timeupdate",function(){setTimeout(this.addFrame.bind(this),50)}.bind(this)),this.isSafari?(this.player.getLowLevelURI&&(this.url=this.player.getLowLevelURI()),/iPhone|iPad|iPod/i.test(navigator.userAgent)?(this.timeoutPlaying=setInterval(function(){this.video_.paused?this.video.paused||this.video_.play():clearInterval(this.timeoutPlaying)}.bind(this),700),this.player.getLowerTrackPlayer(this.startThumbs.bind(this),this.video_)):(this.video_.src=this.url,this.thumbplayer_=null,this.video_.play())):this.player.getLowerTrackPlayer(this.startThumbs.bind(this),this.video_)},r.prototype.startThumbs=function(){var e=this.player.getThumbsElements();this.thumbplayer_=e.player,this.video_=e.video},r.prototype.loadedThumbData=function(){this.video_.play(),this.thumbnails_.splice(),this.video_.currentTime=0,this.currentTime=0,this.lastSeeked=0,this.nextLastSeeked=0,this.isSafari?this.tracksLoaded():this.player.setThumbTracks(this.tracksLoaded.bind(this))},r.prototype.tracksLoaded=function(){this.video_.play()},r.prototype.onPlayerSeeks=function(){this.lastSeeked===this.nextLastSeeked&&0!==this.nextLastSeeked&&this.captureFrame||(4===this.video_.readyState&&!this.video_.seeking&&this.isSeekable()?(this.video_.play(),this.lastSeeked=this.nextLastSeeked,this.captureFrame=!0):this.video_.currentTime+this.step<this.video_.duration&&setTimeout(this.onPlayerSeeks.bind(this),50))},r.prototype.addFrame=function(){this.captureFrame&&(this.captureFrame=!1,this.currentTime+this.step>this.video_.duration||this.player.isLive()?(this.video_.removeEventListener("loadeddata",this.loadedThumbData.bind(this)),this.video_.removeEventListener("seeked",this.onPlayerSeeks.bind(this)),void 0!==this.thumbplayer_&&this.thumbplayer_.reset&&this.thumbplayer_.reset(),this.player.isLive()&&this.thumbnails_.splice()):(this.video_.currentTime>=this.nextTimeToAdd||0!==this.positionInBar)&&(0!==this.positionInBar&&this.positionInBar<this.video_.duration?(this.lastCurrentTime=this.currentTime,this.currentTime=this.positionInBar,this.positionInBar=0):0!==this.lastCurrentTime?this.currentTime=this.lastCurrentTime:(this.currentTime=this.video_.currentTime,this.nextTimeToAdd=this.video_.currentTime+this.step),this.generateThumbnail(),this.video_.currentTime=this.currentTime.toFixed(1),this.video_.play(),this.nextLastSeeked=this.currentTime),void 0!==this.callback)&&null!==this.callback&&this.callback(this.thumbnails_)},r.prototype.generateThumbnail=function(){var e=document.createElement("canvas"),t=e.getContext("2d");t.width=300,t.height=150;try{t.drawImage(this.video_,0,0,300,150),this.thumbnails_.push(new n.Frame(e,300,150,this.thumbnails_.length*this.step,this.thumbnails_.length*this.step+this.step))}catch(e){"NS_ERROR_NOT_AVAILABLE"==e.name?setTimeout(this.generateThumbnail.bind(this),200):console.log("[DynamicThumbnails] ERROR: "+e.name)}},r.prototype.resetWithNewStep=function(e){this.step=e,this.thumbnails_.splice(),this.currentTime=0,this.video_.addEventListener("loadeddata",this.loadedThumbData.bind(this)),this.video_.addEventListener("seeked",this.addFrame.bind(this)),this.addFrame()},r.prototype.isSeekable=function(){var e=this.thumbnails_.length*this.step,t=!1;this.video_.paused&&this.video_.play();try{t=e+this.step<this.video_.buffered.end(0)}catch(e){console.log("Error is seekable: ",e)}finally{return t}},t.DynamicThumbnails=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,a,r,n,i){this.displayCallback=a,this.errorCallback=r,this.chunksLimit=1,this.chunksLoaded=[],this.chunksToLoad=[],this.chunksToRemove=[],this.chunksTotal=1,this.chunking=null==e,this.currentChunk=0,this.image=null,this.loading=!1,this.logger=i,this.maxTime=0,this.minTime=Number.POSITIVE_INFINITY,this.path=null,this.position=0,this.times=[],this.thumbs=[],this.urlImage=e,this.urlVTT=null,this.video=n,this.vttText="",this.imagesLoaded=0,this.seekbar=null,document.getElementsByClassName("nexplayer_container_seekbar")[0]&&document.getElementsByClassName("nexplayer_container_seekbar")[0].firstElementChild&&(this.seekbar=document.getElementsByClassName("nexplayer_container_seekbar")[0].firstElementChild.firstElementChild),null!==t&&(null!==t.src?(this.urlVTT=t,this.errorCallback=r):this.urlVTT=t),""!==this.urlVTT&&null!==this.urlVTT&&void 0!==this.urlVTT?(this.imgEmpty=void 0===this.urlImage,this.requestVTT()):null!==this.errorCallback&&void 0!==this.errorCallback&&((r={code:404,message:"No manifest provided"}).src=this.urlVTT,r.type="Manifest",this.logger.warn("[Thumbnails] "+r.type+" error: "+r.message),this.errorCallback(r))}var u=a(203);function c(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:0}r.prototype.calculateChunking=function(){this.chunksLimit=Math.round(Math.log10(this.times.length+10)),this.chunksTotal=Math.ceil(this.times.length/20)},r.prototype.destroy=function(){this.thumbs=null,this.times=null,this.chunksLoaded=null,this.chunksToLoad=null,this.chunksToRemove=null},r.prototype.getChunksToLoad=function(){var t=this,e=this.chunksLimit-1,a=this.chunksLimit-1,r=this.currentChunk,n=this.times.length-this.currentChunk-1;(e=a=Math.trunc(this.chunksLimit/2))+a==this.chunksLimit&&(e<r?--e:a<n&&--a);for(var i=e-r,o=a-n,s=(0<i&&(a=a+i<=n?a+i:n,e=r),0<o&&(e=e+o<=r?e+o:r,a=n),e);0<s;)this.chunksToLoad.includes(this.currentChunk-s)||(this.chunksToLoad.length==this.chunksLimit&&this.chunksToLoad.shift(),this.chunksToLoad.push(this.currentChunk-s)),--s;this.chunksToLoad.includes(this.currentChunk)||(this.chunksToLoad.length==this.chunksLimit&&this.chunksToLoad.shift(),this.chunksToLoad.push(this.currentChunk));for(s=1;s<=a;)this.chunksToLoad.includes(this.currentChunk+s)||(this.chunksToLoad.length==this.chunksLimit&&this.chunksToLoad.shift(),this.chunksToLoad.push(this.currentChunk+s)),s+=1;this.chunksLoaded=this.chunksLoaded.filter(function(e,t,a){return a.indexOf(e)==t}),this.removeChunks(),this.chunksToLoad=this.chunksToLoad.filter(function(e){return!t.chunksLoaded.includes(e)}),this.chunksLoaded.sort(function(e,t){return e-t}),this.chunksToLoad.sort(function(e,t){return e-t})},r.prototype.getCorrectTime=function(e){var t=this.parseTime(e),e=this.parseTime(e);return this.position=0,[t,e]},r.prototype.getPreviewThumbnails=function(){return this.thumbs},r.prototype.getThumbnailAt=function(r){var n,i,e=this;if(this.thumbs)return this.thumbs.sort(c),n=null,r<this.minTime||r>this.maxTime||(n=this.searchThumbnail(r,0,this.thumbs.length-1)),i=this,new Promise(function(t){var a;null===n&&void 0===e.urlImage&&0<=r&&r<=e.video.duration?(1<e.chunksTotal&&i.loadThumbnailAt(r),a=i.video.addEventListener("thumbnailready",function(e){(n=e.detail).startTime<=r&&n.finishTime>=r&&(i.video.removeEventListener("thumbnailready",a),t(n))})):t(n)})},r.prototype.getThumbnails=function(){if(null!==this.image||this.imgEmpty){if(this.imgEmpty)this.thumbs.sort(c);else for(var e=0;e<this.times.length;e++){var t=this,a=this.times[e],r=document.createElement("canvas"),n=r.getContext("2d"),i=a[2],o=a[3],s=a[4],l=a[5];n.drawImage(this.image,i,o,s,l,0,0,300,150),this.getThumbnailAt(a[0]).then(function(e){null==e&&t.thumbs.push(new u.Frame(r,300,l,a[0],a[1]))})}void 0!==this.displayCallback&&null!==this.displayCallback&&this.displayCallback(this.thumbs)}},r.prototype.indexOf=function(e,t){e.lastIndex=this.position;e=e.exec(t);return null==e?null:{position:e.index,length:e[0].length,results:e}},r.prototype.isURL=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},r.prototype.loadChunk=function(r){function n(){o.image[i]=null,i<o.times[r].length&&(o.imagesLoaded+=1,o.imagesLoaded==o.times[r].length)&&(o.image=[],o.imagesLoaded=0,o.chunksLoaded.length<o.chunksTotal-1?o.chunksLoaded.includes(r)||(o.chunksLoaded.push(r),0<o.chunksToLoad.length&&!o.chunksLoaded.includes(o.chunksToLoad[0])?(o.logger.log("[Thumbnails] Load chunk: "+o.chunksToLoad[0]),o.loadChunk(o.chunksToLoad.shift(),0)):o.loading=!1):o.chunksLoaded.includes(r)||(o.chunksLoaded.push(r),o.chunksLoaded.sort(function(e,t){return e-t}),o.logger.log("[Thumbnails] All chunks have been loaded"),o.chunksToLoad=[],o.loading=!1))}var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=this;this.image.push(document.createElement("img"));this.image[i].addEventListener("load",function(){var e=null,t=document.createElement("canvas"),a=t.getContext("2d");o.times&&(e=o.times[r][i],a.drawImage(o.image[i],0,0,300,150),null==o.searchThumbnail(.5*(e[0]+e[1]),0,o.thumbs.length-1)&&(a=new u.Frame(t,300,150,e[0],e[1]),o.thumbs.push(a),o.getThumbnails(),o.video.dispatchEvent(new CustomEvent("thumbnailready",{detail:a}))),n())}),this.image[i].addEventListener("error",function(e){var t={};o.image[i].complete||(t.code=420,t.message="Image not loaded"),0===o.image[i].naturalWidth&&(t.code=422,t.message="Invalid image"),t.src=o.times[r][i][2],t.type="Image",o.logger.warn("[Thumbnails] "+t.type+" error: "+t.message+"\n"+t.src),null!==o.errorCallback&&void 0!==o.errorCallback&&o.errorCallback(t),n()},{once:!0}),r<this.chunksTotal&&(this.image[i].src=this.times[r][i][2],i<this.times[r].length-1)&&this.loadChunk(r,i+1)},r.prototype.loadThumbnailAt=function(e){0<e&&e<=this.video.duration&&(-1===(e=this.searchChunk(e,0,this.times.length))||this.chunksToLoad.includes(e)||this.chunksLoaded.includes(e)||(this.chunksLoaded.sort(function(e,t){return e-t}),this.currentChunk=e,this.getChunksToLoad(),!this.loading&&0<this.chunksToLoad.length&&(this.loading=!0,this.logger.log("[Thumbnails] Load chunk: "+this.chunksToLoad[0]),this.loadChunk(this.chunksToLoad.shift(),0))))},r.prototype.parseTime=function(e){var t,a,r,e=this.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g,e);return null==e||(t=Number(e[1])||0,a=Number(e[2]),r=Number(e[3]),e=Number(e[4]),59<a)||59<r?null:e/1e3+r+60*a+3600*t},r.prototype.readRegex=function(e,t){e=this.indexOf(e,t);return null===e?null:(this.position+=e.length,e.results)},r.prototype.requestChunk=function(){var t=this;this.imgEmpty?(this.image=[],this.getChunksToLoad(),0<t.chunksToLoad.length&&!this.chunksLoaded.includes(this.chunksToLoad[0])&&!this.loading&&(this.logger.log("[Thumbnails] Load chunk: "+this.chunksToLoad[0]),this.loading=!0,this.loadChunk(this.chunksToLoad.shift()))):(this.image=document.createElement("img"),this.image.addEventListener("load",function(){t.getThumbnails()}),this.image.addEventListener("error",function(){var e={};t.image.complete||(e.code=420,e.message="Image not loaded"),0===t.image.naturalWidth&&(e.code=422,e.message="Invalid image"),e.src=t.urlImage,e.type="Image",t.logger.warn("[Thumbnails] "+e.type+" error: "+e.message+"\n"+e.src),null!==t.errorCallback&&void 0!==t.errorCallback&&t.errorCallback(e)}),this.image.src=this.urlImage)},r.prototype.parseVTT=function(){var t=this;if(""===this.vttText)(n={code:422,message:"Empty manifest"}).src=this.urlVTT,n.type="Manifest",this.logger.warn("[Thumbnails] "+n.type+" error: "+n.message),this.errorCallback(n);else{for(var e,a,r,n,i=this.vttText.split("\n"),o=1;o<i.length-1;)null!==(a=this.getCorrectTime(i[o]))&&((e=[]).push(a[0]),e.push(a[1]),i[o+1].match(/.(jpg|jpeg|png)$/gm)&&this.imgEmpty?(!this.isURL(this.path)||this.isURL(i[o+1])?e.push(i[o+1]):e.push(this.path+i[o+1]),this.totalImages+=1,this.times.push(e),o+=1):i[o+1].includes("xywh=")&&!this.imgEmpty&&(a=i[o+1].split("xywh=")[1].split(","),e.push(parseFloat(a[0].trim())),e.push(parseFloat(a[1].trim())),e.push(parseFloat(a[2].trim())),e.push(parseFloat(a[3].trim())),this.times.push(e),o+=1)),o+=1;0===this.times.length?((n={code:422,message:"No thumbnails found"}).src=this.urlVTT,n.type="Manifest",this.logger.warn("[Thumbnails] "+n.type+" error: "+n.message),this.errorCallback(n)):(this.calculateChunking(),this.minTime=this.times[0][0],this.maxTime=this.times[this.times.length-1][1],this.imgEmpty&&(r=this.times.length/this.chunksTotal,n=new Array(this.chunksTotal).fill().map(function(e){return t.times.splice(0,r)}),this.times.length%this.chunksTotal!=0&&(this.chunksTotal+=1,n.push(this.times)),this.times=n,this.currentChunk>this.times.length?this.currentChunk=this.times.length-1:this.currentChunk<0&&(this.currentChunk=0)),this.video.addEventListener("seeking",function(e){t.getThumbnailAt(t.video.currentTime)}),void 0!==this.seekbar&&null!==this.seekbar&&this.seekbar.addEventListener("hovering",function(e){t.getThumbnailAt(t.video.duration*e.detail,!0)}),this.requestChunk())}},r.prototype.requestVTT=function(){var a=this,e=new XMLHttpRequest,r=!1,t=this.urlVTT.lastIndexOf("/");a.path=this.urlVTT.substring(0,t+1),e.onreadystatechange=function(){var e={code:this.status,src:a.urlVTT,type:"Manifest"};if(4===this.readyState&&200===this.status)0<this.responseText.lastIndexOf(".vtt")?(t=this.responseText.lastIndexOf(".vtt"),a.urlVTT=this.responseText.substring(0,t+4),t=this.responseText.lastIndexOf("/"),a.path=this.responseText.substring(0,t+1),a.requestVTT()):(a.vttText=this.responseText,a.vttText=a.vttText.replace(/^\s*\n/gm,""),a.parseVTT());else if(404!==this.status||r)if(4===this.readyState&&400<=this.status&&!r){var t=this.response;try{t=JSON.parse(t)}catch(e){""===t&&(t=this.statusText)}e.message=t,a.logger.warn("[Thumbnails] "+e.type+" error: "+e.message),null!==a.errorCallback&&void 0!==a.errorCallback&&a.errorCallback(e),r=!0}else 4!==this.readyState||r||(e.code=420,e.message="Manifest load error",a.logger.warn("[Thumbnails] "+e.type+" error: "+e.message),null!==a.errorCallback&&void 0!==a.errorCallback&&a.errorCallback(e),r=!0);else e.message="Manifest not found",a.logger.warn("[Thumbnails] "+e.type+" error: "+e.message),null!==a.errorCallback&&void 0!==a.errorCallback&&a.errorCallback(e),r=!0},e.open("GET",this.urlVTT,!0),e.responseType="text",e.send()},r.prototype.removeChunks=function(){var t=this;this.chunksToRemove=this.chunksLoaded.filter(function(e){return!t.chunksToLoad.includes(e)});for(var e=0;e<this.chunksToRemove.length;e++){for(var a=this.times[this.chunksToRemove[e]],r=a[0][0],n=a[a.length-1][1],i=this.thumbs.length-1;0<=i;i--)this.thumbs[i].startTime>=r&&this.thumbs[i].finishTime<=n&&(this.thumbs[i].thumbnail=null,this.thumbs.splice(i,1));a=this.chunksLoaded.indexOf(this.chunksToRemove[e]);-1<a&&this.chunksLoaded.splice(a,1)}},r.prototype.searchChunk=function(e,t,a){var r,n;return a<t||e>this.times[this.times.length-1][this.times[this.times.length-1].length-1][1]?-1:(r=Math.floor((t+a)/2),e>=(n=this.times[r])[0][0]&&e<=n[n.length-1][1]?r:(e<n[0][0]?a=r-1:t=r+1,this.searchChunk(e,t,a)))},r.prototype.searchThumbnail=function(e,t,a){var r;return a<t?null:(r=Math.floor((t+a)/2),e>=this.thumbs[r].getstartTime()&&e<=this.thumbs[r].getfinishTime()?this.thumbs[r]:(e<this.thumbs[r].getfinishTime()?a=r-1:t=r+1,this.searchThumbnail(e,t,a)))},t.StaticThumbnails=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e){this.Player=e,this.thumbnailCallback=null,this.thumbs=null}r.prototype.create=function(e,t,a){if(!e||"VIDEO"!==e.nodeName)return null;if(e._nexplayer)return e._nexplayer;var r;e.id||e.name;if(!t&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;r=new this.Player,this.setThumbnailsIfExists(e,r);var n=document.createElement("div");return n.id="video-caption",e.parentNode.insertBefore(n,e.nextSibling),r.Init(e,t.src),r.attachSubtitleRendererDiv(n),this.create360CanvasIfExists(e,r),e._nexplayer=r},r.prototype.create360CanvasIfExists=function(e,t){var a=e.getAttribute("data-nex360");if(null===a)return null;(a=a.trim()).split("$");var r=document.createElement("canvas");void 0!==a[0]||void 0!==a[1]?(r.id=a[0],r.className=a[1]):(r.id="canvas360",r.className="videoPlayer"),e.parentNode.insertBefore(r,e.nextSibling),r.style.display="inline",t.create360View(r),e.style.display="none"},r.prototype.setThumbnailsIfExists=function(e,t){var a=e.getAttribute("data-nexThumbnails");if(!a)return null;var a=(a=a.trim()).split("$");"dynamic"===a[0].toLowerCase()?(t.enablePreviewThumbnails(!0),t.setThumbnailResources(this.onThumbnailsLoaded.bind(this))):"static"===a[0].toLowerCase()&&(a=e.getAttribute("data-nexThumbnailsVTT"),e=e.getAttribute("data-nexThumbnailsImage"),null!==a)&&null!==e&&(t.enablePreviewThumbnails(!0),t.setThumbnailResources(this.onThumbnailsLoaded.bind(this),a.trim(),e.trim()))},r.prototype.onThumbnailsLoaded=function(e){this.thumbs=e,null!==this.thumbnailCallback&&null!==this.thumbs&&this.thumbnailCallback(this.thumbs)},r.prototype.setThumbnailCallback=function(e){this.thumbnailCallback=e,this.thumbnailCallback(this.thumbs)},r.prototype.findVideo=function(e){return"video"===e.nodeName.toLowerCase()?e:this.findVideo(e.parentNode)},r.prototype.createAll=function(e,t){for(var a=[],r=(e=e||"[data-nexplayer]",(t=t||document).querySelectorAll(e)),n=0;n<r.length;n++){var i=this.create(r[n],null);a.push(i)}for(var o=t.querySelectorAll("source"),s=0,s=0;s<o.length;s++){var l=this.findVideo(o[s]),l=this.create(l,null);a.push(l)}return a},t.NexPlayerFactory=r},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){return e.enc.Utf8},"object"===n(t)?e.exports=t=r(a(1)):(n=[a(1)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(521),a=t.p360=function(e,t,a,r){this.localVideo_=e,this.div_=a,this.type_360_=r,this.playerProxy_=null,this.canvas_=t,this.gl360_=null,this.onGesture_=!1,this.prevX_=0,this.prevY_=0,this.TO_RADIANS_=Math.PI/180,this.TOUCH_SCALE_FACTOR_=-.1*this.TO_RADIANS_,this.isFullScreen_=!1,this.originalWidth_=this.localVideo_.width,this.originalHeight_=this.localVideo_.height,this.prevAlpha_,this.prevBeta_,this.prevGamma_,this.init_()};a.prototype.destroy=function(){return this.canvas_.removeEventListener("mousedown",this.onGestureMouseStart_),this.canvas_.removeEventListener("touchstart",this.onGestureTouchStart_),this.canvas_.removeEventListener("mousemove",this.onGestureMouseMove_),this.canvas_.removeEventListener("touchmove",this.onGestureTouchMove_),this.canvas_.removeEventListener("mouseleave",this.onGestureMouseEnd_),this.canvas_.removeEventListener("mouseup",this.onGestureMouseEnd_),this.canvas_.removeEventListener("touchend",this.onGestureTouchEnd_),this.canvas_.removeEventListener("fullscreenchange",this.onFullscreenChange_),this.canvas_.removeEventListener("webkitfullscreenchange",this.onFullscreenChange_),this.canvas_.removeEventListener("mozfullscreenchange",this.onFullscreenChange_),this.canvas_.removeEventListener("msFullscreenChange",this.onFullscreenChange_),window.removeEventListener("orientationchange",this.onOrientationChange_),window.removeEventListener("deviceorientation",this.onDeviceMotion_),this.localVideo_=null,this.playerProxy_=null,this.canvas_=null,this.gl360_.destroy(),this.gl360_=null,Promise.all([])},a.prototype.canPlay360=function(){return!0},a.prototype.isPlaying=function(){return!0},a.prototype.fullscreen=function(){this.canvas_&&(this.isFullScreen_?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&this.canvas_.document.webkitExitFullscreen():this.canvas_.requestFullscreen?this.canvas_.requestFullscreen():this.canvas_.mozRequestFullScreen?this.canvas_.mozRequestFullScreen():this.canvas_.webkitRequestFullscreen&&this.canvas_.webkitRequestFullscreen())},a.prototype.init_=function(){this.createCanvas_();var e,t=this.getGL_();t?(e="cubemap"===this.type_360_,this.gl360_=new r.GL(this.localVideo_,this.canvas_,t,30,e,this.div_),this.canvas_.addEventListener("mousedown",this.onGestureMouseStart_.bind(this)),this.canvas_.addEventListener("touchstart",this.onGestureTouchStart_.bind(this)),this.canvas_.addEventListener("mousemove",this.onGestureMouseMove_.bind(this)),this.canvas_.addEventListener("touchmove",this.onGestureTouchMove_.bind(this)),this.canvas_.addEventListener("mouseleave",this.onGestureMouseEnd_.bind(this)),this.canvas_.addEventListener("mouseup",this.onGestureMouseEnd_.bind(this)),this.canvas_.addEventListener("touchend",this.onGestureTouchEnd_.bind(this)),this.canvas_.addEventListener("fullscreenchange",this.onFullscreenChange_.bind(this)),this.canvas_.addEventListener("webkitfullscreenchange",this.onFullscreenChange_.bind(this)),this.canvas_.addEventListener("mozfullscreenchange",this.onFullscreenChange_.bind(this)),this.canvas_.addEventListener("msFullscreenChange",this.onFullscreenChange_.bind(this)),window.addEventListener("orientationchange",this.onOrientationChange_.bind(this)),window.addEventListener("deviceorientation",this.onDeviceMotion_.bind(this))):console.log("No WebGL context.")},a.prototype.createCanvas_=function(){null==this.canvas_&&(this.canvas_=document.createElement("canvas"),this.canvas_.id="canvas360",this.canvas_.style=this.localVideo_.style,this.canvas_.style.zIndex=1,this.localVideo_.append(this.canvas_))},a.prototype.toggleFullScreen=function(){},a.prototype.getGL_=function(){for(var e={antialias:!1},t=null,a=0,a=0;a<4;a++)if(t=this.canvas_.getContext(["webgl","experimental-webgl","moz-webgl","webkit-3d"][a],e))return t;return t||console.log("No WebGL support!"),t},a.prototype.onGestureMouseStart_=function(e){this.onGesture_||this.gestureStart_(e.clientX,e.clientY)},a.prototype.onGestureTouchStart_=function(e){this.onGesture_||this.gestureStart_(e.touches[0].clientX,e.touches[0].clientY)},a.prototype.onGestureMouseMove_=function(e){this.onGesture_&&this.gestureMove_(e.clientX,e.clientY)},a.prototype.onGestureTouchMove_=function(e){this.onGesture_&&this.gestureMove_(e.touches[0].clientX,e.touches[0].clientY),e.preventDefault()},a.prototype.onGestureMouseEnd_=function(e){this.onGesture_&&this.gestureEnd_()},a.prototype.onGestureTouchEnd_=function(e){this.onGesture_&&this.gestureEnd_()},a.prototype.gestureStart_=function(e,t){this.onGesture_=!0,this.prevX_=e,this.prevY_=t},a.prototype.gestureMove_=function(e,t){null!==this.gl360_&&(this.gl360_.rotateViewGlobal((e-this.prevX_)*this.TOUCH_SCALE_FACTOR_,-1*(t-this.prevY_)*this.TOUCH_SCALE_FACTOR_,0),this.prevX_=e,this.prevY_=t)},a.prototype.gestureEnd_=function(){this.onGesture_=!1},a.prototype.onFullscreenChange_=function(e){var t=null!=(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);t!=this.isFullScreen_&&(this.gl360_.updateViewPort(),this.isFullScreen_=t)},a.prototype.onOrientationChange_=function(e){this.isFullScreen_&&this.gl360_.updateViewPort()},a.prototype.onDeviceMotion_=function(e){var t=e.alpha-this.prevAlpha_,a=e.beta-this.prevBeta_;e.gamma,this.prevGamma_;t=180<=t?t-360:t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(522),r=a(527),n=a(528),a=t.GL=function(e,t,a,r,n,i){this.video_=e,this.canvas_=t,this.div_=i,this.gl_=a,this.shaderProgram_=null,this.verticesBuffer_=null,this.normalsBuffer_=null,this.verticesTextureCoordBuffer_=null,this.verticesIndexBuffer_=null,this.vertexPositionAttribute_=0,this.vertexNormalAttribute_=0,this.textureCoordAttribute_=0,this.texture_=null,this.viewMatrix_=o.mat4.create(),this.projectionMatrix_=o.mat4.create(),this.normalMatrix_=o.mat4.create(),this.viewProjectionMatrix_=o.mat4.create(),this.identityMatrix_=o.mat4.create(),this.prevRotationMatrix_=o.mat4.create(),this.refreshInterval_=1e3/r,this.scale_=1.8,this.ratio_=this.canvas_.scrollWidth/this.canvas_.scrollHeight,this.positionY_=0,this.PITCH_BOUNDARY_=90*Math.PI/180,this.activeIntervalID_=0,this.previousCanvasWidth=0,this.previousCanvasHeight=0,this.iOS_HLS_Colors=!1,this.isCubemap=n,this.moved360=!1,this.init_()};a.prototype.destroy=function(){return clearInterval(this.activeIntervalID_),this.video_=null,this.gl_=null,this.canvas_=null,Promise.all([])},a.prototype.init_=function(){this.iOS_HLS_Colors=this.isIOSMobile(),this.initMatrices_(),this.initGL_(),this.initGLShaders_(),this.initGLBuffers_(),this.initGLTexture_(),this.activeIntervalID_=setInterval(this.renderGL_.bind(this),this.refreshInterval_)},a.prototype.isIOSMobile=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},a.prototype.waitVideoLoaded_=function(){this.video_.readyState==HTMLMediaElement.HAVE_ENOUGH_DATA&&(clearInterval(this.activeIntervalID_),this.activeIntervalID_=setInterval(this.renderGL_.bind(this),this.refreshInterval_))},a.prototype.initMatrices_=function(){o.mat4.lookAt(this.viewMatrix_,[0,0,0],[1,0,0],[0,1,0]),o.mat4.scale(this.identityMatrix_,this.identityMatrix_,[4,4,4])},a.prototype.initGL_=function(){this.gl_.clearColor(0,0,0,1),this.gl_.enable(this.gl_.CULL_FACE),this.gl_.cullFace(this.gl_.FRONT),this.updateViewPort()},a.prototype.initGLShaders_=function(){var e=this.getGLShader_(n.types.Vertex),t=this.getGLShader_(n.types.Fragment);this.shaderProgram_=this.gl_.createProgram(),this.gl_.attachShader(this.shaderProgram_,e),this.gl_.attachShader(this.shaderProgram_,t),this.gl_.linkProgram(this.shaderProgram_),this.gl_.getProgramParameter(this.shaderProgram_,this.gl_.LINK_STATUS)||alert("Unable to initialize the shader program: "+this.gl_.getProgramInfoLog(this.shaderProgram_)),this.isCubemap?(this.vertexPositionAttribute_=this.gl_.getAttribLocation(this.shaderProgram_,"aVertexPosition"),this.vertexNormalAttribute_=this.gl_.getAttribLocation(this.shaderProgram_,"aVertexNormal"),this.textureCoordAttribute_=this.gl_.getAttribLocation(this.shaderProgram_,"aTextureCoord")):(this.vertexPositionAttribute_=this.gl_.getAttribLocation(this.shaderProgram_,"a_vPosition"),this.gl_.enableVertexAttribArray(this.vertexPositionAttribute_),this.textureCoordAttribute_=this.gl_.getAttribLocation(this.shaderProgram_,"a_TexCoordinate"),this.gl_.enableVertexAttribArray(this.textureCoordAttribute_))},a.prototype.getGLShader_=function(e){var t,a;switch(e){case n.types.Vertex:t=this.gl_.VERTEX_SHADER,a=this.isCubemap?n.vertexCubeSource:n.vertexSphereSource;break;case n.types.Fragment:t=this.gl_.FRAGMENT_SHADER,a=this.isCubemap?n.fragmentCubeSource:n.fragmentSphereSource;break;default:return null}var r=this.gl_.createShader(t);return this.gl_.shaderSource(r,a),this.gl_.compileShader(r),this.gl_.getShaderParameter(r,this.gl_.COMPILE_STATUS)?r:(nexplayer.log.warning("Error in "+e+" shader"+this.gl_.getShaderInfoLog(r)),null)},a.prototype.initGLBuffers_=function(){this.isCubemap?(this.verticesBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesBuffer_),this.gl_.bufferData(this.gl_.ARRAY_BUFFER,new Float32Array(r.cubeVertices2),this.gl_.STATIC_DRAW),this.normalsBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.normalsBuffer_),this.gl_.bufferData(this.gl_.ARRAY_BUFFER,new Float32Array(r.cubeNormals),this.gl_.STATIC_DRAW),this.verticesTextureCoordBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesTextureCoordBuffer_),this.gl_.bufferData(this.gl_.ARRAY_BUFFER,new Float32Array(r.cubeTextureUV2),this.gl_.STATIC_DRAW),this.verticesIndexBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ELEMENT_ARRAY_BUFFER,this.verticesIndexBuffer_),this.gl_.bufferData(this.gl_.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.cubeIndices),this.gl_.STATIC_DRAW)):(this.verticesBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesBuffer_),this.gl_.bufferData(this.gl_.ARRAY_BUFFER,new Float32Array(r.sphereVertices),this.gl_.STATIC_DRAW),this.verticesTextureCoordBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesTextureCoordBuffer_),this.gl_.bufferData(this.gl_.ARRAY_BUFFER,new Float32Array(r.sphereTextureUV),this.gl_.STATIC_DRAW),this.verticesIndexBuffer_=this.gl_.createBuffer(),this.gl_.bindBuffer(this.gl_.ELEMENT_ARRAY_BUFFER,this.verticesIndexBuffer_),this.gl_.bufferData(this.gl_.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.sphereIndices),this.gl_.STATIC_DRAW))},a.prototype.initGLTexture_=function(){this.texture_=this.gl_.createTexture(),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.gl_.texParameteri(this.gl_.TEXTURE_2D,this.gl_.TEXTURE_WRAP_S,this.gl_.CLAMP_TO_EDGE),this.gl_.texParameteri(this.gl_.TEXTURE_2D,this.gl_.TEXTURE_WRAP_T,this.gl_.CLAMP_TO_EDGE),this.gl_.texParameteri(this.gl_.TEXTURE_2D,this.gl_.TEXTURE_MIN_FILTER,this.gl_.LINEAR),this.gl_.texParameteri(this.gl_.TEXTURE_2D,this.gl_.TEXTURE_MAG_FILTER,this.gl_.LINEAR)},a.prototype.updateGLTexture_=function(){null===this.video_||this.video_.paused||(this.gl_.pixelStorei(this.gl_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),this.gl_.texImage2D(this.gl_.TEXTURE_2D,0,this.gl_.RGBA,this.gl_.RGBA,this.gl_.UNSIGNED_BYTE,this.video_))},a.prototype.GL_Error=function(e){var t=this.gl_.getError();0!==t&&"Before Set indices"!==e&&(console.log("WebGL error - "+e),console.log(t))},a.prototype.renderGL_=function(){this.moved360||(document.getElementsByClassName("nexplayer_video")[1].before(this.canvas_),document.getElementsByClassName("nexplayer_bar")[0].style.zIndex=2,document.getElementsByClassName("nexplayer_video")[1].style.height="0px",this.moved360=!0),this.isCubemap&&o.mat4.perspective(this.projectionMatrix_,45*Math.PI/180,2.5,.1,100),this.GL_Error("Before useProgram"),this.gl_.useProgram(this.shaderProgram_),this.GL_Error("After useProgram"),this.gl_.clear(this.gl_.COLOR_BUFFER_BIT),this.GL_Error("Before updateViewPort"),this.updateViewPort(),this.GL_Error("After updateViewPort"),this.gl_.activeTexture(this.gl_.TEXTURE0),this.gl_.bindTexture(this.gl_.TEXTURE_2D,this.texture_),this.GL_Error("Before updateGLTexture_"),this.updateGLTexture_(),this.GL_Error("After updateGLTexture_"),this.isCubemap||(o.mat4.multiply(this.viewProjectionMatrix_,this.viewMatrix_,this.identityMatrix_),o.mat4.multiply(this.viewProjectionMatrix_,this.projectionMatrix_,this.viewProjectionMatrix_)),this.GL_Error("Before vertexAttribPointer vertices"),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesBuffer_),this.gl_.vertexAttribPointer(this.vertexPositionAttribute_,3,this.gl_.FLOAT,!1,0,0),this.gl_.enableVertexAttribArray(this.vertexPositionAttribute_),this.GL_Error("After vertexAttribPointer vertices"),this.GL_Error("Before vertexAttribPointer UVs"),this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.verticesTextureCoordBuffer_),this.gl_.vertexAttribPointer(this.textureCoordAttribute_,2,this.gl_.FLOAT,!1,0,0),this.gl_.enableVertexAttribArray(this.textureCoordAttribute_),this.GL_Error("After vertexAttribPointer UVs"),this.isCubemap&&(this.gl_.bindBuffer(this.gl_.ARRAY_BUFFER,this.normalsBuffer_),this.gl_.vertexAttribPointer(this.vertexNormalAttribute_,4,this.gl_.BYTE,!1,0,0),this.gl_.enableVertexAttribArray(this.vertexNormalAttribute_)),this.GL_Error("Before Set indices"),this.gl_.bindBuffer(this.gl_.ELEMENT_ARRAY_BUFFER,this.verticesIndexBuffer_),this.setMatrixUniforms_(),this.GL_Error("After Set indices"),this.gl_.uniform1i(this.gl_.getUniformLocation(this.shaderProgram_,"uSampler"),0),this.GL_Error("Before uniform1f iOS_HLS_Colors"),this.gl_.uniform1f(this.gl_.getUniformLocation(this.shaderProgram_,"iOS_HLS_Colors"),this.iOS_HLS_Colors),this.GL_Error("Before drawElements"),this.isCubemap?this.gl_.drawElements(this.gl_.TRIANGLES,r.cubeIndices.length,this.gl_.UNSIGNED_SHORT,0):this.gl_.drawElements(this.gl_.TRIANGLES,r.sphereIndices.length,this.gl_.UNSIGNED_SHORT,0),this.GL_Error("After drawElements")},a.prototype.setMatrixUniforms_=function(){var e;this.isCubemap?(this.gl_.uniformMatrix4fv(this.gl_.getUniformLocation(this.shaderProgram_,"uProjectionMatrix"),!1,this.projectionMatrix_),this.gl_.uniformMatrix4fv(this.gl_.getUniformLocation(this.shaderProgram_,"uModelViewMatrix"),!1,this.viewProjectionMatrix_),this.gl_.uniformMatrix4fv(this.gl_.getUniformLocation(this.shaderProgram_,"uNormalMatrix"),!1,this.normalMatrix_)):(e=this.gl_.getUniformLocation(this.shaderProgram_,"u_VPMatrix"),this.gl_.uniformMatrix4fv(e,!1,this.viewProjectionMatrix_))},a.prototype.rotateViewGlobal=function(e,t,a){r=this.isCubemap?this.viewProjectionMatrix_:this.viewMatrix_,o.mat4.rotateY(r,r,e),this.positionY_=this.positionY_+t,this.positionY_<this.PITCH_BOUNDARY_&&this.positionY_>-this.PITCH_BOUNDARY_?(e=o.mat4.create(),o.mat4.rotateX(e,o.mat4.create(),-1*t),o.mat4.multiply(r,e,r)):this.positionY_=this.positionY_-t;var r,e=o.mat4.create();o.mat4.rotateZ(e,o.mat4.create(),a),o.mat4.multiply(r,e,r)},a.prototype.rotateViewLocal=function(e,t,a){r=this.isCubemap?this.viewProjectionMatrix_:this.viewMatrix_;var r,n=o.mat4.create(),n=(o.mat4.rotateY(n,o.mat4.create(),-1*e),o.mat4.multiply(r,n,r),this.positionY_=this.positionY_+t,this.positionY_<this.PITCH_BOUNDARY_&&this.positionY_>-this.PITCH_BOUNDARY_?(e=o.mat4.create(),o.mat4.rotateX(e,o.mat4.create(),-1*t),o.mat4.multiply(r,e,r)):this.positionY_=this.positionY_-t,o.mat4.create());o.mat4.rotateZ(n,o.mat4.create(),a),o.mat4.multiply(r,n,r)},a.prototype.rotateViewLocal2=function(e){},a.prototype.updateViewPort=function(){var e=window.getComputedStyle(window.document.getElementById(this.div_.id)),e=(this.canvas_.style.position=e.position,this.canvas_.style.width="100%","0px"!==e.height&&(this.canvas_.style.height="100%"),this.canvas_.style.top=e.top,this.canvas_.style.left=e.left,this.canvas_.style.right=e.right,this.canvas_.style.bottom=e.bottom,this.canvas_.scrollWidth),t=this.canvas_.scrollHeight;this.previousCanvasWidth==e&&this.previousCanvasHeight==t||(this.canvas_.width=e,this.canvas_.height=t,this.previousCanvasWidth=e,this.previousCanvasHeight=t,this.ratio_=e/t,this.projectionMatrix_=o.mat4.frustum(this.projectionMatrix_,-this.ratio_,this.ratio_,-1,1,this.scale_,50.5),this.gl_.viewport(0,0,e,t))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var r=h(a(38)),n=h(a(523)),i=h(a(524)),o=h(a(204)),s=h(a(205)),l=h(a(206)),u=h(a(525)),c=h(a(526)),d=h(a(207)),a=h(a(208));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}t.glMatrix=r,t.mat2=n,t.mat2d=i,t.mat3=o,t.mat4=s,t.quat=l,t.quat2=u,t.vec2=c,t.vec3=d,t.vec4=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new l.ARRAY_TYPE(4);l.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0);return e[0]=1,e[3]=1,e},t.clone=function(e){var t=new l.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,a,r){var n=new l.ARRAY_TYPE(4);return n[0]=e,n[1]=t,n[2]=a,n[3]=r,n},t.set=function(e,t,a,r,n){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e},t.transpose=function(e,t){{var a;e===t?(a=t[1],e[1]=t[2],e[2]=a):(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3])}return e},t.invert=function(e,t){var a=t[0],r=t[1],n=t[2],t=t[3],i=a*t-n*r;return i?(i=1/i,e[0]=t*i,e[1]=-r*i,e[2]=-n*i,e[3]=a*i,e):null},t.adjoint=function(e,t){var a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=r,t.rotate=function(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=Math.sin(a),a=Math.cos(a);return e[0]=r*a+i*o,e[1]=n*a+t*o,e[2]=r*-o+i*a,e[3]=n*-o+t*a,e},t.scale=function(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=a[0],a=a[1];return e[0]=r*o,e[1]=n*o,e[2]=i*a,e[3]=t*a,e},t.fromRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=-a,e[3]=t,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,a,r){return e[2]=r[2]/r[0],a[0]=r[0],a[1]=r[1],a[3]=r[3]-e[2]*a[1],[e,t,a]},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},t.subtract=n,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],e=e[3],i=t[0],o=t[1],s=t[2],t=t[3];return Math.abs(a-i)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(e-t)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},t.multiplyScalarAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e};var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=a[0],s=a[1],l=a[2],a=a[3];return e[0]=r*o+i*s,e[1]=n*o+t*s,e[2]=r*l+i*a,e[3]=n*l+t*a,e}function n(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}t.mul=r,t.sub=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new h.ARRAY_TYPE(6);h.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0);return e[0]=1,e[3]=1,e},t.clone=function(e){var t=new h.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,a,r,n,i){var o=new h.ARRAY_TYPE(6);return o[0]=e,o[1]=t,o[2]=a,o[3]=r,o[4]=n,o[5]=i,o},t.set=function(e,t,a,r,n,i,o){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e[4]=i,e[5]=o,e},t.invert=function(e,t){var a=t[0],r=t[1],n=t[2],i=t[3],o=t[4],t=t[5],s=a*i-r*n;return s?(s=1/s,e[0]=i*s,e[1]=-r*s,e[2]=-n*s,e[3]=a*s,e[4]=(n*t-i*o)*s,e[5]=(r*o-a*t)*s,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=r,t.rotate=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],t=t[5],l=Math.sin(a),a=Math.cos(a);return e[0]=r*a+i*l,e[1]=n*a+o*l,e[2]=r*-l+i*a,e[3]=n*-l+o*a,e[4]=s,e[5]=t,e},t.scale=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],t=t[5],l=a[0],a=a[1];return e[0]=r*l,e[1]=n*l,e[2]=i*a,e[3]=o*a,e[4]=s,e[5]=t,e},t.translate=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],t=t[5],l=a[0],a=a[1];return e[0]=r,e[1]=n,e[2]=i,e[3]=o,e[4]=r*l+i*a+s,e[5]=n*l+o*a+t,e},t.fromRotation=function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=-a,e[3]=t,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e},t.subtract=n,t.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e},t.multiplyScalarAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e[2]=t[2]+a[2]*r,e[3]=t[3]+a[3]*r,e[4]=t[4]+a[4]*r,e[5]=t[5]+a[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],i=e[3],o=e[4],e=e[5],s=t[0],l=t[1],u=t[2],c=t[3],d=t[4],t=t[5];return Math.abs(a-s)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-l)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-d)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(e-t)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var h=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],t=t[5],l=a[0],u=a[1],c=a[2],d=a[3],h=a[4],a=a[5];return e[0]=r*l+i*u,e[1]=n*l+o*u,e[2]=r*c+i*d,e[3]=n*c+o*d,e[4]=r*h+i*a+s,e[5]=n*h+o*a+t,e}function n(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e}t.mul=r,t.sub=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new g.ARRAY_TYPE(8);g.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0);return e[3]=1,e},t.clone=function(e){var t=new g.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,a,r,n,i,o,s){var l=new g.ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=a,l[3]=r,l[4]=n,l[5]=i,l[6]=o,l[7]=s,l},t.fromRotationTranslationValues=function(e,t,a,r,n,i,o){var s=new g.ARRAY_TYPE(8),n=(s[0]=e,s[1]=t,s[2]=a,s[3]=r,.5*n),i=.5*i,o=.5*o;return s[4]=n*r+i*a-o*t,s[5]=i*r+o*e-n*a,s[6]=o*r+n*t-i*e,s[7]=-n*e-i*t-o*a,s},t.fromRotationTranslation=i,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var a=f.create(),r=(n.getRotation(a,t),new g.ARRAY_TYPE(3));return n.getTranslation(r,t),i(e,a,r),e},t.copy=c,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,a,r,n,i,o,s,l){return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var a=t[4],r=t[5],n=t[6],i=t[7],o=-t[0],s=-t[1],l=-t[2],t=t[3];return e[0]=2*(a*t+i*o+r*l-n*s),e[1]=2*(r*t+i*s+n*o-a*l),e[2]=2*(n*t+i*l+a*s-r*o),e},t.translate=function(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=.5*a[0],l=.5*a[1],a=.5*a[2],u=t[4],c=t[5],d=t[6],t=t[7];return e[0]=r,e[1]=n,e[2]=i,e[3]=o,e[4]=o*s+n*a-i*l+u,e[5]=o*l+i*s-r*a+c,e[6]=o*a+r*l-n*s+d,e[7]=-r*s-n*l-i*a+t,e},t.rotateX=function(e,t,a){var r=-t[0],n=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=s*o+c*r+l*i-u*n,h=l*o+c*n+u*r-s*i,p=u*o+c*i+s*n-l*r,c=c*o-s*r-l*n-u*i;return f.rotateX(e,t,a),r=e[0],n=e[1],i=e[2],o=e[3],e[4]=d*o+c*r+h*i-p*n,e[5]=h*o+c*n+p*r-d*i,e[6]=p*o+c*i+d*n-h*r,e[7]=c*o-d*r-h*n-p*i,e},t.rotateY=function(e,t,a){var r=-t[0],n=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=s*o+c*r+l*i-u*n,h=l*o+c*n+u*r-s*i,p=u*o+c*i+s*n-l*r,c=c*o-s*r-l*n-u*i;return f.rotateY(e,t,a),r=e[0],n=e[1],i=e[2],o=e[3],e[4]=d*o+c*r+h*i-p*n,e[5]=h*o+c*n+p*r-d*i,e[6]=p*o+c*i+d*n-h*r,e[7]=c*o-d*r-h*n-p*i,e},t.rotateZ=function(e,t,a){var r=-t[0],n=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=s*o+c*r+l*i-u*n,h=l*o+c*n+u*r-s*i,p=u*o+c*i+s*n-l*r,c=c*o-s*r-l*n-u*i;return f.rotateZ(e,t,a),r=e[0],n=e[1],i=e[2],o=e[3],e[4]=d*o+c*r+h*i-p*n,e[5]=h*o+c*n+p*r-d*i,e[6]=p*o+c*i+d*n-h*r,e[7]=c*o-d*r-h*n-p*i,e},t.rotateByQuatAppend=function(e,t,a){var r=a[0],n=a[1],i=a[2],a=a[3],o=t[0],s=t[1],l=t[2],u=t[3];return e[0]=o*a+u*r+s*i-l*n,e[1]=s*a+u*n+l*r-o*i,e[2]=l*a+u*i+o*n-s*r,e[3]=u*a-o*r-s*n-l*i,o=t[4],s=t[5],l=t[6],u=t[7],e[4]=o*a+u*r+s*i-l*n,e[5]=s*a+u*n+l*r-o*i,e[6]=l*a+u*i+o*n-s*r,e[7]=u*a-o*r-s*n-l*i,e},t.rotateByQuatPrepend=function(e,t,a){var r=t[0],n=t[1],i=t[2],t=t[3],o=a[0],s=a[1],l=a[2],u=a[3];return e[0]=r*u+t*o+n*l-i*s,e[1]=n*u+t*s+i*o-r*l,e[2]=i*u+t*l+r*s-n*o,e[3]=t*u-r*o-n*s-i*l,o=a[4],s=a[5],l=a[6],u=a[7],e[4]=r*u+t*o+n*l-i*s,e[5]=n*u+t*s+i*o-r*l,e[6]=i*u+t*l+r*s-n*o,e[7]=t*u-r*o-n*s-i*l,e},t.rotateAroundAxis=function(e,t,a,r){if(Math.abs(r)<g.EPSILON)return c(e,t);var n=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),i=(r*=.5,Math.sin(r)),o=i*a[0]/n,s=i*a[1]/n,i=i*a[2]/n,a=Math.cos(r),n=t[0],r=t[1],l=t[2],u=t[3],u=(e[0]=n*a+u*o+r*i-l*s,e[1]=r*a+u*s+l*o-n*i,e[2]=l*a+u*i+n*s-r*o,e[3]=u*a-n*o-r*s-l*i,t[4]),n=t[5],r=t[6],l=t[7];return e[4]=u*a+l*o+n*i-r*s,e[5]=n*a+l*s+r*o-u*i,e[6]=r*a+l*i+u*s-n*o,e[7]=l*a-u*o-n*s-r*i,e},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e},t.multiply=o,t.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e},t.lerp=function(e,t,a,r){var n=1-r;s(t,a)<0&&(r=-r);return e[0]=t[0]*n+a[0]*r,e[1]=t[1]*n+a[1]*r,e[2]=t[2]*n+a[2]*r,e[3]=t[3]*n+a[3]*r,e[4]=t[4]*n+a[4]*r,e[5]=t[5]*n+a[5]*r,e[6]=t[6]*n+a[6]*r,e[7]=t[7]*n+a[7]*r,e},t.invert=function(e,t){var a=d(t);return e[0]=-t[0]/a,e[1]=-t[1]/a,e[2]=-t[2]/a,e[3]=t[3]/a,e[4]=-t[4]/a,e[5]=-t[5]/a,e[6]=-t[6]/a,e[7]=t[7]/a,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var a=d(t);{var r,n,i,o,s,l,u,c;0<a&&(a=Math.sqrt(a),r=t[0]/a,n=t[1]/a,i=t[2]/a,o=t[3]/a,s=t[4],l=t[5],u=t[6],t=t[7],c=r*s+n*l+i*u+o*t,e[0]=r,e[1]=n,e[2]=i,e[3]=o,e[4]=(s-r*c)/a,e[5]=(l-n*c)/a,e[6]=(u-i*c)/a,e[7]=(t-o*c)/a)}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var a=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],l=e[6],e=e[7],u=t[0],c=t[1],d=t[2],h=t[3],p=t[4],f=t[5],m=t[6],t=t[7];return Math.abs(a-u)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-c)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-f)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(l-m)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(e-t)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var g=r(a(38)),f=r(a(206)),n=r(a(205));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e,t,a){var r=.5*a[0],n=.5*a[1],a=.5*a[2],i=t[0],o=t[1],s=t[2],t=t[3];return e[0]=i,e[1]=o,e[2]=s,e[3]=t,e[4]=r*t+n*s-a*o,e[5]=n*t+a*i-r*s,e[6]=a*t+r*o-n*i,e[7]=-r*i-n*o-a*s,e}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}t.getReal=f.copy;t.setReal=f.copy;function o(e,t,a){var r=t[0],n=t[1],i=t[2],o=t[3],s=a[4],l=a[5],u=a[6],c=a[7],d=t[4],h=t[5],p=t[6],t=t[7],f=a[0],m=a[1],g=a[2],a=a[3];return e[0]=r*a+o*f+n*g-i*m,e[1]=n*a+o*m+i*f-r*g,e[2]=i*a+o*g+r*m-n*f,e[3]=o*a-r*f-n*m-i*g,e[4]=r*c+o*s+n*u-i*l+d*a+t*f+h*g-p*m,e[5]=n*c+o*l+i*s-r*u+h*a+t*m+p*f-d*g,e[6]=i*c+o*u+r*l-n*s+p*a+t*g+d*m-h*f,e[7]=o*c-r*s-n*l-i*u+t*a-d*f-h*m-p*g,e}t.mul=o;var s=t.dot=f.dot;var a=t.length=f.length,d=(t.len=a,t.squaredLength=f.squaredLength);t.sqrLen=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=r,t.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var a=new n.ARRAY_TYPE(2);return a[0]=e,a[1]=t,a},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,a){return e[0]=t,e[1]=a,e},t.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e},t.subtract=i,t.multiply=o,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e},t.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e},t.scaleAndAdd=function(e,t,a,r){return e[0]=t[0]+a[0]*r,e[1]=t[1]+a[1]*r,e},t.distance=l,t.squaredDistance=u,t.length=c,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var a=t[0],r=t[1],a=a*a+r*r;0<a&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a);return e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,a){t=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=t,e},t.lerp=function(e,t,a,r){var n=t[0],t=t[1];return e[0]=n+r*(a[0]-n),e[1]=t+r*(a[1]-t),e},t.random=function(e,t){t=t||1;var a=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e},t.transformMat2=function(e,t,a){var r=t[0],t=t[1];return e[0]=a[0]*r+a[2]*t,e[1]=a[1]*r+a[3]*t,e},t.transformMat2d=function(e,t,a){var r=t[0],t=t[1];return e[0]=a[0]*r+a[2]*t+a[4],e[1]=a[1]*r+a[3]*t+a[5],e},t.transformMat3=function(e,t,a){var r=t[0],t=t[1];return e[0]=a[0]*r+a[3]*t+a[6],e[1]=a[1]*r+a[4]*t+a[7],e},t.transformMat4=function(e,t,a){var r=t[0],t=t[1];return e[0]=a[0]*r+a[4]*t+a[12],e[1]=a[1]*r+a[5]*t+a[13],e},t.rotate=function(e,t,a,r){var n=t[0]-a[0],t=t[1]-a[1],i=Math.sin(r),r=Math.cos(r);return e[0]=n*r-t*i+a[0],e[1]=n*i+t*r+a[1],e},t.angle=function(e,t){var a=e[0],e=e[1],r=t[0],t=t[1],n=a*a+e*e;0<n&&(n=1/Math.sqrt(n));var i=r*r+t*t;0<i&&(i=1/Math.sqrt(i));a=(a*r+e*t)*n*i;return 1<a?0:a<-1?Math.PI:Math.acos(a)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var a=e[0],e=e[1],r=t[0],t=t[1];return Math.abs(a-r)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))};var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(38));function r(){var e=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function o(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e}function s(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e}function l(e,t){var a=t[0]-e[0],t=t[1]-e[1];return Math.sqrt(a*a+t*t)}function u(e,t){var a=t[0]-e[0],t=t[1]-e[1];return a*a+t*t}function c(e){var t=e[0],e=e[1];return Math.sqrt(t*t+e*e)}function d(e){var t=e[0],e=e[1];return t*t+e*e}var h;t.len=c,t.sub=i,t.mul=o,t.div=s,t.dist=l,t.sqrDist=u,t.sqrLen=d,t.forEach=(h=r(),function(e,t,a,r,n,i){var o=void 0,s=void 0;for(t=t||2,a=a||0,s=r?Math.min(r*t+a,e.length):e.length,o=a;o<s;o+=t)h[0]=e[o],h[1]=e[o+1],n(h,h,i),e[o]=h[0],e[o+1]=h[1];return e})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cubeVertices2=[-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],t.cubeNormals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],t.cubeTextureUV2=[2/3,.5,1/3,.5,1/3,0,2/3,0,2/3,.5,2/3,0,1,0,1,.5,1,1,2/3,1,2/3,.5,1,.5,0,.5,0,0,1/3,0,1/3,.5,0,.5,1/3,.5,1/3,1,0,1,1/3,1,1/3,.5,2/3,.5,2/3,1],t.cubeIndices=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];var i=t.sphereVertices=[-.19509,.980785,0,-.382683,.92388,0,-.55557,.83147,0,-.707107,.707107,0,-.83147,.55557,0,-.92388,.382683,0,-.980785,.19509,0,-1,0,0,-.980785,-.19509,0,-.92388,-.382683,0,-.83147,-.55557,0,-.707107,-.707107,0,-.55557,-.83147,0,-.382683,-.92388,0,-.19509,-.980785,0,-.191342,.980785,-.03806,-.37533,.92388,-.074658,-.544895,.83147,-.108386,-.69352,.707107,-.13795,-.815493,.55557,-.162212,-.906127,.382683,-.18024,-.96194,.19509,-.191342,-.980785,0,-.19509,-.96194,-.19509,-.191342,-.906127,-.382683,-.18024,-.815493,-.55557,-.162212,-.69352,-.707107,-.13795,-.544895,-.83147,-.108386,-.37533,-.92388,-.074658,-.191341,-.980785,-.03806,-.18024,.980785,-.074658,-.353553,.92388,-.146447,-.51328,.83147,-.212608,-.653281,.707107,-.270598,-.768178,.55557,-.31819,-.853553,.382683,-.353553,-.906127,.19509,-.37533,-.923879,0,-.382684,-.906127,-.19509,-.37533,-.853553,-.382683,-.353554,-.768178,-.55557,-.31819,-.653281,-.707107,-.270598,-.51328,-.83147,-.212608,-.353553,-.92388,-.146447,-.18024,-.980785,-.074658,-.162212,.980785,-.108387,-.31819,.92388,-.212608,-.46194,.83147,-.308658,-.587938,.707107,-.392848,-.691342,.55557,-.46194,-.768178,.382683,-.51328,-.815493,.19509,-.544895,-.831469,0,-.55557,-.815493,-.19509,-.544895,-.768178,-.382683,-.51328,-.691342,-.55557,-.46194,-.587938,-.707107,-.392848,-.46194,-.83147,-.308658,-.318189,-.92388,-.212608,-.162211,-.980785,-.108386,-.13795,.980785,-.13795,-.270598,.92388,-.270598,-.392847,.83147,-.392848,-.5,.707107,-.5,-.587938,.55557,-.587938,-.653281,.382683,-.653282,-.69352,.19509,-.69352,-.707107,0,-.707107,-.69352,-.19509,-.69352,-.653281,-.382683,-.653282,-.587938,-.55557,-.587938,-.5,-.707107,-.5,-.392847,-.83147,-.392848,-.270598,-.92388,-.270598,-.137949,-.980785,-.13795,-.108386,.980785,-.162212,-.212607,.92388,-.31819,-.308658,.83147,-.46194,-.392847,.707107,-.587938,-.46194,.55557,-.691342,-.51328,.382683,-.768178,-.544895,.19509,-.815493,-.55557,0,-.83147,-.544895,-.19509,-.815493,-.51328,-.382683,-.768178,-.46194,-.55557,-.691342,-.392847,-.707107,-.587938,-.308658,-.83147,-.46194,-.212607,-.92388,-.31819,-.108386,-.980785,-.162212,-.074658,.980785,-.18024,-.146446,.92388,-.353554,-.212607,.83147,-.51328,-.270598,.707107,-.653282,-.318189,.55557,-.768178,-.353553,.382683,-.853554,-.37533,.19509,-.906128,-.382683,0,-.92388,-.37533,-.19509,-.906128,-.353553,-.382683,-.853554,-.318189,-.55557,-.768178,-.270598,-.707107,-.653282,-.212607,-.83147,-.51328,-.146446,-.92388,-.353554,-.074658,-.980785,-.18024,-.03806,.980785,-.191342,-.074658,.92388,-.375331,-.108386,.83147,-.544895,-.137949,.707107,-.69352,-.162211,.55557,-.815493,-.18024,.382683,-.906128,-.191341,.19509,-.96194,-.19509,0,-.980785,-.191341,-.19509,-.96194,-.18024,-.382683,-.906128,-.162211,-.55557,-.815493,-.137949,-.707107,-.69352,-.108386,-.83147,-.544895,-.074658,-.92388,-.37533,-.03806,-.980785,-.191342,0,.980785,-.195091,0,.92388,-.382684,0,.83147,-.55557,0,.707107,-.707107,0,.55557,-.83147,0,.382683,-.92388,0,.19509,-.980785,0,0,-1,0,-.19509,-.980785,0,-.382683,-.92388,0,-.55557,-.83147,0,-.707107,-.707107,0,-.83147,-.55557,0,-.92388,-.382684,0,-.980785,-.19509,.038061,.980785,-.191342,.074658,.92388,-.375331,.108387,.83147,-.544895,.13795,.707107,-.69352,.162212,.55557,-.815493,.18024,.382683,-.906128,.191342,.19509,-.96194,.195091,0,-.980785,.191342,-.19509,-.96194,.18024,-.382683,-.906128,.162212,-.55557,-.815493,.13795,-.707107,-.69352,.108387,-.83147,-.544895,.074658,-.92388,-.37533,.038061,-.980785,-.191342,.074658,.980785,-.18024,.146447,.92388,-.353554,.212608,.83147,-.51328,.270598,.707107,-.653282,.31819,.55557,-.768178,.353554,.382683,-.853554,.375331,.19509,-.906127,.382684,0,-.92388,.375331,-.19509,-.906127,.353554,-.382683,-.853554,.31819,-.55557,-.768178,.270598,-.707107,-.653282,.212608,-.83147,-.51328,.146447,-.92388,-.353553,.074658,-.980785,-.18024,.108387,.980785,-.162212,.212608,.92388,-.31819,.308659,.83147,-.46194,.392848,.707107,-.587938,.46194,.55557,-.691342,.51328,.382683,-.768178,.544895,.19509,-.815493,.555571,0,-.83147,.544895,-.19509,-.815493,.51328,-.382683,-.768178,.46194,-.55557,-.691342,.392848,-.707107,-.587938,.308659,-.83147,-.46194,.212608,-.92388,-.31819,.108387,-.980785,-.162212,.13795,.980785,-.13795,.270599,.92388,-.270598,.392848,.83147,-.392848,.5,.707107,-.5,.587938,.55557,-.587938,.653282,.382683,-.653282,.69352,.19509,-.69352,.707107,0,-.707107,.69352,-.19509,-.69352,.653282,-.382683,-.653282,.587938,-.55557,-.587938,.5,-.707107,-.5,.392848,-.83147,-.392848,.270598,-.92388,-.270598,.13795,-.980785,-.13795,.162212,.980785,-.108386,.31819,.92388,-.212608,.46194,.83147,-.308658,.587938,.707107,-.392848,.691342,.55557,-.46194,.768178,.382683,-.51328,.815493,.19509,-.544895,.83147,0,-.55557,.815493,-.19509,-.544895,.768178,-.382683,-.51328,.691342,-.55557,-.46194,.587938,-.707107,-.392848,.46194,-.83147,-.308658,.31819,-.92388,-.212608,.162212,-.980785,-.108386,.18024,.980785,-.074658,.353554,.92388,-.146447,.51328,.83147,-.212608,.653282,.707107,-.270598,.768178,.55557,-.31819,.853554,.382683,-.353553,.906128,.19509,-.37533,.92388,0,-.382683,.906128,-.19509,-.37533,.853554,-.382683,-.353553,.768178,-.55557,-.31819,.653282,-.707107,-.270598,.51328,-.83147,-.212608,.353554,-.92388,-.146447,.18024,-.980785,-.074658,.191342,.980785,-.03806,.375331,.92388,-.074658,.544896,.83147,-.108386,.69352,.707107,-.13795,.815493,.55557,-.162212,.906128,.382683,-.18024,.96194,.19509,-.191342,.980786,0,-.19509,.96194,-.19509,-.191342,.906128,-.382683,-.18024,.815493,-.55557,-.162212,.69352,-.707107,-.13795,.544895,-.83147,-.108386,.375331,-.92388,-.074658,.191342,-.980785,-.03806,.195091,.980785,0,.382684,.92388,-0,.555571,.83147,-0,.707107,.707107,0,.83147,.55557,0,.92388,.382683,-0,.980785,.19509,0,1,0,0,.980785,-.19509,0,.92388,-.382683,-0,.83147,-.55557,0,.707107,-.707107,0,.55557,-.83147,0,.382684,-.92388,-0,.195091,-.980785,-0,.191342,.980785,.03806,.375331,.92388,.074658,.544896,.83147,.108386,.69352,.707107,.13795,.815493,.55557,.162212,.906128,.382683,.18024,.96194,.19509,.191342,.980786,0,.19509,.96194,-.19509,.191342,.906128,-.382683,.18024,.815493,-.55557,.162212,.69352,-.707107,.13795,.544895,-.83147,.108386,.375331,-.92388,.074658,.191342,-.980785,.03806,.18024,.980785,.074658,.353554,.92388,.146447,.51328,.83147,.212608,.653282,.707107,.270598,.768178,.55557,.31819,.853554,.382683,.353553,.906127,.19509,.37533,.92388,0,.382684,.906127,-.19509,.37533,.853554,-.382683,.353553,.768178,-.55557,.31819,.653282,-.707107,.270598,.51328,-.83147,.212608,.353554,-.92388,.146447,.18024,-.980785,.074658,.162212,.980785,.108386,.31819,.92388,.212608,.46194,.83147,.308658,.587938,.707107,.392847,.691342,.55557,.46194,.768178,.382683,.51328,.815493,.19509,.544895,.83147,0,.55557,.815493,-.19509,.544895,.768178,-.382683,.51328,.691342,-.55557,.46194,.587938,-.707107,.392847,.46194,-.83147,.308658,.31819,-.92388,.212607,.162212,-.980785,.108386,.13795,.980785,.13795,.270598,.92388,.270598,.392848,.83147,.392848,.5,.707107,.5,.587938,.55557,.587938,.653282,.382683,.653281,.69352,.19509,.69352,.707107,0,.707107,.69352,-.19509,.69352,.653282,-.382683,.653281,.587938,-.55557,.587938,.5,-.707107,.5,.392848,-.83147,.392847,.270598,-.92388,.270598,.13795,-.980785,.13795,.108387,.980785,.162212,.212608,.92388,.31819,.308659,.83147,.46194,.392848,.707107,.587938,.46194,.55557,.691342,.51328,.382683,.768178,.544895,.19509,.815493,.55557,0,.83147,.544895,-.19509,.815493,.51328,-.382683,.768178,.46194,-.55557,.691342,.392848,-.707107,.587938,.308658,-.83147,.46194,.212608,-.92388,.31819,.108387,-.980785,.162212,0,-1,0,.074658,.980785,.18024,.146447,.92388,.353553,.212608,.83147,.51328,.270598,.707107,.653281,.31819,.55557,.768177,.353554,.382683,.853553,.37533,.19509,.906127,.382684,0,.92388,.37533,-.19509,.906127,.353554,-.382683,.853553,.31819,-.55557,.768177,.270598,-.707107,.653281,.212608,-.83147,.51328,.146447,-.92388,.353553,.074658,-.980785,.18024,.038061,.980785,.191342,.074658,.92388,.37533,.108387,.83147,.544895,.13795,.707107,.69352,.162212,.55557,.815493,.18024,.382683,.906127,.191342,.19509,.961939,.19509,0,.980785,.191342,-.19509,.961939,.18024,-.382683,.906127,.162212,-.55557,.815493,.13795,-.707107,.69352,.108387,-.83147,.544895,.074658,-.92388,.37533,.038061,-.980785,.191342,0,.980785,.19509,0,.92388,.382683,0,.83147,.55557,0,.707107,.707107,0,.55557,.831469,0,.382683,.923879,0,.19509,.980785,0,0,1,0,-.19509,.980785,0,-.382683,.923879,0,-.55557,.831469,0,-.707107,.707107,0,-.83147,.55557,0,-.92388,.382683,0,-.980785,.19509,-.03806,.980785,.191342,-.074658,.92388,.37533,-.108386,.83147,.544895,-.137949,.707107,.69352,-.162211,.55557,.815493,-.18024,.382683,.906127,-.191342,.19509,.961939,-.19509,0,.980785,-.191342,-.19509,.961939,-.18024,-.382683,.906127,-.162211,-.55557,.815493,-.137949,-.707107,.69352,-.108386,-.83147,.544895,-.074658,-.92388,.37533,-.03806,-.980785,.191342,-.074658,.980785,.18024,-.146446,.92388,.353553,-.212607,.83147,.51328,-.270598,.707107,.653281,-.318189,.55557,.768177,-.353553,.382683,.853553,-.37533,.19509,.906127,-.382683,0,.923879,-.37533,-.19509,.906127,-.353553,-.382683,.853553,-.318189,-.55557,.768177,-.270598,-.707107,.653281,-.212607,-.83147,.51328,-.146446,-.92388,.353553,-.074657,-.980785,.18024,-.108386,.980785,.162212,-.212607,.92388,.31819,-.308658,.83147,.46194,-.392847,.707107,.587938,-.461939,.55557,.691341,-.51328,.382683,.768178,-.544895,.19509,.815493,-.55557,0,.831469,-.544895,-.19509,.815493,-.51328,-.382683,.768178,-.461939,-.55557,.691341,-.392847,-.707107,.587938,-.308658,-.83147,.46194,-.212607,-.92388,.318189,-.108386,-.980785,.162212,-.137949,.980785,.13795,-.270598,.92388,.270598,-.392847,.83147,.392847,-.5,.707107,.5,-.587937,.55557,.587937,-.653281,.382683,.653281,-.693519,.19509,.693519,-.707106,0,.707106,-.693519,-.19509,.693519,-.653281,-.382683,.653281,-.587937,-.55557,.587937,-.5,-.707107,.5,-.392847,-.83147,.392847,-.270598,-.92388,.270598,-.137949,-.980785,.13795,-.162211,.980785,.108386,-.318189,.92388,.212607,-.461939,.83147,.308658,-.587937,.707107,.392847,-.691341,.55557,.461939,-.768177,.382683,.51328,-.815492,.19509,.544895,-.831469,0,.55557,-.815492,-.19509,.544895,-.768177,-.382683,.51328,-.691341,-.55557,.461939,-.587937,-.707107,.392847,-.461939,-.83147,.308658,-.318189,-.92388,.212607,-.162211,-.980785,.108386,0,1,0,-.18024,.980785,.074658,-.353553,.92388,.146447,-.51328,.83147,.212607,-.653281,.707107,.270598,-.768177,.55557,.318189,-.853553,.382683,.353553,-.906127,.19509,.37533,-.923879,0,.382683,-.906127,-.19509,.37533,-.853553,-.382683,.353553,-.768177,-.55557,.318189,-.653281,-.707107,.270598,-.513279,-.83147,.212607,-.353553,-.92388,.146446,-.18024,-.980785,.074658,-.191342,.980785,.03806,-.37533,.92388,.074658,-.544895,.83147,.108386,-.69352,.707107,.13795,-.815492,.55557,.162211,-.906127,.382683,.18024,-.961939,.19509,.191341,-.980785,0,.19509,-.961939,-.19509,.191341,-.906127,-.382683,.18024,-.815492,-.55557,.162211,-.69352,-.707107,.13795,-.544895,-.83147,.108386,-.37533,-.92388,.074658,-.191341,-.980785,.03806],r=t.generateSphereUV_=function(){for(var e=[],t=0;t<i.length;){var a=i[t],r=i[t+1],n=i[t+2];t+=3;r/=Math.sqrt(a*a+r*r+n*n);a=.5-Math.asin(r)/Math.PI;e.push(-1),e.push(a)}return e};t.sphereTextureUV=r(),t.sphereIndices=[9,24,25,2,17,18,11,10,25,3,18,19,11,26,27,4,19,20,12,27,28,5,20,21,13,28,29,6,21,22,7,22,23,0,15,16,9,8,23,2,1,16,24,23,38,16,31,32,24,39,40,17,32,33,26,25,40,18,33,34,26,41,42,19,34,35,27,42,43,20,35,36,28,43,44,21,36,37,23,22,37,15,30,31,42,57,58,36,35,50,43,58,59,36,51,52,37,52,53,30,45,46,38,53,54,31,46,47,40,39,54,32,47,48,41,40,55,33,48,49,41,56,57,34,49,50,46,61,62,55,54,69,47,62,63,55,70,71,48,63,64,56,71,72,49,64,65,57,72,73,50,65,66,58,73,74,52,51,66,52,67,68,45,60,61,53,68,69,65,80,81,73,88,89,67,66,81,67,82,83,60,75,76,68,83,84,61,76,77,70,69,84,62,77,78,70,85,86,64,63,78,72,71,86,64,79,80,73,72,87,85,84,99,77,92,93,86,85,100,79,78,93,86,101,102,79,94,95,88,87,102,81,80,95,88,103,104,81,96,97,82,97,98,75,90,91,83,98,99,76,91,92,104,103,118,96,111,112,97,112,113,90,105,106,98,113,114,91,106,107,100,99,114,93,92,107,101,100,115,93,108,109,101,116,117,94,109,110,102,117,118,96,95,110,115,130,131,108,123,124,117,116,131,109,124,125,118,117,132,111,110,125,119,118,133,111,126,127,113,112,127,105,120,121,113,128,129,106,121,122,115,114,129,107,122,123,127,142,143,121,120,135,128,143,144,121,136,137,130,129,144,122,137,138,130,145,146,124,123,138,132,131,146,124,139,140,132,147,148,126,125,140,134,133,148,126,141,142,138,153,154,146,161,162,139,154,155,148,147,162,141,140,155,148,163,164,141,156,157,142,157,158,135,150,151,143,158,159,137,136,151,145,144,159,137,152,153,145,160,161,158,157,172,150,165,166,158,173,174,151,166,167,160,159,174,152,167,168,160,175,176,154,153,168,162,161,176,154,169,170,162,177,178,156,155,170,163,178,179,156,171,172,177,176,191,169,184,185,177,192,193,171,170,185,179,178,193,171,186,187,172,187,188,165,180,181,173,188,189,166,181,182,174,189,190,167,182,183,175,190,191,168,183,184,180,195,196,188,203,204,181,196,197,190,189,204,183,182,197,190,205,206,184,183,198,192,191,206,184,199,200,192,207,208,186,185,200,194,193,208,186,201,202,188,187,202,199,214,215,207,222,223,201,200,215,208,223,224,201,216,217,202,217,218,195,210,211,203,218,219,197,196,211,205,204,219,197,212,213,205,220,221,198,213,214,207,206,221,218,233,234,211,226,227,220,219,234,212,227,228,220,235,236,213,228,229,221,236,237,214,229,230,222,237,238,216,215,230,224,223,238,216,231,232,217,232,233,210,225,226,237,252,253,231,230,245,239,238,253,231,246,247,232,247,248,225,240,241,233,248,249,227,226,241,235,234,249,228,227,242,235,250,251,228,243,244,237,236,251,229,244,245,250,249,264,243,242,257,250,265,266,244,243,258,251,266,267,244,259,260,252,267,268,246,245,260,253,268,269,246,261,262,247,262,263,240,255,256,248,263,264,241,256,257,269,268,283,261,276,277,263,262,277,255,270,271,263,278,279,256,271,272,265,264,279,258,257,272,265,280,281,259,258,273,266,281,282,259,274,275,268,267,282,261,260,275,272,287,288,280,295,296,274,273,288,282,281,296,274,289,290,282,297,298,276,275,290,284,283,298,276,291,292,277,292,293,270,285,286,278,293,294,271,286,287,280,279,294,292,291,306,292,307,308,285,300,301,293,308,309,286,301,302,295,294,309,288,287,302,295,310,311,289,288,303,296,311,312,289,304,305,297,312,313,291,290,305,298,313,314,310,325,326,304,303,318,311,326,327,304,319,320,313,312,327,306,305,320,313,328,329,306,321,322,307,322,323,300,315,316,308,323,324,301,316,317,310,309,324,303,302,317,322,338,339,315,331,332,323,339,340,316,332,333,325,324,340,318,317,333,326,325,341,319,318,334,326,342,343,319,335,336,328,327,343,321,320,336,329,328,344,321,337,338,335,334,349,342,357,358,335,350,351,344,343,358,337,336,351,344,359,360,337,352,353,338,353,354,332,331,346,339,354,355,332,347,348,341,340,355,334,333,348,341,356,357,354,353,368,347,346,361,354,369,370,347,362,363,356,355,370,349,348,363,356,371,372,349,364,365,358,357,372,350,365,366,359,358,373,352,351,366,359,374,375,352,367,368,372,387,388,365,380,381,374,373,388,367,366,381,374,389,390,367,382,383,369,368,383,362,361,376,369,384,385,362,377,378,371,370,385,364,363,378,371,386,387,365,364,379,384,399,400,377,392,393,386,385,400,379,378,393,386,401,402,379,394,395,387,402,403,380,395,396,389,388,403,382,381,396,389,404,405,382,397,398,383,398,399,376,391,392,404,403,418,397,396,411,404,419,420,397,412,413,399,398,413,391,406,407,399,414,415,393,392,407,401,400,415,394,393,408,401,416,417,395,394,409,402,417,418,395,410,411,407,422,423,416,415,430,408,423,424,416,431,432,410,409,424,417,432,433,410,425,426,418,433,434,412,411,426,419,434,435,412,427,428,414,413,428,406,421,422,414,429,430,427,426,441,434,449,450,428,427,442,428,443,444,421,436,437,429,444,445,422,437,438,431,430,445,423,438,439,431,446,447,425,424,439,433,432,447,425,440,441,433,448,449,446,445,461,439,438,454,446,462,463,440,439,455,447,463,464,440,456,457,448,464,465,442,441,457,449,465,466,442,458,459,443,459,460,437,436,452,444,460,461,438,437,453,466,465,480,458,473,474,459,474,475,452,467,468,460,475,476,453,468,469,462,461,476,454,469,470,462,477,478,456,455,470,463,478,479,456,471,472,464,479,480,458,457,472,0,451,15,330,14,29,15,451,30,330,29,44,30,451,45,330,44,59,45,451,60,330,59,74,60,451,75,330,74,89,75,451,90,330,89,104,90,451,105,330,104,119,105,451,120,330,119,134,120,451,135,330,134,149,135,451,150,330,149,164,150,451,165,330,164,179,165,451,180,330,179,194,180,451,195,330,194,209,195,451,210,330,209,224,210,451,225,330,224,239,225,451,240,330,239,254,240,451,255,330,254,269,255,451,270,330,269,284,270,451,285,330,284,299,285,451,300,330,299,314,300,451,315,330,314,329,315,451,331,330,329,345,331,451,346,330,345,360,346,451,361,330,360,375,361,451,376,330,375,390,376,451,391,330,390,405,391,451,406,330,405,420,406,451,421,330,420,435,421,451,436,330,435,450,436,451,452,330,450,466,452,451,467,330,466,481,470,469,2,477,10,11,471,470,3,478,11,12,472,471,4,479,12,13,473,472,5,480,13,14,474,473,6,467,451,0,330,481,14,474,7,8,468,467,0,475,8,9,469,468,1,476,9,10,10,9,25,3,2,18,26,11,25,4,3,19,12,11,27,5,4,20,13,12,28,6,5,21,14,13,29,7,6,22,8,7,23,1,0,16,24,9,23,17,2,16,39,24,38,17,16,32,25,24,40,18,17,33,41,26,40,19,18,34,27,26,42,20,19,35,28,27,43,21,20,36,29,28,44,22,21,37,38,23,37,16,15,31,43,42,58,51,36,50,44,43,59,37,36,52,38,37,53,31,30,46,39,38,54,32,31,47,55,40,54,33,32,48,56,41,55,34,33,49,42,41,57,35,34,50,47,46,62,70,55,69,48,47,63,56,55,71,49,48,64,57,56,72,50,49,65,58,57,73,51,50,66,59,58,74,67,52,66,53,52,68,46,45,61,54,53,69,66,65,81,74,73,89,82,67,81,68,67,83,61,60,76,69,68,84,62,61,77,85,70,84,63,62,78,71,70,86,79,64,78,87,72,86,65,64,80,88,73,87,100,85,99,78,77,93,101,86,100,94,79,93,87,86,102,80,79,95,103,88,102,96,81,95,89,88,104,82,81,97,83,82,98,76,75,91,84,83,99,77,76,92,119,104,118,97,96,112,98,97,113,91,90,106,99,98,114,92,91,107,115,100,114,108,93,107,116,101,115,94,93,109,102,101,117,95,94,110,103,102,118,111,96,110,116,115,131,109,108,124,132,117,131,110,109,125,133,118,132,126,111,125,134,119,133,112,111,127,128,113,127,106,105,121,114,113,129,107,106,122,130,115,129,108,107,123,128,127,143,136,121,135,129,128,144,122,121,137,145,130,144,123,122,138,131,130,146,139,124,138,147,132,146,125,124,140,133,132,148,141,126,140,149,134,148,127,126,142,139,138,154,147,146,162,140,139,155,163,148,162,156,141,155,149,148,164,142,141,157,143,142,158,136,135,151,144,143,159,152,137,151,160,145,159,138,137,153,146,145,161,173,158,172,151,150,166,159,158,174,152,151,167,175,160,174,153,152,168,161,160,176,169,154,168,177,162,176,155,154,170,163,162,178,171,156,170,164,163,179,157,156,172,192,177,191,170,169,185,178,177,193,186,171,185,194,179,193,172,171,187,173,172,188,166,165,181,174,173,189,167,166,182,175,174,190,168,167,183,176,175,191,169,168,184,181,180,196,189,188,204,182,181,197,205,190,204,198,183,197,191,190,206,199,184,198,207,192,206,185,184,200,193,192,208,201,186,200,209,194,208,187,186,202,203,188,202,200,199,215,208,207,223,216,201,215,209,208,224,202,201,217,203,202,218,196,195,211,204,203,219,212,197,211,220,205,219,198,197,213,206,205,221,199,198,214,222,207,221,219,218,234,212,211,227,235,220,234,213,212,228,221,220,236,214,213,229,222,221,237,215,214,230,223,222,238,231,216,230,239,224,238,217,216,232,218,217,233,211,210,226,238,237,253,246,231,245,254,239,253,232,231,247,233,232,248,226,225,241,234,233,249,242,227,241,250,235,249,243,228,242,236,235,251,229,228,244,252,237,251,230,229,245,265,250,264,258,243,257,251,250,266,259,244,258,252,251,267,245,244,260,253,252,268,261,246,260,254,253,269,247,246,262,248,247,263,241,240,256,249,248,264,242,241,257,284,269,283,262,261,277,278,263,277,256,255,271,264,263,279,257,256,272,280,265,279,273,258,272,266,265,281,274,259,273,267,266,282,260,259,275,283,268,282,276,261,275,273,272,288,281,280,296,289,274,288,297,282,296,275,274,290,283,282,298,291,276,290,299,284,298,277,276,292,278,277,293,271,270,286,279,278,294,272,271,287,295,280,294,307,292,306,293,292,308,286,285,301,294,293,309,287,286,302,310,295,309,303,288,302,296,295,311,304,289,303,297,296,312,290,289,305,298,297,313,306,291,305,299,298,314,311,310,326,319,304,318,312,311,327,305,304,320,328,313,327,321,306,320,314,313,329,307,306,322,308,307,323,301,300,316,309,308,324,302,301,317,325,310,324,318,303,317,323,322,339,316,315,332,324,323,340,317,316,333,341,325,340,334,318,333,342,326,341,335,319,334,327,326,343,320,319,336,344,328,343,337,321,336,345,329,344,322,321,338,350,335,349,343,342,358,336,335,351,359,344,358,352,337,351,345,344,360,338,337,353,339,338,354,347,332,346,340,339,355,333,332,348,356,341,355,349,334,348,342,341,357,369,354,368,362,347,361,355,354,370,348,347,363,371,356,370,364,349,363,357,356,372,350,349,365,373,358,372,351,350,366,374,359,373,367,352,366,360,359,375,353,352,368,373,372,388,366,365,381,389,374,388,382,367,381,375,374,390,368,367,383,384,369,383,377,362,376,370,369,385,363,362,378,386,371,385,379,364,378,372,371,387,380,365,379,385,384,400,378,377,393,401,386,400,394,379,393,387,386,402,380,379,395,388,387,403,381,380,396,404,389,403,397,382,396,390,389,405,383,382,398,384,383,399,377,376,392,419,404,418,412,397,411,405,404,420,398,397,413,414,399,413,392,391,407,400,399,415,408,393,407,416,401,415,409,394,408,402,401,417,410,395,409,403,402,418,396,395,411,408,407,423,431,416,430,409,408,424,417,416,432,425,410,424,418,417,433,411,410,426,419,418,434,427,412,426,420,419,435,413,412,428,429,414,428,407,406,422,415,414,430,442,427,441,435,434,450,443,428,442,429,428,444,422,421,437,430,429,445,423,422,438,446,431,445,424,423,439,432,431,447,440,425,439,448,433,447,426,425,441,434,433,449,462,446,461,455,439,454,447,446,463,456,440,455,448,447,464,441,440,457,449,448,465,458,442,457,450,449,466,443,442,459,444,443,460,453,437,452,445,444,461,454,438,453,481,466,480,459,458,474,460,459,475,453,452,468,461,460,476,454,453,469,477,462,476,455,454,470,463,462,478,471,456,470,464,463,479,457,456,472,465,464,480,473,458,472,3,470,2,478,477,11,4,471,3,479,478,12,5,472,4,480,479,13,6,473,5,481,480,14,7,474,6,475,474,8,1,468,0,476,475,9,2,469,1,477,476,10]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.types={Vertex:0,Fragment:1},t.vertexCubeSource="\n    attribute vec4 aVertexPosition;\n    attribute vec3 aVertexNormal;\n    attribute vec2 aTextureCoord;\n    uniform mat4 uNormalMatrix;\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n    varying highp vec2 vTextureCoord;\n    varying highp vec3 vLighting;\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vTextureCoord = aTextureCoord;\n      \n    }\n  ",t.fragmentCubeSource="\n    varying highp vec2 vTextureCoord;\n    \n    uniform sampler2D uSampler;\n    void main(void) {\n      highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n      gl_FragColor = vec4(texelColor.rgb , texelColor.a);\n    }\n  ",t.vertexSphereSource="attribute vec4 a_vPosition;    \nattribute vec2 a_TexCoordinate;  \nuniform mat4 u_VPMatrix; \nvarying vec2 v_TexCoordinate;    \nvarying vec3 pass_position; \nvoid main()  \n{    \n gl_Position = u_VPMatrix * a_vPosition;   \n v_TexCoordinate = a_TexCoordinate;  \n pass_position = a_vPosition.xyz;  \n}\n",t.fragmentSphereSource="precision highp float; \n#define PI 3.141592653589793238462643383279  \nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position; \nuniform sampler2D uSampler;\nuniform bool iOS_HLS_Colors;\nvoid main(void) {\nhighp float xValue = \n      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);  \n vec2 tc = vec2(xValue, v_TexCoordinate.t); \n tc = vec2(tc.x , tc.y); \nhighp vec4 texelColor =\n      texture2D(uSampler, tc);\n      if (iOS_HLS_Colors)\n         texelColor = texelColor.bgra;\n  gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n}\n"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reload=t.GetRmpvast=t.GetDiv=t.AdInstance=t.ChangeSource=t.UnMount=t.Setup=void 0;var r=c(a(7)),n=c(a(70)),i=c(a(534)),o=a(214),s=a(13),l=c(a(623)),u=a(15);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return n.default.unmountComponentAtNode(e)}var h,p,f=(0,o.combineReducers)({NexPlayerReducer:l.default}),m=void 0,g=[],y=[];t.Setup=function(e){null!=h&&d(h.div),h=e,(m=(0,o.createStore)(f)).dispatch((0,u.InitURL)(e.key,e.src,e.name,e.subtitle,e.poster,e.logosrc,e.drm,e.callbacksForPlayer,e.vast,e.dynamicThumbnails,e.staticThumbnails,e.cast,e.mutedAtStart,e.div,e.type_360,e.debug,e.callbackForLogger,e.useDefaultControls,e.startFullScreen,e.hideUITime,e.hideControlBarOnStart,e.defaultLanguage,e.callbackForReturn,e.externalSubtitles,e.callbackForSubtitles,e.autoplay,e.showingFullUI,e.disableKeyEvents,e.resumePosition,e.configuration,e.adsDelay,e.reinitializeAfterAds,e.addRequestFilter,e.useNewRelicTracker,e.startingBufferLength,e.preferredAudioCodec,e.trailer,e.improveStartUp,e.adsMode,e.showAdsUI,e.adsParamsToEncode,e.ssaiMediaTailor,e.adsLoadTimeout,e.bitrateConfig,e.retryParameters,e.backupManifests,e.wmInfo,e.daiConfig,e.pageUrl,e.preferredVideoCodec,e.enableVpaid)),n.default.render(r.default.createElement(s.Provider,{store:m},r.default.createElement(i.default,{getAdInstance:function(e){p=e},focusButtonsArray:function(e){g.push(e)},focusTopBar:function(e){y.push(e)}}," ")),e.div)},t.UnMount=d,t.ChangeSource=function(e){var t;"string"==typeof e?h.src=e:(e.drm&&((t=new Array)[0]=e.drm,h.drm=t),h.src=e.src),nexplayer.UnMount(h.div),nexplayer.Setup(h)},t.AdInstance=function(e){return p},t.GetDiv=function(){return h.div},t.GetRmpvast=function(e){if(null!=p)return"default"===h.adsMode||"pal"===h.adsMode||void 0===h.adsMode?p.rmpvast:"ima"===h.adsMode||"dai"===h.adsMode?p:void 0},t.Reload=function(){var e=h;d(e.div),setTimeout(function(){null!=e.vast&&null!=e.autoplay&&e.autoplay&&(e.mutedAtStart=!0),null!=(h=e).mainColor&&null!=e.mainColor&&document.body.style.setProperty("--nexplayer_main_color",e.mainColor),m.dispatch((0,u.InitURL)(e.key,e.src,e.name,e.subtitle,e.poster,e.logosrc,e.drm,e.callbacksForPlayer,e.vast,e.dynamicThumbnails,e.staticThumbnails,e.cast,e.mutedAtStart,e.div,e.type_360,e.debug,e.callbackForLogger,e.useDefaultControls,e.startFullScreen,e.hideUITime,e.hideControlBarOnStart,e.defaultLanguage,e.callbackForReturn,e.externalSubtitles,e.callbackForSubtitles,e.autoplay,e.showingFullUI,e.disableKeyEvents,e.resumePosition,e.configuration,e.adsDelay,e.reinitializeAfterAds,e.addRequestFilter,e.useNewRelicTracker,e.startingBufferLength,e.preferredAudioCodec,e.trailer,e.improveStartUp,e.adsMode,e.showAdsUI,e.adsParamsToEncode,e.ssaiMediaTailor,e.adsLoadTimeout,e.bitrateConfig,e.retryParameters,e.backupManifests,e.wmInfo,e.daiConfig,e.pageUrl,e.preferredVideoCodec,e.enableVpaid)),n.default.render(r.default.createElement(s.Provider,{store:m},r.default.createElement(i.default,{focusButtonsArray:function(e){g.push(e)},focusTopBar:function(e){y.push(e)}}," ")),e.div)})}},function(O,e,t){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=t(209),t="function"==typeof Symbol&&Symbol.for,d=t?Symbol.for("react.element"):60103,h=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,n=t?Symbol.for("react.profiler"):60114,i=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,s=t?Symbol.for("react.forward_ref"):60112,l=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.memo"):60115,f=t?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function _(e,t,a){this.props=e,this.context=t,this.refs=v,this.updater=a||y}function k(){}function b(e,t,a){this.props=e,this.context=t,this.refs=v,this.updater=a||y}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=_.prototype;var t=b.prototype=new k,S=(t.constructor=b,c(t,_.prototype),t.isPureReactComponent=!0,{current:null}),E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,a){var r,n={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&!T.hasOwnProperty(r)&&(n[r]=t[r]);var s=arguments.length-2;if(1===s)n.children=a;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];n.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return{$$typeof:d,type:e,key:i,ref:o,props:n,_owner:S.current}}function A(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&e.$$typeof===d}var P=/\/+/g,C=[];function w(e,t,a,r){var n;return C.length?((n=C.pop()).result=e,n.keyPrefix=t,n.func=a,n.context=r,n.count=0,n):{result:e,keyPrefix:t,func:a,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,C.length<10&&C.push(e)}function I(e,t,a){return null==e?0:function e(t,a,r,n){var i=!1;if(null===(t="undefined"!==(s=void 0===t?"undefined":u(t))&&"boolean"!==s?t:null))i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case d:case h:i=!0}}if(i)return r(n,t,""===a?"."+R(t,0):a),1;if(i=0,a=""===a?".":a+":",Array.isArray(t))for(var o=0;o<t.length;o++){var s,l=a+R(s=t[o],o);i+=e(s,l,r,n)}else if("function"==typeof(l=null!==t&&"object"===(void 0===t?"undefined":u(t))&&"function"==typeof(l=m&&t[m]||t["@@iterator"])?l:null))for(t=l.call(t),o=0;!(s=t.next()).done;)i+=e(s=s.value,l=a+R(s,o++),r,n);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return i}(e,"",t,a)}function R(e,t){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&null!=e.key?(e=e.key,a={"=":"=0",":":"=2"},"$"+(""+e).replace(/[=:]/g,function(e){return a[e]})):t.toString(36);var a}function U(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,a){var r=e.result,n=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?D(e,r,a,function(e){return e}):null!=e&&(A(e)&&(t=n+(!(n=e).key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+a,e={$$typeof:d,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}),r.push(e))}function D(e,t,a,r,n){var i="";I(e,B,t=w(t,i=null!=a?(""+a).replace(P,"$&/")+"/":i,r,n)),M(t)}var N={current:null};function L(){var e=N.current;if(null===e)throw Error(g(321));return e}t={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:c};e.Children={map:function(e,t,a){return null==e||D(e,e=[],null,t,a),e},forEach:function(e,t,a){if(null==e)return e;I(e,U,t=w(null,null,t,a)),M(t)},count:function(e){return I(e,function(){return null},null)},toArray:function(e){var t=[];return D(e,t,null,function(e){return e}),t},only:function(e){if(A(e))return e;throw Error(g(143))}},e.Component=_,e.Fragment=a,e.Profiler=n,e.PureComponent=b,e.StrictMode=r,e.Suspense=l,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t,e.cloneElement=function(e,t,a){if(null==e)throw Error(g(267,e));var r=c({},e.props),n=e.key,i=e.ref,o=e._owner;if(null!=t)for(s in void 0!==t.ref&&(i=t.ref,o=S.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)E.call(t,s)&&!T.hasOwnProperty(s)&&(r[s]=(void 0===t[s]&&void 0!==l?l:t)[s]);var s=arguments.length-2;if(1===s)r.children=a;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:d,type:e.type,key:n,ref:i,props:r,_owner:o}},e.createContext=function(e,t){return(e={$$typeof:o,_calculateChangedBits:t=void 0===t?null:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},e.createElement=x,e.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:s,render:e}},e.isValidElement=A,e.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},e.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},e.useCallback=function(e,t){return L().useCallback(e,t)},e.useContext=function(e,t){return L().useContext(e,t)},e.useDebugValue=function(){},e.useEffect=function(e,t){return L().useEffect(e,t)},e.useImperativeHandle=function(e,t,a){return L().useImperativeHandle(e,t,a)},e.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},e.useMemo=function(e,t){return L().useMemo(e,t)},e.useReducer=function(e,t,a){return L().useReducer(e,t,a)},e.useRef=function(e){return L().useRef(e)},e.useState=function(e){return L().useState(e)},e.version="16.14.0"},function(k,e,t){"use strict";var U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=t(7),y=t(209),n=t(532);function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!b)throw Error(B(227));var O=!1,F=null,j=!1,V=null,$={onError:function(e){O=!0,F=e}};function G(e,t,a,r,n,i,o,s,l){O=!1,F=null,function(e,t,a,r,n,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(a,u)}catch(e){this.onError(e)}}.apply($,arguments)}var H=null,W=null,z=null;function K(e,t,a){var r=e.type||"unknown-event";e.currentTarget=z(a),function(){var e;G.apply(this,arguments),O&&(e=F,O=!1,F=null,j||(j=!0,V=e))}(r,t,void 0,e),e.currentTarget=null}var q=null,Y={};function X(){if(q)for(var e in Y){var t=Y[e],a=q.indexOf(e);if(!(-1<a))throw Error(B(96,e));if(!Z[a]){if(!t.extractEvents)throw Error(B(97,e));for(var r in a=(Z[a]=t).eventTypes){var n=void 0,i=a[r],o=t,s=r;if(J.hasOwnProperty(s))throw Error(B(99,s));var l=(J[s]=i).phasedRegistrationNames;if(l){for(n in l)l.hasOwnProperty(n)&&Q(l[n],o,s);n=!0}else n=!!i.registrationName&&(Q(i.registrationName,o,s),!0);if(!n)throw Error(B(98,r,e))}}}}function Q(e,t,a){if(ee[e])throw Error(B(100,e));ee[e]=t,te[e]=t.eventTypes[a].dependencies}var Z=[],J={},ee={},te={};function ae(e){var t,a=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!Y.hasOwnProperty(t)||Y[t]!==r){if(Y[t])throw Error(B(102,t));Y[t]=r,a=!0}}a&&X()}var re=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ne=null,ie=null,oe=null;function se(e){if(e=W(e)){if("function"!=typeof ne)throw Error(B(280));var t=e.stateNode;t&&(t=H(t),ne(e.stateNode,e.type,t))}}function le(e){ie?oe?oe.push(e):oe=[e]:ie=e}function ue(){if(ie){var e=ie,t=oe;if(oe=ie=null,se(e),t)for(e=0;e<t.length;e++)se(t[e])}}function ce(e,t){return e(t)}function de(e,t,a,r,n){return e(t,a,r,n)}function he(){}var pe=ce,fe=!1,me=!1;function ge(){null===ie&&null===oe||(he(),ue())}function ye(e,t,a){if(me)return e(t,a);me=!0;try{pe(e,t,a)}finally{me=!1,ge()}}var ve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_e=Object.prototype.hasOwnProperty,ke={},be={};function Se(e,t,a,r){if(null==t||function(e,t,a,r){if(null===a||0!==a.type)switch(void 0===t?"undefined":U(t)){case"function":case"symbol":return 1;case"boolean":return r?void 0:null!==a?!a.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return}}(e,t,a,r))return 1;if(!r&&null!==a)switch(a.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}}function a(e,t,a,r,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=i}var o={},Ee=("children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){o[e]=new a(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];o[t]=new a(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){o[e]=new a(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){o[e]=new a(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){o[e]=new a(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){o[e]=new a(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){o[e]=new a(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){o[e]=new a(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){o[e]=new a(e,5,!1,e.toLowerCase(),null,!1)}),/[\-:]([a-z])/g);function Te(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ee,Te);o[t]=new a(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ee,Te);o[t]=new a(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ee,Te);o[t]=new a(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){o[e]=new a(e,1,!1,e.toLowerCase(),null,!1)}),o.xlinkHref=new a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){o[e]=new a(e,1,!1,e.toLowerCase(),null,!0)});t=b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function xe(e,t,a,r){var n,i=o.hasOwnProperty(t)?o[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(Se(t,a,i,r)&&(a=null),r||null===i?(n=t,(_e.call(be,n)||!_e.call(ke,n)&&(ve.test(n)?be[n]=!0:void(ke[n]=!0)))&&(null===a?e.removeAttribute(t):e.setAttribute(t,""+a))):i.mustUseProperty?e[i.propertyName]=null===a?3!==i.type&&"":a:(t=i.attributeName,r=i.attributeNamespace,null===a?e.removeAttribute(t):(a=3===(i=i.type)||4===i&&!0===a?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}t.hasOwnProperty("ReactCurrentDispatcher")||(t.ReactCurrentDispatcher={current:null}),t.hasOwnProperty("ReactCurrentBatchConfig")||(t.ReactCurrentBatchConfig={suspense:null});var Ae=/^(.*)[\\\/]/,r="function"==typeof Symbol&&Symbol.for,Pe=r?Symbol.for("react.element"):60103,Ce=r?Symbol.for("react.portal"):60106,we=r?Symbol.for("react.fragment"):60107,Me=r?Symbol.for("react.strict_mode"):60108,Ie=r?Symbol.for("react.profiler"):60114,Re=r?Symbol.for("react.provider"):60109,De=r?Symbol.for("react.context"):60110,Ne=r?Symbol.for("react.concurrent_mode"):60111,Le=r?Symbol.for("react.forward_ref"):60112,Oe=r?Symbol.for("react.suspense"):60113,Ue=r?Symbol.for("react.suspense_list"):60120,Be=r?Symbol.for("react.memo"):60115,Fe=r?Symbol.for("react.lazy"):60116,je=r?Symbol.for("react.block"):60121,Ve="function"==typeof Symbol&&Symbol.iterator;function $e(e){return null!==e&&"object"===(void 0===e?"undefined":U(e))&&"function"==typeof(e=Ve&&e[Ve]||e["@@iterator"])?e:null}function Ge(e){if(null!=e){if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case we:return"Fragment";case Ce:return"Portal";case Ie:return"Profiler";case Me:return"StrictMode";case Oe:return"Suspense";case Ue:return"SuspenseList"}if("object"===(void 0===e?"undefined":U(e)))switch(e.$$typeof){case De:return"Context.Consumer";case Re:return"Context.Provider";case Le:var t=(t=e.render).displayName||t.name||"";return e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Be:return Ge(e.type);case je:return Ge(e.render);case Fe:if(e=1===e._status?e._result:null)return Ge(e)}}return null}function He(e){var t="";do{switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var a="";break;default:var r=e._debugOwner,n=e._debugSource,i=Ge(e.type),a=null;r&&(a=Ge(r.type)),r=i,i="",n?i=" (at "+n.fileName.replace(Ae,"")+":"+n.lineNumber+")":a&&(i=" (created by "+a+")"),a="\n    in "+(r||"Unknown")+i}}while(t+=a,e=e.return);return t}function We(e){switch(void 0===e?"undefined":U(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ze(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ke(e){e._valueTracker||(e._valueTracker=function(e){var t,a,r=ze(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),i=""+e[r];if(!e.hasOwnProperty(r)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set)return t=n.get,a=n.set,Object.defineProperty(e,r,{configurable:!0,get:function(){return t.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,r,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[r]}}}(e))}function qe(e){var t,a,r;if(e)return(t=e._valueTracker)?(a=t.getValue(),r="",(e=r=e?ze(e)?e.checked?"true":"false":e.value:r)!==a&&(t.setValue(e),1)):1}function Ye(e,t){var a=t.checked;return y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=a?a:e._wrapperState.initialChecked})}function Xe(e,t){var a=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked,a=We(null!=t.value?t.value:a);e._wrapperState={initialChecked:r,initialValue:a,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&xe(e,"checked",t,!1)}function Ze(e,t){Qe(e,t);var a=We(t.value),r=t.type;if(null!=a)"number"===r?(0===a&&""===e.value||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?et(e,t.type,a):t.hasOwnProperty("defaultValue")&&et(e,t.type,We(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}""!==(a=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==a&&(e.name=a)}function et(e,t,a){"number"===t&&e.ownerDocument.activeElement===e||(null==a?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}function tt(e,t){var a,r;return e=y({children:void 0},t),a=t.children,r="",b.Children.forEach(a,function(e){null!=e&&(r+=e)}),(t=r)&&(e.children=t),e}function at(e,t,a,r){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&r&&(e[a].defaultSelected=!0)}else{for(a=""+We(a),t=null,n=0;n<e.length;n++){if(e[n].value===a)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(B(91));return y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var a=t.value;if(null==a){if(a=t.children,t=t.defaultValue,null!=a){if(null!=t)throw Error(B(92));if(Array.isArray(a)){if(!(a.length<=1))throw Error(B(93));a=a[0]}t=a}a=t=null==t?"":t}e._wrapperState={initialValue:We(a)}}function it(e,t){var a=We(t.value),r=We(t.defaultValue);null!=a&&((a=""+a)!==e.value&&(e.value=a),null==t.defaultValue)&&e.defaultValue!==a&&(e.defaultValue=a),null!=r&&(e.defaultValue=""+r)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var r="http://www.w3.org/1999/xhtml",st="http://www.w3.org/2000/svg";function lt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}dt=function(e,t){if(e.namespaceURI!==st||"innerHTML"in e)e.innerHTML=t;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}};var ct,dt,ht="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,a,r){MSApp.execUnsafeLocalFunction(function(){return dt(e,t)})}:dt;function pt(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}function ft(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var mt={animationend:ft("Animation","AnimationEnd"),animationiteration:ft("Animation","AnimationIteration"),animationstart:ft("Animation","AnimationStart"),transitionend:ft("Transition","TransitionEnd")},gt={},yt={};function vt(e){if(gt[e])return gt[e];if(mt[e]){var t,a=mt[e];for(t in a)if(a.hasOwnProperty(t)&&t in yt)return gt[e]=a[t]}return e}re&&(yt=document.createElement("div").style,"AnimationEvent"in window||(delete mt.animationend.animation,delete mt.animationiteration.animation,delete mt.animationstart.animation),"TransitionEvent"in window||delete mt.transitionend.transition);var _t=vt("animationend"),kt=vt("animationiteration"),bt=vt("animationstart"),St=vt("transitionend"),Et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tt=new("function"==typeof WeakMap?WeakMap:Map);function xt(e){var t=Tt.get(e);return void 0===t&&(t=new Map,Tt.set(e,t)),t}function At(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).effectTag)&&(a=t.return),e=t.return;);return 3===t.tag?a:null}function Pt(e){if(13===e.tag){var t=e.memoizedState;if(null!==(t=null===t&&null!==(e=e.alternate)?e.memoizedState:t))return t.dehydrated}return null}function Ct(e){if(At(e)!==e)throw Error(B(188))}function wt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=At(e)))throw Error(B(188));return t!==e?null:e}for(var a=e,r=t;;){var n=a.return;if(null===n)break;var i=n.alternate;if(null===i){if(null===(r=n.return))break;a=r}else{if(n.child===i.child){for(i=n.child;i;){if(i===a)return Ct(n),e;if(i===r)return Ct(n),t;i=i.sibling}throw Error(B(188))}if(a.return!==r.return)a=n,r=i;else{for(var o=!1,s=n.child;s;){if(s===a){o=!0,a=n,r=i;break}if(s===r){o=!0,r=n,a=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===a){o=!0,a=i,r=n;break}if(s===r){o=!0,r=i,a=n;break}s=s.sibling}if(!o)throw Error(B(189))}}if(a.alternate!==r)throw Error(B(190))}}if(3!==a.tag)throw Error(B(188));return a.stateNode.current===a?e:t}(e))for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Mt(e,t){if(null==t)throw Error(B(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function It(e,t,a){Array.isArray(e)?e.forEach(t,a):e&&t.call(a,e)}var Rt=null;function Dt(e){if(e){var t=e._dispatchListeners,a=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)K(e,t[r],a[r]);else t&&K(e,t,a);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Nt(e){if(e=Rt=null!==e?Mt(Rt,e):Rt,Rt=null,e){if(It(e,Dt),Rt)throw Error(B(95));if(j)throw e=V,j=!1,V=null,e}}function Lt(e){return 3===(e=(e=e.target||e.srcElement||window).correspondingUseElement?e.correspondingUseElement:e).nodeType?e.parentNode:e}function Ot(e){var t;return re&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}var Ut=[];function Bt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Ut.length<10&&Ut.push(e)}function Ft(e,t,a,r){var n;return Ut.length?((n=Ut.pop()).topLevelType=e,n.eventSystemFlags=r,n.nativeEvent=t,n.targetInst=a,n):{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:a,ancestors:[]}}function jt(e){var t=r=e.targetInst;do{if(!t){e.ancestors.push(t);break}var a=t;if(3===a.tag)a=a.stateNode.containerInfo;else{for(;a.return;)a=a.return;a=3!==a.tag?null:a.stateNode.containerInfo}}while(a&&(5!==(r=t.tag)&&6!==r||e.ancestors.push(t),t=Qa(a)));for(t=0;t<e.ancestors.length;t++){var r=e.ancestors[t],n=Lt(e.nativeEvent),a=e.topLevelType,i=e.nativeEvent,o=e.eventSystemFlags;0===t&&(o|=64);for(var s=null,l=0;l<Z.length;l++){var u=Z[l];(u=u&&u.extractEvents(a,r,i,n,o))&&(s=Mt(s,u))}Nt(s)}}function Vt(e,t,a){if(!a.has(e)){switch(e){case"scroll":va(t,"scroll",!0);break;case"focus":case"blur":va(t,"focus",!0),va(t,"blur",!0),a.set("blur",null),a.set("focus",null);break;case"cancel":case"close":Ot(e)&&va(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Et.indexOf(e)&&c(e,t)}a.set(e,null)}}var $t,Gt,Ht,Wt=!1,i=[],zt=null,Kt=null,qt=null,Yt=new Map,Xt=new Map,Qt=[],Zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Jt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function ea(e,t,a,r,n){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|a,nativeEvent:n,container:r}}function ta(e,t){switch(e){case"focus":case"blur":zt=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":Yt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xt.delete(t.pointerId)}}function aa(e,t,a,r,n,i){return null===e||e.nativeEvent!==i?(e=ea(t,a,r,n,i),null!==t&&null!==(t=Za(t))&&Gt(t)):e.eventSystemFlags|=r,e}function ra(e){if(null===e.blockedOn){var t,a=ka(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null===a)return 1;null!==(t=Za(a))&&Gt(t),e.blockedOn=a}}function na(e,t,a){ra(e)&&a.delete(t)}function ia(){for(Wt=!1;0<i.length;){var e=i[0];if(null!==e.blockedOn){null!==(e=Za(e.blockedOn))&&$t(e);break}var t=ka(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:i.shift()}null!==zt&&ra(zt)&&(zt=null),null!==Kt&&ra(Kt)&&(Kt=null),null!==qt&&ra(qt)&&(qt=null),Yt.forEach(na),Xt.forEach(na)}function oa(e,t){e.blockedOn===t&&(e.blockedOn=null,Wt||(Wt=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ia)))}function sa(t){function e(e){return oa(e,t)}if(0<i.length){oa(i[0],t);for(var a=1;a<i.length;a++){var r=i[a];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==zt&&oa(zt,t),null!==Kt&&oa(Kt,t),null!==qt&&oa(qt,t),Yt.forEach(e),Xt.forEach(e),a=0;a<Qt.length;a++)(r=Qt[a]).blockedOn===t&&(r.blockedOn=null);for(;0<Qt.length&&null===(a=Qt[0]).blockedOn;)(function(e){var t=Qa(e.target);if(null!==t){var a=At(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=Pt(a)))return e.blockedOn=t,n.unstable_runWithPriority(e.priority,function(){Ht(a)})}else if(3===t&&a.stateNode.hydrate)return e.blockedOn=3===a.tag?a.stateNode.containerInfo:null}e.blockedOn=null})(a),null===a.blockedOn&&Qt.shift()}var la={},ua=new Map,ca=new Map,da=["abort","abort",_t,"animationEnd",kt,"animationIteration",bt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",St,"transitionEnd","waiting","waiting"];function ha(e,t){for(var a=0;a<e.length;a+=2){var r=e[a],n=e[a+1],i={phasedRegistrationNames:{bubbled:i="on"+(n[0].toUpperCase()+n.slice(1)),captured:i+"Capture"},dependencies:[r],eventPriority:t};ca.set(r,t),ua.set(r,i),la[n]=i}}ha("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ha("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ha(da,2);for(var pa="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),fa=0;fa<pa.length;fa++)ca.set(pa[fa],0);var ma=n.unstable_UserBlockingPriority,ga=n.unstable_runWithPriority,ya=!0;function c(e,t){va(t,e,!1)}function va(e,t,a){var r=ca.get(t);switch(void 0===r?2:r){case 0:r=function(e,t,a,r){fe||he();var n=_a,i=fe;fe=!0;try{de(n,e,t,a,r)}finally{(fe=i)||ge()}}.bind(null,t,1,e);break;case 1:r=function(e,t,a,r){ga(ma,_a.bind(null,e,t,a,r))}.bind(null,t,1,e);break;default:r=_a.bind(null,t,1,e)}a?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function _a(e,t,a,r){if(ya)if(0<i.length&&-1<Zt.indexOf(e))e=ea(null,e,t,a,r),i.push(e);else{var n=ka(e,t,a,r);if(null===n)ta(e,r);else if(-1<Zt.indexOf(e))e=ea(n,e,t,a,r),i.push(e);else if(!function(e,t,a,r,n){switch(t){case"focus":return zt=aa(zt,e,t,a,r,n),1;case"dragenter":return Kt=aa(Kt,e,t,a,r,n),1;case"mouseover":return qt=aa(qt,e,t,a,r,n),1;case"pointerover":var i=n.pointerId;return Yt.set(i,aa(Yt.get(i)||null,e,t,a,r,n)),1;case"gotpointercapture":return i=n.pointerId,Xt.set(i,aa(Xt.get(i)||null,e,t,a,r,n)),1}}(n,e,t,a,r)){ta(e,r),e=Ft(e,r,null,t);try{ye(jt,e)}finally{Bt(e)}}}}function ka(e,t,a,r){if(null!==(a=Qa(a=Lt(r)))){var n=At(a);if(null===n)a=null;else{var i=n.tag;if(13===i){if(null!==(a=Pt(n)))return a;a=null}else if(3===i){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;a=null}else n!==a&&(a=null)}}e=Ft(e,r,a,t);try{ye(jt,e)}finally{Bt(e)}return null}var ba={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sa=["Webkit","ms","Moz","O"];function Ea(e,t,a){return null==t||"boolean"==typeof t||""===t?"":a||"number"!=typeof t||0===t||ba.hasOwnProperty(e)&&ba[e]?(""+t).trim():t+"px"}function Ta(e,t){for(var a in e=e.style,t){var r,n;t.hasOwnProperty(a)&&(r=0===a.indexOf("--"),n=Ea(a,t[a],r),"float"===a&&(a="cssFloat"),r?e.setProperty(a,n):e[a]=n)}}Object.keys(ba).forEach(function(t){Sa.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ba[e]=ba[t]})});var xa=y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(e,t){if(t){if(xa[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(B(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(B(60));if(!("object"===U(t.dangerouslySetInnerHTML)&&"__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(null!=t.style&&"object"!==U(t.style))throw Error(B(62,""))}}function Pa(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=r;function wa(e,t){var a=xt(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=te[t];for(var r=0;r<t.length;r++)Vt(t[r],e,a)}function Ma(){}function Ia(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Ra(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Da(e,t){var a,r=Ra(e);for(e=0;r;){if(3===r.nodeType){if(a=e+r.textContent.length,e<=t&&t<=a)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ra(r)}}function Na(){for(var e=window,t=Ia();t instanceof e.HTMLIFrameElement;){try{var a="string"==typeof t.contentWindow.location.href}catch(e){a=!1}if(!a)break;t=Ia((e=t.contentWindow).document)}return t}function La(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Oa="$",Ua="/$",Ba="$?",Fa="$!",ja=null,Va=null;function $a(e,t){switch(e){case"button":case"input":case"select":case"textarea":return t.autoFocus}}function Ga(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"===U(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ha="function"==typeof setTimeout?setTimeout:void 0,Wa="function"==typeof clearTimeout?clearTimeout:void 0;function za(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ka(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if(a===Oa||a===Fa||a===Ba){if(0===t)return e;t--}else a===Ua&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),qa="__reactInternalInstance$"+da,Ya="__reactEventHandlers$"+da,Xa="__reactContainere$"+da;function Qa(e){var t=e[qa];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Xa]||a[qa]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=Ka(e);null!==e;){if(a=e[qa])return a;e=Ka(e)}return t}a=(e=a).parentNode}return null}function Za(e){return!(e=e[qa]||e[Xa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ja(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(B(33))}function er(e){return e[Ya]||null}function tr(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function ar(e,t){var a=e.stateNode;if(!a)return null;var r=H(a);if(!r)return null;switch(a=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":e=!(r=(r=!r.disabled)?r:!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e));break;default:e=!1}if(e)return null;if(a&&"function"!=typeof a)throw Error(B(231,t,void 0===a?"undefined":U(a)));return a}function rr(e,t,a){(t=ar(e,a.dispatchConfig.phasedRegistrationNames[t]))&&(a._dispatchListeners=Mt(a._dispatchListeners,t),a._dispatchInstances=Mt(a._dispatchInstances,e))}function nr(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,a=[];t;)a.push(t),t=tr(t);for(t=a.length;0<t--;)rr(a[t],"captured",e);for(t=0;t<a.length;t++)rr(a[t],"bubbled",e)}}function ir(e,t,a){e&&a&&a.dispatchConfig.registrationName&&(t=ar(e,a.dispatchConfig.registrationName))&&(a._dispatchListeners=Mt(a._dispatchListeners,t),a._dispatchInstances=Mt(a._dispatchInstances,e))}function or(e){e&&e.dispatchConfig.registrationName&&ir(e._targetInst,null,e)}function sr(e){It(e,nr)}var lr=null,ur=null,cr=null;function dr(){if(cr)return cr;for(var e=ur,t=e.length,a=("value"in lr?lr.value:lr.textContent),r=a.length,n=0;n<t&&e[n]===a[n];n++);for(var i=t-n,o=1;o<=i&&e[t-o]===a[r-o];o++);return cr=a.slice(n,1<o?1-o:void 0)}function hr(){return!0}function pr(){return!1}function s(e,t,a,r){for(var n in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=a,e=this.constructor.Interface)e.hasOwnProperty(n)&&((t=e[n])?this[n]=t(a):"target"===n?this.target=r:this[n]=a[n]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?hr:pr,this.isPropagationStopped=pr,this}function fr(e,t,a,r){var n;return this.eventPool.length?(n=this.eventPool.pop(),this.call(n,e,t,a,r),n):new this(e,t,a,r)}function mr(e){if(!(e instanceof this))throw Error(B(279));e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function gr(e){e.eventPool=[],e.getPooled=fr,e.release=mr}y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){this.isPersistent=hr},isPersistent:pr,destructor:function(){for(var e in this.constructor.Interface)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=pr,this._dispatchInstances=this._dispatchListeners=null}}),s.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},s.extend=function(e){function t(){}function a(){return r.apply(this,arguments)}var r=this,n=(t.prototype=r.prototype,new t);return y(n,a.prototype),((a.prototype=n).constructor=a).Interface=y({},r.Interface,e),a.extend=r.extend,gr(a),a},gr(s);var yr=s.extend({data:null}),vr=s.extend({data:null}),_r=[9,13,27,32],kr=re&&"CompositionEvent"in window,r=null,br=(re&&"documentMode"in document&&(r=document.documentMode),re&&"TextEvent"in window&&!r),Sr=re&&(!kr||r&&8<r&&r<=11),Er=String.fromCharCode(32),Tr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return 1;default:return}}function Pr(e){return"object"===(void 0===(e=e.detail)?"undefined":U(e))&&"data"in e?e.data:null}var Cr=!1;var da={eventTypes:Tr,extractEvents:function(e,t,a,r){var n;if(kr)e:{switch(e){case"compositionstart":var i=Tr.compositionStart;break e;case"compositionend":i=Tr.compositionEnd;break e;case"compositionupdate":i=Tr.compositionUpdate;break e}i=void 0}else Cr?Ar(e,a)&&(i=Tr.compositionEnd):"keydown"===e&&229===a.keyCode&&(i=Tr.compositionStart);return n=i?(Sr&&"ko"!==a.locale&&(Cr||i!==Tr.compositionStart?i===Tr.compositionEnd&&Cr&&(n=dr()):(ur="value"in(lr=r)?lr.value:lr.textContent,Cr=!0)),i=yr.getPooled(i,t,a,r),!n&&null===(n=Pr(a))||(i.data=n),sr(i),i):null,(e=(br?function(e,t){switch(e){case"compositionend":return Pr(t);case"keypress":return 32!==t.which?null:(xr=!0,Er);case"textInput":return(e=t.data)===Er&&xr?null:e;default:return null}}:function(e,t){if(Cr)return"compositionend"===e||!kr&&Ar(e,t)?(e=dr(),cr=ur=lr=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sr&&"ko"!==t.locale?null:t.data;default:return null}})(e,a))?((t=vr.getPooled(Tr.beforeInput,t,a,r)).data=e,sr(t)):t=null,null===n?t:null===t?n:[n,t]}},wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?wr[e.type]:"textarea"===t}var Ir={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Rr(e,t,a){return(e=s.getPooled(Ir.change,e,t,a)).type="change",le(a),sr(e),e}var Dr=null,Nr=null;function Lr(e){Nt(e)}function Or(e){if(qe(Ja(e)))return e}function Ur(e,t){if("change"===e)return t}var Br=!1;function Fr(){Dr&&(Dr.detachEvent("onpropertychange",jr),Nr=Dr=null)}function jr(e){if("value"===e.propertyName&&Or(Nr))if(e=Rr(Nr,e,Lt(e)),fe)Nt(e);else{fe=!0;try{ce(Lr,e)}finally{fe=!1,ge()}}}function Vr(e,t,a){"focus"===e?(Fr(),Nr=a,(Dr=t).attachEvent("onpropertychange",jr)):"blur"===e&&Fr()}function $r(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Or(Nr)}function Gr(e,t){if("click"===e)return Or(t)}function Hr(e,t){if("input"===e||"change"===e)return Or(t)}re&&(Br=Ot("input")&&(!document.documentMode||9<document.documentMode));var r={eventTypes:Ir,_isInputEventSupported:Br,extractEvents:function(e,t,a,r){var n,i,o=t?Ja(t):window,s=o.nodeName&&o.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===o.type?n=Ur:Mr(o)?Br?n=Hr:(n=$r,i=Vr):!(s=o.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(n=Gr),n=n&&n(e,t))return Rr(n,a,r);i&&i(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&et(o,"number",o.value)}},Wr=s.extend({view:null,detail:null}),zr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zr[e])&&!!t[e]}function qr(){return Kr}var Yr=0,Xr=0,Qr=!1,Zr=!1,Jr=Wr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){var t;return"movementX"in e?e.movementX:(t=Yr,Yr=e.screenX,Qr?"mousemove"===e.type?e.screenX-t:0:(Qr=!0,0))},movementY:function(e){var t;return"movementY"in e?e.movementY:(t=Xr,Xr=e.screenY,Zr?"mousemove"===e.type?e.screenY-t:0:(Zr=!0,0))}}),en=Jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),tn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},an={eventTypes:tn,extractEvents:function(e,t,a,r,n){var i,o,s,l,u="mouseover"===e||"pointerover"===e,c="mouseout"===e||"pointerout"===e;if(u&&0==(32&n)&&(a.relatedTarget||a.fromElement)||!c&&!u)return null;if(u=r.window===r?r:(u=r.ownerDocument)?u.defaultView||u.parentWindow:window,c?(c=t,null!==(t=(t=a.relatedTarget||a.toElement)?Qa(t):null)&&(t!==At(t)||5!==t.tag&&6!==t.tag)&&(t=null)):c=null,c===t)return null;if("mouseout"===e||"mouseover"===e?(i=Jr,o=tn.mouseLeave,s=tn.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(i=en,o=tn.pointerLeave,s=tn.pointerEnter,l="pointer"),e=null==c?u:Ja(c),u=null==t?u:Ja(t),(o=i.getPooled(o,c,a,r)).type=l+"leave",o.target=e,o.relatedTarget=u,(a=i.getPooled(s,t,a,r)).type=l+"enter",a.target=u,a.relatedTarget=e,l=t,(r=c)&&l)e:{for(s=l,c=0,e=i=r;e;e=tr(e))c++;for(e=0,t=s;t;t=tr(t))e++;for(;0<c-e;)i=tr(i),c--;for(;0<e-c;)s=tr(s),e--;for(;c--;){if(i===s||i===s.alternate)break e;i=tr(i),s=tr(s)}i=null}else i=null;for(s=i,i=[];r&&r!==s&&(null===(c=r.alternate)||c!==s);)i.push(r),r=tr(r);for(r=[];l&&l!==s&&(null===(c=l.alternate)||c!==s);)r.push(l),l=tr(l);for(l=0;l<i.length;l++)ir(i[l],"bubbled",o);for(l=r.length;0<l--;)ir(r[l],"captured",a);return 0==(64&n)?[o]:[o,a]}};var rn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},nn=Object.prototype.hasOwnProperty;function on(e,t){if(!rn(e,t)){if("object"!==(void 0===e?"undefined":U(e))||null===e||"object"!==(void 0===t?"undefined":U(t))||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++)if(!nn.call(t,a[r])||!rn(e[a[r]],t[a[r]]))return!1}return!0}var sn=re&&"documentMode"in document&&document.documentMode<=11,ln={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},un=null,cn=null,dn=null,hn=!1;function pn(e,t){var a=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return hn||null==un||un!==Ia(a)||(a="selectionStart"in(a=un)&&La(a)?{start:a.selectionStart,end:a.selectionEnd}:{anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},dn&&on(dn,a))?null:(dn=a,(e=s.getPooled(ln.select,cn,e,t)).type="select",e.target=un,sr(e),e)}var fn={eventTypes:ln,extractEvents:function(e,t,a,r,n,i){if(!(i=!(n=i||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{n=xt(n),i=te.onSelect;for(var o=0;o<i.length;o++)if(!n.has(i[o])){n=!1;break e}n=!0}i=!n}if(!i)switch(n=t?Ja(t):window,e){case"focus":!Mr(n)&&"true"!==n.contentEditable||(un=n,cn=t,dn=null);break;case"blur":dn=cn=un=null;break;case"mousedown":hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return hn=!1,pn(a,r);case"selectionchange":if(sn)break;case"keydown":case"keyup":return pn(a,r)}return null}},mn=s.extend({animationName:null,elapsedTime:null,pseudoElement:null}),gn=s.extend({clipboardData:function(e){return("clipboardData"in e?e:window).clipboardData}}),yn=Wr.extend({relatedTarget:null});function vn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=(e=10===e?13:e)||13===e?e:0}var _n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn=Wr.extend({key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=vn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qr,charCode:function(e){return"keypress"===e.type?vn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?vn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=Jr.extend({dataTransfer:null}),En=Wr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qr}),Tn=s.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xn=Jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),An={eventTypes:la,extractEvents:function(e,t,a,r){var n=ua.get(e);if(!n)return null;switch(e){case"keypress":if(0===vn(a))return null;case"keydown":case"keyup":e=bn;break;case"blur":case"focus":e=yn;break;case"click":if(2===a.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=En;break;case _t:case kt:case bt:e=mn;break;case St:e=Tn;break;case"scroll":e=Wr;break;case"wheel":e=xn;break;case"copy":case"cut":case"paste":e=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=en;break;default:e=s}return sr(t=e.getPooled(n,t,a,r)),t}},q=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));X();var H=er,W=Za,z=Ja,Pn=(ae({SimpleEventPlugin:An,EnterLeaveEventPlugin:an,ChangeEventPlugin:r,SelectEventPlugin:fn,BeforeInputEventPlugin:da}),[]),Cn=-1;function d(e){Cn<0||(e.current=Pn[Cn],Pn[Cn]=null,Cn--)}function h(e,t){Pn[++Cn]=e.current,e.current=t}var wn={},p={current:wn},f={current:!1},Mn=wn;function In(e,t){var a=e.type.contextTypes;if(!a)return wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n,i={};for(n in a)i[n]=t[n];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function m(e){return null!=(e=e.childContextTypes)}function Rn(){d(f),d(p)}function Dn(e,t,a){if(p.current!==wn)throw Error(B(168));h(p,t),h(f,a)}function Nn(e,t,a){var r,n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return a;for(r in n=n.getChildContext())if(!(r in e))throw Error(B(108,Ge(t)||"Unknown",r));return y({},a,{},n)}function Ln(e){e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,Mn=p.current,h(p,e),h(f,f.current)}function On(e,t,a){var r=e.stateNode;if(!r)throw Error(B(169));a?(e=Nn(e,t,Mn),r.__reactInternalMemoizedMergedChildContext=e,d(f),d(p),h(p,e)):d(f),h(f,a)}var Un=n.unstable_runWithPriority,Bn=n.unstable_scheduleCallback,Fn=n.unstable_cancelCallback,An=n.unstable_requestPaint,jn=n.unstable_now,Vn=n.unstable_getCurrentPriorityLevel,$n=n.unstable_ImmediatePriority,Gn=n.unstable_UserBlockingPriority,Hn=n.unstable_NormalPriority,Wn=n.unstable_LowPriority,zn=n.unstable_IdlePriority,Kn={},qn=n.unstable_shouldYield,Yn=void 0!==An?An:function(){},Xn=null,Qn=null,Zn=!1,Jn=jn(),g=Jn<1e4?jn:function(){return jn()-Jn};function ei(){switch(Vn()){case $n:return 99;case Gn:return 98;case Hn:return 97;case Wn:return 96;case zn:return 95;default:throw Error(B(332))}}function ti(e){switch(e){case 99:return $n;case 98:return Gn;case 97:return Hn;case 96:return Wn;case 95:return zn;default:throw Error(B(332))}}function ai(e,t){return e=ti(e),Un(e,t)}function ri(e,t,a){return e=ti(e),Bn(e,t,a)}function ni(e){return null===Xn?(Xn=[e],Qn=Bn($n,oi)):Xn.push(e),Kn}function ii(){var e;null!==Qn&&(e=Qn,Qn=null,Fn(e)),oi()}function oi(){if(!Zn&&null!==Xn){Zn=!0;var t=0;try{var a=Xn;ai(99,function(){for(;t<a.length;t++)for(var e=a[t];null!==(e=e(!0)););}),Xn=null}catch(e){throw null!==Xn&&(Xn=Xn.slice(t+1)),Bn($n,ii),e}finally{Zn=!1}}}function si(e,t,a){return 1073741821-(1+((1073741821-e+t/10)/(a/=10)|0))*a}function x(e,t){if(e&&e.defaultProps)for(var a in t=y({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}var li={current:null},ui=null,ci=null,di=null;function hi(){di=ci=ui=null}function pi(e){var t=li.current;d(li),e.type._context._currentValue=t}function fi(e,t){for(;null!==e;){var a=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==a&&a.childExpirationTime<t&&(a.childExpirationTime=t);else{if(!(null!==a&&a.childExpirationTime<t))break;a.childExpirationTime=t}e=e.return}}function mi(e,t){(di=ci=null)!==(e=(ui=e).dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Oo=!0),e.firstContext=null)}function v(e,t){if(di!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(di=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ci){if(null===ui)throw Error(B(308));ci=t,ui.dependencies={expirationTime:0,firstContext:t,responders:null}}else ci=ci.next=t;return e._currentValue}var gi=!1;function yi(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function _i(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ki(e,t){var a;null!==(e=e.updateQueue)&&(null===(a=(e=e.shared).pending)?t.next=t:(t.next=a.next,a.next=t),e.pending=t)}function bi(e,t){var a=e.alternate;null!==a&&vi(a,e),null===(a=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t).next=t:(t.next=a.next,a.next=t)}function Si(e,t,a,r){var n=e.updateQueue,i=(gi=!1,n.baseQueue);if(null!==(g=n.shared.pending)&&(null!==i&&(o=i.next,i.next=g.next,g.next=o),i=g,(n.shared.pending=null)!==(o=e.alternate))&&null!==(o=o.updateQueue)&&(o.baseQueue=g),null!==i){var o=i.next,s=n.baseState,l=0,u=null,c=null,d=null;if(null!==o)for(var h=o;;){if((g=h.expirationTime)<r){var p={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===d?(c=d=p,u=s):d=d.next=p,l<g&&(l=g)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),rl(g,h.suspenseConfig);e:{var f=e,m=h,g=t,p=a;switch(m.tag){case 1:if("function"==typeof(f=m.payload)){s=f.call(p,s,g);break e}s=f;break e;case 3:f.effectTag=-4097&f.effectTag|64;case 0:if(null==(g="function"==typeof(f=m.payload)?f.call(p,s,g):f))break e;s=y({},s,g);break e;case 2:gi=!0}}null!==h.callback&&(e.effectTag|=32,null===(g=n.effects)?n.effects=[h]:g.push(h))}if(null===(h=h.next)||h===o){if(null===(g=n.shared.pending))break;h=i.next=g.next,g.next=o,n.baseQueue=i=g,n.shared.pending=null}}null===d?u=s:d.next=c,n.baseState=u,n.baseQueue=d,nl(l),e.expirationTime=l,e.memoizedState=s}}function Ei(e,t,a){if(e=t.effects,(t.effects=null)!==e)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(null!==n){if(r.callback=null,r=n,n=a,"function"!=typeof r)throw Error(B(191,r));r.call(n)}}}var Ti=t.ReactCurrentBatchConfig,xi=(new b.Component).refs;function Ai(e,t,a,r){a=null==(a=a(r,t=e.memoizedState))?t:y({},t,a),e.memoizedState=a,0===e.expirationTime&&(e.updateQueue.baseState=a)}var Pi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&At(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternalFiber;var r=Ws(),n=Ti.suspense;(n=_i(r=zs(r,e,n),n)).payload=t,null!=a&&(n.callback=a),ki(e,n),Ks(e,r)},enqueueReplaceState:function(e,t,a){e=e._reactInternalFiber;var r=Ws(),n=Ti.suspense;(n=_i(r=zs(r,e,n),n)).tag=1,n.payload=t,null!=a&&(n.callback=a),ki(e,n),Ks(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var a=Ws(),r=Ti.suspense;(r=_i(a=zs(a,e,r),r)).tag=2,null!=t&&(r.callback=t),ki(e,r),Ks(e,a)}};function Ci(e,t,a,r,n,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&on(a,r)&&on(n,i))}function wi(e,t,a){var r=!1,n=wn,i=t.contextType;t=new t(a,i="object"===(void 0===i?"undefined":U(i))&&null!==i?v(i):(n=m(t)?Mn:p.current,(r=null!=(r=t.contextTypes))?In(e,n):wn)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Pi,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i)}function Mi(e,t,a,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Pi.enqueueReplaceState(t,t.state,null)}function Ii(e,t,a,r){var n=e.stateNode,i=(n.props=a,n.state=e.memoizedState,n.refs=xi,yi(e),t.contextType);"object"===(void 0===i?"undefined":U(i))&&null!==i?n.context=v(i):(i=m(t)?Mn:p.current,n.context=In(e,i)),Si(e,a,n,r),n.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Ai(e,0,i,a),n.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(t=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&Pi.enqueueReplaceState(n,n.state,null),Si(e,a,n,r),n.state=e.memoizedState),"function"==typeof n.componentDidMount&&(e.effectTag|=4)}var Ri=Array.isArray;function Di(e,t,a){if(null!==(e=a.ref)&&"function"!=typeof e&&"object"!==(void 0===e?"undefined":U(e))){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(B(309));var r=a.stateNode}var n;if(r)return n=""+e,null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===n?t.ref:((t=function(e){var t;(t=r.refs)===xi&&(t=r.refs={}),null===e?delete t[n]:t[n]=e})._stringRef=n,t);throw Error(B(147,e))}if("string"!=typeof e)throw Error(B(284));if(!a._owner)throw Error(B(290,e))}return e}function Ni(e,t){if("textarea"!==e.type)throw Error(B(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Li(P){function C(e,t){var a;P&&(null!==(a=e.lastEffect)?(a.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8)}function w(e,t){if(P)for(;null!==t;)C(e,t),t=t.sibling;return null}function M(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function I(e,t){return(e=kl(e,t)).index=0,e.sibling=null,e}function R(e,t,a){if(e.index=a,P){if(null!==(a=e.alternate))return(a=a.index)<t?(e.effectTag=2,t):a;e.effectTag=2}return t}function D(e){return P&&null===e.alternate&&(e.effectTag=2),e}function i(e,t,a,r){return null===t||6!==t.tag?(t=El(a,e.mode,r)).return=e:(t=I(t,a)).return=e,t}function o(e,t,a,r){return null!==t&&t.elementType===a.type?((r=I(t,a.props)).ref=Di(0,t,a),r.return=e):((r=bl(a.type,a.key,a.props,null,e.mode,r)).ref=Di(0,t,a),r.return=e),r}function s(e,t,a,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?(t=Tl(a,e.mode,r)).return=e:(t=I(t,a.children||[])).return=e,t}function l(e,t,a,r,n){return null===t||7!==t.tag?(t=Sl(a,e.mode,r,n)).return=e:(t=I(t,a)).return=e,t}function N(e,t,a){if("string"==typeof t||"number"==typeof t)return(t=El(""+t,e.mode,a)).return=e,t;if("object"===(void 0===t?"undefined":U(t))&&null!==t){switch(t.$$typeof){case Pe:return(a=bl(t.type,t.key,t.props,null,e.mode,a)).ref=Di(0,null,t),a.return=e,a;case Ce:return(t=Tl(t,e.mode,a)).return=e,t}if(Ri(t)||$e(t))return(t=Sl(t,e.mode,a,null)).return=e,t;Ni(e,t)}return null}function L(e,t,a,r){var n=null!==t?t.key:null;if("string"==typeof a||"number"==typeof a)return null!==n?null:i(e,t,""+a,r);if("object"===(void 0===a?"undefined":U(a))&&null!==a){switch(a.$$typeof){case Pe:return a.key===n?a.type===we?l(e,t,a.props.children,r,n):o(e,t,a,r):null;case Ce:return a.key===n?s(e,t,a,r):null}if(Ri(a)||$e(a))return null!==n?null:l(e,t,a,r,null);Ni(e,a)}return null}function O(e,t,a,r,n){if("string"==typeof r||"number"==typeof r)return i(t,e=e.get(a)||null,""+r,n);if("object"===(void 0===r?"undefined":U(r))&&null!==r){switch(r.$$typeof){case Pe:return e=e.get(null===r.key?a:r.key)||null,r.type===we?l(t,e,r.props.children,n,r.key):o(t,e,r,n);case Ce:return s(t,e=e.get(null===r.key?a:r.key)||null,r,n)}if(Ri(r)||$e(r))return l(t,e=e.get(a)||null,r,n,null);Ni(t,r)}return null}return function(e,t,a,r){var n="object"===(void 0===a?"undefined":U(a))&&null!==a&&a.type===we&&null===a.key,i="object"===(void 0===(a=n?a.props.children:a)?"undefined":U(a))&&null!==a;if(i)switch(a.$$typeof){case Pe:e:{for(i=a.key,n=t;null!==n;){if(n.key===i){switch(n.tag){case 7:if(a.type!==we)break;w(e,n.sibling),(t=I(n,a.props.children)).return=e,e=t;break e;default:if(n.elementType===a.type){w(e,n.sibling),(t=I(n,a.props)).ref=Di(0,n,a),t.return=e,e=t;break e}}w(e,n);break}C(e,n),n=n.sibling}e=a.type===we?((t=Sl(a.props.children,e.mode,r,a.key)).return=e,t):((r=bl(a.type,a.key,a.props,null,e.mode,r)).ref=Di(0,t,a),r.return=e,r)}return D(e);case Ce:e:{for(n=a.key;null!==t;){if(t.key===n){if(4===t.tag&&t.stateNode.containerInfo===a.containerInfo&&t.stateNode.implementation===a.implementation){w(e,t.sibling),(t=I(t,a.children||[])).return=e,e=t;break e}w(e,t);break}C(e,t),t=t.sibling}(t=Tl(a,e.mode,r)).return=e,e=t}return D(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,(t=null!==t&&6===t.tag?(w(e,t.sibling),I(t,a)):(w(e,t),El(a,e.mode,r))).return=e,D(e=t);if(Ri(a)){for(var o=e,s=t,l=a,u=r,c=null,d=null,h=s,p=s=0,f=null;null!==h&&p<l.length;p++){h.index>p?(f=h,h=null):f=h.sibling;var m=L(o,h,l[p],u);if(null===m){null===h&&(h=f);break}P&&h&&null===m.alternate&&C(o,h),s=R(m,s,p),null===d?c=m:d.sibling=m,d=m,h=f}if(p===l.length)w(o,h);else if(null===h)for(;p<l.length;p++)null!==(h=N(o,l[p],u))&&(s=R(h,s,p),null===d?c=h:d.sibling=h,d=h);else{for(h=M(o,h);p<l.length;p++)null!==(f=O(h,o,p,l[p],u))&&(P&&null!==f.alternate&&h.delete(null===f.key?p:f.key),s=R(f,s,p),null===d?c=f:d.sibling=f,d=f);P&&h.forEach(function(e){return C(o,e)})}return c}if($e(a)){var g=e,y=t,v=a,_=r,k=$e(v);if("function"!=typeof k)throw Error(B(150));if(null==(v=k.call(v)))throw Error(B(151));for(var b=k=null,S=y,E=y=0,T=null,x=v.next();null!==S&&!x.done;E++,x=v.next()){S.index>E?(T=S,S=null):T=S.sibling;var A=L(g,S,x.value,_);if(null===A){null===S&&(S=T);break}P&&S&&null===A.alternate&&C(g,S),y=R(A,y,E),null===b?k=A:b.sibling=A,b=A,S=T}if(x.done)w(g,S);else if(null===S)for(;!x.done;E++,x=v.next())null!==(x=N(g,x.value,_))&&(y=R(x,y,E),null===b?k=x:b.sibling=x,b=x);else{for(S=M(g,S);!x.done;E++,x=v.next())null!==(x=O(S,g,E,x.value,_))&&(P&&null!==x.alternate&&S.delete(null===x.key?E:x.key),y=R(x,y,E),null===b?k=x:b.sibling=x,b=x);P&&S.forEach(function(e){return C(g,e)})}return k}if(i&&Ni(e,a),void 0===a&&!n)switch(e.tag){case 1:case 0:throw e=e.type,Error(B(152,e.displayName||e.name||"Component"))}return w(e,t)}}var Oi=Li(!0),Ui=Li(!1),Bi={},Fi={current:Bi},ji={current:Bi},Vi={current:Bi};function $i(e){if(e===Bi)throw Error(B(174));return e}function Gi(e,t){switch(h(Vi,t),h(ji,e),h(Fi,Bi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ut(null,"");break;default:t=ut(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}d(Fi),h(Fi,t)}function Hi(){d(Fi),d(ji),d(Vi)}function Wi(e){$i(Vi.current);var t=$i(Fi.current),a=ut(t,e.type);t!==a&&(h(ji,e),h(Fi,a))}function zi(e){ji.current===e&&(d(Fi),d(ji))}var S={current:0};function Ki(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||a.data===Ba||a.data===Fa))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qi(e,t){return{responder:e,props:t}}var Yi=t.ReactCurrentDispatcher,l=t.ReactCurrentBatchConfig,Xi=0,E=null,T=null,A=null,Qi=!1;function u(){throw Error(B(321))}function Zi(e,t){if(null!==t){for(var a=0;a<t.length&&a<e.length;a++)if(!rn(e[a],t[a]))return;return 1}}function Ji(e,t,a,r,n,i){if(Xi=i,(E=t).memoizedState=null,t.updateQueue=null,t.expirationTime=0,Yi.current=null===e||null===e.memoizedState?Eo:To,e=a(r,n),t.expirationTime===Xi){i=0;do{if(t.expirationTime=0,!(i<25))throw Error(B(301))}while(i+=1,A=T=null,t.updateQueue=null,Yi.current=xo,e=a(r,n),t.expirationTime===Xi)}if(Yi.current=So,t=null!==T&&null!==T.next,Xi=0,A=T=E=null,Qi=!1,t)throw Error(B(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===A?E.memoizedState=A=e:A=A.next=e,A}function to(){e=null===T?null!==(e=E.alternate)?e.memoizedState:null:T.next;var e,t=null===A?E.memoizedState:A.next;if(null!==t)A=t,T=e;else{if(null===e)throw Error(B(310));e={memoizedState:(T=e).memoizedState,baseState:T.baseState,baseQueue:T.baseQueue,queue:T.queue,next:null},null===A?E.memoizedState=A=e:A=A.next=e}return A}function ao(e,t){return"function"==typeof t?t(e):t}function ro(e){var t=to(),a=t.queue;if(null===a)throw Error(B(311));a.lastRenderedReducer=e;var r,n=(o=T).baseQueue,i=a.pending;if(null!==i&&(null!==n&&(r=n.next,n.next=i.next,i.next=r),o.baseQueue=n=i,a.pending=null),null!==n){var n=n.next,o=o.baseState,s=r=i=null,l=n;do{var u,c=l.expirationTime}while(c<Xi?(u={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null},null===s?(r=s=u,i=o):s=s.next=u,c>E.expirationTime&&nl(E.expirationTime=c)):(null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),rl(c,l.suspenseConfig),o=l.eagerReducer===e?l.eagerState:e(o,l.action)),null!==(l=l.next)&&l!==n);null===s?i=o:s.next=r,rn(o,t.memoizedState)||(Oo=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=s,a.lastRenderedState=o}return[t.memoizedState,a.dispatch]}function no(e){var t=to(),a=t.queue;if(null===a)throw Error(B(311));a.lastRenderedReducer=e;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(null!==n){a.pending=null;for(var o=n=n.next;i=e(i,o.action),(o=o.next)!==n;);rn(i,t.memoizedState)||(Oo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function io(e){var t=eo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ao,lastRenderedState:e}).dispatch=bo.bind(null,E,e),[t.memoizedState,e]}function oo(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},null===(t=E.updateQueue)?(E.updateQueue=t={lastEffect:null}).lastEffect=e.next=e:null===(a=t.lastEffect)?t.lastEffect=e.next=e:(r=a.next,(a.next=e).next=r,t.lastEffect=e),e}function so(){return to().memoizedState}function lo(e,t,a,r){var n=eo();E.effectTag|=e,n.memoizedState=oo(1|t,a,void 0,void 0===r?null:r)}function uo(e,t,a,r){var n=to(),i=(r=void 0===r?null:r,void 0);if(null!==T){var o=T.memoizedState,i=o.destroy;if(null!==r&&Zi(r,o.deps))return void oo(t,a,i,r)}E.effectTag|=e,n.memoizedState=oo(1|t,a,i,r)}function co(e,t){return lo(516,4,e,t)}function ho(e,t){return uo(516,4,e,t)}function po(e,t){return uo(4,2,e,t)}function fo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function mo(e,t,a){return a=null!=a?a.concat([e]):null,uo(4,2,fo.bind(null,t,e),a)}function go(){}function yo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function vo(e,t){var a=to(),r=(t=void 0===t?null:t,a.memoizedState);return null!==r&&null!==t&&Zi(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function _o(e,t){var a=to(),r=(t=void 0===t?null:t,a.memoizedState);return null!==r&&null!==t&&Zi(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function ko(t,a,r){var e=ei();ai(e<98?98:e,function(){t(!0)}),ai(97<e?97:e,function(){var e=l.suspense;l.suspense=void 0===a?null:a;try{t(!1),r()}finally{l.suspense=e}})}function bo(e,t,a){var r,n={expirationTime:r=zs(Ws(),e,n=Ti.suspense),suspenseConfig:n,action:a,eagerReducer:null,eagerState:null,next:null},i=t.pending;if(null===i?n.next=n:(n.next=i.next,i.next=n),t.pending=n,i=e.alternate,e===E||null!==i&&i===E)Qi=!0,n.expirationTime=Xi,E.expirationTime=Xi;else{if(0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,a);if(n.eagerReducer=i,n.eagerState=s,rn(s,o))return}catch(e){}Ks(e,r)}}var So={readContext:v,useCallback:u,useContext:u,useEffect:u,useImperativeHandle:u,useLayoutEffect:u,useMemo:u,useReducer:u,useRef:u,useState:u,useDebugValue:u,useResponder:u,useDeferredValue:u,useTransition:u},Eo={readContext:v,useCallback:yo,useContext:v,useEffect:co,useImperativeHandle:function(e,t,a){return a=null!=a?a.concat([e]):null,lo(4,2,fo.bind(null,t,e),a)},useLayoutEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var a=eo();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=eo();return t=void 0!==a?a(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=bo.bind(null,E,e),[r.memoizedState,e]},useRef:function(e){return eo().memoizedState=e={current:e}},useState:io,useDebugValue:go,useResponder:qi,useDeferredValue:function(t,a){var e=io(t),r=e[0],n=e[1];return co(function(){var e=l.suspense;l.suspense=void 0===a?null:a;try{n(t)}finally{l.suspense=e}},[t,a]),r},useTransition:function(e){var t=(a=io(!1))[0],a=a[1];return[yo(ko.bind(null,a,e),[a,e]),t]}},To={readContext:v,useCallback:vo,useContext:v,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:po,useMemo:_o,useReducer:ro,useRef:so,useState:function(){return ro(ao)},useDebugValue:go,useResponder:qi,useDeferredValue:function(t,a){var e=ro(ao),r=e[0],n=e[1];return ho(function(){var e=l.suspense;l.suspense=void 0===a?null:a;try{n(t)}finally{l.suspense=e}},[t,a]),r},useTransition:function(e){var t=(a=ro(ao))[0],a=a[1];return[vo(ko.bind(null,a,e),[a,e]),t]}},xo={readContext:v,useCallback:vo,useContext:v,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:po,useMemo:_o,useReducer:no,useRef:so,useState:function(){return no(ao)},useDebugValue:go,useResponder:qi,useDeferredValue:function(t,a){var e=no(ao),r=e[0],n=e[1];return ho(function(){var e=l.suspense;l.suspense=void 0===a?null:a;try{n(t)}finally{l.suspense=e}},[t,a]),r},useTransition:function(e){var t=(a=no(ao))[0],a=a[1];return[vo(ko.bind(null,a,e),[a,e]),t]}},Ao=null,Po=null,Co=!1;function wo(e,t){var a=vl(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=t,a.return=e,a.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=a,e.lastEffect=a):e.firstEffect=e.lastEffect=a}function Mo(e,t){switch(e.tag){case 5:var a=e.type;return null!==(t=1!==t.nodeType||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,1);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,1);default:return}}function Io(e){if(Co){var t=Po;if(t){var a=t;if(!Mo(e,t)){if(!(t=za(a.nextSibling))||!Mo(e,t))return e.effectTag=-1025&e.effectTag|2,Co=!1,void(Ao=e);wo(Ao,a)}Ao=e,Po=za(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Co=!1,Ao=e}}function Ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ao=e}function Do(e){if(e===Ao){if(!Co)return Ro(e),Co=!0,0;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ga(t,e.memoizedProps))for(t=Po;t;)wo(e,t),t=za(t.nextSibling);if(Ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var a=e.data;if(a===Ua){if(0===t){Po=za(e.nextSibling);break e}t--}else a!==Oa&&a!==Fa&&a!==Ba||t++}e=e.nextSibling}Po=null}}else Po=Ao?za(e.stateNode.nextSibling):null;return 1}}function No(){Po=Ao=null,Co=!1}var Lo=t.ReactCurrentOwner,Oo=!1;function _(e,t,a,r){t.child=null===e?Ui(t,null,a,r):Oi(t,e.child,a,r)}function Uo(e,t,a,r,n){a=a.render;var i=t.ref;return mi(t,n),r=Ji(e,t,a,r,i,n),null===e||Oo?(t.effectTag|=1,_(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=n&&(e.expirationTime=0),Xo(e,t,n))}function Bo(e,t,a,r,n,i){var o;return null===e?"function"!=typeof(o=a.type)||_l(o)||void 0!==o.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=bl(a.type,null,r,null,t.mode,i)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,n,i)):(o=e.child,n<i&&(n=o.memoizedProps,(a=null!==(a=a.compare)?a:on)(n,r))&&e.ref===t.ref?Xo(e,t,i):(t.effectTag|=1,(e=kl(o,r)).ref=t.ref,(e.return=t).child=e))}function Fo(e,t,a,r,n,i){return null!==e&&on(e.memoizedProps,r)&&e.ref===t.ref&&(Oo=!1,n<i)?(t.expirationTime=e.expirationTime,Xo(e,t,i)):Vo(e,t,a,r,i)}function jo(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.effectTag|=128)}function Vo(e,t,a,r,n){var i=In(t,m(a)?Mn:p.current);return mi(t,n),a=Ji(e,t,a,r,i,n),null===e||Oo?(t.effectTag|=1,_(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=n&&(e.expirationTime=0),Xo(e,t,n))}function $o(e,t,a,r,n){var i,o,s,l,u,c,d,h;return m(a)?(i=!0,Ln(t)):i=!1,mi(t,n),r=null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),wi(t,a,r),Ii(t,a,r,n),!0):null===e?(o=t.stateNode,s=t.memoizedProps,o.props=s,l=o.context,u="object"===(void 0===(u=a.contextType)?"undefined":U(u))&&null!==u?v(u):In(t,u=m(a)?Mn:p.current),(d="function"==typeof(c=a.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||s===r&&l===u||Mi(0,o,r,u),gi=!1,h=t.memoizedState,o.state=h,Si(t,r,o,n),l=t.memoizedState,s!==r||h!==l||f.current||gi?("function"==typeof c&&(Ai(t,0,c,r),l=t.memoizedState),(s=gi||Ci(t,a,s,r,h,l,u))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),!1)):(o=t.stateNode,vi(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:x(t.type,s),l=o.context,u="object"===(void 0===(u=a.contextType)?"undefined":U(u))&&null!==u?v(u):In(t,u=m(a)?Mn:p.current),(d="function"==typeof(c=a.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||s===r&&l===u||Mi(0,o,r,u),gi=!1,l=t.memoizedState,o.state=l,Si(t,r,o,n),h=t.memoizedState,s!==r||l!==h||f.current||gi?("function"==typeof c&&(Ai(t,0,c,r),h=t.memoizedState),(c=gi||Ci(t,a,s,r,l,h,u))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),!1)),Go(e,t,a,r,i,n)}function Go(e,t,a,r,n,i){jo(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return n&&On(t,a,!1),Xo(e,t,i);r=t.stateNode,Lo.current=t;var s=o&&"function"!=typeof a.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Oi(t,e.child,null,i),t.child=Oi(t,null,s,i)):_(e,t,s,i),t.memoizedState=r.state,n&&On(t,a,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?Dn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dn(0,t.context,!1),Gi(e,t.containerInfo)}var Wo={dehydrated:null,retryTime:0};function zo(e,t,a){var r=t.mode,n=t.pendingProps,i=S.current,o=!1;if(0!=(64&t.effectTag)||0!=(2&i)&&(null===e||null!==e.memoizedState)?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(i|=1),h(S,1&i),null===e){if(void 0!==n.fallback&&Io(t),o){if(o=n.fallback,0==(2&((n=Sl(null,r,0,null)).return=t).mode))for(e=(null!==t.memoizedState?t.child:t).child,n.child=e;null!==e;)e.return=n,e=e.sibling;return(a=Sl(o,r,a,null)).return=t,n.sibling=a,t.memoizedState=Wo,t.child=n,a}return r=n.children,t.memoizedState=null,t.child=Ui(t,null,r,a)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,o){if(n=n.fallback,0==(2&((a=kl(e,e.pendingProps)).return=t).mode)&&(o=(null!==t.memoizedState?t.child:t).child)!==e.child)for(a.child=o;null!==o;)o.return=a,o=o.sibling;return(r=kl(r,n)).return=t,a.sibling=r,a.childExpirationTime=0,t.memoizedState=Wo,t.child=a,r}return a=Oi(t,e.child,n.children,a),t.memoizedState=null,t.child=a}if(e=e.child,o){if(o=n.fallback,(n=Sl(null,r,0,null)).return=t,null!==(n.child=e)&&(e.return=n),0==(2&t.mode))for(e=(null!==t.memoizedState?t.child:t).child,n.child=e;null!==e;)e.return=n,e=e.sibling;return(a=Sl(o,r,a,null)).return=t,(n.sibling=a).effectTag|=2,n.childExpirationTime=0,t.memoizedState=Wo,t.child=n,a}return t.memoizedState=null,t.child=Oi(t,e,n.children,a)}function Ko(e,t){e.expirationTime<t&&(e.expirationTime=t);var a=e.alternate;null!==a&&a.expirationTime<t&&(a.expirationTime=t),fi(e.return,t)}function qo(e,t,a,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailExpiration:0,tailMode:n,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=a,o.tailExpiration=0,o.tailMode=n,o.lastEffect=i)}function Yo(e,t,a){var r=t.pendingProps,n=r.revealOrder,i=r.tail;if(_(e,t,r.children,a),0!=(2&(r=S.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,a);else if(19===e.tag)Ko(e,a);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(h(S,r),0==(2&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;null!==a;)null!==(e=a.alternate)&&null===Ki(e)&&(n=a),a=a.sibling;null===(a=n)?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),qo(t,!1,n,a,i,t.lastEffect);break;case"backwards":for(n=t.child,t.child=a=null;null!==n;){if(null!==(e=n.alternate)&&null===Ki(e)){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}qo(t,!0,a,null,i,t.lastEffect);break;case"together":qo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xo(e,t,a){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&nl(r),t.childExpirationTime<a)return null;if(null!==e&&t.child!==e.child)throw Error(B(153));if(null!==t.child){for(a=kl(e=t.child,e.pendingProps),(t.child=a).return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=kl(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Qo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":for(var a=e.tail,r=null;null!==a;)null!==a.alternate&&(r=a),a=a.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zo(e,t){return{value:e,source:t,stack:He(t)}}var Jo=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a=(a.child.return=a).child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},es=function(e,t,a,r,n){var i=e.memoizedProps;if(i!==r){var o,s,l=t.stateNode;switch($i(Fi.current),e=null,a){case"input":i=Ye(l,i),r=Ye(l,r),e=[];break;case"option":i=tt(l,i),r=tt(l,r),e=[];break;case"select":i=y({},i,{value:void 0}),r=y({},r,{value:void 0}),e=[];break;case"textarea":i=rt(l,i),r=rt(l,r),e=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(l.onclick=Ma)}for(o in Aa(a,r),a=null,i)if(!r.hasOwnProperty(o)&&i.hasOwnProperty(o)&&null!=i[o])if("style"===o)for(s in l=i[o])l.hasOwnProperty(s)&&((a=a||{})[s]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ee.hasOwnProperty(o)?e=e||[]:(e=e||[]).push(o,null));for(o in r){var u=r[o],l=null!=i?i[o]:void 0;if(r.hasOwnProperty(o)&&u!==l&&(null!=u||null!=l))if("style"===o)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||((a=a||{})[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&((a=a||{})[s]=u[s])}else a||(e=e||[]).push(o,a),a=u;else"dangerouslySetInnerHTML"===o?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(o,u)):"children"===o?l===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(o,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(ee.hasOwnProperty(o)?(null!=u&&wa(n,o),e||l===u||(e=[])):(e=e||[]).push(o,u))}a&&(e=e||[]).push("style",a),n=e,(t.updateQueue=n)&&(t.effectTag|=4)}},ts=function(e,t,a,r){a!==r&&(t.effectTag|=4)},as="function"==typeof WeakSet?WeakSet:Set;function rs(e,t){var a=t.source;null===t.stack&&null!==a&&He(a),null!==a&&Ge(a.type),t=t.value,null!==e&&1===e.tag&&Ge(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function ns(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){hl(t,e)}else e.current=null}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a,r=t=t.next;do{}while((r.tag&e)===e&&(a=r.destroy,(r.destroy=void 0)!==a)&&a(),(r=r.next)!==t)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a,r=t=t.next;do{}while((r.tag&e)===e&&(a=r.create,r.destroy=a()),(r=r.next)!==t)}}function ss(e,r,t){switch("function"==typeof gl&&gl(r),r.tag){case 0:case 11:case 14:case 15:case 22:var n;null!==(e=r.updateQueue)&&null!==(e=e.lastEffect)&&(n=e.next,ai(97<t?97:t,function(){var e=n;do{var t=e.destroy;if(void 0!==t){var a=r;try{t()}catch(e){hl(a,e)}}}while((e=e.next)!==n)}));break;case 1:if(ns(r),"function"==typeof(t=r.stateNode).componentWillUnmount){var a=r;var i=t;try{i.props=a.memoizedProps,i.state=a.memoizedState,i.componentWillUnmount()}catch(e){hl(a,e)}}break;case 5:ns(r);break;case 4:cs(e,r,t)}}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:{for(var t=e.return;null!==t;){if(ls(t)){var a=t;break e}t=t.return}throw Error(B(160))}switch(t=a.stateNode,a.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(B(161))}16&a.effectTag&&(pt(t,""),a.effectTag&=-17);e:t:for(a=e;;){for(;null===a.sibling;){if(null===a.return||ls(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(2&a.effectTag)continue t;if(null===a.child||4===a.tag)continue t;a=(a.child.return=a).child}if(!(2&a.effectTag)){a=a.stateNode;break e}}(r?function e(t,a,r){var n=t.tag,i=5===n||6===n;if(i)t=i?t.stateNode:t.stateNode.instance,a?(8===r.nodeType?r.parentNode:r).insertBefore(t,a):(8===r.nodeType?(a=r.parentNode,a.insertBefore(t,r)):(a=r,a.appendChild(t)),r=r._reactRootContainer,null==r&&null===a.onclick&&(a.onclick=Ma));else if(4!==n&&(t=t.child,null!==t))for(e(t,a,r),t=t.sibling;null!==t;)e(t,a,r),t=t.sibling}:function e(t,a,r){var n=t.tag,i=5===n||6===n;if(i)t=i?t.stateNode:t.stateNode.instance,a?r.insertBefore(t,a):r.appendChild(t);else if(4!==n&&(t=t.child,null!==t))for(e(t,a,r),t=t.sibling;null!==t;)e(t,a,r),t=t.sibling})(e,a,t)}function cs(e,t,a){for(var r,n,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(B(160));switch(r=o.stateNode,o.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=a,c=l;;)if(ss(s,c,u),null!==c.child&&4!==c.tag)c=(c.child.return=c).child;else{if(c===l)break;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(s=r,l=i.stateNode,(8===s.nodeType?s.parentNode:s).removeChild(l)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,n=!0,i=(i.child.return=i).child;continue}}else if(ss(e,i,a),null!==i.child){i=(i.child.return=i).child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ds(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void is(3,t);case 1:return;case 5:var a=t.stateNode;if(null!=a){var r=t.memoizedProps,n=null!==e?e.memoizedProps:r,i=(e=t.type,t.updateQueue);if((t.updateQueue=null)!==i){for(a[Ya]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Qe(a,r),Pa(e,n),t=Pa(e,r),n=0;n<i.length;n+=2){var o=i[n],s=i[n+1];"style"===o?Ta(a,s):"dangerouslySetInnerHTML"===o?ht(a,s):"children"===o?pt(a,s):xe(a,o,s,t)}switch(e){case"input":Ze(a,r);break;case"textarea":it(a,r);break;case"select":t=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?at(a,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(a,!!r.multiple,r.defaultValue,!0):at(a,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(B(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,sa(t.containerInfo)));case 12:return;case 13:if(null===(a=t).memoizedState?r=!1:(r=!0,a=t.child,Ds=g()),null!==a)e:for(e=a;;){if(5===e.tag)i=e.stateNode,r?"function"==typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none":(i=e.stateNode,n=null!=(n=e.memoizedProps.style)&&n.hasOwnProperty("display")?n.display:null,i.style.display=Ea("display",n));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(i=e.child.sibling).return=e,e=i;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===a)break;for(;null===e.sibling;){if(null===e.return||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void hs(t);case 19:return void hs(t);case 17:return}throw Error(B(163))}function hs(a){var r,e=a.updateQueue;null!==e&&((a.updateQueue=null)===(r=a.stateNode)&&(r=a.stateNode=new as),e.forEach(function(e){var t=function(e,t){var a=e.stateNode;null!==a&&a.delete(t),(t=0)===t&&(t=zs(t=Ws(),e,null)),null!==(e=qs(e,t))&&L(e)}.bind(null,a,e);r.has(e)||(r.add(e),e.then(t,t))}))}var ps="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,a){(a=_i(a,null)).tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){Ls||(Ls=!0,Os=r),rs(e,t)},a}function ms(t,a,e){(e=_i(e,null)).tag=3;var r,n=t.type.getDerivedStateFromError,i=("function"==typeof n&&(r=a.value,e.payload=function(){return rs(t,a),n(r)}),t.stateNode);return null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){"function"!=typeof n&&(null===Us?Us=new Set([this]):Us.add(this),rs(t,a));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})}),e}var gs=Math.ceil,ys=t.ReactCurrentDispatcher,vs=t.ReactCurrentOwner,P=0,_s=8,C=16,ks=32,bs=0,Ss=1,Es=2,Ts=3,xs=4,As=5,w=P,M=null,I=null,R=0,D=bs,Ps=null,Cs=1073741823,ws=1073741823,Ms=null,Is=0,Rs=!1,Ds=0,Ns=500,N=null,Ls=!1,Os=null,Us=null,Bs=!1,Fs=null,js=90,Vs=null,$s=0,Gs=null,Hs=0;function Ws(){return(w&(C|ks))!==P?1073741821-(g()/10|0):0!==Hs?Hs:Hs=1073741821-(g()/10|0)}function zs(e,t,a){if(0==(2&(t=t.mode)))return 1073741823;var r=ei();if(0==(4&t))return 99===r?1073741823:1073741822;if((w&C)!==P)return R;if(null!==a)e=si(e,0|a.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=si(e,150,100);break;case 97:case 96:e=si(e,5e3,250);break;case 95:e=2;break;default:throw Error(B(326))}return null!==M&&e===R&&--e,e}function Ks(e,t){if(50<$s)throw $s=0,Gs=null,Error(B(185));var a;null!==(e=qs(e,t))&&(a=ei(),1073741823===t?(w&_s)!==P&&(w&(C|ks))===P?Qs(e):(L(e),w===P&&ii()):L(e),(4&w)===P||98!==a&&99!==a||(null===Vs?Vs=new Map([[e,t]]):(void 0===(a=Vs.get(e))||t<a)&&Vs.set(e,t)))}function qs(e,t){e.expirationTime<t&&(e.expirationTime=t);var a=e.alternate,r=(null!==a&&a.expirationTime<t&&(a.expirationTime=t),e.return),n=null;if(null===r&&3===e.tag)n=e.stateNode;else for(;null!==r;){if(a=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==a&&a.childExpirationTime<t&&(a.childExpirationTime=t),null===r.return&&3===r.tag){n=r.stateNode;break}r=r.return}return null!==n&&(M===n&&(nl(t),D===xs)&&Pl(n,R),Cl(n,t)),n}function Ys(e){var t,a=e.lastExpiredTime;return 0===a&&Al(e,a=e.firstPendingTime)?(t=e.lastPingedTime,(e=(e=e.nextKnownPendingLevel)<t?t:e)<=2&&a!==e?0:e):a}function L(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ni(Qs.bind(null,e));else{var t=Ys(e),a=e.callbackNode;if(0===t)null!==a&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Ws(),r=1073741823===t?99:1===t||2===t?95:(r=10*(1073741821-t)-10*(1073741821-r))<=0?99:r<=250?98:r<=5250?97:95;if(null!==a){var n=e.callbackPriority;if(e.callbackExpirationTime===t&&r<=n)return;a!==Kn&&Fn(a)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?ni(Qs.bind(null,e)):ri(r,Xs.bind(null,e),{timeout:10*(1073741821-t)-g()}),e.callbackNode=t}}}function Xs(t,e){if(Hs=0,e)wl(t,e=Ws()),L(t);else{var a=Ys(t);if(0!==a){if(e=t.callbackNode,(w&(C|ks))!==P)throw Error(B(327));if(ul(),t===M&&a===R||el(t,a),null!==I){for(var r=w,n=(w|=C,al());;)try{for(;null!==I&&!qn();)I=il(I);break}catch(e){tl(t,e)}if(hi(),w=r,ys.current=n,D===Ss)throw e=Ps,el(t,a),Pl(t,a),L(t),e;if(null===I)switch(n=t.finishedWork=t.current.alternate,t.finishedExpirationTime=a,r=D,M=null,r){case bs:case Ss:throw Error(B(345));case Es:wl(t,2<a?2:a);break;case Ts:if(Pl(t,a),a===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=sl(n)),1073741823===Cs&&10<(n=Ds+Ns-g())){if(Rs){var i=t.lastPingedTime;if(0===i||a<=i){t.lastPingedTime=a,el(t,a);break}}if(0!==(i=Ys(t))&&i!==a)break;if(0!==r&&r!==a){t.lastPingedTime=r;break}t.timeoutHandle=Ha(ll.bind(null,t),n)}else ll(t);break;case xs:Pl(t,a),a===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=sl(n)),Rs&&(0===(n=t.lastPingedTime)||a<=n)?(t.lastPingedTime=a,el(t,a)):0!==(n=Ys(t))&&n!==a||(0!==r&&r!==a?t.lastPingedTime=r:(1073741823!==ws?r=10*(1073741821-ws)-g():1073741823===Cs?r=0:(r=10*(1073741821-Cs)-5e3,(a=10*(1073741821-a)-(n=g()))<(r=((r=(r=n-r)<0?0:r)<120?120:r<480?480:r<1080?1080:r<1920?1920:r<3e3?3e3:r<4320?4320:1960*gs(r/1960))-r)&&(r=a)),10<r?t.timeoutHandle=Ha(ll.bind(null,t),r):ll(t)));break;case As:if(1073741823!==Cs&&null!==Ms){var i=Cs,o=Ms;if(10<(r=(r=0|o.busyMinDurationMs)<=0||(n=0|o.busyDelayMs,(i=g()-(10*(1073741821-i)-(0|o.timeoutMs||5e3)))<=n)?0:n+r-i)){Pl(t,a),t.timeoutHandle=Ha(ll.bind(null,t),r);break}}ll(t);break;default:throw Error(B(329))}if(L(t),t.callbackNode===e)return Xs.bind(null,t)}}}return null}function Qs(t){var e=0!==(e=t.lastExpiredTime)?e:1073741823;if((w&(C|ks))!==P)throw Error(B(327));if(ul(),t===M&&e===R||el(t,e),null!==I){for(var a=w,r=(w|=C,al());;)try{for(;null!==I;)I=il(I);break}catch(e){tl(t,e)}if(hi(),w=a,ys.current=r,D===Ss)throw a=Ps,el(t,e),Pl(t,e),L(t),a;if(null!==I)throw Error(B(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,M=null,ll(t),L(t)}return null}function Zs(e,t){var a=w;w|=1;try{return e(t)}finally{(w=a)===P&&ii()}}function Js(e,t){var a=w;w=-2&w|_s;try{e(t)}finally{(w=a)===P&&ii()}}function el(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var a=e.timeoutHandle;if(-1!==a&&(e.timeoutHandle=-1,Wa(a)),null!==I)for(a=I.return;null!==a;){var r=a;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Rn();break;case 3:Hi(),d(f),d(p);break;case 5:zi(r);break;case 4:Hi();break;case 13:case 19:d(S);break;case 10:pi(r)}a=a.return}I=kl((M=e).current,null),R=t,D=bs,ws=Cs=1073741823,Ms=Ps=null,Is=0,Rs=!1}function tl(e,t){do{try{if(hi(),Yi.current=So,Qi)for(var a=E.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}if(Xi=0,A=T=E=null,Qi=!1,null===I||null===I.return)return D=Ss,Ps=t,I=null;e:{var n=e,i=I.return,o=t;if(t=R,(v=I).effectTag|=2048,(v.firstEffect=v.lastEffect=null)!==o&&"object"===(void 0===o?"undefined":U(o))&&"function"==typeof o.then){var s,l,u,c,d=o,h=(0==(2&v.mode)&&((s=v.alternate)?(v.updateQueue=s.updateQueue,v.memoizedState=s.memoizedState,v.expirationTime=s.expirationTime):(v.updateQueue=null,v.memoizedState=null)),0!=(1&S.current)),p=i;do{if(c=(c=13===p.tag)?null!==(l=p.memoizedState)?null!==l.dehydrated:void 0!==(u=p.memoizedProps).fallback&&(!0!==u.unstable_avoidThisFallback||!h):c){var f,m,g=p.updateQueue;if(null===g?((f=new Set).add(d),p.updateQueue=f):g.add(d),0==(2&p.mode)){p.effectTag|=64,v.effectTag&=-2981,1===v.tag&&(null===v.alternate?v.tag=17:((m=_i(1073741823,null)).tag=2,ki(v,m))),v.expirationTime=1073741823;break e}var y,o=void 0,v=t,_=n.pingCache;null===_?(_=n.pingCache=new ps,o=new Set,_.set(d,o)):void 0===(o=_.get(d))&&(o=new Set,_.set(d,o)),o.has(v)||(o.add(v),y=pl.bind(null,n,d,v),d.then(y,y)),p.effectTag|=4096,p.expirationTime=t;break e}}while(null!==(p=p.return));o=Error((Ge(v.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+He(v))}D!==As&&(D=Es),o=Zo(o,v),p=i;do{switch(p.tag){case 3:d=o;p.effectTag|=4096,p.expirationTime=t,bi(p,fs(p,d,t));break e;case 1:d=o;var k=p.type,b=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof k.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Us||!Us.has(b)))){p.effectTag|=4096,p.expirationTime=t,bi(p,ms(p,d,t));break e}}}while(null!==(p=p.return))}I=ol(I)}catch(e){t=e;continue}break}while(1)}function al(){var e=ys.current;return ys.current=So,null===e?So:e}function rl(e,t){e<Cs&&2<e&&(Cs=e),null!==t&&e<ws&&2<e&&(ws=e,Ms=t)}function nl(e){Is<e&&(Is=e)}function il(e){var t=fl(e.alternate,e,R);return e.memoizedProps=e.pendingProps,null===t&&(t=ol(e)),vs.current=null,t}function ol(e){I=e;do{var t=I.alternate;if(e=I.return,0==(2048&I.effectTag)){if(t=function(e,t,a){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return m(t.type)&&Rn(),null;case 3:return Hi(),d(f),d(p),(a=t.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||!Do(t)||(t.effectTag|=4),null;case 5:zi(t),a=$i(Vi.current);var n=t.type;if(null!==e&&null!=t.stateNode)es(e,t,n,r,a),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(B(166));return null}if(e=$i(Fi.current),Do(t)){var i,o,r=t.stateNode,n=t.type,s=t.memoizedProps;switch(r[qa]=t,r[Ya]=s,n){case"iframe":case"object":case"embed":c("load",r);break;case"video":case"audio":for(e=0;e<Et.length;e++)c(Et[e],r);break;case"source":c("error",r);break;case"img":case"image":case"link":c("error",r),c("load",r);break;case"form":c("reset",r),c("submit",r);break;case"details":c("toggle",r);break;case"input":Xe(r,s),c("invalid",r),wa(a,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},c("invalid",r),wa(a,"onChange");break;case"textarea":nt(r,s),c("invalid",r),wa(a,"onChange")}for(i in Aa(n,s),e=null,s)s.hasOwnProperty(i)&&(o=s[i],"children"===i?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):ee.hasOwnProperty(i)&&null!=o&&wa(a,i));switch(n){case"input":Ke(r),Je(r,s,!0);break;case"textarea":Ke(r),ot(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Ma)}a=e,null!==(t.updateQueue=a)&&(t.effectTag|=4)}else{switch(i=9===a.nodeType?a:a.ownerDocument,(e=e===Ca?lt(n):e)===Ca?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[qa]=t,e[Ya]=r,Jo(e,t),t.stateNode=e,i=Pa(n,r),n){case"iframe":case"object":case"embed":c("load",e),o=r;break;case"video":case"audio":for(o=0;o<Et.length;o++)c(Et[o],e);o=r;break;case"source":c("error",e),o=r;break;case"img":case"image":case"link":c("error",e),c("load",e),o=r;break;case"form":c("reset",e),c("submit",e),o=r;break;case"details":c("toggle",e),o=r;break;case"input":Xe(e,r),o=Ye(e,r),c("invalid",e),wa(a,"onChange");break;case"option":o=tt(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=y({},r,{value:void 0}),c("invalid",e),wa(a,"onChange");break;case"textarea":nt(e,r),o=rt(e,r),c("invalid",e),wa(a,"onChange");break;default:o=r}Aa(n,o);var l,u=o;for(s in u)u.hasOwnProperty(s)&&(l=u[s],"style"===s?Ta(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ht(e,l):"children"===s?"string"==typeof l?"textarea"===n&&""===l||pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(ee.hasOwnProperty(s)?null!=l&&wa(a,s):null!=l&&xe(e,s,l,i)));switch(n){case"input":Ke(e),Je(e,r,!1);break;case"textarea":Ke(e),ot(e);break;case"option":null!=r.value&&e.setAttribute("value",""+We(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?at(e,!!r.multiple,a,!1):null!=r.defaultValue&&at(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Ma)}$a(n,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)ts(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(B(166));a=$i(Vi.current),$i(Fi.current),Do(t)?(a=t.stateNode,r=t.memoizedProps,a[qa]=t,a.nodeValue!==r&&(t.effectTag|=4)):((a=(9===a.nodeType?a:a.ownerDocument).createTextNode(r))[qa]=t).stateNode=a}return null;case 13:return(d(S),r=t.memoizedState,0!=(64&t.effectTag))?(t.expirationTime=a,t):(a=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Do(t):(r=null!==(n=e.memoizedState),a||null===n||null!==(n=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=n).nextEffect=s:(t.firstEffect=t.lastEffect=n).nextEffect=null,n.effectTag=8)),a&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&S.current)?D===bs&&(D=Ts):(D!==bs&&D!==Ts||(D=xs),0!==Is&&null!==M&&(Pl(M,R),Cl(M,Is)))),(a||r)&&(t.effectTag|=4),null);case 4:return Hi(),null;case 10:return pi(t),null;case 17:return m(t.type)&&Rn(),null;case 19:if(d(S),null===(r=t.memoizedState))return null;if(n=0!=(64&t.effectTag),null===(s=r.rendering)){if(n)Qo(r,!1);else if(D!==bs||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Ki(s))){for(t.effectTag|=64,Qo(r,!1),null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=a,(n=r).effectTag&=2,n.nextEffect=null,n.firstEffect=null,(n.lastEffect=null)===(e=n.alternate)?(n.childExpirationTime=0,n.expirationTime=s,n.child=null,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null):(n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,s=e.dependencies,n.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return h(S,1&S.current|2),t.child}s=s.sibling}}else{if(!n)if(null!==(e=Ki(s))){if(t.effectTag|=64,n=!0,null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),Qo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*g()-r.renderingStartTime>r.tailExpiration&&1<a&&(t.effectTag|=64,Qo(r,!(n=!0)),t.expirationTime=t.childExpirationTime=a-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(a=r.last)?a.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=g()+500),a=r.tail,r.rendering=a,r.tail=a.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=g(),a.sibling=null,t=S.current,h(S,n?1&t|2:1&t),a):null}throw Error(B(156,t.tag))}(t,I,R),1===R||1!==I.childExpirationTime){for(var a=0,r=I.child;null!==r;){var n=r.expirationTime,i=r.childExpirationTime;(a=a<n?n:a)<i&&(a=i),r=r.sibling}I.childExpirationTime=a}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=I.firstEffect),null!==I.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=I.firstEffect),e.lastEffect=I.lastEffect),1<I.effectTag)&&(null!==e.lastEffect?e.lastEffect.nextEffect=I:e.firstEffect=I,e.lastEffect=I)}else{if(null!==(t=function(e){switch(e.tag){case 1:m(e.type)&&Rn();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Hi(),d(f),d(p),0!=(64&(t=e.effectTag)))throw Error(B(285));return e.effectTag=-4097&t|64,e;case 5:return zi(e),null;case 13:return d(S),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return d(S),null;case 4:return Hi(),null;case 10:return pi(e),null;default:return null}}(I)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=I.sibling))return t}while(null!==(I=e));return D===bs&&(D=As),null}function sl(e){var t=e.expirationTime;return(e=e.childExpirationTime)<t?t:e}function ll(e){var t=ei();return ai(99,function(e,t){for(;ul(),null!==Fs;);if((w&(C|ks))!==P)throw Error(B(327));var a=e.finishedWork,r=e.finishedExpirationTime;if(null!==a){if(e.finishedWork=null,e.finishedExpirationTime=0,a===e.current)throw Error(B(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var n=sl(a);if(e.firstPendingTime=n,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===M&&(I=M=null,R=0),null!==(n=1<a.effectTag?null!==a.lastEffect?(a.lastEffect.nextEffect=a).firstEffect:a:a.firstEffect)){var i=w,o=(w|=ks,vs.current=null,ja=ya,Na());if(La(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{var l=(s=(s=o.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(l&&0!==l.rangeCount){s=l.anchorNode;var u=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{s.nodeType,c.nodeType}catch(e){s=null;break e}var d,h=0,p=-1,f=-1,m=0,g=0,y=o,v=null;t:for(;;){for(;y!==s||0!==u&&3!==y.nodeType||(p=h+u),y!==c||0!==l&&3!==y.nodeType||(f=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(d=y.firstChild);)v=y,y=d;for(;;){if(y===o)break t;if(v===s&&++m===u&&(p=h),v===c&&++g===l&&(f=h),null!==(d=y.nextSibling))break;v=(y=v).parentNode}y=d}s=-1===p||-1===f?null:{start:p,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;ya=!(Va={activeElementDetached:null,focusedElem:o,selectionRange:s}),N=n;do{try{!function(){for(;null!==N;){var e=N.effectTag;0!=(256&e)&&function(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:var a,r;return 256&t.effectTag&&null!==e&&(a=e.memoizedProps,r=e.memoizedState,t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?a:x(t.type,a),r),e.__reactInternalSnapshotBeforeUpdate=t);case 3:case 5:case 6:case 4:case 17:return}throw Error(B(163))}(N.alternate,N),0==(512&e)||Bs||(Bs=!0,ri(97,function(){return ul(),null})),N=N.nextEffect}}()}catch(e){if(null===N)throw Error(B(330));hl(N,e),N=N.nextEffect}}while(null!==N);N=n;do{try{for(o=e,s=t;null!==N;){var _,k,b=N.effectTag;switch(16&b&&pt(N.stateNode,""),128&b&&null!==(_=N.alternate)&&null!==(k=_.ref)&&("function"==typeof k?k(null):k.current=null),1038&b){case 2:us(N),N.effectTag&=-3;break;case 6:us(N),N.effectTag&=-3,ds(N.alternate,N);break;case 1024:N.effectTag&=-1025;break;case 1028:N.effectTag&=-1025,ds(N.alternate,N);break;case 4:ds(N.alternate,N);break;case 8:cs(o,u=N,s),function e(t){var a=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,(t.stateNode=null)!==a&&e(a)}(u)}N=N.nextEffect}}catch(e){if(null===N)throw Error(B(330));hl(N,e),N=N.nextEffect}}while(null!==N);if(k=Va,_=Na(),b=k.focusedElem,s=k.selectionRange,_!==b&&b&&b.ownerDocument&&function e(t,a){return!(!t||!a)&&(t===a||(!t||3!==t.nodeType)&&(a&&3===a.nodeType?e(t,a.parentNode):"contains"in t?t.contains(a):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(a))))}(b.ownerDocument.documentElement,b)){null!==s&&La(b)&&(_=s.start,void 0===(k=s.end)&&(k=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(k,b.value.length)):(k=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,o=Math.min(s.start,u),s=void 0===s.end?o:Math.min(s.end,u),!k.extend&&s<o&&(u=s,s=o,o=u),u=Da(b,o),c=Da(b,s),u)&&c&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==c.node||k.focusOffset!==c.offset)&&((_=_.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),s<o?(k.addRange(_),k.extend(c.node,c.offset)):(_.setEnd(c.node,c.offset),k.addRange(_)))),_=[];for(k=b;k=k.parentNode;)1===k.nodeType&&_.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<_.length;b++)(k=_[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}ya=!!ja,Va=ja=null,e.current=a,N=n;do{try{for(b=e;null!==N;){var S,E,T=N.effectTag;36&T&&function(e,t,a){switch(a.tag){case 0:case 11:case 15:case 22:return os(3,a);case 1:var r;return e=a.stateNode,4&a.effectTag&&(null===t?e.componentDidMount():(r=a.elementType===a.type?t.memoizedProps:x(a.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),null!==(t=a.updateQueue)&&Ei(0,t,e);case 3:if(null!==(t=a.updateQueue)){if((e=null)!==a.child)switch(a.child.tag){case 5:case 1:e=a.child.stateNode}Ei(0,t,e)}return;case 5:return e=a.stateNode,null===t&&4&a.effectTag&&$a(a.type,a.memoizedProps)&&e.focus();case 6:case 4:case 12:return;case 13:return null===a.memoizedState&&null!==(a=a.alternate)&&null!==(a=a.memoizedState)&&null!==(a=a.dehydrated)&&sa(a);case 19:case 17:case 20:case 21:return}throw Error(B(163))}(b,N.alternate,N),128&T&&(_=void 0,null!==(S=N.ref))&&(E=N.stateNode,N.tag,_=E,"function"==typeof S?S(_):S.current=_),N=N.nextEffect}}catch(e){if(null===N)throw Error(B(330));hl(N,e),N=N.nextEffect}}while(null!==N);N=null,Yn(),w=i}else e.current=a;if(Bs)Bs=!1,Fs=e,js=t;else for(N=n;null!==N;)t=N.nextEffect,N.nextEffect=null,N=t;if(0===(t=e.firstPendingTime)&&(Us=null),1073741823===t?e===Gs?$s++:($s=0,Gs=e):$s=0,"function"==typeof ml&&ml(a.stateNode,r),L(e),Ls)throw Ls=!1,e=Os,Os=null,e;(w&_s)===P&&ii()}return null}.bind(null,e,t)),null}function ul(){var e;if(90!==js)return e=97<js?97:js,js=90,ai(e,cl)}function cl(){if(null===Fs)return!1;var t=Fs;if(Fs=null,(w&(C|ks))!==P)throw Error(B(331));var e=w;for(w|=ks,t=t.current.firstEffect;null!==t;){try{var a=t;if(0!=(512&a.effectTag))switch(a.tag){case 0:case 11:case 15:case 22:is(5,a),os(5,a)}}catch(e){if(null===t)throw Error(B(330));hl(t,e)}a=t.nextEffect,t.nextEffect=null,t=a}return w=e,ii(),!0}function dl(e,t,a){ki(e,t=fs(e,t=Zo(a,t),1073741823)),null!==(e=qs(e,1073741823))&&L(e)}function hl(e,t){if(3===e.tag)dl(e,e,t);else for(var a=e.return;null!==a;){if(3===a.tag){dl(a,e,t);break}if(1===a.tag){var r=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Us||!Us.has(r))){ki(a,e=ms(a,e=Zo(t,e),1073741823)),null!==(a=qs(a,1073741823))&&L(a);break}}a=a.return}}function pl(e,t,a){var r=e.pingCache;null!==r&&r.delete(t),M===e&&R===a?D===xs||D===Ts&&1073741823===Cs&&g()-Ds<Ns?el(e,R):Rs=!0:!Al(e,a)||0!==(t=e.lastPingedTime)&&t<a||(e.lastPingedTime=a,L(e))}var fl=function(e,t,a){var r,n,i=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||f.current)Oo=!0;else{if(i<a){switch(Oo=!1,t.tag){case 3:Ho(t),No();break;case 5:if(Wi(t),4&t.mode&&1!==a&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:m(t.type)&&Ln(t);break;case 4:Gi(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,o=t.type._context,h(li,o._currentValue),o._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&a<=i?zo(e,t,a):(h(S,1&S.current),null!==(t=Xo(e,t,a))?t.sibling:null);h(S,1&S.current);break;case 19:if(i=t.childExpirationTime>=a,0!=(64&e.effectTag)){if(i)return Yo(e,t,a);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),h(S,S.current),!i)return null}return Xo(e,t,a)}Oo=!1}}else Oo=!1;switch(t.expirationTime=0,t.tag){case 2:i=t.type;return null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=In(t,p.current),mi(t,a),o=Ji(null,t,i,e,o,a),t.effectTag|=1,t="object"===(void 0===o?"undefined":U(o))&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,m(i)?(s=!0,Ln(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,yi(t),"function"==typeof(c=i.getDerivedStateFromProps)&&Ai(t,0,c,e),o.updater=Pi,Ii((t.stateNode=o)._reactInternalFiber=t,i,e,a),Go(null,t,i,!0,s,a)):(t.tag=0,_(null,t,o,a),t.child);case 16:e:{if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,-1===(r=o)._status&&(r._status=0,n=(n=r._ctor)(),(r._result=n).then(function(e){0===r._status&&(e=e.default,r._status=1,r._result=e)},function(e){0===r._status&&(r._status=2,r._result=e)})),1!==o._status)throw o._result;switch(o=o._result,t.type=o,s=t.tag=function(e){if("function"==typeof e)return _l(e)?1:0;if(null!=e){if((e=e.$$typeof)===Le)return 11;if(e===Be)return 14}return 2}(o),e=x(o,e),s){case 0:t=Vo(null,t,o,e,a);break e;case 1:t=$o(null,t,o,e,a);break e;case 11:t=Uo(null,t,o,e,a);break e;case 14:t=Bo(null,t,o,x(o.type,e),i,a);break e}throw Error(B(306,o,""))}return t;case 0:return i=t.type,o=t.pendingProps,Vo(e,t,i,o=t.elementType===i?o:x(i,o),a);case 1:return i=t.type,o=t.pendingProps,$o(e,t,i,o=t.elementType===i?o:x(i,o),a);case 3:if(Ho(t),i=t.updateQueue,null===e||null===i)throw Error(B(282));if(i=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,vi(e,t),Si(t,i,null,a),(i=t.memoizedState.element)===o)No(),t=Xo(e,t,a);else{if((o=t.stateNode.hydrate)&&(Po=za(t.stateNode.containerInfo.firstChild),Ao=t,o=Co=!0),o)for(a=Ui(t,null,i,a),t.child=a;a;)a.effectTag=-3&a.effectTag|1024,a=a.sibling;else _(e,t,i,a),No();t=t.child}return t;case 5:return Wi(t),null===e&&Io(t),i=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,c=o.children,Ga(i,o)?c=null:null!==s&&Ga(i,s)&&(t.effectTag|=16),jo(e,t),t=4&t.mode&&1!==a&&o.hidden?(t.expirationTime=t.childExpirationTime=1,null):(_(e,t,c,a),t.child);case 6:return null===e&&Io(t),null;case 13:return zo(e,t,a);case 4:return Gi(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Oi(t,null,i,a):_(e,t,i,a),t.child;case 11:return i=t.type,o=t.pendingProps,Uo(e,t,i,o=t.elementType===i?o:x(i,o),a);case 7:return _(e,t,t.pendingProps,a),t.child;case 8:case 12:return _(e,t,t.pendingProps.children,a),t.child;case 10:e:{i=t.type._context,o=t.pendingProps,c=t.memoizedProps;var s=o.value,l=t.type._context;if(h(li,l._currentValue),l._currentValue=s,null!==c)if(l=c.value,0===(s=rn(l,s)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,s):1073741823))){if(c.children===o.children&&!f.current){t=Xo(e,t,a);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u)for(var c=l.child,d=u.firstContext;null!==d;){if(d.context===i&&0!=(d.observedBits&s)){1===l.tag&&((d=_i(a,null)).tag=2,ki(l,d)),l.expirationTime<a&&(l.expirationTime=a),null!==(d=l.alternate)&&d.expirationTime<a&&(d.expirationTime=a),fi(l.return,a),u.expirationTime<a&&(u.expirationTime=a);break}d=d.next}else c=10===l.tag&&l.type===t.type?null:l.child;if(null!==c)c.return=l;else for(c=l;null!==c;){if(c===t){c=null;break}if(null!==(l=c.sibling)){l.return=c.return,c=l;break}c=c.return}l=c}_(e,t,o.children,a),t=t.child}return t;case 9:return o=t.type,i=(s=t.pendingProps).children,mi(t,a),i=i(o=v(o,s.unstable_observedBits)),t.effectTag|=1,_(e,t,i,a),t.child;case 14:return s=x(o=t.type,t.pendingProps),s=x(o.type,s),Bo(e,t,o,s,i,a);case 15:return Fo(e,t,t.type,t.pendingProps,i,a);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:x(i,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,m(i)?(e=!0,Ln(t)):e=!1,mi(t,a),wi(t,i,o),Ii(t,i,o,a),Go(null,t,i,!0,e,a);case 19:return Yo(e,t,a)}throw Error(B(156,t.tag))},ml=null,gl=null;function yl(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function vl(e,t,a,r){return new yl(e,t,a,r)}function _l(e){return(e=e.prototype)&&e.isReactComponent}function kl(e,t){var a=e.alternate;return null===a?((a=vl(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,(a.alternate=e).alternate=a):(a.pendingProps=t,a.effectTag=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function bl(e,t,a,r,n,i){var o=2;if("function"==typeof(r=e))_l(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case we:return Sl(a.children,n,i,t);case Ne:o=8,n|=7;break;case Me:o=8,n|=1;break;case Ie:return(e=vl(12,a,t,8|n)).elementType=Ie,e.type=Ie,e.expirationTime=i,e;case Oe:return(e=vl(13,a,t,n)).type=Oe,e.elementType=Oe,e.expirationTime=i,e;case Ue:return(e=vl(19,a,t,n)).elementType=Ue,e.expirationTime=i,e;default:if("object"===(void 0===e?"undefined":U(e))&&null!==e)switch(e.$$typeof){case Re:o=10;break e;case De:o=9;break e;case Le:o=11;break e;case Be:o=14;break e;case Fe:o=16,r=null;break e;case je:o=22;break e}throw Error(B(130,null==e?e:void 0===e?"undefined":U(e),""))}return(t=vl(o,a,t,n)).elementType=e,t.type=r,t.expirationTime=i,t}function Sl(e,t,a,r){return(e=vl(7,e,r,t)).expirationTime=a,e}function El(e,t,a){return(e=vl(6,e,null,t)).expirationTime=a,e}function Tl(e,t,a){return(t=vl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xl(e,t,a){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Al(e,t){var a=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==a&&t<=a&&e<=t}function Pl(e,t){var a=e.firstSuspendedTime,r=e.lastSuspendedTime;a<t&&(e.firstSuspendedTime=t),(t<r||0===a)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Cl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var a=e.firstSuspendedTime;0!==a&&(a<=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel)&&(e.nextKnownPendingLevel=t)}function wl(e,t){var a=e.lastExpiredTime;(0===a||t<a)&&(e.lastExpiredTime=t)}function Ml(e,t,a,r){var n=t.current,i=Ws(),o=Ti.suspense,i=zs(i,n,o);e:if(a){t:{if(At(a=a._reactInternalFiber)!==a||1!==a.tag)throw Error(B(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(m(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}}while(null!==(s=s.return));throw Error(B(171))}if(1===a.tag){var l=a.type;if(m(l)){a=Nn(a,l,s);break e}}a=s}else a=wn;null===t.context?t.context=a:t.pendingContext=a,(t=_i(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ki(n,t),Ks(n,i)}function Il(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Rl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Dl(e,t){Rl(e,t),(e=e.alternate)&&Rl(e,t)}function Nl(e,t,a){var r,n,i=new xl(e,t,a=null!=a&&!0===a.hydrate),o=vl(3,null,null,2===t?7:1===t?3:0);(i.current=o).stateNode=i,yi(o),e[Xa]=i.current,a&&0!==t&&(r=9===e.nodeType?e:e.ownerDocument,n=xt(r),Zt.forEach(function(e){Vt(e,r,n)}),Jt.forEach(function(e){Vt(e,r,n)})),this._internalRoot=i}function Ll(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType||8===e.nodeType&&" react-mount-point-unstable "===e.nodeValue)}function Ol(e,t,a,r,n){var i,o,s,l=a._reactRootContainer;return l?(s=l._internalRoot,"function"==typeof n&&(i=n,n=function(){var e=Il(s);i.call(e)}),Ml(t,s,e,n)):(s=(a._reactRootContainer=function(e,t){if(!(t=t?t:!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))))for(var a;a=e.lastChild;)e.removeChild(a);return new Nl(e,0,t?{hydrate:!0}:void 0)}(a,r))._internalRoot,"function"==typeof n&&(o=n,n=function(){var e=Il(s);o.call(e)}),Js(function(){Ml(t,s,e,n)})),Il(s)}function Ul(e,t){if(Ll(t))return function(e,t,a,r){return{$$typeof:Ce,key:null==(r=3<arguments.length&&void 0!==r?r:null)?null:""+r,children:e,containerInfo:t,implementation:a}}(e,t,null,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null);throw Error(B(200))}Nl.prototype.render=function(e){Ml(e,this._internalRoot,null,null)},Nl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ml(null,e,null,function(){t[Xa]=null})},$t=function(e){var t;13===e.tag&&(Ks(e,t=si(Ws(),150,100)),Dl(e,t))},Gt=function(e){13===e.tag&&(Ks(e,3),Dl(e,3))},Ht=function(e){var t;13===e.tag&&(Ks(e,t=zs(Ws(),e,null)),Dl(e,t))},ne=function(e,t,a){switch(t){case"input":if(Ze(e,a),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var n=er(r);if(!n)throw Error(B(90));qe(r),Ze(r,n)}}}break;case"textarea":it(e,a);break;case"select":null!=(t=a.value)&&at(e,!!a.multiple,t,!1)}},ce=Zs,de=function(e,t,a,r,n){var i=w;w|=4;try{return ai(98,e.bind(null,t,a,r,n))}finally{(w=i)===P&&ii()}};var pe=function(e,t){var a=w;w|=2;try{return e(t)}finally{(w=a)===P&&ii()}},an={Events:[Za,Ja,er,ae,J,sr,function(e){It(e,or)},le,ue,_a,Nt,ul,{current:!(he=function(){var e;(w&(1|C|ks))===P&&(null!==Vs&&(e=Vs,Vs=null,e.forEach(function(e,t){wl(t,e),L(t)}),ii()),ul())})}]},Bl=(r={findFiberByHostInstance:Qa,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,r=y({},r,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=wt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Bl?Bl(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null});if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{var jl=Fl.inject(r);ml=function(e){try{Fl.onCommitFiberRoot(jl,e,void 0,64==(64&e.current.effectTag))}catch(e){}},gl=function(e){try{Fl.onCommitFiberUnmount(jl,e)}catch(e){}}}catch(e){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=an,e.createPortal=Ul,e.findDOMNode=function(e){if(null==e)return null;if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(B(188));throw Error(B(268,Object.keys(e)))}e=null===(e=wt(t))?null:e.stateNode}return e},e.flushSync=function(e,t){if((w&(C|ks))!==P)throw Error(B(187));var a=w;w|=1;try{return ai(99,e.bind(null,t))}finally{w=a,ii()}},e.hydrate=function(e,t,a){if(Ll(t))return Ol(null,e,t,!0,a);throw Error(B(200))},e.render=function(e,t,a){if(Ll(t))return Ol(null,e,t,!1,a);throw Error(B(200))},e.unmountComponentAtNode=function(e){if(Ll(e))return!!e._reactRootContainer&&(Js(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0);throw Error(B(40))},e.unstable_batchedUpdates=Zs,e.unstable_createPortal=function(e,t){return Ul(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!Ll(a))throw Error(B(200));if(null==e||void 0===e._reactInternalFiber)throw Error(B(38));return Ol(e,t,a,!1,r)},e.version="16.14.0"},function(e,t,a){"use strict";e.exports=a(533)},function(O,s,U){"use strict";var i,l,u,a,r,t,e,n,o,c,d,h,p,f,m,g,y,v,_,k,B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function b(e,t){var a=e.length;for(e.push(t);;){var r=a-1>>>1,n=e[r];if(!(void 0!==n&&0<T(n,t)))break;e[r]=t,e[a]=n,a=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var a=e.pop();if(a!==t){e[0]=a;for(var r=0,n=e.length;r<n;){var i=2*(r+1)-1,o=e[i],s=1+i,l=e[s];if(void 0!==o&&T(o,a)<0)r=void 0!==l&&T(l,o)<0?(e[r]=l,e[s]=a,s):(e[r]=o,e[i]=a,i);else{if(!(void 0!==l&&T(l,a)<0))break;e[r]=l,e[s]=a,r=s}}}}}function T(e,t){var a=e.sortIndex-t.sortIndex;return 0!=a?a:e.id-t.id}"undefined"==typeof window||"function"!=typeof MessageChannel?(r=a=null,t=function t(){if(null!==a)try{var e=s.unstable_now();a(!0,e),a=null}catch(e){throw setTimeout(t,0),e}},e=Date.now(),s.unstable_now=function(){return Date.now()-e},i=function(e){null!==a?setTimeout(i,0,e):(a=e,setTimeout(t,0))},l=function(e,t){r=setTimeout(e,t)},u=function(){clearTimeout(r)},v=function(){return!1},_=s.unstable_forceFrameRate=function(){}):(n=window.performance,o=window.Date,c=window.setTimeout,d=window.clearTimeout,"undefined"!=typeof console&&(L=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof L)&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"object"===(void 0===n?"undefined":B(n))&&"function"==typeof n.now?s.unstable_now=function(){return n.now()}:(h=o.now(),s.unstable_now=function(){return o.now()-h}),p=!1,f=null,m=-1,g=5,y=0,v=function(){return s.unstable_now()>=y},_=function(){},s.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):g=0<e?Math.floor(1e3/e):5},L=new MessageChannel,k=L.port2,L.port1.onmessage=function(){if(null!==f){var e=s.unstable_now();y=e+g;try{f(!0,e)?k.postMessage(null):(p=!1,f=null)}catch(e){throw k.postMessage(null),e}}else p=!1},i=function(e){f=e,p||(p=!0,k.postMessage(null))},l=function(e,t){m=c(function(){e(s.unstable_now())},t)},u=function(){d(m),m=-1});var x=[],A=[],F=1,P=null,C=3,w=!1,M=!1,I=!1;function R(e){for(var t=S(A);null!==t;){if(null===t.callback)E(A);else{if(!(t.startTime<=e))break;E(A),t.sortIndex=t.expirationTime,b(x,t)}t=S(A)}}function D(e){var t;I=!1,R(e),M||(null!==S(x)?(M=!0,i(N)):null!==(t=S(A))&&l(D,t.startTime-e))}function N(e,t){M=!1,I&&(I=!1,u()),w=!0;var a=C;try{for(R(t),P=S(x);null!==P&&(!(P.expirationTime>t)||e&&!v());){var r,n=P.callback;null!==n?(P.callback=null,C=P.priorityLevel,r=n(P.expirationTime<=t),t=s.unstable_now(),"function"==typeof r?P.callback=r:P===S(x)&&E(x),R(t)):E(x),P=S(x)}var i,o=null!==P||(null!==(i=S(A))&&l(D,i.startTime-t),!1);return o}finally{P=null,C=a,w=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var L=_;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(e){e.callback=null},s.unstable_continueExecution=function(){M||w||(M=!0,i(N))},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_getFirstCallbackNode=function(){return S(x)},s.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var a=C;C=t;try{return e()}finally{C=a}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=L,s.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=C;C=e;try{return t()}finally{C=a}},s.unstable_scheduleCallback=function(e,t,a){var r,n=s.unstable_now();return"object"===(void 0===a?"undefined":B(a))&&null!==a?(r="number"==typeof(r=a.delay)&&0<r?n+r:n,a="number"==typeof a.timeout?a.timeout:j(e)):(a=j(e),r=n),e={id:F++,callback:t,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},n<r?(e.sortIndex=r,b(A,e),null===S(x)&&e===S(A)&&(I?u():I=!0,l(D,r-n))):(e.sortIndex=a,b(x,e),M||w||(M=!0,i(N))),e},s.unstable_shouldYield=function(){var e=s.unstable_now(),t=(R(e),S(x));return t!==P&&null!==P&&null!==t&&null!==t.callback&&t.startTime<=e&&t.expirationTime<P.expirationTime||v()},s.unstable_wrapCallback=function(t){var a=C;return function(){var e=C;C=a;try{return t.apply(this,arguments)}finally{C=e}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=h(a(7)),o=a(13),s=h(a(565)),l=h(a(583)),u=(a(18),a(15)),c=a(41),d=h(a(612));function h(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var t=this,e=(a.__proto__||Object.getPrototypeOf(a)).call(this,e);if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"updateUISize",value:function(){null!==this.refs&&void 0!==this.refs&&null!==this.refs.nexplayer_container&&void 0!==this.refs.nexplayer_container&&(this.refs.nexplayer_container.clientWidth<461?this.props.onSize(c.SIZE.TINY):this.refs.nexplayer_container.clientWidth<768?this.props.onSize(c.SIZE.MOBILE):this.props.onSize(c.SIZE.NORMAL))}},{key:"componentDidMount",value:function(){(0,d.default)({strategy:"scroll"}).listenTo(this.refs.nexplayer_container,this.updateUISize.bind(this)),this.updateUISize()}},{key:"setVideoElement",value:function(e){this.setState({videoElement:e})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.size!=e.size||this.props.showingFullUI!==e.showingFullUI||null===this.state||this.state.videoElement!==t.videoElement}},{key:"render",value:function(){var t=this,e="nexplayer_container";return this.props.size===c.SIZE.MOBILE?e+=" nexplayer_container_mobile":this.props.size===c.SIZE.TINY?e+=" nexplayer_container_tiny":e+=" nexplayer_container_normal",i.default.createElement("div",{id:"nexplayer_container",className:e,ref:"nexplayer_container",style:{cursor:this.props.showingFullUI?"auto":"none"}},i.default.createElement(l.default,{focusButtonsArray:function(e){t.props.focusButtonsArray(e)},focusTopBar:function(e){t.props.focusTopBar(e)},fullScreenContainer:this}),i.default.createElement(s.default,{setVideoElement:function(e){return t.setVideoElement(e)},getAdInstance:function(e){t.props.getAdInstance(e)},fullScreenContainer:this,focusButtonsArray:function(e){t.props.focusButtonsArray(e)}}))}}]),a}(i.default.Component),u={onSize:u.ActionChangeSize},o=(0,o.connect)(function(e){return{showingFullUI:e.NexPlayerReducer.showingFullUI,size:e.NexPlayerReducer.size}},u)(a);t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProvider=u;var i=n(a(210)),o=a(7),r=n(o),s=n(a(99)),l=a(211);n(a(146));function n(e){return e&&e.__esModule?e:{default:e}}r.default.forwardRef;function u(r){var e,n=(r=void 0===r?"store":r)+"Subscription",t=function(a){(0,i.default)(t,a);var e=t.prototype;function t(e,t){t=a.call(this,e,t)||this;return t[r]=e.store,t}return e.getChildContext=function(){var e={};return e[r]=this[r],e[n]=null,e},e.render=function(){return o.Children.only(this.props.children)},t}(o.Component);return t.propTypes={store:l.storeShape.isRequired,children:s.default.element.isRequired},t.childContextTypes=((e={})[r]=l.storeShape.isRequired,e[n]=l.subscriptionShape,e),t}t.default=u()},function(e,a,t){"use strict";function r(e,t){return a.default=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=r},function(e,t,a){"use strict";var o=a(538);function r(){}function n(){}n.resetWarningCache=r,e.exports=function(){function e(e,t,a,r,n,i){if(i!==o)throw(i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",i}function t(){return e}var a={array:e.isRequired=e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:r};return a.PropTypes=a}},function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}},function(e,t,a){"use strict";var r=a(213),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},d={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function h(e){return r.isMemo(e)?i:o[e.$$typeof]||n}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=i;var p=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,v=Object.prototype;e.exports=function e(t,a,r){if("string"!=typeof a){v&&(n=y(a))&&n!==v&&e(t,n,r);for(var n,i=f(a),o=(m&&(i=i.concat(m(a))),h(t)),s=h(a),l=0;l<i.length;++l){var u=i[l];if(!(d[u]||r&&r[u]||s&&s[u]||o&&o[u])){var c=g(a,u);try{p(t,u,c)}catch(e){}}}}return t}},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,l=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,m=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.block"):60121,k=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,S=n?Symbol.for("react.scope"):60119;function E(e){if("object"===(void 0===e?"undefined":r(e))&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case p:case s:case u:case l:case m:return e;default:switch(e=e&&e.$$typeof){case d:case f:case v:case y:case c:return e;default:return t}}case o:return t}}}function T(e){return E(e)===p}t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=d,t.ContextProvider=c,t.Element=i,t.ForwardRef=f,t.Fragment=s,t.Lazy=v,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=l,t.Suspense=m,t.isAsyncMode=function(e){return T(e)||E(e)===h},t.isConcurrentMode=T,t.isContextConsumer=function(e){return E(e)===d},t.isContextProvider=function(e){return E(e)===c},t.isElement=function(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return E(e)===f},t.isFragment=function(e){return E(e)===s},t.isLazy=function(e){return E(e)===v},t.isMemo=function(e){return E(e)===y},t.isPortal=function(e){return E(e)===o},t.isProfiler=function(e){return E(e)===u},t.isStrictMode=function(e){return E(e)===l},t.isSuspense=function(e){return E(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===p||e===u||e===l||e===m||e===g||"object"===(void 0===e?"undefined":r(e))&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===d||e.$$typeof===f||e.$$typeof===k||e.$$typeof===b||e.$$typeof===S||e.$$typeof===_)},t.typeOf=E},function(e,t,a){"use strict";e.exports=function(e,t,a,r,n,i,o,s){var l,u,c;if(!e)throw void 0===t?c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(l=[a,r,n,i,o,s],u=0,(c=new Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"),c.framesToPop=1,c}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={notify:function(){}};t.default=function(){function e(e,t,a){this.store=e,this.parentSub=t,this.onStateChange=a,this.unsubscribe=null,this.listeners=r}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var a,r;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(a=[],r=[],{clear:function(){a=r=null},notify:function(){for(var e=a=r,t=0;t<e.length;t++)e[t]()},get:function(){return r},subscribe:function(e){var t=!0;return(r=r===a?a.slice():r).push(e),function(){t&&null!==a&&(t=!1,(r=r===a?a.slice():r).splice(r.indexOf(e),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=r)},e}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.createConnect=c;var m=u(a(147)),g=u(a(148)),r=u(a(212)),y=u(a(545)),n=u(a(546)),o=u(a(561)),s=u(a(562)),l=u(a(563));function u(e){return e&&e.__esModule?e:{default:e}}function v(a,e,r){for(var t=e.length-1;0<=t;t--){var n=e[t](a);if(n)return n}return function(e,t){throw new Error("Invalid value of type "+(void 0===a?"undefined":i(a))+" for "+r+" argument when connecting component "+t.wrappedComponentName+".")}}function _(e,t){return e===t}function c(e){var e=void 0===e?{}:e,t=e.connectHOC,c=void 0===t?r.default:t,t=e.mapStateToPropsFactories,d=void 0===t?o.default:t,t=e.mapDispatchToPropsFactories,h=void 0===t?n.default:t,t=e.mergePropsFactories,p=void 0===t?s.default:t,t=e.selectorFactory,f=void 0===t?l.default:t;return function(e,t,a,r){var r=r=void 0===r?{}:r,n=r.pure,n=void 0===n||n,i=r.areStatesEqual,i=void 0===i?_:i,o=r.areOwnPropsEqual,o=void 0===o?y.default:o,s=r.areStatePropsEqual,s=void 0===s?y.default:s,l=r.areMergedPropsEqual,l=void 0===l?y.default:l,r=(0,g.default)(r,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),u=v(e,d,"mapStateToProps"),t=v(t,h,"mapDispatchToProps"),a=v(a,p,"mergeProps");return c(f,(0,m.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:u,initMapDispatchToProps:t,initMergeProps:a,pure:n,areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s,areMergedPropsEqual:l},r))}}t.default=c()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(t.default=function(e,t){if(!s(e,t)){if("object"!==(void 0===e?"undefined":i(e))||null===e||"object"!==(void 0===t?"undefined":i(t))||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(var n=0;n<a.length;n++)if(!o.call(t,a[n])||!s(e[a[n]],t[a[n]]))return!1}return!0},Object.prototype.hasOwnProperty);function s(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(t.whenMapDispatchToPropsIsFunction=o,t.whenMapDispatchToPropsIsMissing=s,t.whenMapDispatchToPropsIsObject=l,a(214)),i=a(220);function o(e){return"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function s(e){return e?void 0:(0,i.wrapMapToPropsConstant)(function(e){return{dispatch:e}})}function l(t){return t&&"object"===(void 0===t?"undefined":r(t))?(0,i.wrapMapToPropsConstant)(function(e){return(0,n.bindActionCreators)(t,e)}):void 0}t.default=[o,s,l]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(a(217)),n=o(a(550)),i=o(a(551));function o(e){return e&&e.__esModule?e:{default:e}}var s=r.default?r.default.toStringTag:void 0;t.default=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(0,(s&&s in Object(e)?n:i).default)(e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=a(549),a=(a=a)&&a.__esModule?a:{default:a};r="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=a.default||r||Function("return this")();t.default=a},function(e,a,t){"use strict";!function(e){Object.defineProperty(a,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t="object"==(void 0===e?"undefined":t(e))&&e&&e.Object===Object&&e;a.default=t}.call(this,t(47))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=a(217),a=(a=a)&&a.__esModule?a:{default:a};var r=Object.prototype,i=r.hasOwnProperty,o=r.toString,s=a.default?a.default.toStringTag:void 0;t.default=function(e){var t=i.call(e,s),a=e[s];try{var r=!(e[s]=void 0)}catch(e){}var n=o.call(e);return r&&(t?e[s]=a:delete e[s]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.toString;t.default=function(e){return r.call(e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=a(553);a=(0,((a=a)&&a.__esModule?a:{default:a}).default)(Object.getPrototypeOf,Object);t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,a){return function(e){return t(a(e))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){return null!=e&&"object"==(void 0===e?"undefined":r(e))}},function(e,r,n){"use strict";!function(e,t){Object.defineProperty(r,"__esModule",{value:!0});var a=n(556),a=(a=a)&&a.__esModule?a:{default:a};e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t,t=(0,a.default)(e);r.default=t}.call(this,n(47),n(135)(e))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,e=e.Symbol;"function"==typeof e?e.observable?t=e.observable:(t=e("observable"),e.observable=t):t="@@observable";return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=Object.keys(e),u={},a=0;a<t.length;a++){var r=t[a];"function"==typeof e[r]&&(u[r]=e[r])}var c=Object.keys(u);var d=void 0;try{!function(a){Object.keys(a).forEach(function(e){var t=a[e];if(void 0===t(void 0,{type:n.ActionTypes.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+n.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(u)}catch(e){d=e}return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(d)throw d;for(var a=!1,r={},n=0;n<c.length;n++){var i,o=c[n],s=u[o],l=e[o],s=s(l,t);if(void 0===s)throw i=function(e,t){t=t&&t.type;return"Given action "+(t&&'"'+t.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}(o,t),new Error(i);r[o]=s,a=a||s!==l}return a?r:e}};var n=a(215);r(a(216)),r(a(218));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(e,t){return function(){return t(e.apply(void 0,arguments))}}t.default=function(e,t){if("function"==typeof e)return l(e,t);if("object"!==(void 0===e?"undefined":s(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":s(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var a=Object.keys(e),r={},n=0;n<a.length;n++){var i=a[n],o=e[i];"function"==typeof o&&(r[i]=l(o,t))}return r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(i){return function(e,t,a){var e=i(e,t,a),r=e.dispatch,n={getState:e.getState,dispatch:function(e){return r(e)}},t=o.map(function(e){return e(n)}),r=s.default.apply(void 0,t)(e.dispatch);return l({},e,{dispatch:r})}}};var t=a(219),s=(a=t)&&a.__esModule?a:{default:a};var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){if("object"!==(void 0===e?"undefined":r(e))||null===e)return!1;e=Object.getPrototypeOf(e);if(null===e)return!0;var t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return e===t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whenMapStateToPropsIsFunction=n,t.whenMapStateToPropsIsMissing=i;var r=a(220);function n(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function i(e){return e?void 0:(0,r.wrapMapToPropsConstant)(function(){return{}})}t.default=[n,i]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultMergeProps=i,t.wrapMergePropsFunc=o,t.whenMergePropsIsFunction=s,t.whenMergePropsIsOmitted=l;var r=n(a(147));n(a(221));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return(0,r.default)({},a,e,t)}function o(s){return function(e,t){t.displayName;var r,n=t.pure,i=t.areMergedPropsEqual,o=!1;return function(e,t,a){e=s(e,t,a);return o?n&&i(e,r)||(r=e):(o=!0,r=e),r}}}function s(e){return"function"==typeof e?o(e):void 0}function l(e){return e?void 0:function(){return i}}t.default=[s,l]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.impureFinalPropsSelectorFactory=o,t.pureFinalPropsSelectorFactory=s,t.default=function(e,t){var a=t.initMapStateToProps,r=t.initMapDispatchToProps,n=t.initMergeProps,t=(0,i.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=a(e,t),r=r(e,t),n=n(e,t);return(t.pure?s:o)(a,r,n,e,t)};var i=r(a(148));r(a(564));function r(e){return e&&e.__esModule?e:{default:e}}function o(a,r,n,i){return function(e,t){return n(a(e,t),r(i,t),t)}}function s(n,i,o,s,e){var l,u,c,d,h,p=e.areStatesEqual,f=e.areOwnPropsEqual,m=e.areStatePropsEqual,a=!1;function r(e,t){var a=!f(t,u),r=!p(e,l);return l=e,u=t,a&&r?(c=n(l,u),i.dependsOnOwnProps&&(d=i(s,u)),h=o(c,d,u)):a?(n.dependsOnOwnProps&&(c=n(l,u)),i.dependsOnOwnProps&&(d=i(s,u)),h=o(c,d,u)):r?(e=n(l,u),t=!m(e,c),c=e,h=t?o(c,d,u):h):h}return function(e,t){return a?r(e,t):(c=n(l=e,u=t),d=i(s,u),h=o(c,d,u),a=!0,h)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){n(e,"mapStateToProps",r),n(t,"mapDispatchToProps",r),n(a,"mergeProps",r)};var t=a(146),r=(a=t)&&a.__esModule?a:{default:a};function n(e,t,a){if(!e)throw new Error("Unexpected value for "+t+" in "+a+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+a+" did not specify a value for dependsOnOwnProps.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e};function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=r(15),l=r(13),u=r(189),c=r(41),d=g(r(566)),h=g(r(581)),p=g(r(582)),f=g(r(7)),m=g(r(226));function g(e){return e&&e.__esModule?e:{default:e}}r(18),r(222);var y=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),e=(t.extraInformationForImpressions={},t.url="",t.requestPSAppId_=function(){return new Promise(function(t,a){var r,e="",e=""!==window.location.port?window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/userAppId.json":window.location.protocol+"//"+window.location.hostname+"/userAppId.json",n=new XMLHttpRequest;n.open("GET",e),n.responseType="json",n.send(),n.onload=function(){var e=n.response;null==e?a(n):(r=Object.values(e)[0],t(r))},n.onerror=function(e){a(e)}})},t.alerts=!1,t.chromecast=null,t.wmSDK=null,t.wmXPos=null,t.wmYPos=null,t.displayedInCanvas=!1,t.lastSubtitle=void 0,t.oldMounted=!1,t.mounted=!1,t.newRelicTracker=null,t.resumePosition=t.props.resumePosition,t.state={fullscreenEnabled:!!m.default&&m.default.isFullscreen,errorCode:-1},t.vastURI=t.props.currentItem.vast,t.adsParamsToEncode=t.props.adsParamsToEncode,t.video=document.createElement("video"),t._firstQuartile=0,t._firstQuartileEventFired=!1,t._midPoint=0,t._midPointEventFired=!1,t._resumePosition=t.props.resumePosition,t._thirdQuartile=0,t._thirdQuartileEventFired=!1,t._videoProgressTime=new Array(7).fill({firedEvent:!1}),t._adController=null,t._loadedVideoData=!1,t._resumePosition>t._firstQuartile&&(t._firstQuartileEventFired=!0),t._resumePosition>t._midPoint&&(t._midPointEventFired=!0),t._resumePosition>t._thirdQuartile&&(t._thirdQuartileEventFired=!0),t.resizeBind=t.onResize.bind(t),window.addEventListener("resize",t.resizeBind,!1),t.props.setVideoElement(t.video),"undefined"!=typeof Windows&&null!=Windows||(void 0!==t.props.currentItem.poster?null!==t.props.currentItem.poster&&void 0!==t.props.currentItem.poster&&i(t.props.currentItem.poster)===String&&t.video.setAttribute("poster",t.props.currentItem.poster):t.video.setAttribute("poster","")),t.done=!1,t.video.className="nexplayer_video",t.video.id="nexplayer_video",t.videoAttached=!1,t.chromecastButton=document.createElement("button","google-cast-button"),t.chromecastButton.id="chromecast_button",t.chromecastButton.style.visibility="hidden",t.chromecastButton.style.height=t.chromecastButton.style.width="0%",document.body.appendChild(t.chromecastButton),t.video.volume),e=(t.checkBrowser()&&(t.video.muted=!1,t.video.volume=1,t.video.autoplay=!(e=0),t.video.setAttribute("webkit-playsinline","webkit-playsinline"),t.video.setAttribute("playsinline","playsinline"),t.video.setAttribute("x-webkit-airplay","allow")),t.props.onVolume(e),t.props.onCallBackUnMute(t.callBackToUnMuteVideo.bind(t)),void 0!==t.props.currentItem.cast&&window.WebKitPlaybackTargetAvailabilityEvent&&(t.displayedInCanvas=!0,t.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){"available"===e.availability&&t.props.onAirplayEnabled(),document.getElementById("airplay").addEventListener("click",function(){t.video.webkitShowPlaybackTargetPicker()})})),t.player=new u.Player,t.player.div=t.props.div,t.player.player_.div=t.props.div,t);if(t.props.useNewRelicTracker&&void 0!==t.player&&null!==t.player)try{if(void 0!==nrvideo&&null!==nrvideo)try{e.newRelicTracker=new nrvideo.NexPlayerTracker(e.player,{tag:e.video}),nrvideo.Core.addTracker(e.newRelicTracker)}catch(e){console.log("An error has occurred while creating the New Relic tracker",e)}}catch(e){console.log("An error has ocurred: ",e)}return t.startVideoPlayback(),t}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),o(a,[{key:"callBackToUnMuteVideo",value:function(){var e=!this.video.paused;this.video.muted=!1,e&&this.props.onPlayingOrder()}},{key:"checkBrowser",value:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk|Version\/[\d\.]+.*Safari/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t}},{key:"checkIfVideoIsLive",value:function(){try{null!==this.player&&void 0!==this.player&&this.player.isLive()?this.props.onIsLive():this.props.onIsNotLive()}catch(e){}}},{key:"checkIfVideoNeedsInstallation",value:function(){var e;this.videoAttached||null==this.player||null==this.player||(e=this.refs.videoplayer)&&(this.videoAttached=!0,e.appendChild(this.video))}},{key:"clickReturn",value:function(){this.props.callbackForReturn()}},{key:"closeVideoPlayer",value:function(){this.video.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.video.removeEventListener("playing",this.playing.bind(this),!1),this.video.removeEventListener("pause",this.pause.bind(this),!1),this.video.removeEventListener("waiting",this.waiting.bind(this),!1),this.video.removeEventListener("loadeddata",this.loadedData.bind(this),!1),this.video.textTracks.removeEventListener("addtrack",this.updateSubtitles.bind(this),!1),this.video.removeEventListener("ended",this.ended.bind(this),!1),this.video.removeEventListener("seeked",this.seeked.bind(this),!1),this.video=""}},{key:"componentDidMount",value:function(){var t=this;this.mounted=!0,this.props.disableKeyEvents||document.addEventListener("keypress",function(e){return t.spaceKeyPress(e)}),m.default&&(this.eventListeners.screenfull=this.fullScreenChanged.bind(this),m.default.on("change",this.eventListeners.screenfull)),this.onResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.resizeBind,!1),this.video.removeEventListener("timeupdate",this.eventListeners.timeUpdate,!1),this.video.removeEventListener("playing",this.eventListeners.playing,!1),this.video.removeEventListener("pause",this.eventListeners.pause,!1),this.video.removeEventListener("waiting",this.eventListeners.waiting,!1),this.video.removeEventListener("loadeddata",this.eventListeners.loadedData,!1),this.video.removeEventListener("ended",this.eventListeners.ended,!1),this.video.removeEventListener("seeked",this.eventListeners.seeked,!1),this.video.textTracks.removeEventListener("addtrack",this.eventListeners.updateSubtitles,!1),m.default&&m.default.off("change",this.eventListeners.screenfull),document.removeEventListener("fullscreenchange",this.eventListeners.wmFullscreen,!1),this.video.removeEventListener("ended",this.eventListeners.wmEnded,!1),this.video.removeEventListener("play",this.eventListeners.wmPlay,!1),this.player.player_.watermarkContext&&this.wmEndedHandler(),this.player.off(u.Player.NexEvent.Manifest_Switched,this.manifestSwitchedHandler.bind(this)),this.closeVideoPlayer()}},{key:"ended",value:function(){this.props.onEnded()}},{key:"focusNext",value:function(e){this.elementFocused;var t=["nexplayer_container_seekbar","nexplayer_play_pause","nexplayer_volume","nexplayer_full_screen"];null==this.elementFocused&&(this.elementFocused=0),this.elementFocused+e<=t.length-1&&0<=this.elementFocused+e?this.elementFocused=this.elementFocused+e:this.elementFocused=0;for(var a=0;a<=t.length-1;a++)document.getElementsByClassName(t[a])[0].style.boxShadow="";document.getElementsByClassName(t[this.elementFocused])[0].style.boxShadow="inset 0 0 0 2px rgba(27,127,204,8)"}},{key:"fullScreenChanged",value:function(){this.setState(n({},this.state,{fullscreenEnabled:m.default.isFullscreen}))}},{key:"loadedData",value:function(){this._loadedVideoData=!0,this.mounted&&("undefined"!=typeof Windows&&null!=Windows||this.video.setAttribute("poster",""),this.updateBothSubtitlesAndAudios())}},{key:"onResize",value:function(){var e=this;setTimeout(function(){void 0!==e.refs.videoplayer&&null!==e.refs.videoplayer&&e.props.onGetMarginVideoLeft(e.refs.videoplayer.getBoundingClientRect().left)},500)}},{key:"onThumbnailsLoaded",value:function(e){try{void 0===this.player||null===this.player||this.player.isLive()||this.props.onLoadThumb(e)}catch(e){}}},{key:"pause",value:function(){this.props.onPause()}},{key:"playing",value:function(){this.updateBothSubtitlesAndAudios(),this.props.onPlaying(),this.checkIfVideoIsLive()}},{key:"processComands",value:function(){try{var e;this.props.order.currentOrder===c.ORDER.PAUSE?this.video.pause():this.props.order.currentOrder!==c.ORDER.PLAY||this.props.isAdPlaying?this.props.order.currentOrder!==c.ORDER.SEEK||isNaN(this.props.order.seekTo)?this.props.order.currentOrder===c.ORDER.FULL_SCREEN?this.video.webkitEnterFullscreen():this.props.order.currentOrder!==c.ORDER.AUDIO||(e=this.player.getCurrentAudioStream())&&e.name===this.props.currentAudio.label&&e.id===this.props.currentAudio.id||this.player.setAudioStream(this.props.currentAudio.id):this.player.seek(this.props.order.seekTo):this.video.play()}catch(e){}this.processSubtitleUpdate(),null!==this.video&&void 0!==this.video&&(this.video.volume=this.props.currentVolume,0==this.props.currentVolume?this.video.muted=!0:this.video.muted=!1)}},{key:"processSubtitleUpdate",value:function(){var e;this.lastSubtitle!==this.props.currentSubtitle&&(this.lastSubtitle=this.props.currentSubtitle,e=this.props.currentSubtitle?this.props.currentSubtitle.id:-1,null!==this.video&void 0!==this.video)&&null!==this.video.textTracks&&void 0!==this.video.textTracks&&(-1!==e?void 0!==this.props.currentSubtitle.idShaka&&null!==this.props.currentSubtitle.idShaka&&this.player.player_&&this.player.player_.nexplayer_&&this.player.player_.nexplayer_.setTextTrack&&this.player.player_.nexplayer_.setTextTrack(this.props.currentSubtitle.idShaka):null!==this.player&&void 0!==this.player&&this.player.player_&&this.player.player_.nexplayer_&&this.player.player_.nexplayer_.hideSubtitles&&this.player.player_.nexplayer_.hideSubtitles())}},{key:"shouldComponentUpdate",value:function(e,t){return t.errorCode!==this.state.errorCode||e.adsDelay!==this.props.adsDelay||e.resumePosition!==this.props.resumePosition||e.useDefaultControls!==this.props.useDefaultControls||e.currentItem.vast!==this.props.currentItem.vast||e.currentItem.enableVpaid!==this.props.currentItem.enableVpaid||e.adsParamsToEncode!==this.props.adsParamsToEncode||e.showingFullUI!==this.props.showingFullUI||e.order.currentOrder!==this.props.order.currentOrder||e.order.seekTo!==this.props.order.seekTo||e.currentVolume!==this.props.currentVolume||e.currentSubtitle!==this.props.currentSubtitle||e.isAdPlaying!==this.props.isAdPlaying||e.currentAudio!==this.props.currentAudio||this.mounted!==this.oldMounted}},{key:"render",value:function(){var t=this;return this.processComands(),this.oldMounted=this.mounted,f.default.createElement("div",{className:"nexplayer_full_div"},-1===this.state.errorCode?f.default.createElement("div",null,f.default.createElement("div",{ref:"videoplayer",className:"nexplayer_video",id:"ads"}),f.default.createElement("div",{ref:"nexplayer_caption_div",className:"nexplayer_video, nexplayer_caption_div"}),"default"!==this.props.adsMode&&"pal"!==this.props.adsMode||"dai"===this.props.adsMode||!this.mounted?"":f.default.createElement(d.default,{getAdInstance:function(e){t.props.getAdInstance(e)},reinitConfig:this.config,onRef:function(e){return t._adController=e},videoElement:this.video,enableVpaid:this.props.enableVpaid,debug:this.props.debug}),"ima"===this.props.adsMode&&this.mounted&&"dai"!==this.props.adsMode?f.default.createElement(h.default,{adsDelay:this.props.adsDelay,adsMode:this.props.adsMode,callBackPlayBackCanStart:function(){t.props.onPlayingOrder()},fullScreenAtStart:this.props.startFullScreen,getAdInstance:function(e){t.props.getAdInstance(e)},pageUrl:this.props.pageUrl,playerConfig:this.config,resumePosition:this.props.resumePosition,vast:this.props.currentItem.vast,videoElement:this.video,adsParamsToEncode:this.props.adsParamsToEncode,useDefaultControls:this.props.useDefaultControls}):""):this.props.showingFullUI?f.default.createElement("div",{className:"nexplayer_full_div"},f.default.createElement(p.default,{errorCode:this.state.errorCode})):f.default.createElement("div",{className:"nexplayer_full_div"}))}},{key:"seeked",value:function(){this.props.currentStatus===c.STATUS.PAUSE?this.pause():this.playing()}},{key:"spaceKeyPress",value:function(e){32===e.keyCode&&this.tooglePlayPause()}},{key:"manifestSwitchedHandler",value:function(e){this.player.player_.URL=e.newUrl}},{key:"startVideoPlayback",value:function(){""===this.url&&(this.url=this.props.currentItem.URL),this.props.currentItem.dynamicThumbnails?(this.player.enablePreviewThumbnails(!0),this.player.setThumbnailResources(this.onThumbnailsLoaded.bind(this))):this.props.currentItem.staticThumbnails&&(this.player.enablePreviewThumbnails(!0),this.player.setThumbnailResources(this.onThumbnailsLoaded.bind(this),this.props.currentItem.staticThumbnails)),this.extraInformationForImpressions={subtitle:this.props.currentItem.name,title:this.props.currentItem.subtitle,ads:null!=this.props.currentItem.vast&&null!=this.props.currentItem.vast},this.eventListeners={timeUpdate:this.timeUpdate.bind(this),playing:this.playing.bind(this),pause:this.pause.bind(this),waiting:this.waiting.bind(this),loadedData:this.loadedData.bind(this),ended:this.ended.bind(this),seeked:this.seeked.bind(this),updateSubtitles:this.updateSubtitles.bind(this),screenfull:void 0,wmFullscreen:void 0,wmEnded:void 0,wmPlay:void 0},this.video.addEventListener("timeupdate",this.eventListeners.timeUpdate,!1),this.video.addEventListener("playing",this.eventListeners.playing,!1),this.video.addEventListener("pause",this.eventListeners.pause,!1),this.video.addEventListener("waiting",this.eventListeners.waiting,!1),this.video.addEventListener("loadeddata",this.eventListeners.loadedData,!1),this.video.addEventListener("ended",this.eventListeners.ended,!1),this.video.addEventListener("seeked",this.eventListeners.seeked,!1),this.video.textTracks.addEventListener("addtrack",this.eventListeners.updateSubtitles,!1),void 0!==this.props.autoplay?(this.video.autoplay=this.props.autoplay,!1===this.video.autoplay&&this.props.onPause()):this.video.autoplay=!0;var t=this;this.config={},this.config.videoElement=this.video,this.config.url=this.url,this.config.drm=this.props.currentItem.drm,this.config.debug=this.props.debug,this.config.externalSubtitles=this.props.externalSubtitles,this.config.configuration=this.props.configuration,this.config.addRequestFilter=this.props.addRequestFilter,this.config.newRelicTracker=this.newRelicTracker,this.config.startingBufferLength=this.props.startingBufferLength,this.config.improveStartUp=this.props.improveStartUp,this.config.bitrateConfig=this.props.bitrateConfig,this.config.daiConfig=this.props.daiConfig,this.player.Init(this.props.keyValidation,this.video,this.url,this.props.currentItem.drm,this.displayedInCanvas,void 0,this.props.debug,this.extraInformationForImpressions,this.props.callbackForLogger,this.props.useDefaultControls,this.props.mutedAtStart,this.props.div,this.props.type_360,this.props.startFullScreen,this.props.hideUITime,this.props.hideControlBarOnStart,this.props.externalSubtitles,this.props.callbackForSubtitles,this.props.resumePosition,this.props.configuration,this.props.addRequestFilter,this.newRelicTracker,this.props.startingBufferLength,this.props.preferredAudioCodec,this.props.improveStartUp,this.props.autoplay,this.props.ssaiMediaTailor,this.props.bitrateConfig,this.props.retryParameters,this.props.adsMode,this.props.backupManifests,this.props.daiConfig,this.props.preferredVideoCodec).then(function(e){t.url=e;e=new CustomEvent("playerinitialized");if(t.props.div.dispatchEvent(e),t.props.callbacksForNewPlayers&&t.props.callbacksForNewPlayers(t.player,t.video),t.player.on(u.Player.NexEvent.Manifest_Switched,t.manifestSwitchedHandler.bind(t)),t.props.onPlayerInitialized(t.player),t.checkIfVideoNeedsInstallation(),t.props.wmInfo)try{if(!t.props.wmInfo.transactionId||t.props.wmInfo.transactionId<0||687194767365<t.props.wmInfo.transactionId)throw"Watermark error: transactionId out of range. Valid values: 0 - 687194767365";t.wmSDK=r(!function(){var e=new Error("Cannot find module '../third_party/watermark.min.mjs'");throw e.code="MODULE_NOT_FOUND",e}()),t.setupWM()}catch(e){"MODULE_NOT_FOUND"===e.code?console.error("Watermark library is not included."):console.error(e)}})}},{key:"setupWM",value:function(){var e;this.props.wmInfo.strength||(this.props.wmInfo.strength=80),this.props.wmInfo.player=this.player,this.props.wmInfo.videoElement=this.video,this.props.wmInfo.videoParentElement=this.video.parentElement,this.props.wmInfo.logoImage?((e=new Image).src=this.props.wmInfo.logoImage,this.props.wmInfo.logoImage=e,this.props.wmInfo.logoPos&&(this.wmXPos=this.props.wmInfo.logoPos[0],this.wmYPos=this.props.wmInfo.logoPos[1],this.props.wmInfo.logoPos[0]=this.wmXPos/100*this.video.offsetWidth,this.props.wmInfo.logoPos[1]=this.wmYPos/100*this.video.offsetHeight)):this.props.wmInfo.logoPos=void 0,this.player.player_.watermarkContext=this.wmSDK.WmSdkInitWatermark(this.props.wmInfo),this.player.player_.wmInfo=this.props.wmInfo,this.eventListeners.wmFullscreen=this.wmFullscreenHandler.bind(this),this.eventListeners.wmEnded=this.wmEndedHandler.bind(this),this.eventListeners.wmPlay=this.wmPlayHandler.bind(this),document.addEventListener("fullscreenchange",this.eventListeners.wmFullscreen,!1),this.video.addEventListener("ended",this.eventListeners.wmEnded,!1),this.video.addEventListener("play",this.eventListeners.wmPlay,!1)}},{key:"wmFullscreenHandler",value:function(){this.player.player_.watermarkContext&&this.props.wmInfo.logoImage&&this.props.wmInfo.logoPos?(this.player.player_.watermarkContext.finish(this.props.wmInfo),this.props.wmInfo.logoPos&&(this.props.wmInfo.logoPos[0]=this.wmXPos/100*this.video.offsetWidth,this.props.wmInfo.logoPos[1]=this.wmYPos/100*this.video.offsetHeight),this.player.player_.watermarkContext=this.wmSDK.WmSdkInitWatermark(this.props.wmInfo)):this.player.player_.watermarkContext&&this.player.player_.watermarkContext.update(this.props.wmInfo)}},{key:"wmEndedHandler",value:function(){this.player.player_.watermarkContext&&(this.player.player_.watermarkContext.finish(this.props.wmInfo),this.player.player_.watermarkContext=null)}},{key:"wmPlayHandler",value:function(){null===this.player.player_.watermarkContext&&(this.props.wmInfo.logoPos&&(this.props.wmInfo.logoPos[0]=this.wmXPos/100*this.video.offsetWidth,this.props.wmInfo.logoPos[1]=this.wmYPos/100*this.video.offsetHeight),this.player.player_.watermarkContext=this.wmSDK.WmSdkInitWatermark(this.props.wmInfo))}},{key:"timeUpdate",value:function(){var e;if(void 0!==this.currentTime&&null!==this.currentTime&&void 0!==this.video&&null!==this.video&&0<this.video.currentTime-this.currentTime&&this.props.status===c.STATUS.LOADING&&this.props.onPlaying(),this.video.buffered&&(this.currentTime=this.video.currentTime,e=(e=(e=this.video.buffered.length)?this.video.buffered.end(e-1):0)>this.player.getDuration()?this.player.getDuration():e,this.props.onTimeUpdate(this.player.getCurrentTime(),this.player.getDuration(),e,this.video.seeking)),!this.player.isLive()){this._firstQuartile=.25*this.video.duration,this._midPoint=.5*this.video.duration,this._thirdQuartile=.75*this.video.duration,this._videoProgressTime[0]=n({},this._videoProgressTime[0],{time:.05*this.video.duration,id:"5%"}),this._videoProgressTime[1]=n({},this._videoProgressTime[1],{time:.15*this.video.duration,id:"15%"}),this._videoProgressTime[2]=n({},this._videoProgressTime[2],{time:.25*this.video.duration,id:"25%"}),this._videoProgressTime[3]=n({},this._videoProgressTime[3],{time:.5*this.video.duration,id:"50%"}),this._videoProgressTime[4]=n({},this._videoProgressTime[4],{time:.75*this.video.duration,id:"75%"}),this._videoProgressTime[5]=n({},this._videoProgressTime[5],{time:.85*this.video.duration,id:"85%"}),this._videoProgressTime[6]=n({},this._videoProgressTime[6],{time:.95*this.video.duration,id:"95%"}),this._firstQuartileEventFired?this.video.currentTime<this._firstQuartile&&(this._firstQuartileEventFired=!1,this._resumePosition=this.video.currentTime):this._resumePosition<=this._firstQuartile&&this.video.currentTime>=this._firstQuartile&&this.video.currentTime<this._midPoint&&(this._firstQuartileEventFired=!0,e=new CustomEvent("videofirstquartile",{detail:this._firstQuartile}),this.video.dispatchEvent(e)),this._midPointEventFired?this.video.currentTime<this._midPoint&&(this._midPointEventFired=!1,this._resumePosition=this.video.currentTime):this._resumePosition<=this._midPoint&&this.video.currentTime>=this._midPoint&&this.video.currentTime<this._thirdQuartile&&(this._midPointEventFired=!0,e=new CustomEvent("videomidpoint",{detail:this._midPoint}),this.video.dispatchEvent(e)),this._thirdQuartileEventFired?this.video.currentTime<this._thirdQuartile&&(this._thirdQuartileEventFired=!1,this._resumePosition=this.video.currentTime):this._resumePosition<=this._thirdQuartile&&this.video.currentTime>=this._thirdQuartile&&(this._thirdQuartileEventFired=!0,e=new CustomEvent("videothirdquartile",{detail:this._thirdQuartile}),this.video.dispatchEvent(e));for(var t,a=0;a<this._videoProgressTime.length;a++)this._videoProgressTime[a].firedEvent?this.video.currentTime<this._videoProgressTime[a].time&&(this._videoProgressTime[a].firedEvent=!1,this._resumePosition=this.video.currentTime):this._resumePosition<=this._videoProgressTime[a].time&&this.video.currentTime>=this._videoProgressTime[a].time&&(this._videoProgressTime[a].firedEvent=!0,t=new CustomEvent("videoProgressTime",{detail:this._videoProgressTime[a].id}),this.video.dispatchEvent(t))}}},{key:"toogleFullScreen",value:function(){m.default?m.default.toggle(this.props.fullScreenContainer.refs.nexplayer_container):this.props.onFullScreen()}},{key:"tooglePlayPause",value:function(){null===this.props.type_360&&(this.props.currentStatus===c.STATUS.PAUSE?this.props.onPlayingOrder():this.props.onPauseOrder())}},{key:"trackChanged",value:function(){this.checkIfVideoIsLive()}},{key:"updateAdCues",value:function(){}},{key:"updateAudios",value:function(){if(this.player){for(var e=this.player.getAudioStreams(),t=[],a=0;a<e.length;a++){var r=e[a];t.push({label:r.name,id:r.id})}this.props.onAudio(t);var n=this.player.getCurrentAudioStream();!n||this.props.currentAudio&&n.name===this.props.currentAudio.label&&n.id===this.props.currentAudio.id||this.props.onAudioSelected({label:n.name,id:n.id})}}},{key:"updateBothSubtitlesAndAudios",value:function(){this.updateSubtitles(),this.updateAudios(),this.updateQualities()}},{key:"updateQualities",value:function(){this.props.onQualities(this.player.getQualityLevels())}},{key:"updateSubtitles",value:function(){var e=[];if(null!==this.video&&void 0!==this.video&&null!==this.video.textTracks&&void 0!==this.video.textTracks&&this.player.player_&&this.player.player_.nexplayer_&&this.player.player_.nexplayer_.getTextTracks){var t=this.player.player_.nexplayer_.getTextTracks();if(null!=t)for(var a=0;a<t.length;a++){var r=t[a].language;e.push({label:r=""===r?"-":r,id:a,idShaka:a})}}this.props.onSubtitle(e)}},{key:"waiting",value:function(){this.props.onLoading()}}]),a}(f.default.Component),a={onPlaying:a.ActionPlaying,onPause:a.ActionPause,onTimeUpdate:a.ActionCurrentTimeChange,onLoading:a.ActionLoading,onAudio:a.ActionUpdateAvailableAudios,onSubtitle:a.ActionUpdateAvailableSubtitles,onQualities:a.ActionUpdateAvailableQualities,onAudioSelected:a.ActionUpdateSelectedAudio,onEnded:a.ActionEnded,onIdle:a.ActionUserIdle,onActive:a.ActionUserActive,onPlayingOrder:a.ActionOrderPlay,onPauseOrder:a.ActionOrderPause,onIsLive:a.ActionIsLive,onIsNotLive:a.ActionIsNotLive,onGetMarginVideoLeft:a.ActionGetMarginVideoLeft,onLoadThumb:a.ActionLoadThumb,onVolume:a.ActionChangeVolume,onCallBackUnMute:a.ActionCallBackUnMute,onAirplayEnabled:a.ActionAirplayEnabled,onFullScreen:a.ActionFullScreen,onPlayerInitialized:a.ActionPlayerInitialized},l=(0,l.connect)(function(e){return{keyValidation:e.NexPlayerReducer.key,currentItem:e.NexPlayerReducer.currentPlaylistItem,order:e.NexPlayerReducer.order,currentAudio:e.NexPlayerReducer.currentAudioLanguage,currentSubtitle:e.NexPlayerReducer.currentSubtitleLanguage,currentStatus:e.NexPlayerReducer.status,callbacksForNewPlayers:e.NexPlayerReducer.callbacksWithPlayers,currentVolume:e.NexPlayerReducer.volume,isAdPlaying:e.NexPlayerReducer.isAdPlaying,clientPosition:e.NexPlayerReducer.clientPosition,status:e.NexPlayerReducer.status,airPlayEnabled:e.NexPlayerReducer.airPlayEnabled,div:e.NexPlayerReducer.div,type_360:e.NexPlayerReducer.type_360,debug:e.NexPlayerReducer.debug,callbackForLogger:e.NexPlayerReducer.callbackForLogger,useDefaultControls:e.NexPlayerReducer.useDefaultControls,startFullScreen:e.NexPlayerReducer.startFullScreen,hideUITime:e.NexPlayerReducer.hideUITime,hideControlBarOnStart:e.NexPlayerReducer.hideControlBarOnStart,externalSubtitles:e.NexPlayerReducer.externalSubtitles,callbackForSubtitles:e.NexPlayerReducer.callbackForSubtitles,autoplay:e.NexPlayerReducer.autoplay,mutedAtStart:e.NexPlayerReducer.mutedAtStart,disableKeyEvents:e.NexPlayerReducer.disableKeyEvents,resumePosition:e.NexPlayerReducer.resumePosition,showingFullUI:e.NexPlayerReducer.showingFullUI,configuration:e.NexPlayerReducer.configuration,adsCues:e.NexPlayerReducer.adsCues,adsDelay:e.NexPlayerReducer.adsDelay,addRequestFilter:e.NexPlayerReducer.addRequestFilter,useNewRelicTracker:e.NexPlayerReducer.useNewRelicTracker,startingBufferLength:e.NexPlayerReducer.startingBufferLength,preferredAudioCodec:e.NexPlayerReducer.preferredAudioCodec,trailer:e.NexPlayerReducer.trailer,improveStartUp:e.NexPlayerReducer.improveStartUp,adsMode:e.NexPlayerReducer.adsMode,adsParamsToEncode:e.NexPlayerReducer.adsParamsToEncode,ssaiMediaTailor:e.NexPlayerReducer.ssaiMediaTailor,bitrateConfig:e.NexPlayerReducer.bitrateConfig,backupManifests:e.NexPlayerReducer.backupManifests,wmInfo:e.NexPlayerReducer.wmInfo,retryParameters:e.NexPlayerReducer.retryParameters,pageUrl:e.NexPlayerReducer.pageUrl,daiConfig:e.NexPlayerReducer.daiConfig,preferredVideoCodec:e.NexPlayerReducer.preferredVideoCodec,enableVpaid:e.NexPlayerReducer.enableVpaid}},a)(y);t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=c(a(7)),o=a(13),s=a(15);a(222);var l=c(a(569)),u=c(a(149));function c(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){var t;if(this instanceof a)return(t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).props=e,t.props.onRef(t),t.state={adblockEnd:!0,adBlocStart:!1,adPlaying:!1,adRemainingTime:void 0},t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"componentDidMount",value:function(){this.adController=new l.default(this.props,this.adContainer,this,this.props.debug)}},{key:"componentWillUnmount",value:function(){this.adController&&this.adController.removeAndDestroy()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.adPlaying!==t.adPlaying||this.props.showAdsUI!==e.showAdsUI||this.props.isAdPlaying!==e.isAdPlaying||this.state.adRemainingTime!==t.adRemainingTime}},{key:"render",value:function(){var t=this;return i.default.createElement("div",{id:"nexplayer_ad_container",className:"nexplayer_ad_container rmp-container",style:{display:this.state.adPlaying?"inherit":"none"},ref:function(e){return t.adContainer=e}},this.props.showAdsUI&&this.adController&&this.adController.rmpVAST&&this.props.isAdPlaying?i.default.createElement("div",{className:"nexplayer_ad_ui",id:"nexAdUI",style:{display:"inherit"}},i.default.createElement(u.default,{adsInfo:this.adController.rmpVAST,useDefaultControls:this.props.useDefaultControls})):"",0<=this.state.adRemainingTime?i.default.createElement("div",{className:"nexplayer_ad_time_container"},i.default.createElement("div",{className:"nexplayer_ad_time"},Math.round(this.state.adRemainingTime)+"s")):"",i.default.createElement("div",{className:"rmp-content"},i.default.createElement("video",{className:"rmp-video"})))}}]),a}(i.default.Component),s={onAdCuesTimes:s.ActionUpdateAdCues,onAdEnded:s.ActionAdEnded,onAdStarted:s.ActionAdStarted,onCue:s.ActionUpdateCuePoints,onPause:s.ActionOrderPause,onPlay:s.ActionOrderPlay},o=(0,o.connect)(function(e){return{adsDelay:e.NexPlayerReducer.adsDelay,adsMode:e.NexPlayerReducer.adsMode,adsParamsToEncode:e.NexPlayerReducer.adsParamsToEncode,adURI:e.NexPlayerReducer.currentPlaylistItem.vast,enableVpaid:e.NexPlayerReducer.enableVpaid,div:e.NexPlayerReducer.div,externalSubtitles_:e.NexPlayerReducer.externalSubtitles,isAdPlaying:e.NexPlayerReducer.isAdPlaying,player:e.NexPlayerReducer.player,reinitializeAfterAds:e.NexPlayerReducer.reinitializeAfterAds,resumePosition:e.NexPlayerReducer.resumePosition,showAdsUI:e.NexPlayerReducer.showAdsUI,useDefaultControls:e.NexPlayerReducer.useDefaultControls}},s)(a);t.default=o},function(e,t,a){(e.exports=a(100)(!1)).push([e.i,'@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxP.ttf) format("truetype")}.rmp-vpaid-container{text-align:initial}.rmp-ad-vast-video-player,.rmp-vpaid-container{position:absolute;top:0;left:0;margin:0;padding:0;width:100%;height:100%;outline:none;display:block}.rmp-ad-vast-video-player{cursor:pointer}.rmp-ad-container-icons{position:absolute;display:block;cursor:pointer}.rmp-ad-container-skip{position:absolute;right:0;bottom:44px;width:160px;height:40px;line-height:38px;text-align:center;cursor:pointer;background-color:#333;border:1px solid #333;transition-property:border-color;transition-duration:.4s;transition-timing-function:ease-in}.rmp-ad-container-skip:hover{border-color:#000}.rmp-ad-container-skip-waiting{width:100%;padding:0 2px;color:#cfcfcf}.rmp-ad-container-skip-message,.rmp-ad-container-skip-waiting{position:absolute;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.rmp-ad-container-skip-message{width:65%;left:5%;color:#fff}.rmp-ad-container-skip-icon{position:absolute;left:75%;width:20%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpi/P//PwMUNADxXyBuZsAPcoA4CIjfA/EuIJ4JFgUZBMU3/kNAMZIYNnz8PwIcgokzIdl0A0r3AHEbHhf9RGJ/hjGQDWJFYlcC8SQgZibgzf/YDEIHuUC8CIi58ahhJMYgEIgC4mVALIFNMzIgZBAI+AHxRiCWRfcOqQaBgBkQrwRiMSB+iE0BCwPxwBKIDwLxH0pcBAMPkKOcXIPmALEnED+lxKDJQJwKZUuQa1AVEOch8f+SE9hZQDydGCcjG/QPif0H6pUF+LIFriwCy1dvgTgChyEMaPmPBZuLVKA2RALxbjy+IGjQCiD+RcAQEFgF9fpHIN4GEwQIMACnXWgupdnzwwAAAABJRU5ErkJggg==");height:100%;background-repeat:no-repeat;background-position:50%;opacity:.7;transition-property:opacity;transition-duration:.4s;transition-timing-function:ease-in}.rmp-ad-container-skip:hover .rmp-ad-container-skip-icon{opacity:1}.rmp-ad-non-linear-container{position:absolute;text-align:center;left:50%;bottom:0;transform:translate(-50%)}.rmp-ad-non-linear-anchor:active,.rmp-ad-non-linear-anchor:hover,.rmp-ad-non-linear-anchor:link,.rmp-ad-non-linear-anchor:visited{text-decoration:none}.rmp-ad-non-linear-creative{position:relative;cursor:pointer;text-align:center;width:100%;height:100%;bottom:0}.rmp-ad-non-linear-close{right:0;top:0;position:absolute;cursor:pointer;width:20px;height:20px;background-color:#000;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHdJREFUeNqUk9EKwCAIRaX9/9MgEAZ9amsPsWVXdxV8Ec+B1Ep/o40UMuuEpK/RMvAUnEZysfAIlYRkg5/6tyGSQNgKPIkLIwGSuLAn8CSKeovgOMiaMKtKPQENjB5i1Pi7xkoMzD0kBg5PmYVnqv1MGXiT3AIMACNQPFnn5xfHAAAAAElFTkSuQmCC");background-size:cover;border:4px solid #000}.rmp-ad-click-ui-mobile{border:2px solid #fff;background:rgba(0,0,0,.4);display:block;position:absolute;right:8px;top:8px;font-size:18px;width:112px;height:34px;text-align:center;line-height:30px;box-shadow:0 0 2px rgba(0,0,0,.6)}.rmp-ad-click-ui-mobile,.rmp-ad-click-ui-mobile:active,.rmp-ad-click-ui-mobile:hover,.rmp-ad-click-ui-mobile:visited{color:#fff;text-decoration:none}.rmp-container{position:relative;text-align:center;outline:none;background:#000;padding:0;border:none;display:block;font-size:14px;max-width:none;max-height:none;overflow:hidden;line-height:1;font-family:Roboto,Arial,sans-serif}.rmp-container,.rmp-container *{box-sizing:border-box}.rmp-content,.rmp-video{width:100%;height:100%;position:absolute;left:0;top:0;margin:0;padding:0;outline:none;display:block}.rmp-ad-container,.rmp-content{width:100%!important;height:100%!important}.rmp-ad-container{position:absolute;top:0;left:0;margin:0;padding:0;width:100%;height:100%;outline:none;display:block;text-align:initial}.rmp-fullscreen-on{position:fixed!important;width:100%!important;height:100%!important;background:#000!important;overflow:hidden!important;z-index:9999!important;top:0;left:0}',""])},function(e,t,a){"use strict";e.exports=function(e){var a,r,t="undefined"!=typeof window&&window.location;if(t)return e&&"string"==typeof e?(a=t.protocol+"//"+t.host,r=a+t.pathname.replace(/\/[^\/]*$/,"/"),e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){t=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(t)?e:(e=0===t.indexOf("//")?t:0===t.indexOf("/")?a+t:r+t.replace(/^\.\//,""),"url("+JSON.stringify(e)+")")})):e;throw new Error("fixUrls requires window.location")}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(570),o=(i=i)&&i.__esModule?i:{default:i},l=a(576),u=a(577);function c(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,o){return function t(e,a){try{var r=s[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}r(h,[{key:"preloadRMPLibrary",value:function(){var e;this.rmpVAST=new l.RmpVast("nexplayer_ad_container",this.defaultParams,this.debug),this.rmpVAST&&(this.rmpVAST.setMute(!0),this.props.getAdInstance({rmpvast:this.rmpVAST,container:this.adContainer}),e=new CustomEvent("adInstanceReady"),this.playerDiv.dispatchEvent(e),this.adContainer.addEventListener("adstarted",this.adStartedBind),this.adContainer.addEventListener("addestroyed",this.adDestroyedBind),this.adContainer.addEventListener("aderror",this.adErrorBind))}},{key:"adStartedHandler",value:function(){var e;this.adBlockStartFired||this.dispatchAdblockStart(),this.lastAdSameTimeIndex?(e=this.totalAdsInAdpod-this.lastAdSameTimeIndexAux,this.dispatchAdStarted(e)):this.dispatchAdStarted(this.rmpVAST.getAdPodInfo().adPodCurrentIndex-1)}},{key:"adDestroyedHandler",value:function(){this.rmpVAST.getAdPodInfo().adPodCurrentIndex>=this.rmpVAST.getAdPodInfo().adPodLength&&!this.lastAdSameTimeIndex?this.adBlockStartFired?this.dispatchAdBlockEnd():this.onContentResumeRequested():this.lastAdSameTimeIndex&&(this.lastAdSameTimeIndexAux--,this.lastAdSameTimeIndex===this.adsParser.getIndexToPlay()&&(this.adsParser.setIndexToPlay(this.adsParser.getIndexToPlay()+1),this.lastAdSameTimeIndex=null,this.lastAdSameTimeIndexAux=null,this.totalAdsInAdpod=null,this.dispatchAdBlockEnd()),this.lastAdSameTimeIndex>this.adsParser.getIndexToPlay())&&this.rmpVAST.getAdPodInfo().adPodCurrentIndex>=this.rmpVAST.getAdPodInfo().adPodLength&&(this.adsParser.setIndexToPlay(this.adsParser.getIndexToPlay()+1),this.executeAd())}},{key:"adErrorHandler",value:function(e){this.props.div.dispatchEvent(new CustomEvent("aderror",{detail:e})),this.adBlockStartFired||this.dispatchAdblockStart()}},{key:"dispatchAdblockStart",value:function(){if(this.lastAdSameTimeIndex){if(null===this.totalAdsInAdpod){this.lastAdSameTimeIndexAux=this.adsParser.getIndexToPlay();for(var e=this.adsParser.getIndexToPlay();e<=this.lastAdSameTimeIndex;e++)if(this.adsParser.vmap.adBreaks[e].adSource.ads)for(var t=0;t<this.adsParser.vmap.adBreaks[e].adSource.ads.length;t++)this.adsParser.vmap.adBreaks[e].adSource.ads[t]["@sequence"]&&this.lastAdSameTimeIndexAux++;else this.lastAdSameTimeIndexAux++;this.totalAdsInAdpod=this.lastAdSameTimeIndexAux}var a=new CustomEvent("adblockstart",{detail:this.totalAdsInAdpod-this.adsParser.getIndexToPlay()});this.props.div.dispatchEvent(a),this.adBlockStartFired=!0}else 0<=this.rmpVAST.getAdPodInfo().adPodLength&&(a=new CustomEvent("adblockstart",{detail:this.rmpVAST.getAdPodInfo().adPodLength}),this.props.div.dispatchEvent(a),this.adBlockStartFired=!0)}},{key:"dispatchAdStarted",value:function(e){e={adId:this.rmpVAST.ad.id,adSystem:this.rmpVAST.getAdSystem().value,contentPlacement:this.adsParser.vmap.adBreaks[this.adsParser.getIndexToPlay()].breakId,duration:this.rmpVAST.getAdDuration()/1e3,index:e},e=new CustomEvent("adstarted",{detail:e});this.props.div.dispatchEvent(e)}},{key:"dispatchAdBlockEnd",value:function(){this.adBlockStartFired=!1;var e=new CustomEvent("adblockend");this.props.div.dispatchEvent(e),this.adsParser.vmap.adBreaks.length===this.adsParser.getIndexToPlay()+1&&(this.adsParser.allAdsExecuted=!0),this.onContentResumeRequested()}},{key:"initialTimeHandler",value:function(){this.isLive=this.handler.props.player.isLive(),this.videoElement.currentTime>this.resumePosition?this.videoInitialTime=this.videoElement.currentTime:this.videoInitialTime=this.resumePosition}},{key:"keyDownHandler",value:function(e){13==e.keyCode&&void 0!==document.getElementsByClassName("rmp-ad-container-skip-waiting")[0]&&document.getElementsByClassName("rmp-ad-container-skip-waiting")[0].click()}},{key:"executeNewAd",value:(d=c(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"playerStateHandler",value:function(e){this.state=e.detail}},{key:"seekingHandler",value:function(e){if(this.videoElement.duration<=Number.MAX_VALUE&&this.adsParser&&!this.adsParser.allAdsExecuted&&null!==this.videoInitialTime){var t,a=e.target.currentTime,r=this.adsParser.vmap.adBreaks.length;this.resumePositionAfterDestroyed=a;for(var n=0;n<r&&this.adsParser.getIndexToPlay()<r;n++)if(0===n&&this.adsParser.getIndexToPlay()&&(n=this.adsParser.getIndexToPlay()),!this.adsParser.vmap.adBreaks[n].executed){if(a<(t=this.timeToSeconds(this.adsParser.vmap.adBreaks[n].timeOffset))&&!this.resumePosition)break;t>this.resumePosition&&(this.resumePosition=null),this.timeOffsetAfterSeek=t,0<n&&(this.adsParser.vmap.adBreaks[n-1].executed=!0)}}}},{key:"detectAndExecute",value:function(){var e,t=this;(e=this.adsParser?this.adsParser.vmap.adBreaks.length:e)&&!this.cuesTimeOffset&&(this.cuesTimeOffset=[],this.adsParser.vmap.adBreaks.forEach(function(e){t.cuesTimeOffset.includes(t.timeToSeconds(e.timeOffset))||t.cuesTimeOffset.push(t.timeToSeconds(e.timeOffset))}),this.props.onCue(this.cuesTimeOffset));for(var a=0;a<e&&this.adsParser.getIndexToPlay()<e&&!this.lastAdSameTimeIndex&&!this.adsParser.allAdsExecuted&&null!==this.videoInitialTime;a++){0===a&&this.adsParser.getIndexToPlay()&&(a=this.adsParser.getIndexToPlay());var r=this.adsParser.vmap.adBreaks[a],n=this.timeToSeconds(r.timeOffset);if(!r.executed&&(0===n&&this.adsParser.hasPreroll||this.videoElement.currentTime>=n&&!this.resumePosition)){if(this.adsParser.vmap.adBreaks[a+1]&&n===this.timeToSeconds(this.adsParser.vmap.adBreaks[a+1].timeOffset))for(var i=a+1;i<this.adsParser.vmap.adBreaks.length&&n==this.timeToSeconds(this.adsParser.vmap.adBreaks[i].timeOffset);i++)this.lastAdSameTimeIndex=i;else if(1<a&&this.adsParser.vmap.adBreaks[a-1]&&n===this.timeToSeconds(this.adsParser.vmap.adBreaks[a-1].timeOffset)){for(var o=a-1;0<=o&&n==this.timeToSeconds(this.adsParser.vmap.adBreaks[o].timeOffset);o--)this.adsParser.vmap.adBreaks[o].executed=!1;continue}this.adsParser.setIndexToPlay(a),this.executeAdBreak();break}if(!r.executed&&this.resumePosition&&this.timeToSeconds(this.adsParser.vmap.adBreaks[a].timeOffset)>this.resumePosition&&this.videoElement.currentTime>=n){if(this.adsParser.vmap.adBreaks[a+1]&&n===this.timeToSeconds(this.adsParser.vmap.adBreaks[a+1].timeOffset))for(var s=a+1;s<this.adsParser.vmap.adBreaks.length&&n==this.timeToSeconds(this.adsParser.vmap.adBreaks[s].timeOffset);s++)this.lastAdSameTimeIndex=s;else if(1<a&&this.adsParser.vmap.adBreaks[a-1]&&n===this.timeToSeconds(this.adsParser.vmap.adBreaks[a-1].timeOffset)){for(var l=a-1;0<=l&&n==this.timeToSeconds(this.adsParser.vmap.adBreaks[l].timeOffset);l--)this.adsParser.vmap.adBreaks[l].executed=!1;continue}this.adsParser.setIndexToPlay(a),this.executeAdBreak();break}}}},{key:"executeAdBreak",value:function(){var a=this;this.adsParser.vmap.adBreaks[this.adsParser.getIndexToPlay()].executed=!0,"Playing"!==this.state&&"Paused"!==this.state?this.videoElement.addEventListener("onstatechange",function e(t){"Playing"===t.detail&&(a.onContentPauseRequested(),this.removeEventListener("onstatechange",e))}):this.onContentPauseRequested(),"Paused"===this.state?this.executeAd():this.videoElement.addEventListener("onstatechange",function e(t){"Paused"===t.detail&&(a.executeAd(),this.removeEventListener("onstatechange",e))})}},{key:"executeAd",value:function(){var e=Date.now().toString(),t=this.adsParser.vmap.adBreaks[this.adsParser.getIndexToPlay()],a=t.adSource.adTagURI.uri,t=t.timeOffset,a=this.modifyURI(a,"correlator",e,!1);if(this.adsParamsToEncode.length<this.ADS_PARAMS_MAX_LENGTH)for(var r=0;r<this.adsParamsToEncode.length;r++)a=this.modifyURI(a,this.adsParamsToEncode[r],void 0,!0);this.adsParser.vmap.adBreaks[this.adsParser.getIndexToPlay()].executed=!0,this.resumePositionAfterDestroyed||(this.resumePositionAfterDestroyed=this.timeToSeconds(t)),this.subtitleTrack=this.handler.props.player.getCurrentSubtitle(),this.rmpVAST.loadAds(a)}},{key:"onContentPauseRequested",value:function(){this.videoElement.pause(),this.props.onPause(),this.props.onAdStarted(),this.handler.setState({adPlaying:!0}),navigator.userAgent.includes("PlayStation 5")&&this.handler.props.player&&this.handler.props.player.player_.nexplayer_.shaka_.detach()}},{key:"onContentResumeRequested",value:function(){var e=this;navigator.userAgent.includes("PlayStation 5")?this.reinitializePlayer():(this.handler.setState({adPlaying:!1}),setTimeout(function(){e.videoElement.paused&&(e.handler.props.player.play(),e.props.onPlay(),e.props.onAdEnded())},500))}},{key:"reinitializePlayer",value:function(){var t=this;this.handler.props.player.player_.nexplayer_.shaka_.attach(this.videoElement,!0).then(function(){t.handler.props.player.player_.nexplayer_.shaka_.load(t.props.reinitConfig.url,t.resumePositionAfterDestroyed).then(function(){t.handler.setState({adPlaying:!1}),t.props.onPlay(),t.videoElement.play(),t.props.onAdEnded(),t.resumePositionAfterDestroyed=null;try{t.props.externalSubtitles_&&!t.isLive?Array.isArray(t.props.externalSubtitles_)?t.props.externalSubtitles_.forEach(function(e){t.handler.props.player.player_.nexplayer_.addSubtitle(e).then(function(){t.props.externalSubtitles_[t.subtitleTrack]&&t.props.externalSubtitles_[t.subtitleTrack].src===e.src&&t.props.setTextTrack(t.subtitleTrack)},function(){})}):console.warn("The property externalSubtitles must be an array of objects containing 'src', 'language' and 'callback'"):t.props.setTextTrack(t.subtitleTrack)}catch(e){console.warn("Failed to reattach external subtitles")}})})}},{key:"timeToSeconds",value:function(e){var t;return this.videoInitialTime||this.initialTimeHandler(),"start"===e?this.isLive?this.videoInitialTime:0:"end"===e?this.videoElement.duration-.5:(e=3600*(t=e.split(":"))[0]+60*t[1]+ +t[2],this.isLive&&(e+=this.videoInitialTime),e)}},{key:"removeAndDestroy",value:function(){document.removeEventListener("keydown",this.keyDownBind),document.removeEventListener("executeNewAd",this.executeNewAdBind),this.rmpVAST.contentPlayer.removeEventListener("timeupdate",this.updateAdTimerBind),this.videoElement.removeEventListener("seeking",this.seekingBind),this.videoElement.removeEventListener("loadeddata",this.initialTimeBind),this.videoElement.removeEventListener("timeupdate",this.detectAndExecuteBind),this.videoElement.removeEventListener("onstatechange",this.playerStateHandlerBind),this.adContainer.removeEventListener("adstarted",this.adStartedBind),this.adContainer.removeEventListener("addestroyed",this.adDestroyedBind),this.adContainer.removeEventListener("aderror",this.adErrorBind),this.rmpVAST.removeListeners(),this.rmpVAST.destroy(),this.props.getAdInstance(null)}},{key:"modifyURI",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if("string"==typeof t){var n=e.indexOf(t+"=");if(-1!==n){for(var i,o=n+t.length;o<e.length&&"&"!==e[o];)o++;a?(i=e.split(e.slice(n+t.length+"=".length,o)),e=o===e.length?e+a:i[0]+a+i[1]):r&&(a=e.slice(0,n+t.length+"=".length),i=e.slice(o,e.length),r=e.slice(n+t.length+"=".length,o),e=o===e.length?a+encodeURIComponent(r):a+encodeURIComponent(r)+i)}}else console.warn("The parameter provided is not a string.",void 0===t?"undefined":s(t));return e}},{key:"updateAdTimer",value:function(){var e;this.adBlockStartFired&&(e=Math.floor(this.rmpVAST.getAdRemainingTime()/1e3),this.handler.setState({adRemainingTime:e}))}}]);var d,i=h;function h(e,t,a,r){var n=this;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");if(this.ADS_PARAMS_MAX_LENGTH=100,this.lastAdSameTimeIndex=null,this.lastAdSameTimeIndexAux=null,this.runTimeAds=[],this.subtitleTrack=null,this.timeOffsetAfterSeek=0,this.totalAdsInAdpod=null,this.videoInitialTime=null,this.defaultParams={pauseOnClick:!1,enableVpaid:!0,vpaidSettings:{width:"100%",height:"100%",viewMode:"normal",desiredBitrate:500},maxNumRedirects:30,ajaxTimeout:8e3},this.props=e,this.adsDelay=e.adsDelay,this.adBlockStartFired=!1,this.adsParamsToEncode=e.adsParamsToEncode,this.adURI=e.adURI,this.debug=r,this.defaultParams={pauseOnClick:!1,enableVpaid:e.enableVpaid,vpaidSettings:{width:"100%",height:"100%",viewMode:"normal",desiredBitrate:500},maxNumRedirects:30,ajaxTimeout:8e3},"pal"===e.adsMode&&this.adURI)try{(0,u.generateNonce)().then(function(e){n.adURI+="&paln"+e,n.adsParser=new o.default(n.adURI),n.adsParser.manifestToVMAP().then(function(){var e=new CustomEvent("adpodsinfo",{detail:n.adsParser.vmap.adBreaks});n.playerDiv.dispatchEvent(e),n.resumePosition&&n.seekingHandler({target:{currentTime:n.resumePosition}})})})}catch(e){console.warn("Use the Pal.js Script in order to use it. '//imasdk.googleapis.com/pal/sdkloader/pal.js'")}this.resumePosition=0<e.resumePosition?e.resumePosition:0,this.videoElement=e.videoElement,this.state="",this.playerDiv=e.div,this.adContainer=t,this.handler=a,this.showAdsUI=e.showAdsUI,this.useDefaultControls=e.useDefaultControls,"default"===e.adsMode&&this.adURI&&(this.adsParser=new o.default(this.adURI),this.adsParser.manifestToVMAP().then(function(){var e=new CustomEvent("adpodsinfo",{detail:n.adsParser.vmap.adBreaks});n.playerDiv.dispatchEvent(e),0<n.resumePosition&&n.seekingHandler({target:{currentTime:n.resumePosition}})})),this.playerStateHandlerBind=this.playerStateHandler.bind(this),this.seekingBind=this.seekingHandler.bind(this),this.executeNewAdBind=this.executeNewAd.bind(this),this.initialTimeBind=this.initialTimeHandler.bind(this),this.keyDownBind=this.keyDownHandler.bind(this),this.detectAndExecuteBind=this.detectAndExecute.bind(this),this.updateAdTimerBind=this.updateAdTimer.bind(this),this.adStartedBind=this.adStartedHandler.bind(this),this.adDestroyedBind=this.adDestroyedHandler.bind(this),this.adErrorBind=this.adErrorHandler.bind(this),this.preloadRMPLibrary(),this.rmpVAST.useContentPlayerForAds=!0,this.rmpVAST.contentPlayer.addEventListener("timeupdate",this.updateAdTimerBind),document.addEventListener("executeNewAd",this.executeNewAdBind),this.videoElement.addEventListener("seeking",this.seekingBind),this.videoElement.addEventListener("loadeddata",this.initialTimeBind),this.videoElement.addEventListener("timeupdate",this.detectAndExecuteBind),this.videoElement.addEventListener("onstatechange",this.playerStateHandlerBind),this.useDefaultControls&&!this.showAdsUI&&document.addEventListener("keydown",this.keyDownBind)}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=i(a(190)),s=i(a(571)),c=i(a(575));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var s=e.apply(this,arguments);return new l.default(function(i,o){return function t(e,a){try{var r=s[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return l.default.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}var d,h="vast",p="vmap",f="playlist",a=(r(m,[{key:"requestManifest",value:function(r){return new l.default(function(e,t){var a=new XMLHttpRequest;a.open("GET",r,!0),a.onload=function(){a?200===a.status?e(a):t(a.status):t()},a.send()})}},{key:"manifestToVMAP",value:(d=o(regeneratorRuntime.mark(function e(r){var n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestManifest(r||this.adURI).then(function(e){if(e.responseText.toLowerCase().includes("xmlns:vmap"))o.manifestType=p,o.vmap=new s.default(e.responseXML);else if(e.responseText.includes("<Playlist>"))o.manifestType=f,i=(i=JSON.parse(o.xml2json(o.parseXml(e.responseText),""))).Playlist,Object.keys(i).forEach(function(n){Object.keys(i[n]).forEach(function(e){var t,a,r=new c.default;delete r.adSource.ads,e="Ad"===e?("start"===(t="preroll"===n.toString().toLocaleLowerCase()?"start":i[n]["@timeOffset"])&&(o.hasPreroll=!0),a=i[n][e]["#cdata"],n):(t=i[n][e]["@timeOffset"],a=i[n][e].Ad["#cdata"],n+"-"+(+e+1)),r.setBasicDataForPlaylist(t,a,e,e+"-ads"),o.vmap.adBreaks.push(r)})});else if(e.responseText.includes("VAST")){o.manifestType=h;i=(i=JSON.parse(o.xml2json(o.parseXml(e.responseText),""))).VAST;var i,t=new c.default;t.setBasicDataForVAST(i["@version"],o.adURI);for(var a=0;i.Ad&&a<i.Ad.length;a++)t.getAds().push(i.Ad[a]);o.hasPreroll=!0,r?n=t:o.vmap.adBreaks.push(t)}},function(){console.warn("Failed to request ad")});case 2:if(r)return e.abrupt("return",n);e.next=4;break;case 4:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"xml2json",value:function(e,t){var l={toObj:function(e){var t={};if(1==e.nodeType){if(e.attributes.length)for(var a=0;a<e.attributes.length;a++)t["@"+e.attributes[a].nodeName]=(e.attributes[a].nodeValue||"").toString();if(e.firstChild){for(var r=0,n=0,i=!1,o=e.firstChild;o;o=o.nextSibling)1==o.nodeType?i=!0:3==o.nodeType&&o.nodeValue.match(/[^ \f\n\r\t\v]/)?r++:4==o.nodeType&&n++;if(i)if(r<2&&n<2){l.removeWhite(e);for(o=e.firstChild;o;o=o.nextSibling)3==o.nodeType?t["#text"]=l.escape(o.nodeValue):4==o.nodeType?t["#cdata"]=l.escape(o.nodeValue):t[o.nodeName]?t[o.nodeName]instanceof Array?t[o.nodeName][t[o.nodeName].length]=l.toObj(o):t[o.nodeName]=[t[o.nodeName],l.toObj(o)]:t[o.nodeName]=l.toObj(o)}else e.attributes.length?t["#text"]=l.escape(l.innerXml(e)):t=l.escape(l.innerXml(e));else if(r)e.attributes.length?t["#text"]=l.escape(l.innerXml(e)):t=l.escape(l.innerXml(e));else if(n)if(1<n)t=l.escape(l.innerXml(e));else for(o=e.firstChild;o;o=o.nextSibling)t["#cdata"]=l.escape(o.nodeValue)}e.attributes.length||e.firstChild||(t=null)}else 9==e.nodeType?t=l.toObj(e.documentElement):alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,a){var r=t?'"'+t+'"':"";if(e instanceof Array){for(var n=0,i=e.length;n<i;n++)e[n]=l.toJson(e[n],"",a+"\t");r+=(t?":[":"[")+(1<e.length?"\n"+a+"\t"+e.join(",\n"+a+"\t")+"\n"+a:e.join(""))+"]"}else if(null==e)r+=(t&&":")+"null";else if("object"==(void 0===e?"undefined":u(e))){var o,s=[];for(o in e)s[s.length]=l.toJson(e[o],o,a+"\t");r+=(t?":{":"{")+(1<s.length?"\n"+a+"\t"+s.join(",\n"+a+"\t")+"\n"+a:s.join(""))+"}"}else r+="string"==typeof e?(t&&":")+'"'+e.toString()+'"':(t&&":")+e.toString();return r},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var a=function e(t){var a="";if(1==t.nodeType){a+="<"+t.nodeName;for(var r=0;r<t.attributes.length;r++)a+=" "+t.attributes[r].nodeName+'="'+(t.attributes[r].nodeValue||"").toString()+'"';if(t.firstChild){a+=">";for(var n=t.firstChild;n;n=n.nextSibling)a+=e(n);a+="</"+t.nodeName+">"}else a+="/>"}else 3==t.nodeType?a+=t.nodeValue:4==t.nodeType&&(a+="<![CDATA["+t.nodeValue+"]]>");return a},r=e.firstChild;r;r=r.nextSibling)t+=a(r);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,a=e.firstChild;a;)a=3==a.nodeType?a.nodeValue.match(/[^ \f\n\r\t\v]/)?a.nextSibling:(t=a.nextSibling,e.removeChild(a),t):(1==a.nodeType&&l.removeWhite(a),a.nextSibling);return e}},e=(9==e.nodeType&&(e=e.documentElement),l.toJson(l.toObj(l.removeWhite(e)),e.nodeName,"\t"));return"{\n"+t+(t?e.replace(/\t/g,t):e.replace(/\t|\n/g,""))+"\n}"}},{key:"parseXml",value:function(e){var t=null;if(window.DOMParser)try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=null}else if(window.ActiveXObject)try{(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)||window.alert(t.parseError.reason+t.parseError.srcText)}catch(e){t=null}else alert("cannot parse xml string!");return t}},{key:"getVMAP",value:function(){return this.vmap}},{key:"getHasPreroll",value:function(){return this.hasPreroll}},{key:"getManifestType",value:function(){return this.manifestType}},{key:"getIndexToPlay",value:function(){return this.indexToPlay}},{key:"setIndexToPlay",value:function(e){return this.indexToPlay=e}}]),m);function m(e){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.indexToPlay=0,this.allAdsExecuted=!1,this.vmap={adBreaks:[]},this.adURI=e}t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=a(572),a=(a=a)&&a.__esModule?a:{default:a};t.default=a.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(573),n=(r=r)&&r.__esModule?r:{default:r},i=a(223);t.default=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(!t||!t.documentElement||"VMAP"!==t.documentElement.localName)throw new Error("Not a VMAP document");for(var a in this.version=t.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],t.documentElement.childNodes){var r=t.documentElement.childNodes[a];switch(r.localName){case"AdBreak":this.adBreaks.push(new n.default(r));break;case"Extensions":this.extensions=(0,i.childrenByName)(r,"Extension").map(function(e){return(0,i.parseXMLNode)(e)})}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(574),o=(i=i)&&i.__esModule?i:{default:i},s=a(223);r(l,[{key:"track",value:function(e,t){for(var a in this.trackingEvents){var r,a=this.trackingEvents[a];a.event===e&&(r=a.uri,"error"===a.event&&(r=r.replace("[ERRORCODE]",t)),this.tracker(r))}}},{key:"tracker",value:function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}}]);i=l;function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");for(var t in this.timeOffset=e.getAttribute("timeOffset"),this.breakType=e.getAttribute("breakType"),this.breakId=e.getAttribute("breakId"),this.repeatAfter=e.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],e.childNodes){var a=e.childNodes[t];switch(a.localName){case"AdSource":this.adSource=new o.default(a);break;case"TrackingEvents":for(var r in a.childNodes){r=a.childNodes[r];"Tracking"===r.localName&&this.trackingEvents.push({event:r.getAttribute("event"),uri:(r.textContent||r.text||"").trim()})}break;case"Extensions":this.extensions=(0,s.childrenByName)(a,"Extension").map(function(e){return(0,s.parseXMLNode)(e)})}}}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");for(var a in this.id=t.getAttribute("id"),this.allowMultipleAds=t.getAttribute("allowMultipleAds"),this.followRedirects=t.getAttribute("followRedirects"),this.vastAdData=null,this.adTagURI=null,this.customData=null,t.childNodes){var r=t.childNodes[a];switch(r.localName){case"AdTagURI":this.adTagURI={templateType:r.getAttribute("templateType"),uri:(r.textContent||r.text||"").trim()};break;case"VASTAdData":for(this.vastAdData=r.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":this.customData=r}}}},function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.adSource={adTagURI:{templateType:null,uri:null},ads:[],allowMultipleAds:null,customData:null,followRedirects:null,id:null,vastAdData:null},this.extensions=[],this.executed=!1,this.trackingEvents=[]}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(n,[{key:"setBasicDataForVAST",value:function(e,t){this.setTimeOffset("start"),this.setId("preroll-ads"),this.setBreakId("preroll"),this.setAllowMultipleAds("true"),this.setFollowRedirects("true"),this.setTemplateType(e),this.setUri(t),this.setExecuted(!1)}},{key:"setBasicDataForPlaylist",value:function(e,t,a,r){this.setTimeOffset(e),this.setAllowMultipleAds("true"),this.setFollowRedirects("true"),this.setUri(t),this.setExecuted(!1),this.setBreakId(a),this.setId(r)}},{key:"getTimeOffset",value:function(){return this.timeOffset}},{key:"getBreakType",value:function(){return this.breakType}},{key:"getBreakId",value:function(){return this.breakId}},{key:"getRepeatAfter",value:function(){return this.repeatAfter}},{key:"getAdSource",value:function(){return this.adSource}},{key:"getId",value:function(){return this.adSource.id}},{key:"getAllowMultipleAds",value:function(){return this.adSource.allowMultipleAds}},{key:"getFollowRedirects",value:function(){return this.adSource.followRedirects}},{key:"getVastAdData",value:function(){return this.adSource.vastAdData}},{key:"getAdTagURI",value:function(){return this.adSource.adTagURI}},{key:"getTemplateType",value:function(){return this.adSource.adTagURI.templateType}},{key:"getUri",value:function(){return this.adSource.adTagURI.uri}},{key:"getCustomData",value:function(){return this.adSource.customData}},{key:"getAds",value:function(){return this.adSource.ads}},{key:"getTrackingEvents",value:function(){return this.trackingEvents}},{key:"getExtensions",value:function(){return this.extensions}},{key:"getExecuted",value:function(){return this.executed}},{key:"setTimeOffset",value:function(e){this.timeOffset=e}},{key:"setBreakType",value:function(e){this.breakType=e}},{key:"setBreakId",value:function(e){this.breakId=e.toLocaleLowerCase()}},{key:"setRepeatAfter",value:function(e){this.repeatAfter=e}},{key:"setAdSource",value:function(e){this.adSource=e}},{key:"setId",value:function(e){this.adSource.id=e.toLocaleLowerCase()}},{key:"setAllowMultipleAds",value:function(e){this.adSource.allowMultipleAds=e}},{key:"setFollowRedirects",value:function(e){this.adSource.followRedirects=e}},{key:"setVastAdData",value:function(e){this.adSource.vastAdData=e}},{key:"setAdTagURI",value:function(e){this.adSource.adTagURI=e}},{key:"setTemplateType",value:function(e){this.adSource.adTagURI.templateType=e}},{key:"setUri",value:function(e){this.adSource.adTagURI.uri=e}},{key:"setCustomData",value:function(e){this.adSource.customData=e}},{key:"setAds",value:function(e){this.adSource.ads=e}},{key:"setTrackingEvents",value:function(e){this.trackingEvents=e}},{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setExecuted",value:function(e){this.executed=e}}]),t.default=n},function(e,a,t){"use strict";!function(e){var t,lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};self,t=function(){var O={7757:function(e,t,a){e.exports=a(5666)},4963:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},7722:function(e,t,a){var r=a(6314)("unscopables"),n=Array.prototype;null==n[r]&&a(7728)(n,r,{}),e.exports=function(e){n[r][e]=!0}},6793:function(e,t,a){var r=a(4496)(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},3328:function(e){e.exports=function(e,t,a,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(a+": incorrect invocation!");return e}},7007:function(e,t,a){var r=a(5286);e.exports=function(e){if(r(e))return e;throw TypeError(e+" is not an object!")}},9315:function(e,t,a){var l=a(2110),u=a(875),c=a(2337);e.exports=function(s){return function(e,t,a){var r,n=l(e),i=u(n.length),o=c(a,i);if(s&&t!=t){for(;o<i;)if((r=n[o++])!=r)return!0}else for(;o<i;o++)if((s||o in n)&&n[o]===t)return s||o||0;return!s&&-1}}},50:function(e,t,a){var _=a(741),k=a(9797),b=a(508),S=a(875),r=a(6886);e.exports=function(d,e){var h=1==d,p=2==d,f=3==d,m=4==d,g=6==d,y=5==d||g,v=e||r;return function(e,t,a){for(var r,n,i=b(e),o=k(i),s=_(t,a,3),l=S(o.length),u=0,c=h?v(e,l):p?v(e,0):void 0;u<l;u++)if((y||u in o)&&(n=s(r=o[u],u,i),d))if(h)c[u]=n;else if(n)switch(d){case 3:return!0;case 5:return r;case 6:return u;case 2:c.push(r)}else if(m)return!1;return g?-1:f||m?m:c}}},2736:function(e,t,a){var r=a(5286),n=a(4302),i=a(6314)("species");e.exports=function(e){var t;return void 0===(t=n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),r(t))&&null===(t=t[i])?void 0:t)?Array:t}},6886:function(e,t,a){var r=a(2736);e.exports=function(e,t){return new(r(e))(t)}},1488:function(e,t,a){var r=a(2032),n=a(6314)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),n))?t:i?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t}},2032:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5645:function(e){e=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},741:function(e,t,a){var i=a(4963);e.exports=function(r,n,e){if(i(r),void 0===n)return r;switch(e){case 1:return function(e){return r.call(n,e)};case 2:return function(e,t){return r.call(n,e,t)};case 3:return function(e,t,a){return r.call(n,e,t,a)}}return function(){return r.apply(n,arguments)}}},1355:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7057:function(e,t,a){e.exports=!a(4253)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},2457:function(e,t,a){var r=a(5286),n=a(3816).document,i=r(n)&&r(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},4430:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2985:function(e,t,a){function p(e,t,a){var r,n,i,o=e&p.F,s=e&p.G,l=e&p.P,u=e&p.B,c=s?f:e&p.S?f[t]||(f[t]={}):(f[t]||{}).prototype,d=s?m:m[t]||(m[t]={}),h=d.prototype||(d.prototype={});for(r in a=s?t:a)n=((i=!o&&c&&void 0!==c[r])?c:a)[r],i=u&&i?v(n,f):l&&"function"==typeof n?v(Function.call,n):n,c&&y(c,r,n,e&p.U),d[r]!=n&&g(d,r,i),l&&h[r]!=n&&(h[r]=n)}var f=a(3816),m=a(5645),g=a(7728),y=a(7234),v=a(741);f.core=m,p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128,e.exports=p},8852:function(e,t,a){var r=a(6314)("match");e.exports=function(t){var a=/./;try{"/./"[t](a)}catch(e){try{return a[r]=!1,!"/./"[t](a)}catch(t){}}return!0}},4253:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8082:function(e,t,a){a(8269);var r,l=a(7234),u=a(7728),c=a(4253),d=a(1355),h=a(6314),p=a(1165),f=h("species"),m=!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),g=(r=(a=/(?:)/).exec,a.exec=function(){return r.apply(this,arguments)},2===(a="ab".split(a)).length&&"a"===a[0]&&"b"===a[1]);e.exports=function(a,e,t){var i,r,n=h(a),o=!c(function(){var e={};return e[n]=function(){return 7},7!=""[a](e)}),s=o?!c(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===a&&(t.constructor={},t.constructor[f]=function(){return t}),t[n](""),!e}):void 0;o&&s&&("replace"!==a||m)&&("split"!==a||g)||(i=/./[n],t=(s=t(d,n,""[a],function(e,t,a,r,n){return t.exec===p?o&&!n?{done:!0,value:i.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}))[0],r=s[1],l(String.prototype,a,t),u(RegExp.prototype,n,2==e?function(e,t){return r.call(e,this,t)}:function(e){return r.call(e,this)}))}},3218:function(e,t,a){var r=a(7007);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},3531:function(e,t,a){var d=a(741),h=a(8851),p=a(6555),f=a(7007),m=a(875),g=a(9002),y={},v={},a=e.exports=function(e,t,a,r,n){var i,o,s,l,n=n?function(){return e}:g(e),u=d(a,r,t?2:1),c=0;if("function"!=typeof n)throw TypeError(e+" is not iterable!");if(p(n)){for(i=m(e.length);c<i;c++)if((l=t?u(f(o=e[c])[0],o[1]):u(e[c]))===y||l===v)return l}else for(s=n.call(e);!(o=s.next()).done;)if((l=h(s,u,o.value,t))===y||l===v)return l};a.BREAK=y,a.RETURN=v},18:function(e,t,a){e.exports=a(3825)("native-function-to-string",Function.toString)},3816:function(e){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},9181:function(e){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},7728:function(e,t,a){var r=a(9275),n=a(681);e.exports=a(7057)?function(e,t,a){return r.f(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},639:function(e,t,a){a=a(3816).document;e.exports=a&&a.documentElement},1734:function(e,t,a){e.exports=!a(7057)&&!a(4253)(function(){return 7!=Object.defineProperty(a(2457)("div"),"a",{get:function(){return 7}}).a})},266:function(e,t,a){var r=a(5286),n=a(7375).set;e.exports=function(e,t,a){var t=t.constructor;return t!==a&&"function"==typeof t&&(t=t.prototype)!==a.prototype&&r(t)&&n&&n(e,t),e}},7242:function(e){e.exports=function(e,t,a){var r=void 0===a;switch(t.length){case 0:return r?e():e.call(a);case 1:return r?e(t[0]):e.call(a,t[0]);case 2:return r?e(t[0],t[1]):e.call(a,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(a,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(a,t[0],t[1],t[2],t[3])}return e.apply(a,t)}},9797:function(e,t,a){var r=a(2032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},6555:function(e,t,a){var r=a(2803),n=a(6314)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[n]===e)}},4302:function(e,t,a){var r=a(2032);e.exports=Array.isArray||function(e){return"Array"==r(e)}},5286:function(e){e.exports=function(e){return"object"==(void 0===e?"undefined":lt(e))?null!==e:"function"==typeof e}},5364:function(e,t,a){var r=a(5286),n=a(2032),i=a(6314)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},8851:function(e,t,a){var n=a(7007);e.exports=function(e,t,a,r){try{return r?t(n(a)[0],a[1]):t(a)}catch(t){r=e.return;throw void 0!==r&&n(r.call(e)),t}}},9988:function(e,t,a){var r=a(2503),n=a(681),i=a(2943),o={};a(7728)(o,a(6314)("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=r(o,{next:n(1,a)}),i(e,t+" Iterator")}},2923:function(e,t,a){function y(){return this}var v=a(4461),_=a(2985),k=a(7234),b=a(7728),S=a(2803),E=a(9988),T=a(2943),x=a(468),A=a(6314)("iterator"),P=!([].keys&&"next"in[].keys()),C="values";e.exports=function(e,t,a,r,n,i,o){E(a,t,r);function s(e){if(!P&&e in h)return h[e];switch(e){case"keys":case C:return function(){return new a(this,e)}}return function(){return new a(this,e)}}var l,u,r=t+" Iterator",c=n==C,d=!1,h=e.prototype,p=h[A]||h["@@iterator"]||n&&h[n],f=p||s(n),m=n?c?s("entries"):f:void 0,g="Array"==t&&h.entries||p;if(g&&(g=x(g.call(new e)))!==Object.prototype&&g.next&&(T(g,r,!0),v||"function"==typeof g[A]||b(g,A,y)),c&&p&&p.name!==C&&(d=!0,f=function(){return p.call(this)}),v&&!o||!P&&!d&&h[A]||b(h,A,f),S[t]=f,S[r]=y,n)if(l={values:c?f:s(C),keys:i?f:s("keys"),entries:m},o)for(u in l)u in h||k(h,u,l[u]);else _(_.P+_.F*(P||d),t,l);return l}},7462:function(e,t,a){var i=a(6314)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var a=!1;try{var r=[7],n=r[i]();n.next=function(){return{done:a=!0}},r[i]=function(){return n},e(r)}catch(e){}return a}},5436:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},2803:function(e){e.exports={}},4461:function(e){e.exports=!1},4351:function(e,t,a){var s=a(3816),l=a(4193).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,d=s.Promise,h="process"==a(2032)(c);e.exports=function(){function e(){var e,t;for(h&&(e=c.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(e){throw a?n():r=void 0,e}}r=void 0,e&&e.enter()}var a,r,t,n,i,o;return n=h?function(){c.nextTick(e)}:!u||s.navigator&&s.navigator.standalone?d&&d.resolve?(t=d.resolve(void 0),function(){t.then(e)}):function(){l.call(s,e)}:(i=!0,o=document.createTextNode(""),new u(e).observe(o,{characterData:!0}),function(){o.data=i=!i}),function(e){e={fn:e,next:void 0};r&&(r.next=e),a||(a=e,n()),r=e}}},3499:function(e,t,a){var n=a(4963);function r(e){var a,r;this.promise=new e(function(e,t){if(void 0!==a||void 0!==r)throw TypeError("Bad Promise constructor");a=e,r=t}),this.resolve=n(a),this.reject=n(r)}e.exports.f=function(e){return new r(e)}},5345:function(e,t,a){var h=a(7057),p=a(7184),f=a(4548),m=a(4682),g=a(508),y=a(9797),n=Object.assign;e.exports=!n||a(4253)(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=n({},e)[a]||Object.keys(n({},t)).join("")!=r})?function(e,t){for(var a=g(e),r=arguments.length,n=1,i=f.f,o=m.f;n<r;)for(var s,l=y(arguments[n++]),u=i?p(l).concat(i(l)):p(l),c=u.length,d=0;d<c;)s=u[d++],h&&!o.call(l,s)||(a[s]=l[s]);return a}:n},2503:function(e,t,a){function r(){}var n=a(7007),i=a(5588),o=a(4430),s=a(9335)("IE_PROTO"),l=function(){var e=a(2457)("iframe"),t=o.length;for(e.style.display="none",a(639).appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;t--;)delete l.prototype[o[t]];return l()};e.exports=Object.create||function(e,t){var a;return null!==e?(r.prototype=n(e),a=new r,r.prototype=null,a[s]=e):a=l(),void 0===t?a:i(a,t)}},9275:function(e,t,a){var r=a(7007),n=a(1734),i=a(1689),o=Object.defineProperty;t.f=a(7057)?Object.defineProperty:function(e,t,a){if(r(e),t=i(t,!0),r(a),n)try{return o(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},5588:function(e,t,a){var o=a(9275),s=a(7007),l=a(7184);e.exports=a(7057)?Object.defineProperties:function(e,t){s(e);for(var a,r=l(t),n=r.length,i=0;i<n;)o.f(e,a=r[i++],t[a]);return e}},8693:function(e,t,a){var r=a(4682),n=a(681),i=a(2110),o=a(1689),s=a(9181),l=a(1734),u=Object.getOwnPropertyDescriptor;t.f=a(7057)?u:function(e,t){if(e=i(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},9327:function(e,t,a){var r=a(2110),n=a(616).f,i={}.toString,o="object"==("undefined"==typeof window?"undefined":lt(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!o||"[object Window]"!=i.call(e))return n(r(e));var t=e;try{return n(t)}catch(t){return o.slice()}}},616:function(e,t,a){var r=a(189),n=a(4430).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},4548:function(e,t){t.f=Object.getOwnPropertySymbols},468:function(e,t,a){var r=a(9181),n=a(508),i=a(9335)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},189:function(e,t,a){var o=a(9181),s=a(2110),l=a(9315)(!1),u=a(9335)("IE_PROTO");e.exports=function(e,t){var a,r=s(e),n=0,i=[];for(a in r)a!=u&&o(r,a)&&i.push(a);for(;t.length>n;)!o(r,a=t[n++])||~l(i,a)||i.push(a);return i}},7184:function(e,t,a){var r=a(189),n=a(4430);e.exports=Object.keys||function(e){return r(e,n)}},4682:function(e,t){t.f={}.propertyIsEnumerable},3160:function(e,t,a){var n=a(2985),i=a(5645),o=a(4253);e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],r={};r[e]=t(a),n(n.S+n.F*o(function(){a(1)}),"Object",r)}},188:function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},94:function(e,t,a){var r=a(7007),n=a(5286),i=a(3499);e.exports=function(e,t){return r(e),n(t)&&t.constructor===e?t:((0,(e=i.f(e)).resolve)(t),e.promise)}},681:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4408:function(e,t,a){var n=a(7234);e.exports=function(e,t,a){for(var r in t)n(e,r,t[r],a);return e}},7234:function(e,t,a){var i=a(3816),o=a(7728),s=a(9181),l=a(3953)("src"),r=a(18),u=(""+r).split("toString");a(5645).inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,a,r){var n="function"==typeof a;n&&!s(a,"name")&&o(a,"name",t),e[t]!==a&&(n&&!s(a,l)&&o(a,l,e[t]?""+e[t]:u.join(String(t))),e===i?e[t]=a:r?e[t]?e[t]=a:o(e,t,a):(delete e[t],o(e,t,a)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[l]||r.call(this)})},7787:function(e,t,a){var r=a(1488),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"==typeof a){a=a.call(e,t);if("object"!=(void 0===a?"undefined":lt(a)))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},1165:function(e,t,a){var r,n,o=a(3218),s=RegExp.prototype.exec,l=String.prototype.replace,a=s,u=(n=/b*/g,s.call(r=/a/,"a"),s.call(n,"a"),0!==r.lastIndex||0!==n.lastIndex),c=void 0!==/()??/.exec("")[1];e.exports=a=u||c?function(e){var t,a,r,n,i=this;return c&&(a=new RegExp("^"+i.source+"$(?!\\s)",o.call(i))),u&&(t=i.lastIndex),r=s.call(i,e),u&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),c&&r&&1<r.length&&l.call(r[0],a,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)}),r}:a},7375:function(e,t,n){function i(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var a=n(5286),r=n(7007);e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,a,r){try{(r=n(741)(Function.call,n(8693).f(Object.prototype,"__proto__").set,2))(e,[]),a=!(e instanceof Array)}catch(e){a=!0}return function(e,t){return i(e,t),a?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:i}},2974:function(e,t,a){var r=a(3816),n=a(9275),i=a(7057),o=a(6314)("species");e.exports=function(e){e=r[e];i&&e&&!e[o]&&n.f(e,o,{configurable:!0,get:function(){return this}})}},2943:function(e,t,a){var r=a(9275).f,n=a(9181),i=a(6314)("toStringTag");e.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},9335:function(e,t,a){var r=a(3825)("keys"),n=a(3953);e.exports=function(e){return r[e]||(r[e]=n(e))}},3825:function(e,t,a){var r=a(5645),n=a(3816),i="__core-js_shared__",o=n[i]||(n[i]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:a(4461)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},8364:function(e,t,a){var r=a(7007),n=a(4963),i=a(6314)("species");e.exports=function(e,t){var e=r(e).constructor;return void 0===e||null==(e=r(e)[i])?t:n(e)}},7717:function(e,t,a){var r=a(4253);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},4496:function(e,t,a){var i=a(1467),o=a(1355);e.exports=function(n){return function(e,t){var a,e=String(o(e)),t=i(t),r=e.length;return t<0||r<=t?n?"":void 0:(a=e.charCodeAt(t))<55296||56319<a||t+1===r||(r=e.charCodeAt(t+1))<56320||57343<r?n?e.charAt(t):a:n?e.slice(t,t+2):r-56320+(a-55296<<10)+65536}}},2094:function(e,t,a){var r=a(5364),n=a(1355);e.exports=function(e,t,a){if(r(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(e))}},9599:function(e,t,a){function r(e,t,a){var r={},n=o(function(){return!!s[e]()||""!=""[e]()}),t=r[e]=n?t(c):s[e];a&&(r[a]=t),i(i.P+i.F*n,"String",r)}var i=a(2985),n=a(1355),o=a(4253),s=a(4644),a="["+s+"]",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),c=r.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(l,"")),e=2&t?e.replace(u,""):e};e.exports=r},4644:function(e){e.exports="\t\n\v\f\r   \u2028\u2029\ufeff"},4193:function(e,t,a){function r(){var e,t=+this;y.hasOwnProperty(t)&&(e=y[t],delete y[t],e())}function n(e){r.call(e.data)}var i,o=a(741),s=a(7242),l=a(639),u=a(2457),c=a(3816),d=c.process,h=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,g=0,y={};h&&p||(h=function(e){for(var t=[],a=1;a<arguments.length;)t.push(arguments[a++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete y[e]},"process"==a(2032)(d)?i=function(e){d.nextTick(o(r,e,1))}:m&&m.now?i=function(e){m.now(o(r,e,1))}:f?(f=(a=new f).port2,a.port1.onmessage=n,i=o(f.postMessage,f,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",n,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),r.call(e)}}:function(e){setTimeout(o(r,e,1),0)}),e.exports={set:h,clear:p}},2337:function(e,t,a){var r=a(1467),n=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?n(e+t,0):i(e,t)}},1467:function(e){var t=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?a:t)(e)}},2110:function(e,t,a){var r=a(9797),n=a(1355);e.exports=function(e){return r(n(e))}},875:function(e,t,a){var r=a(1467),n=Math.min;e.exports=function(e){return 0<e?n(r(e),9007199254740991):0}},508:function(e,t,a){var r=a(1355);e.exports=function(e){return Object(r(e))}},1689:function(e,t,a){var n=a(5286);e.exports=function(e,t){if(!n(e))return e;var a,r;if(t&&"function"==typeof(a=e.toString)&&!n(r=a.call(e))||"function"==typeof(a=e.valueOf)&&!n(r=a.call(e))||!t&&"function"==typeof(a=e.toString)&&!n(r=a.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},3953:function(e){var t=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+a).toString(36))}},575:function(e,t,a){a=a(3816).navigator;e.exports=a&&a.userAgent||""},6314:function(e,t,a){var r=a(3825)("wks"),n=a(3953),i=a(3816).Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:n)("Symbol."+e))}).store=r},9002:function(e,t,a){var r=a(1488),n=a(6314)("iterator"),i=a(2803);e.exports=a(5645).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[r(e)]}},8837:function(e,t,a){var r=a(2985),n=a(50)(2);r(r.P+r.F*!a(7717)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},6997:function(e,t,a){var r=a(7722),n=a(5436),i=a(2803),o=a(2110);e.exports=a(2923)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?a:"values"==t?e[a]:[a,e[a]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},9371:function(e,t,a){var r=a(2985),n=a(50)(1);r(r.P+r.F*!a(7717)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},110:function(e,t,a){var r=a(2985),n=a(639),l=a(2032),u=a(2337),c=a(875),d=[].slice;r(r.P+r.F*a(4253)(function(){n&&d.call(n)}),"Array",{slice:function(e,t){var a=c(this.length),r=l(this);if(t=void 0===t?a:t,"Array"==r)return d.call(this,e,t);for(var n=u(e,a),e=u(t,a),i=c(e-n),o=new Array(i),s=0;s<i;s++)o[s]="String"==r?this.charAt(n+s):this[n+s];return o}})},75:function(e,t,a){var r=a(2985),n=a(4963),i=a(508),o=a(4253),s=[].sort,l=[1,2,3];r(r.P+r.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a(7717)(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),n(e))}})},6059:function(e,t,a){var r=a(9275).f,n=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in n||a(7057)&&r(n,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},1246:function(e,t,a){function r(e){var t=u(e,!1);if("string"==typeof t&&2<t.length){var a,r,n,e=(t=v?t.trim():p(t,3)).charCodeAt(0);if(43===e||45===e){if(88===(a=t.charCodeAt(2))||120===a)return NaN}else if(48===e){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var i,o=t.slice(2),s=0,l=o.length;s<l;s++)if((i=o.charCodeAt(s))<48||n<i)return NaN;return parseInt(o,r)}}return+t}var n=a(3816),i=a(9181),o=a(2032),s=a(266),u=a(1689),l=a(4253),c=a(616).f,d=a(8693).f,h=a(9275).f,p=a(9599).trim,f="Number",m=k=n.Number,g=k.prototype,y=o(a(2503)(g))==f,v="trim"in String.prototype;if(!k(" 0o1")||!k("0b1")||k("+0x1")){for(var _,k=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof k&&(y?l(function(){g.valueOf.call(t)}):o(t)!=f)?s(new m(r(e)),t,k):r(e)},b=a(7057)?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;b.length>S;S++)i(m,_=b[S])&&!i(k,_)&&h(k,_,d(m,_));(k.prototype=g).constructor=k,a(7234)(n,f,k)}},3403:function(e,t,a){var r=a(2985),n=a(3816).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},5115:function(e,t,a){var r=a(2985);r(r.S+r.F,"Object",{assign:a(5345)})},9622:function(e,t,a){a(3160)("getOwnPropertyNames",function(){return a(9327).f})},7476:function(e,t,a){var r=a(508),n=a(7184);a(3160)("keys",function(){return function(e){return n(r(e))}})},6253:function(e,t,a){var r=a(1488),n={};n[a(6314)("toStringTag")]="z",n+""!="[object z]"&&a(7234)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},851:function(O,U,a){function r(){}function f(n){_.call(u,function(){var e,t,a=n._v,r=N(n);if(r&&(e=S(function(){M?P.emit("unhandledRejection",a,n):(t=u.onunhandledrejection)?t({promise:n,reason:a}):(t=u.console)&&t.error&&t.error("Unhandled promise rejection",a)}),n._h=M||N(n)?2:1),n._a=void 0,r&&e.e)throw e.v})}function m(t){_.call(u,function(){var e;M?P.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})}function n(e){var a,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw A("Promise can't be resolved itself");(a=R(e))?k(function(){var t={_w:r,_d:!1};try{a.call(e,c(n,t,1),c(L,t,1))}catch(e){L.call(t,e)}}):(r._v=e,r._s=1,D(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}}var t,i,o,s,l=a(4461),u=a(3816),c=a(741),e=a(1488),d=a(2985),h=a(5286),p=a(4963),g=a(3328),y=a(3531),v=a(8364),_=a(4193).set,k=a(4351)(),b=a(3499),S=a(188),E=a(575),T=a(94),x="Promise",A=u.TypeError,P=u.process,C=P&&P.versions,B=C&&C.v8||"",w=u.Promise,M="process"==e(P),I=i=b.f,C=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[a(6314)("species")]=function(e){e(r,r)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(r)instanceof t&&0!==B.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(d,h){var p;d._n||(d._n=!0,p=d._c,k(function(){for(var e=d._v,t=1==d._s,a=0;p.length>a;){c=u=l=s=n=r=i=void 0;var r,n,i,o=p[a++],s=t?o.ok:o.fail,l=o.resolve,u=o.reject,c=o.domain;try{s?(t||(2==d._h&&m(d),d._h=1),!0===s?r=e:(c&&c.enter(),r=s(e),c&&(c.exit(),i=!0)),r===o.promise?u(A("Promise-chain cycle")):(n=R(r))?n.call(r,l,u):l(r)):u(e)}catch(e){c&&!i&&c.exit(),u(e)}}d._c=[],d._n=!1,h&&!d._h&&f(d)}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))};C||(w=function(e){g(this,w,x,"_h"),p(e),t.call(this);try{e(c(n,this,1),c(L,this,1))}catch(e){L.call(this,e)}},(t=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=a(4408)(w.prototype,{then:function(e,t){var a=I(v(this,w));return a.ok="function"!=typeof e||e,a.fail="function"==typeof t&&t,a.domain=M?P.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&D(this,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new t;this.promise=e,this.resolve=c(n,e,1),this.reject=c(L,e,1)},b.f=I=function(e){return e===w||e===s?new o:i(e)}),d(d.G+d.W+d.F*!C,{Promise:w}),a(2943)(w,x),a(2974)(x),s=a(5645).Promise,d(d.S+d.F*!C,x,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(l||!C),x,{resolve:function(e){return T(l&&this===s?w:this,e)}}),d(d.S+d.F*!(C&&a(7462)(function(e){w.all(e).catch(r)})),x,{all:function(e){var o=this,t=I(o),s=t.resolve,l=t.reject,a=S(function(){var r=[],n=0,i=1;y(e,!1,function(e){var t=n++,a=!1;r.push(void 0),i++,o.resolve(e).then(function(e){a||(a=!0,r[t]=e,--i)||s(r)},l)}),--i||s(r)});return a.e&&l(a.v),t.promise},race:function(e){var t=this,a=I(t),r=a.reject,n=S(function(){y(e,!1,function(e){t.resolve(e).then(a.resolve,r)})});return n.e&&r(n.v),a.promise}})},3946:function(e,t,a){var r=a(3816),i=a(266),n=a(9275).f,o=a(616).f,s=a(5364),l=a(3218),u=f=r.RegExp,c=f.prototype,d=/a/g,h=/a/g,p=new f(d)!==d;if(a(7057)&&(!p||a(4253)(function(){return h[a(6314)("match")]=!1,f(d)!=d||f(h)==h||"/a/i"!=f(d,"i")}))){for(var f=function(e,t){var a=this instanceof f,r=s(e),n=void 0===t;return!a&&r&&e.constructor===f&&n?e:i(p?new u(r&&!n?e.source:e,t):u((r=e instanceof f)?e.source:e,r&&n?l.call(e):t),a?this:c,f)},m=o(u),g=0;m.length>g;)!function(t){t in f||n(f,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})}(m[g++]);(c.constructor=f).prototype=c,a(7234)(r,"RegExp",f)}a(2974)("RegExp")},8269:function(e,t,a){var r=a(1165);a(2985)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},6774:function(e,t,a){a(7057)&&"g"!=/./g.flags&&a(9275).f(RegExp.prototype,"flags",{configurable:!0,get:a(3218)})},1466:function(e,t,a){var c=a(7007),d=a(875),h=a(6793),p=a(7787);a(8082)("match",1,function(r,n,l,u){return[function(e){var t=r(this),a=null==e?void 0:e[n];return void 0!==a?a.call(e,t):new RegExp(e)[n](String(t))},function(e){var t=u(l,e,this);if(t.done)return t.value;var a=c(e),r=String(this);if(!a.global)return p(a,r);for(var n=a.unicode,i=[],o=a.lastIndex=0;null!==(s=p(a,r));){var s=String(s[0]);""===(i[o]=s)&&(a.lastIndex=h(r,d(a.lastIndex),n)),o++}return 0===o?null:i}]})},9357:function(e,t,a){var S=a(7007),E=a(508),T=a(875),x=a(1467),A=a(6793),P=a(7787),C=Math.max,w=Math.min,M=Math.floor,I=/\$([$&`']|\d\d?|<[^>]*>)/g,R=/\$([$&`']|\d\d?)/g;a(8082)("replace",2,function(n,i,k,b){return[function(e,t){var a=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,a,t):k.call(String(a),e,t)},function(e,t){var a=b(k,e,this,t);if(a.done)return a.value;var r,n=S(e),i=String(this),o="function"==typeof t,s=(o||(t=String(t)),n.global);s&&(r=n.unicode,n.lastIndex=0);for(var l=[];;){var u=P(n,i);if(null===u)break;if(l.push(u),!s)break;""===String(u[0])&&(n.lastIndex=A(i,T(n.lastIndex),r))}for(var c,d="",h=0,p=0;p<l.length;p++){for(var u=l[p],f=String(u[0]),m=C(w(x(u.index),i.length),0),g=[],y=1;y<u.length;y++)g.push(void 0===(c=u[y])?c:String(c));var v=u.groups,_=o?(_=[f].concat(g,m,i),void 0!==v&&_.push(v),String(t.apply(void 0,_))):function(i,o,s,l,u,e){var c=s+i.length,d=l.length,t=R;return void 0!==u&&(u=E(u),t=I),k.call(e,t,function(e,t){var a;switch(t.charAt(0)){case"$":return"$";case"&":return i;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":a=u[t.slice(1,-1)];break;default:var r,n=+t;if(0==n)return e;if(d<n)return 0!==(r=M(n/10))&&r<=d?void 0===l[r-1]?t.charAt(1):l[r-1]+t.charAt(1):e;a=l[n-1]}return void 0===a?"":a})}(f,i,m,g,v,t);h<=m&&(d+=i.slice(h,m)+_,h=m+f.length)}return d+i.slice(h)}]})},1876:function(e,t,a){var d=a(5364),y=a(7007),v=a(8364),_=a(6793),k=a(875),b=a(7787),h=a(1165),r=a(4253),S=Math.min,p=[].push,E=4294967295,T=!r(function(){RegExp(E,"y")});a(8082)("split",2,function(n,i,f,m){var g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!d(e))return f.call(a,e,t);for(var r,n,i,o=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,u=void 0===t?E:t>>>0,c=new RegExp(e.source,s+"g");(r=h.call(c,a))&&!((n=c.lastIndex)>l&&(o.push(a.slice(l,r.index)),1<r.length&&r.index<a.length&&p.apply(o,r.slice(1)),i=r[0].length,l=n,u<=o.length));)c.lastIndex===r.index&&c.lastIndex++;return l===a.length?!i&&c.test("")||o.push(""):o.push(a.slice(l)),u<o.length?o.slice(0,u):o}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:f.call(this,e,t)}:f;return[function(e,t){var a=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,a,t):g.call(String(a),e,t)},function(e,t){var a=m(g,e,this,t,g!==f);if(a.done)return a.value;var a=y(e),r=String(this),e=v(a,RegExp),n=a.unicode,i=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(T?"y":"g"),o=new e(T?a:"^(?:"+a.source+")",i),s=void 0===t?E:t>>>0;if(0==s)return[];if(0===r.length)return null===b(o,r)?[r]:[];for(var l=0,u=0,c=[];u<r.length;){o.lastIndex=T?u:0;var d,h=b(o,T?r:r.slice(u));if(null===h||(d=S(k(o.lastIndex+(T?0:u)),r.length))===l)u=_(r,u,n);else{if(c.push(r.slice(l,u)),c.length===s)return c;for(var p=1;p<=h.length-1;p++)if(c.push(h[p]),c.length===s)return c;u=l=d}}return c.push(r.slice(l)),c}]})},6108:function(e,t,a){a(6774);function r(e){a(7234)(RegExp.prototype,"toString",e,!0)}var n=a(7007),i=a(3218),o=a(7057),s=/./.toString;a(4253)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?r(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=s.name&&r(function(){return s.call(this)})},2850:function(e,t,a){var r=a(2985),n=a(2094);r(r.P+r.F*a(8852)("includes"),"String",{includes:function(e){return!!~n(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},9115:function(e,t,a){var r=a(4496)(!0);a(2923)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(e=r(e,t),this._i+=e.length,{value:e,done:!1})})},2773:function(e,t,a){var r=a(2985),n=a(9315)(!0);r(r.P,"Array",{includes:function(e){return n(this,e,1<arguments.length?arguments[1]:void 0)}}),a(7722)("includes")},1181:function(e,t,a){for(var r=a(6997),n=a(7184),i=a(7234),o=a(3816),s=a(7728),l=a(2803),a=a(6314),u=a("iterator"),c=a("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(h),f=0;f<p.length;f++){var m,g=p[f],y=h[g],v=o[g],_=v&&v.prototype;if(_&&(_[u]||s(_,u,d),_[c]||s(_,c,g),l[g]=d,y))for(m in r)_[m]||i(_,m,r[m],!0)}},5666:function(e){var t=function(o){var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(o){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var n,i,o,s,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new x(r||[]);return t._invoke=(n=e,i=a,o=r,s=d,function(e,t){if(s===p)throw new Error("Generator is already running");if(s===f){if("throw"===e)throw t;return P()}for(o.method=e,o.arg=t;;){var a=o.delegate;if(a){a=function e(t,a){var r=t.iterator[a.method];if(r===l){if(a.delegate=null,"throw"===a.method){if(t.iterator.return&&(a.method="return",a.arg=l,e(t,a),"throw"===a.method))return m;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}r=c(r,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,m;r=r.arg;return r?r.done?(a[t.resultName]=r.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=l),a.delegate=null,m):r:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,m)}(a,o);if(a){if(a===m)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===d)throw s=f,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=p;a=c(n,i,o);if("normal"===a.type){if(s=o.done?f:h,a.arg===m)continue;return{value:a.arg,done:o.done}}"throw"===a.type&&(s=f,o.method="throw",o.arg=a.arg)}}),t}function c(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",m={};function g(){}function y(){}function v(){}var t={},_=(i(t,r,function(){return this}),Object.getPrototypeOf),_=_&&_(_(A([]))),k=(_&&_!==e&&u.call(_,r)&&(t=_),v.prototype=g.prototype=Object.create(t));function b(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function S(o,s){var t;this._invoke=function(a,r){function e(){return new s(function(e,t){!function t(e,a,r,n){var i,e=c(o[e],o,a);if("throw"!==e.type)return(a=(i=e.arg).value)&&"object"==(void 0===a?"undefined":lt(a))&&u.call(a,"__await")?s.resolve(a.__await).then(function(e){t("next",e,r,n)},function(e){t("throw",e,r,n)}):s.resolve(a).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,n)});n(e.arg)}(a,r,e,t)})}return t=t?t.then(e,e):e()}}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(t){if(t){var a,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return a=-1,(e=function e(){for(;++a<t.length;)if(u.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}return{next:P}}function P(){return{value:l,done:!0}}return i(k,"constructor",y.prototype=v),i(v,"constructor",y),y.displayName=i(v,n,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i(e,n,"GeneratorFunction")),e.prototype=Object.create(k),e},o.awrap=function(e){return{__await:e}},b(S.prototype),i(S.prototype,a,function(){return this}),o.AsyncIterator=S,o.async=function(e,t,a,r,n){void 0===n&&(n=Promise);var i=new S(s(e,t,a,r),n);return o.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(k),i(k,n,"Generator"),i(k,r,function(){return this}),i(k,"toString",function(){return"[object Generator]"}),o.keys=function(a){var e,r=[];for(e in a)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in a)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var r=this;function e(e,t){return i.type="throw",i.arg=a,r.next=e,t&&(r.method="next",r.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],i=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var o=u.call(n,"catchLoc"),s=u.call(n,"finallyLoc");if(o&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;0<=a;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var i=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),T(a),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var a,r,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(a=n.completion).type&&(r=a.arg,T(n)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:A(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=l),m}},o}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==("undefined"==typeof globalThis?"undefined":lt(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},U={};function r(e){var t=U[e];return void 0!==t||(t=U[e]={exports:{}},O[e](t,t.exports,r)),t.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var B={};function F(e,t,a,r,n,i,o){try{var s=e[i](o),l=s.value}catch(e){return a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function j(e,t){var a;return t=t,a="",-1<(e=(e=(a=e&&"function"==typeof window.getComputedStyle&&(e=window.getComputedStyle(e,null))?(a=e.getPropertyValue(t)).toString().toLowerCase():a)||0).toString()).indexOf("px")&&(e=e.replace("px","")),parseFloat(e)}(r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(B),r.d(B,{RmpVast:function(){return it}});var e=r(7757),n=r.n(e),i=(r(7476),r(1181),r(6253),r(851),r(8837),r(6108),r(9357),r(3403),r(1246),{nullFn:function(){return null},createStdEvent:function(e,t){var a;if(t)try{a=new Event(e),t.dispatchEvent(a)}catch(e){console.trace(e)}}}),V=(i.setStyle=function(e,t){if(e&&"object"==(void 0===t?"undefined":lt(t)))for(var a=Object.keys(t),r=0,n=a.length;r<n;r++){var i=a[r];e.style[i]=t[i]}},i.getWidth=function(e){return e?i.isNumber(e.offsetWidth)&&0!==e.offsetWidth?e.offsetWidth:j(e,"width"):0},i.getHeight=function(e){return e?i.isNumber(e.offsetHeight)&&0!==e.offsetHeight?e.offsetHeight:j(e,"height"):0},i.show=function(e){e&&(e.style.display="block")},i.hide=function(e){e&&(e.style.display="none")},i.removeElement=function(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(e){i.trace(e)}},!(i.isEmptyObject=function(e){return!(!e||"object"!=(void 0===e?"undefined":lt(e))||0!==Object.keys(e).length)})),$=!1,G=!1,M=("undefined"!=typeof console&&("function"==typeof console.log&&(V=!0),"function"==typeof console.dir&&($=!0),"function"==typeof console.trace)&&(G=!0),i.log=function(e,t){V&&("string"==typeof e&&console.log("%crmp-vast%c"+e,"color: white; background-color: #00ACC1; padding:1px 3px; border-radius: 3px; margin-right: 7px",""),$)&&"object"==(void 0===t?"undefined":lt(t))&&console.dir(t)},i.trace=function(e){G?console.trace(e):V&&i.log(e)},i.logVideoEvents=function(t,a){["loadstart","durationchange","playing","waiting","loadedmetadata","loadeddata","canplay","canplaythrough"].forEach(function(e){t.addEventListener(e,function(e){e&&e.type&&i.log(a+" player event - "+e.type)})})},i.isNumber=function(e){return!(void 0===e||"number"!=typeof e||!Number.isFinite(e))},i.openWindow=function(e){try{window.open(e,"_blank")}catch(e){i.trace(e)}},i);function t(e){if(null!==s){e=s.match(e);if(Array.isArray(e)&&void 0!==e[1])return parseInt(e[1],10)}return-1}r(1466);var e={},a=document.createElement("video"),o=!!(void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof window.DocumentTouch),s=window.navigator&&window.navigator.userAgent?window.navigator.userAgent:null,l=navigator&&navigator.platform?navigator.platform:null,u=(e.devicePixelRatio=(u=1,u=M.isNumber(window.devicePixelRatio)&&1<window.devicePixelRatio?window.devicePixelRatio:u),e.maxTouchPoints=navigator&&"number"==typeof navigator.maxTouchPoints?navigator.maxTouchPoints:-1,u=[!1,-1],u=o&&/(ipad|iphone|ipod)/i.test(s)?[!0,t(/os\s+(\d+)_/i)]:u),c=/(macintosh|mac\s+os)/i,d=/mac\s+os\s+x\s+(\d+)_(\d+)/i,c=(h=!1,f=-1,!u[0]&&c.test(s)&&(h=!0,f=t(d)),[h,f]),d=/version\/(\d+)\./i,h=/(chrome|chromium|android|crios|fxios)/i,h=(f=!1,_=-1,/safari\/[.0-9]*/i.test(s)&&!h.test(s)&&(f=!0,_=t(d)),[f,_]);function H(e,t){var a=this;t&&(t.stopPropagation(),"touchend"===t.type)&&t.preventDefault(),M.openWindow(this.iconsData[e].iconClickThroughUrl),0<(t=this.iconsData[e].iconClickTrackingUrls).length&&t.forEach(function(e){e.url&&S.pingURI.call(a,e.url)})}function W(e){this.debug&&M.log("IconViewTracking for icon at index "+e),S.pingURI.call(this,this.iconsData[e].iconViewTrackingUrl)}function z(){this.debug&&M.log("VPAID AdStopped event"),this.adStoppedTimeout&&clearTimeout(this.adStoppedTimeout),N.resumeContent.call(this)}function K(){var e,t,a,r=this;if(this.vpaidAvailableInterval&&clearInterval(this.vpaidAvailableInterval),this.vpaidLoadTimeout&&clearTimeout(this.vpaidLoadTimeout),this.vpaidCreative=this.vpaidIframe.contentWindow.getVPAIDAd(),this.vpaidCreative&&"function"==typeof this.vpaidCreative.handshakeVersion){try{t=this.vpaidCreative.handshakeVersion("2.0")}catch(e){return M.trace(e),this.debug&&M.log("could not validate VPAID ad unit handshakeVersion"),void L.process.call(this,901,!0)}(this.vpaidVersion=parseInt(t),this.vpaidVersion<1)?(this.debug&&M.log("unsupported VPAID version - exit"),L.process.call(this,901,!0)):"function"!=typeof(e=this.vpaidCreative).initAd||"function"!=typeof e.startAd||"function"!=typeof e.stopAd||"function"!=typeof e.skipAd||"function"!=typeof e.resizeAd||"function"!=typeof e.pauseAd||"function"!=typeof e.resumeAd||"function"!=typeof e.expandAd||"function"!=typeof e.collapseAd||"function"!=typeof e.subscribe||"function"!=typeof e.unsubscribe?(this.debug&&M.log("VPAID creative does not conform to VPAID spec - exit"),L.process.call(this,901,!0)):(re.call(this),S.wire.call(this),(t={}).AdParameters=this.adParametersData,this.debug&&M.log("VPAID AdParameters follow",this.adParametersData),M.show(this.adContainer),M.show(this.vastPlayer),a={},this.vpaidSlot=document.createElement("div"),this.vpaidSlot.className="rmp-vpaid-container",this.adContainer.appendChild(this.vpaidSlot),a.slot=this.vpaidSlot,a.videoSlot=this.vastPlayer,a.videoSlotCanAutoPlay=!0,this.initAdTimeout=setTimeout(function(){r.vpaidAdLoaded||(r.debug&&M.log("initAdTimeout"),N.resumeContent.call(r)),r.vpaidAdLoaded=!1},10*this.params.creativeLoadTimeout),this.debug&&M.log("calling initAd on VPAID creative now"),this.vpaidCreative.initAd(this.initialWidth,this.initialHeight,this.initialViewMode,this.desiredBitrate,t,a))}}function q(){var e=this;this.nonLinearClose=document.createElement("div"),this.nonLinearClose.className="rmp-ad-non-linear-close",T.accessibleButton(this.nonLinearClose,this.params.labels.closeAd),0<this.nonLinearMinSuggestedDuration?(M.setStyle(this.nonLinearClose,{display:"none"}),setTimeout(function(){M.setStyle(e.nonLinearClose,{display:"block"})},1e3*this.nonLinearMinSuggestedDuration)):M.setStyle(this.nonLinearClose,{display:"block"}),this.onClickCloseNonLinear=function(e){e&&(e.stopPropagation(),"touchend"===e.type)&&e.preventDefault(),M.setStyle(this.nonLinearContainer,{display:"none"}),T.createApiEvent.call(this,"adclosed"),S.dispatch.call(this,"close")}.bind(this),this.nonLinearClose.addEventListener("touchend",this.onClickCloseNonLinear),this.nonLinearClose.addEventListener("click",this.onClickCloseNonLinear),this.nonLinearContainer.appendChild(this.nonLinearClose)}function Y(e){0<Math.round(e)&&(this.skipWaiting.textContent=this.params.labels.skipMessage+" "+Math.round(e)+"s")}function X(){this.skipButton&&"none"===this.skipButton.style.display&&M.setStyle(this.skipButton,{display:"block"}),this.vastPlayer&&(this.vastPlayerCurrentTime=this.vastPlayer.currentTime,M.isNumber(this.vastPlayerCurrentTime))&&0<this.vastPlayerCurrentTime&&(this.vastPlayerCurrentTime>=this.creative.skipoffset?(this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdateCheckSkip),function(){M.setStyle(this.skipWaiting,{display:"none"}),M.setStyle(this.skipMessage,{display:"block"}),M.setStyle(this.skipIcon,{display:"block"})}.call(this),this.skippableAdCanBeSkipped=!0,T.createApiEvent.call(this,"adskippablestatechanged")):0<this.creative.skipoffset-this.vastPlayerCurrentTime&&Y.call(this,this.creative.skipoffset-this.vastPlayerCurrentTime))}function Q(t){var a=this,e=(this.debug&&M.log("ping tracking for "+t+" VAST event"),this.trackingTags.filter(function(e){return t===e.event}));0<e.length&&e.forEach(function(e){b.pingURI.call(a,e.url)})}function Z(e){var t,a,r,n;return M.isNumber(e)&&0<=e?(n=(r=a=t=0)===(n=Math.floor(e%1e3))?"000":n<10?"00"+n:n<100?"0"+n:n.toString(),59<(t=Math.floor(+e/1e3))&&(t-=60*(a=Math.floor(+t/60))),t=0===t?"00":t<10?"0"+t:t.toString(),59<a&&(a-=60*(r=Math.floor(+a/60))),a=0===a?"00":a<10?"0"+a:a.toString(),(r=0===r?"00":r<10?"0"+r:23<r?"00":r.toString())+":"+a+":"+t+"."+n):"00:00:00.000"}function J(e){var t=this;if(/\.js$/i.test(e)){var a=document.createElement("script");a.src=e;try{document.head.appendChild(a)}catch(e){M.trace(e),document.body.appendChild(a)}}else{var r=new Image;r.addEventListener("load",function(){t.debug&&M.log("VAST tracker successfully loaded "+e),r=null}),r.addEventListener("error",function(){t.debug&&M.log("VAST tracker failed loading "+e),r=null}),r.src=e}}function ee(e){"string"==typeof e&&""!==e&&(this.debug&&M.log(e),M.createStdEvent(e,this.container))}function te(){this.container.removeEventListener("adstarted",this.attachViewableObserver),void 0!==window.IntersectionObserver?(this.viewableObserver=new IntersectionObserver(function(e){var t=this;e.forEach(function(e){e.intersectionRatio>t.viewablePreviousRatio&&(t.viewableObserver.unobserve(t.container),T.createApiEvent.call(t,"adviewable"),S.dispatch.call(t,"viewable")),t.viewablePreviousRatio=e.intersectionRatio})}.bind(this),{root:null,rootMargin:"0px",threshold:[.5]}),this.viewableObserver.observe(this.container)):(T.createApiEvent.call(this,"adviewundetermined"),S.dispatch.call(this,"viewundetermined"))}e.isIpadOS=!!(!u[0]&&o&&/macintel/i.test(l)&&1<devicePixelRatio&&1<e.maxTouchPoints),e.isIpadOS&&(c=[!1,-1]);var p,d=/android/i,f=/android\s*(\d+)\./i,ae=void 0!==a.canPlayType,I=(e.isIos=u,e.isAndroid=(_=[!1,-1],_=!u[0]&&o&&d.test(s)?[!0,t(f)]:_),e.isMacOSSafari=c[0]&&h[0],e.isFirefox=!(!/firefox\//i.test(s)||/seamonkey\//i.test(s)),e.isMobile=!1,(e.isIos[0]||e.isAndroid[0]||e.isIpadOS)&&(e.isMobile=!0),e.canPlayType=function(e,t){if(ae)if(e&&t){if(""!==a.canPlayType(e+'; codecs="'+t+'"'))return!0}else if(e&&!t&&""!==a.canPlayType(e))return!0;return!1},e.hasNativeFullscreenSupport=!(!(l=document.documentElement)||void 0===l.requestFullscreen&&void 0===l.webkitRequestFullscreen&&void 0===l.mozRequestFullScreen&&void 0===l.msRequestFullscreen&&void 0===a.webkitEnterFullscreen),e),m=(r(9371),r(110),{play:function(e){this.contentPlayer&&this.contentPlayer.paused&&T.playPromise.call(this,"content",e)},pause:function(){this.contentPlayer&&!this.contentPlayer.paused&&this.contentPlayer.pause()},setVolume:function(e){this.contentPlayer&&(this.contentPlayer.volume=e)},getVolume:function(){return this.contentPlayer?this.contentPlayer.volume:-1},getMute:function(){return!!this.contentPlayer&&this.contentPlayer.muted},setMute:function(e){this.contentPlayer&&(e&&!this.contentPlayer.muted?this.contentPlayer.muted=!0:!e&&this.contentPlayer.muted&&(this.contentPlayer.muted=!1))},getDuration:function(){if(this.contentPlayer){var e=this.contentPlayer.duration;if(M.isNumber(e))return Math.round(1e3*e)}return-1},getCurrentTime:function(){if(this.contentPlayer){var e=this.contentPlayer.currentTime;if(M.isNumber(e))return Math.round(1e3*e)}return-1},seekTo:function(e){M.isNumber(e)&&0<=e&&this.contentPlayer&&(e=Math.round(e/1e3*100)/100,this.contentPlayer.currentTime=e)},preventSeekingForCustomPlayback:function(){var e=this;this.contentPlayer&&(this.antiSeekLogicInterval=setInterval(function(){e.creative.isLinear&&e.adOnStage&&(1<Math.abs(e.customPlaybackCurrentTime-e.contentPlayer.currentTime)&&(e.contentPlayer.currentTime=e.customPlaybackCurrentTime),e.customPlaybackCurrentTime=e.contentPlayer.currentTime)},200))}}),R=((u={destroy:function(){this.debug&&M.log("start destroying icons");var e=this.adContainer.querySelectorAll(".rmp-ad-container-icons");if(0<e.length)for(var t=0,a=e.length;t<a;t++)M.removeElement(e[t])},parse:function(e){this.debug&&M.log("start parsing for icons");for(var t=0,a=e.length;t<a;t++){var r,n,i,o,s,l,u,c=e[t],d=c.program;null!==d&&(r=c.width,n=c.height,i=c.xPosition,o=c.yPosition,r<=0||n<=0||i<0||o<0||(s=c.staticResource,l=c.iframeResource,u=c.htmlResource,null===s&&null===l&&null===u)||((d={program:d,width:r,height:n,xPosition:i,yPosition:o,staticResourceUrl:s,iframeResourceUrl:l,htmlContent:u}).iconViewTrackingUrl=c.iconViewTrackingURLTemplate,d.iconClickThroughUrl=c.iconClickThroughURLTemplate,d.iconClickTrackingUrls=c.iconClickTrackingURLTemplates,this.iconsData.push(d)))}this.debug&&M.log("validated parsed icons follows",this.iconsData)}}).append=function(){this.onPlayingAppendIcons=function(){this.debug&&M.log("playing states has been reached - append icons"),this.vastPlayer.removeEventListener("playing",this.onPlayingAppendIcons);for(var e=0,t=this.iconsData.length;e<t;e++){var a=void 0,r=void 0,n=this.iconsData[e],i=(n.staticResourceUrl?(a=document.createElement("img"),r=n.staticResourceUrl):(n.iframeResourceUrl||n.htmlContent)&&((a=document.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r=n.htmlContent||n.iframeResourceUrl,M.setStyle(a,{border:"none",overflow:"hidden"}),a.setAttribute("scrolling","no"),a.setAttribute("allow","autoplay; fullscreen; picture-in-picture; xr-spatial-tracking; encrypted-media"),a.setAttribute("sandbox","allow-scripts allow-presentation allow-same-origin")),a.className="rmp-ad-container-icons",M.setStyle(a,{width:parseInt(n.width)+"px",height:parseInt(n.height)+"px"}),n.xPosition),o=("left"===i?a.style.left="0px":"right"===i?a.style.right="0px":0<=parseInt(i)?a.style.left=i+"px":a.style.left="0px",n.yPosition);"top"===o?a.style.top="0px":"bottom"===i?a.style.bottom="0px":0<=parseInt(o)?a.style.top=o+"px":a.style.top="0px",n.iconViewTrackingUrl&&(a.onload=W.bind(this,e)),n.iconClickThroughUrl&&(a.addEventListener("touchend",H.bind(this,e)),a.addEventListener("click",H.bind(this,e))),n.htmlContent?a.srcdoc=r:a.src=r,this.debug&&M.log("selected icon details follow",a),this.adContainer.appendChild(a)}}.bind(this),this.vastPlayer.addEventListener("playing",this.onPlayingAppendIcons)},u),g={getAdWidth:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdWidth?this.vpaidCreative.getAdWidth():-1},getAdHeight:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdHeight?this.vpaidCreative.getAdHeight():-1},getAdDuration:function(){if(this.vpaidCreative){if("function"==typeof this.vpaidCreative.getAdDuration)return this.vpaidCreative.getAdDuration();if(-1<this.vpaid1AdDuration)return this.vpaid1AdDuration}return-1},getAdRemainingTime:function(){return 0<=this.vpaidRemainingTime?this.vpaidRemainingTime:-1},getCreativeUrl:function(){return this.vpaidCreativeUrl||""},getVpaidCreative:function(){return this.vpaidCreative},getAdVolume:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdVolume?this.vpaidCreative.getAdVolume():null},getAdPaused:function(){return this.vpaidPaused},getAdExpanded:function(){return!(!this.vpaidCreative||"function"!=typeof this.vpaidCreative.getAdExpanded)&&this.vpaidCreative.getAdExpanded()},getAdSkippableState:function(){return!(!this.vpaidCreative||"function"!=typeof this.vpaidCreative.getAdSkippableState)&&this.vpaidCreative.getAdSkippableState()},getAdIcons:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdIcons?this.vpaidCreative.getAdIcons():null},getAdCompanions:function(){return this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdCompanions?this.vpaidCreative.getAdCompanions():""}},re=(g.resizeAd=function(e,t,a){var r;this.vpaidCreative&&M.isNumber(e)&&M.isNumber(t)&&"string"==typeof a&&!(e<=0||t<=0)&&(r="fullscreen"===a?a:"normal",this.debug&&M.log("VPAID resizeAd with width "+e+" - height "+t+" - viewMode "+a),this.vpaidCreative.resizeAd(e,t,r))},g.stopAd=function(){var e=this;this.vpaidCreative&&(this.debug&&M.log("stopAd"),this.adStoppedTimeout=setTimeout(function(){z.call(e)},this.params.creativeLoadTimeout),this.vpaidCreative.stopAd())},g.pauseAd=function(){this.debug&&M.log("pauseAd"),this.vpaidCreative&&!this.vpaidPaused&&this.vpaidCreative.pauseAd()},g.resumeAd=function(){this.debug&&M.log("resumeAd"),this.vpaidCreative&&this.vpaidPaused&&this.vpaidCreative.resumeAd()},g.expandAd=function(){this.vpaidCreative&&this.vpaidCreative.expandAd()},g.collapseAd=function(){this.vpaidCreative&&this.vpaidCreative.collapseAd()},g.skipAd=function(){var e=this;this.vpaidCreative&&(this.adSkippedTimeout=setTimeout(function(){z.call(e)},this.params.creativeLoadTimeout),this.vpaidCreative.skipAd())},g.setAdVolume=function(e){this.vpaidCreative&&M.isNumber(e)&&0<=e&&e<=1&&"function"==typeof this.vpaidCreative.setAdVolume&&this.vpaidCreative.setAdVolume(e)},function(){if(this.vpaidCreative){this.vpaidCallbacks={AdLoaded:function(){var e=this;this.vpaidAdLoaded=!0,this.vpaidCreative&&(this.initAdTimeout&&clearTimeout(this.initAdTimeout),this.vpaidCallbacks.AdLoaded&&this.vpaidCreative.unsubscribe(this.vpaidCallbacks.AdLoaded,"AdLoaded"),this.startAdTimeout=setTimeout(function(){e.vpaidAdStarted||N.resumeContent.call(e),e.vpaidAdStarted=!1},this.params.creativeLoadTimeout),m.pause.call(this),this.adOnStage=!0,this.vpaidCreative.startAd(),T.createApiEvent.call(this,"adloaded"),S.dispatch.call(this,"loaded"))}.bind(this),AdStarted:function(){this.vpaidAdStarted=!0,this.vpaidCreative&&(this.startAdTimeout&&clearTimeout(this.startAdTimeout),this.vpaidCallbacks.AdStarted&&this.vpaidCreative.unsubscribe(this.vpaidCallbacks.AdStarted,"AdStarted"),1===this.vpaidVersion&&(this.vpaid1AdDuration=g.getAdRemainingTime.call(this)),!g.getAdIcons.call(this)&&!this.useContentPlayerForAds&&0<this.iconsData.length&&R.append.call(this),"function"==typeof this.vpaidCreative.getAdLinear&&(this.creative.isLinear=this.vpaidCreative.getAdLinear()),S.dispatch.call(this,"creativeView"))}.bind(this),AdStopped:z.bind(this),AdSkipped:function(){this.adSkippedTimeout&&clearTimeout(this.adSkippedTimeout),T.createApiEvent.call(this,"adskipped"),S.dispatch.call(this,"skip")}.bind(this),AdSkippableStateChange:function(){T.createApiEvent.call(this,"adskippablestatechanged")}.bind(this),AdDurationChange:function(){var e;this.vpaidCreative&&("function"==typeof this.vpaidCreative.getAdRemainingTime&&0<=(e=this.vpaidCreative.getAdRemainingTime())&&(this.vpaidRemainingTime=e),T.createApiEvent.call(this,"addurationchange"))}.bind(this),AdVolumeChange:function(){var e=g.getAdVolume.call(this);null!==e&&(0<this.vpaidCurrentVolume&&0===e?S.dispatch.call(this,"mute"):0===this.vpaidCurrentVolume&&0<e&&S.dispatch.call(this,"unmute"),this.vpaidCurrentVolume=e,T.createApiEvent.call(this,"advolumechanged"))}.bind(this),AdImpression:function(){T.createApiEvent.call(this,"adimpression"),S.dispatch.call(this,"impression")}.bind(this),AdVideoStart:function(){this.vpaidPaused=!1;var e=g.getAdVolume.call(this);this.vpaidCurrentVolume=e=null===e?1:e,T.createApiEvent.call(this,"adstarted"),S.dispatch.call(this,"start")}.bind(this),AdVideoFirstQuartile:function(){T.createApiEvent.call(this,"adfirstquartile"),S.dispatch.call(this,"firstQuartile")}.bind(this),AdVideoMidpoint:function(){T.createApiEvent.call(this,"admidpoint"),S.dispatch.call(this,"midpoint")}.bind(this),AdVideoThirdQuartile:function(){T.createApiEvent.call(this,"adthirdquartile"),S.dispatch.call(this,"thirdQuartile")}.bind(this),AdVideoComplete:function(){T.createApiEvent.call(this,"adcomplete"),S.dispatch.call(this,"complete")}.bind(this),AdClickThru:function(e,t,a){var r;T.createApiEvent.call(this,"adclick"),S.dispatch.call(this,"clickthrough"),"boolean"==typeof a&&a&&(e?r=e:this.creative.clickThroughUrl&&(r=this.creative.clickThroughUrl),r)&&(this.creative.clickThroughUrl=r,M.openWindow(this.creative.clickThroughUrl))}.bind(this),AdPaused:function(){this.vpaidPaused=!0,T.createApiEvent.call(this,"adpaused"),S.dispatch.call(this,"pause")}.bind(this),AdPlaying:function(){this.vpaidPaused=!1,T.createApiEvent.call(this,"adresumed"),S.dispatch.call(this,"resume")}.bind(this),AdLog:function(e){this.debug&&M.log("VPAID AdLog event "+e)}.bind(this),AdError:function(e){this.debug&&M.log("VPAID AdError event "+e),L.process.call(this,901,!0)}.bind(this),AdInteraction:function(){T.createApiEvent.call(this,"adinteraction")}.bind(this),AdUserAcceptInvitation:function(){T.createApiEvent.call(this,"aduseracceptinvitation"),S.dispatch.call(this,"acceptInvitation")}.bind(this),AdUserMinimize:function(){T.createApiEvent.call(this,"adcollapse"),S.dispatch.call(this,["collapse","adCollapse"])}.bind(this),AdUserClose:function(){T.createApiEvent.call(this,"adclosed"),S.dispatch.call(this,"close")}.bind(this),AdSizeChange:function(){T.createApiEvent.call(this,"adsizechange")}.bind(this),AdLinearChange:function(){this.vpaidCreative&&"function"==typeof this.vpaidCreative.getAdLinear&&(this.creative.isLinear=this.vpaidCreative.getAdLinear(),T.createApiEvent.call(this,"adlinearchange"))}.bind(this),AdExpandedChange:function(){T.createApiEvent.call(this,"adexpandedchange")}.bind(this),AdRemainingTimeChange:function(){var e;this.vpaidCreative||"function"!=typeof this.vpaidCreative.getAdRemainingTime||0<=(e=this.vpaidCreative.getAdRemainingTime())&&(this.vpaidRemainingTime=e),T.createApiEvent.call(this,"adremainingtimechange")}.bind(this)};for(var e=Object.keys(this.vpaidCallbacks),t=0,a=e.length;t<a;t++){var r=e[t];this.vpaidCreative.subscribe(this.vpaidCallbacks[r],r)}}}),D=(g.loadCreative=function(e,t){if(this.initialWidth=t.width,this.initialHeight=t.height,this.initialViewMode=t.viewMode,this.desiredBitrate=t.desiredBitrate,this.vpaidCreativeUrl=e,!this.vastPlayer)if(this.useContentPlayerForAds)this.vastPlayer=this.contentPlayer;else{t=this.adContainer?this.adContainer.querySelector(".rmp-ad-vast-video-player"):void 0;if(null===t)return void L.process.call(this,900,!0);this.vastPlayer=t}this.vpaidIframe=document.createElement("iframe"),this.vpaidIframe.sandbox="allow-scripts allow-same-origin",this.vpaidIframe.id="vpaid-frame",M.setStyle(this.vpaidIframe,{visibility:"hidden",width:"0px",height:"0px",border:"none"}),this.vpaidIframe.onload=function(){var e,t,a=this;this.debug&&M.log("iframe.onload"),this.vpaidIframe.onload=this.vpaidIframe.onerror=M.nullFn,this.vpaidIframe.contentWindow&&this.vpaidIframe.contentWindow.document&&this.vpaidIframe.contentWindow.document.body?(t=(e=this.vpaidIframe.contentWindow.document).body,this.vpaidScript=e.createElement("script"),this.vpaidLoadTimeout=setTimeout(function(){a.debug&&M.log("could not load VPAID JS Creative or getVPAIDAd in iframeWindow - resume content"),a.vpaidScript.onload=null,a.vpaidScript.onerror=null,N.resumeContent.call(a)},this.params.creativeLoadTimeout),this.vpaidScript.onload=function(){var e=this,t=(this.debug&&M.log("VPAID JS loaded"),this.vpaidIframe.contentWindow);"function"==typeof t.getVPAIDAd?K.call(this):this.vpaidAvailableInterval=setInterval(function(){"function"==typeof t.getVPAIDAd&&K.call(e)},100),this.vpaidScript.onload=null,this.vpaidScript.onerror=null}.bind(this),this.vpaidScript.onerror=function(){this.debug&&M.log("VPAID JS error loading"),L.process.call(this,901,!0),this.vpaidScript.onload=null,this.vpaidScript.onerror=null}.bind(this),t.appendChild(this.vpaidScript),this.vpaidScript.src=this.vpaidCreativeUrl):L.process.call(this,901,!0)}.bind(this),this.vpaidIframe.onerror=function(){this.debug&&M.log("iframe.onerror"),this.vpaidIframe.onload=this.vpaidIframe.onerror=M.nullFn,L.process.call(this,901,!0)}.bind(this),this.vpaidIframe.src="about:blank",this.adContainer.appendChild(this.vpaidIframe)},g.destroy=function(){this.debug&&M.log("destroy VPAID dependencies"),this.vpaidAvailableInterval&&clearInterval(this.vpaidAvailableInterval),this.vpaidLoadTimeout&&clearTimeout(this.vpaidLoadTimeout),this.initAdTimeout&&clearTimeout(this.initAdTimeout),this.startAdTimeout&&clearTimeout(this.startAdTimeout),function(){if(this.vpaidCreative)for(var e=Object.keys(this.vpaidCallbacks),t=0,a=e.length;t<a;t++){var r=e[t];this.vpaidCreative.unsubscribe(this.vpaidCallbacks[r],r)}}.call(this),this.vpaidScript&&(this.vpaidScript.onload=null,this.vpaidScript.onerror=null),this.vpaidSlot&&M.removeElement(this.vpaidSlot),this.vpaidIframe&&M.removeElement(this.vpaidIframe)},g),y={instanceVariables:function(){this.adContainer=null,this.debug=!1,this.rmpVastInitialized=!1,this.useContentPlayerForAds=!1,this.contentPlayerCompleted=!1,this.currentContentSrc="",this.currentContentCurrentTime=-1,this.needsSeekAdjust=!1,this.seekAdjustAttached=!1,this.firstVastPlayerPlayRequest=!0,this.firstContentPlayerPlayRequest=!0,this.params={},this.onFullscreenchange=M.nullFn,this.contentWrapper=null,this.contentPlayer=null,this.id=null,this.container=null,this.isInFullscreen=!1,this.listeners=[],this.adPod=!1,this.adPodLength=0,this.adSequence=0,this.notSequencedAdsLength=0,this.notSequencedAdsCurrentIndex=0,(I.isIos[0]||I.isMacOSSafari||I.isIpadOS)&&(this.useContentPlayerForAds=!0,this.debug)&&M.log("vast player will be content player")},resetLoadAds:function(){this.container&&this.container.removeEventListener("adstarted",this.attachViewableObserver),this.onLoadedmetadataPlay=M.nullFn,this.onPlaybackError=M.nullFn,this.onPause=M.nullFn,this.onPlay=M.nullFn,this.onPlaying=M.nullFn,this.onEnded=M.nullFn,this.onVolumeChange=M.nullFn,this.onTimeupdate=M.nullFn,this.onEventPingTracking=M.nullFn,this.onClickThrough=M.nullFn,this.onPlayingAppendIcons=M.nullFn,this.onDurationChange=M.nullFn,this.onTimeupdateCheckSkip=M.nullFn,this.onClickSkip=M.nullFn,this.onNonLinearLoadSuccess=M.nullFn,this.onNonLinearLoadError=M.nullFn,this.onNonLinearClickThrough=M.nullFn,this.onContextMenu=M.nullFn,this.adTagUrl="",this.vastPlayer=null,this.vpaidSlot=null,this.trackingTags=[],this.vastErrorTags=[],this.adErrorTags=[],this.vastPlayerMuted=!1,this.vastPlayerDuration=-1,this.vastPlayerCurrentTime=-1,this.firstQuartileEventFired=!1,this.midpointEventFired=!1,this.thirdQuartileEventFired=!1,this.vastPlayerPaused=!1,this.vastErrorCode=-1,this.adErrorType="",this.vastErrorMessage="",this.adOnStage=!1,this.iconsData=[],this.clickUIOnMobile=null,this.customPlaybackCurrentTime=0,this.antiSeekLogicInterval=null,this.creativeLoadTimeoutCallback=null,this.ad={},this.creative={},this.attachViewableObserver=null,this.viewableObserver=null,this.viewablePreviousRatio=.5,this.regulationsInfo={},this.requireCategory=!1,this.progressEvents=[],this.skipButton=null,this.skipWaiting=null,this.skipMessage=null,this.skipIcon=null,this.skippableAdCanBeSkipped=!1,this.nonLinearContainer=null,this.nonLinearATag=null,this.nonLinearInnerElement=null,this.onClickCloseNonLinear=M.nullFn,this.nonLinearMinSuggestedDuration=0,this.validCompanionAds=[],this.companionAdsRequiredAttribute="",this.companionAdsList=[],this.isVPAID=!1,this.vpaidCreative=null,this.vpaidScript=null,this.vpaidIframe=null,this.vpaidLoadTimeout=null,this.initAdTimeout=null,this.startAdTimeout=null,this.vpaidAvailableInterval=null,this.adStoppedTimeout=null,this.adSkippedTimeout=null,this.adParametersData="",this.vpaidCurrentVolume=1,this.vpaidPaused=!0,this.vpaidCreativeUrl="",this.vpaidRemainingTime=-1,this.vpaidVersion=-1,this.vpaid1AdDuration=-1,this.initialWidth=640,this.initialHeight=360,this.initialViewMode="normal",this.desiredBitrate=500,this.vpaidAdLoaded=!1,this.vpaidAdStarted=!1,this.vpaidCallbacks={}},fullscreen:function(){I.hasNativeFullscreenSupport&&(this.onFullscreenchange=function(e){e&&e.type&&(this.debug&&M.log("event is "+e.type),"fullscreenchange"===e.type?this.isInFullscreen?(this.isInFullscreen=!1,this.adOnStage&&this.creative.isLinear&&S.dispatch.call(this,["exitFullscreen","playerCollapse"])):(this.isInFullscreen=!0,this.adOnStage&&this.creative.isLinear&&S.dispatch.call(this,["fullscreen","playerExpand"])):"webkitbeginfullscreen"===e.type?(this.adOnStage&&this.creative.isLinear&&S.dispatch.call(this,["fullscreen","playerExpand"]),this.isInFullscreen=!0):"webkitendfullscreen"===e.type&&(this.adOnStage&&this.creative.isLinear&&S.dispatch.call(this,["exitFullscreen","playerCollapse"]),this.isInFullscreen=!1))}.bind(this),I.isIos[0]?(this.contentPlayer.addEventListener("webkitbeginfullscreen",this.onFullscreenchange),this.contentPlayer.addEventListener("webkitendfullscreen",this.onFullscreenchange)):document.addEventListener("fullscreenchange",this.onFullscreenchange))}},ne=((o={}).update=function(){this.nonLinearContainer=document.createElement("div"),this.nonLinearContainer.className="rmp-ad-non-linear-container",M.setStyle(this.nonLinearContainer,{width:this.creative.width.toString()+"px",height:this.creative.height.toString()+"px"}),this.nonLinearATag=document.createElement("a"),this.nonLinearATag.className="rmp-ad-non-linear-anchor",this.creative.clickThroughUrl&&(this.nonLinearATag.href=this.creative.clickThroughUrl,this.nonLinearATag.target="_blank",this.onNonLinearClickThrough=function(e){try{e&&e.stopPropagation(),this.pause(),T.createApiEvent.call(this,"adclick"),S.dispatch.call(this,"clickthrough")}catch(e){M.trace(e)}}.bind(this),I.isMobile?this.nonLinearATag.addEventListener("touchend",this.onNonLinearClickThrough):this.nonLinearATag.addEventListener("click",this.onNonLinearClickThrough)),"image"===this.creative.nonLinearType?this.nonLinearInnerElement=document.createElement("img"):(this.nonLinearInnerElement=document.createElement("iframe"),this.nonLinearInnerElement.sandbox="allow-scripts allow-same-origin",M.setStyle(this.nonLinearInnerElement,{border:"none",overflow:"hidden"}),this.nonLinearInnerElement.setAttribute("allow","autoplay; fullscreen; picture-in-picture; xr-spatial-tracking; encrypted-media"),this.nonLinearInnerElement.setAttribute("scrolling","no"),this.nonLinearInnerElement.setAttribute("sandbox","allow-scripts allow-presentation allow-same-origin")),this.nonLinearInnerElement.className="rmp-ad-non-linear-creative",this.onNonLinearLoadError=function(){L.process.call(this,502,!0)}.bind(this),this.nonLinearInnerElement.addEventListener("error",this.onNonLinearLoadError),this.onNonLinearLoadSuccess=function(){this.debug&&M.log("success loading non-linear creative at "+this.creative.mediaUrl),this.adOnStage=!0,T.createApiEvent.call(this,["adloaded","adimpression","adstarted"]),S.dispatch.call(this,["impression","creativeView","start","loaded"])}.bind(this),this.nonLinearInnerElement.addEventListener("load",this.onNonLinearLoadSuccess),"html"===this.creative.nonLinearType?this.nonLinearInnerElement.srcdoc=this.creative.mediaUrl:this.nonLinearInnerElement.src=this.creative.mediaUrl,this.nonLinearATag.appendChild(this.nonLinearInnerElement),this.nonLinearContainer.appendChild(this.nonLinearATag),this.adContainer.appendChild(this.nonLinearContainer),q.call(this),M.show(this.adContainer),m.play.call(this,this.firstContentPlayerPlayRequest),this.firstContentPlayerPlayRequest&&(this.firstContentPlayerPlayRequest=!1)},o.parse=function(e){this.debug&&M.log("non-linear creatives follow",e);for(var t,a=!1,r=0,n=e.length;r<n;r++){var a=!1,i=(t=e[r]).width,o=t.height;if(o<=0&&(o=44),(i=i<=0?300:i)>M.getWidth(this.container)||o>M.getHeight(this.container))a=!0;else{this.nonLinearMinSuggestedDuration=t.minSuggestedDuration;var s=t.staticResource,l=t.iframeResource,u=t.htmlResource;if(null!==s||null!==l||null!==u){s?(this.creative.mediaUrl=s,this.creative.nonLinearType="image"):l?(this.creative.mediaUrl=l,this.creative.nonLinearType="iframe"):u&&(this.creative.mediaUrl=u,this.creative.nonLinearType="html"),this.creative.width=i,this.creative.height=o,this.creative.type=t.type,this.debug&&M.log("selected non-linear creative",this.creative);break}}}if(!this.creative.mediaUrl||a)L.process.call(this,a?501:503,!0);else{if(this.creative.clickThroughUrl=t.nonlinearClickThroughURLTemplate,0<t.nonlinearClickTrackingURLTemplates.length)for(var c=0,d=t.nonlinearClickTrackingURLTemplates.length;c<d;c++)t.nonlinearClickTrackingURLTemplates[c].url&&this.trackingTags.push({event:"clickthrough",url:t.nonlinearClickTrackingURLTemplates[c].url});N.append.call(this)}},o),ie=(r(1876),r(75),r(2850),r(2773),(d={}).append=function(){this.skipButton=document.createElement("div"),this.skipButton.className="rmp-ad-container-skip",M.setStyle(this.skipButton,{display:"none"}),T.accessibleButton(this.skipButton,this.params.labels.skipMessage),this.skipWaiting=document.createElement("div"),this.skipWaiting.className="rmp-ad-container-skip-waiting",Y.call(this,this.creative.skipoffset),M.setStyle(this.skipWaiting,{display:"block"}),this.skipMessage=document.createElement("div"),this.skipMessage.className="rmp-ad-container-skip-message",this.skipMessage.textContent=this.params.labels.skipMessage,M.setStyle(this.skipMessage,{display:"none"}),this.skipIcon=document.createElement("div"),this.skipIcon.className="rmp-ad-container-skip-icon",M.setStyle(this.skipIcon,{display:"none"}),this.onClickSkip=function(e){e&&(e.stopPropagation(),"touchend"===e.type)&&e.preventDefault(),this.skippableAdCanBeSkipped&&(T.createApiEvent.call(this,"adskipped"),S.dispatch.call(this,"skip"),N.resumeContent.call(this))}.bind(this),this.skipButton.addEventListener("click",this.onClickSkip),this.skipButton.addEventListener("touchend",this.onClickSkip),this.skipButton.appendChild(this.skipWaiting),this.skipButton.appendChild(this.skipMessage),this.skipButton.appendChild(this.skipIcon),this.adContainer.appendChild(this.skipButton),this.onTimeupdateCheckSkip=X.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdateCheckSkip)},d),f={},oe=null,v=null,se=(void 0!==window.tizen&&null!==window.tizen&&(tizen.systeminfo.getPropertyValue("NETWORK",function(e){oe=e.networkType},function(e){console.log("An error occurred "+e.message)}),tizen.systeminfo.getPropertyValue("WIFI_NETWORK",function(e){v=e.signalStrength},function(e){console.log("An error occurred "+e.message)})),f.getBandwidthEstimate=function(){if("undefined"!=typeof window&&(void 0===navigator.onLine||navigator.onLine)&&(void 0!==navigator.connection||void 0!==window.tizen&&null!==window.tizen)&&(!(p=navigator.connection&&"string"==typeof navigator.connection.type&&""!==navigator.connection.type?navigator.connection.type:null)||"none"!==p)){if(navigator.connection&&"number"==typeof navigator.connection.downlink&&0<navigator.connection.downlink)return.125*navigator.connection.downlink;var e=function(){var e=[.025,.035,.35,1.4];if(p)switch(p){case"bluetooth":case"cellular":e[3]=.7;break;case"ethernet":case"wifi":case"wimax":e[3]=2.1}return e}();if(navigator.connectionn&&"string"==typeof navigator.connection.effectiveType&&""!==navigator.connection.effectiveType)switch(navigator.connection.effectiveType){case"slow-2g":return e[0];case"2g":return e[1];case"3g":return e[2];case"4g":return e[3]}if(void 0!==window.tizen&&null!==window.tizen){if("ETHERNET"===oe)return 3.6;if("WIFI"===oe&&null!=v)return v<=.4?1.5:.4<v&&v<.6?2.4:4}if(p)switch(p){case"ethernet":case"wifi":case"wimax":return 1.4;case"bluetooth":return.35}}return-1},f),_={},le=/vpaid/i,ue=/\/javascript/i,ce=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],de=["video/webm","video/mp4","video/ogg","video/3gpp"],he=(_.update=function(e,t){var a=this;this.debug&&M.log("update vast player for linear creative of type "+t+" located at "+e),this.onDurationChange=function(){var r=this;if(this.vastPlayer.removeEventListener("durationchange",this.onDurationChange),this.vastPlayerDuration=N.getDuration.call(this),T.createApiEvent.call(this,"addurationchange"),-1!==this.vastPlayerDuration){for(var e=Object.keys(this.creative.trackingEvents),n=0,t=e.length;n<t;n++){var i=e[n];/progress-/i.test(i)&&function(){var t,a=i.split("-")[1];/%/i.test(a)?(t=a.slice(0,-1),t=r.vastPlayerDuration*parseFloat(t)/100,r.creative.trackingEvents[e[n]].forEach(function(e){r.progressEvents.push({time:t,url:e})})):r.creative.trackingEvents[e[n]].forEach(function(e){r.progressEvents.push({time:1e3*parseFloat(a),url:e})})}()}0<this.progressEvents.length&&this.progressEvents.sort(function(e,t){return e.time-t.time})}}.bind(this),this.vastPlayer&&this.vastPlayer.addEventListener("durationchange",this.onDurationChange),this.onLoadedmetadataPlay=function(){this.vastPlayer.removeEventListener("loadedmetadata",this.onLoadedmetadataPlay),clearTimeout(this.creativeLoadTimeoutCallback),T.createApiEvent.call(this,"adloaded"),S.dispatch.call(this,"loaded"),m.pause.call(this),M.show(this.adContainer),M.show(this.vastPlayer),this.adOnStage=!0,N.play.call(this,this.firstVastPlayerPlayRequest),this.firstVastPlayerPlayRequest&&(this.firstVastPlayerPlayRequest=!1)}.bind(this),this.vastPlayer&&this.vastPlayer.addEventListener("loadedmetadata",this.onLoadedmetadataPlay),this.onContextMenu=function(e){e&&(e.stopPropagation(),e.preventDefault())}.bind(this),this.vastPlayer&&this.vastPlayer.addEventListener("contextmenu",this.onContextMenu),this.onPlaybackError=function(e){var t,a;e&&e.target&&(e=e.target).error&&M.isNumber(e.error.code)&&(t=e.error.code,a="","string"==typeof e.error.message&&(a=e.error.message),this.debug&&(M.log("error on video element with code "+t.toString()+" and message "+a),ce[t])&&M.log("error type is "+ce[t]),4===t)&&L.process.call(this,401,!0)}.bind(this),this.creativeLoadTimeoutCallback=setTimeout(function(){L.process.call(a,402,!0)},this.params.creativeLoadTimeout),this.useContentPlayerForAds?(this.contentPlayer.addEventListener("error",this.onPlaybackError),this.contentPlayer.src=e):this.vastPlayer&&(this.vastPlayer.addEventListener("error",this.onPlaybackError),this.vastPlayer.src=e,this.vastPlayer.load()),this.onClickThrough=function(e){e&&e.stopPropagation(),I.isMobile||(this.debug&&M.log("opening clickthrough URL at "+this.creative.clickThroughUrl),M.openWindow(this.creative.clickThroughUrl)),this.pause(),T.createApiEvent.call(this,"adclick"),S.dispatch.call(this,"clickthrough")}.bind(this),this.creative.clickThroughUrl&&(I.isMobile?function(){this.clickUIOnMobile=document.createElement("a"),this.clickUIOnMobile.className="rmp-ad-click-ui-mobile",this.clickUIOnMobile.textContent=this.params.labels.textForClickUIOnMobile,this.clickUIOnMobile.addEventListener("touchend",this.onClickThrough),this.clickUIOnMobile.href=this.creative.clickThroughUrl,this.clickUIOnMobile.target="_blank",this.adContainer.appendChild(this.clickUIOnMobile)}.call(this):this.vastPlayer&&this.vastPlayer.addEventListener("click",this.onClickThrough)),this.creative.isSkippableAd&&ie.append.call(this)},_.parse=function(e,t,a){0<e.length&&R.parse.call(this,e),this.adParametersData="",null!==t&&(this.adParametersData=t);for(var r=[],n=0,i=a.length;n<i;n++){var o=a[n],s=o.fileURL,l=o.mimeType;if(null!==s&&null!==l){var u={};if(u.url=s,u.type=l,null!==o.codec&&(u.codec=o.codec),this.params.enableVpaid&&o.apiFramework&&le.test(o.apiFramework)&&ue.test(l)){this.debug&&M.log("VPAID creative detected"),r=[u],this.isVPAID=!0;break}u.width=o.width,u.height=o.height,u.bitrate=o.bitrate,r.push(u)}}for(var c=[],d=0,h=r.length;d<h;d++){var p=r[d],f=p.type,m=p.url;if(this.isVPAID&&m)return D.loadCreative.call(this,m,this.params.vpaidSettings),void(this.creative.type=f);c.push(p)}for(var g,y,v=[],_=function(e,t){return t.codec&&t.type===de[e]?I.canPlayType(t.type,t.codec):t.type===de[e]&&(navigator.userAgent.includes("PlayStation 5")&&"video/webm"===t.type?(console.log("Filtering out .webm media"),!1):I.canPlayType(t.type))},k=0,b=de.length;k<b&&!(0<(v=c.filter(_.bind(null,k))).length);k++);if(0===v.length)for(var S=function(e,t,a){return a.codec===e&&a.type===t},E=0,T=c.length;E<T;E++){var x=c[E];x.codec&&x.type&&I.canPlayType(x.type,x.codec)&&(v=c.filter(S.bind(null,x.codec,x.type)))}if(0===v.length)for(var A=function(e,t){return t.type===e},P=0,C=c.length;P<C;P++){var w=c[P];w.type&&I.canPlayType(w.type)&&(v=c.filter(A.bind(null,w.type)))}0!==v.length?(v.sort(function(e,t){return e.width-t.width}),this.debug&&M.log("available linear creative follows",v),e=[],1<v.length&&-1<(y=se.getBandwidthEstimate())&&(y=Math.round(1e3*y),g=(e=v.filter(function(e){return y>=e.bitrate-200}))[e.length-1]),g||(v.sort(function(e,t){return e.bitrate-t.bitrate}),g=v[0]),this.debug&&M.log("selected linear creative follows",g),this.creative.mediaUrl=g.url,this.creative.height=g.height,this.creative.width=g.width,this.creative.type=g.type,N.append.call(this,g.url,g.type)):L.process.call(this,403,!0)},_),k={},N=(k.destroy=function(){var e=this;if(this.debug&&M.log("start destroying vast player"),0<this.iconsData.length&&R.destroy.call(this),this.isVPAID&&D.destroy.call(this),function(){if(this.debug&&M.log("reset - unwireVastPlayerEvents"),this.nonLinearContainer){this.nonLinearInnerElement.removeEventListener("load",this.onNonLinearLoadSuccess),this.nonLinearInnerElement.removeEventListener("error",this.onNonLinearLoadError),this.nonLinearATag.removeEventListener("click",this.onNonLinearClickThrough),this.nonLinearATag.removeEventListener("touchend",this.onNonLinearClickThrough),this.nonLinearClose.removeEventListener("click",this.onClickCloseNonLinear),this.nonLinearClose.removeEventListener("touchend",this.onClickCloseNonLinear);for(var e=0,t=this.trackingTags.length;e<t;e++)this.nonLinearContainer.removeEventListener(this.trackingTags[e].event,this.onEventPingTracking)}if(this.vastPlayer){this.vastPlayer.removeEventListener("error",this.onPlaybackError),this.vastPlayer.removeEventListener("durationchange",this.onDurationChange),this.vastPlayer.removeEventListener("loadedmetadata",this.onLoadedmetadataPlay),this.vastPlayer.removeEventListener("contextmenu",this.onContextMenu),this.vastPlayer.removeEventListener("pause",this.onPause),this.vastPlayer.removeEventListener("play",this.onPlay),this.vastPlayer.removeEventListener("playing",this.onPlaying),this.vastPlayer.removeEventListener("ended",this.onEnded),this.vastPlayer.removeEventListener("volumechange",this.onVolumeChange),this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdate);for(var a=0,r=this.trackingTags.length;a<r;a++)this.vastPlayer.removeEventListener(this.trackingTags[a].event,this.onEventPingTracking);this.vastPlayer.removeEventListener("click",this.onClickThrough),this.vastPlayer.removeEventListener("playing",this.onPlayingAppendIcons),this.vastPlayer.removeEventListener("timeupdate",this.onTimeupdateCheckSkip)}this.skipButton&&(this.skipButton.removeEventListener("click",this.onClickSkip),this.skipButton.removeEventListener("touchend",this.onClickSkip)),this.clickUIOnMobile&&this.clickUIOnMobile.removeEventListener("touchend",this.onClickThrough),this.contentPlayer&&this.contentPlayer.removeEventListener("error",this.onPlaybackError)}.call(this),this.clickUIOnMobile&&M.removeElement(this.clickUIOnMobile),this.creative.isSkippableAd&&M.removeElement(this.skipButton),M.hide(this.adContainer),clearInterval(this.antiSeekLogicInterval),clearTimeout(this.creativeLoadTimeoutCallback),this.useContentPlayerForAds)if(this.params.outstream)try{this.contentPlayer&&(this.contentPlayer.pause(),this.contentPlayer.removeAttribute("src"),this.contentPlayer.load(),this.debug)&&M.log("flushing contentPlayer buffer after outstream ad")}catch(e){M.trace(e)}else this.nonLinearContainer?M.removeElement(this.nonLinearContainer):(4e3<this.currentContentCurrentTime&&(this.needsSeekAdjust=!0,this.contentPlayerCompleted&&(this.needsSeekAdjust=!1),this.seekAdjustAttached||(this.seekAdjustAttached=!0,this.contentPlayer.addEventListener("playing",function(){e.needsSeekAdjust&&(e.needsSeekAdjust=!1,m.seekTo.call(e,e.currentContentCurrentTime))}))),this.debug&&M.log("recovering content with src "+this.currentContentSrc+" - at time: "+this.currentContentCurrentTime),this.contentPlayer.src=this.currentContentSrc);else try{this.vastPlayer&&(this.vastPlayer.pause(),this.vastPlayer.removeAttribute("src"),this.vastPlayer.load(),M.hide(this.vastPlayer),this.debug)&&M.log("flushing vastPlayer buffer after ad"),this.nonLinearContainer&&M.removeElement(this.nonLinearContainer)}catch(e){M.trace(e)}y.resetLoadAds.call(this),T.createApiEvent.call(this,"addestroyed")},k.init=function(){var e=this;this.adContainer=document.createElement("div"),this.adContainer.className="rmp-ad-container",this.contentWrapper&&this.contentWrapper.appendChild(this.adContainer),M.hide(this.adContainer),this.useContentPlayerForAds?this.vastPlayer=this.contentPlayer:(this.vastPlayer=document.createElement("video"),this.debug&&M.logVideoEvents(this.vastPlayer,"vast"),I.isAndroid[0]&&void 0!==this.vastPlayer.disableRemotePlayback&&(this.vastPlayer.disableRemotePlayback=!0),this.vastPlayer.className="rmp-ad-vast-video-player",this.debug&&this.showControlsForVastPlayer?this.vastPlayer.controls=!0:this.vastPlayer.controls=!1,this.contentPlayer.hasAttribute("muted")&&(this.contentPlayer.muted=!0),this.contentPlayer.muted&&(this.vastPlayer.muted=!0),this.vastPlayer.poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",this.vastPlayer.setAttribute("x-webkit-airplay","allow"),"boolean"==typeof this.contentPlayer.playsInline&&this.contentPlayer.playsInline&&(this.vastPlayer.playsInline=!0),this.vastPlayer.defaultPlaybackRate=1,M.hide(this.vastPlayer),this.adContainer.appendChild(this.vastPlayer)),this.contentPlayer.addEventListener("ended",function(){e.adOnStage||(e.contentPlayerCompleted=!0)}),this.vastPlayer.preload="auto",I.isMobile?(this.useContentPlayerForAds||this.contentPlayer.load(),this.vastPlayer.load()):this.useContentPlayerForAds&&this.vastPlayer.load(),this.rmpVastInitialized=!0},k.append=function(e,t){if(!this.vastPlayer)if(this.useContentPlayerForAds)this.vastPlayer=this.contentPlayer;else{var a=this.adContainer?this.adContainer.querySelector(".rmp-ad-vast-video-player"):void 0;if(null===a)return void L.process.call(this,900,!0);this.vastPlayer=a}if(this.creative.isLinear)e&&t&&he.update.call(this,e,t);else{if(this.params.outstream)return this.debug&&M.log("non-linear creative detected for outstream ad mode - discarding creative"),void L.process.call(this,201,!0);ne.update.call(this)}S.wire.call(this),!this.useContentPlayerForAds&&0<this.iconsData.length&&R.append.call(this)},k.setVolume=function(e){this.vastPlayer&&(this.vastPlayer.volume=e)},k.getVolume=function(){return this.vastPlayer?this.vastPlayer.volume:-1},k.setMute=function(e){this.vastPlayer&&(e&&!this.vastPlayer.muted?this.vastPlayer.muted=!0:!e&&this.vastPlayer.muted&&(this.vastPlayer.muted=!1))},k.getMute=function(){return!!this.vastPlayer&&this.vastPlayer.muted},k.play=function(e){this.vastPlayer&&this.vastPlayer.paused&&T.playPromise.call(this,"vast",e)},k.pause=function(){this.vastPlayer&&!this.vastPlayer.paused&&this.vastPlayer.pause()},k.getDuration=function(){if(this.vastPlayer){var e=this.vastPlayer.duration;if(M.isNumber(e))return Math.round(1e3*e)}return-1},k.getCurrentTime=function(){if(this.vastPlayer){var e=this.vastPlayer.currentTime;if(M.isNumber(e))return Math.round(1e3*e)}return-1},k.resumeContent=function(){k.destroy.call(this),this.contentPlayerCompleted||this.params.outstream||m.play.call(this),this.contentPlayerCompleted=!1},k),b={},pe=["video/webm","video/mp4","video/ogg","video/3gpp","application/vnd.apple.mpegurl","application/x-mpegurl","application/dash+xml"],S=(b.dispatch=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){Q.call(t,e)}):Q.call(this,e)},b.replaceMacros=function(e,t){var a,r,n,i,o;return/\[.+?\]/i.test(e)?((i=/\[(ADCOUNT|TRANSACTIONID|PLACEMENTTYPE|BREAKMAXDURATION|BREAKMINDURATION|BREAKMAXADS|BREAKMINADLENGTH|BREAKMAXADLENGTH|IFA|IFATYPE|CLIENTUA|SERVERUA|DEVICEIP|APPBUNDLE|EXTENSIONS|VERIFICATIONVENDORS|OMIDPARTNER|INVENTORYSTATE|CONTENTID|LATLONG)\]/gi).test(a=e)&&(a=a.replace(i,"-1")),(i=/\[(CONTENTURI|CLICKPOS)\]/gi).test(a)&&(a=a.replace(i,"-2")),i=/\[TIMESTAMP\]/gi,n=(new Date).toISOString(),i.test(a)&&(a=a.replace(i,encodeURIComponent(n))),(i=/\[CACHEBUSTING\]/gi).test(a)&&(a=a.replace(i,function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}())),n=/\[(CONTENTPLAYHEAD|MEDIAPLAYHEAD)\]/gi,i=m.getCurrentTime.call(this),n.test(a)&&-1<i&&(a=a.replace(n,encodeURIComponent(Z(i)))),n=/\[BREAKPOSITION\]/gi,o=N.getDuration.call(this),n.test(a)&&(a=0===i?a.replace(n,"1"):0<i&&i<o?a.replace(n,"2"):a.replace(n,"3")),(i=/\[ADTYPE\]/gi).test(a)&&this.ad.adType&&(a=a.replace(i,encodeURIComponent(this.ad.adType))),(o=/\[DEVICEUA\]/gi).test(a)&&I.userAgent&&(a=a.replace(o,encodeURIComponent(I.userAgent))),(n=/\[SERVERSIDE\]/gi).test(a)&&I.userAgent&&(a=a.replace(n,"0")),(i=/\[DOMAIN\]/gi).test(a)&&window.location.hostname&&(a=a.replace(i,encodeURIComponent(window.location.hostname))),(o=/\[PAGEURL\]/gi).test(a)&&window.location.href&&(a=a.replace(o,encodeURIComponent(window.location.href))),(n=/\[PLAYERCAPABILITIES\]/gi).test(a)&&(a=a.replace(n,"skip,mute,autoplay,mautoplay,fullscreen,icon")),(i=/\[CLICKTYPE\]/gi).test(a)&&(o="1",I.isMobile&&(o="2"),a=a.replace(i,o)),(n=/\[PLAYERSIZE\]/gi).test(a)&&(i=parseInt(M.getWidth(this.container)),o=parseInt(M.getHeight(this.container)),a=a.replace(n,encodeURIComponent(i.toString()+","+o.toString()))),t?(n=/\[ADPLAYHEAD\]/gi,i=N.getCurrentTime.call(this),n.test(a)&&-1<i&&(a=a.replace(n,encodeURIComponent(Z(i)))),(o=/\[UNIVERSALADID\]/gi).test(a)&&!M.isEmptyObject(this.creative.universalAdId)&&this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&(a=a.replace(o,encodeURIComponent(this.creative.universalAdId.idRegistry+" "+this.creative.universalAdId.value))),t=/\[ASSETURI\]/gi,n=this.getAdMediaUrl(),t.test(a)&&"string"==typeof n&&""!==n&&(a=a.replace(t,encodeURIComponent(n))),(i=/\[PODSEQUENCE\]/gi).test(a)&&this.ad.sequence&&(a=a.replace(i,encodeURIComponent(this.ad.sequence.toString()))),(o=/\[ADSERVINGID\]/gi).test(a)&&this.ad.adServingId&&(a=a.replace(o,encodeURIComponent(this.ad.adServingId)))):((t=/\[ADCATEGORIES\]/gi).test(a)&&0<this.ad.categories.length&&(n=this.ad.categories.map(function(e){return e.value}).join(","),a=a.replace(t,encodeURIComponent(n))),(i=/\[BLOCKEDADCATEGORIES\]/gi).test(a)&&0<this.ad.blockedAdCategories.length&&(o=this.ad.blockedAdCategories.map(function(e){return e.value}).join(","),a=a.replace(i,encodeURIComponent(o))),(t=/\[VASTVERSIONS\]/gi).test(a)&&(a=a.replace(t,"2,3,5,6,7,8,11,12,13,14")),(n=/\[APIFRAMEWORKS\]/gi).test(a)&&(a=a.replace(n,"2")),(i=/\[MEDIAMIME\]/gi).test(a)&&(r="",pe.forEach(function(e){I.canPlayType(e)&&(r+=e+",")}),r)&&(r=r.slice(0,-1),a=a.replace(i,encodeURIComponent(r))),(o=/\[PLAYERSTATE\]/gi).test(a)&&(t="",m.getMute()&&(t+="muted"),this.getFullscreen()&&(t&&(t+=","),t+="fullscreen"),a=a.replace(o,t))),(n=/\[LIMITADTRACKING\]/gi).test(a)&&this.regulationsInfo.limitAdTracking&&(a=a.replace(n,encodeURIComponent(this.regulationsInfo.limitAdTracking))),(i=/\[REGULATIONS\]/gi).test(a)&&this.regulationsInfo.regulations&&(a=a.replace(i,encodeURIComponent(this.regulationsInfo.regulations))),(o=/\[GDPRCONSENT\]/gi).test(a)&&this.regulationsInfo.gdprConsent?a.replace(o,encodeURIComponent(this.regulationsInfo.gdprConsent)):a):e},b.pingURI=function(e){e=b.replaceMacros.call(this,e,!0);J.call(this,e)},b.error=function(e){var t,a,r=this.adErrorTags;if(0<(r=303===e&&0<this.vastErrorTags.length?[].concat(r,this.vastErrorTags):r).length)for(var n=0,i=r.length;n<i;n++)r[n].url&&(t=r[n].url,(a=/\[ERRORCODE\]/gi).test(t)&&M.isNumber(e)&&0<e&&e<1e3&&(t=t.replace(a,e)),J.call(this,t))},b.wire=function(){this.vastPlayer&&this.creative.isLinear&&!this.isVPAID&&(this.onPause=function(){if(!this.vastPlayerPaused){this.vastPlayerPaused=!0,T.createApiEvent.call(this,"adpaused");for(var e=0,t=this.trackingTags.length;e<t;e++)if("pause"===this.trackingTags[e].event)return;b.dispatch.call(this,"pause")}}.bind(this),this.vastPlayer.addEventListener("pause",this.onPause),this.onPlay=function(){this.vastPlayerPaused&&(this.vastPlayerPaused=!1,T.createApiEvent.call(this,"adresumed"),b.dispatch.call(this,"resume"))}.bind(this),this.vastPlayer.addEventListener("play",this.onPlay),this.onPlaying=function(){this.vastPlayer.removeEventListener("playing",this.onPlaying),T.createApiEvent.call(this,["adimpression","adstarted"]),b.dispatch.call(this,["impression","creativeView","start"])}.bind(this),this.vastPlayer.addEventListener("playing",this.onPlaying),this.onEnded=function(){this.vastPlayer.removeEventListener("ended",this.onEnded),T.createApiEvent.call(this,"adcomplete"),b.dispatch.call(this,"complete"),N.resumeContent.call(this)}.bind(this),this.vastPlayer.addEventListener("ended",this.onEnded),this.onVolumeChange=function(){this.vastPlayer.muted||0===this.vastPlayer.volume?(T.createApiEvent.call(this,"advolumemuted"),b.dispatch.call(this,"mute"),this.vastPlayerMuted=!0):this.vastPlayerMuted&&(b.dispatch.call(this,"unmute"),this.vastPlayerMuted=!1),T.createApiEvent.call(this,"advolumechanged")}.bind(this),this.vastPlayer.addEventListener("volumechange",this.onVolumeChange),this.onTimeupdate=function(){var t=this;this.vastPlayerCurrentTime=N.getCurrentTime.call(this),0<this.vastPlayerCurrentTime&&(0<this.vastPlayerDuration&&this.vastPlayerDuration>this.vastPlayerCurrentTime&&(this.vastPlayerCurrentTime>=.25*this.vastPlayerDuration&&!this.firstQuartileEventFired?(this.firstQuartileEventFired=!0,T.createApiEvent.call(this,"adfirstquartile"),b.dispatch.call(this,"firstQuartile")):this.vastPlayerCurrentTime>=.5*this.vastPlayerDuration&&!this.midpointEventFired?(this.midpointEventFired=!0,T.createApiEvent.call(this,"admidpoint"),b.dispatch.call(this,"midpoint")):this.vastPlayerCurrentTime>=.75*this.vastPlayerDuration&&!this.thirdQuartileEventFired&&(this.thirdQuartileEventFired=!0,T.createApiEvent.call(this,"adthirdquartile"),b.dispatch.call(this,"thirdQuartile"))),0<this.progressEvents.length)&&this.vastPlayerCurrentTime>this.progressEvents[0].time&&(this.progressEvents.filter(function(e){return e.time===t.progressEvents[0].time}).forEach(function(e){e.url&&b.pingURI.call(t,e.url)}),this.progressEvents.shift(),T.createApiEvent.call(this,"adprogress"))}.bind(this),this.vastPlayer.addEventListener("timeupdate",this.onTimeupdate))},b),fe=[303,900,1001],me=[201,204,205,400,401,402,403,501,502,503,603,901,1002],ge=[{code:201,description:"Video player expecting different linearity."},{code:204,description:"Ad category was required but not provided."},{code:205,description:"Inline Category violates Wrapper BlockedAdCategories."},{code:303,description:"No VAST response after one or more Wrappers."},{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},{code:402,description:"Timeout of MediaFile URI."},{code:403,description:"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},{code:503,description:"Couldn't find NonLinear resource with supported type."},{code:603,description:"Unable to fetch CompanionAds/Companion resource."},{code:900,description:"Undefined Error."},{code:901,description:"General VPAID error."},{code:1001,description:"Invalid input for loadAds method"},{code:1002,description:"Required DOMParser API is not available"}],L=((c={}).process=function(e,t){t&&S.error.call(this,e),function(t){var e=ge.filter(function(e){return e.code===t});0<e.length?(this.vastErrorCode=e[0].code,this.vastErrorMessage=e[0].description):(this.vastErrorCode=-1,this.vastErrorMessage="Error getting VAST error"),-1<this.vastErrorCode&&(-1<fe.indexOf(this.vastErrorCode)?this.adErrorType="adLoadError":-1<me.indexOf(this.vastErrorCode)&&(this.adErrorType="adPlayError")),this.debug&&M.log("VAST error code is "+this.vastErrorCode+" - VAST error message is "+this.vastErrorMessage+" - Ad error type is "+this.adErrorType)}.call(this,e),T.createApiEvent.call(this,"aderror"),N.resumeContent.call(this)},c),E={filterParams:function(e){if(this.params={ajaxTimeout:5e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,labels:{skipMessage:"Skip ad",closeAd:"Close ad",textForClickUIOnMobile:"Learn more"},enableVpaid:!0,outstream:!1,showControlsForVastPlayer:!0,vpaidSettings:{width:640,height:360,viewMode:"normal",desiredBitrate:500},omidSupport:!1,omidAllowedVendors:[],omidPathTo:"../externals/omweb-v1.js",autoplay:!1,partnerName:"Radiantmediaplayer",partnerVersion:"6.3.0"},e&&"object"==(void 0===e?"undefined":lt(e)))for(var t=Object.keys(e),a=0,r=t.length;a<r;a++){var n=t[a];lt(e[n])==lt(this.params[n])&&(M.isNumber(e[n])&&0<e[n]||"number"!=typeof e[n])&&("vpaidSettings"===n?(M.isNumber(e.vpaidSettings.width)&&0<e.vpaidSettings.width&&(this.params.vpaidSettings.width=e.vpaidSettings.width),M.isNumber(e.vpaidSettings.height)&&0<e.vpaidSettings.height&&(this.params.vpaidSettings.height=e.vpaidSettings.height),"string"==typeof e.vpaidSettings.viewMode&&"fullscreen"===e.vpaidSettings.viewMode&&(this.params.vpaidSettings.viewMode=e.vpaidSettings.viewMode),M.isNumber(e.vpaidSettings.desiredBitrate)&&0<e.vpaidSettings.desiredBitrate&&(this.params.vpaidSettings.desiredBitrate=e.vpaidSettings.desiredBitrate)):this.params[n]=e[n])}}},T=(E.createApiEvent=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){ee.call(t,e)}):ee.call(this,e)},E.playPromise=function(t,a){var e,r,n=this;switch(t){case"content":e=this.contentPlayer;break;case"vast":e=this.vastPlayer}e&&void 0!==(r=e.play())&&r.then(function(){a&&(n.debug&&M.log("initial play promise on "+t+" player has succeeded"),E.createApiEvent.call(n,"adinitialplayrequestsucceeded"))}).catch(function(e){a&&"vast"===t&&n.creative.isLinear?(n.debug&&M.log("initial play promise on VAST player has been rejected for linear asset - likely autoplay is being blocked",e),L.process.call(n,400,!0),E.createApiEvent.call(n,"adinitialplayrequestfailed")):a&&"content"===t&&!n.creative.isLinear?(n.debug&&M.log("initial play promise on content player has been rejected for non-linear asset - likely autoplay is being blocked",e),E.createApiEvent.call(n,"adinitialplayrequestfailed")):n.debug&&M.log("playPromise on "+t+" player has been rejected",e)})},E.accessibleButton=function(a,e){a.tabIndex=0,a.setAttribute("role","button"),a.addEventListener("keyup",function(e){var t=e.which;13!==t&&32!==t||(e.stopPropagation(),e.preventDefault(),M.createStdEvent("click",a))}),e&&a.setAttribute("aria-label",e)},E),ye={parse:function(e){this.validCompanionAds=[],this.companionAdsRequiredAttribute="",null===e.required&&(this.companionAdsRequiredAttribute=e.required);var t=e.variations;if(0<t.length)for(var a=0,r=t.length;a<r;a++){for(var n=t[a],i=n.staticResources,o=n.iframeResources,s=n.htmlResources,l=void 0,u=0,c=i.length;u<c;u++)if(i[u].url){l=i[u].url;break}for(var d=void 0,h=0,p=o.length;h<p;h++)if(o[h]){d=o[h];break}for(var f=void 0,m=0,g=s.length;m<g;m++)if(s[m]){f=s[m];break}var y=n.width,v=n.height;if(l||d||f){var _={width:y,height:v,imageUrl:l,iframeUrl:d,htmlContent:f};if(n.companionClickThroughURLTemplate&&(_.companionClickThroughUrl=n.companionClickThroughURLTemplate),0<n.companionClickTrackingURLTemplates.length&&(_.companionClickTrackingUrls=n.companionClickTrackingURLTemplates),n.altText&&(_.altText=n.altText),n.adSlotID&&(_.adSlotID=n.adSlotID),_.trackingEventsUrls=[],n.trackingEvents&&n.trackingEvents.creativeView)for(var k=0,b=n.trackingEvents.creativeView.length;k<b;k++)_.trackingEventsUrls.push(n.trackingEvents.creativeView[k]);this.validCompanionAds.push(_)}}this.debug&&M.log("parse companion ads follow",this.validCompanionAds)}},ve=((h={}).init=function(){var t=this;this.viewableObserver&&this.viewableObserver.unobserve(this.container),0<this.ad.viewableImpression.viewable.length&&this.ad.viewableImpression.viewable.forEach(function(e){t.trackingTags.push({event:"viewable",url:e})}),0<this.ad.viewableImpression.notviewable.length&&this.ad.viewableImpression.notviewable.forEach(function(e){t.trackingTags.push({event:"notviewable",url:e})}),0<this.ad.viewableImpression.viewundetermined.length&&this.ad.viewableImpression.viewundetermined.forEach(function(e){t.trackingTags.push({event:"viewundetermined",url:e})}),this.attachViewableObserver=te.call(this),this.container.addEventListener("adstarted",this.attachViewableObserver)},h),_e=["error","loadeddata","pause","play","timeupdate","volumechange"],ke=document.location.href,be=((l=Se.prototype).init=function(){var t=this;this.OMIframe=this.createOMIframe_(),this.OMIframe.onload=this.onOMWebIframeLoaded_.bind(this);try{document.body.appendChild(this.OMIframe)}catch(t){M.trace(t),document.head.appendChild(this.OMIframe)}_e.forEach(function(e){t.videoElement.addEventListener(e,function(e){return t.vastPlayerDidDispatchEvent_(e)})})},l.destroy=function(){this.adSession.finish(),M.removeElement(this.OMIframe)},l.pingVerificationNotExecuted_=function(e,a){var r=this;void 0!==e.trackingEvents&&Array.isArray(e.trackingEvents.verificationNotExecuted)&&0<e.trackingEvents.verificationNotExecuted.length&&e.trackingEvents.verificationNotExecuted.forEach(function(e){var t=/\[REASON\]/gi;t.test(e)&&(e=e.replace(t,a)),r.log&&M.log("OmSdkManager: ping VerificationNotExecuted at URI "+e),S.pingURI(e)})},l.createOMIframe_=function(){var e=document.createElement("iframe");return e.sandbox="allow-scripts allow-same-origin",e.style.display="none",e.srcdoc="<script src="+this.params.omidPathTo+"><\/script>",this.log&&M.log("OmSdkManager: load omweb-v1.js at URI "+this.params.omidPathTo),e},l.vastPlayerDidDispatchTimeUpdate_=function(){var e,t,a=this;this.adEvents&&this.mediaEvents&&0!==this.videoElement.playbackRate&&(t=this.videoElement.currentTime,e=this.videoElement.duration,-1<t)&&0<e&&(1<=t&&"preroll"===this.videoPosition&&this.videoPosition,t=t/e,this.lastVideoTime<0&&0<=t?(this.adEvents.impressionOccurred(),this.mediaEvents.start(e,this.videoElement.volume)):this.lastVideoTime<.25&&.25<=t?this.mediaEvents.firstQuartile():this.lastVideoTime<.5&&.5<=t?this.mediaEvents.midpoint():this.lastVideoTime<.75&&.75<=t?this.mediaEvents.thirdQuartile():this.lastVideoTime<1&&1<=t&&(this.videoPosition="postroll",this.mediaEvents.complete(),this.adEvents=null,this.mediaEvents=null,setTimeout(function(){a.destroy()},300)),this.lastVideoTime=t)},l.vastPlayerDidDispatchEvent_=function(e){var t;if(this.adSession&&this.adEvents&&this.mediaEvents&&this.VastProperties)switch(e.type){case"error":this.adSession.error("video",this.videoElement.error.message);break;case"loadeddata":this.skipTimeOffset<0&&(this.skipTimeOffset=0),this.params.outstream&&(this.videoPosition="standalone"),t=new this.VastProperties(this.isSkippableAd,this.skipTimeOffset,this.params.autoplay,this.videoPosition),this.adEvents.loaded(t);break;case"pause":this.mediaEvents.pause();break;case"play":0<this.videoElement.currentTime&&this.mediaEvents.resume();break;case"timeupdate":this.vastPlayerDidDispatchTimeUpdate_();break;case"volumechange":t=this.videoElement.muted?0:this.videoElement.volume,this.mediaEvents.volumeChange(t)}},l.onOMWebIframeLoaded_=function(){this.log&&M.log("OmSdkManager: iframe content loaded");for(var e,t=[],a=[],r=0,n=this.adVerifications.length;r<n;r++){var i=this.adVerifications[r];"string"==typeof i.resource&&""!==i.resource&&(void 0!==i.type&&"executable"===i.type||void 0!==i.apiFramework&&"omid"!==i.apiFramework?this.pingVerificationNotExecuted_(i,"2"):0<this.params.omidAllowedVendors.length&&void 0!==i.vendor&&!this.params.omidAllowedVendors.includes(i.vendor)||(void 0===i.browserOptional||!0!==i.browserOptional?t.push(i):a.push(r)))}if(0===t.length&&0<a.length)for(var o=0,s=a.length;o<s;o++)t.push(this.adVerifications[a[o]]);this.adVerifications=t;try{e=OmidSessionClient.default}catch(e){return void M.trace(e)}var l=e.AdSession,u=e.Partner,c=e.Context,d=e.VerificationScriptResource,h=e.AdEvents,p=e.MediaEvents,u=(this.VastProperties=e.VastProperties,new u(this.params.partnerName,this.params.partnerVersion)),f=this.adVerifications.map(function(e){return new d(e.resource,e.vendor,e.verificationParameters,"full")}),c=(this.log&&M.log(null,f),new c(u,f,ke)),u=(this.log&&(c.underEvaluation=!0),this.OMIframe.contentWindow);u&&(c.setServiceWindow(u),c.setVideoElement(this.videoElement),this.adSession=new l(c),this.adSession.setCreativeType("video"),this.adSession.setImpressionType("beginToRender"),this.adSession.isSupported())?(this.adEvents=new h(this.adSession),this.mediaEvents=new p(this.adSession),this.adSession.start()):this.log&&M.log("OmSdkManager: invalid serviceWindow - return")},Se);function Se(e,t,a,r,n,i){this.adEvents=null,this.mediaEvents=null,this.adSession=null,this.OMIframe=null,this.VastProperties=null,this.lastVideoTime=-1,this.videoElement=t,this.log=i,this.adVerifications=e,this.params=a,this.isSkippableAd=r,this.skipTimeOffset=n,this.videoPosition="preroll",this.log&&M.log("OmSdkManager: create new class Instance")}r(5115);var x=null,Ee={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},Te=((e=xe.prototype).initStorage=function(){if(!x){try{x="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){x=null}x&&!this.isStorageDisabled(x)||(x=Ee).clear()}return x},e.isStorageDisabled=function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1},e.getItem=function(e){return this.storage.getItem(e)},e.setItem=function(e,t){return this.storage.setItem(e,t)},e.removeItem=function(e){return this.storage.removeItem(e)},e.clear=function(){return this.storage.clear()},xe);function xe(){this.storage=this.initStorage()}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){return{id:(e=void 0===e?{}:e).id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}r(9115),r(6997),r(3946),r(9622);var Ce=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function we(e,t,a){void 0===t&&(t={}),void 0===a&&(a={});var r,n,i=[],o=Re(e);for(r in!t.ERRORCODE||a.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=Oe(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[r]=Le(t[r]);for(n in o){var s=o[n];"string"==typeof s&&i.push(Me(s,t))}return i}function Me(e,t){var t=(e=Ie(e,t)).match(/[^[\]]+(?=])/g);return!t||0===(t=t.filter(function(e){return-1<Ce.indexOf(e)})).length?e:Ie(e,t=t.reduce(function(e,t){return e[t]=-1,e},{}))}function Ie(e,t){var a,r=e;for(a in t)var n=t[a],r=r.replace(new RegExp("(?:\\[|%%)("+a+")(?:\\]|%%)","g"),n);return r}function Re(e){return Array.isArray(e)?e.map(function(e){return e&&e.hasOwnProperty("url")?e.url:e}):e}function De(e,t){for(var a=0;a<t.length;a++)if(Ne(t[a],e))return!0;return!1}function Ne(e,t){var a,r;return!(!e||!t)&&(a=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t),a.length===r.length)&&e.id===t.id&&e.url===t.url}function Le(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function Oe(e,t){void 0===t&&(t=8);e=String(e);return e.length<t?Ue(0,t-e.length,!1).map(function(){return"0"}).join("")+e:e}function Ue(e,t,a){for(var r=[],n=e<t,i=a?n?t+1:t-1:t,o=e;n?o<i:i<o;n?o++:o--)r.push(o);return r}var A={track:function(e,t,a){we(e,t,a).forEach(function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)})},resolveURLTemplates:we,extractURLsFromTemplates:Re,containsTemplateObject:De,isTemplateObjectEqual:Ne,encodeURIComponentRFC3986:Le,replaceUrlMacros:Me,leftpad:Oe,range:Ue,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function a(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?a(t):t)},[])},joinArrayOfUniqueTemplateObjs:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);e=Array.isArray(e)?e:[],t=Array.isArray(t)?t:[];return e.concat(t).reduce(function(e,t){return De(t,e)||e.push(t),e},[])}};function Be(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var P={childByName:function(e,t){var a,r=e.childNodes;for(a in r){var n=r[a];if(n.nodeName===t)return n}},childrenByName:function(e,t){var a,r=[],n=e.childNodes;for(a in n){var i=n[a];i.nodeName===t&&r.push(i)}return r},resolveVastAdTagURI:function(e,t){return t?0===e.indexOf("//")?""+location.protocol+e:-1===e.indexOf("://")?t.slice(0,t.lastIndexOf("/"))+"/"+e:e:e},parseBoolean:Be,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,a){t=t.getAttribute(e);t&&a.setAttribute(e,t)},parseAttributes:function(e){for(var t=e.attributes,a={},r=0;r<t.length;r++)a[t[r].nodeName]=t[r].nodeValue;return a},parseDuration:function(e){var t,a;return null==e?-1:A.isNumeric(e)?parseInt(e):3!==(e=e.split(":")).length||(a=e[2].split("."),t=parseInt(a[0]),2===a.length&&(t+=parseFloat("0."+a[1])),a=parseInt(60*e[1]),e=parseInt(60*e[0]*60),isNaN(e))||isNaN(a)||isNaN(t)||3600<a||60<t?-1:e+a+t},splitVAST:function(a){var r=[],n=null;return a.forEach(function(e,t){if(e.sequence&&(e.sequence=parseInt(e.sequence,10)),1<e.sequence){t=a[t-1];if(t&&t.sequence===e.sequence-1)return void(n&&n.push(e));delete e.sequence}n=[e],r.push(n)}),r},assignAttributes:function(e,t){if(e)for(var a in e){var r,a=e[a];a.nodeName&&a.nodeValue&&t.hasOwnProperty(a.nodeName)&&(r=a.nodeValue,"boolean"==typeof t[a.nodeName]&&(r=Be(r)),t[a.nodeName]=r)}},mergeWrapperAdData:function(e,r){e.errorURLTemplates=r.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=r.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=r.extensions.concat(e.extensions),e.followAdditionalWrappers=r.followAdditionalWrappers,e.allowMultipleAds=r.allowMultipleAds,e.fallbackOnNoAd=r.fallbackOnNoAd;var t=(r.creatives||[]).filter(function(e){return e&&"companion"===e.type}),n=t.reduce(function(t,e){return(e.variations||[]).forEach(function(e){(e.companionClickTrackingURLTemplates||[]).forEach(function(e){A.containsTemplateObject(e,t)||t.push(e)})}),t},[]),i=(e.creatives=t.concat(e.creatives),r.videoClickTrackingURLTemplates&&r.videoClickTrackingURLTemplates.length),o=r.videoCustomClickURLTemplates&&r.videoCustomClickURLTemplates.length;e.creatives.forEach(function(e){if(r.trackingEvents&&r.trackingEvents[e.type])for(var t in r.trackingEvents[e.type]){var a=r.trackingEvents[e.type][t];Array.isArray(e.trackingEvents[t])||(e.trackingEvents[t]=[]),e.trackingEvents[t]=e.trackingEvents[t].concat(a)}"linear"===e.type&&(i&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(r.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(r.videoCustomClickURLTemplates)),!r.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=r.videoClickThroughURLTemplate)),"companion"===e.type&&n.length&&(e.variations||[]).forEach(function(e){e.companionClickTrackingURLTemplates=A.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,n)})}),r.adVerifications&&(e.adVerifications=e.adVerifications.concat(r.adVerifications)),r.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(r.blockedAdCategories))}};function Fe(e,t){t={id:(t=Pe(void 0===t?{}:t)).id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"companion",required:null,variations:[]};return t.required=e.getAttribute("required")||null,t.variations=P.childrenByName(e,"Companion").map(function(e){var a={id:(t=void 0===(t=P.parseAttributes(e))?{}:t).id||null,adType:"companionAd",width:t.width||0,height:t.height||0,assetWidth:t.assetWidth||null,assetHeight:t.assetHeight||null,expandedWidth:t.expandedWidth||null,expandedHeight:t.expandedHeight||null,apiFramework:t.apiFramework||null,adSlotID:t.adSlotID||null,pxratio:t.pxratio||"1",renderingMode:t.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}},t=(a.htmlResources=P.childrenByName(e,"HTMLResource").reduce(function(e,t){t=P.parseNodeText(t);return t?e.concat(t):e},[]),a.iframeResources=P.childrenByName(e,"IFrameResource").reduce(function(e,t){t=P.parseNodeText(t);return t?e.concat(t):e},[]),a.staticResources=P.childrenByName(e,"StaticResource").reduce(function(e,t){var a=P.parseNodeText(t);return a?e.concat({url:a,creativeType:t.getAttribute("creativeType")||null}):e},[]),a.altText=P.parseNodeText(P.childByName(e,"AltText"))||null,P.childByName(e,"TrackingEvents")),t=(t&&P.childrenByName(t,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=P.parseNodeText(e);t&&e&&(Array.isArray(a.trackingEvents[t])||(a.trackingEvents[t]=[]),a.trackingEvents[t].push(e))}),a.companionClickTrackingURLTemplates=P.childrenByName(e,"CompanionClickTracking").map(function(e){return{id:e.getAttribute("id")||null,url:P.parseNodeText(e)}}),a.companionClickThroughURLTemplate=P.parseNodeText(P.childByName(e,"CompanionClickThrough"))||null,P.childByName(e,"AdParameters"));return t&&(a.adParameters=P.parseNodeText(t),a.xmlEncoded=t.getAttribute("xmlEncoded")||null),a}),t}function je(e,t){var r,o={id:(t=Pe(void 0===t?{}:t)).id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}},t=(o.duration=P.parseDuration(P.parseNodeText(P.childByName(e,"Duration"))),e.getAttribute("skipoffset")),a=(null==t?o.skipDelay=null:"%"===t.charAt(t.length-1)&&-1!==o.duration?(a=parseInt(t,10),o.skipDelay=o.duration*(a/100)):o.skipDelay=P.parseDuration(t),P.childByName(e,"VideoClicks")),t=(a&&(t=P.childByName(a,"ClickThrough"),o.videoClickThroughURLTemplate=t?{id:t.getAttribute("id")||null,url:P.parseNodeText(t)}:null,P.childrenByName(a,"ClickTracking").forEach(function(e){o.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:P.parseNodeText(e)})}),P.childrenByName(a,"CustomClick").forEach(function(e){o.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:P.parseNodeText(e)})})),P.childByName(e,"AdParameters")),a=(t&&(o.adParameters=P.parseNodeText(t)),P.childrenByName(e,"TrackingEvents").forEach(function(e){P.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),a=P.parseNodeText(e);if(t&&a){if("progress"===t){if(!(r=e.getAttribute("offset")))return;t="%"===r.charAt(r.length-1)?"progress-"+r:"progress-"+Math.round(P.parseDuration(r))}Array.isArray(o.trackingEvents[t])||(o.trackingEvents[t]=[]),o.trackingEvents[t].push(a)}})}),P.childrenByName(e,"MediaFiles").forEach(function(e){P.childrenByName(e,"MediaFile").forEach(function(e){var t,a;o.mediaFiles.push(((t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null}).id=(e=e).getAttribute("id"),t.fileURL=P.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0),(a=e.getAttribute("scalable"))&&"string"==typeof a&&(t.scalable=P.parseBoolean(a)),(a=e.getAttribute("maintainAspectRatio"))&&"string"==typeof a&&(t.maintainAspectRatio=P.parseBoolean(a)),t))});var t=P.childByName(e,"InteractiveCreativeFile"),t=(t&&(o.interactiveCreativeFile=(t=t,(i={type:(i=void 0===(i=P.parseAttributes(t))?{}:i).type||null,apiFramework:i.apiFramework||null,variableDuration:P.parseBoolean(i.variableDuration),fileURL:null}).fileURL=P.parseNodeText(t),i)),P.childByName(e,"ClosedCaptionFiles"));t&&P.childrenByName(t,"ClosedCaptionFile").forEach(function(e){var t={type:(t=void 0===(t=P.parseAttributes(e))?{}:t).type||null,language:t.language||null,fileURL:null};t.fileURL=P.parseNodeText(e),o.closedCaptionFiles.push(t)});var a,r,n,i=P.childByName(e,"Mezzanine"),t=(a=i,n=!(r={}),["delivery","type","width","height"].forEach(function(e){a&&a.getAttribute(e)?r[e]=a.getAttribute(e):n=!0}),n?null:r);t&&((e={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"}).id=i.getAttribute("id"),e.fileURL=P.parseNodeText(i),e.delivery=t.delivery,e.codec=i.getAttribute("codec"),e.type=t.type,e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),e.fileSize=parseInt(i.getAttribute("fileSize"),10),e.mediaType=i.getAttribute("mediaType")||"2D",o.mezzanine=e)}),P.childByName(e,"Icons"));return a&&P.childrenByName(a,"Icon").forEach(function(e){var t,a;o.icons.push(((t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null}).program=(e=e).getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=(a=e.getAttribute("xPosition"),-1!==["left","right"].indexOf(a)?a:parseInt(a||0)),t.yPosition=(a=e.getAttribute("yPosition"),-1!==["top","bottom"].indexOf(a)?a:parseInt(a||0)),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=P.parseDuration(e.getAttribute("offset")),t.duration=P.parseDuration(e.getAttribute("duration")),P.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=P.parseNodeText(e)}),P.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=P.parseNodeText(e)}),P.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=P.parseNodeText(e)}),(a=P.childByName(e,"IconClicks"))&&(t.iconClickThroughURLTemplate=P.parseNodeText(P.childByName(a,"IconClickThrough")),P.childrenByName(a,"IconClickTracking").forEach(function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:P.parseNodeText(e)})})),t.iconViewTrackingURLTemplate=P.parseNodeText(P.childByName(e,"IconViewTracking")),t))}),o}function Ve(e){var t=[];return e.forEach(function(e){e=function e(t){if("#comment"===t.nodeName)return null;var a={name:null,value:null,attributes:{},children:[]},r=t.attributes,n=t.childNodes;if(a.name=t.nodeName,t.attributes)for(var i in r)r.hasOwnProperty(i)&&(i=r[i]).nodeName&&i.nodeValue&&(a.attributes[i.nodeName]=i.nodeValue);for(var o in n)n.hasOwnProperty(o)&&(o=e(n[o]))&&a.children.push(o);(0===a.children.length||1===a.children.length&&0<=["#cdata-section","#text"].indexOf(a.children[0].name))&&(""!==(t=P.parseNodeText(t))&&(a.value=t),a.children=[]);return null===(t=a).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:a}(e);e&&t.push(e)}),t}function $e(e){var l=[];return e.forEach(function(e){var t,a,r,n={id:e.getAttribute("id")||null,adId:(i=e).getAttribute("AdID")||i.getAttribute("adID")||i.getAttribute("adId")||null,sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},i=P.childByName(e,"UniversalAdId"),i=(i&&(t={idRegistry:i.getAttribute("idRegistry")||"unknown",value:P.parseNodeText(i)}),P.childByName(e,"CreativeExtensions"));for(r in i&&(a=Ve(P.childrenByName(i,"CreativeExtension"))),e.childNodes){var o=e.childNodes[r],s=void 0;switch(o.nodeName){case"Linear":s=je(o,n);break;case"NonLinearAds":s=function(e,t){var r={id:(t=Pe(void 0===t?{}:t)).id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}};return P.childrenByName(e,"TrackingEvents").forEach(function(e){var t,a;P.childrenByName(e,"Tracking").forEach(function(e){t=e.getAttribute("event"),a=P.parseNodeText(e),t&&a&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(a))})}),P.childrenByName(e,"NonLinear").forEach(function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null},a=(t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=P.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=P.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=P.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),P.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=P.parseNodeText(e)}),P.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=P.parseNodeText(e)}),P.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=P.parseNodeText(e)}),P.childByName(e,"AdParameters"));a&&(t.adParameters=P.parseNodeText(a)),t.nonlinearClickThroughURLTemplate=P.parseNodeText(P.childByName(e,"NonLinearClickThrough")),P.childrenByName(e,"NonLinearClickTracking").forEach(function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:P.parseNodeText(e)})}),r.variations.push(t)}),r}(o,n);break;case"CompanionAds":s=Fe(o,n)}s&&(t&&(s.universalAdId=t),a&&(s.creativeExtensions=a),l.push(s))}}),l}r(6059);var C={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function w(e,t){var a=e.name,r=e.parentName,n=e.attributes,i=e.subElements,e=e.oneOfResources,a="Element '"+a+"'";t("VAST-warning",{message:a+=n?" missing required attribute(s) '"+n.join(", ")+"' ":i?" missing required sub element(s) '"+i.join(", ")+"' ":e?" must provide one of the following '"+e.join(", ")+"' ":" is empty",parentElement:r,specVersion:4.1})}function Ge(e,t,a){if(e&&e.nodeName)if("InLine"===e.nodeName&&(a=!0),u=t,C[(l=e).nodeName]&&C[l.nodeName].attributes&&0<(c=C[l.nodeName].attributes.filter(function(e){return!l.getAttribute(e)})).length&&w({name:l.nodeName,parentName:l.parentNode.nodeName,attributes:c},u),(c=e).children&&0!==c.children.length){u=t,i=a,o=C[(n=e).nodeName],s=!i&&"Wrapper"!==n.nodeName,o&&!s&&(o.subElements&&0<(s=o.subElements.filter(function(e){return!P.childByName(n,e)})).length&&w({name:n.nodeName,parentName:n.parentNode.nodeName,subElements:s},u),i)&&o.oneOfinLineResources&&(o.oneOfinLineResources.some(function(e){return P.childByName(n,e)})||w({name:n.nodeName,parentName:n.parentNode.nodeName,oneOfResources:o.oneOfinLineResources},u));for(var r=0;r<e.children.length;r++)Ge(e.children[r],t,a)}else 0===P.parseNodeText(e).length&&w({name:e.nodeName,parentName:e.parentNode.nodeName},t);var n,i,o,s,l,u,c}function He(e,t,a){var r,n,i,a=void 0===a?{}:a,o=a.allowMultipleAds,s=a.followAdditionalWrappers,l=e.childNodes;for(r in l){var u=l[r];if(-1!==["Wrapper","InLine"].indexOf(u.nodeName)&&("Wrapper"!==u.nodeName||!1!==s)){if(P.copyNodeAttribute("id",e,u),P.copyNodeAttribute("sequence",e,u),P.copyNodeAttribute("adType",e,u),"Wrapper"===u.nodeName)return{ad:function(e,t){var r=We(e,t),t=e.getAttribute("followAdditionalWrappers"),a=e.getAttribute("allowMultipleAds"),n=e.getAttribute("fallbackOnNoAd"),t=(r.followAdditionalWrappers=!t||P.parseBoolean(t),r.allowMultipleAds=!!a&&P.parseBoolean(a),r.fallbackOnNoAd=n?P.parseBoolean(n):null,P.childByName(e,"VASTAdTagURI"));if(t?r.nextWrapperURL=P.parseNodeText(t):(t=P.childByName(e,"VASTAdTagURL"))&&(r.nextWrapperURL=P.parseNodeText(P.childByName(t,"URL"))),r.creatives.forEach(function(a){if(-1!==["linear","nonlinear"].indexOf(a.type)){if(a.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[a.type]||(r.trackingEvents[a.type]={});for(var e in a.trackingEvents)!function(t){var e=a.trackingEvents[t];Array.isArray(r.trackingEvents[a.type][t])||(r.trackingEvents[a.type][t]=[]),e.forEach(function(e){r.trackingEvents[a.type][t].push(e)})}(e)}a.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),a.videoClickTrackingURLTemplates.forEach(function(e){r.videoClickTrackingURLTemplates.push(e)})),a.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=a.videoClickThroughURLTemplate),a.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),a.videoCustomClickURLTemplates.forEach(function(e){r.videoCustomClickURLTemplates.push(e)}))}}),r.nextWrapperURL)return r}(u,t),type:"WRAPPER"};if("InLine"===u.nodeName)return{ad:(u=u,n=t,!(i={allowMultipleAds:o})===(void 0===i?{}:i).allowMultipleAds&&u.getAttribute("sequence")?null:We(u,n)),type:"INLINE"}}}}function We(e,t){var a=[];t&&Ge(e,t);var r,n=e.childNodes,i={id:(t=void 0===(t=P.parseAttributes(e))?{}:t).id||null,sequence:t.sequence||null,adType:t.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null};for(r in n){var o=n[r];switch(o.nodeName){case"Error":i.errorURLTemplates.push(P.parseNodeText(o));break;case"Impression":i.impressionURLTemplates.push({id:o.getAttribute("id")||null,url:P.parseNodeText(o)});break;case"Creatives":i.creatives=$e(P.childrenByName(o,"Creative"));break;case"Extensions":var s=P.childrenByName(o,"Extension");i.extensions=Ve(s),i.adVerifications.length||(a=function(e){var t=null,a=[];return e.some(function(e){return t=P.childByName(e,"AdVerifications")}),a=t?ze(P.childrenByName(t,"Verification")):a}(s));break;case"AdVerifications":i.adVerifications=ze(P.childrenByName(o,"Verification"));break;case"AdSystem":i.system={value:P.parseNodeText(o),version:o.getAttribute("version")||null};break;case"AdTitle":i.title=P.parseNodeText(o);break;case"AdServingId":i.adServingId=P.parseNodeText(o);break;case"Category":i.categories.push({authority:o.getAttribute("authority")||null,value:P.parseNodeText(o)});break;case"Expires":i.expires=parseInt(P.parseNodeText(o),10);break;case"ViewableImpression":i.viewableImpression=function(e){var t,a={},r=(a.id=e.getAttribute("id")||null,e.childNodes);for(t in r){var n=r[t],i=n.nodeName,n=P.parseNodeText(n);"Viewable"!==i&&"NotViewable"!==i&&"ViewUndetermined"!==i||!n||(i=i.toLowerCase(),Array.isArray(a[i])||(a[i]=[]),a[i].push(n))}return a}(o);break;case"Description":i.description=P.parseNodeText(o);break;case"Advertiser":i.advertiser={id:o.getAttribute("id")||null,value:P.parseNodeText(o)};break;case"Pricing":i.pricing={value:P.parseNodeText(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":i.survey=P.parseNodeText(o);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:o.getAttribute("authority")||null,value:P.parseNodeText(o)})}}return a.length&&(i.adVerifications=i.adVerifications.concat(a)),i}function ze(e){var i=[];return e.forEach(function(e){var t,a={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=e.childNodes;for(t in P.assignAttributes(e.attributes,a),r){var n=r[t];switch(n.nodeName){case"JavaScriptResource":case"ExecutableResource":a.resource=P.parseNodeText(n),P.assignAttributes(n.attributes,a);break;case"VerificationParameters":a.parameters=P.parseNodeText(n)}}e=P.childByName(e,"TrackingEvents");e&&P.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=P.parseNodeText(e);t&&e&&(Array.isArray(a.trackingEvents[t])||(a.trackingEvents[t]=[]),a.trackingEvents[t].push(e))}),i.push(a)}),i}function Ke(){this._handlers=[]}function qe(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function Ye(e,t,a){var r=a?408:e.status,a=a?"XHRURLHandler: Request timed out after "+e.timeout+" ms ("+r+")":"XHRURLHandler: "+e.statusText+" ("+r+")";t(new Error(a),null,{statusCode:r})}function Xe(e,t,a){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return a(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=qe();r.open("GET",e),r.timeout=t.timeout||12e4,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){var e,t;t=a,200===(e=r).status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):Ye(e,t,!1)},r.onerror=function(){return Ye(r,a,!1)},r.onabort=function(){return Ye(r,a,!1)},r.ontimeout=function(){return Ye(r,a,!0)},r.send()}catch(e){a(new Error("XHRURLHandler: Unexpected error"))}}function Qe(e,t){!e||!t||e<=0||t<=0||(tt=(tt*et+8*e/t)/++et)}(u=Ke.prototype).on=function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type "+(void 0===t?"undefined":lt(t)));if(e)return this._handlers.push({event:e,handler:t}),this;throw new TypeError("The event argument must be of type String. Received type "+(void 0===e?"undefined":lt(e)))},u.once=function(e,t){return this.on(e,(r=this,n=e,i=t,(o={fired:!1,wrapFn:void 0}).wrapFn=a));function a(){o.fired||(r.off(n,o.wrapFn),o.fired=!0,i.bind(r).apply(void 0,arguments))}var r,n,i,o},u.off=function(t,a){return this._handlers=this._handlers.filter(function(e){return e.event!==t||e.handler!==a}),this},u.emit=function(t){for(var e=arguments.length,a=new Array(1<e?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];var n=!1;return this._handlers.forEach(function(e){"*"===e.event&&(n=!0,e.handler.apply(e,[t].concat(a))),e.event===t&&(n=!0,e.handler.apply(e,a))}),n},u.removeAllListeners=function(t){return this._handlers=t?this._handlers.filter(function(e){return e.event!==t}):[],this},u.listenerCount=function(t){return this._handlers.filter(function(e){return e.event===t}).length},u.listeners=function(a){return this._handlers.reduce(function(e,t){return t.event===a&&e.push(t.handler),e},[])},u.eventNames=function(){return this._handlers.map(function(e){return e.event})};var Ze,Je={get:function(e,t,a){return a||("function"==typeof t&&(a=t),t={}),"undefined"==typeof window||null===window?void a(new Error("Please bundle the library for node to use the node urlHandler")):!qe()?a(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler")):Xe(e,t,a)}},et=0,tt=0,at={ERRORCODE:900,extensions:[]},rt=(o=Ze=Ke,(d=st).prototype=Object.create(o.prototype),Ae(d.prototype.constructor=d,o),(d=st.prototype).addURLTemplateFilter=function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)},d.removeURLTemplateFilter=function(){this.URLTemplateFilters.pop()},d.countURLTemplateFilters=function(){return this.URLTemplateFilters.length},d.clearURLTemplateFilters=function(){this.URLTemplateFilters=[]},d.trackVastError=function(e,t){for(var a=arguments.length,r=new Array(2<a?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,[{},at,t].concat(r))),A.track(e,t)},d.getErrorURLTemplates=function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)},d.getEstimatedBitrate=function(){return tt},d.fetchVAST=function(l,u,c){var d=this;return void 0===u&&(u=0),void 0===c&&(c=null),new Promise(function(i,o){d.URLTemplateFilters.forEach(function(e){l=e(l)}),d.parentURLs.push(l);var s=Date.now();d.emit("VAST-resolving",{url:l,previousUrl:c,wrapperDepth:u,maxWrapperDepth:d.maxWrapperDepth,timeout:d.fetchingOptions.timeout}),d.urlHandler.get(l,d.fetchingOptions,function(e,t,a){void 0===a&&(a={});var r=Math.round(Date.now()-s),n=Object.assign({url:l,previousUrl:c,wrapperDepth:u,error:e,duration:r},a);d.emit("VAST-resolved",n),Qe(a.byteLength,r),e?o(e):i(t)})})},d.initParsingStatus=function(e){void 0===e&&(e={}),this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||12e4,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||Je,this.vastVersion=null,Qe(e.byteLength,e.requestDuration)},d.getRemainingAds=function(e){var t=this;return 0===this.remainingAds.length?Promise.reject(new Error("No more ads are available for the given VAST")):(e=e?A.flatten(this.remainingAds):this.remainingAds.shift(),this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(e,{wrapperDepth:0,url:this.rootURL}).then(function(e){return t.buildVASTResponse(e)}))},d.getAndParseVAST=function(t,a){var r=this;return void 0===a&&(a={}),this.initParsingStatus(a),this.URLTemplateFilters.forEach(function(e){t=e(t)}),this.rootURL=t,this.fetchVAST(t).then(function(e){return a.previousUrl=t,a.isRootVAST=!0,a.url=t,r.parse(e,a).then(function(e){return r.buildVASTResponse(e)})})},d.parseVAST=function(e,t){var a=this;return this.initParsingStatus(t=void 0===t?{}:t),t.isRootVAST=!0,this.parse(e,t).then(function(e){return a.buildVASTResponse(e)})},d.buildVASTResponse=function(e){e={ads:(e={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(e),e},d.parseVastXml=function(e,t){var a=t.isRootVAST,r=void 0!==a&&a,a=t.url,n=void 0===a?null:a,a=t.wrapperDepth,i=void 0===a?0:a,o=t.allowMultipleAds,s=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:n,wrapperDepth:i}),new Error("Invalid VAST XMLDocument");var l,u=[],c=e.documentElement.childNodes,d=e.documentElement.getAttribute("version");for(l in r&&d&&(this.vastVersion=d),c){var h=c[l];if("Error"===h.nodeName){var p=P.parseNodeText(h);(r?this.rootErrorURLTemplates:this.errorURLTemplates).push(p)}else if("Ad"===h.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)o=!0;else if(!1===o&&1<u.length)break;p=He(h,this.emit.bind(this),{allowMultipleAds:o,followAdditionalWrappers:s});p.ad?(u.push(p.ad),this.emit("VAST-ad-parsed",{type:p.type,url:n,wrapperDepth:i,adIndex:u.length-1,vastVersion:d})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u},d.parse=function(e,t){var t=void 0===t?{}:t,a=t.url,a=void 0===a?null:a,r=t.resolveAll,r=void 0===r||r,n=t.wrapperSequence,n=void 0===n?null:n,i=t.previousUrl,i=void 0===i?null:i,o=t.wrapperDepth,o=void 0===o?0:o,s=t.isRootVAST,s=void 0!==s&&s,l=t.followAdditionalWrappers,t=t.allowMultipleAds,u=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&s&&(t=!0);try{u=this.parseVastXml(e,{isRootVAST:s,url:a,wrapperDepth:o,allowMultipleAds:t,followAdditionalWrappers:l})}catch(e){return Promise.reject(e)}return 1===u.length&&null!=n&&(u[0].sequence=n),!1===r&&(this.remainingAds=P.splitVAST(u),u=this.remainingAds.shift()),this.resolveAds(u,{wrapperDepth:o,previousUrl:i,url:a})},d.resolveAds=function(e,t){var a=this,r=t.wrapperDepth,n=(t.previousUrl,t.url),i=[],o=n;return(e=void 0===e?[]:e).forEach(function(e){e=a.resolveWrappers(e,r,o);i.push(e)}),Promise.all(i).then(function(e){var t,e=A.flatten(e);return!e&&0<a.remainingAds.length?(t=a.remainingAds.shift(),a.resolveAds(t,{wrapperDepth:r,previousUrl:o,url:n})):e})},d.resolveWrappers=function(n,i,o){var s=this;return new Promise(function(t){var e;if(i++,!n.nextWrapperURL)return delete n.nextWrapperURL,t(n);if(i>=s.maxWrapperDepth||-1!==s.parentURLs.indexOf(n.nextWrapperURL))return n.errorCode=302,delete n.nextWrapperURL,t(n);n.nextWrapperURL=P.resolveVastAdTagURI(n.nextWrapperURL,o),s.URLTemplateFilters.forEach(function(e){n.nextWrapperURL=e(n.nextWrapperURL)});var a=null!=(e=s.parsingOptions.allowMultipleAds)?e:n.allowMultipleAds,r=n.sequence;s.fetchVAST(n.nextWrapperURL,i,o).then(function(e){return s.parse(e,{url:n.nextWrapperURL,previousUrl:o,wrapperSequence:r,wrapperDepth:i,followAdditionalWrappers:n.followAdditionalWrappers,allowMultipleAds:a}).then(function(e){if(delete n.nextWrapperURL,0===e.length)return n.creatives=[],t(n);e.forEach(function(e){e&&P.mergeWrapperAdData(e,n)}),t(e)})}).catch(function(e){n.errorCode=301,n.errorMessage=e.message,t(n)})})},d.completeWrapperResolving=function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;0<=t;t--){var a=e.ads[t];!a.errorCode&&0!==a.creatives.length||(this.trackVastError(a.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:a.errorCode||303},{ERRORMESSAGE:a.errorMessage||""},{extensions:a.extensions},{system:a.system}),e.ads.splice(t,1))}},st),nt=function(){function e(e,t,a){this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new rt,this.storage=a||new Te,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}for(var t=e.prototype,a=(t.getParser=function(){return this.vastParser},t.hasRemainingAds=function(){return 0<this.vastParser.remainingAds.length},t.getNextAds=function(e){return this.vastParser.getRemainingAds(e)},t.get=function(r,n){var i=this,o=(void 0===n&&(n={}),Date.now());return(n=Object.assign({},this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<o?(this.totalCalls=1,this.totalCallsTimeout=o+36e5):this.totalCalls++,new Promise(function(t,a){if(i.cappingFreeLunch>=i.totalCalls)return a(new Error("VAST call canceled  FreeLunch capping not reached yet "+i.totalCalls+"/"+i.cappingFreeLunch));var e=o-i.lastSuccessfulAd;if(e<0)i.lastSuccessfulAd=0;else if(e<i.cappingMinimumTimeInterval)return a(new Error("VAST call canceled  ("+i.cappingMinimumTimeInterval+")ms minimum interval reached"));i.vastParser.getAndParseVAST(r,n).then(function(e){return t(e)}).catch(function(e){return a(e)})})},e.prototype),r=[{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}}],n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return e}(),it=((f=ot.prototype).addTrackingEvents_=function(e){for(var a=this,r=Object.keys(e),t=0,n=r.length;t<n;t++)!function(t){e[r[t]].forEach(function(e){a.trackingTags.push({event:r[t],url:e})})}(t)},f.loopAds_=function(){var s;s=n().mark(function e(b){var t,a,r,S=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n().mark(function e(k,t){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){var n,t=b[k];S.debug&&M.log("currentAd is: ",t),S.ad.id=t.id,S.ad.adServingId=t.adServingId,S.ad.categories=t.categories,!S.requireCategory||0!==S.ad.categories.length&&S.ad.categories[0].authority||(L.process.call(S,204,!0),e()),S.ad.blockedAdCategories=t.blockedAdCategories,S.requireCategory&&(n=!1,S.ad.blockedAdCategories.forEach(function(e){var a=e.authority,r=e.value;S.ad.categories.forEach(function(e){var t=e.authority,e=e.value;a===t&&r===e&&(L.process.call(S,205,!0),n=!0)})}),n)&&e(),S.ad.adType=t.adType,S.ad.title=t.title,S.ad.description=t.description,S.ad.system=t.system,S.ad.advertiser=t.advertiser,S.ad.pricing=t.pricing,S.ad.survey=t.survey,S.ad.sequence=t.sequence,S.ad.allowMultipleAds=t.allowMultipleAds;for(var a=0,r=b.length;a<r;a++){var i=b[a].sequence;if(S.adPod=!1,i&&1<=i){S.adPod=!0;break}}if(S.adPod){if(S.adSequence++,0===S.adPodLength){for(var o=0,s=0,l=b.length;s<l;s++)b[s].sequence&&o++;S.adPodLength=o,S.debug&&M.log("AdPod detected with length "+S.adPodLength)}}else S.notSequencedAdsLength=b.length,S.notSequencedAdsCurrentIndex++;S.ad.viewableImpression=t.viewableImpression,M.isEmptyObject(S.ad.viewableImpression)||ve.init.call(S);for(var u=0,c=t.errorURLTemplates.length;u<c;u++)S.adErrorTags.push({event:"error",url:t.errorURLTemplates[u]});t.impressionURLTemplates.forEach(function(e){e.url&&S.trackingTags.push({event:"impression",url:e.url})}),S.container&&S.container.addEventListener("addestroyed",function(){(S.adPod&&S.adSequence===S.adPodLength||!S.adPod&&S.notSequencedAdsLength===S.notSequencedAdsCurrentIndex)&&(S.adPodLength=0,S.adSequence=0,S.notSequencedAdsLength=0,S.notSequencedAdsCurrentIndex=0,S.adPod=!1,T.createApiEvent.call(S,"adpodcompleted")),e()},{once:!0});var d=t.creatives;S.debug&&M.log("parsed creatives follow",d);for(var h=0,p=d.length;h<p;h++){var f=d[h];if("companion"===f.type){S.debug&&M.log("creative type companion detected"),ye.parse.call(S,f);break}}for(var m=0,g=d.length;m<g;m++){var y=d[m];if("companion"!==y.type)switch(S.creative.id=y.id,S.creative.universalAdId=y.universalAdId,S.creative.adId=y.adId,S.creative.trackingEvents=y.trackingEvents,y.type){case"linear":if(S.creative.duration=y.duration,S.creative.skipDelay=y.skipDelay,S.creative.skipDelay&&(S.creative.skipoffset=y.skipDelay,S.creative.isSkippableAd=!0),y.videoClickThroughURLTemplate&&y.videoClickThroughURLTemplate.url&&(S.creative.clickThroughUrl=y.videoClickThroughURLTemplate.url),0<y.videoClickTrackingURLTemplates.length)for(var v=0,_=y.videoClickTrackingURLTemplates.length;v<_;v++)y.videoClickTrackingURLTemplates[v].url&&S.trackingTags.push({event:"clickthrough",url:y.videoClickTrackingURLTemplates[v].url});S.creative.isLinear=!0,S.addTrackingEvents_(y.trackingEvents),he.parse.call(S,y.icons,y.adParameters,y.mediaFiles),S.params.omidSupport&&0<t.adVerifications.length&&new be(t.adVerifications,S.vastPlayer,S.params,S.getIsSkippableAd(),S.getSkipTimeOffset(),S.debug).init();break;case"nonlinear":S.creative.isLinear=!1,S.addTrackingEvents_(y.trackingEvents),ne.parse.call(S,y.variations)}}});case 2:case"end":return e.stop()}},e)}),a=0,r=b.length;case 2:if(a<r)return e.delegateYield(t(a,r),"t0",4);e.next=7;break;case 4:a++,e.next=2;break;case 7:case"end":return e.stop()}},e)});return function(e){return function(){var e=this,o=arguments;return new Promise(function(t,a){var r=s.apply(e,o);function n(e){F(r,t,a,n,i,"next",e)}function i(e){F(r,t,a,n,i,"throw",e)}n(void 0)})}.apply(this,arguments)}}(),f.getVastTag_=function(e){var t,a,n=this;"string"==typeof e&&""!==e?"undefined"!=typeof DOMParser?(T.createApiEvent.call(this,"adtagstartloading"),t=new nt,a={timeout:this.params.ajaxTimeout,withCredentials:this.params.ajaxWithCredentials,wrapperLimit:this.params.maxNumRedirects,resolveAll:!1},this.adTagUrl=e,this.debug&&M.log("try to load VAST tag at: "+this.adTagUrl),t.get(this.adTagUrl,a).then(function(e){n.debug&&M.log("VAST response follows",e),T.createApiEvent.call(n,"adtagloaded");var t=e.errorURLTemplates;if(0<t.length)for(var a=0,r=t.length;a<r;a++)n.vastErrorTags.push({event:"error",url:t[a]});0!==e.ads.length?n.loopAds_(e.ads):L.process.call(n,303,!0)}).catch(function(e){M.trace(e),L.process.call(n,900,!0)})):L.process.call(this,1002,!1):L.process.call(this,1001,!1)},f.loadAds=function(e,t,a){this.debug&&M.log("loadAds starts"),this.rmpVastInitialized||this.initialize(),"object"==(void 0===t?"undefined":lt(t))&&(t.regulations&&/coppa|gdpr/gi.test(t.regulations)&&(this.regulationsInfo.regulations=t.regulations),t.limitAdTracking&&/0|1/gi.test(t.limitAdTracking)&&(this.regulationsInfo.limitAdTracking=t.limitAdTracking),t.gdprConsent)&&(this.regulationsInfo.gdprConsent=t.gdprConsent),a&&(this.requireCategory=!0);t=S.replaceMacros.call(this,e,!1);this.getAdOnStage()?(this.debug&&M.log("creative alreadt on stage calling stopAds before loading new ad"),this.container.addEventListener("addestroyed",function(e){this.loadAds(e)}.bind(this,t),{once:!0}),this.stopAds()):(a=m.getCurrentTime.call(this),this.useContentPlayerForAds&&(this.currentContentSrc=this.contentPlayer.src,this.debug&&M.log("currentContentSrc is: "+this.currentContentSrc),this.currentContentCurrentTime=a,this.debug&&M.log("currentContentCurrentTime is: "+this.currentContentCurrentTime),m.preventSeekingForCustomPlayback.call(this)),this.getVastTag_(t))},f.play=function(){(this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?D.resumeAd:N.play:m.play).call(this)},f.pause=function(){(this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?D.pauseAd:N.pause:m.pause).call(this)},f.getAdPaused=function(){return!!(this.adOnStage&&this.creative&&this.creative.isLinear)&&(this.isVPAID?D.getAdPaused.call(this):this.vastPlayerPaused)},f.setVolume=function(e){M.isNumber(e)&&(e=e<0?0:1<e?1:e,this.adOnStage&&this.creative&&this.creative.isLinear&&(this.isVPAID&&D.setAdVolume.call(this,e),N.setVolume.call(this,e)),m.setVolume.call(this,e))},f.getVolume=function(){return(this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?D.getAdVolume:N.getVolume:m.getVolume).call(this)},f.setMute=function(e){"boolean"==typeof e&&(this.adOnStage&&this.creative&&this.creative.isLinear&&(this.isVPAID?e?D.setAdVolume.call(this,0):D.setAdVolume.call(this,1):N.setMute.call(this,e)),m.setMute.call(this,e))},f.getMute=function(){return this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?0===D.getAdVolume.call(this):N.getMute.call(this):m.getMute.call(this)},f.getFullscreen=function(){return this.isInFullscreen},f.stopAds=function(){this.adOnStage&&(this.isVPAID?D.stopAd:N.resumeContent).call(this)},f.skipAd=function(){this.adOnStage&&this.getAdSkippableState()&&(this.isVPAID?D.skipAd:(T.createApiEvent.call(this,"adskipped"),S.dispatch.call(this,"skip"),N.resumeContent)).call(this)},f.resetAdPod=function(){y.instanceVariables.call(this)},f.addEventListener=function(e,t){this.vastPlayer&&"string"==typeof e&&null!=t&&(this.vastPlayer.addEventListener(e,t),this.listeners.push({event:e,callback:t}))},f.removeListeners=function(){if(this.vastPlayer){for(var e in this.listeners)void 0===this.listeners[e].callback?this.vastPlayer.removeEventListener(this.listeners[e].event):this.vastPlayer.removeEventListener(this.listeners[e].event,this.listeners[e].callback);this.listeners=[]}},f.getAdTagUrl=function(){return this.adTagUrl},f.getAdMediaUrl=function(){if(this.adOnStage){if(this.isVPAID)return D.getCreativeUrl.call(this);if(this.creative&&this.creative.mediaUrl)return this.creative.mediaUrl}return null},f.getEnvironment=function(){return I},f.getAdLinear=function(){return!this.creative||!this.creative.isLinear||this.creative.isLinear},f.getAdSystem=function(){return this.ad&&this.ad.system?this.ad.system:{value:"",version:""}},f.getAdUniversalAdId=function(){return this.creative&&this.creative.universalAdId?this.creative.universalAdId:{idRegistry:"",value:""}},f.getAdContentType=function(){return this.creative&&this.creative.type?this.creative.type:""},f.getAdTitle=function(){return this.ad&&this.ad.title?this.ad.title:""},f.getAdDescription=function(){return this.ad&&this.ad.description?this.ad.description:""},f.getAdAdvertiser=function(){return this.ad&&!M.isEmptyObject(this.ad.advertiser)?this.ad.advertiser:{id:"",value:""}},f.getAdPricing=function(){return this.ad&&!M.isEmptyObject(this.ad.pricing)?this.ad.pricing:{value:"",model:"",currency:""}},f.getAdSurvey=function(){return this.ad&&this.ad.survey?this.ad.survey:""},f.getAdAdServingId=function(){return this.ad&&this.ad.adServingId?this.ad.adServingId:""},f.getAdCategories=function(){return this.ad&&this.ad.categories&&0<this.ad.categories.length?this.ad.categories:[]},f.getAdBlockedAdCategories=function(){return this.ad&&this.ad.blockedAdCategories&&0<this.ad.blockedAdCategories.length?this.ad.blockedAdCategories:[]},f.getAdDuration=function(){var e;return this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?(0<(e=D.getAdDuration.call(this))&&(e*=1e3),e):N.getDuration.call(this):-1},f.getAdCurrentTime=function(){var e,t;return this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?(e=D.getAdRemainingTime.call(this),t=D.getAdDuration.call(this),-1===e||-1===t||t<e?-1:1e3*(t-e)):N.getCurrentTime.call(this):-1},f.getAdRemainingTime=function(){var e,t;return this.adOnStage&&this.creative&&this.creative.isLinear?this.isVPAID?D.getAdRemainingTime.call(this):(e=N.getCurrentTime.call(this),t=N.getDuration.call(this),-1===e||-1===t||t<e?-1:t-e):-1},f.getAdOnStage=function(){return this.adOnStage},f.getAdMediaWidth=function(){if(this.adOnStage){if(this.isVPAID)return D.getAdWidth.call(this);if(this.creative&&this.creative.width)return this.creative.width}return-1},f.getAdMediaHeight=function(){if(this.adOnStage){if(this.isVPAID)return D.getAdHeight.call(this);if(this.creative&&this.creative.height)return this.creative.height}return-1},f.getClickThroughUrl=function(){return this.creative&&this.creative.clickThroughUrl?this.creative.clickThroughUrl:""},f.getSkipTimeOffset=function(){return this.creative&&this.creative.skipoffset?this.creative.skipoffset:-1},f.getIsSkippableAd=function(){return!(!this.creative||!this.creative.isSkippableAd)},f.getContentPlayerCompleted=function(){return this.contentPlayerCompleted},f.setContentPlayerCompleted=function(e){"boolean"==typeof e&&(this.contentPlayerCompleted=e)},f.getAdErrorMessage=function(){return this.vastErrorMessage},f.getAdVastErrorCode=function(){return this.vastErrorCode},f.getAdErrorType=function(){return this.adErrorType},f.getIsUsingContentPlayerForAds=function(){return this.useContentPlayerForAds},f.getAdSkippableState=function(){if(this.adOnStage){if(this.isVPAID)return D.getAdSkippableState.call(this);if(this.getIsSkippableAd())return this.skippableAdCanBeSkipped}return!1},f.getVastPlayer=function(){return this.vastPlayer},f.getContentPlayer=function(){return this.contentPlayer},f.getCompanionAdsList=function(t,a){var e;if(0<this.validCompanionAds.length&&0<(e="number"==typeof t&&0<t&&"number"==typeof a&&0<a?this.validCompanionAds.filter(function(e){return t>=e.width&&a>=e.height}):this.validCompanionAds).length){for(var r=[],n=0,i=e.length;n<i;n++)r.push(e[n]);return this.companionAdsList=r}return[]},f.getCompanionAd=function(e){var a=this;if(void 0===this.companionAdsList[e])return null;var t,r,n,i,o=this.companionAdsList[e];if(o.imageUrl||o.iframeUrl?(o.imageUrl?t=document.createElement("img"):(t=document.createElement("iframe")).sandbox="allow-scripts allow-same-origin",o.altText&&(t.alt=o.altText),t.width=o.width,t.height=o.height,t.style.cursor="pointer"):o.htmlContent&&(t=o.htmlContent),(o.imageUrl||o.iframeUrl)&&(0<(r=o.trackingEventsUrls).length&&(t.onload=function(){for(var e=0,t=r.length;e<t;e++)S.pingURI.call(a,r[e])},t.onerror=function(){S.error.call(a,603)}),n=null,o.companionClickTrackingUrls&&(this.debug&&M.log("companion click tracking URIs",n),n=o.companionClickTrackingUrls),i=function(e,t,a){var r=this;a&&(a.stopPropagation(),"touchend"===a.type)&&a.preventDefault(),t&&t.forEach(function(e){e.url&&S.pingURI.call(r,e.url)}),M.openWindow(e)},o.companionClickThroughUrl)&&(t.addEventListener("touchend",i.bind(this,o.companionClickThroughUrl,n)),t.addEventListener("click",i.bind(this,o.companionClickThroughUrl,n))),o.imageUrl)t.src=o.imageUrl;else if(o.iframeUrl)t.src=o.iframeUrl;else if(o.htmlContent)try{t=(new DOMParser).parseFromString(o.htmlContent,"text/html")}catch(e){return null}return t},f.getCompanionAdsRequiredAttribute=function(){return this.adOnStage?this.companionAdsRequiredAttribute:""},f.initialize=function(){this.rmpVastInitialized||(this.debug&&M.log("on user interaction - player needs to be initialized"),N.init.call(this))},f.getInitialized=function(){return this.rmpVastInitialized},f.destroy=function(){this.contentPlayer?(this.contentPlayer.removeEventListener("webkitbeginfullscreen",this.onFullscreenchange),this.contentPlayer.removeEventListener("webkitendfullscreen",this.onFullscreenchange)):document.removeEventListener("fullscreenchange",this.onFullscreenchange),N.destroy.call(this),y.instanceVariables.call(this)},f.getAdPodInfo=function(){var e;return this.adPod&&this.adPodLength?((e={}).adPodCurrentIndex=this.adSequence,e.adPodLength=this.adPodLength,e.allowMultipleAds=this.ad.allowMultipleAds,e):{adPodCurrentIndex:this.notSequencedAdsCurrentIndex,adPodLength:this.notSequencedAdsLength,allowMultipleAds:this.ad.allowMultipleAds}},f.resizeAd=function(e,t,a){this.adOnStage&&this.isVPAID&&D.resizeAd.call(this,e,t,a)},f.expandAd=function(){this.adOnStage&&this.isVPAID&&D.expandAd.call(this)},f.collapseAd=function(){this.adOnStage&&this.isVPAID&&D.collapseAd.call(this)},f.getAdExpanded=function(){return this.adOnStage&&this.isVPAID&&D.getAdExpanded.call(this),!1},f.getVPAIDCompanionAds=function(){return this.adOnStage&&this.isVPAID&&D.getAdCompanions.call(this),""},f._getVersion=function(){return"1.1.1_20220629"},ot);function ot(e,t,a){y.instanceVariables.call(this),this.debug=a||!1,"string"==typeof e&&""!==e?(this.id=e,this.listeners=[],this.container=document.getElementById(this.id),null!==this.container&&(this.contentWrapper=this.container.querySelector(".rmp-content"),this.contentPlayer=this.container.querySelector(".rmp-video"),null!==this.contentWrapper)&&null!==this.contentPlayer?(this.debug&&(M.log("creating new RmpVast instance"),M.log("environment follows"),M.log(null,I),M.logVideoEvents(this.contentPlayer,"content")),y.resetLoadAds.call(this),y.fullscreen.call(this),T.filterParams.call(this,t),this.debug&&M.log("filtered params follow",this.params)):this.debug&&M.log("invalid DOM layout - exit")):this.debug&&M.log("invalid id to create new instance - exit")}function st(){var e;return(e=Ze.call(this)||this).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return B},"object"==lt(a)&&"object"==lt(e)?e.exports=t():void 0!==(t="function"==typeof(t=t)?t.apply(a,[]):t)&&(e.exports=t)}.call(this,t(135)(e))},function(e,t,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.generateNonce=function(){var e=new goog.pal.NonceRequest;return e.adWillAutoPlay=!0,e.adWillPlayMuted=!0,e.continuousPlayback=!1,e.descriptionUrl="https://example.com",e.iconsSupported=!0,e.playerType="Sample Player Type",e.playerVersion="1.0",e.ppid="Sample PPID",e.videoHeight=480,e.videoWidth=640,r.loadNonceManager(e).then(function(e){return e.getNonce()}).catch(function(e){console.log("Error generating nonce: "+e)})};try{r=new goog.pal.NonceLoader}catch(e){console.warn()}},function(e,t,a){(t=e.exports=a(100)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto);",""]),t.push([e.i,'.nexplayer_container{background-color:#000;color:#fff;position:relative;font-family:Roboto,sans-serif}.nexplayer_container,.nexplayer_container .nexplayer_icon{width:100%;height:100%}.nexplayer_container .nexplayer_IconTriangle,.nexplayer_IconAirplay,.nexplayer_IconChromecast{background-repeat:no-repeat;background-size:cover}.nexplayer_container .nexplayer_ad_container,.nexplayer_container .nexplayer_full_div,.nexplayer_container .nexplayer_video{width:100%;height:100%;user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#000}@media (min-width:768px){.nexplayer_container .nexplayer_caption_div p{font-size:2em;padding-bottom:2rem;z-index:3}}@media (max-width:768px){.nexplayer_container .nexplayer_caption_div p{padding-bottom:1.5rem;z-index:3}}.nexplayer_video{position:absolute;right:0;bottom:0;width:100%;height:100%;z-index:0;background-size:cover;overflow:hidden}.nexplayer_container .nexplayer_ad_container{position:absolute;top:0;left:0}.nexplayer_container .nexplayer_endedscreen{z-index:1;width:100%;height:100%;position:absolute;background-color:rgba(0,0,0,.5);display:none;top:0}.nexplayer_container .nexplayer_bar{height:6.61111111111rem;width:100%;position:absolute;bottom:0;padding:0;z-index:1;background-color:rgba(0,0,0,.5)}.nexplayer_container .nexplayer_play_pause{margin-left:1.95185185185rem;margin-bottom:1.1333333rem}.nexplayer_container .nexplayer_full_screen{margin-right:1.95185185185rem}.nexplayer_airplay,.nexplayer_chromecast,.nexplayer_container .nexplayer_full_screen,.nexplayer_language{float:right}.nexplayer_container .nexplayer_full_screen,.nexplayer_container .nexplayer_language,.nexplayer_container .nexplayer_next,.nexplayer_container .nexplayer_volume,.nexplayer_container .nexplayer_volume_container{margin-left:1.00740740741rem;margin-bottom:1.1333333rem}.nexplayer_container .nexplayer_volume_container{margin-top:1.32222222222rem;width:6.04444444444rem;display:inline-block;padding:0;float:right}.nexplayer_container .nexplayer_full_volume_div{display:inline-block;width:auto;height:auto}.nexplayer_container .nexplayer_subtitle,.nexplayer_container .nexplayer_title{display:inline-block;margin-left:1.00740740741rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_text_div{display:inline-block;bottom:0;position:absolute;height:100%;z-index:-1}.nexplayer_container .nexplayer_title{font-size:1.63703703704rem;font-weight:400;line-height:2.07777777778rem;margin-bottom:1.76296296296rem;margin-top:2.95925925926rem}.nexplayer_container .nexplayer_subtitle{font-size:1.38518518518rem;font-weight:300;line-height:1.76296296296rem;margin-bottom:1.88888888889rem;z-index:-1}.nexplayer_container .nexplayer_top_bar{padding:0;z-index:1;display:table}.nexplayer_container .nexplayer_bottom_bar{margin-top:.12592592592rem}.nexplayer_container .nexplayer_current_time{padding-left:1.51111111111rem}.nexplayer_container .nexplayer_current_time,.nexplayer_container .nexplayer_total_time{padding-top:.31481481481rem;font-size:1.63703703704rem;font-weight:400;display:table-cell;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_total_time{padding-right:1.51111111111rem}.nexplayer_container .nexplayer_container_seekbar{width:100%;display:table-cell;vertical-align:middle;margin-top:.94444444445rem;padding-left:1.51111111111rem;padding-right:1.51111111111rem;border-bottom:0 solid hsla(0,0%,100%,0)!important}.nexplayer_container .nexplayer_flex_seekbar{width:100%;position:relative}.nexplayer_container .nexplayerAd_flex_seekbar{width:100%;position:relative;padding-bottom:1%}.nexplayer_container .nexplayer_base_seekbar,.nexplayer_container .nexplayerAd_base_seekbar{width:100%;height:.44074074074rem;background-color:#000;position:absolute}.nexplayer_container .nexplayer_playback_position,.nexplayer_container .nexplayerAd_playback_position{width:0;height:.44074074074rem;background-color:#ff5e0e;position:absolute;pointer-events:none}.nexplayer_container .nexplayerAd_playback_position{transition:.4s}.nexplayer_container .nexplayer_bufferlevel_position{width:0;height:.44074074074rem;background-color:#fff;position:absolute;pointer-events:none}.nexplayer_container .nexplayer_thumb_container .nexplayer_thumb_flex{width:100%;height:100%;display:-ms-flexbox;display:flex;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_thumb_container .nexplayer_thumb_image{width:100%;height:100%;border-radius:.75555555552rem;display:inherit;vertical-align:middle;position:relative;-ms-flex:1;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_thumb_container .nexplayer_thumb_text{text-align:center;font-size:1.63703703704rem;font-weight:400;line-height:1.51111111111rem;background:rgba(0,0,0,.7);color:#fff;padding:.06296296296rem;position:absolute;width:4.34444444444rem;margin-bottom:0;margin-left:auto;margin-right:auto;left:0;right:0;bottom:0;-ms-flex:1;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_ad_marker{background-color:#fcff00;width:.25rem;height:.44074074074rem;z-index:1!important;position:absolute}.nexplayer_container .nexplayer_circleBase{border-radius:100%;width:1.25925925926rem;height:1.25925925926rem;background:#ff5e0e;margin:-4px 0 0;position:absolute;pointer-events:none;float:left;display:none;z-index:2}.nexplayer_container .nexplayer_logo_div{width:15rem;top:0;right:0;position:absolute;margin-top:3rem;margin-right:3rem}.nexplayer_container .nexplayer_option_ui,.nexplayer_container .nexplayer_thumb_container{height:auto;width:auto;position:absolute;bottom:8.62592592592rem;padding:0;z-index:2;background-color:rgba(0,0,0,.5);border-radius:.75555555555rem;opacity:inherit}.nexplayer_container .nexplayer_option_ui{min-width:12.1333333333rem}.nexplayer_container .nexplayer_thumb_container{min-width:4.1333333333rem;width:12.733629629rem;height:7.17777777744rem;padding:.06296296296rem}.nexplayer_container .nexplayer_thumb_triangle_bottom,.nexplayer_container .nexplayer_triangle_bottom{height:2.01481481481rem;width:4.34444444444rem;position:absolute;margin:auto;transform:rotate(180deg);text-align:center;display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;margin-right:5.38333333333rem;bottom:6.61111111111rem;padding:0;opacity:inherit}.nexplayer_container .nexplayer_option_audios,.nexplayer_container .nexplayer_option_subtitles{display:inline-block;float:left;width:auto;border:10px solid hsla(0,0%,100%,0);padding-left:2.01481481481rem;padding-right:2.01481481481rem;padding-bottom:1.44814814815rem}.nexplayer_container .nexplayer_option_ui h3{font-size:1.63703703704rem;line-height:2.07777777778rem;margin:0;margin-top:.75555555555rem;margin-bottom:.81851851851rem}.nexplayer_container .nexplayer_option_ui h3,.nexplayer_container .nexplayer_option_ui p{font-weight:400;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nexplayer_container .nexplayer_option_ui p{font-size:1.1962962963rem;line-height:1.51111111111rem;margin:0;margin-top:.81851851851rem;margin-bottom:.81851851851rem}.nexplayer_container .nexplayer_option_ui .nexplayer_selected_element{color:#ff5e0e}.nexplayer_spinner{width:40px;height:40px;display:-ms-flexbox;display:flex;position:absolute;text-align:center;top:0;bottom:0;left:0;right:0;margin:auto;display:none}.nexplayer_double_bounce1,.nexplayer_double_bounce2{width:100%;height:100%;border-radius:50%;background-color:#333;opacity:.6;position:absolute;top:0;left:0;animation:sk-bounce 2s infinite ease-in-out}.nexplayer_double_bounce2{animation-delay:-1s}@keyframes sk-bounce{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}.nexplayer_container_mobile .nexplayer_text_div{display:none}.nexplayer_container_mobile .nexplayer_logo_div{width:10rem;margin-top:2rem;margin-right:2rem}.nexplayer_container_mobile .nexplayer_bar{height:5rem}.nexplayer_container_mobile .nexplayer_current_time,.nexplayer_container_mobile .nexplayer_total_time{font-size:1.4rem}.nexplayer_container_mobile .nexplayer_volume_container{margin-top:.8rem}.nexplayer_container_mobile .nexplayer_option_ui{bottom:6.91rem}.nexplayer_container_mobile .nexplayer_thumb_container{min-width:2.1333333333rem;bottom:5.92592592592rem;width:5.733629629rem;height:3.17777777744rem}.nexplayer_container_mobile .nexplayer_triangle_bottom{bottom:4.9rem;margin-right:3.5rem}.nexplayer_container_mobile .nexplayer_thumb_triangle_bottom{width:4.04444444444rem;bottom:4.9rem}.nexplayer_container_mobile .nexplayer_thumb_container .nexplayer_thumb_text{font-size:.83703703704rem;width:1.84444444444rem;line-height:1.11111111111rem}.nexplayer_container_tiny .nexplayer_volume_container{margin-top:.6rem}.nexplayer_container_tiny .nexplayer_total_time{font-size:1.2rem}.nexplayer_container_tiny .nexplayer_bar{height:3.6rem}.nexplayer_container_tiny .nexplayer_current_time{font-size:1.15rem}.nexplayer_container_tiny .nexplayer_text_div{display:none}.nexplayer_container_tiny .nexplayer_logo_div{width:10rem;margin-top:1rem;margin-right:1rem}.nexplayer_container_tiny .nexplayer_option_ui{bottom:5.5rem}.nexplayer_container_tiny .nexplayer_thumb_container{min-width:2.1333333333rem;bottom:4.52592592592rem;width:4.733629629rem;height:2.87777777744rem}.nexplayer_container_tiny .nexplayer_triangle_bottom{bottom:3.5rem;margin-right:3rem}.nexplayer_container_tiny .nexplayer_thumb_triangle_bottom{height:1.71481481481rem;width:2.84444444444rem;bottom:3.614rem}.nexplayer_container_tiny .nexplayer_thumb_container .nexplayer_thumb_text{font-size:.63703703704rem;width:1.54444444444rem;line-height:1.11111111111rem}.nexplayer_container .combobox{width:auto}.nexplayer_container .nexplayer_button{border:none;overflow:hidden;background-color:hsla(0,0%,100%,0);height:3rem;width:3rem;padding:0;-ms-flex-align:start;align-items:flex-start;text-align:center;cursor:default;box-sizing:border-box;text-rendering:auto;letter-spacing:normal;word-spacing:normal;text-transform:none;text-indent:0;text-shadow:none;font:400 13.3333px Arial;display:inline-block}.nexplayer_container_mobile .nexplayer_button{height:2rem;width:2rem}.nexplayer_container_tiny .nexplayer_button{height:1.5rem;width:1.5rem}.nexplayer_container .nexplayer_logo_replay{border:none;overflow:hidden;height:6.04444444444rem;width:6.04444444444rem;padding:0;position:absolute;text-align:center;top:0;bottom:0;left:0;right:0;margin:auto}.nexplayer_video.pausedFullScreen:before{opacity:.5;width:100%;height:100%;background-color:#000;content:"";position:absolute;left:0}.nexplayer_video.pausedFullScreen:after{width:0;height:0;border-style:solid;border-width:50px 0 50px 100px;border-color:transparent transparent transparent #fff;position:absolute;left:calc(50% - 50px);top:calc(50% - 100px);content:"";color:#fff;opacity:.8}.nexplayer_container .nexplayer_option_speed{padding:10px}.nexplayer_container .nexplayer_error_center{text-align:center;font-size:30px;color:#ff5e0e;position:relative;background-color:#bbb;padding-top:5px;padding-bottom:5px;top:50%;transform:perspective(1px) translateY(-50%)}.nexplayer_container .nexplayer_return_container{background-color:#07070780;border-radius:10%;position:absolute;margin:8px;width:60px;height:60px;z-index:2}.nexplayer_container .nexplayer_return_icon{position:absolute;margin:10px}.nexplayer_container .rmp-ad-vast-video-player{width:100%;height:100%;display:block}.nexplayer_container .rmp-ad-container{display:inline}.nexplayer_container .rmp-ad-container-skip{position:absolute;overflow:visible;z-index:38;font-size:25px;top:80%;right:0;color:#000;background:#5765653d}.nexplayer_container .nexplayer_ad_time_container{position:absolute;background-color:#000;bottom:20%;right:0;z-index:30}.nexplayer_container .nexplayer_ad_time{margin:10px;font-size:1.5rem}.nexplayer_ad_ui{height:3rem;width:100%;position:absolute;bottom:0;padding:0;z-index:1;background-color:rgba(0,0,0,.3)}.nexplayer_container .nexplayer_AdTime{margin-right:1.95185185185rem;height:13%;min-height:49px;float:right;width:5rem;font-size:1rem;padding-top:1%;text-shadow:2px 2px .2px #969696}',""])},function(e,t,a){"use strict";var r=a(580),n=("string"==typeof r&&(r=[[e.i,r,""]]),{hmr:!0});n.transform=void 0,a(101)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(100)(!1)).push([e.i,".nexplayer_icon:hover{width:105%;height:105%;transform:translate(-2.5%,-2.5%);filter:drop-shadow(2px 2px 2px black) brightness(200%);background-repeat:no-repeat;background-position:50%}",""])},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=u(a(7)),o=a(13),s=a(15),l=u(a(149));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var a=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));d.call(t),t.adContainer=document.getElementById("ads"),t.adsVideoElement=document.getElementById("nexplayer_advideo"),t.pageUrl=t.props.pageUrl,t.playerElement=t.props.div,t.playerVideoElement=t.props.videoElement,t.startFullScreen=t.props.fullScreenAtStart,t.state={adPlaying:null},t.intervalAd=null,t.mounted=!1;try{google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)}catch(e){console.warn("IMA is not available, import IMA script.");var a=document.getElementById("nexplayer_advideo");return null!==a&&(a.style.visibility="hidden"),c(t)}return t.adDisplayContainer=new google.ima.AdDisplayContainer(t.adContainer,t.adsVideoElement),t.adsLoader=new google.ima.AdsLoader(t.adDisplayContainer),t.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t.onAdsManagerLoaded,!1,t),t.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t.onAdError,!1,t),t.videoEndedCallback=t.bind_(t,t.onContentEnded),t.setVideoEndedCallbackEnabled(!0),document.addEventListener("fullscreenchange",t.bind_(t,t.onFullscreenChange),!1),window.addEventListener("resize",t.bind_(t,t.onResize),!1),t.adsDone||(t.adURL=t.props.vast,t.initialUserAction(),t.preloadContent(t.bind_(t,t.loadAds)),t.adsDone=!0),t}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,clearInterval(this.resumeTimer)}},{key:"render",value:function(){var t=this,e=document.getElementById("nexplayer_advideo");return null===e||navigator.userAgent.includes("Windows")||navigator.userAgent.includes("Macintosh")||(this.isPlaying?e.style.display="block":e.style.display="none"),i.default.createElement("div",{id:"nexplayer_adcontroller_container",className:"nexplayer_adcontroller_container",style:{display:this.props.isAdPlaying?"block":"none",pointerEvents:"none"}},i.default.createElement("div",{id:"nexplayer_ad_container",className:"nexplayer_ad_container ima-container",ref:function(e){t.nexplayer_ad_container=e},style:{display:"inherit",background:"transparent"}},!this.state.adDestroyed&&this.props.showAdsUI?i.default.createElement("div",{className:"nexplayer_ad_ui",style:{display:this.props.isAdPlaying?"inherit":"none"},id:"nexAdUI"},i.default.createElement(l.default,{adsInfo:this.adsManager,useDefaultControls:this.props.useDefaultControls})):""))}}]),r}(i.default.Component),d=function(){this.adContainer=null,this.adCurrentTime=null,this.adPosition=null,this.adDisplayContainer=null,this.adsDone=!1,this.adsLoader=null,this.adsManager=null,this.adsRequest=null,this.adURL=null,this.canReinitialize=!1,this.contentCompleteCalled=!1,this.currentAdDuration=null,this.fullscreen=!1,this.height=null,this.isPlaying=null,this.nexplayer_ad_container=null,this.pageUrl=null,this.playing=null,this.podSize=null,this.preloadListener=null,this.resumePositionAfterDestroyed=null,this.resumeTimer=null,this.startFullScreen=null,this.timeout=!1,this.videoElement=null,this.videoContainerStyle=null,this.videoEndedCallback=null,this.width=null,this.onAdsManagerLoaded=function(e){var t=new google.ima.AdsRenderingSettings,a=(t.loadVideoTimeout=-1<this.props.adsLoadTimeout?this.props.adsLoadTimeout:-1,t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.playerVideoElement,t),[]),e=(this.adsManager.getCuePoints().forEach(function(e,t){a[t]=0===e?"start":-1===e?"end":e}),new CustomEvent("adpodsinfo",{detail:a}));this.playerElement.dispatchEvent(e),this.startAdsManager(this.adsManager)},this.onContentPauseRequested=function(){this.resumePositionAfterDestroyed=this.playerVideoElement.currentTime,document.getElementById("nexplayer_video").style.display="none",this.pauseForAd(),this.setVideoEndedCallbackEnabled(!1),this.audioTrack=this.props.player.getCurrentAudioStream(),this.subtitlesTrack=this.props.player.getCurrentSubtitle(),this.props.player.player_.nexplayer_.shaka_.detach(),null!==this.adsVideoElement&&(this.adsVideoElement.style.display="none"),this.setState({adPlaying:!0})},this.onContentResumeRequested=function(e){var t=this;e&&this.adPosition+1===this.podSize&&(null!==this.adsVideoElement&&(this.adsVideoElement.style.display="none"),document.getElementById("nexplayer_video").style.display="",this.setVideoEndedCallbackEnabled(!0),this.props.player?this.props.player.player_.nexplayer_.shaka_.attach(this.playerVideoElement,!0).then(function(){t.props.player.player_.nexplayer_.shaka_.load(t.props.playerConfig.url,t.resumePositionAfterDestroyed).then(function(){t.resumeAfterAd(),t.props.player.setAudioStream(t.audioTrack.id),t.props.player.enableABR();try{var e=t.props.player.player_.nexplayer_.externalSubtitles_;e&&!t.props.player.isLive()?Array.isArray(e)?e.forEach(function(e){t.props.player.player_.nexplayer_.addSubtitle(e).then(function(){t.props.player.getSubtitles()[t.subtitlesTrack]&&t.props.player.getSubtitles()[t.subtitlesTrack].language===e.language&&t.props.player.player_.nexplayer_.setTextTrack(t.subtitlesTrack)},function(){})}):console.warn("The property externalSubtitles must be an array of objects containing 'src', 'language' and 'callback'"):t.props.player.player_.nexplayer_.setTextTrack(t.subtitlesTrack)}catch(e){console.warn("Failed to reattach external subtitles")}})}):console.error("Player couldn't reload the main content after an ad.")),this.setState({adPlaying:!1})},this.bind_=function(e,t){return function(){t.apply(e,arguments)}},this.initialUserAction=function(){this.adDisplayContainer.initialize()},this.loadAds=function(){this.removePreloadListener(),this.requestAds(this.adURL)},this.onAdEvent=function(e){var t=this;switch(e.type){case google.ima.AdEvent.Type.AD_PROGRESS:this.currentAdDuration=e.getAdData().duration,this.adCurrentTime=e.getAdData().currentTime,this.mounted&&this.setState({adRemainingTime:Math.floor(this.adsManager.getAdRemainingTime()/1e3)});break;case google.ima.AdEvent.Type.LOADED:-1<this.props.adsLoadTimeout&&setTimeout(function(){1!==player.player_.nexplayer_.shaka_.getLoadMode()||t.playing||(t.timeout=!0,t.nexplayer_ad_container.dispatchEvent(new CustomEvent("adskipped")),t.onContentResumeRequested(e),t.nexplayer_ad_container.dispatchEvent(new CustomEvent("adcomplete")),t.nexplayer_ad_container.dispatchEvent(new CustomEvent("addestroyed")),t.timeout?(t.isPlaying=!1,t.setState({adDestroyed:!0})):e.getAd().getAdPodInfo().getAdPosition()===e.getAd().getAdPodInfo().getTotalAds()&&(t.playerElement.dispatchEvent(new CustomEvent("adblockend")),t.isPlaying=!1,t.setState({adDestroyed:!0})),t.podSize<=t.adPosition+1&&(t.timeout=!1),t.playing=!1)},this.props.adsLoadTimeout),this.adPosition=e.getAd().getAdPodInfo().getAdPosition()-1,this.podSize=e.getAd().getAdPodInfo().getTotalAds(),e.getAd().isLinear()||this.onContentResumeRequested(e),this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adloaded",{detail:this.playerVideoElement.currentTime}));break;case google.ima.AdEvent.Type.STARTED:1===e.getAd().getAdPodInfo().getAdPosition()&&(this.playerElement.dispatchEvent(new CustomEvent("adblockstart",{detail:e.getAd().getAdPodInfo().getTotalAds()})),this.isPlaying=!0,this.setState({adDestroyed:!1}));var a={adId:e.getAd().getAdId(),adSystem:e.getAd().getAdSystem(),contentPlacement:(a=e.getAd().getAdPodInfo().getAdPosition()-1,e.getAd().getTitle().toLowerCase().includes("preroll")||0===e.getAd().getAdPodInfo().getTimeOffset()?"preroll-"+a:e.getAd().getTitle().toLowerCase().includes("postroll")||-1===e.getAd().getAdPodInfo().getTimeOffset()?"postroll-"+a:"midroll-"+a),duration:e.getAd().getDuration(),index:e.getAd().getAdPodInfo().getAdPosition()-1};this.playerElement.dispatchEvent(new CustomEvent("adstarted",{detail:a})),this.playing=!0;break;case google.ima.AdEvent.Type.COMPLETE:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adcomplete")),this.nexplayer_ad_container.dispatchEvent(new CustomEvent("addestroyed")),e.getAd().getAdPodInfo().getAdPosition()===e.getAd().getAdPodInfo().getTotalAds()&&(this.playerElement.dispatchEvent(new CustomEvent("adblockend")),this.isPlaying=!1,this.setState({adDestroyed:!0})),this.onContentResumeRequested(e),this.playing=!1;break;case google.ima.AdEvent.Type.VOLUME_MUTED:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("advolumemuted"));break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("advolumechanged"));break;case google.ima.AdEvent.Type.CLICK:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adclick"));break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adfirstquartile"));break;case google.ima.AdEvent.Type.MIDPOINT:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("admidpoint"));break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adthirdquartile"));break;case google.ima.AdEvent.Type.IMPRESSION:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adimpression"));break;case google.ima.AdEvent.Type.DURATION_CHANGE:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("addurationchange"));break;case google.ima.AdEvent.Type.SKIPPED:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adskipped")),this.onContentResumeRequested(e),this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adcomplete")),this.nexplayer_ad_container.dispatchEvent(new CustomEvent("addestroyed")),this.timeout?(this.isPlaying=!1,this.setState({adDestroyed:!0})):e.getAd().getAdPodInfo().getAdPosition()===e.getAd().getAdPodInfo().getTotalAds()&&(this.playerElement.dispatchEvent(new CustomEvent("adblockend")),this.isPlaying=!1,this.setState({adDestroyed:!0})),this.podSize<=this.adPosition+1&&(this.timeout=!1),this.playing=!1;break;case google.ima.AdEvent.Type.USER_CLOSE:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adclose"));break;case google.ima.AdEvent.Type.RESUMED:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adresumed")),this.playing=!0;break;case google.ima.AdEvent.Type.PAUSED:this.nexplayer_ad_container.dispatchEvent(new CustomEvent("adpaused")),this.playing=!1;break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:}},this.onAdError=function(e){this.props.div.dispatchEvent(new CustomEvent("aderror",{detail:e})),this.adsManager&&this.adsManager.destroy(),this.resumeAfterAd();e=document.getElementById("nexplayer_advideo");null!==e&&(e.style.visibility="hidden")},this.onContentEnded=function(){this.contentCompleteCalled=!0,this.adsLoader.contentComplete()},this.onFullscreenChange=function(){this.props.fullScreenAtStart,this.fullscreen?this.fullscreen=!1:this.fullscreen=!0,this.onResize(),this.startFullScreen&&this.props.fullScreenAtStart&&(this.startFullScreen=!1)},this.onResize=function(){this.startFullScreen&&this.props.fullScreenAtStart&&(this.fullscreen=!0),this.height=this.props.player.div.offsetHeight.toString(),this.width=this.props.player.div.offsetWidth.toString(),!this.fullscreen&&this.adsManager?this.adsManager.resize(this.width,this.height,google.ima.ViewMode.NORMAL):this.fullscreen&&this.adsManager&&this.adsManager.resize(window.screen.width.toString(),window.screen.height.toString(),google.ima.ViewMode.FULLSCREEN)},this.pauseForAd=function(){this.props.onPause(),this.props.onAdStarted(),this.canReinitialize=!1},this.preloadContent=function(e){this.preloadListener=e,this.playerVideoElement.addEventListener("loadedmetadata",e,!1)},this.reinitializePlayer=function(){this.props.player.player_.nexplayer_.Init(this.props.key,this.props.playerConfig.videoElement,this.props.playerConfig.url,this.props.playerConfig.drm,void 0,void 0,this.props.playerConfig.debug,void 0,void 0,this.props.useDefaultControls,this.props.mutedAtStart,this.props.div,this.props.type_360,void 0,this.props.startFullScreen,this.props.hideUITIme,this.props.playerConfig.externalSubtitles,void 0,this.resumePositionAfterDestroyed,this.props.playerConfig.configuration,this.props.playerConfig.addRequestFilter,!0,this.props.startingBufferLength,this.props.preferredAudioCodec,this.props.improveStartUp,this.props.autoplay,this.props.ssaiMediaTailor,this.props.bitrateConfig,this.props.retryParameters,this.props.adsMode,this.props.backupManifests,this.props.daiConfig,this.props.preferredVideoCodec)},this.requestAds=function(e){var t=new google.ima.AdsRequest;t.adTagUrl=e,t.linearAdSlotWidth=this.playerVideoElement.offsetWidth,t.linearAdSlotHeight=this.playerVideoElement.offsetHeight,t.nonLinearAdSlotWidth=this.playerVideoElement.offsetWidth,t.nonLinearAdSlotHeight=this.playerVideoElement.offsetHeight,t.pageUrl=this.pageUrl,this.adsLoader.requestAds(t)},this.removePreloadListener=function(){this.preloadListener&&(this.playerVideoElement.removeEventListener("loadedmetadata",this.preloadListener,!1),this.preloadListener=null)},this.resumeAfterAd=function(){var e=this,t=0;this.resumeTimer=setInterval(function(){e.playerVideoElement.currentTime<e.playerVideoElement.duration&&(e.props.onPlay(),e.playerVideoElement.play()),(7<=t||!e.playerVideoElement.paused)&&(e.props.onAdEnded(),clearInterval(e.resumeTimer)),t++},500)},this.setVideoEndedCallbackEnabled=function(e){e?this.playerVideoElement.addEventListener("ended",this.videoEndedCallback,!1):this.playerVideoElement.removeEventListener("ended",this.videoEndedCallback,!1)},this.startAdsManager=function(e){e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this);var t,a=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS];for(t in a)e.addEventListener(a[t],this.onAdEvent,!1,this);this.height=this.props.player.div.offsetHeight.toString(),this.width=this.props.player.div.offsetWidth.toString(),this.props.fullScreenAtStart?e.init(window.screen.width.toString(),window.screen.height.toString(),google.ima.ViewMode.FULLSCREEN):e.init(this.width,this.height,google.ima.ViewMode.NORMAL);var r=this,n=(e.start(),this.props.onCue(e.getCuePoints()),this.adsManager.container=this.nexplayer_ad_container,this.adsManager.play=function(){r.adsManager.resume()},this.adsManager.getAdCurrentTime=function(){return Math.round(1e3*r.adCurrentTime)},this.adsManager.getAdDuration=function(){return Math.round(1e3*r.currentAdDuration)},this.adsManager.getAdPaused=function(){return!r.playing},this.adsManager.getAdDescription=function(){return r.adsManager.getCurrentAd().getDescription()},this.adsManager.getAdRemainingTime=function(){return Math.round(1e3*r.adsManager.getRemainingTime())},this.adsManager.getAdTitle=function(){return r.adsManager.getCurrentAd().getTitle()},this.adsManager.getIsSkippableAd=function(){return r.adsManager.getAdSkippableState()},this.adsManager.getMute=function(){return 0===r.adsManager.getVolume()},this.adsManager.setMute=function(){r.adsManager.setVolume(0)},this.props.getAdInstance(this.adsManager),new CustomEvent("adInstanceReady"));this.props.div.dispatchEvent(n)}},s={onAdStarted:s.ActionAdStarted,onAdEnded:s.ActionAdEnded,onCue:s.ActionUpdateCuePoints,onPause:s.ActionOrderPause,onPlay:s.ActionOrderPlay},o=(0,o.connect)(function(e){return{div:e.NexPlayerReducer.div,isAdPlaying:e.NexPlayerReducer.isAdPlaying,player:e.NexPlayerReducer.player,reinitializeAfterAds:e.NexPlayerReducer.reinitializeAfterAds,useDefaultControls:e.NexPlayerReducer.useDefaultControls,showAdsUI:e.NexPlayerReducer.showAdsUI,externalSubtitles_:e.NexPlayerReducer.externalSubtitles,adsLoadTimeout:e.NexPlayerReducer.adsLoadTimeout}},s)(a);t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=a(7),i=(a=a)&&a.__esModule?a:{default:a};a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(){var e=this,t=a;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.errorCode!==this.props.errorCode}},{key:"render",value:function(){var e="";switch(this.props.errorCode){case 0:e="Invalid domain";break;case 1:e="Invalid app id";break;case 2:e="Timelock expired";break;case 3:e="Max number of impressions reached";break;case 4:e="Invalid license key";break;case 5:e="Invalid Android app id";break;case 6:e="Bad request (malformed)";break;case 7:e="License is disabled";break;case 8:e="Forbidden";break;case 9:e="Too many requests";break;case 10:e="Internal server error"}return i.default.createElement("div",{className:"nexplayer_error_center"},e)}}]),a}(i.default.Component);t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(7)),n=a(13);a(18);var i=p(a(584)),o=p(a(598)),s=(p(a(149)),p(a(599))),l=p(a(605)),u=p(a(606)),c=p(a(607)),d=p(a(608)),h=(p(a(609)),p(a(610)),p(a(102)),p(a(611)));function p(e){return e&&e.__esModule?e:{default:e}}var f=!1,m=!0,a=(0,n.connect)(function(e){return{hideControlBarOnStart:e.NexPlayerReducer.hideControlBarOnStart,showingFullUI:e.NexPlayerReducer.showingFullUI,isAdPlaying:e.NexPlayerReducer.isAdPlaying,callbackForReturn:e.NexPlayerReducer.callbackForReturn,hideUITime:e.NexPlayerReducer.hideUITime}})(function(t){return f||(!0===t.hideControlBarOnStart&&(m=!1),f=!0),r.default.createElement("div",{style:{display:t.isAdPlaying?"none":"inherit"}},r.default.createElement(c.default,null),r.default.createElement(u.default,null),r.default.createElement(l.default,null),r.default.createElement(s.default,null),r.default.createElement(d.default,null),null!=t.callbackForReturn&&null!=t.callbackForReturn?r.default.createElement("div",{className:"nexplayer_return_container",style:{display:0<t.hideUITime||!m?"none":"inherit"},onClick:function(e){t.callbackForReturn()}},r.default.createElement("img",{className:"nexplayer_return_icon",src:h.default})):r.default.createElement("div",{className:"nexplayer_return_container",style:{visibility:"hidden"}}),r.default.createElement("div",{className:"nexplayer_bar",style:{display:t.showingFullUI&&m?"inherit":"none"}},r.default.createElement(o.default,{focusTopBar:function(e){t.focusTopBar(e)}}),r.default.createElement(i.default,{fullScreenContainer:t.fullScreenContainer,focusButtonsArray:function(e){return t.focusButtonsArray(e)}})))});t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=P(a(7)),s=a(13),l=a(15);a(18);var u,c,d=P(a(224)),h=P(a(225)),p=(P(a(585)),P(a(586))),f=P(a(587)),m=P(a(588)),g=P(a(589)),y=(P(a(227)),P(a(590))),v=P(a(591)),_=P(a(592)),k=P(a(593)),b=P(a(228)),S=P(a(102)),E=a(41),T=P(a(251)),x=a(597),A=P(a(226));function P(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function n(e,t){var a,r;if(this instanceof n)return(a=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))).state={showVolumeContainer:!1,fullscreenEnabled:!!A.default&&A.default.isFullscreen},a.previousVolume=a.props.currentVolume,a.chomecastIcon=_.default,(0,T.default)(["https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"],"chromecastLib"),T.default.ready("chromecastLib",a.checkChromecast.bind(a)),r=a,setTimeout(function(){r.props.focusButtonsArray([a.refs.play_pause_div_ref,a.refs.full_volume_div_ref,a.refs.language_div_ref,a.refs.full_screen_div_ref])},100),a.changeVolumeHandler=function(e){r.props.onVolume(e.detail.value)},a.props.div.addEventListener("changevolume",a.changeVolumeHandler),a;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),i(n,[{key:"componentDidMount",value:function(){A.default&&(this.fullScreenChangedHandler=this.fullScreenChanged.bind(this),A.default.on("change",this.fullScreenChangedHandler)),this.props.mutedAtStart?this.props.onVolume(0):this.props.onVolume(1),this.previousVolume=1}},{key:"componentWillUnmount",value:function(){A.default&&A.default.off("change",this.fullScreenChangedHandler),this.props.div.removeEventListener("changevolume",this.changeVolumeHandler)}},{key:"fullScreenChanged",value:function(){this.setState(r({},this.state,{fullscreenEnabled:A.default.isFullscreen}))}},{key:"volumeDragged",value:function(e){e=Math.min(100,e),e=Math.max(0,e),isFinite(e)&&(this.props.onVolume(e=e/100),this.previousVolume=e)}},{key:"isPhoneOrTablet",value:function(){return!!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)}},{key:"updateChomecastIcon",value:function(e){this.chomecastIcon=(e?k:_).default}},{key:"checkChromecast",value:function(){var t=this,a=(this.chromecastButton=document.getElementById("chromecast_button"),this);window.__onGCastApiAvailable=function(e){e&&void 0!==a.props.currentItem.cast&&(t.props.onChromeCastEnabled(),t.chromecast=new x.CastPlayer(t.props.currentItem.URL,t.props.currentItem.name,t.props.currentItem.drm),t.chromecast.initializeCastPlayer())}}},{key:"getCurrentSubtitle",value:function(){var e;this.props.currentSubtitle&&u!=this.props.currentSubtitle?(u=this.props.currentSubtitle,e={change:"subtitle",id:this.props.currentSubtitle.id},this.chromecast.sendMessage(e)):null==this.props.currentSubtitle&&this.chromecast.sendMessage(e={change:"subtitle",id:null})}},{key:"getCurrentAudio",value:function(){var e;this.props.currentAudio&&c!=this.props.currentAudio&&(c=this.props.currentAudio,e={change:"audio",id:this.props.currentAudio.id},this.chromecast.sendMessage(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.currentState!==this.props.currentState||e.chromeCastEnabled!==this.props.chromeCastEnabled||e.currentVolume!==this.props.currentVolume}},{key:"render",value:function(){var t=this,e=this.state.showVolumeContainer;return this.chromecast&&(this.checkChromecast.bind(this.props.chromeCastEnabled),this.getCurrentSubtitle(),this.getCurrentAudio()),o.default.createElement("div",{className:"nexplayer_bottom_bar"},o.default.createElement("div",{tabIndex:"2",className:"nexplayer_button nexplayer_play_pause",onClick:function(){t.props.currentState!==E.STATUS.PLAYING?t.props.onPlaying():t.props.onPause()},ref:"play_pause_div_ref"},this.props.currentState===E.STATUS.PLAYING?o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconPause",img:h.default}):o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconPlay",img:d.default})),o.default.createElement("div",{className:"nexplayer_full_volume_div",onMouseLeave:function(){t.setState(r({},t.state,{showVolumeContainer:!1}))}},o.default.createElement("div",{tabIndex:"3",className:"nexplayer_button nexplayer_volume",onMouseOver:function(){t.setState(r({},t.state,{showVolumeContainer:!0}))},onClick:function(){t.props.unMuteCallBack();var e=0;0==t.props.currentVolume&&t.previousVolume&&(e=t.previousVolume),t.props.onVolume(e)},ref:"full_volume_div_ref"},0<this.props.currentVolume?o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconVolume",img:p.default}):o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconMuted",img:y.default})),o.default.createElement("div",{className:"nexplayer_volume_container",style:{width:e?"6.04444444444rem":"0px",marginLeft:e?"1.00740740741rem":"0px"},onClick:function(){t.isPhoneOrTablet()&&t.setState(r({},t.state,{showVolumeContainer:!1})),t.props.unMuteCallBack()}},o.default.createElement(b.default,{secondaryProgress:100,primaryProgress:100*this.props.currentVolume,callBackSeek:this.volumeDragged.bind(this),marginThumbRightPercentage:5,shouldConsiderMouseUp:!e}))),o.default.createElement("div",{className:"nexplayer_text_div"},o.default.createElement("h2",{className:"nexplayer_title"}," ",this.props.currentItemPlaying.name," "),o.default.createElement("h3",{className:"nexplayer_subtitle"}," ",this.props.currentItemPlaying.subtitle," ")),o.default.createElement("div",{ref:"full_screen_div_ref",tabIndex:"10",className:"nexplayer_button nexplayer_full_screen",onClick:function(){A.default?A.default.toggle(t.props.fullScreenContainer.refs.nexplayer_container):t.props.onFullScreen()}},this.state.fullscreenEnabled?o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconExitFullscreen",img:m.default}):o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconFullscreen",img:f.default})),o.default.createElement("div",{ref:"language_div_ref",tabIndex:"5",className:"nexplayer_button nexplayer_language",onClick:function(){t.props.showingLanguageUI?t.props.onHideLanguage():t.props.onShowLanguage()},style:{display:0<this.props.allSubtitles.length||0<this.props.allAudios.length?"inherit":"none"}},o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconLanguage",img:g.default})),o.default.createElement("div",{id:"airplay",className:"nexplayer_button nexplayer_airplay",style:{display:this.props.airPlayEnabled?"block":"none"}},o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconAirplay",img:v.default})),o.default.createElement("button",{ref:"chromecast",className:"nexplayer_button nexplayer_chromecast",style:{display:this.props.chromeCastEnabled?"block":"none"},onClick:function(){t.chromecast.updateMedia(t.props),t.chromecastButton=document.getElementById("chromecast_button"),t.chromecastButton.click()}},o.default.createElement(S.default,{extraCSSClass:"nexplayer_IconChromecast",img:this.chomecastIcon})))}}]),n}(o.default.Component),l={onPlaying:l.ActionOrderPlay,onPause:l.ActionOrderPause,onShowLanguage:l.ActionShowLanguage,onHideLanguage:l.ActionHideLanguage,onPlayingOrder:l.ActionOrderPlay,onVolume:l.ActionChangeVolume,onFullScreen:l.ActionFullScreen,onChromeCastEnabled:l.ActionChromecastEnabled,onSpeed:l.ActionSetSpeed},s=(0,s.connect)(function(e){return{currentState:e.NexPlayerReducer.status,currentItem:e.NexPlayerReducer.currentPlaylistItem,currentItemPlaying:e.NexPlayerReducer.currentPlaylistItem,showingLanguageUI:e.NexPlayerReducer.showingLanguageUI,allSubtitles:e.NexPlayerReducer.allSubtitles,allAudios:e.NexPlayerReducer.allAudios,currentAudio:e.NexPlayerReducer.currentAudioLanguage,currentSubtitle:e.NexPlayerReducer.currentSubtitleLanguage,currentVolume:e.NexPlayerReducer.volume,unMuteCallBack:e.NexPlayerReducer.unMuteCallback,airPlayEnabled:e.NexPlayerReducer.airPlayEnabled,chromeCastEnabled:e.NexPlayerReducer.chromeCastEnabled,mutedAtStart:e.NexPlayerReducer.mutedAtStart,useDefaultControls:e.NexPlayerReducer.useDefaultControls,div:e.NexPlayerReducer.div}},l)(a);t.default=s},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNNiAxOGw4LjUtNkw2IDZ2MTJ6TTE2IDZ2MTJoMlY2aC0yeiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMyA5djZoNGw1IDVWNEw3IDlIM3ptMTMuNSAzYzAtMS43Ny0xLjAyLTMuMjktMi41LTQuMDN2OC4wNWMxLjQ4LS43MyAyLjUtMi4yNSAyLjUtNC4wMnpNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg1LTUgNi43MXYyLjA2YzQuMDEtLjkxIDctNC40OSA3LTguNzdzLTIuOTktNy44Ni03LTguNzd6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNyAxNEg1djVoNXYtMkg3di0zem0tMi00aDJWN2gzVjVINXY1em0xMiA3aC0zdjJoNXYtNWgtMnYzek0xNCA1djJoM3YzaDJWNWgtNXoiLz4KPC9zdmc+"},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNNSAxNmgzdjNoMnYtNUg1djJ6bTMtOEg1djJoNVY1SDh2M3ptNiAxMWgydi0zaDN2LTJoLTV2NXptMi0xMVY1aC0ydjVoNVY4aC0zeiIvPgo8L3N2Zz4="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMjEgNmgtMnY5SDZ2MmMwIC41NS40NSAxIDEgMWgxMWw0IDRWN2MwLS41NS0uNDUtMS0xLTF6bS00IDZWM2MwLS41NS0uNDUtMS0xLTFIM2MtLjU1IDAtMSAuNDUtMSAxdjE0bDQtNGgxMGMuNTUgMCAxLS40NSAxLTF6Ii8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTYuNSAxMmMwLTEuNzctMS4wMi0zLjI5LTIuNS00LjAzdjIuMjFsMi40NSAyLjQ1Yy4wMy0uMi4wNS0uNDEuMDUtLjYzem0yLjUgMGMwIC45NC0uMiAxLjgyLS41NCAyLjY0bDEuNTEgMS41MUMyMC42MyAxNC45MSAyMSAxMy41IDIxIDEyYzAtNC4yOC0yLjk5LTcuODYtNy04Ljc3djIuMDZjMi44OS44NiA1IDMuNTQgNSA2Ljcxek00LjI3IDNMMyA0LjI3IDcuNzMgOUgzdjZoNGw1IDV2LTYuNzNsNC4yNSA0LjI1Yy0uNjcuNTItMS40Mi45My0yLjI1IDEuMTh2Mi4wNmMxLjM4LS4zMSAyLjYzLS45NSAzLjY5LTEuODFMMTkuNzMgMjEgMjEgMTkuNzNsLTktOUw0LjI3IDN6TTEyIDRMOS45MSA2LjA5IDEyIDguMThWNHoiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+"},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJhIi8+CiAgICA8L2RlZnM+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGlkPSJjIi8+CiAgICA8L2RlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImIiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNhIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPGNsaXBQYXRoIGNsaXAtcGF0aD0idXJsKCNiKSIgaWQ9ImQiPgogICAgICAgIDx1c2Ugb3ZlcmZsb3c9InZpc2libGUiIHhsaW5rOmhyZWY9IiNjIi8+CiAgICA8L2NsaXBQYXRoPgogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2QpIiBkPSJNNiAyMmgxMmwtNi02ek0yMSAzSDNjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoNHYtMkgzVjVoMTh2MTJoLTR2Mmg0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6Ii8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIG9wYWNpdHk9Ii4xIi8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMjEgM0gzYy0xLjEgMC0yIC45LTIgMnYzaDJWNWgxOHYxNGgtN3YyaDdjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnpNMSAxOHYzaDNjMC0xLjY2LTEuMzQtMy0zLTN6bTAtNHYyYzIuNzYgMCA1IDIuMjQgNSA1aDJjMC0zLjg3LTMuMTMtNy03LTd6bTAtNHYyYzQuOTcgMCA5IDQuMDMgOSA5aDJjMC02LjA4LTQuOTMtMTEtMTEtMTF6Ii8+Cjwvc3ZnPg=="},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIG9wYWNpdHk9Ii4xIi8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMSAxOHYzaDNjMC0xLjY2LTEuMzQtMy0zLTN6bTAtNHYyYzIuNzYgMCA1IDIuMjQgNSA1aDJjMC0zLjg3LTMuMTMtNy03LTd6bTE4LTdINXYxLjYzYzMuOTYgMS4yOCA3LjA5IDQuNDEgOC4zNyA4LjM3SDE5Vjd6TTEgMTB2MmM0Ljk3IDAgOSA0LjAzIDkgOWgyYzAtNi4wOC00LjkzLTExLTExLTExem0yMC03SDNjLTEuMSAwLTIgLjktMiAydjNoMlY1aDE4djE0aC03djJoN2MxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yeiIvPgo8L3N2Zz4="},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(7),o=(i=i)&&i.__esModule?i:{default:i};a(18);i=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(){var e=this,t=a;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.cue!==this.props.cue||e.duration!==this.props.duration||e.tallAdMarker!==this.props.tallAdMarker}},{key:"render",value:function(){var t=this,e=this.props.cue/this.props.duration*100;return o.default.createElement("div",{className:"nexplayer_ad_marker",style:{marginLeft:-1!=this.props.cue?e+"%":"calc(100% - 0.44074074074rem)",height:this.props.tallAdMarker?"0.69259259259rem":"0.44074074074rem"},ref:"nexplayer_ad_marker",onClick:function(e){return t.props.onClick(e)},onMouseDown:function(){return t.props.onMouseDown()},onMouseOver:function(){return t.props.onMouseOver()},onMouseOut:function(){return t.props.onMouseOut()}})}}]),a}(o.default.Component);t.default=i},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){return e},"object"===n(t)?e.exports=t=r(a(1),a(46),a(229),a(230),a(27),a(28),a(63),a(103),a(231),a(104),a(232),a(233),a(234),a(64),a(235),a(17),a(4),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(145),a(247),a(248),a(249),a(250)):(n=[a(1),a(46),a(229),a(230),a(27),a(28),a(63),a(103),a(231),a(104),a(232),a(233),a(234),a(64),a(235),a(17),a(4),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(145),a(247),a(248),a(249),a(250)],void 0!==(r="function"==typeof(a=r)?a.apply(t,n):a)&&(e.exports=r))},function(e,t,a){"use strict";a(76),a(77),a(89),a(173),a(187),a(188),e.exports=a(16).Promise},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastPlayer=void 0;r(a(7));function r(e){return e&&e.__esModule?e:{default:e}}(0,r(a(251)).default)(["https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"],"chromecastLib");function n(e,t,a){this.currentMediaURL=e,this.currenMediaName=t,this.currenMediaDrm=a,this.playerHandler=new f(this),this.playerState=i,this.remotePlayer=null,this.remotePlayerController=null,this.localPlayer=null,this.currentMediaTime=0,this.currentMediaDuration=-1,this.setupLocalPlayer()}var i="IDLE",o="LOADING",s="LOADED",l="PLAYING",u="PAUSED",c="STOPPED",d="ERROR",h=0,p=!1,f=(n.prototype.initializeCastPlayer=function(e){var t={receiverApplicationId:"DA33F4F1"},a=(t.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,cast.framework.CastContext.getInstance().setOptions(t),this);this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController2=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController2.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,function(){0!==a.remotePlayer.currentTime&&a.remotePlayer.currentTime!==h&&(h=a.remotePlayer.currentTime)}),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,a.switchPlayer.bind(this)),document.getElementsByClassName("nexplayer_volume")[0].addEventListener("click",function(e){p&&(e.stopPropagation(),a.remotePlayerController.muteOrUnmute(),e.target.classList.toggle("nexplayer_IconVolume"),e.target.classList.toggle("nexplayer_IconMuted"),e.target.classList.contains("nexplayer_IconVolume")?e.target.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTMgOXY2aDRsNSA1VjRMNyA5SDN6bTEzLjUgM2MwLTEuNzctMS4wMi0zLjI5LTIuNS00LjAzdjguMDVjMS40OC0uNzMgMi41LTIuMjUgMi41LTQuMDJ6TTE0IDMuMjN2Mi4wNmMyLjg5Ljg2IDUgMy41NCA1IDYuNzFzLTIuMTEgNS44NS01IDYuNzF2Mi4wNmM0LjAxLS45MSA3LTQuNDkgNy04Ljc3cy0yLjk5LTcuODYtNy04Ljc3eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==')":e.target.classList.contains("nexplayer_IconMuted")&&(e.target.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTE2LjUgMTJjMC0xLjc3LTEuMDItMy4yOS0yLjUtNC4wM3YyLjIxbDIuNDUgMi40NWMuMDMtLjIuMDUtLjQxLjA1LS42M3ptMi41IDBjMCAuOTQtLjIgMS44Mi0uNTQgMi42NGwxLjUxIDEuNTFDMjAuNjMgMTQuOTEgMjEgMTMuNSAyMSAxMmMwLTQuMjgtMi45OS03Ljg2LTctOC43N3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXpNNC4yNyAzTDMgNC4yNyA3LjczIDlIM3Y2aDRsNSA1di02LjczbDQuMjUgNC4yNWMtLjY3LjUyLTEuNDIuOTMtMi4yNSAxLjE4djIuMDZjMS4zOC0uMzEgMi42My0uOTUgMy42OS0xLjgxTDE5LjczIDIxIDIxIDE5LjczbC05LTlMNC4yNyAzek0xMiA0TDkuOTEgNi4wOSAxMiA4LjE4VjR6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+')"))},!1),document.getElementsByClassName("nexplayer_play_pause")[0].addEventListener("click",function(e){p&&(e.stopPropagation(),e.target.classList.toggle("nexplayer_IconPlay"),e.target.classList.toggle("nexplayer_IconPause"),e.target.classList.contains("nexplayer_IconPlay")?e.target.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==')":e.target.classList.contains("nexplayer_IconPause")&&(e.target.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTYgMTloNFY1SDZ2MTR6bTgtMTR2MTRoNFY1aC00eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==')"),a.remotePlayerController.playOrPause())},!1),document.getElementsByClassName("nexplayer_container_seekbar")[0].addEventListener("click",function(e){setTimeout(function(){var e;p&&(e=document.getElementsByTagName("video")[0],h=e.currentTime,a.remotePlayer.currentTime=h,a.remotePlayerController.seek())},500)},!1)},n.prototype.switchPlayer=function(){this.playerHandler.stop(),this.playerState=i,cast&&cast.framework&&this.remotePlayer.isConnected?(h=this.playerHandler.getCurrentMediaTime(),p=!0,this.setupRemotePlayer()):(p=!1,this.setupLocalPlayer())},function(e){this.target={},this.setTarget=function(e){this.target=e},this.play=function(){this.target.seekTo(h),e.playerState!==l&&e.playerState!==u&&e.playerState!==s?this.load():(this.target.play(),e.playerState=l)},this.pause=function(){e.playerState===l&&(this.target.pause(),e.playerState=u)},this.stop=function(){this.pause(),e.playerState=c},this.load=function(){e.playerState=o,this.target.load()},this.loaded=function(){0<Object.keys(this.target).length&&(e.currentMediaDuration=this.getMediaDuration(),e.currentMediaTime=this.getCurrentMediaTime()),e.updateMediaDuration(),e.updateMedia(),e.playerState=s,0<e.currentMediaTime&&this.seekTo(e.currentMediaTime-1),this.play()},this.getCurrentMediaTime=function(){return this.target.getCurrentMediaTime()},this.getMediaDuration=function(){return this.target.getMediaDuration()},this.seekTo=function(e){this.target.seekTo(e)}});n.prototype.setupLocalPlayer=function(){var t=document.getElementsByTagName("video")[0],e=(t.addEventListener("loadeddata",this.onMediaLoadedLocally.bind(this)),{});e.play=function(){t.play(),t.style.opacity="1"},e.pause=function(){t.pause()},e.load=function(){e.play()}.bind(this),e.getCurrentMediaTime=function(){return t.currentTime},e.getMediaDuration=function(){return t.duration},e.seekTo=function(e){t.currentTime=e},this.playerHandler.setTarget(e),0<=this.currentMediaTime&&this.playerHandler.play()},n.prototype.setupRemotePlayer=function(){0!=h&&(this.remotePlayer.currentTime=h-1);var a=cast.framework.CastContext.getInstance().getCurrentSession(),t=document.getElementsByTagName("video")[0],e={};e.play=function(){this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause(),t.pause(),t.style.opacity="0.4";var e=document.getElementsByClassName("nexplayer_IconPlay")[0];e&&(e.classList.toggle("nexplayer_IconPlay"),e.classList.toggle("nexplayer_IconPause"),e.classList.contains("nexplayer_IconPlay")?e.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==')":e.classList.contains("nexplayer_IconPause")&&(e.style.backgroundImage="url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTYgMTloNFY1SDZ2MTR6bTgtMTR2MTRoNFY1aC00eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==')"))}.bind(this),e.pause=function(){this.remotePlayer.isPaused||this.remotePlayerController.playOrPause()}.bind(this),e.stop=function(){this.remotePlayerController.stop()}.bind(this),e.load=function(e){var t=new chrome.cast.media.MediaInfo(this.currentMediaURL,""),t=(t.metadata=new chrome.cast.media.GenericMediaMetadata,t.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,t.metadata.title=this.currenMediaName,this.props&&(this.props.currentAudio&&(t.metadata.lang=this.props.currentAudio.id),this.props.currentSubtitle)&&(t.metadata.sub=this.props.currentSubtitle.id),this.currenMediaDrm&&(t.metadata.drm=this.currenMediaDrm),new chrome.cast.media.LoadRequest(t));a.loadMedia(t).then(this.playerHandler.loaded.bind(this.playerHandler),function(e){this.playerState=d,console.log("Remote media load error: "+n.getErrorMessage(e))}.bind(this))}.bind(this),e.getCurrentMediaTime=function(){return this.remotePlayer.currentTime}.bind(this),e.getMediaDuration=function(){return this.remotePlayer.duration}.bind(this),e.seekTo=function(e){this.remotePlayer.currentTime=e,this.remotePlayerController.seek()}.bind(this),this.playerHandler.setTarget(e),this.playerHandler.play()},n.prototype.onMediaLoadedLocally=function(){document.getElementsByTagName("video")[0].currentTime=this.currentMediaTime,this.playerHandler.loaded()},n.prototype.endPlayback=function(){this.currentMediaTime=0,this.playerState=i},n.getDurationString=function(e){var t=""+Math.floor(e%60),e=Math.floor(e/60);return 0===e||(t=e%60+":"+t,0===(e=Math.floor(e/60)))?t:e+":"+t},n.prototype.updateMediaDuration=function(){var e=document.getElementsByTagName("video")[0];n.getDurationString(e.duration)},n.prototype.updateMediaAudioSub=function(e){this.remotePlayerController.playOrPause(),this.props&&this.props.currentSubtitle?(this.props.currentSubtitle.id=e.currentSubtitle.id,this.props.currentAudio=e.currentAudio):this.props=e,this.remotePlayerController.playOrPause()},n.prototype.sendMessage=function(e){var t=cast.framework.CastContext.getInstance().getCurrentSession();null!=t&&t.sendMessage("urn:x-cast:nexstreaming.nexplayer.castgram",e)},n.prototype.updateMedia=function(e){(this.props=e)||(this.props=null)},n.getErrorMessage=function(e){switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"The API is not initialized."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CANCEL:return"The operation was canceled by the user"+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.CHANNEL_ERROR:return"A channel to the receiver is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.EXTENSION_MISSING:return"The Cast extension is not available."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.INVALID_PARAMETER:return"The parameters to the operation were not valid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"No receiver was compatible with the session request."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.SESSION_ERROR:return"A session could not be created, or a session was invalid."+(e.description?" :"+e.description:"");case chrome.cast.ErrorCode.TIMEOUT:return"The operation timed out."+(e.description?" :"+e.description:"")}},t.CastPlayer=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=c(a(7)),o=(c(a(70)),a(13)),s=a(15),l=(a(18),a(41)),u=c(a(228));function c(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function r(e){var t,a;if(this instanceof r)return(t=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))).state={currentTimePertentage:0,currentTime:0},a=t,setTimeout(function(){a.props.focusTopBar([t.refs.playbackbar_div_ref])},100),t.onCueHandler=function(e){a.props.onCue(e.detail)},t.props.div.addEventListener("cuePointsReady",t.onCueHandler),t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(r,[{key:"componentWillUnmount",value:function(){this.props.div.removeEventListener("cuePointsReady",this.onCueHandler)}},{key:"buildTimeString",value:function(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),e=Math.floor(e%60);return isNaN(t)||isNaN(a)||isNaN(e)?"-:-":(e=a+":"+(e=e<10?"0"+e:e),1<=t?t+":"+(e=a<10?"0"+e:e):e)}},{key:"onSeek",value:function(e){var t;this.props.totalTime&&(this.props.currentState===l.STATUS.ENDED&&(this.props.onPlay(),this.props.onPaused()),t=e/100*this.props.totalTime,this.setState({currentTimePertentage:e}),this.props.onSeek(t))}},{key:"getPlaybackPosition",value:function(e){if(!this.props.isLive)return 100*e/this.props.totalTime;null!=document.getElementsByClassName("nexplayer_flex_seekbar")[1]&&(document.getElementsByClassName("nexplayer_flex_seekbar")[0].style.display="none")}},{key:"getBufferPosition",value:function(){return 100*this.props.currentTimeBuffer/this.props.totalTime}},{key:"shouldComponentUpdate",value:function(e,t){return e.isSeeking!==this.props.isSeeking||e.currentTimePertentage!==this.props.currentTimePertentage||e.currentTime!==this.props.currentTime||e.isLive!==this.props.isLive||e.totalTime!==this.props.totalTime||e.cues!==this.props.cues}},{key:"render",value:function(){var e=this.props.isSeeking?this.state.currentTimePertentage:this.getPlaybackPosition(this.props.currentTime);return i.default.createElement("div",{className:"nexplayer_top_bar"},i.default.createElement("div",{className:"nexplayer_current_time"},this.props.isLive?"":this.buildTimeString(this.props.currentTime)),i.default.createElement("div",{tabIndex:"1",className:"nexplayer_container_seekbar",ref:"playbackbar_div_ref"},i.default.createElement(u.default,{secondaryProgress:this.getBufferPosition(),primaryProgress:e,callBackSeek:this.onSeek.bind(this),marginThumbRightPercentage:.5,totalTime:this.props.totalTime,cues:this.props.cues,showThumb:!0})),i.default.createElement("div",{className:"nexplayer_total_time"},this.props.isLive?"Live":this.buildTimeString(this.props.totalTime)))}}]),r}(i.default.Component),s={onTimeUpdate:s.ActionCurrentTimeChange,onSeek:s.ActionOrderSeek,onPlay:s.ActionOrderPlay,play:s.ActionPlaying,onPaused:s.ActionPause,onCue:s.ActionUpdateCuePoints},o=(0,o.connect)(function(e){return{currentState:e.NexPlayerReducer.status,currentTime:e.NexPlayerReducer.currentTime,totalTime:e.NexPlayerReducer.duration,currentTimeBuffer:e.NexPlayerReducer.currentTimeBuffer,isSeeking:e.NexPlayerReducer.isSeeking,cues:e.NexPlayerReducer.adsMarkers,isLive:e.NexPlayerReducer.isLive,div:e.NexPlayerReducer.div}},s)(a);t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=c(a(7)),o=a(13);a(18);var s=c(a(252)),l=a(15),u=(c(a(150)),a(602),a(41));function c(e){return e&&e.__esModule?e:{default:e}}var d=a(604),a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(this instanceof a)return(e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).setDefaultSubtitle=!1,e.state={subtitlesDisabled:!1},e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"areSubtitlesDisabled",value:function(){return this.state.subtitlesDisabled}},{key:"changeSubtitle",value:function(e){this.props.onSubtitle(e)}},{key:"hideSubtitles",value:function(){setTimeout(function(){Object.values(document.getElementsByTagName("video")[0].textTracks).forEach(function(e){try{e.mode="hidden"}catch(e){}})},100)}},{key:"changeAudio",value:function(e){this.props.onAudio(e.value)}},{key:"checkEmptyValue",value:function(e){return""===e?"-":e}},{key:"setDefaultSubtiles",value:function(){var e=this,t=this,a=this.props.defaultLanguage;this.setDefaultSubtile=!0,setTimeout(function(){3===e.props.defaultLanguage.length?e.props.allSubtitles.forEach(function(e){e.label.toUpperCase()===a.toUpperCase()&&t.props.onSubtitle(e)}):e.props.allSubtitles.forEach(function(e){d.living[e.label]&&a.toUpperCase()===d.living[e.label].toUpperCase()&&t.props.onSubtitle(e)})},500)}},{key:"getOptionSubtitles",value:function(){var e,t=[],a=-1;for(0<this.props.allSubtitles.length&&!this.setDefaultSubtile&&null!=this.props.defaultLanguage&&null!==this.props.defaultLanguage&&this.setDefaultSubtiles();0<this.props.allSubtitles.length&&a<this.props.allSubtitles.length;)-1===a?t.push({value:null,label:"Off"}):(e=this.props.allSubtitles[a].label,3===(e=this.checkEmptyValue(e)).length&&void 0!==d.living[e]&&(e=d.living[e]),t.push({key:a,value:this.props.allSubtitles[a],label:e})),a+=1;return t}},{key:"getOptionAudio",value:function(){for(var e=[],t=0;0<this.props.allAudios.length&&t<this.props.allAudios.length;)e.push({value:this.props.allAudios[t],label:this.props.allAudios[t].label}),t+=1;return e}},{key:"getCurrentSubtitle",value:function(){var e=this.props.currentSubtitle;return(e=e||{value:null,label:"OFF"}).label=this.checkEmptyValue(e.label),e}},{key:"getSizeClass",value:function(){var e="nexplayer_container";return this.props.size===u.SIZE.MOBILE?e+=" nexplayer_container_mobile":this.props.size===u.SIZE.TINY&&(e+=" nexplayer_container_tiny"),e}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.subtitlesDisabled!==t.subtitlesDisabled||this.props.isLanguageShowing!==e.isLanguageShowing||this.props.allAudios.length!==e.allAudios.length||this.props.size!==e.size||this.props.currentAudio!==e.currentAudio||this.props.currentSubtitle!==e.currentSubtitle||this.props.allSubtitles!==e.allSubtitles}},{key:"render",value:function(){var a=this,e=this.getOptionSubtitles(),t=this.getOptionAudio();return this.state.subtitlesDisabled&&this.hideSubtitles(),i.default.createElement("div",{style:{display:this.props.isLanguageShowing?"inherit":"none"}},i.default.createElement("div",{className:"nexplayer_option_ui",style:{right:"0px"}},i.default.createElement("div",{className:"nexplayer_option_audios",style:{borderRight:e.length>t.length&&0<e.length?"0px":"1px solid black",display:0<this.props.allAudios.length?"inherit":"none"},ref:"nexplayer_option_audio_small"},i.default.createElement("h3",null,"Audio"),this.props.allAudios.map(function(e,t){return i.default.createElement("p",{key:e.id,className:a.props.currentAudio&&a.props.currentAudio.id==e.id?"nexplayer_selected_element":"",onClick:function(){a.props.onAudio(e)}}," ",e.label," ")})),i.default.createElement("div",{className:"nexplayer_option_subtitles",style:{borderLeft:e.length>t.length&&0<t.length?"1px solid black":"0px",display:0<this.props.allSubtitles.length?"inherit":"none"}},i.default.createElement("h3",null,"Subtitles"),i.default.createElement("div",null,i.default.createElement("p",{id:"subOff",className:this.areSubtitlesDisabled()?"nexplayer_selected_element":"",onClick:function(){a.setState({subtitlesDisabled:!0}),a.props.onSubtitle(null),a.hideSubtitles();var e=new CustomEvent("loadingsubtiles",{detail:null});a.props.div.dispatchEvent(e)}},"Off"),this.props.allSubtitles.map(function(t,e){return i.default.createElement("p",{key:t.id,className:a.props.currentSubtitle&&a.props.currentSubtitle.id==t.id&&!a.state.subtitlesDisabled?"nexplayer_selected_element":"",onClick:function(){a.setState({subtitlesDisabled:!1}),a.props.onSubtitle(t);var e=new CustomEvent("loadingsubtiles",{detail:t});a.props.div.dispatchEvent(e)}}," ",3!==t.label.length||void 0===d.living[t.label]?t.label:d.living[t.label]," ")})))),i.default.createElement("div",{className:"nexplayer_triangle_bottom",style:{right:"0px"}},i.default.createElement("div",{className:"nexplayer_IconTriangle nexplayer_icon",style:{backgroundImage:"url("+s.default+")"}})))}}]),a}(i.default.Component),l={onAudio:l.ActionUpdateSelectedAudio,onSubtitle:l.ActionUpdateSelectedSubtitle},o=(0,o.connect)(function(e){return{div:e.NexPlayerReducer.div,isLanguageShowing:e.NexPlayerReducer.showingLanguageUI,allSubtitles:e.NexPlayerReducer.allSubtitles,allAudios:e.NexPlayerReducer.allAudios,currentAudio:e.NexPlayerReducer.currentAudioLanguage,currentSubtitle:e.NexPlayerReducer.currentSubtitleLanguage,size:e.NexPlayerReducer.size,defaultLanguage:e.NexPlayerReducer.defaultLanguage}},l)(a);t.default=o},function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(Object.defineProperty(t,"__esModule",{value:!0}),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}),n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=a(7),l=u(s),a=u(a(99));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform}function d(){return f?"_"+Math.random().toString(36).substr(2,12):void 0}var h={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},p=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],f=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),s=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));function a(e){var t;if(this instanceof a)return(t=function(e,t){if(e)return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).inputRef=function(e){t.input=e,"function"==typeof t.props.inputRef&&t.props.inputRef(e)},t.placeHolderSizerRef=function(e){t.placeHolderSizer=e},t.sizerRef=function(e){t.sizer=e},t.state={inputWidth:e.minWidth,inputId:e.id||d()},t;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n(a,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e=e.id;e!==this.props.id&&this.setState({inputId:e||d()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){var e;this.mounted&&window.getComputedStyle&&(e=this.input&&window.getComputedStyle(this.input))&&(c(e,this.sizer),this.placeHolderSizer)&&c(e,this.placeHolderSizer)}},{key:"updateInputWidth",value:function(){var e;this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth&&(e=void 0,e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e=(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth?this.props.minWidth:e)!==this.state.inputWidth)&&this.setState({inputWidth:e})}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return f&&e?l.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t,e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!=e?e:t}),a=i({},this.props.style),r=(a.display||(a.display="inline-block"),i({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle)),n=function(e,t){var a,r={};for(a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(this.props,[]);return t=n,p.forEach(function(e){return delete t[e]}),n.className=this.props.inputClassName,n.id=this.state.inputId,n.style=r,l.default.createElement("div",{className:this.props.className,style:a},this.renderStyles(),l.default.createElement("input",i({},n,{ref:this.inputRef})),l.default.createElement("div",{ref:this.sizerRef,style:h},e),this.props.placeholder?l.default.createElement("div",{ref:this.placeHolderSizerRef,style:h},this.props.placeholder):null)}}]),a}(s.Component);s.propTypes={className:a.default.string,defaultValue:a.default.any,extraWidth:a.default.oneOfType([a.default.number,a.default.string]),id:a.default.string,injectStyles:a.default.bool,inputClassName:a.default.string,inputRef:a.default.func,inputStyle:a.default.object,minWidth:a.default.oneOfType([a.default.number,a.default.string]),onAutosize:a.default.func,onChange:a.default.func,placeholder:a.default.string,placeholderIsMinWidth:a.default.bool,style:a.default.object,value:a.default.any},s.defaultProps={minWidth:1,injectStyles:!0},t.default=s},function(e,t,a){"use strict";var o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r,n=void 0===a?"undefined":s(a);if("string"===n||"number"===n)e.push(a);else if(Array.isArray(a))a.length&&(r=l.apply(null,a))&&e.push(r);else if("object"===n)if(a.toString===Object.prototype.toString||a.toString.toString().includes("[native code]"))for(var i in a)o.call(a,i)&&a[i]&&e.push(i);else e.push(a.toString())}}return e.join(" ")}o={}.hasOwnProperty,e.exports?e.exports=l.default=l:"object"===s(a(253))&&a(253)?void 0!==(a=function(){return l}.apply(t,[]))&&(e.exports=a):window.classNames=l},function(e,t,a){"use strict";var r=a(603),n=("string"==typeof r&&(r=[[e.i,r,""]]),{hmr:!0});n.transform=void 0,a(101)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(100)(!1)).push([e.i,".Select{position:relative}.Select input::-webkit-contacts-auto-fill-button,.Select input::-webkit-credentials-auto-fill-button{display:none!important}.Select input::-ms-clear,.Select input::-ms-reveal{display:none!important}.Select,.Select div,.Select input,.Select span{box-sizing:border-box}.Select.is-disabled .Select-arrow-zone{cursor:default;pointer-events:none;opacity:.35}.Select.is-disabled>.Select-control{background-color:#f9f9f9}.Select.is-disabled>.Select-control:hover{box-shadow:none}.Select.is-open>.Select-control{border-bottom-right-radius:0;border-bottom-left-radius:0;background:#fff;border-color:#b3b3b3 #ccc #d9d9d9}.Select.is-open>.Select-control .Select-arrow{top:-2px;border-color:transparent transparent #999;border-width:0 5px 5px}.Select.is-searchable.is-focused:not(.is-open)>.Select-control,.Select.is-searchable.is-open>.Select-control{cursor:text}.Select.is-focused>.Select-control{background:#fff}.Select.is-focused:not(.is-open)>.Select-control{border-color:#007eff;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 0 3px rgba(0,126,255,.1);background:#fff}.Select.has-value.is-clearable.Select--single>.Select-control .Select-value{padding-right:42px}.Select.has-value.is-pseudo-focused.Select--single>.Select-control .Select-value .Select-value-label,.Select.has-value.Select--single>.Select-control .Select-value .Select-value-label{color:#333}.Select.has-value.is-pseudo-focused.Select--single>.Select-control .Select-value a.Select-value-label,.Select.has-value.Select--single>.Select-control .Select-value a.Select-value-label{cursor:pointer;text-decoration:none}.Select.has-value.is-pseudo-focused.Select--single>.Select-control .Select-value a.Select-value-label:focus,.Select.has-value.is-pseudo-focused.Select--single>.Select-control .Select-value a.Select-value-label:hover,.Select.has-value.Select--single>.Select-control .Select-value a.Select-value-label:focus,.Select.has-value.Select--single>.Select-control .Select-value a.Select-value-label:hover{color:#007eff;outline:none;text-decoration:underline}.Select.has-value.is-pseudo-focused.Select--single>.Select-control .Select-value a.Select-value-label:focus,.Select.has-value.Select--single>.Select-control .Select-value a.Select-value-label:focus{background:#fff}.Select.has-value.is-pseudo-focused .Select-input{opacity:0}.Select.is-open .Select-arrow,.Select .Select-arrow-zone:hover>.Select-arrow{border-top-color:#666}.Select.Select--rtl{direction:rtl;text-align:right}.Select-control{background-color:#fff;border-color:#d9d9d9 #ccc #b3b3b3;border-radius:4px;border:1px solid #ccc;color:#333;cursor:default;display:table;border-spacing:0;border-collapse:separate;height:36px;outline:none;overflow:hidden;position:relative;width:100%}.Select-control:hover{box-shadow:0 1px 0 rgba(0,0,0,.06)}.Select-control .Select-input:focus{outline:none;background:#fff}.Select--single>.Select-control .Select-value,.Select-placeholder{bottom:0;color:#aaa;left:0;line-height:34px;padding-left:10px;padding-right:10px;position:absolute;right:0;top:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Select-input{height:34px;padding-left:10px;padding-right:10px;vertical-align:middle}.Select-input>input{width:100%;background:none transparent;border:0 none;box-shadow:none;cursor:default;display:inline-block;font-family:inherit;font-size:inherit;margin:0;outline:none;line-height:17px;padding:8px 0 12px;-webkit-appearance:none}.is-focused .Select-input>input{cursor:text}.has-value.is-pseudo-focused .Select-input{opacity:0}.Select-control:not(.is-searchable)>.Select-input{outline:none}.Select-loading-zone{cursor:pointer;display:table-cell;text-align:center}.Select-loading,.Select-loading-zone{position:relative;vertical-align:middle;width:16px}.Select-loading{animation:Select-animation-spin .4s infinite linear;height:16px;box-sizing:border-box;border-radius:50%;border:2px solid #ccc;border-right-color:#333;display:inline-block}.Select-clear-zone{animation:Select-animation-fadeIn .2s;color:#999;cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:17px}.Select-clear-zone:hover{color:#d0021b}.Select-clear{display:inline-block;font-size:18px;line-height:1}.Select--multi .Select-clear-zone{width:17px}.Select-arrow-zone{cursor:pointer;display:table-cell;position:relative;text-align:center;vertical-align:middle;width:25px;padding-right:5px}.Select--rtl .Select-arrow-zone{padding-right:0;padding-left:5px}.Select-arrow{border-color:#999 transparent transparent;border-style:solid;border-width:5px 5px 2.5px;display:inline-block;height:0;width:0;position:relative}.Select-control>:last-child{padding-right:5px}.Select--multi .Select-multi-value-wrapper{display:inline-block}.Select .Select-aria-only{position:absolute;display:inline-block;height:1px;width:1px;margin:-1px;clip:rect(0,0,0,0);overflow:hidden;float:left}@keyframes Select-animation-fadeIn{0%{opacity:0}to{opacity:1}}.Select-menu-outer{border-bottom-right-radius:4px;border-bottom-left-radius:4px;background-color:#fff;border:1px solid #ccc;border-top-color:#e6e6e6;box-shadow:0 1px 0 rgba(0,0,0,.06);box-sizing:border-box;margin-top:-1px;max-height:200px;position:absolute;left:0;top:100%;width:100%;z-index:1;-webkit-overflow-scrolling:touch}.Select-menu{max-height:198px;overflow-y:auto}.Select-option{box-sizing:border-box;background-color:#fff;color:#666;cursor:pointer;display:block;padding:8px 10px}.Select-option:last-child{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.Select-option.is-selected{background-color:#f5faff;background-color:rgba(0,126,255,.04);color:#333}.Select-option.is-focused{background-color:#ebf5ff;background-color:rgba(0,126,255,.08);color:#333}.Select-option.is-disabled{color:#ccc;cursor:default}.Select-noresults{box-sizing:border-box;color:#999;cursor:default;display:block;padding:8px 10px}.Select--multi .Select-input{vertical-align:middle;margin-left:10px;padding:0}.Select--multi.Select--rtl .Select-input{margin-left:0;margin-right:10px}.Select--multi.has-value .Select-input{margin-left:5px}.Select--multi .Select-value{background-color:#ebf5ff;background-color:rgba(0,126,255,.08);border-radius:2px;border:1px solid #c2e0ff;border:1px solid rgba(0,126,255,.24);color:#007eff;display:inline-block;font-size:.9em;line-height:1.4;margin-left:5px;margin-top:5px;vertical-align:top}.Select--multi .Select-value-icon,.Select--multi .Select-value-label{display:inline-block;vertical-align:middle}.Select--multi .Select-value-label{border-bottom-right-radius:2px;border-top-right-radius:2px;cursor:default;padding:2px 5px}.Select--multi a.Select-value-label{color:#007eff;cursor:pointer;text-decoration:none}.Select--multi a.Select-value-label:hover{text-decoration:underline}.Select--multi .Select-value-icon{cursor:pointer;border-bottom-left-radius:2px;border-top-left-radius:2px;border-right:1px solid #c2e0ff;border-right:1px solid rgba(0,126,255,.24);padding:1px 5px 3px}.Select--multi .Select-value-icon:focus,.Select--multi .Select-value-icon:hover{background-color:#d8eafd;background-color:rgba(0,113,230,.08);color:#0071e6}.Select--multi .Select-value-icon:active{background-color:#c2e0ff;background-color:rgba(0,126,255,.24)}.Select--multi.Select--rtl .Select-value{margin-left:0;margin-right:5px}.Select--multi.Select--rtl .Select-value-icon{border-right:none;border-left:1px solid #c2e0ff;border-left:1px solid rgba(0,126,255,.24)}.Select--multi.is-disabled .Select-value{background-color:#fcfcfc;border:1px solid #e3e3e3;color:#333}.Select--multi.is-disabled .Select-value-icon{cursor:not-allowed;border-right:1px solid #e3e3e3}.Select--multi.is-disabled .Select-value-icon:active,.Select--multi.is-disabled .Select-value-icon:focus,.Select--multi.is-disabled .Select-value-icon:hover{background-color:#fcfcfc}@keyframes Select-animation-spin{to{transform:rotate(1turn)}}",""])},function(e,t,a){"use strict";var r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(e){var t={afh:"Afrihili",epo:"Esperanto",ido:"Ido",ile:"Interlingue",ina:"Interlingua",jbo:"Lojban",tlh:"Klingon",vol:"Volapk",zbl:"Blissymbols"},a={chb:"Chibcha",chg:"Chagatai",cop:"Coptic",sam:"Samaritan Aramaic"},r={ang:"Old English",dum:"Middle Dutch",enm:"Middle English",frm:"Middle French",fro:"Old French",gmh:"Middle High German",goh:"Old High German",grc:"Ancient Greek",mga:"Middle Irish",non:"Old Norse",nwc:"Classical Newari",ota:"Ottoman Turkish",peo:"Old Persian",pro:"Old Provenal",sga:"Old Irish",syc:"Classical Syriac"},n={aar:"Afar",abk:"Abkhazian",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe",afr:"Afrikaans",ain:"Ainu",aka:"Akan",alb:"Albanian",sqi:"Albanian",ale:"Aleut",alt:"Southern Altai",amh:"Amharic",anp:"Angika",ara:"Arabic",arg:"Aragonese",arm:"Armenian",hye:"Armenian",arn:"Mapudungun",arp:"Arapaho",arw:"Arawak",asm:"Assamese",ast:"Asturian",ava:"Avaric",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",bak:"Bashkir",bal:"Baluchi",bam:"Bambara",ban:"Balinese",baq:"Basque",eus:"Basque",bas:"Basa",bej:"Beja",bel:"Belarusian",bem:"Bemba",ben:"Bengali",bho:"Bhojpuri",bik:"Bikol",bin:"Bini",bis:"Bislama",bla:"Siksika",bod:"Tibetan",tib:"Tibetan",bos:"Bosnian",bra:"Braj",bre:"Breton",bua:"Buriat",bug:"Buginese",bul:"Bulgarian",bur:"Burmese",mya:"Burmese",byn:"Bilin",cad:"Caddo",car:"Galibi Carib",cat:"Catalan",ceb:"Cebuano",ces:"Czech",cze:"Czech",cha:"Chamorro",che:"Chechen",chi:"Chinese",zho:"Chinese",chk:"Chuukese",chm:"Mari",chn:"Chinook jargon",cho:"Choctaw",chp:"Chipewyan",chr:"Cherokee",chv:"Chuvash",chy:"Cheyenne",cor:"Cornish",cos:"Corsican",cre:"Cree",crh:"Crimean Tatar",csb:"Kashubian",cym:"Welsh",wel:"Welsh",dak:"Dakota",dan:"Danish",dar:"Dargwa",del:"Delaware",den:"Slave",deu:"German",ger:"German",dgr:"Dogrib",din:"Dinka",div:"Dhivehi",doi:"Dogri",dsb:"Lower Sorbian",dua:"Duala",dut:"Dutch",nld:"Dutch",dyu:"Dyula",dzo:"Dzongkha",efi:"Efik",eka:"Ekajuk",ell:"Modern Greek",gre:"Modern Greek",eng:"English",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fao:"Faroese",fas:"Persian",per:"Persian",fat:"Fanti",fij:"Fijian",fil:"Filipino",fin:"Finnish",fon:"Fon",fra:"French",fre:"French",frr:"Northern Frisian",frs:"Eastern Frisian",fry:"Western Frisian",ful:"Fulah",fur:"Friulian",gaa:"Ga",gay:"Gayo",gba:"Gbaya",geo:"Georgian",kat:"Georgian",gil:"Gilbertese",gla:"Gaelic",gle:"Irish",glg:"Galician",glv:"Manx",gon:"Gondi",gor:"Gorontalo",grb:"Grebo",grn:"Guarani",gsw:"Swiss German",guj:"Gujarati",gwi:"Gwichin",hai:"Haida",hat:"Haitian",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",hin:"Hindi",hmn:"Hmong",hmo:"Hiri Motu",hrv:"Croatian",hsb:"Upper Sorbian",hun:"Hungarian",hup:"Hupa",iba:"Iban",ibo:"Igbo",ice:"Icelandic",isl:"Icelandic",iii:"Sichuan Yi",iku:"Inuktitut",ilo:"Iloko",ind:"Indonesian",inh:"Ingush",ipk:"Inupiaq",ita:"Italian",jav:"Javanese",jpn:"Japanese",jpr:"Judeo-Persian",jrb:"Judeo-Arabic",kaa:"Kara-Kalpak",kab:"Kabyle",kac:"Kachin",kal:"Kalaallisut",kam:"Kamba",kan:"Kannada",kas:"Kashmiri",kau:"Kanuri",kaz:"Kazakh",kbd:"Kabardian",kha:"Khasi",khm:"Central Khmer",kik:"Kikuyu",kin:"Kinyarwanda",kir:"Kirghiz",kmb:"Kimbundu",kok:"Konkani",kom:"Komi",kon:"Kongo",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",krc:"Karachay-Balkar",krl:"Karelian",kru:"Kurukh",kua:"Kuanyama",kum:"Kumyk",kur:"Kurdish",kut:"Kutenai",lad:"Ladino",lah:"Lahnda",lam:"Lamba",lao:"Lao",lav:"Latvian",lez:"Lezghian",lim:"Limburgan",lin:"Lingala",lit:"Lithuanian",lol:"Mongo",loz:"Lozi",ltz:"Luxembourgish",lua:"Luba-Lulua",lub:"Luba-Katanga",lug:"Ganda",lui:"Luiseno",lun:"Lunda",luo:"Luo",lus:"Lushai",mac:"Macedonian",mkd:"Macedonian",mad:"Madurese",mag:"Magahi",mah:"Marshallese",mai:"Maithili",mak:"Makasar",mal:"Malayalam",man:"Mandingo",mao:"Maori",mri:"Maori",mar:"Marathi",mas:"Masai",may:"Malay",msa:"Malay",mdf:"Moksha",mdr:"Mandar",men:"Mende",mic:"Mi'kmaq",min:"Minangkabau",mlg:"Malagasy",mlt:"Maltese",mnc:"Manchu",mni:"Manipuri",moh:"Mohawk",mon:"Mongolian",mos:"Mossi",mus:"Creek",mwl:"Mirandese",mwr:"Marwari",myv:"Erzya",nap:"Neapolitan",nau:"Nauru",nav:"Navajo",nbl:"South Ndebele",nde:"North Ndebele",ndo:"Ndonga",nds:"Low German",nep:"Nepali",nia:"Nias",niu:"Niuean",nno:"Norwegian Nynorsk",nob:"Norwegian Bokml",nog:"Nogai",nor:"Norwegian",nqo:"N'Ko",nso:"Pedi",nya:"Chichewa",nym:"Nyamwezi",nyn:"Nyankole",nyo:"Nyoro",nzi:"Nzima",oci:"Occitan",oji:"Ojibwa",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetian",pag:"Pangasinan",pam:"Pampanga",pan:"Panjabi",pap:"Papiamento",pau:"Palauan",pol:"Polish",pon:"Pohnpeian",por:"Portuguese",pus:"Pushto",que:"Quechua",raj:"Rajasthani",rap:"Rapanui",rar:"Rarotongan",roh:"Romansh",rom:"Romany",ron:"Romanian",rum:"Romanian",run:"Rundi",rup:"Aromanian",rus:"Russian",sad:"Sandawe",sag:"Sango",sah:"Yakut",sas:"Sasak",sat:"Santali",scn:"Sicilian",sco:"Scots",sel:"Selkup",shn:"Shan",sid:"Sidamo",sin:"Sinhala",slo:"Slovak",slk:"Slovak",slv:"Slovenian",sma:"Southern Sami",sme:"Northern Sami",smj:"Lule Sami",smn:"Inari Sami",smo:"Samoan",sms:"Skolt Sami",sna:"Shona",snd:"Sindhi",snk:"Soninke",som:"Somali",sot:"Southern Sotho",spa:"Spanish",srd:"Sardinian",srn:"Sranan Tongo",srp:"Serbian",srr:"Serer",ssw:"Swati",suk:"Sukuma",sun:"Sundanese",sus:"Susu",swa:"Swahili",swe:"Swedish",syr:"Syriac",tah:"Tahitian",tam:"Tamil",tat:"Tatar",tel:"Telugu",tem:"Timne",ter:"Tereno",tet:"Tetum",tgk:"Tajik",tgl:"Tagalog",tha:"Thai",tig:"Tigre",tir:"Tigrinya",tiv:"Tiv",tkl:"Tokelau",tli:"Tlingit",tmh:"Tamashek",tog:"Tonga",ton:"Tonga",tpi:"Tok Pisin",tsi:"Tsimshian",tsn:"Tswana",tso:"Tsonga",tuk:"Turkmen",tum:"Tumbuka",tur:"Turkish",tvl:"Tuvalua",twi:"Twi",tyv:"Tuvinian",udm:"Udmurt",uig:"Uighur",ukr:"Ukrainian",umb:"Umbundu",urd:"Urdu",uzb:"Uzbek",vai:"Vai",ven:"Venda",vie:"Vietnamese",vot:"Votic",wal:"Wolaitta",war:"Waray",was:"Washo",wln:"Walloon",wol:"Wolof",xal:"Kalmyk",xho:"Xhosa",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",zap:"Zapotec",zen:"Zenaga",zgh:"Standard Moroccan Tamazight",zha:"Zhuang",zul:"Zulu",zun:"Zuni",zza:"Zaza",new:"Nepal Bhasa"},i={akk:"Akkadian",arc:"Official Aramaic",ave:"Avestan",chu:"Church Slavic",egy:"Egyptian",elx:"Elamite",gez:"Geez",got:"Gothic",hit:"Hittite",kaw:"Kawi",kho:"Khotanese",lat:"Latin",pal:"Pahlavi",phn:"Phoenician",pli:"Pali",san:"Sanskrit",sog:"Sogdian",sux:"Sumerian",uga:"Ugaritic",afa:"Afro-Asiatic languages",alg:"Algonquian languages",apa:"Apache languages",art:"Artificial languages",ath:"Athapascan languages",aus:"Australian languages",bad:"Banda languages",bai:"Bamileke languages",bat:"Baltic languages",ber:"Berber languages",bih:"Bihari languages",bnt:"Bantu languages",btk:"Batak languages",cai:"Central American Indian languages",cau:"Caucasian languages",cel:"Celtic languages",cmc:"Chamic languages",cpe:"English based Creoles and pidgins",cpf:"French-based Creoles and pidgins",cpp:"Portuguese-based Creoles and pidgins",crp:"Creoles and pidgins",cus:"Cushitic languages",day:"Land Dayak languages",dra:"Dravidian languages",fiu:"Finno-Ugrian languages",gem:"Germanic languages",him:"Himachali languages",ijo:"Ijo languages",inc:"Indic languages",ine:"Indo-European languages",ira:"Iranian languages",iro:"Iroquoian languages",kar:"Karen languages",khi:"Khoisan languages",kro:"Kru languages",map:"Austronesian languages",mis:"Uncoded languages",mkh:"Mon-Khmer languages",mno:"Manobo languages",mul:"Multiple languages",mun:"Munda languages",myn:"Mayan languages",nah:"Nahuatl languages",nai:"North American Indian languages",nic:"Niger-Kordofanian languages",nub:"Nubian languages",oto:"Otomian languages",paa:"Papuan languages",phi:"Philippine languages",pra:"Prakrit languages",roa:"Romance languages",sai:"South American Indian languages",sal:"Salishan languages",sem:"Semitic languages",sgn:"Sign languages",sio:"Siouan languages",sit:"Sino-Tibetan languages",sla:"Slavic languages",smi:"Sami languages",son:"Songhai languages",ssa:"Nilo-Saharan languages",tai:"Tai languages",tup:"Tupi languages",tut:"Altaic languages",und:"Undetermined",wak:"Wakashan languages",wen:"Sorbian languages",ypk:"Yupik languages",znd:"Zande languages",zxx:"No linguistic content"};e.ancient={akk:"Akkadian",arc:"Official Aramaic",ave:"Avestan",chu:"Church Slavic",egy:"Egyptian",elx:"Elamite",gez:"Geez",got:"Gothic",hit:"Hittite",kaw:"Kawi",kho:"Khotanese",lat:"Latin",pal:"Pahlavi",phn:"Phoenician",pli:"Pali",san:"Sanskrit",sog:"Sogdian",sux:"Sumerian",uga:"Ugaritic"},e.constructed=t,e.extinct=a,e.historical=r,e.living=n,e.other=i,Object.defineProperty(e,"__esModule",{value:!0})},"object"===n(t)&&void 0!==e?r(t):void 0!==(r="function"==typeof(n=r)?n.apply(t,[t]):n)&&(e.exports=r)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(7),n=(r=r)&&r.__esModule?r:{default:r},r=a(13);a(15),a(18),a(41);a=(0,r.connect)(function(e){return{watermarkURL:e.NexPlayerReducer.watermarkURL}})(function(e){return n.default.createElement("img",{className:"nexplayer_logo_div",src:e.watermarkURL})});t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(7),n=(r=r)&&r.__esModule?r:{default:r},r=a(13),i=(a(15),a(18),a(41));a=(0,r.connect)(function(e){return{currentState:e.NexPlayerReducer.status}})(function(e){return n.default.createElement("div",{className:"nexplayer_spinner",style:{display:e.currentState===i.STATUS.LOADING?"inherit":"none"}},n.default.createElement("div",{className:"nexplayer_double_bounce1"}),n.default.createElement("div",{className:"nexplayer_double_bounce2"}))});t.default=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(7)),n=a(13),i=a(15),o=(a(18),a(41)),s=u(a(227)),l=u(a(102));function u(e){return e&&e.__esModule?e:{default:e}}a={onPlaying:i.ActionOrderPlay,onfinish:i.ActionEnded,onPaused:i.ActionPause},i=(0,n.connect)(function(e){return{currentState:e.NexPlayerReducer.status}},a)(function(e){return r.default.createElement("div",{className:"nexplayer_endedscreen",style:{display:e.currentState===o.STATUS.ENDED?"inherit":"none"}},r.default.createElement("div",{className:"nexplayer_button nexplayer_logo_replay nexplayer_IconReset",onClick:function(){e.currentState===o.STATUS.ENDED&&e.onPlaying()}},r.default.createElement(l.default,{extraCSSClass:"nexplayer_IconLanguage",img:s.default})))});t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=l(a(7)),o=(l(a(70)),a(18),a(13)),s=(a(15),l(a(252)));function l(e){return e&&e.__esModule?e:{default:e}}a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(this instanceof a)return(e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).currentThumb=null,e.barElem=document.getElementsByClassName("nexplayer_bar")[0],e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"getSeconds",value:function(){return this.props.clientPosition*this.props.duration/this.props.seekbarWidth}},{key:"buildTimeString",value:function(e){var t=Math.floor(e/3600),a=Math.floor(e/60%60),e=Math.floor(e%60);return isNaN(t)||isNaN(a)||isNaN(e)?"-:-":(e=a+":"+(e=e<10?"0"+e:e),1<=t?t+":"+(e=a<10?"0"+e:e):e)}},{key:"setThumbnail",value:function(e){var t=new CustomEvent("updatethumbnailposition",{detail:this.getSeconds()}),a=(this.props.div.dispatchEvent(t),0);if(e<=0)a=0;else if(this.props.thumbnails[this.props.thumbnails.length-1].getfinishTime()<e)a=this.props.thumbnails.length-1;else for(var r=0;r<this.props.thumbnails.length;r++)if(this.props.thumbnails[r].getfinishTime()>e&&this.props.thumbnails[r].getstartTime()<=e){a=r;break}this.currentThumb=this.props.thumbnails[a],void 0!==this.currentThumb&&null!==this.currentThumb&&this.refs.nexplayer_thumb_image_ref.getContext("2d").drawImage(this.currentThumb.getframe(),0,0)}},{key:"shouldShowThumbnail",value:function(){if(this.barElem||(this.barElem=document.getElementsByClassName("nexplayer_bar")[0]),this.barElem)return"none"!==this.barElem.style.display&&(this.props.currentItem.dynamicThumbnails||void 0!==this.props.currentItem.staticThumbnails)}},{key:"shouldComponentUpdate",value:function(e){return e.clientPosition!==this.props.clientPosition||e.thumbnails!==this.props.thumbnails||e.duration!==this.props.duration||e.marginSeekbarLeft!==this.props.marginSeekbarLeft||e.currentItem!==this.props.currentItem||e.marginVideoLeft!==this.props.marginVideoLeft||e.seekbarWidth!==this.props.seekbarWidth}},{key:"render",value:function(){this.shouldShowThumbnail()&&-1<this.props.clientPosition&&void 0!==this.props.thumbnails&&null!==this.props.thumbnails&&0<this.props.thumbnails.length&&this.setThumbnail(this.getSeconds());var e,t=0,a=0,r=(this.refs.nexplayer_thumb_option_ref&&this.refs.nexplayer_thumb_triangle_ref&&(e=(r=this.props.marginVideoLeft>this.props.marginSeekbarLeft?this.props.clientPosition+this.props.marginSeekbarLeft:this.props.clientPosition+this.props.marginSeekbarLeft-this.props.marginVideoLeft)-this.refs.nexplayer_thumb_triangle_ref.clientWidth/2,t=r-this.refs.nexplayer_thumb_option_ref.clientWidth/2+"px",a=e+"px"),this.shouldShowThumbnail()&&null!==this.currentThumb&&-1<this.props.clientPosition?"1":"0");return i.default.createElement("div",{style:{opacity:r}},i.default.createElement("div",{ref:"nexplayer_thumb_option_ref",className:"nexplayer_thumb_container",style:{left:t}},i.default.createElement("div",{className:"nexplayer_thumb_flex"},i.default.createElement("canvas",{ref:"nexplayer_thumb_image_ref",className:"nexplayer_thumb_image"}),i.default.createElement("div",{className:"nexplayer_thumb_text"},this.buildTimeString(this.getSeconds())))),i.default.createElement("div",{ref:"nexplayer_thumb_triangle_ref",className:"nexplayer_thumb_triangle_bottom",style:{left:a}},i.default.createElement("div",{className:"nexplayer_IconTriangle nexplayer_icon",style:{backgroundImage:"url("+s.default+")"}})))}}]),a}(i.default.Component),o=(0,o.connect)(function(e){return{duration:e.NexPlayerReducer.duration,clientPosition:e.NexPlayerReducer.clientPosition,marginSeekbarLeft:e.NexPlayerReducer.marginSeekbarLeft,seekbarWidth:e.NexPlayerReducer.seekbarWidth,currentItem:e.NexPlayerReducer.currentPlaylistItem,marginVideoLeft:e.NexPlayerReducer.marginVideoLeft,thumbnails:e.NexPlayerReducer.thumbnails,div:e.NexPlayerReducer.div}},{})(a);t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=u(a(7)),o=a(13),s=a(15),l=u(a(150));function u(e){return e&&e.__esModule?e:{default:e}}var c=[{value:.25,label:"0.25"},{value:.5,label:"0.5"},{value:1,label:"Normal"},{value:1.5,label:"1.5"},{value:2,label:"2"}],a=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var t=this,e=(a.__proto__||Object.getPrototypeOf(a)).call(this,e);if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"changeSpeed",value:function(e){this.props.onSpeed(e.value)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t=this;return i.default.createElement("div",{className:"nexplayer_option_ui",style:{right:"0px"}},i.default.createElement(l.default,{className:"form-field-name combobox",searchable:!1,clearable:!1,options:c,onChange:function(e){t.changeSpeed(e)},value:1}))}}]),a}(i.default.Component),s={onSpeed:s.ActionSetSpeed},o=(0,o.connect)(function(e){return{currentState:e.NexPlayerReducer.status}},s)(a);t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=l(a(7)),o=a(13),s=l(a(150)),a=a(15);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=a;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);function a(e){if(this instanceof a)return(e=function(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))).state={optionsArray:[],selectedQuality:""},e;throw new TypeError("Cannot call a class as a function")}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(a,[{key:"componentWillReceiveProps",value:function(){for(var e=this.props.allQuality,t=[{value:-1,label:"auto"}],a=0;a<e.length;a++)t.push({value:a,label:e[a].width+"x"+e[a].height});this.setState({optionsArray:t})}},{key:"changeQuality",value:function(e){this.props.onQuality(e.value),this.setState({selectedQuality:e})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.selectedQuality!==t.selectedQuality||this.state.optionsArray.length!==t.optionsArray.length}},{key:"render",value:function(){var t=this;return 1<this.state.optionsArray.length?i.default.createElement("div",{className:"nexplayer_option_ui",style:{right:"0px"}},i.default.createElement(s.default,{className:"form-field-name combobox",searchable:!1,clearable:!1,options:this.state.optionsArray,onChange:function(e){t.changeQuality(e)},value:this.state.selectedQuality})):""}}]),a}(i.default.Component),a={onQuality:a.ActionSetQuality},o=(0,o.connect)(function(e){return{currentState:e.NexPlayerReducer.status,allQuality:e.NexPlayerReducer.allQuality}},a)(u);t.default=o},function(e,t,a){"use strict";e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgZmlsbD0id2hpdGUiIGJhY2tncm91bmQ9IndoaXRlIiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDU5IDQ1OSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDU5IDQ1OTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9InJlcGx5Ij4NCgkJPHBhdGggZD0iTTE3OC41LDE0MC4yNXYtMTAyTDAsMjE2Ljc1bDE3OC41LDE3OC41VjI5MC43YzEyNy41LDAsMjE2Ljc1LDQwLjgsMjgwLjUsMTMwLjA1QzQzMy41LDI5My4yNSwzNTcsMTY1Ljc1LDE3OC41LDE0MC4yNXoiDQoJCQkvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K"},function(e,t,a){"use strict";var v=a(254).forEach,o=a(613),s=a(614),l=a(615),u=a(616),c=a(617),d=a(255),h=a(618),_=a(620),k=a(621),b=a(622);function S(e){return Array.isArray(e)||void 0!==e.length}function E(e){var t;return Array.isArray(e)?e:(t=[],v(e,function(e){t.push(e)}),t)}function T(e){return e&&1===e.nodeType}function x(e,t,a){e=e[t];return null==e&&void 0!==a?a:e}e.exports=function(t){a=(t=t||{}).idHandler?{get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set}:(e=l(),u({idGenerator:e,stateHandler:_}));var a,p,f=t.reporter,e=(f=f||c(!1===f),x(t,"batchProcessor",h({reporter:f}))),r={},n=(r.callOnAdd=!!x(t,"callOnAdd",!0),r.debug=!!x(t,"debug",!1),s(a)),m=o({stateHandler:_}),i=x(t,"strategy","object"),g=x(t,"important",!1),e={reporter:f,batchProcessor:e,stateHandler:_,idHandler:a,important:g};if("scroll"===i&&(d.isLegacyOpera()?(f.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),i="object"):d.isIE(9)&&(f.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),i="object")),"scroll"===i)p=b(e);else{if("object"!==i)throw new Error("Invalid strategy name: "+i);p=k(e)}var y={};return{listenTo:function(e,i,o){function s(t){var e=n.get(t);v(e,function(e){e(t)})}function l(e,t,a){n.add(t,a),e&&a(t)}if(o||(o=i,i=e,e={}),!i)throw new Error("At least one element required.");if(!o)throw new Error("Listener required.");if(T(i))i=[i];else{if(!S(i))return f.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");i=E(i)}var u=0,c=x(e,"callOnAdd",r.callOnAdd),d=x(e,"onReady",function(){}),h=x(e,"debug",r.debug);v(i,function(e){_.getState(e)||(_.initState(e),a.set(e));var n=a.get(e);if(h&&f.log("Attaching listener to element",n,e),!m.isDetectable(e))return h&&f.log(n,"Not detectable."),m.isBusy(e)?(h&&f.log(n,"System busy making it detectable"),l(c,e,o),y[n]=y[n]||[],void y[n].push(function(){++u===i.length&&d()})):(h&&f.log(n,"Making detectable..."),m.markBusy(e,!0),p.makeDetectable({debug:h,important:g},e,function(e){var t,a,r;h&&f.log(n,"onElementDetectable"),_.getState(e)?(m.markAsDetectable(e),m.markBusy(e,!1),p.addListener(e,s),l(c,e,o),(t=_.getState(e))&&t.startSize&&(a=e.offsetWidth,r=e.offsetHeight,t.startSize.width===a&&t.startSize.height===r||s(e)),y[n]&&v(y[n],function(e){e()})):h&&f.log(n,"Element uninstalled before being detectable."),delete y[n],++u===i.length&&d()}));h&&f.log(n,"Already detecable, adding listener."),l(c,e,o),u++}),u===i.length&&d()},removeListener:n.removeListener,removeAllListeners:n.removeAllListeners,uninstall:function(e){if(!e)return f.error("At least one element is required.");if(T(e))e=[e];else{if(!S(e))return f.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=E(e)}v(e,function(e){n.removeAllListeners(e),p.uninstall(e),_.cleanState(e)})},initDocument:function(e){p.initDocument&&p.initDocument(e)}}}},function(e,t,a){"use strict";e.exports=function(e){var a=e.stateHandler.getState;return{isDetectable:function(e){return(e=a(e))&&!!e.isDetectable},markAsDetectable:function(e){a(e).isDetectable=!0},isBusy:function(e){return!!a(e).busy},markBusy:function(e,t){a(e).busy=!!t}}}},function(e,t,a){"use strict";e.exports=function(a){var r={};function i(e){e=a.get(e);return void 0!==e&&r[e]||[]}return{get:i,add:function(e,t){e=a.get(e),r[e]||(r[e]=[]),r[e].push(t)},removeListener:function(e,t){for(var a=i(e),r=0,n=a.length;r<n;++r)if(a[r]===t){a.splice(r,1);break}},removeAllListeners:function(e){(e=i(e))&&(e.length=0)}}}},function(e,t,a){"use strict";e.exports=function(){var e=1;return{generate:function(){return e++}}}},function(e,t,a){"use strict";e.exports=function(e){var a=e.idGenerator,r=e.stateHandler.getState;return{get:function(e){return(e=r(e))&&void 0!==e.id?e.id:null},set:function(e){var t;if(e=r(e))return t=a.generate(),e.id=t;throw new Error("setId required the element to have a resize detection state.")}}}},function(e,t,a){"use strict";e.exports=function(e){function t(){}var a={log:t,warn:t,error:t};return!e&&window.console&&((e=function(e,a){e[a]=function(){var e=console[a];if(e.apply)e.apply(console,arguments);else for(var t=0;t<arguments.length;t++)e(arguments[t])}})(a,"log"),e(a,"warn"),e(a,"error")),a}},function(e,t,a){"use strict";var u=a(619);function c(){var r={},a=0,n=0,i=0;return{add:function(e,t){t||(t=e,e=0),n<e?n=e:e<i&&(i=e),r[e]||(r[e]=[]),r[e].push(t),a++},process:function(){for(var e=i;e<=n;e++)for(var t=r[e],a=0;a<t.length;a++)(0,t[a])()},size:function(){return a}}}e.exports=function(e){var t,a=(e=e||{}).reporter,r=u.getOption(e,"async",!0),n=u.getOption(e,"auto",!0),i=(n&&!r&&(a&&a.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),r=!0),c()),o=!1;function s(){for(o=!0;i.size();){var e=i;i=c(),e.process()}o=!1}function l(){t=function(e){return setTimeout(e,0)}(s)}return{add:function(e,t){!o&&n&&r&&0===i.size()&&l(),i.add(e,t)},force:function(e){o||(void 0===e&&(e=r),t&&(clearTimeout(t),t=null),(e?l:s)())}}}},function(e,t,a){"use strict";(e.exports={}).getOption=function(e,t,a){e=e[t];return null!=e||void 0===a?e:a}},function(e,t,a){"use strict";var r="_erd";function n(e){return e[r]}e.exports={initState:function(e){return e[r]={},n(e)},getState:n,cleanState:function(e){delete e[r]}}},function(e,t,a){"use strict";var p=a(255);e.exports=function(u){var c=(u=u||{}).reporter,d=u.batchProcessor,h=u.stateHandler.getState;if(c)return{makeDetectable:function(l,e,t){function a(a,r){e=["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"],t=u.important?" !important; ":"; ";var n=(e.join(t)+t).trim(),i=!1,o=window.getComputedStyle(a),e=a.offsetWidth,t=a.offsetHeight;function s(){function e(){var e;"static"===o.position&&(a.style.setProperty("position","relative",l.important?"important":""),(e=function(e,t,a,r){a=a[r];"auto"!==a&&"0"!==a.replace(/[^-\d\.]/g,"")&&(e.warn("An element that is positioned static has style."+r+"="+a+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style.setProperty(r,"0",l.important?"important":""))})(c,a,o,"top"),e(c,a,o,"right"),e(c,a,o,"bottom"),e(c,a,o,"left"))}""!==o.position&&(e(),i=!0);var t=document.createElement("object");t.style.cssText=n,t.tabIndex=-1,t.type="text/html",t.setAttribute("aria-hidden","true"),t.onload=function(){i||e(),function e(t,a){var r;t.contentDocument?a(t.contentDocument):((r=h(t)).checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),r.checkForObjectDocumentTimeoutId=setTimeout(function(){r.checkForObjectDocumentTimeoutId=0,e(t,a)},100))}(this,function(e){r(a)})},p.isIE()||(t.data="about:blank"),h(a)&&(a.appendChild(t),h(a).object=t,p.isIE())&&(t.data="about:blank")}h(a).startSize={width:e,height:t},d?d.add(s):s()}t||(t=e,e=l,l=null),l=l||{},p.isIE(8)?t(e):a(e,t)},addListener:function(e,t){function a(){t(e)}if(p.isIE(8))h(e).object={proxy:a},e.attachEvent("onresize",a);else{var r=n(e);if(!r)throw new Error("Element is not detectable by this strategy.");r.contentDocument.defaultView.addEventListener("resize",a)}},uninstall:function(e){var t;h(e)&&(t=n(e))&&(p.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),h(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(h(e).checkForObjectDocumentTimeoutId),delete h(e).object)}};throw new Error("Missing required dependency: reporter.");function n(e){return h(e).object}}},function(e,t,a){"use strict";var R=a(254).forEach;e.exports=function(a){var S,e,t,r,E,T=(a=a||{}).reporter,x=a.batchProcessor,A=a.stateHandler.getState,P=(a.stateHandler.hasState,a.idHandler);if(!x)throw new Error("Missing required dependency: batchProcessor");if(T)return(e=document.createElement("div")).style.cssText=C(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]),(t=document.createElement("div")).style.cssText=C(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild),e=500-t.clientWidth,r=500-t.clientHeight,document.body.removeChild(t),S={width:e,height:r},E="erd_scroll_detection_container",n(window.document),{makeDetectable:function(m,g,e){function y(){if(m.debug){var e=Array.prototype.slice.call(arguments);if(e.unshift(P.get(g),"Scroll: "),T.log.apply)T.log.apply(null,e);else for(var t=0;t<e.length;t++)T.log(e[t])}}function n(e){e=A(e).container.childNodes[0],e=window.getComputedStyle(e);return!e.width||-1===e.width.indexOf("px")}function t(){var e=window.getComputedStyle(g),t={};return t.position=e.position,t.width=g.offsetWidth,t.height=g.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function a(){var e;y("storeStyle invoked."),A(g)?(e=t(),A(g).style=e):y("Aborting because element has been uninstalled")}function s(e,t,a){A(e).lastWidth=t,A(e).lastHeight=a}function o(){return 2*S.width+1}function l(){return 2*S.height+1}function u(e){return e+10+o()}function c(e){return e+10+l()}function d(e,t,a){var r=M(e),e=I(e),n=u(t),i=c(a),t=2*t+o(),a=2*a+l();r.scrollLeft=n,r.scrollTop=i,e.scrollLeft=t,e.scrollTop=a}function v(){var e,t=A(g).container;return t||((t=document.createElement("div")).className=E,t.style.cssText=C(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),(A(g).container=t).className+=" "+E+"_animation_active",g.appendChild(t),w(t,"animationstart",e=function(){A(g).onRendered&&A(g).onRendered()}),A(g).onAnimationStart=e),t}function r(){var e,t,a,r,n,i,o,s,l,u,c,d,h;function p(){var e=A(g);e&&e.onExpand?e.onExpand():y("Aborting expand scroll handler: element has been uninstalled")}function f(){var e=A(g);e&&e.onShrink?e.onShrink():y("Aborting shrink scroll handler: element has been uninstalled")}y("Injecting elements"),A(g)?("static"===(n=A(g).style).position&&(g.style.setProperty("position","relative",m.important?"important":""),(e=function(e,t,a,r){a=a[r];"auto"!==a&&"0"!==a.replace(/[^-\d\.]/g,"")&&(e.warn("An element that is positioned static has style."+r+"="+a+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)})(T,g,n,"top"),e(T,g,n,"right"),e(T,g,n,"bottom"),e(T,g,n,"left")),e=(e=A(g).container)||v(),n=S.width,r=S.height,t=C(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),a=C(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(a=(a=-(1+n))?a+"px":"0"),"top: "+(a=(a=-(1+r))?a+"px":"0"),"right: "+(a=(a=-n)?a+"px":"0"),"bottom: "+(n=(n=-r)?n+"px":"0")])),r=C(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),n=C(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),i=C(["position: absolute","left: 0","top: 0"]),o=C(["position: absolute","width: 200%","height: 200%"]),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div"),s.dir="ltr",s.style.cssText=t,s.className=E,l.className=E,l.style.cssText=a,u.style.cssText=r,c.style.cssText=i,d.style.cssText=n,h.style.cssText=o,u.appendChild(c),d.appendChild(h),l.appendChild(u),l.appendChild(d),s.appendChild(l),e.appendChild(s),w(u,"scroll",p),w(d,"scroll",f),A(g).onExpandScroll=p,A(g).onShrinkScroll=f):y("Aborting because element has been uninstalled")}function i(){function i(e,t,a){e=M(e).childNodes[0],t=u(t),a=c(a);e.style.setProperty("width",t+"px",m.important?"important":""),e.style.setProperty("height",a+"px",m.important?"important":"")}function a(e){var a=g.offsetWidth,r=g.offsetHeight,n=a!==A(g).lastWidth||r!==A(g).lastHeight;y("Storing current size",a,r),s(g,a,r),x.add(0,function(){var e,t;n&&(A(g)?o()?(m.debug&&(e=g.offsetWidth,t=g.offsetHeight,e===a&&t===r||T.warn(P.get(g),"Scroll: Size changed before updating detector elements.")),i(g,a,r)):y("Aborting because element container has not been initialized"):y("Aborting because element has been uninstalled"))}),x.add(1,function(){A(g)?o()?d(g,a,r):y("Aborting because element container has not been initialized"):y("Aborting because element has been uninstalled")}),n&&e&&x.add(2,function(){A(g)?o()?e():y("Aborting because element container has not been initialized"):y("Aborting because element has been uninstalled")})}function o(){return A(g).container}function r(){y("notifyListenersIfNeeded invoked");var e=A(g);return void 0===A(g).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?y("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?y("Not notifying: Size already notified"):(y("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void R(A(g).listeners,function(e){e(g)}))}function e(){y("Scroll detected."),n(g)?y("Scroll event fired while unrendered. Ignoring..."):a(r)}var t;y("registerListenersAndPositionElements invoked."),A(g)?(A(g).onRendered=function(){var e,t;y("startanimation triggered."),n(g)?y("Ignoring since element is still unrendered..."):(y("Element rendered."),e=M(g),t=I(g),0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(y("Scrollbars out of sync. Updating detector elements..."),a(r)))},A(g).onExpand=e,A(g).onShrink=e,t=A(g).style,i(g,t.width,t.height)):y("Aborting because element has been uninstalled")}function h(){var e;y("finalizeDomMutation invoked."),A(g)?(e=A(g).style,s(g,e.width,e.height),d(g,e.width,e.height)):y("Aborting because element has been uninstalled")}function p(){e(g)}function f(){var e;y("Installing..."),A(g).listeners=[],e=t(),A(g).startSize={width:e.width,height:e.height},y("Element start size",A(g).startSize),x.add(0,a),x.add(1,r),x.add(2,i),x.add(3,h),x.add(4,p)}var _,k,b;e||(e=g,g=m,m=null),m=m||{},y("Making detectable..."),b=(k=_=g).getRootNode&&k.getRootNode().contains(k),k!==k.ownerDocument.body&&!k.ownerDocument.body.contains(k)&&!b||null===window.getComputedStyle(_)?(y("Element is detached"),v(),y("Waiting until element is attached..."),A(g).onRendered=function(){y("Element is now attached"),f()}):f()},addListener:function(e,t){if(!A(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");A(e).listeners.push(t)},uninstall:function(e){var t=A(e);t&&(t.onExpandScroll&&i(M(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&i(I(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&i(t.container,"animationstart",t.onAnimationStart),t.container)&&e.removeChild(t.container)},initDocument:n};throw new Error("Missing required dependency: reporter.");function n(e){var t,a,r,n=e,e="erd_scroll_detection_scrollbar_style",i=E;n.getElementById(e)||(r=i+"_animation",a=i+"_animation_active",t="/* Created by the element-resize-detector library. */\n",i=t=(t=(t+="."+i+" > div::-webkit-scrollbar { "+C(["display: none"])+" }\n\n")+"."+a+" { "+C(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+r,"animation-name: "+r])+" }\n")+"@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",a=(a=void 0)||function(e){n.head.appendChild(e)},(r=n.createElement("style")).innerHTML=i,r.id=e,a(r))}function C(e){var t=a.important?" !important; ":"; ";return(e.join(t)+t).trim()}function w(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent?e.attachEvent("on"+t,a):T.error("[scroll] Don't know how to add event listeners.")}function i(e,t,a){e.removeEventListener?e.removeEventListener(t,a):e.detachEvent?e.detachEvent("on"+t,a):T.error("[scroll] Don't know how to remove event listeners.")}function M(e){return A(e).container.childNodes[0].childNodes[0].childNodes[0]}function I(e){return A(e).container.childNodes[0].childNodes[0].childNodes[1]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=a(41);function i(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.initialStore,t=arguments[1];switch(t.type){case"PLAYING":return r({},e,{status:n.STATUS.PLAYING,order:{currentOrder:null,seekTo:t.seekValue}});case"PAUSE":return r({},e,{status:n.STATUS.PAUSE,order:{currentOrder:null,seekTo:t.seekValue}});case"LOADING":return r({},e,{status:n.STATUS.LOADING,order:{currentOrder:null,seekTo:t.seekValue}});case"ENDED":return r({},e,{status:n.STATUS.ENDED,order:{currentOrder:null,seekTo:-1}});case"CLOSED":return r({},e,{status:n.STATUS.CLOSED,order:{currentOrder:null,seekTo:-1}});case"ORDER_PLAY":return r({},e,{status:n.STATUS.PLAYING,order:{currentOrder:n.ORDER.PLAY,seekTo:t.seekValue},showingLanguageUI:!1});case"ORDER_PAUSE":return r({},e,{order:{currentOrder:n.ORDER.PAUSE,seekTo:t.seekValue},showingLanguageUI:!1});case"ORDER_SEEK":return r({},e,{status:n.STATUS.PAUSE,order:{currentOrder:n.ORDER.SEEK,seekTo:t.seekValue},isSeeking:!0,showingLanguageUI:!1});case"SHOW_THUMB":return r({},e,{clientPosition:t.clientPosition,marginSeekbarLeft:t.marginSeekbarLeft,seekbarWidth:t.seekbarWidth});case"LOAD_THUMB":return r({},e,{thumbnails:t.thumbnails});case"MARGIN_VIDEO":return r({},e,{marginVideoLeft:t.marginVideoLeft});case"ORDER_FULL_SCREEN":return r({},e,{order:{currentOrder:n.ORDER.FULL_SCREEN}});case"TIME_UPDATE":return r({},e,{currentTime:t.currentTime,duration:t.totalTime,currentTimeBuffer:t.currentTimeBuffer,isSeeking:t.isSeeking});case"UPDATE_AUDIOS":return r({},e,{allAudios:t.languages});case"UPDATE_SUBTITLES":return r({},e,{allSubtitles:t.subtitles});case"UPDATE_QUALITIES":return r({},e,{allQuality:t.qualities});case"SELECTED_AUDIO":return r({},e,{order:{currentOrder:n.ORDER.AUDIO},currentAudioLanguage:t.audio});case"USER_ACTIVE":return r({},e,{showingFullUI:!0});case"USER_IDLE":var a=e.status!==n.STATUS.PLAYING;return r({},e,{showingFullUI:a,showingLanguageUI:!1});case"SELECTED_SUBTITLE":return r({},e,{currentSubtitleLanguage:t.subtitle});case"CHANGED_VOLUME":return r({},e,{volume:t.volume});case"AD_STARTED":return r({},e,{isAdPlaying:!0});case"AD_ENDED":return r({},e,{isAdPlaying:!1});case"AD_UPDATE_CUE_POINTS":return r({},e,{adsMarkers:t.cues});case"INIT_URL":i(a={addRequestFilter:t.addRequestFilter,adsDelay:t.adsDelay,adsLoadTimeout:t.adsLoadTimeout,adsParamsToEncode:t.adsParamsToEncode,autoplay:t.autoplay,bitrateConfig:t.bitrateConfig,callbackForLogger:t.callbackForLogger,callbackForReturn:t.callbackForReturn,callbackForSubtitles:t.callbackForSubtitles,cast:t.cast,configuration:t.configuration,daiConfig:t.daiConfig,debug:t.debug,defaultLanguage:t.defaultLanguage,disableKeyEvents:t.disableKeyEvents,div:t.div,drm:t.drm,dynamicThumbnails:t.dynamicThumbnails,externalSubtitles:t.externalSubtitles,hideControlBarOnStart:t.hideControlBarOnStart,hideUITime:t.hideUITime,improveStartUp:t.improveStartUp,mutedAtStart:t.mutedAtStart,name:t.title,pageUrl:t.pageUrl,poster:t.poster,preferredAudioCodec:t.preferredAudioCodec,reinitializeAfterAds:t.reinitializeAfterAds,resumePosition:t.resumePosition,retryParameters:t.retryParameters,showAdsUI:t.showAdsUI,showingFullUI:t.showingFullUI,ssaiMediaTailor:t.ssaiMediaTailor,startingBufferLength:t.startingBufferLength,staticThumbnails:t.staticThumbnails,subtitle:t.subtitle,trailer:t.trailer,type_360:t.type_360,URL:t.src,useDefaultControls:t.useDefaultControls,useNewRelicTracker:t.useNewRelicTracker,vast:t.vast},"bitrateConfig",t.bitrateConfig),i(a,"backupManifests",t.backupManifests),i(a,"preferredVideoCodec",t.preferredVideoCodec),i(a,"enableVpaid",t.enableVpaid);return r({},e,(i(a={callbackForLogger:t.callbackForLogger,callbackForReturn:t.callbackForReturn,callbackForSubtitles:t.callbackForSubtitles,callbacksWithPlayers:t.callbacks,currentPlaylistItem:a,debug:t.debug,defaultLanguage:t.defaultLanguage,div:t.div,type_360:t.type_360,externalSubtitles:t.externalSubtitles,hideControlBarOnStart:t.hideControlBarOnStart,hideUITime:t.hideUITime,key:t.key,playlist:[a],retryParameters:t.retryParameters,startFullScreen:t.startFullScreen,status:n.STATUS.LOADING,useDefaultControls:t.useDefaultControls,watermarkURL:t.logosrc,addRequestFilter:(void 0===t.addRequestFilter?e:t).addRequestFilter,adsDelay:(void 0===t.adsDelay?e:t).adsDelay,adsLoadTimeout:(void 0===t.adsLoadTimeout?e:t).adsLoadTimeout,adsMode:(void 0===t.adsMode?e:t).adsMode,adsParamsToEncode:(void 0===t.adsParamsToEncode?e:t).adsParamsToEncode,autoplay:(void 0===t.autoplay?e:t).autoplay,bitrateConfig:(void 0===t.bitrateConfig?e:t).bitrateConfig,configuration:(void 0===t.configuration?e:t).configuration,daiConfig:(void 0===t.daiConfig?e:t).daiConfig,disableKeyEvents:(void 0===t.disableKeyEvents?e:t).disableKeyEvents,improveStartUp:(void 0===t.improveStartUp?e:t).improveStartUp,mutedAtStart:(void 0===t.mutedAtStart?e:t).mutedAtStart,pageUrl:(void 0===t.pageUrl?e:t).pageUrl,preferredAudioCodec:(void 0===t.preferredAudioCodec?e:t).preferredAudioCodec,reinitializeAfterAds:(void 0===t.reinitializeAfterAds?e:t).reinitializeAfterAds,resumePosition:(void 0===t.resumePosition?e:t).resumePosition,showAdsUI:(void 0===t.showAdsUI?e:t).showAdsUI,showingFullUI:(void 0===t.showingFullUI?e:t).showingFullUI,ssaiMediaTailor:(void 0===t.ssaiMediaTailor?e:t).ssaiMediaTailor},"startFullScreen",(void 0===t.startFullScreen?e:t).startFullScreen),i(a,"startingBufferLength",(void 0===t.startingBufferLength?e:t).startingBufferLength),i(a,"trailer",(void 0===t.trailer?e:t).trailer),i(a,"useNewRelicTracker",(void 0===t.useNewRelicTracker?e:t).useNewRelicTracker),i(a,"wmInfo",t.wmInfo),i(a,"bitrateConfig",(void 0===t.bitrateConfig?e:t).bitrateConfig),i(a,"backupManifests",(void 0===t.backupManifests?e:t).backupManifests),i(a,"wmInfo",t.wmInfo),i(a,"daiConfig",t.daiConfig),i(a,"pageUrl",t.pageUrl),i(a,"preferredVideoCodec",(void 0===t.preferredVideoCodec?e:t).preferredVideoCodec),i(a,"enableVpaid",(void 0===t.enableVpaid?e:t).enableVpaid),a));case"HIDE_LANGUAGE":return r({},e,{showingLanguageUI:!1});case"SHOW_LANGUAGE":return r({},e,{showingLanguageUI:!0});case"SIZE":return r({},e,{size:t.newSize});case"IS_LIVE":return r({},e,{isLive:!0});case"IS_NOT_LIVE":return r({},e,{isLive:!1});case"UN_MUTE_CALLBACK":return r({},e,{unMuteCallback:t.unMuteCallback});case"AIRPLAY_ENABLED":return r({},e,{airPlayEnabled:!0});case"CHROMECAST_ENABLED":return r({},e,{chromeCastEnabled:!0});case"CHANGED_SPEED":return r({},e,{order:{currentOrder:n.ORDER.SPEED,speed:t.speed}});case"CHANGED_QUALITY":return r({},e,{order:{currentOrder:n.ORDER.QUALITY,quality:t.quality}});case"UPDATE_AD_CUES":return r({},e,{adsCues:t.adsCues});case"PLAYER_INITIALIZED":return r({},e,{player:t.player});default:return e}}}])});